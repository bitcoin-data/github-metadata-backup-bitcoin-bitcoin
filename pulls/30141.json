{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141",
    "id": 1877177962,
    "node_id": "PR_kwDOABII585v43Zq",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30141",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30141.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30141.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/064a401e10f2b2da8f31f682929431d06c671d93",
    "number": 30141,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "kernel: De-globalize validation caches",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The validation caches are currently setup independently from where the rest of the validation code is initialized. This makes their ownership semantics unclear. There is also no clear enforcement on when and in what order they need to be initialized. The caches are always initialized in the `BasicTestingSetup` although a number of tests don't actually need them.\r\n\r\nSolve this by moving the caches from global scope into the `ChainstateManager` class. This simplifies the usage of the kernel library by no longer requiring manual setup of the caches prior to using the `ChainstateManager`. Tests that need to access the caches can instantiate them independently.\r\n\r\n---\r\nThis pull request is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587).",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2024-05-19T14:17:42Z",
    "updated_at": "2024-06-28T15:55:17Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "c78bdd62ef47ac8eea0fc41fe864003bc7855023",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "TheCharlatan:noGlobalScriptCache",
      "ref": "noGlobalScriptCache",
      "sha": "064a401e10f2b2da8f31f682929431d06c671d93",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 94456368,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NDQ1NjM2OA==",
        "name": "bitcoin",
        "full_name": "TheCharlatan/bitcoin",
        "owner": {
          "login": "TheCharlatan",
          "id": 8421793,
          "node_id": "MDQ6VXNlcjg0MjE3OTM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheCharlatan",
          "html_url": "https://github.com/TheCharlatan",
          "followers_url": "https://api.github.com/users/TheCharlatan/followers",
          "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
          "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
          "repos_url": "https://api.github.com/users/TheCharlatan/repos",
          "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/TheCharlatan/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/TheCharlatan/bitcoin",
        "archive_url": "https://api.github.com/repos/TheCharlatan/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheCharlatan/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheCharlatan/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheCharlatan/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheCharlatan/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheCharlatan/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheCharlatan/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheCharlatan/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheCharlatan/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheCharlatan/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheCharlatan/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheCharlatan/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheCharlatan/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheCharlatan/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheCharlatan/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheCharlatan/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheCharlatan/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheCharlatan/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/hooks",
        "svn_url": "https://github.com/TheCharlatan/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 239986,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-28T15:41:04Z",
        "created_at": "2017-06-15T16:03:35Z",
        "updated_at": "2024-06-24T13:35:09Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2f6dca4d1c01ee47275a4292f128d714736837a1",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35582,
        "stargazers_count": 77045,
        "watchers_count": 77045,
        "size": 262278,
        "default_branch": "master",
        "open_issues_count": 688,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-28T15:48:45Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-28T14:55:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 199,
    "deletions": 262,
    "changed_files": 19,
    "commits": 6,
    "review_comments": 42,
    "comments": 13
  },
  "events": [
    {
      "event": "commented",
      "id": 2119254138,
      "node_id": "IC_kwDOABII585-UUB6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2119254138",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-19T14:17:45Z",
      "updated_at": "2024-06-28T15:55:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30141).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2066739761), [theuni](https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2197223467) |\n| Stale ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2180895187), [stickies-v](https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2196845660) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30344](https://github.com/bitcoin/bitcoin/pull/30344) (kernel: remove mempool_persist by theuni)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n* [#30332](https://github.com/bitcoin/bitcoin/pull/30332) (Stratum v2 connectivity by Sjors)\n* [#29745](https://github.com/bitcoin/bitcoin/pull/29745) (bench: Adds a benchmark for CheckInputScripts by kevkevinpal)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n* [#29432](https://github.com/bitcoin/bitcoin/pull/29432) (Stratum v2 Template Provider (take 3) by Sjors)\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) ([WIP] Cluster mempool implementation by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2119254138",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "labeled",
      "id": 12858538525,
      "node_id": "LE_lADOABII586JXeoFzwAAAAL-bbod",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12858538525",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-19T14:17:47Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "ready_for_review",
      "id": 12858899189,
      "node_id": "RFRE_lADOABII586JXeoFzwAAAAL-czr1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12858899189",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-19T17:36:25Z"
    },
    {
      "event": "reviewed",
      "id": 2066739761,
      "node_id": "PRR_kwDOABII5857L_Ix",
      "url": null,
      "actor": null,
      "commit_id": "79c9c55b27bd113885da2c36ad76e5ed145027b3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2066739761",
      "submitted_at": "2024-05-20T18:09:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "reviewed",
      "id": 2066845490,
      "node_id": "PRR_kwDOABII5857MY8y",
      "url": null,
      "actor": null,
      "commit_id": "79c9c55b27bd113885da2c36ad76e5ed145027b3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK. Nice.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2066845490",
      "submitted_at": "2024-05-20T19:09:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "reviewed",
      "id": 2066862012,
      "node_id": "PRR_kwDOABII5857Mc-8",
      "url": null,
      "actor": null,
      "commit_id": "79c9c55b27bd113885da2c36ad76e5ed145027b3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2066862012",
      "submitted_at": "2024-05-20T19:19:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12876273607,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAL_fFfH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12876273607",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T08:36:53Z"
    },
    {
      "event": "commented",
      "id": 2122100379,
      "node_id": "IC_kwDOABII585-fK6b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2122100379",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T08:47:10Z",
      "updated_at": "2024-05-21T08:47:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated 79c9c55b27bd113885da2c36ad76e5ed145027b3 -> 4a1df97a016935348e50f384ed52a6671990835f ([noGlobalScriptCache_0](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_0) -> [noGlobalScriptCache_1](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_0..noGlobalScriptCache_1))\r\n\r\n* Addressed @theuni's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1607175446), made `CSignatureCache` more RAII styled.\r\n* Addressed @ajtowns's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1607094214), applied his suggestion of dropping the error handling if the cache size exceeds the `uint32_t` maximum value.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2122100379",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 12876416884,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAL_fod0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12876416884",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T08:47:11Z"
    },
    {
      "event": "subscribed",
      "id": 12876416899,
      "node_id": "SE_lADOABII586JXeoFzwAAAAL_foeD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12876416899",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T08:47:11Z"
    },
    {
      "event": "mentioned",
      "id": 12876416924,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAL_foec",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12876416924",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T08:47:11Z"
    },
    {
      "event": "subscribed",
      "id": 12876416944,
      "node_id": "SE_lADOABII586JXeoFzwAAAAL_foew",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12876416944",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T08:47:11Z"
    },
    {
      "event": "reviewed",
      "id": 2069624268,
      "node_id": "PRR_kwDOABII5857W_XM",
      "url": null,
      "actor": null,
      "commit_id": "4a1df97a016935348e50f384ed52a6671990835f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2069624268",
      "submitted_at": "2024-05-21T21:06:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12885606054,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMACr6m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12885606054",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T21:20:35Z"
    },
    {
      "event": "commented",
      "id": 2123462834,
      "node_id": "IC_kwDOABII585-kXiy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2123462834",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T21:20:58Z",
      "updated_at": "2024-05-21T21:20:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated 4a1df97a016935348e50f384ed52a6671990835f -> 5b1576bbc664a07e00b5528e13c1928df9bc9b0c ([noGlobalScriptCache_1](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_1) -> [noGlobalScriptCache_2](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_2), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_1..noGlobalScriptCache_2))\r\n\r\n* Addressed @theuni's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1608951984), fixed outdated comment.\r\n",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2123462834",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 12885609750,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMACs0W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12885609750",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T21:21:00Z"
    },
    {
      "event": "subscribed",
      "id": 12885609764,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMACs0k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12885609764",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T21:21:00Z"
    },
    {
      "event": "labeled",
      "id": 12887758389,
      "node_id": "LE_lADOABII586JXeoFzwAAAAMAK5Y1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12887758389",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T03:26:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 12892297104,
      "node_id": "UNLE_lADOABII586JXeoFzwAAAAMAcNeQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12892297104",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-22T10:32:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13191772112,
      "node_id": "LE_lADOABII586JXeoFzwAAAAMSSnfQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13191772112",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T21:16:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13197526877,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMSokdd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13197526877",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T08:40:11Z"
    },
    {
      "event": "commented",
      "id": 2175538120,
      "node_id": "IC_kwDOABII586BrBPI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2175538120",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T08:40:29Z",
      "updated_at": "2024-06-18T08:40:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased 5b1576bbc664a07e00b5528e13c1928df9bc9b0c -> 63923c8da686da42f522771f338ea8f2a4f4e568 ([noGlobalScriptCache_2](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_2) -> [noGlobalScriptCache_3](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_2..noGlobalScriptCache_3))\r\n\r\n* Fixed conflict with #30058",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2175538120",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "unlabeled",
      "id": 13198494191,
      "node_id": "UNLE_lADOABII586JXeoFzwAAAAMSsQnv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13198494191",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-18T09:52:05Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2125109551,
      "node_id": "PRR_kwDOABII585-qpkv",
      "url": null,
      "actor": null,
      "commit_id": "63923c8da686da42f522771f338ea8f2a4f4e568",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 63923c8da686da42f522771f338ea8f2a4f4e568",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2125109551",
      "submitted_at": "2024-06-18T20:47:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13212889876,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMTjLMU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13212889876",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T08:57:06Z"
    },
    {
      "event": "commented",
      "id": 2178139748,
      "node_id": "IC_kwDOABII586B08Zk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2178139748",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T08:57:11Z",
      "updated_at": "2024-06-19T08:57:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for the review @stickies-v,\r\n\r\n63923c8da686da42f522771f338ea8f2a4f4e568 -> 6ad4aa82056030a8a72b1315676e0703c1500d0d ([noGlobalScriptCache_3](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_3) -> [noGlobalScriptCache_4](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_3..noGlobalScriptCache_4))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1644415772), deleting copy and move constructor of the newly introduced `ValidationCache` class.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645009465), applying the suggestion of making the pre-initialized hasher private and adding a getter for it.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2178139748",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13212891323,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMTjLi7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13212891323",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T08:57:13Z"
    },
    {
      "event": "subscribed",
      "id": 13212891339,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMTjLjL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13212891339",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T08:57:13Z"
    },
    {
      "event": "reviewed",
      "id": 2128427867,
      "node_id": "PRR_kwDOABII585-3Ttb",
      "url": null,
      "actor": null,
      "commit_id": "f015a501e4bbb4985b52783591031e4e39496009",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2128427867",
      "submitted_at": "2024-06-19T14:17:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13218037363,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMT2z5z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13218037363",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T15:15:54Z"
    },
    {
      "event": "commented",
      "id": 2178956138,
      "node_id": "IC_kwDOABII586B4Dtq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2178956138",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T15:15:59Z",
      "updated_at": "2024-06-19T15:15:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "6ad4aa82056030a8a72b1315676e0703c1500d0d -> fa660a266b3aa03f40c47a9330e3bce8be89bb54 ([noGlobalScriptCache_4](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_4) -> [noGlobalScriptCache_5](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_4..noGlobalScriptCache_5))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645856227), changing integer type of `requested_num_elems`.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646290588), reverting introduction of a separate `m_validation_cache` member in the `Dersig100Setup` testing class and instead using `m_node.chainman->m_validation_cache`.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2178956138",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13218038633,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMT20Np",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13218038633",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T15:16:00Z"
    },
    {
      "event": "subscribed",
      "id": 13218038644,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMT20N0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13218038644",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T15:16:00Z"
    },
    {
      "event": "mentioned",
      "id": 13218038655,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMT20N_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13218038655",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T15:16:01Z"
    },
    {
      "event": "subscribed",
      "id": 13218038668,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMT20OM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13218038668",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-19T15:16:01Z"
    },
    {
      "event": "reviewed",
      "id": 2128584316,
      "node_id": "PRR_kwDOABII585-3558",
      "url": null,
      "actor": null,
      "commit_id": "f1dad94b9d51db6dc7702e51f943c24a17222b1a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2128584316",
      "submitted_at": "2024-06-19T15:19:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13227202074,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMUZxYa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13227202074",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T10:47:50Z"
    },
    {
      "event": "commented",
      "id": 2180376101,
      "node_id": "IC_kwDOABII586B9eYl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2180376101",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T10:47:54Z",
      "updated_at": "2024-06-20T10:47:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "fa660a266b3aa03f40c47a9330e3bce8be89bb54 -> f946b083fe1431fb8d5d2c080ed3c2938116c37a ([noGlobalScriptCache_5](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_5) -> [noGlobalScriptCache_6](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_6), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_5..noGlobalScriptCache_6))\r\n\r\n* Addressed @maflcko's [nit](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646381635), removing unnecessary casts by using a template param and allowing type narrowing instead.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2180376101",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13227203044,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMUZxnk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13227203044",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T10:47:55Z"
    },
    {
      "event": "subscribed",
      "id": 13227203059,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMUZxnz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13227203059",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T10:47:56Z"
    },
    {
      "event": "reviewed",
      "id": 2128595258,
      "node_id": "PRR_kwDOABII585-38k6",
      "url": null,
      "actor": null,
      "commit_id": "f946b083fe1431fb8d5d2c080ed3c2938116c37a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "lgtm ACK f946b083fe1431fb8d5d2c080ed3c2938116c37a ðŸ“ª\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: lgtm ACK f946b083fe1431fb8d5d2c080ed3c2938116c37a ðŸ“ª\r\n+e/Gr2EKw0EMF23Rn1I/M82DRXfwFyZ4Z4OTj9mkYl5Ts/2bHRLeFTINRyp5/NELtGmmoWQsNpJJtGXbXGW2BA==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2128595258",
      "submitted_at": "2024-06-20T13:53:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "review_requested",
      "id": 13229649807,
      "node_id": "RRE_lADOABII586JXeoFzwAAAAMUjG-P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13229649807",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T13:53:29Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 13229649971,
      "node_id": "RRE_lADOABII586JXeoFzwAAAAMUjHAz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13229649971",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T13:53:30Z",
      "requested_reviewer": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 13229650139,
      "node_id": "RRE_lADOABII586JXeoFzwAAAAMUjHDb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13229650139",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T13:53:31Z",
      "requested_reviewer": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13230322546,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMUlrNy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13230322546",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T14:36:31Z"
    },
    {
      "event": "commented",
      "id": 2180871592,
      "node_id": "IC_kwDOABII586B_XWo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2180871592",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T14:36:37Z",
      "updated_at": "2024-06-20T14:36:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "f946b083fe1431fb8d5d2c080ed3c2938116c37a -> 974934b3c23ce7f34ef46f3dfc13468cd46f4b8a ([noGlobalScriptCache_6](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_6) -> [noGlobalScriptCache_7](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_7), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_6..noGlobalScriptCache_7))\r\n\r\n* Addressed @maflcko's [nit](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647123546), removed unused includes.\r\n* Addressed @maflcko's [nit](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647514586), fixed ordering of changes.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2180871592",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13230324416,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMUlrrA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13230324416",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T14:36:39Z"
    },
    {
      "event": "subscribed",
      "id": 13230324435,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMUlrrT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13230324435",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T14:36:39Z"
    },
    {
      "event": "commented",
      "id": 2180895187,
      "node_id": "IC_kwDOABII586B_dHT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2180895187",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T14:46:46Z",
      "updated_at": "2024-06-20T14:46:46Z",
      "author_association": "MEMBER",
      "body": "ACK 974934b3c23ce7f34ef46f3dfc13468cd46f4b8a ðŸŒ¤\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: ACK 974934b3c23ce7f34ef46f3dfc13468cd46f4b8a ðŸŒ¤\r\nt0ljkEzhaLlyhqM3Wen2M5qYseMJ8IvP7zBw8W314vzPwSnjzO8HfmrSCiuIpIyFKH9EAxgkpqPBONPeTrvwAg==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2180895187",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "reviewed",
      "id": 2145715522,
      "node_id": "PRR_kwDOABII585_5QVC",
      "url": null,
      "actor": null,
      "commit_id": "974934b3c23ce7f34ef46f3dfc13468cd46f4b8a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK modulo the non-copyable comment.\r\n\r\nLooks good. Left some comments with a few nice-to-have's. I'm not sure how much trouble it'd be to pass in the nonces (and whether it's 100% safe to reuse them), so that might make more sense as a follow-up.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2145715522",
      "submitted_at": "2024-06-27T15:52:22Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "reviewed",
      "id": 2128509733,
      "node_id": "PRR_kwDOABII585-3nsl",
      "url": null,
      "actor": null,
      "commit_id": "974934b3c23ce7f34ef46f3dfc13468cd46f4b8a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 974934b3c23ce7f34ef46f3dfc13468cd46f4b8a\r\n\r\nReduces dependencies on globals, cleans up the code, and generally makes it more robust through more self-contained code using an RAII-like pattern for `ValidationCache`, not requiring manual initialization of the caches preventing footguns.\r\n\r\nI think is good as-is but would prefer addressing various outstanding nits from reviewers as I think some are important enough - will quickly re-ACK myself.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2128509733",
      "submitted_at": "2024-06-27T19:33:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "review_requested",
      "id": 13322662353,
      "node_id": "RRE_lADOABII586JXeoFzwAAAAMaF7HR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13322662353",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-27T19:33:55Z",
      "requested_reviewer": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzNjk2ODRlZmFkMDljN2I0OGM2NjllZTc3ZTA4OWRhMzQ4ZmI0OWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f369684efad09c7b48c669ee77e089da348fb49b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f369684efad09c7b48c669ee77e089da348fb49b",
      "tree": {
        "sha": "2019b1e8d1b5b9ed6e27d99948a87d6fc9dcf25e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2019b1e8d1b5b9ed6e27d99948a87d6fc9dcf25e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2019b1e8d1b5b9ed6e27d99948a87d6fc9dcf25e\nparent 41544b8f96dbc9c6b8998acd6522200d67cdc16d\nauthor TheCharlatan <seb.kung@gmail.com> 1716237152 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1719566421 +0200\n\nvalidation: Don't error if maxsigcachesize exceeds uint32::max\n\nInstead clamp it to uint32::max if it exceeds it.\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZ+gFUACgkQm3m0VpHb\nQXN2OhAAzK2tZryb9jIxZtajcYNh/C0LMebQ9PLCX5AKg8IfODxzWreoepj484PH\ngMorVFV/TWx5ZfF0iaCCSK4C2csqLJZu/KNQBHnfHnnHvGrYirMUf1xKkTsXcNs2\nMWTnWKA4VsN3aD3IwPUQAQIdx/utR6SSmymzlzS0RYuJwxHXO2bPPA92hVi3yGzY\nUP6KF+A5cYZuDeaBa7UhEbyStFBy8sTMcX6OylX+qwbtCCz3OABvzZMTqEDZ2rVp\nb3SUDKb3UXeJUpQLPH4mV8UQ/7ZbWTfthSE7MtVMhB19IqNWe0kqxbzr227Fl+/6\nn7u/4b+4+t1zez8IGWQUhtBnrEDsni1WINT8dc49+qovs3VA4Ngerd19hljNx1fP\nMVqsrR8jR/KkU8mjHnPPaQA+seXT+rO1wi8e7WyAog/UFy0jS4u5x4RnOX5ER2bZ\n9osk3m/dHOfvmi6ppjwh6oq388uk5RNZuikHgzIxZCa+u3pJ8TBXNmMMQ0ll82DI\n9BexEG688wZWM0QeYxtvaGIwa3SRfJJfnhG/t7U5MPr7gOmVtoiLw2WrjqeMwIMK\n5Bh7NvfvEkil1zMmLXpw+TUluHkDjQ2xKm4vTlKi4PlMAQdFx2W8XoTE0U/HQ8Ks\ncb3MEwuxdtdhhkpKUOJk31eb/y+m5xxF3D+n7bjjIzJ0r0mHvhw=\n=1hHs\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/41544b8f96dbc9c6b8998acd6522200d67cdc16d",
          "sha": "41544b8f96dbc9c6b8998acd6522200d67cdc16d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/41544b8f96dbc9c6b8998acd6522200d67cdc16d"
        }
      ],
      "message": "validation: Don't error if maxsigcachesize exceeds uint32::max\n\nInstead clamp it to uint32::max if it exceeds it.\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T09:20:21Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-20T20:32:32Z"
      },
      "sha": "f369684efad09c7b48c669ee77e089da348fb49b"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13330465221,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMajsHF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13330465221",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:37:14Z"
    },
    {
      "event": "commented",
      "id": 2196705221,
      "node_id": "IC_kwDOABII586C7w_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2196705221",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:37:15Z",
      "updated_at": "2024-06-28T11:52:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for the reviews @stickies-v and @theuni!\r\n\r\nUpdated 974934b3c23ce7f34ef46f3dfc13468cd46f4b8a -> 475c57ba482abd8675d0d3ccde98452808be5536 ([noGlobalScriptCache_7](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_7) -> [noGlobalScriptCache_8](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_8), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_7..noGlobalScriptCache_8))\r\n\r\n* Addressed @theuni's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657322116), removed unneeded using declaration.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646473144), removed incorrect description of cache size clamping behavior.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646343915), removed unneeded `optional` include.\r\n* Addressed @theuni's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657330024), marking getter for `m_script_execution_cache_hasher` as `const`.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646478869), fixing docstring typo for the script execution cache hasher.\r\n* Addressed @theuni's and @stickies-v's [comments](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657457261), removing the copy constructor of the `SignatureCache` class. Also removed the move constructor, since I don't see a good reason why that should be kept around either.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657671482), renaming `CSignatureCache` to `SignatureCache`.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657682792), moving `signature_cache` initialization closer to where it is used in `script_p2sh_tests.cpp`.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2196705221",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13330465842,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMajsQy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13330465842",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:37:17Z"
    },
    {
      "event": "subscribed",
      "id": 13330465848,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMajsQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13330465848",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:37:17Z"
    },
    {
      "event": "mentioned",
      "id": 13330465865,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMajsRJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13330465865",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:37:17Z"
    },
    {
      "event": "subscribed",
      "id": 13330465879,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMajsRX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13330465879",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:37:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13330627037,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMakTnd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13330627037",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T11:52:31Z"
    },
    {
      "event": "commented",
      "id": 2196845660,
      "node_id": "IC_kwDOABII586C8TRc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2196845660",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T12:57:07Z",
      "updated_at": "2024-06-28T12:57:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 475c57ba482abd8675d0d3ccde98452808be5536, addressing outstanding review nits / touchups, no fundamental changes.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2196845660",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "review_requested",
      "id": 13331354933,
      "node_id": "RRE_lADOABII586JXeoFzwAAAAManFU1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13331354933",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T12:57:11Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 2148094315,
      "node_id": "PRR_kwDOABII586ACVFr",
      "url": null,
      "actor": null,
      "commit_id": "475c57ba482abd8675d0d3ccde98452808be5536",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#pullrequestreview-2148094315",
      "submitted_at": "2024-06-28T14:01:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
    },
    {
      "event": "review_requested",
      "id": 13332184365,
      "node_id": "RRE_lADOABII586JXeoFzwAAAAMaqP0t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13332184365",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T14:01:08Z",
      "requested_reviewer": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIzYjBjZWQyOTE2ODVlMWQ5MmJjYjcwNDQxOGNhODNkNmY4YjU4ZGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3b0ced291685e1d92bcb704418ca83d6f8b58dc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b3b0ced291685e1d92bcb704418ca83d6f8b58dc",
      "tree": {
        "sha": "755adce3569327fc8211f3ea2d0c50f1b9f63dc6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/755adce3569327fc8211f3ea2d0c50f1b9f63dc6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 755adce3569327fc8211f3ea2d0c50f1b9f63dc6\nparent f369684efad09c7b48c669ee77e089da348fb49b\nauthor TheCharlatan <seb.kung@gmail.com> 1715981605 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1719586516 +0200\n\nkernel: De-globalize script execution cache\n\nMove its ownership to the ChainstateManager class.\n\nNext to simplifying usage of the kernel library by no longer requiring\nmanual setup of the cache prior to using validation code, it also slims\ndown the amount of memory allocated by BasicTestingSetup.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZ+ztQACgkQm3m0VpHb\nQXPRuw//cNDzPPF6CsFRcV0Zbd+314ZnasYc4qXbzRWLgTeRf4tQ/09Mvle69KRe\nMjJBqlUY1t4EQDZN+AZuyneCcqaQBb97bqylfRKPTKOAe4Vme8IxPUP+W29Tadf9\nSTPjfoNpEbwx56bYEha+absjvwMRpM2MaYZuBIAtfEK7uC8hVFGu6jaZF4OicZ+h\n2VijphVZYcZwd4xPI4Uad2203DTsdsRUDTFUYioc6p/q6bWC3lGYfeX6BxjnhBuh\ntsr9vEjOKgmPh+Nx8TcjsTb/drzQkikGPvo3rSWVppH8Dp8AmUWO8bSmsjoeUsWi\n0ODYeryeDa362h/dJmYlX+Shq00Zbc8amqeYuoBttemS9UJeQeMjK/vouQLzecX0\nbJuU56yX14F5sEbkt/P5PEnRh5G1sDs85FJb2ynQHITN6AtYQzbS85HIVQj35xPy\nhLvPFHWurREPqe7ocv9fihdxfsCpKcK6AgY7pj61/IvVTXZRWeVg9mtPjqrinojr\ntULP7Wgo1lD4bJHwTEirgByeM3sdkDHcn5vt8BTPOKaeWd90nEcbtpibfb5VN26c\nvLMQ5KkQksr+lTvd/ySINJHVhEvvTfDq04io0xxkQ87xmOJF7RpR6RaBoe7IY4aV\nnf6euiB06LVD3ghLedJeTLa7+P2oBEa5Gd0PsGfvYu1vmf8xe9Q=\n=M0L7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f369684efad09c7b48c669ee77e089da348fb49b",
          "sha": "f369684efad09c7b48c669ee77e089da348fb49b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f369684efad09c7b48c669ee77e089da348fb49b"
        }
      ],
      "message": "kernel: De-globalize script execution cache\n\nMove its ownership to the ChainstateManager class.\n\nNext to simplifying usage of the kernel library by no longer requiring\nmanual setup of the cache prior to using validation code, it also slims\ndown the amount of memory allocated by BasicTestingSetup.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T14:55:16Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T21:33:25Z"
      },
      "sha": "b3b0ced291685e1d92bcb704418ca83d6f8b58dc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYyNzQzY2QyNmNjNTgyYjVmOGU0YWU5ZDY3ODNjNWZkZmE3ZDgzNjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364",
      "tree": {
        "sha": "d83d805fa10d8fc04243f3ddbea4fc1c55e6815c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d83d805fa10d8fc04243f3ddbea4fc1c55e6815c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d83d805fa10d8fc04243f3ddbea4fc1c55e6815c\nparent b3b0ced291685e1d92bcb704418ca83d6f8b58dc\nauthor TheCharlatan <seb.kung@gmail.com> 1716059176 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1719586538 +0200\n\nkernel: De-globalize script execution cache hasher\n\nMove it to the ChainstateManager class.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZ+zusACgkQm3m0VpHb\nQXP9bBAAowOOukeiF5ZJjCeKmBkeO5LkXB0tLIypLxU2sCNNQxJJ2C62E+u+a1mf\nK0P0coQ07vN8fCRNE5fOTmkn+hTfc4grFr2CfCdM1jYfEcF7jsvTdpfExwf69xR9\nyV5YgTQguRJxlV7VI7jF58O0gEGeu2hwsYyNwY9UGtIC4/M/7FfgTwp5lenFu7zp\nhLS7k8C00ofSW38XFRnuqie+Kh4xk0ofW0Lw3viIsEehhSx15i3Q0gqBgA/Tpugo\ngacOLWoS4Jq86ScDqD9S1W/vTVE842fRPcoAGd3Ln62kMyBkbQ7pHfMg9uoD/zC9\nHX0u847JO+jJsy5eD5f0c0eVAb87ScgDZCZbD0EjHEZj747rGpKu27JvnqaqoN06\nMpV3iAUL+zl11UtLYHNsosx+0eR53RSkAQCRqT+QIZkcdtZwV423DoDNZjfHRrJp\nlVcGqcBqNEJ2NBfMwVM4hPMRigvlT+abJevTLswzPcsMP/YxRWmueDOgWUplCEQ/\nySJ9zfKYalewaS38096g2+gIW2xNWrsRzYnQvq2IBwhxTRYps/G8xWtDLDpvurdJ\nH0eUU/SUbpOisiSjYZb1dvr4DuzwLBuUJamowPAC9uu5uSyJcRB5M9APTj5Wfnwi\naNEIIBNYWKGvkt6rMQ04xAQclOm8usUWG1+dVYr2bZqVz4TOHDw=\n=O4nK\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3b0ced291685e1d92bcb704418ca83d6f8b58dc",
          "sha": "b3b0ced291685e1d92bcb704418ca83d6f8b58dc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b3b0ced291685e1d92bcb704418ca83d6f8b58dc"
        }
      ],
      "message": "kernel: De-globalize script execution cache hasher\n\nMove it to the ChainstateManager class.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T14:55:38Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-18T19:06:16Z"
      },
      "sha": "f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJjMmQ5YzdhYjY4OWIxMzNhNDc1MmY5YzFhYjc3N2ZjNjczYjU5Njg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c2d9c7ab689b133a4752f9c1ab777fc673b5968",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2c2d9c7ab689b133a4752f9c1ab777fc673b5968",
      "tree": {
        "sha": "0d401eb8242943c0c0ed0aa189fd7156c2e258e2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0d401eb8242943c0c0ed0aa189fd7156c2e258e2"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0d401eb8242943c0c0ed0aa189fd7156c2e258e2\nparent f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364\nauthor TheCharlatan <seb.kung@gmail.com> 1716061188 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1719588723 +0200\n\nExpose CSignatureCache class in header\n\nThis is done in preparation for the following commit. Also rename it to\nSignatureCache.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZ+14EACgkQm3m0VpHb\nQXNf9Q/+PeBSw6jIp1Sv6r2tZj2Fqt5g1/TCIrMRMPKbAH+1Nz3bijHonvrDVwyb\nwr9o6JphM/xjWh1LmjB9wyb3vl2znpqFX8W6P0uZvHuzh6YrH39UPYwoyF043C+k\nKNdqRR/qLJnkgqpMvuryDp6xhFDkppYmaqpoxW6hd1bwVT1nZLRb+U+1m/rQMcJ5\nNQblSfFJwOc2YNzK6zohikMNeo9+u7mi422TowkHQo3NzLaQsLCdhqwQTegCcYdR\nRz01yuQ08lLdhqp3G9V/mDbf9bvos+OmmGxH+jP9HK2Z3bQ7XeOTNOebZ9HTYb//\n4BdpaMeB8W32oluxm8Ihek1T5+jOsqsP41SPYC16TrjUxtkeQbHam4WC8sE9Z/IM\noS8Ml/+A6b0uQdRz0cHnMyRqAdDWJ8wlg62WEuSQl8TD+ueQGO9heQ7xnnzVIsk0\nsQRskw0tumWX9Nz4mQ0MpezcqdTvx1gnGTWhh8uT2pOtr3nSsVd4vzqsYRFhlnvD\nGkeyJ42wRcELw6yyAw5KDxYM0K73lzLmuegqhuKU1IcStPi7l0qgF4D1hogFk8CD\n+EAioHIBAWwliidlKujGTusaIlNeOqWyf1R5bi35q0ARrkNcCVL/XaNQq3hK4uoW\nF91S2aijRLRWG5Up++CTdBdpBBX3fPgBxWtId9DAi0pXYZWvQ/I=\n=f7Oq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364",
          "sha": "f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f2743cd26cc582b5f8e4ae9d6783c5fdfa7d8364"
        }
      ],
      "message": "Expose CSignatureCache class in header\n\nThis is done in preparation for the following commit. Also rename it to\nSignatureCache.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T15:32:03Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-18T19:39:48Z"
      },
      "sha": "2c2d9c7ab689b133a4752f9c1ab777fc673b5968"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI1Yjg0ZjAzODc2MzMzYjQwNzM2ODYxNGM3YzkwNGQ5YjA3NThhOGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25b84f03876333b407368614c7c904d9b0758a8a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/25b84f03876333b407368614c7c904d9b0758a8a",
      "tree": {
        "sha": "e3902b533aed7b3d5c4170fc8c372b66c6030f3e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3902b533aed7b3d5c4170fc8c372b66c6030f3e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e3902b533aed7b3d5c4170fc8c372b66c6030f3e\nparent 2c2d9c7ab689b133a4752f9c1ab777fc673b5968\nauthor TheCharlatan <seb.kung@gmail.com> 1716023924 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1719588744 +0200\n\nkernel: De-globalize signature cache\n\nMove its ownership to the ChainstateManager class.\n\nNext to simplifying usage of the kernel library by no longer requiring\nmanual setup of the cache prior to using validation code, it also slims\ndown the amount of memory allocated by BasicTestingSetup.\n\nUse this opportunity to make SignatureCache RAII styled\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZ+14gACgkQm3m0VpHb\nQXMbSg//cx2k/NEdNypAo8l+JuRQ+BZZ3QbJdxtSEVEg8QupSk0Hk6yBLb4ZCHF+\nvLRDjDpblpQ2rJ4Z+cUVIxio5hXqGcsz+bMcl0cfE92/EIIaVZfj9iRSJTyr2LVs\nS3iDybzwhCyzB9vp3k+nosoeuPdLkm2vztLaMK5gBpo7AuDu2CRr1blnZpM66P0F\nWTvKrGylQ84zEYqOLTNrQzAwhug1S67B5+Jxc+Jwyvn/CVquu6sXyHw8rc0YO5+E\nIR8ypA0y412CZfm/jaAkz1RAXK/wVLq9bG0D7tpNCdGYzeTSMVPks6dtk7lVZKcd\ne5O/bh9j43tTuROFD0j8e9i2Wk2kCqXFVCLRUKIJgphDT1H3hz1JwzvFZ7HmfLW1\n4wGRqC+YlyZ/ysDqGCIH+oQhG2CXzZwFD1ED204BRDYf21innIdeOdYHZ9K+2jTR\n3/ZEFHNWQtvQa1U+EsthYe1hv3HGYHfZAIIMwSCrjPLw0KWOc94C/NOPCB6H4QzS\nPvNJ80AkqIegnHgAH5bvD5Ip4VQM2rGQTK0NsTtyZPjemLrsLE+ywKKsE1mzCEuJ\nfMd7ZlfH1DpN8ZFD8tXw9cHiUG2wIxhtHF6mMiFs9fAU35TCO5f+5JTzq3X/xU9B\nUr/jy6Z7KrYB8rkHzd8SI3Lncrg7HBqgKnCW92xOyaCApt25l08=\n=k5W/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c2d9c7ab689b133a4752f9c1ab777fc673b5968",
          "sha": "2c2d9c7ab689b133a4752f9c1ab777fc673b5968",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2c2d9c7ab689b133a4752f9c1ab777fc673b5968"
        }
      ],
      "message": "kernel: De-globalize signature cache\n\nMove its ownership to the ChainstateManager class.\n\nNext to simplifying usage of the kernel library by no longer requiring\nmanual setup of the cache prior to using validation code, it also slims\ndown the amount of memory allocated by BasicTestingSetup.\n\nUse this opportunity to make SignatureCache RAII styled",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T15:32:24Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-18T09:18:44Z"
      },
      "sha": "25b84f03876333b407368614c7c904d9b0758a8a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13333433946,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMavA5a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333433946",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:38:52Z"
    },
    {
      "event": "commented",
      "id": 2197197304,
      "node_id": "IC_kwDOABII586C9pH4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197197304",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:38:55Z",
      "updated_at": "2024-06-28T15:41:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated 475c57ba482abd8675d0d3ccde98452808be5536 -> 064a401e10f2b2da8f31f682929431d06c671d93 ([noGlobalScriptCache_8](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_8) -> [noGlobalScriptCache_9](https://github.com/TheCharlatan/bitcoin/tree/noGlobalScriptCache_9), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalScriptCache_8..noGlobalScriptCache_9))\r\n\r\n* Addressed @theuni's [comment_1](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658797600) and [comment_2](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658806068), reverting deletion of the move constructor in the caches.\r\n* Addressed @theuni's [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658791383), fixup in the commit message.\r\n* Applied suggestion in @theuni's [comment_1](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657337310) and [comment_2](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657354399), making the nonce used to initialize the caches a constructor argument, as well as re-using the same nonce for both caches. I did not expose it as an argument to the chainstate manager, but I'm also not completely sure if it is generated in a better spot now.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2197197304",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13333434631,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMavBEH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333434631",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:38:57Z"
    },
    {
      "event": "subscribed",
      "id": 13333434645,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMavBEV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333434645",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:38:57Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA2NGE0MDFlMTBmMmIyZGE4ZjMxZjY4MjkyOTQzMWQwNmM2NzFkOTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/064a401e10f2b2da8f31f682929431d06c671d93",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/064a401e10f2b2da8f31f682929431d06c671d93",
      "tree": {
        "sha": "767714447661e170bf5076fb2de6f4fc7600f68f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/767714447661e170bf5076fb2de6f4fc7600f68f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 767714447661e170bf5076fb2de6f4fc7600f68f\nparent 25b84f03876333b407368614c7c904d9b0758a8a\nauthor TheCharlatan <seb.kung@gmail.com> 1719588261 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1719589203 +0200\n\nvalidation: Use a single nonce to initialize caches\n\nPotentially allowing a deterministic nonce to be passed in could also be\nuseful for future testing.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZ+2V8ACgkQm3m0VpHb\nQXNe7g//ZJKd3yiLR/vV56NeZxQLc6cX0rpGikE15McKC8pL1mgLJq2F2N6PKiEx\nIZV2dnruvx75rMbJXnVTwIcgV2FEgn+vybRfABE+fBfnM57E0g5IY2pjuRDqkQtD\nReeLy8TjtWMlEpcex6wAJuaQm5IxZaclqX+RaiHvcTmmEHf8eIucHMq8a/ZuicXd\nArQ4YjH6NS63rYYph9pmhWUX/hG0/sluyCc6fTfTOaMvZK9NGuuLpTWrON5xOoq1\nz7n0F4JxwIZ+F0jJvGK1A7//+O9cvBQrRs1uagjbD2T2hc+L4CXmqMyMEDTwU7Rn\nVYDaruOm7abhVmZLKwn8Vd8vfBeoMYxE9wxZ/NvAXVgvbHA7GKCi3283/FpPmrK8\nIJ9ssS214E5A9pSx7Y6SDLxEf39z8gdzdYmZNDX9dOKDGyyn+ihifcrkSYoC9HVt\ngEbX0wsop3NY1yq+Y7BR4YZsoig3qxqY6m5fq4P9uqlK+5NEOR5qDV25/tIrKCEu\n3DNWLBNmpWV4082IXuUNwdAWS9WrqpkIElj+GtWL934g2XqVwsZKshDuskdRIGz5\nWY6XqS4FiOVsjXgXG/InQ0rMzKZLBIS9u0BI0MXO4sgMEem+e6vTfNrymZdLQvUE\nqRe5vE8hk+MIxwHWz/8B5TCsb7gjiACKmxaGjHVfdTTVK+D5Rwg=\n=Hj92\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25b84f03876333b407368614c7c904d9b0758a8a",
          "sha": "25b84f03876333b407368614c7c904d9b0758a8a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/25b84f03876333b407368614c7c904d9b0758a8a"
        }
      ],
      "message": "validation: Use a single nonce to initialize caches\n\nPotentially allowing a deterministic nonce to be passed in could also be\nuseful for future testing.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T15:40:03Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-06-28T15:24:21Z"
      },
      "sha": "064a401e10f2b2da8f31f682929431d06c671d93"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13333456219,
      "node_id": "HRFPE_lADOABII586JXeoFzwAAAAMavGVb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333456219",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:41:06Z"
    },
    {
      "event": "commented",
      "id": 2197223467,
      "node_id": "IC_kwDOABII586C9vgr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197223467",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:55:14Z",
      "updated_at": "2024-06-28T15:55:14Z",
      "author_association": "MEMBER",
      "body": "> * Applied suggestion in @theuni's [comment_1](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657337310) and [comment_2](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657354399), making the nonce used to initialize the caches a constructor argument, as well as re-using the same nonce for both caches. I did not expose it as an argument to the chainstate manager, but I'm also not completely sure if it is generated in a better spot now.\r\n\r\nPaging @sipa for a quick concept ACK that use of a single nonce doesn't change any assumptions. See the comments above. ",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#issuecomment-2197223467",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30141"
    },
    {
      "event": "mentioned",
      "id": 13333599337,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMavpRp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333599337",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:55:15Z"
    },
    {
      "event": "subscribed",
      "id": 13333599344,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMavpRw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333599344",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:55:15Z"
    },
    {
      "event": "mentioned",
      "id": 13333599361,
      "node_id": "MEE_lADOABII586JXeoFzwAAAAMavpSB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333599361",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:55:15Z"
    },
    {
      "event": "subscribed",
      "id": 13333599370,
      "node_id": "SE_lADOABII586JXeoFzwAAAAMavpSK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13333599370",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T15:55:15Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607094214",
      "pull_request_review_id": 2066739761,
      "id": 1607094214,
      "node_id": "PRRC_kwDOABII585fyk_G",
      "diff_hunk": "@@ -924,7 +930,7 @@ class ChainstateManager\n public:\n     using Options = kernel::ChainstateManagerOpts;\n \n-    explicit ChainstateManager(const util::SignalInterrupt& interrupt, Options options, node::BlockManager::Options blockman_options);\n+    explicit ChainstateManager(const util::SignalInterrupt& interrupt, Options options, node::BlockManager::Options blockman_options, bilingual_str& error);",
      "path": "src/validation.h",
      "position": null,
      "original_position": 45,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "353ba0a19e73e888b5788f5fa10fca682b5ea4f5",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Rather than adding an error return in the constructor here, wouldn't it be better to change our cuckoo cache to clamp its size when given too large a value? ie, `InitScriptExecutionCache(135000000)` is treated as `134,217,727` instead? The value passed in is only used as an approximate target in the first place. Historical context is #25527.\r\n\r\n<details>\r\n<summary>(example patch)</summary>\r\n\r\n```diff\r\n--- a/src/cuckoocache.h\r\n+++ b/src/cuckoocache.h\r\n@@ -360,16 +360,16 @@ public:\r\n      * structure\r\n      * @returns A pair of the maximum number of elements storable (see setup()\r\n      * documentation for more detail) and the approximate total size of these\r\n-     * elements in bytes or std::nullopt if the size requested is too large.\r\n+     * elements in bytes.\r\n      */\r\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t bytes)\r\n+    std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\r\n     {\r\n         size_t requested_num_elems = bytes / sizeof(Element);\r\n         if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\r\n-            return std::nullopt;\r\n+            requested_num_elems = std::numeric_limits<uint32_t>::max();\r\n         }\r\n \r\n-        auto num_elems = setup(bytes/sizeof(Element));\r\n+        auto num_elems = setup(requested_num_elems);\r\n \r\n         size_t approx_size_bytes = num_elems * sizeof(Element);\r\n         return std::make_pair(num_elems, approx_size_bytes);\r\n--- a/src/script/sigcache.cpp\r\n+++ b/src/script/sigcache.cpp\r\n@@ -77,7 +77,7 @@ public:\r\n         std::unique_lock<std::shared_mutex> lock(cs_sigcache);\r\n         setValid.insert(entry);\r\n     }\r\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t n)\r\n+    std::pair<uint32_t, size_t> setup_bytes(size_t n)\r\n     {\r\n         return setValid.setup_bytes(n);\r\n     }\r\n@@ -96,10 +96,7 @@ static CSignatureCache signatureCache;\r\n // signatureCache.\r\n bool InitSignatureCache(size_t max_size_bytes)\r\n {\r\n-    auto setup_results = signatureCache.setup_bytes(max_size_bytes);\r\n-    if (!setup_results) return false;\r\n-\r\n-    const auto [num_elems, approx_size_bytes] = *setup_results;\r\n+    const auto [num_elems, approx_size_bytes] = signatureCache.setup_bytes(max_size_bytes);\r\n     LogPrintf(\"Using %zu MiB out of %zu MiB requested for signature cache, able to store %zu elements\\n\",\r\n               approx_size_bytes >> 20, max_size_bytes >> 20, num_elems);\r\n     return true;\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -1939,10 +1939,8 @@ bool InitScriptExecutionCache(size_t max_size_bytes)\r\n     g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\r\n     g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\r\n \r\n-    auto setup_results = g_scriptExecutionCache.setup_bytes(max_size_bytes);\r\n-    if (!setup_results) return false;\r\n+    const auto [num_elems, approx_size_bytes] = g_scriptExecutionCache.setup_bytes(max_size_bytes);\r\n \r\n-    const auto [num_elems, approx_size_bytes] = *setup_results;\r\n     LogPrintf(\"Using %zu MiB out of %zu MiB requested for script execution cache, able to store %zu elements\\n\",\r\n               approx_size_bytes >> 20, max_size_bytes >> 20, num_elems);\r\n     return true;\r\n```\r\n</detail>",
      "created_at": "2024-05-20T18:04:56Z",
      "updated_at": "2024-05-20T18:09:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1607094214",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607094214"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 933,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607175446",
      "pull_request_review_id": 2066862012,
      "id": 1607175446,
      "node_id": "PRRC_kwDOABII585fy40W",
      "diff_hunk": "@@ -62,19 +62,11 @@ std::optional<std::pair<uint32_t, size_t>> CSignatureCache::setup_bytes(size_t n\n     return setValid.setup_bytes(n);\n }\n \n-/* In previous versions of this code, signatureCache was a local static variable\n- * in CachingTransactionSignatureChecker::VerifySignature.  We initialize\n- * signatureCache outside of VerifySignature to avoid the atomic operation per\n- * call overhead associated with local static variables even though\n- * signatureCache could be made local to VerifySignature.\n-*/\n-static CSignatureCache signatureCache;\n-\n // To be called once in AppInitMain/BasicTestingSetup to initialize the\n // signatureCache.\n-bool InitSignatureCache(size_t max_size_bytes)\n+bool InitSignatureCache(size_t max_size_bytes, CSignatureCache& signature_cache)",
      "path": "src/script/sigcache.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "79c9c55b27bd113885da2c36ad76e5ed145027b3",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason to not make `max_size_bytes` a `CSignatureCache` constructor param? That way `InitSignatureCache` could go away.",
      "created_at": "2024-05-20T19:19:12Z",
      "updated_at": "2024-05-20T19:19:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1607175446",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607175446"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607890616",
      "pull_request_review_id": 2067938954,
      "id": 1607890616,
      "node_id": "PRRC_kwDOABII585f1na4",
      "diff_hunk": "@@ -924,7 +930,7 @@ class ChainstateManager\n public:\n     using Options = kernel::ChainstateManagerOpts;\n \n-    explicit ChainstateManager(const util::SignalInterrupt& interrupt, Options options, node::BlockManager::Options blockman_options);\n+    explicit ChainstateManager(const util::SignalInterrupt& interrupt, Options options, node::BlockManager::Options blockman_options, bilingual_str& error);",
      "path": "src/validation.h",
      "position": null,
      "original_position": 45,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "353ba0a19e73e888b5788f5fa10fca682b5ea4f5",
      "in_reply_to_id": 1607094214,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I like this, no need to introduce all this error handling infrastructure for a debug-only option. Applied.",
      "created_at": "2024-05-21T08:38:04Z",
      "updated_at": "2024-05-21T08:38:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1607890616",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607890616"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 933,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608951984",
      "pull_request_review_id": 2069624268,
      "id": 1608951984,
      "node_id": "PRRC_kwDOABII585f5qiw",
      "diff_hunk": "@@ -53,6 +53,16 @@ util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManage\n     opts.worker_threads_num = std::clamp(script_threads - 1, 0, MAX_SCRIPTCHECK_THREADS);\n     LogPrintf(\"Script verification uses %d additional threads\\n\", opts.worker_threads_num);\n \n+    if (auto max_size = args.GetIntArg(\"-maxsigcachesize\")) {\n+        // 1. When supplied with a max_size of 0, both InitSignatureCache and\n+        //    InitScriptExecutionCache create the minimum possible cache (2",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "4a1df97a016935348e50f384ed52a6671990835f",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Comment is now out of date.",
      "created_at": "2024-05-21T21:06:15Z",
      "updated_at": "2024-05-21T21:06:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1608951984",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608951984"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608966851",
      "pull_request_review_id": 2069646556,
      "id": 1608966851,
      "node_id": "PRRC_kwDOABII585f5uLD",
      "diff_hunk": "@@ -53,6 +53,16 @@ util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManage\n     opts.worker_threads_num = std::clamp(script_threads - 1, 0, MAX_SCRIPTCHECK_THREADS);\n     LogPrintf(\"Script verification uses %d additional threads\\n\", opts.worker_threads_num);\n \n+    if (auto max_size = args.GetIntArg(\"-maxsigcachesize\")) {\n+        // 1. When supplied with a max_size of 0, both InitSignatureCache and\n+        //    InitScriptExecutionCache create the minimum possible cache (2",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "4a1df97a016935348e50f384ed52a6671990835f",
      "in_reply_to_id": 1608951984,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, fixed.",
      "created_at": "2024-05-21T21:21:06Z",
      "updated_at": "2024-05-21T21:21:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1608966851",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608966851"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1644210320",
      "pull_request_review_id": 2125109551,
      "id": 1644210320,
      "node_id": "PRRC_kwDOABII585iAKiQ",
      "diff_hunk": "@@ -360,16 +360,16 @@ class cache\n      * structure\n      * @returns A pair of the maximum number of elements storable (see setup()\n      * documentation for more detail) and the approximate total size of these\n-     * elements in bytes or std::nullopt if the size requested is too large.\n+     * elements in bytes.\n      */\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t bytes)\n+    std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\n     {\n         size_t requested_num_elems = bytes / sizeof(Element);\n         if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\n-            return std::nullopt;\n+            requested_num_elems = std::numeric_limits<uint32_t>::max();\n         }",
      "path": "src/cuckoocache.h",
      "position": null,
      "original_position": 14,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "8960bc986b5361108f168c20af280b298061d706",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: declaring `requested_num_elems` as a `uint32_t` would seem more intuitive:\r\n\r\n<details>\r\n<summary>git diff on 8960bc986b</summary>\r\n\r\n```diff\r\ndiff --git a/src/cuckoocache.h b/src/cuckoocache.h\r\nindex c9bd45befc..85556a4da5 100644\r\n--- a/src/cuckoocache.h\r\n+++ b/src/cuckoocache.h\r\n@@ -364,10 +364,10 @@ public:\r\n      */\r\n     std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\r\n     {\r\n-        size_t requested_num_elems = bytes / sizeof(Element);\r\n-        if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\r\n-            requested_num_elems = std::numeric_limits<uint32_t>::max();\r\n-        }\r\n+        uint32_t requested_num_elems{(uint32_t)std::min(\r\n+            bytes / sizeof(Element),\r\n+            (size_t)std::numeric_limits<uint32_t>::max()\r\n+        )};\r\n \r\n         auto num_elems = setup(requested_num_elems);\r\n \r\n\r\n```\r\n</details>\r\n",
      "created_at": "2024-06-18T10:17:56Z",
      "updated_at": "2024-06-18T20:47:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1644210320",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1644210320"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": 367,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1644415772",
      "pull_request_review_id": 2125109551,
      "id": 1644415772,
      "node_id": "PRRC_kwDOABII585iA8sc",
      "diff_hunk": "@@ -360,8 +363,13 @@ static_assert(std::is_nothrow_move_assignable_v<CScriptCheck>);\n static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n-/** Initializes the script-execution cache */\n-[[nodiscard]] bool InitScriptExecutionCache(size_t max_size_bytes);\n+/**\n+ * Convenience struct for initializing and passing the script execution cache.\n+ */\n+struct ValidationCache {\n+    ScriptCache m_script_execution_cache;\n+    ValidationCache(size_t script_execution_cache_bytes);",
      "path": "src/validation.h",
      "position": null,
      "original_position": 32,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "1409fa4f4144308ad8ffeaca927bc76ad982e2a8",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To minimize future footguns by accidentally passing a cache by value, perhaps best to disable the copy constructor and copy assignment operator? (+ same for `CSignatureCache` in 63923c8da686da42f522771f338ea8f2a4f4e568)\r\n\r\n<details>\r\n<summary>git diff on 1409fa4f41</summary>\r\n\r\n```diff\r\ndiff --git a/src/validation.h b/src/validation.h\r\nindex 9f858bff1d..90f484bc9f 100644\r\n--- a/src/validation.h\r\n+++ b/src/validation.h\r\n@@ -369,6 +369,10 @@ static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\r\n struct ValidationCache {\r\n     ScriptCache m_script_execution_cache;\r\n     ValidationCache(size_t script_execution_cache_bytes);\r\n+\r\n+    // ValidationCache should only be passed by reference or pointer\r\n+    ValidationCache(const ValidationCache&) = delete;\r\n+    ValidationCache& operator=(const ValidationCache&) = delete;\r\n };\r\n \r\n /** Functions for validating blocks and updating the block tree */\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2024-06-18T12:53:01Z",
      "updated_at": "2024-06-18T20:47:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1644415772",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1644415772"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645009465",
      "pull_request_review_id": 2125109551,
      "id": 1645009465,
      "node_id": "PRRC_kwDOABII585iDNo5",
      "diff_hunk": "@@ -360,8 +365,16 @@ static_assert(std::is_nothrow_move_assignable_v<CScriptCheck>);\n static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n-/** Initializes the script-execution cache */\n-[[nodiscard]] bool InitScriptExecutionCache(size_t max_size_bytes);\n+/**\n+ * Convenience struct for initializing and passing the script execution cache\n+ * and signature cache.\n+ */\n+struct ValidationCache {\n+    ScriptCache m_script_execution_cache;\n+    CSHA256 m_script_execution_cache_hasher;",
      "path": "src/validation.h",
      "position": 48,
      "original_position": 55,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "63923c8da686da42f522771f338ea8f2a4f4e568",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I understand correctly, `m_script_execution_cache_hasher` is a pre-initialized hasher that we want to copy every time we use it, and we definitely don't want to modify in-place. I think having it as a public struct member is not very robust to enforce that, perhaps better to use a getter here? E.g. something like:\r\n\r\n<details>\r\n<summary>git diff on 63923c8da6</summary>\r\n\r\n```diff\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex 39ab7b56ab..600c427c93 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -2095,17 +2095,22 @@ bool CScriptCheck::operator()() {\r\n     return VerifyScript(scriptSig, m_tx_out.scriptPubKey, witness, nFlags, CachingTransactionSignatureChecker(ptxTo, nIn, m_tx_out.nValue, cacheStore, *m_signature_cache, *txdata), &error);\r\n }\r\n \r\n-ValidationCache::ValidationCache(size_t script_execution_cache_bytes, size_t signature_cache_bytes)\r\n-    : m_signature_cache{signature_cache_bytes / 2}\r\n+CSHA256 ValidationCache::CreateScriptExecutionCacheHasher()\r\n {\r\n     // Setup the salted hasher\r\n     uint256 nonce = GetRandHash();\r\n     // We want the nonce to be 64 bytes long to force the hasher to process\r\n     // this chunk, which makes later hash computations more efficient. We\r\n     // just write our 32-byte entropy twice to fill the 64 bytes.\r\n-    m_script_execution_cache_hasher.Write(nonce.begin(), 32);\r\n-    m_script_execution_cache_hasher.Write(nonce.begin(), 32);\r\n+    CSHA256 hasher;\r\n+    hasher.Write(nonce.begin(), 32);\r\n+    hasher.Write(nonce.begin(), 32);\r\n+    return hasher;\r\n+}\r\n \r\n+ValidationCache::ValidationCache(size_t script_execution_cache_bytes, size_t signature_cache_bytes)\r\n+    : m_signature_cache{signature_cache_bytes / 2}\r\n+{\r\n     const auto [num_elems, approx_size_bytes] = m_script_execution_cache.setup_bytes(script_execution_cache_bytes);\r\n     LogPrintf(\"Using %zu MiB out of %zu MiB requested for script execution cache, able to store %zu elements\\n\",\r\n               approx_size_bytes >> 20, script_execution_cache_bytes >> 20, num_elems);\r\n@@ -2148,7 +2153,7 @@ bool CheckInputScripts(const CTransaction& tx, TxValidationState& state,\r\n     // properly commits to the scriptPubKey in the inputs view of that\r\n     // transaction).\r\n     uint256 hashCacheEntry;\r\n-    CSHA256 hasher = validation_cache.m_script_execution_cache_hasher;\r\n+    auto hasher{validation_cache.ScriptExecutionCacheHasher()};\r\n     hasher.Write(UCharCast(tx.GetWitnessHash().begin()), 32).Write((unsigned char*)&flags, sizeof(flags)).Finalize(hashCacheEntry.begin());\r\n     AssertLockHeld(cs_main); //TODO: Remove this requirement by making CuckooCache not require external locks\r\n     if (validation_cache.m_script_execution_cache.contains(hashCacheEntry, !cacheFullScriptStore)) {\r\ndiff --git a/src/validation.h b/src/validation.h\r\nindex c4b49ec3e8..1e48f6b4a4 100644\r\n--- a/src/validation.h\r\n+++ b/src/validation.h\r\n@@ -369,11 +369,16 @@ static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\r\n  * Convenience struct for initializing and passing the script execution cache\r\n  * and signature cache.\r\n  */\r\n-struct ValidationCache {\r\n+class ValidationCache {\r\n+public:\r\n     ScriptCache m_script_execution_cache;\r\n-    CSHA256 m_script_execution_cache_hasher;\r\n+    CSHA256 ScriptExecutionCacheHasher() { return m_script_execution_cache_hasher; }\r\n     CSignatureCache m_signature_cache;\r\n     ValidationCache(size_t script_execution_cache_bytes, size_t signature_cache_bytes);\r\n+private:\r\n+    static CSHA256 CreateScriptExecutionCacheHasher();\r\n+    //! Pre-initialized hasher to avoid having to recreate it for every hash calculation\r\n+    const CSHA256 m_script_execution_cache_hasher{CreateScriptExecutionCacheHasher()};\r\n };\r\n \r\n /** Functions for validating blocks and updating the block tree */\r\n\r\n```\r\n</details>\r\n\r\nIt seems this is quite brittle on master too, so not a regression, but probably something to address here?",
      "created_at": "2024-06-18T20:20:15Z",
      "updated_at": "2024-06-18T20:48:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645009465",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645009465"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 374,
      "original_line": 374,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645730446",
      "pull_request_review_id": 2127572221,
      "id": 1645730446,
      "node_id": "PRRC_kwDOABII585iF9qO",
      "diff_hunk": "@@ -360,8 +365,16 @@ static_assert(std::is_nothrow_move_assignable_v<CScriptCheck>);\n static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n-/** Initializes the script-execution cache */\n-[[nodiscard]] bool InitScriptExecutionCache(size_t max_size_bytes);\n+/**\n+ * Convenience struct for initializing and passing the script execution cache\n+ * and signature cache.\n+ */\n+struct ValidationCache {\n+    ScriptCache m_script_execution_cache;\n+    CSHA256 m_script_execution_cache_hasher;",
      "path": "src/validation.h",
      "position": 48,
      "original_position": 55,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "63923c8da686da42f522771f338ea8f2a4f4e568",
      "in_reply_to_id": 1645009465,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there a reason you added a separate initialization function for the hasher?",
      "created_at": "2024-06-19T08:57:18Z",
      "updated_at": "2024-06-19T08:57:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645730446",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645730446"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 374,
      "original_line": 374,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645731158",
      "pull_request_review_id": 2127573308,
      "id": 1645731158,
      "node_id": "PRRC_kwDOABII585iF91W",
      "diff_hunk": "@@ -360,16 +360,16 @@ class cache\n      * structure\n      * @returns A pair of the maximum number of elements storable (see setup()\n      * documentation for more detail) and the approximate total size of these\n-     * elements in bytes or std::nullopt if the size requested is too large.\n+     * elements in bytes.\n      */\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t bytes)\n+    std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\n     {\n         size_t requested_num_elems = bytes / sizeof(Element);\n         if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\n-            return std::nullopt;\n+            requested_num_elems = std::numeric_limits<uint32_t>::max();\n         }",
      "path": "src/cuckoocache.h",
      "position": null,
      "original_position": 14,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "8960bc986b5361108f168c20af280b298061d706",
      "in_reply_to_id": 1644210320,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mmh, this does not feel more readable to me, because of the two casts.",
      "created_at": "2024-06-19T08:57:47Z",
      "updated_at": "2024-06-19T08:57:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645731158",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645731158"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": 367,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645856227",
      "pull_request_review_id": 2127765015,
      "id": 1645856227,
      "node_id": "PRRC_kwDOABII585iGcXj",
      "diff_hunk": "@@ -360,16 +360,16 @@ class cache\n      * structure\n      * @returns A pair of the maximum number of elements storable (see setup()\n      * documentation for more detail) and the approximate total size of these\n-     * elements in bytes or std::nullopt if the size requested is too large.\n+     * elements in bytes.\n      */\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t bytes)\n+    std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\n     {\n         size_t requested_num_elems = bytes / sizeof(Element);\n         if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\n-            return std::nullopt;\n+            requested_num_elems = std::numeric_limits<uint32_t>::max();\n         }",
      "path": "src/cuckoocache.h",
      "position": null,
      "original_position": 14,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "8960bc986b5361108f168c20af280b298061d706",
      "in_reply_to_id": 1644210320,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's not really a readability suggestion, I just prefer having `requested_nums_elems` be the integer type for which we're doing the bounds checking. But it's just a nit so happy to leave as is.",
      "created_at": "2024-06-19T10:10:26Z",
      "updated_at": "2024-06-19T10:10:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645856227",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645856227"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": 367,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645875138",
      "pull_request_review_id": 2127794432,
      "id": 1645875138,
      "node_id": "PRRC_kwDOABII585iGg_C",
      "diff_hunk": "@@ -360,8 +365,16 @@ static_assert(std::is_nothrow_move_assignable_v<CScriptCheck>);\n static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n-/** Initializes the script-execution cache */\n-[[nodiscard]] bool InitScriptExecutionCache(size_t max_size_bytes);\n+/**\n+ * Convenience struct for initializing and passing the script execution cache\n+ * and signature cache.\n+ */\n+struct ValidationCache {\n+    ScriptCache m_script_execution_cache;\n+    CSHA256 m_script_execution_cache_hasher;",
      "path": "src/validation.h",
      "position": 48,
      "original_position": 55,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "63923c8da686da42f522771f338ea8f2a4f4e568",
      "in_reply_to_id": 1645009465,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Two (soft) reasons:\r\n1. to make `m_script_execution_cache_hasher` `const`\r\n2. having a separate construction function for the hasher seems more composable (e.g. testing the hasher) and makes the `ValidationCache` constructor more readable\r\n\r\nI'm fine with your approach too, though. It addresses my main concern, everything else is more of a nit.",
      "created_at": "2024-06-19T10:22:30Z",
      "updated_at": "2024-06-19T10:22:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1645875138",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1645875138"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 374,
      "original_line": 374,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646290588",
      "pull_request_review_id": 2128427867,
      "id": 1646290588,
      "node_id": "PRRC_kwDOABII585iIGac",
      "diff_hunk": "@@ -5,23 +5,31 @@\n #include <consensus/validation.h>\n #include <key.h>\n #include <random.h>\n+#include <script/sigcache.h>\n #include <script/sign.h>\n #include <script/signingprovider.h>\n #include <test/util/setup_common.h>\n #include <txmempool.h>\n #include <util/chaintype.h>\n+#include <util/check.h>\n #include <validation.h>\n \n #include <boost/test/unit_test.hpp>\n \n struct Dersig100Setup : public TestChain100Setup {\n+    ValidationCache m_validation_cache;",
      "path": "src/test/txvalidationcache_tests.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f015a501e4bbb4985b52783591031e4e39496009",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "May be good to explain why this is needed, when `m_node.chainman->m_validation_cache` already exists?",
      "created_at": "2024-06-19T14:17:21Z",
      "updated_at": "2024-06-19T14:17:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646290588",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646290588"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646343915",
      "pull_request_review_id": 2128509733,
      "id": 1646343915,
      "node_id": "PRRC_kwDOABII585iITbr",
      "diff_hunk": "@@ -360,16 +360,16 @@ class cache\n      * structure\n      * @returns A pair of the maximum number of elements storable (see setup()\n      * documentation for more detail) and the approximate total size of these\n-     * elements in bytes or std::nullopt if the size requested is too large.\n+     * elements in bytes.\n      */\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t bytes)\n+    std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\n     {\n         size_t requested_num_elems = bytes / sizeof(Element);\n         if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\n-            return std::nullopt;\n+            requested_num_elems = std::numeric_limits<uint32_t>::max();\n         }",
      "path": "src/cuckoocache.h",
      "position": null,
      "original_position": 14,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "8960bc986b5361108f168c20af280b298061d706",
      "in_reply_to_id": 1644210320,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `std::optional` no longer needed as an include",
      "created_at": "2024-06-19T14:53:24Z",
      "updated_at": "2024-06-27T19:33:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646343915",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646343915"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": 367,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646370563",
      "pull_request_review_id": 2128552072,
      "id": 1646370563,
      "node_id": "PRRC_kwDOABII585iIZ8D",
      "diff_hunk": "@@ -5,23 +5,31 @@\n #include <consensus/validation.h>\n #include <key.h>\n #include <random.h>\n+#include <script/sigcache.h>\n #include <script/sign.h>\n #include <script/signingprovider.h>\n #include <test/util/setup_common.h>\n #include <txmempool.h>\n #include <util/chaintype.h>\n+#include <util/check.h>\n #include <validation.h>\n \n #include <boost/test/unit_test.hpp>\n \n struct Dersig100Setup : public TestChain100Setup {\n+    ValidationCache m_validation_cache;",
      "path": "src/test/txvalidationcache_tests.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f015a501e4bbb4985b52783591031e4e39496009",
      "in_reply_to_id": 1646290588,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I was thinking it might be useful to control the caches directly for the tests, but on second thought that does not seem like a good thing. Will revert.",
      "created_at": "2024-06-19T15:11:52Z",
      "updated_at": "2024-06-19T15:11:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646370563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646370563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646381635",
      "pull_request_review_id": 2128584316,
      "id": 1646381635,
      "node_id": "PRRC_kwDOABII585iIcpD",
      "diff_hunk": "@@ -360,16 +360,15 @@ class cache\n      * structure\n      * @returns A pair of the maximum number of elements storable (see setup()\n      * documentation for more detail) and the approximate total size of these\n-     * elements in bytes or std::nullopt if the size requested is too large.\n+     * elements in bytes.\n      */\n-    std::optional<std::pair<uint32_t, size_t>> setup_bytes(size_t bytes)\n+    std::pair<uint32_t, size_t> setup_bytes(size_t bytes)\n     {\n-        size_t requested_num_elems = bytes / sizeof(Element);\n-        if (std::numeric_limits<uint32_t>::max() < requested_num_elems) {\n-            return std::nullopt;\n-        }\n+        uint32_t requested_num_elems{(uint32_t)std::min(",
      "path": "src/cuckoocache.h",
      "position": null,
      "original_position": 14,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f1dad94b9d51db6dc7702e51f943c24a17222b1a",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: You can combine the cast by using `()` over `{}`. Also you can specify the template to avoid the `size_t` cast, and ensure the right template is always picked:\r\n\r\n```cpp\r\nuint32_t requested_num_elems(std::min<size_t>(",
      "created_at": "2024-06-19T15:19:58Z",
      "updated_at": "2024-06-19T15:19:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646381635",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646381635"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646473144",
      "pull_request_review_id": 2128509733,
      "id": 1646473144,
      "node_id": "PRRC_kwDOABII585iIy-4",
      "diff_hunk": "@@ -618,7 +618,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-test=<option>\", \"Pass a test-only option. Options include : \" + Join(TEST_OPTIONS_DOC, \", \") + \".\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-capturemessages\", \"Capture all P2P messages to disk\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-mocktime=<n>\", \"Replace actual time with \" + UNIX_EPOCH_TIME + \" (default: 0)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n-    argsman.AddArg(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u)\", DEFAULT_MAX_SIG_CACHE_BYTES >> 20), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u). Will clamp to %u MiB if exceeded.\", DEFAULT_MAX_SIG_CACHE_BYTES >> 20, std::numeric_limits<uint32_t>::max() >> 20), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f1dad94b9d51db6dc7702e51f943c24a17222b1a",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This seems incorrect, we clamp the number of elements, not the number of bytes. I'd prefer not documenting the clamping behaviour here, given how generous the limit is.",
      "created_at": "2024-06-19T16:09:26Z",
      "updated_at": "2024-06-27T19:33:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646473144",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646473144"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 618,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646478869",
      "pull_request_review_id": 2128509733,
      "id": 1646478869,
      "node_id": "PRRC_kwDOABII585iI0YV",
      "diff_hunk": "@@ -360,8 +365,29 @@ static_assert(std::is_nothrow_move_assignable_v<CScriptCheck>);\n static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n-/** Initializes the script-execution cache */\n-[[nodiscard]] bool InitScriptExecutionCache(size_t max_size_bytes);\n+/**\n+ * Convenience class for initializing and passing the script execution cache\n+ * and signature cache.\n+ */\n+class ValidationCache\n+{\n+private:\n+    //! Pre-initialized hasher for to avoid having to recreate it for every hash calculation.",
      "path": "src/validation.h",
      "position": null,
      "original_position": 56,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "fa660a266b3aa03f40c47a9330e3bce8be89bb54",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "typo nit\r\n```suggestion\r\n    //! Pre-initialized hasher to avoid having to recreate it for every hash calculation.\r\n```",
      "created_at": "2024-06-19T16:13:24Z",
      "updated_at": "2024-06-27T19:33:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1646478869",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646478869"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 375,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647123546",
      "pull_request_review_id": 2128595258,
      "id": 1647123546,
      "node_id": "PRRC_kwDOABII585iLRxa",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "2412ec286353324b265612bc6ab73b7dc8286969",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in 594189567956063fa1a44bef9e86e72c14207027:\r\n\r\n```\r\nscript/sigcache.h should remove these lines:\r\n- #include <cstdint>  // lines 18-18\r\n- #include <utility>  // lines 20-20",
      "created_at": "2024-06-20T07:49:50Z",
      "updated_at": "2024-06-20T13:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647123546",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647123546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647514586",
      "pull_request_review_id": 2128595258,
      "id": 1647514586,
      "node_id": "PRRC_kwDOABII585iMxPa",
      "diff_hunk": "@@ -364,20 +366,27 @@ static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n /**\n- * Convenience class for initializing and passing the script execution cache.\n+ * Convenience class for initializing and passing the script execution cache\n+ * and signature cache.\n  */\n class ValidationCache\n {\n+private:\n+    //! Pre-initialized hasher for to avoid having to recreate it for every hash calculation.\n+    CSHA256 m_script_execution_cache_hasher;",
      "path": "src/validation.h",
      "position": 48,
      "original_position": 34,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f946b083fe1431fb8d5d2c080ed3c2938116c37a",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in /f946b083fe1431fb8d5d2c080ed3c2938116c37a: Unrelated change? The commit message is \"De-globalize signature cache\", but this hunk makes the script execution cache private.",
      "created_at": "2024-06-20T12:42:42Z",
      "updated_at": "2024-06-20T13:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647514586",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647514586"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 374,
      "original_line": 374,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647518394",
      "pull_request_review_id": 2128595258,
      "id": 1647518394,
      "node_id": "PRRC_kwDOABII585iMyK6",
      "diff_hunk": "@@ -343,10 +344,11 @@ class CScriptCheck\n     bool cacheStore;\n     ScriptError error{SCRIPT_ERR_UNKNOWN_ERROR};\n     PrecomputedTransactionData *txdata;\n+    CSignatureCache* m_signature_cache;",
      "path": "src/validation.h",
      "position": null,
      "original_position": 12,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f946b083fe1431fb8d5d2c080ed3c2938116c37a",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in /f946b083fe1431fb8d5d2c080ed3c2938116c37a: Why use a pointer when a reference is better?",
      "created_at": "2024-06-20T12:45:40Z",
      "updated_at": "2024-06-20T13:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647518394",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647518394"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 347,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647665176",
      "pull_request_review_id": 2130583896,
      "id": 1647665176,
      "node_id": "PRRC_kwDOABII585iNWAY",
      "diff_hunk": "@@ -343,10 +344,11 @@ class CScriptCheck\n     bool cacheStore;\n     ScriptError error{SCRIPT_ERR_UNKNOWN_ERROR};\n     PrecomputedTransactionData *txdata;\n+    CSignatureCache* m_signature_cache;",
      "path": "src/validation.h",
      "position": null,
      "original_position": 12,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f946b083fe1431fb8d5d2c080ed3c2938116c37a",
      "in_reply_to_id": 1647518394,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think we similarly make `CTransaction` a pointer to keep the `CScriptCheck` class `is_nothrow_move_assignable_v`.",
      "created_at": "2024-06-20T14:18:03Z",
      "updated_at": "2024-06-20T14:18:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647665176",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647665176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 347,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647706071",
      "pull_request_review_id": 2130652452,
      "id": 1647706071,
      "node_id": "PRRC_kwDOABII585iNf_X",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "2412ec286353324b265612bc6ab73b7dc8286969",
      "in_reply_to_id": 1647123546,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: You added the headers in one commit, and then removed them in the next. Wrong order?",
      "created_at": "2024-06-20T14:44:46Z",
      "updated_at": "2024-06-20T14:44:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647706071",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647706071"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647713760",
      "pull_request_review_id": 2130664617,
      "id": 1647713760,
      "node_id": "PRRC_kwDOABII585iNh3g",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "2412ec286353324b265612bc6ab73b7dc8286969",
      "in_reply_to_id": 1647123546,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "They are required in 201b29e468f621a1fb055060920231ef46192414 and then no-longer in 974934b3c23ce7f34ef46f3dfc13468cd46f4b8a.",
      "created_at": "2024-06-20T14:49:45Z",
      "updated_at": "2024-06-20T14:49:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1647713760",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1647713760"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657322116",
      "pull_request_review_id": 2145715522,
      "id": 1657322116,
      "node_id": "PRRC_kwDOABII585iyLqE",
      "diff_hunk": "@@ -88,6 +89,8 @@ extern std::condition_variable g_best_block_cv;\n /** Used to notify getblocktemplate RPC of new tips. */\n extern uint256 g_best_block;\n \n+using ScriptCache = CuckooCache::cache<uint256, SignatureCacheHasher>;",
      "path": "src/validation.h",
      "position": null,
      "original_position": 16,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "56247bbdd0016602d6f60296b0e78e2749582579",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Move this into `ValidationCache`? It seems unused anywhere else.",
      "created_at": "2024-06-27T15:12:59Z",
      "updated_at": "2024-06-27T15:52:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657322116",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657322116"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 92,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657330024",
      "pull_request_review_id": 2145715522,
      "id": 1657330024,
      "node_id": "PRRC_kwDOABII585iyNlo",
      "diff_hunk": "@@ -368,14 +368,21 @@ static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n  */\n class ValidationCache\n {\n+private:\n+    //! Pre-initialized hasher for to avoid having to recreate it for every hash calculation.\n+    CSHA256 m_script_execution_cache_hasher;\n+\n public:\n     ScriptCache m_script_execution_cache;\n+\n     ValidationCache(size_t script_execution_cache_bytes);\n \n     ValidationCache(const ValidationCache&) = delete;\n     ValidationCache(ValidationCache&&) = delete;\n     ValidationCache& operator=(const ValidationCache&) = delete;\n     ValidationCache& operator=(ValidationCache&&) = delete;\n+\n+    CSHA256 ScriptExecutionCacheHasher() { return m_script_execution_cache_hasher; }",
      "path": "src/validation.h",
      "position": null,
      "original_position": 18,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "a4fc935bf9a707098385a520714317277f3d1ffd",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This function can be const.",
      "created_at": "2024-06-27T15:17:50Z",
      "updated_at": "2024-06-27T15:52:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657330024",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657330024"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 385,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657337310",
      "pull_request_review_id": 2145715522,
      "id": 1657337310,
      "node_id": "PRRC_kwDOABII585iyPXe",
      "diff_hunk": "@@ -2095,17 +2095,15 @@ bool CScriptCheck::operator()() {\n     return VerifyScript(scriptSig, m_tx_out.scriptPubKey, witness, nFlags, CachingTransactionSignatureChecker(ptxTo, nIn, m_tx_out.nValue, cacheStore, *txdata), &error);\n }\n \n-static CSHA256 g_scriptExecutionCacheHasher;\n-\n ValidationCache::ValidationCache(size_t script_execution_cache_bytes)\n {\n     // Setup the salted hasher\n     uint256 nonce = GetRandHash();\n     // We want the nonce to be 64 bytes long to force the hasher to process\n     // this chunk, which makes later hash computations more efficient. We\n     // just write our 32-byte entropy twice to fill the 64 bytes.\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n+    m_script_execution_cache_hasher.Write(nonce.begin(), 32);",
      "path": "src/validation.cpp",
      "position": 90,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "a4fc935bf9a707098385a520714317277f3d1ffd",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Might be useful to pass the nonce in rather than generating it here to make the order of rng/ValidationCache instantiation explicit.\r\n\r\nPresumably it'd also make for easier testing with a deterministic seed.",
      "created_at": "2024-06-27T15:21:48Z",
      "updated_at": "2024-06-27T15:52:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657337310",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657337310"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2104,
      "original_line": 2104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657354399",
      "pull_request_review_id": 2145715522,
      "id": 1657354399,
      "node_id": "PRRC_kwDOABII585iyTif",
      "diff_hunk": "@@ -5,82 +5,61 @@\n \n #include <script/sigcache.h>\n \n-#include <common/system.h>\n+#include <crypto/sha256.h>\n #include <logging.h>\n #include <pubkey.h>\n #include <random.h>\n+#include <script/interpreter.h>\n+#include <span.h>\n #include <uint256.h>\n \n-#include <cuckoocache.h>\n-\n-#include <algorithm>\n #include <mutex>\n #include <shared_mutex>\n #include <vector>\n \n-namespace {\n-/**\n- * Valid signature cache, to avoid doing expensive ECDSA signature checking\n- * twice for every transaction (once when accepted into memory pool, and\n- * again when accepted into the block chain)\n- */\n-class CSignatureCache\n+CSignatureCache::CSignatureCache()\n {\n-private:\n-     //! Entries are SHA256(nonce || 'E' or 'S' || 31 zero bytes || signature hash || public key || signature):\n-    CSHA256 m_salted_hasher_ecdsa;\n-    CSHA256 m_salted_hasher_schnorr;\n-    typedef CuckooCache::cache<uint256, SignatureCacheHasher> map_type;\n-    map_type setValid;\n-    std::shared_mutex cs_sigcache;\n+    uint256 nonce = GetRandHash();",
      "path": "src/script/sigcache.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "201b29e468f621a1fb055060920231ef46192414",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same comment here, would be nice to pass this in. Perhaps one nonce to rule them all? I don't think there'd be any loss of security.",
      "created_at": "2024-06-27T15:33:43Z",
      "updated_at": "2024-06-27T15:52:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657354399",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657354399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657370573",
      "pull_request_review_id": 2145715522,
      "id": 1657370573,
      "node_id": "PRRC_kwDOABII585iyXfN",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>\n #include <vector>\n \n+class CTransaction;\n+class XOnlyPubKey;\n+\n // DoS prevention: limit cache size to 32MiB (over 1000000 entries on 64-bit\n // systems). Due to how we count cache size, actual memory usage is slightly\n // more (~32.25 MiB)\n static constexpr size_t DEFAULT_MAX_SIG_CACHE_BYTES{32 << 20};\n \n class CPubKey;\n \n+/**\n+ * Valid signature cache, to avoid doing expensive ECDSA signature checking\n+ * twice for every transaction (once when accepted into memory pool, and\n+ * again when accepted into the block chain)\n+ */\n+class CSignatureCache\n+{\n+private:\n+    //! Entries are SHA256(nonce || 'E' or 'S' || 31 zero bytes || signature hash || public key || signature):\n+    CSHA256 m_salted_hasher_ecdsa;\n+    CSHA256 m_salted_hasher_schnorr;\n+    typedef CuckooCache::cache<uint256, SignatureCacheHasher> map_type;\n+    map_type setValid;\n+    std::shared_mutex cs_sigcache;\n+\n+public:\n+    CSignatureCache();",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 44,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "201b29e468f621a1fb055060920231ef46192414",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Similar to @stickies-v's comment in a previous commit, since we're going to be passing around references and pointers to this, it'd be a good idea to make it non-copyable to avoid accidental copies.",
      "created_at": "2024-06-27T15:46:09Z",
      "updated_at": "2024-06-27T15:52:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657370573",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657370573"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657394662",
      "pull_request_review_id": 2145836166,
      "id": 1657394662,
      "node_id": "PRRC_kwDOABII585iydXm",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>\n #include <vector>\n \n+class CTransaction;\n+class XOnlyPubKey;\n+\n // DoS prevention: limit cache size to 32MiB (over 1000000 entries on 64-bit\n // systems). Due to how we count cache size, actual memory usage is slightly\n // more (~32.25 MiB)\n static constexpr size_t DEFAULT_MAX_SIG_CACHE_BYTES{32 << 20};\n \n class CPubKey;\n \n+/**\n+ * Valid signature cache, to avoid doing expensive ECDSA signature checking\n+ * twice for every transaction (once when accepted into memory pool, and\n+ * again when accepted into the block chain)\n+ */\n+class CSignatureCache\n+{\n+private:\n+    //! Entries are SHA256(nonce || 'E' or 'S' || 31 zero bytes || signature hash || public key || signature):\n+    CSHA256 m_salted_hasher_ecdsa;\n+    CSHA256 m_salted_hasher_schnorr;\n+    typedef CuckooCache::cache<uint256, SignatureCacheHasher> map_type;\n+    map_type setValid;\n+    std::shared_mutex cs_sigcache;\n+\n+public:\n+    CSignatureCache();",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 44,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "201b29e468f621a1fb055060920231ef46192414",
      "in_reply_to_id": 1657370573,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, I guess the mutex takes care of that for us. Still, wouldn't hurt to be explicit.",
      "created_at": "2024-06-27T15:55:33Z",
      "updated_at": "2024-06-27T15:55:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657394662",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657394662"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657442012",
      "pull_request_review_id": 2128509733,
      "id": 1657442012,
      "node_id": "PRRC_kwDOABII585iyo7c",
      "diff_hunk": "@@ -56,6 +56,15 @@ util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManage\n     opts.worker_threads_num = std::clamp(script_threads - 1, 0, MAX_SCRIPTCHECK_THREADS);\n     LogPrintf(\"Script verification uses %d additional threads\\n\", opts.worker_threads_num);\n \n+    if (auto max_size = args.GetIntArg(\"-maxsigcachesize\")) {\n+        // 1. When supplied with a max_size of 0, both the signature cache and\n+        //    script execution cache create the minimum possible cache (2\n+        //    elements). Therefore, we can use 0 as a floor here.\n+        // 2. Multiply first, divide after to avoid integer truncation.\n+        size_t clamped_size_each = std::max<int64_t>(*max_size, 0) * (1 << 20) / 2;",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "56247bbdd0016602d6f60296b0e78e2749582579",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "reviewer note: orthogonal to this move-only change, but this has all kinds of under- and overflow issues. Since it's a debug option, i suppose it's not the end of the world though",
      "created_at": "2024-06-27T16:25:17Z",
      "updated_at": "2024-06-28T09:53:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657442012",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657442012"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657457261",
      "pull_request_review_id": 2128509733,
      "id": 1657457261,
      "node_id": "PRRC_kwDOABII585iyspt",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>\n #include <vector>\n \n+class CTransaction;\n+class XOnlyPubKey;\n+\n // DoS prevention: limit cache size to 32MiB (over 1000000 entries on 64-bit\n // systems). Due to how we count cache size, actual memory usage is slightly\n // more (~32.25 MiB)\n static constexpr size_t DEFAULT_MAX_SIG_CACHE_BYTES{32 << 20};\n \n class CPubKey;\n \n+/**\n+ * Valid signature cache, to avoid doing expensive ECDSA signature checking\n+ * twice for every transaction (once when accepted into memory pool, and\n+ * again when accepted into the block chain)\n+ */\n+class CSignatureCache\n+{\n+private:\n+    //! Entries are SHA256(nonce || 'E' or 'S' || 31 zero bytes || signature hash || public key || signature):\n+    CSHA256 m_salted_hasher_ecdsa;\n+    CSHA256 m_salted_hasher_schnorr;\n+    typedef CuckooCache::cache<uint256, SignatureCacheHasher> map_type;\n+    map_type setValid;\n+    std::shared_mutex cs_sigcache;\n+\n+public:\n+    CSignatureCache();",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 44,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "201b29e468f621a1fb055060920231ef46192414",
      "in_reply_to_id": 1657370573,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I didn't realize the mutex has the same practical effect when I mentioned it it in my original [comment](https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1644415772)) - but I too would still prefer to be more explicit here. If for some reason that's not a good idea, can we at least add a comment to the mutex to indicate that it also serves this purpose in case it is updated in the future?",
      "created_at": "2024-06-27T16:38:55Z",
      "updated_at": "2024-06-27T19:33:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657457261",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657457261"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657671482",
      "pull_request_review_id": 2128509733,
      "id": 1657671482,
      "node_id": "PRRC_kwDOABII585izg86",
      "diff_hunk": "@@ -6,32 +6,66 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n-#include <optional>\n+#include <cstddef>\n+#include <shared_mutex>\n #include <vector>\n \n+class CTransaction;\n+class XOnlyPubKey;\n+\n // DoS prevention: limit cache size to 32MiB (over 1000000 entries on 64-bit\n // systems). Due to how we count cache size, actual memory usage is slightly\n // more (~32.25 MiB)\n static constexpr size_t DEFAULT_MAX_SIG_CACHE_BYTES{32 << 20};\n \n class CPubKey;\n \n+/**\n+ * Valid signature cache, to avoid doing expensive ECDSA signature checking\n+ * twice for every transaction (once when accepted into memory pool, and\n+ * again when accepted into the block chain)\n+ */\n+class CSignatureCache",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 32,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "974934b3c23ce7f34ef46f3dfc13468cd46f4b8a",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: \\*ducks\\* it seems like now would be the perfect time to rename this to `SignatureCache`?",
      "created_at": "2024-06-27T18:56:32Z",
      "updated_at": "2024-06-27T19:33:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657671482",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657671482"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657682792",
      "pull_request_review_id": 2128509733,
      "id": 1657682792,
      "node_id": "PRRC_kwDOABII585izjto",
      "diff_hunk": "@@ -58,6 +58,7 @@ BOOST_FIXTURE_TEST_SUITE(script_p2sh_tests, BasicTestingSetup)\n \n BOOST_AUTO_TEST_CASE(sign)\n {\n+    CSignatureCache signature_cache{DEFAULT_MAX_SIG_CACHE_BYTES / 2};",
      "path": "src/test/script_p2sh_tests.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "974934b3c23ce7f34ef46f3dfc13468cd46f4b8a",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: any reason this isn't initialized where it's used?",
      "created_at": "2024-06-27T19:05:15Z",
      "updated_at": "2024-06-27T19:33:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1657682792",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1657682792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658405291",
      "pull_request_review_id": 2147457321,
      "id": 1658405291,
      "node_id": "PRRC_kwDOABII585i2UGr",
      "diff_hunk": "@@ -618,7 +618,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-test=<option>\", \"Pass a test-only option. Options include : \" + Join(TEST_OPTIONS_DOC, \", \") + \".\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-capturemessages\", \"Capture all P2P messages to disk\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-mocktime=<n>\", \"Replace actual time with \" + UNIX_EPOCH_TIME + \" (default: 0)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n-    argsman.AddArg(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u)\", DEFAULT_MAX_SIG_CACHE_BYTES >> 20), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxsigcachesize=<n>\", strprintf(\"Limit sum of signature cache and script execution cache sizes to <n> MiB (default: %u). Will clamp to %u MiB if exceeded.\", DEFAULT_MAX_SIG_CACHE_BYTES >> 20, std::numeric_limits<uint32_t>::max() >> 20), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "f1dad94b9d51db6dc7702e51f943c24a17222b1a",
      "in_reply_to_id": 1646473144,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good catch, this is indeed wrong.",
      "created_at": "2024-06-28T09:16:23Z",
      "updated_at": "2024-06-28T09:16:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658405291",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658405291"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 618,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658468860",
      "pull_request_review_id": 2147560985,
      "id": 1658468860,
      "node_id": "PRRC_kwDOABII585i2jn8",
      "diff_hunk": "@@ -2095,17 +2095,15 @@ bool CScriptCheck::operator()() {\n     return VerifyScript(scriptSig, m_tx_out.scriptPubKey, witness, nFlags, CachingTransactionSignatureChecker(ptxTo, nIn, m_tx_out.nValue, cacheStore, *txdata), &error);\n }\n \n-static CSHA256 g_scriptExecutionCacheHasher;\n-\n ValidationCache::ValidationCache(size_t script_execution_cache_bytes)\n {\n     // Setup the salted hasher\n     uint256 nonce = GetRandHash();\n     // We want the nonce to be 64 bytes long to force the hasher to process\n     // this chunk, which makes later hash computations more efficient. We\n     // just write our 32-byte entropy twice to fill the 64 bytes.\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n+    m_script_execution_cache_hasher.Write(nonce.begin(), 32);",
      "path": "src/validation.cpp",
      "position": 90,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "a4fc935bf9a707098385a520714317277f3d1ffd",
      "in_reply_to_id": 1657337310,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Does this even need to be a fresh random value every time? Couldn't it just be any nothing up my sleeve number?",
      "created_at": "2024-06-28T10:11:59Z",
      "updated_at": "2024-06-28T10:11:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658468860",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658468860"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2104,
      "original_line": 2104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658781284",
      "pull_request_review_id": 2148076600,
      "id": 1658781284,
      "node_id": "PRRC_kwDOABII585i3v5k",
      "diff_hunk": "@@ -2095,17 +2095,15 @@ bool CScriptCheck::operator()() {\n     return VerifyScript(scriptSig, m_tx_out.scriptPubKey, witness, nFlags, CachingTransactionSignatureChecker(ptxTo, nIn, m_tx_out.nValue, cacheStore, *txdata), &error);\n }\n \n-static CSHA256 g_scriptExecutionCacheHasher;\n-\n ValidationCache::ValidationCache(size_t script_execution_cache_bytes)\n {\n     // Setup the salted hasher\n     uint256 nonce = GetRandHash();\n     // We want the nonce to be 64 bytes long to force the hasher to process\n     // this chunk, which makes later hash computations more efficient. We\n     // just write our 32-byte entropy twice to fill the 64 bytes.\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n+    m_script_execution_cache_hasher.Write(nonce.begin(), 32);",
      "path": "src/validation.cpp",
      "position": 90,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "a4fc935bf9a707098385a520714317277f3d1ffd",
      "in_reply_to_id": 1657337310,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe the idea behind these nonces is to introduce diversity so that everyone has a different cache. That way there's no possibility of poisoning the \"global\" cache.",
      "created_at": "2024-06-28T13:46:42Z",
      "updated_at": "2024-06-28T13:46:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658781284",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658781284"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2104,
      "original_line": 2104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658791383",
      "pull_request_review_id": 2148094315,
      "id": 1658791383,
      "node_id": "PRRC_kwDOABII585i3yXX",
      "diff_hunk": "@@ -6,19 +6,59 @@\n #ifndef BITCOIN_SCRIPT_SIGCACHE_H\n #define BITCOIN_SCRIPT_SIGCACHE_H\n \n+#include <consensus/amount.h>\n+#include <crypto/sha256.h>\n+#include <cuckoocache.h>\n #include <script/interpreter.h>\n #include <span.h>\n+#include <uint256.h>\n #include <util/hasher.h>\n \n+#include <cstddef>\n+#include <cstdint>\n+#include <shared_mutex>\n+#include <utility>\n #include <vector>\n \n+class CTransaction;\n+class XOnlyPubKey;\n+\n // DoS prevention: limit cache size to 32MiB (over 1000000 entries on 64-bit\n // systems). Due to how we count cache size, actual memory usage is slightly\n // more (~32.25 MiB)\n static constexpr size_t DEFAULT_MAX_SIG_CACHE_BYTES{32 << 20};\n \n class CPubKey;\n \n+/**\n+ * Valid signature cache, to avoid doing expensive ECDSA signature checking\n+ * twice for every transaction (once when accepted into memory pool, and\n+ * again when accepted into the block chain)\n+ */\n+class SignatureCache\n+{\n+private:\n+    //! Entries are SHA256(nonce || 'E' or 'S' || 31 zero bytes || signature hash || public key || signature):\n+    CSHA256 m_salted_hasher_ecdsa;\n+    CSHA256 m_salted_hasher_schnorr;\n+    typedef CuckooCache::cache<uint256, SignatureCacheHasher> map_type;\n+    map_type setValid;\n+    std::shared_mutex cs_sigcache;\n+\n+public:\n+    SignatureCache();",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 44,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "003ce1a4d8899ef07fc82291900f4e908f9779a0",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: Commit message still says CSignatureCache :)",
      "created_at": "2024-06-28T13:52:38Z",
      "updated_at": "2024-06-28T14:01:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658791383",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658791383"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658797600",
      "pull_request_review_id": 2148094315,
      "id": 1658797600,
      "node_id": "PRRC_kwDOABII585i3z4g",
      "diff_hunk": "@@ -360,8 +361,21 @@ static_assert(std::is_nothrow_move_assignable_v<CScriptCheck>);\n static_assert(std::is_nothrow_move_constructible_v<CScriptCheck>);\n static_assert(std::is_nothrow_destructible_v<CScriptCheck>);\n \n-/** Initializes the script-execution cache */\n-[[nodiscard]] bool InitScriptExecutionCache(size_t max_size_bytes);\n+/**\n+ * Convenience class for initializing and passing the script execution cache.\n+ */\n+class ValidationCache\n+{\n+public:\n+    CuckooCache::cache<uint256, SignatureCacheHasher> m_script_execution_cache;\n+\n+    ValidationCache(size_t script_execution_cache_bytes);\n+\n+    ValidationCache(const ValidationCache&) = delete;\n+    ValidationCache(ValidationCache&&) = delete;",
      "path": "src/validation.h",
      "position": null,
      "original_position": 29,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "a17bd08d59278b9072ba9aee41c40abd0e889422",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: I don't see the harm in keeping it movable even if we don't currently need to move it. As a reader of the code, if I needed to move it in the future, I'd be afraid to remove these because \"they're probably there for a reason\".\r\n\r\nUnless there actually is a reason?",
      "created_at": "2024-06-28T13:55:22Z",
      "updated_at": "2024-06-28T14:01:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658797600",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658797600"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 375,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658806068",
      "pull_request_review_id": 2148094315,
      "id": 1658806068,
      "node_id": "PRRC_kwDOABII585i3180",
      "diff_hunk": "@@ -46,7 +44,12 @@ class SignatureCache\n     std::shared_mutex cs_sigcache;\n \n public:\n-    SignatureCache();\n+    SignatureCache(size_t max_size_bytes);\n+\n+    SignatureCache(const SignatureCache&) = delete;\n+    SignatureCache(SignatureCache&&) = delete;",
      "path": "src/script/sigcache.h",
      "position": null,
      "original_position": 18,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "475c57ba482abd8675d0d3ccde98452808be5536",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same comment here about deleted moves.",
      "created_at": "2024-06-28T14:00:41Z",
      "updated_at": "2024-06-28T14:01:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658806068",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658806068"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658934242",
      "pull_request_review_id": 2148341610,
      "id": 1658934242,
      "node_id": "PRRC_kwDOABII585i4VPi",
      "diff_hunk": "@@ -2095,17 +2095,15 @@ bool CScriptCheck::operator()() {\n     return VerifyScript(scriptSig, m_tx_out.scriptPubKey, witness, nFlags, CachingTransactionSignatureChecker(ptxTo, nIn, m_tx_out.nValue, cacheStore, *txdata), &error);\n }\n \n-static CSHA256 g_scriptExecutionCacheHasher;\n-\n ValidationCache::ValidationCache(size_t script_execution_cache_bytes)\n {\n     // Setup the salted hasher\n     uint256 nonce = GetRandHash();\n     // We want the nonce to be 64 bytes long to force the hasher to process\n     // this chunk, which makes later hash computations more efficient. We\n     // just write our 32-byte entropy twice to fill the 64 bytes.\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n-    g_scriptExecutionCacheHasher.Write(nonce.begin(), 32);\n+    m_script_execution_cache_hasher.Write(nonce.begin(), 32);",
      "path": "src/validation.cpp",
      "position": 90,
      "original_position": 15,
      "commit_id": "064a401e10f2b2da8f31f682929431d06c671d93",
      "original_commit_id": "a4fc935bf9a707098385a520714317277f3d1ffd",
      "in_reply_to_id": 1657337310,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I did this now, but was not completely sure where to put the nonce generation. ",
      "created_at": "2024-06-28T15:39:49Z",
      "updated_at": "2024-06-28T15:39:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30141#discussion_r1658934242",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1658934242"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30141"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2104,
      "original_line": 2104,
      "side": "RIGHT"
    }
  ]
}