{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388",
    "id": 2828403555,
    "node_id": "PR_kwDOABII586olgNj",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33388",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33388.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33388.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/7f87cddd36f0456be52d795a53887d53294f824e",
    "number": 33388,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: don't throw from the destructor of DebugLogHelper",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Throwing an exception from the destructor of a class is a bad practice because the destructor will be called when an object of that type is alive on the stack and another exception is thrown, which will result in \"exception during the exception\". This would terminate the program without any messages.\r\n\r\nInstead print the message to the standard error output and call `std::abort()`.\r\n\r\n---\r\n\r\nThis change is part of https://github.com/bitcoin/bitcoin/pull/26812. It is an improvement on its own, so creating a separate PR for it following the discussion at https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2345091587. Getting it in will reduce the size of #26812.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-09-15T09:03:14Z",
    "updated_at": "2025-09-15T20:57:34Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "3a35168070070594b7708056cdc4fb8684aea3ca",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "vasild:nothrow_from_DebugLogHelper_destructor",
      "ref": "nothrow_from_DebugLogHelper_destructor",
      "sha": "7f87cddd36f0456be52d795a53887d53294f824e",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 120608826,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMjA2MDg4MjY=",
        "name": "bitcoin",
        "full_name": "vasild/bitcoin",
        "owner": {
          "login": "vasild",
          "id": 266751,
          "node_id": "MDQ6VXNlcjI2Njc1MQ==",
          "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/vasild",
          "html_url": "https://github.com/vasild",
          "followers_url": "https://api.github.com/users/vasild/followers",
          "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
          "organizations_url": "https://api.github.com/users/vasild/orgs",
          "repos_url": "https://api.github.com/users/vasild/repos",
          "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/vasild/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/vasild/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/vasild/bitcoin",
        "archive_url": "https://api.github.com/repos/vasild/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/vasild/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/vasild/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/vasild/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/vasild/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/vasild/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/vasild/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/vasild/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/vasild/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/vasild/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/vasild/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/vasild/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/vasild/bitcoin/events",
        "forks_url": "https://api.github.com/repos/vasild/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/vasild/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/vasild/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/vasild/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/vasild/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/vasild/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/vasild/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/vasild/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/vasild/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/vasild/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/vasild/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/vasild/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/vasild/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/vasild/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/vasild/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/vasild/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:vasild/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/vasild/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/vasild/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/vasild/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/vasild/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/vasild/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/vasild/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/vasild/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/vasild/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/vasild/bitcoin/hooks",
        "svn_url": "https://github.com/vasild/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 7,
        "watchers_count": 7,
        "size": 268105,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-15T09:12:37Z",
        "created_at": "2018-02-07T11:52:47Z",
        "updated_at": "2025-09-15T09:12:44Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2d6a0c464912c325faf35d4ad28b1990e828b414",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37782,
        "stargazers_count": 85512,
        "watchers_count": 85512,
        "size": 293566,
        "default_branch": "master",
        "open_issues_count": 785,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-15T08:49:33Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-09-15T20:33:43Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 40,
    "deletions": 22,
    "changed_files": 2,
    "commits": 1,
    "review_comments": 6,
    "comments": 5
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdmODdjZGRkMzZmMDQ1NmJlNTJkNzk1YTUzODg3ZDUzMjk0ZjgyNGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f87cddd36f0456be52d795a53887d53294f824e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7f87cddd36f0456be52d795a53887d53294f824e",
      "tree": {
        "sha": "88a03db5941d02c54783cceb8d43a67c3f654306",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/88a03db5941d02c54783cceb8d43a67c3f654306"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 88a03db5941d02c54783cceb8d43a67c3f654306\nparent d20f10affba83601f1855bc87d0f47e9dfd5caae\nauthor Vasil Dimov <vd@FreeBSD.org> 1671786206 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1757926519 +0200\n\ntest: don't throw from the destructor of DebugLogHelper\n\nThrowing an exception from the destructor of a class is a bad practice\nbecause the destructor will be called when an object of that type is\nalive on the stack and another exception is thrown, which will result\nin \"exception during the exception\". This would terminate the program\nwithout any messages.\n\nInstead print the message to the standard error output and call\n`std::abort()`.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmjH1H8ACgkQVN8G9ktV\ny7+OkB/+LbxnzY2to1rJzbjiM2cFFcAajAgIDR0SxxKT24x630IEKFFUk5VP3FR3\nCyV0vJ66RKc2KqhIAEKvf/QWMOpYZdKsXWZWRq0gDUN+W8cuxq4rfvrgC2Q6RvHW\nsJUjZ6nFiy+qnqYSdp7jWQaQjmlymC/SJoP2WkVMWuilcg9NKx3gEZsLuULxpEb8\nseCXcTEgSep/YREbND/1l0iE/Kzk0W4GGBsnVTo4nd74Zi0zktzRRkVkny/cbHhg\nCw61zpg4q1lbCtV0GG+rQ+ENsw8u+ynhchWUq8ql6AL1EbLlvXiaH36r4qDs5zEi\nFhn/huvz1hwmnC52vF6PJ5DlvrB3Ia0RHR4jNDIJk1x7Si56UK9dBoFohWRjkGx+\nTB/FIojnYBM8e7cHBE+Vo9EModtUJX3GI1Q1gpANBtQeZZk2vtkmCgR7FY94zfhr\nZRSWl7/8pX4LzT+3Ob1X36j1m+SrVel9IfxkfYsHn+rBBGIY9V1d0HG+FwqthnGw\nISeapnnrjGtlAM2+FeeHlAflZdoJ89YeoDGY6XE0d0n949TFNBnu98576CPuQszX\nKj+R6LJRr6dwSOOlfAhZE7XD8rEOKw2rm9dhdS4CvZfMQi8bYS0HoLV74oRv633p\n7hKScDBOelUM8xDvOjhEUTwZSYcI85fMksqHgElSjTVhjSLTcr/snwBgizaoM9si\ntvxuvgU+Bs8UnD3OxLW/9XK1nBvuWUXbG7rjDNpyZdMSs8UTJN5SRFby3/Gpk5Tc\nrDSsGQrsPcFimvOt65BeOWsKb7uEaS7JAndvFD/RjZRwYmUZ08B+0F+9mmmo4T1e\nZjnhfTIw/OwuB+nK0nTRZ/1NxsXYpkO3s5i0kdgVPt5lcBSTs125jh9/j57Th4+7\nAcP4XFbFD79ecNU8I/LSoA0Dr22sGhm5lW+4TFTTwXifEOzXUkp5Y8l6Bwdl22ne\nZLK4eCUV7JqfNuumU9X94rBH6H0Aw0sLAfzkaNrcwzxSSD7yiCHM4h/Oumh1opVh\nXVb+71MvGsn5TQAGdqY4XdqKDmOlpWW0hWXf891hujkhV4mykd79OnFXr/1KiSkF\nepwbPhY1iStLuQ3S6zLXtjphzu1JGbx/FrdOPkCv11f71GKfUt/ekF6klThG3bcE\nwLGJVovu9GLGTypH//lOccqijXAJ2wiSoKJhVRq4QzexRJ6fwqfjHLnIgWlgCRVH\nR3qSmeIDXSnDamDP7Dx0bVHEcHKvlEUf5plc3/hO9WYMIbXWwW9arhlUezOA0i45\nJ8sR1ISFmsPhfU34154v7ad/kidhi+BMMZgZAmjMVud3No1+PtZVec54rutAeCkv\nZziapc3stEmn3Kv0KHOc4p3FLxBznw==\n=0JOq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "sha": "d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d20f10affba83601f1855bc87d0f47e9dfd5caae"
        }
      ],
      "message": "test: don't throw from the destructor of DebugLogHelper\n\nThrowing an exception from the destructor of a class is a bad practice\nbecause the destructor will be called when an object of that type is\nalive on the stack and another exception is thrown, which will result\nin \"exception during the exception\". This would terminate the program\nwithout any messages.\n\nInstead print the message to the standard error output and call\n`std::abort()`.",
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-09-15T08:55:19Z"
      },
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2022-12-23T09:03:26Z"
      },
      "sha": "7f87cddd36f0456be52d795a53887d53294f824e"
    },
    {
      "event": "labeled",
      "id": 19696021199,
      "node_id": "LE_lADOABII587Lqz3OzwAAAASV-W7P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19696021199",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T09:03:17Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 3291140112,
      "node_id": "IC_kwDOABII587EKtAQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3291140112",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T09:03:19Z",
      "updated_at": "2025-09-15T14:45:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33388.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/33388#pullrequestreview-3224790999), [Crypt-iQ](https://github.com/bitcoin/bitcoin/pull/33388#issuecomment-3292557230) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#issuecomment-3291140112",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388"
    },
    {
      "event": "reviewed",
      "id": 3224790999,
      "node_id": "PRR_kwDOABII587ANmfX",
      "url": null,
      "actor": null,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-15T14:00:17Z",
      "author_association": "NONE",
      "body": "ACK 7f87cddd36f0456be52d795a53887d53294f824e\r\n\r\nI've reviewed, I've executed the unit tests.\r\nThe change is Test only.\r\nThe relevant change is in `DebugLogHelper` destructor, exception throwing is replaced by print and `abort()`.\r\nOther changes improve documentation, parameters of the class.\r\nChanges are not in separate commits, but changes are small and test-only.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#pullrequestreview-3224790999",
      "submitted_at": "2025-09-15T14:00:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
    },
    {
      "event": "commented",
      "id": 3292557230,
      "node_id": "IC_kwDOABII587EQG-u",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3292557230",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T14:45:07Z",
      "updated_at": "2025-09-15T14:45:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 7f87cddd36f0456be52d795a53887d53294f824e",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#issuecomment-3292557230",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388"
    },
    {
      "event": "commented",
      "id": 3292587091,
      "node_id": "IC_kwDOABII587EQORT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3292587091",
      "actor": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T14:49:29Z",
      "updated_at": "2025-09-15T14:49:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Throwing an exception from the destructor of a class is a bad practice because the destructor will be called when an object of that type is alive on the stack and another exception is thrown, which will result in \"exception during the exception\". This would terminate the program without any messages.\r\n\r\nThis is not precisely what happens. If an exception is emitted from a function marked `noexcept(false)`, the current terminate handler will be invoked. It does not matter whether the destructor is called due to another exception or not.\r\nThe default terminate handler would print the exception and then call abort.\r\n\r\nThe proposed implementation prints the error and then calls abort.\r\n\r\nSo basically, the change is that the class is no longer sensitive to a custom terminate handler. Is that really desired?",
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#issuecomment-3292587091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388"
    },
    {
      "event": "commented",
      "id": 3293213987,
      "node_id": "IC_kwDOABII587ESnUj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3293213987",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T17:29:24Z",
      "updated_at": "2025-09-15T17:30:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Cap'n Proto has a policy of declaring destructors `noexcept(false)` and using `std::uncaught_exception()` to prevent throwing more than once under the assumption that \"ff another exception is already active, the new exception is assumed to be a side-effect of the main exception, and is either silently swallowed or reported on a side channel.\" It seems like that could be a reasonable approach here. The DebugLogHelper destructor could continue to throw normally, but just log instead in the case where another exception was active. And if caller cared to prevent this, it could call the `check_found` method explicitly outside of the destructor.\r\n\r\nMore information about cap'n proto's policy:\r\n\r\n- https://github.com/capnproto/capnproto/blob/master/style-guide.md#exceptions-can-happen-anywhere-including-destructors\r\n- https://github.com/capnproto/capnproto/blob/master/style-guide.md#exceptions-usage\r\n- https://github.com/capnproto/capnproto/blob/master/doc/cxx.md#c-feature-usage--c11-exceptions\r\n\r\nNot endorsing it generally but it might be a good fit here.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#issuecomment-3293213987",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388"
    },
    {
      "event": "commented",
      "id": 3293797977,
      "node_id": "IC_kwDOABII587EU15Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3293797977",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T20:22:03Z",
      "updated_at": "2025-09-15T20:22:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "> using std::uncaught_exception() to prevent throwing\r\n\r\nhttps://en.cppreference.com/w/cpp/error/uncaught_exception.html indicates `std::uncaught_exception()` is deprecated in C++17 and removed in C++20 - but we could use `std::uncaught_exceptions()`.\r\n\r\nAdded a few comments, thanks for tackling this.\r\n",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#issuecomment-3293797977",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33388"
    },
    {
      "event": "reviewed",
      "id": 3225861373,
      "node_id": "PRR_kwDOABII587ARrz9",
      "url": null,
      "actor": null,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-15T20:22:13Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#pullrequestreview-3225861373",
      "submitted_at": "2025-09-15T20:22:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
    },
    {
      "event": "reviewed",
      "id": 3226297965,
      "node_id": "PRR_kwDOABII587ATWZt",
      "url": null,
      "actor": null,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-15T20:57:34Z",
      "author_association": "MEMBER",
      "body": "As `DebugLogHelper` is only used within the unit test framework; could use `BOOST_REQUIRE` with a message within the destructor too.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#pullrequestreview-3226297965",
      "submitted_at": "2025-09-15T20:52:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349820667",
      "pull_request_review_id": 3225861373,
      "id": 2349820667,
      "node_id": "PRRC_kwDOABII586MD2r7",
      "diff_hunk": "@@ -21,11 +21,12 @@ DebugLogHelper::DebugLogHelper(std::string message, MatchFn match)\n     noui_test_redirect();\n }\n \n-void DebugLogHelper::check_found()\n+DebugLogHelper::~DebugLogHelper()\n {\n     noui_reconnect();\n     LogInstance().DeleteCallback(m_print_connection);\n     if (!m_found && m_match(nullptr)) {\n-        throw std::runtime_error(strprintf(\"'%s' not found in debug log\\n\", m_message));\n+        std::cerr << \"Fatal error: expected message not found in the debug log: \" << m_message << \"\\n\";\n+        std::abort();",
      "path": "src/test/util/logging.cpp",
      "position": 26,
      "original_position": 26,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "original_commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Please add `#include <cstdlib>` for [std::abort()](https://en.cppreference.com/w/cpp/utility/program/abort)",
      "created_at": "2025-09-15T18:42:38Z",
      "updated_at": "2025-09-15T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#discussion_r2349820667",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349820667"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349822297",
      "pull_request_review_id": 3225861373,
      "id": 2349822297,
      "node_id": "PRRC_kwDOABII586MD3FZ",
      "diff_hunk": "@@ -8,10 +8,10 @@\n #include <noui.h>\n #include <tinyformat.h>\n \n-#include <stdexcept>\n+#include <iostream>\n \n-DebugLogHelper::DebugLogHelper(std::string message, MatchFn match)\n-    : m_message{std::move(message)}, m_match(std::move(match))\n+DebugLogHelper::DebugLogHelper(const std::string& message, MatchFn match)",
      "path": "src/test/util/logging.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "original_commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This parameter change is a separate concern. Please split it into its own commit to keep the risky behavior change easy to review.\r\nThough personally, I'd pass both by value and move into the members to handle rvalues efficiently.",
      "created_at": "2025-09-15T18:43:31Z",
      "updated_at": "2025-09-15T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#discussion_r2349822297",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349822297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 13,
      "original_line": 13,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349889201",
      "pull_request_review_id": 3225861373,
      "id": 2349889201,
      "node_id": "PRRC_kwDOABII586MEHax",
      "diff_hunk": "@@ -11,29 +11,46 @@\n #include <list>\n #include <string>\n \n+/**\n+ * A helper class that ensures a given message is logged within the scope of an instance of the class.\n+ */\n class DebugLogHelper\n {\n+public:\n+    using MatchFn = std::function<bool(const std::string* line)>;\n+\n+    /**\n+     * Construct an instance, providing the message and possibly a custom\n+     * matching function.\n+     * @param[in] message This message must be logged after this instance\n+     * is created and before it is destroyed.\n+     * @param[in] match Custom match checking function. Invoked:\n+     * - when a new message is logged which contains `message`\n+     *   - if it returns `true`, then a match is considered to have been found, thus:\n+     *     - further checking of log messages is not done\n+     *     - this function will not be called for the rest of the logged messages\n+     *     - the destructor `~DebugLogHelper()` will not do any checks\n+     *   - if it returns `false`, then the current message logged is not considered a match, thus:\n+     *     - subsequent log messages will be checked for `message`\n+     *     - this function will be called if any is found\n+     *     - eventually, if the destructor `~DebugLogHelper()` is called and this function\n+     *       never returned `true`, then it will call it once more for a last time with a\n+     *       `nullptr` argument.\n+     * - if the destructor is called without a successful match, then this function will be\n+     *   called with a `nullptr` argument to decide what the final action should be:\n+     *   - if it returns `true`, then a fatal error will be produced\n+     *   - if it returns `false`, then the no-match will be ignored and operation will\n+     *     continue normally\n+     */",
      "path": "src/test/util/logging.h",
      "position": 34,
      "original_position": 34,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "original_commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm very much against these long and scary comments - seems like a strong code smell. The comment will quickly reflect an old version of the code since it's not high-level enough and we simply won't update it when the code changes. And honestly reading the whole thing didn't help me with understanding the gist of it.\r\n\r\nIf we feel the code isn't self-explanatory we should adjust the code instead of writing long documentation for it. If you still feel docs are needed, let's do it more high-level without all the details that the code can already tell us, maybe something like:\r\n\r\n```suggestion\r\n    /**\r\n     * RAII test helper that asserts a log line containing `message` is emitted during its lifetime.\r\n     * The optional `match` predicate is called for each such line, and once at destruction with `nullptr`, if none.\r\n     * If that final call returns true, an error is printed and the process aborts (default).\r\n     */\r\n```",
      "created_at": "2025-09-15T19:18:25Z",
      "updated_at": "2025-09-15T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#discussion_r2349889201",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349889201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
        }
      },
      "start_line": 22,
      "original_start_line": 22,
      "start_side": "RIGHT",
      "line": 44,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349918985",
      "pull_request_review_id": 3225861373,
      "id": 2349918985,
      "node_id": "PRRC_kwDOABII586MEOsJ",
      "diff_hunk": "@@ -21,11 +21,12 @@ DebugLogHelper::DebugLogHelper(std::string message, MatchFn match)\n     noui_test_redirect();\n }\n \n-void DebugLogHelper::check_found()\n+DebugLogHelper::~DebugLogHelper()\n {\n     noui_reconnect();\n     LogInstance().DeleteCallback(m_print_connection);\n     if (!m_found && m_match(nullptr)) {\n-        throw std::runtime_error(strprintf(\"'%s' not found in debug log\\n\", m_message));\n+        std::cerr << \"Fatal error: expected message not found in the debug log: \" << m_message << \"\\n\";",
      "path": "src/test/util/logging.cpp",
      "position": 25,
      "original_position": 25,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "original_commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`LogError` would flush after this line, so we could safely abort after (since `abort` doesn't call any destructors). Can you confirm that `cerr` will also flush safely?",
      "created_at": "2025-09-15T19:34:25Z",
      "updated_at": "2025-09-15T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#discussion_r2349918985",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349918985"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 29,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349921508",
      "pull_request_review_id": 3225861373,
      "id": 2349921508,
      "node_id": "PRRC_kwDOABII586MEPTk",
      "diff_hunk": "@@ -21,11 +21,12 @@ DebugLogHelper::DebugLogHelper(std::string message, MatchFn match)\n     noui_test_redirect();\n }\n \n-void DebugLogHelper::check_found()\n+DebugLogHelper::~DebugLogHelper()\n {\n     noui_reconnect();\n     LogInstance().DeleteCallback(m_print_connection);",
      "path": "src/test/util/logging.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "original_commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I admit that I don't understand this well enough, why reconnect before deleting the callback? Shouldn't we delete the callback first, then call `noui_reconnect()`?\r\n",
      "created_at": "2025-09-15T19:35:53Z",
      "updated_at": "2025-09-15T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#discussion_r2349921508",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349921508"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
        }
      },
      "start_line": 26,
      "original_start_line": 26,
      "start_side": "RIGHT",
      "line": 27,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349932872",
      "pull_request_review_id": 3225861373,
      "id": 2349932872,
      "node_id": "PRRC_kwDOABII586MESFI",
      "diff_hunk": "@@ -11,29 +11,46 @@\n #include <list>\n #include <string>\n \n+/**\n+ * A helper class that ensures a given message is logged within the scope of an instance of the class.\n+ */\n class DebugLogHelper\n {\n+public:\n+    using MatchFn = std::function<bool(const std::string* line)>;\n+\n+    /**\n+     * Construct an instance, providing the message and possibly a custom\n+     * matching function.\n+     * @param[in] message This message must be logged after this instance\n+     * is created and before it is destroyed.\n+     * @param[in] match Custom match checking function. Invoked:\n+     * - when a new message is logged which contains `message`\n+     *   - if it returns `true`, then a match is considered to have been found, thus:\n+     *     - further checking of log messages is not done\n+     *     - this function will not be called for the rest of the logged messages\n+     *     - the destructor `~DebugLogHelper()` will not do any checks\n+     *   - if it returns `false`, then the current message logged is not considered a match, thus:\n+     *     - subsequent log messages will be checked for `message`\n+     *     - this function will be called if any is found\n+     *     - eventually, if the destructor `~DebugLogHelper()` is called and this function\n+     *       never returned `true`, then it will call it once more for a last time with a\n+     *       `nullptr` argument.\n+     * - if the destructor is called without a successful match, then this function will be\n+     *   called with a `nullptr` argument to decide what the final action should be:\n+     *   - if it returns `true`, then a fatal error will be produced\n+     *   - if it returns `false`, then the no-match will be ignored and operation will\n+     *     continue normally\n+     */\n+    explicit DebugLogHelper(const std::string& message, MatchFn match = [](const std::string*){ return true; });",
      "path": "src/test/util/logging.h",
      "position": 35,
      "original_position": 35,
      "commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "original_commit_id": "7f87cddd36f0456be52d795a53887d53294f824e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: we can simplify it a bit (+ pass by value mentioned earlier):\r\n```suggestion\r\n    explicit DebugLogHelper(std::string message, MatchFn match = [](auto){ return true; });\r\n```",
      "created_at": "2025-09-15T19:40:14Z",
      "updated_at": "2025-09-15T20:22:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33388#discussion_r2349932872",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2349932872"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33388"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 45,
      "original_line": 45,
      "side": "RIGHT"
    }
  ]
}