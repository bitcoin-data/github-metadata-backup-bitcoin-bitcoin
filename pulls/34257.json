{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34257",
    "id": 3164120126,
    "node_id": "PR_kwDOABII5868mKQ-",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34257",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34257.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34257.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34257",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34257/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34257/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34257/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/82190c7cab022771cf5589ee55d8c258436b9941",
    "number": 34257,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "txgraph: deterministic optimal transaction order",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Part of #30289. Alternative to #33335.\r\n\r\nThis makes the order of transaction in txgraph deterministic (as long as the set of transactions is fixed, and all clusters manage to reach optimal linearization), by introducing tie-break rules in the order of transactions within a chunk, chunk within a cluster, and chunks across clusters.\r\n\r\nThe order of transactions within a chunk becomes:\r\n1. Topology (parents before children)\r\n2. Individual transaction feerate (high to low)\r\n3. Individual transaction weight (small to large)\r\n4. Txid (low to high txid)\r\n(and then fed to `PostLinearize`, which may improve the sub-chunk ordering but introduce *deterministic* violations of 3 and 4)\r\n\r\nThe order of chunks within a cluster becomes:\r\n1. Topology (chunks before their dependent chunks)\r\n2. Chunk feerate (high to low)\r\n3. Chunk weight (small to large)\r\n4. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe order of chunks across clusters becomes:\r\n1. Feerate (high to low)\r\n2. Equal-feerate-chunk-prefix weight (small to large)\r\n3. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe equal-feerate-chunk-prefix weight of a chunk C is defined as the sum of the weights of all chunks in the same cluster as C, with the same feerate as C, up to and including C itself, in linearization order (but excluding such chunks that appear after C). This is a well-defined approximation of sorting chunks from small to large across clusters, while remaining consistent with intra-cluster linearization order.\r\n",
    "labels": [],
    "created_at": "2026-01-11T23:56:09Z",
    "updated_at": "2026-01-11T23:57:03Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "95d3c7bdcd6d59e3e4f0bc84082b7bfbfe4eafc7",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sipa:202601_det_mempool_order",
      "ref": "202601_det_mempool_order",
      "sha": "82190c7cab022771cf5589ee55d8c258436b9941",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1458655,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDU4NjU1",
        "name": "bitcoin",
        "full_name": "sipa/bitcoin",
        "owner": {
          "login": "sipa",
          "id": 548488,
          "node_id": "MDQ6VXNlcjU0ODQ4OA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sipa",
          "html_url": "https://github.com/sipa",
          "followers_url": "https://api.github.com/users/sipa/followers",
          "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
          "organizations_url": "https://api.github.com/users/sipa/orgs",
          "repos_url": "https://api.github.com/users/sipa/repos",
          "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sipa/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/sipa/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sipa/bitcoin",
        "archive_url": "https://api.github.com/repos/sipa/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sipa/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sipa/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sipa/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sipa/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sipa/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sipa/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sipa/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sipa/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sipa/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sipa/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sipa/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sipa/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sipa/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sipa/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sipa/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sipa/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sipa/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sipa/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sipa/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sipa/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sipa/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sipa/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sipa/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sipa/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sipa/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sipa/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sipa/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sipa/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sipa/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sipa/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sipa/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sipa/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sipa/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sipa/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sipa/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sipa/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sipa/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sipa/bitcoin/hooks",
        "svn_url": "https://github.com/sipa/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "TypeScript",
        "forks_count": 22,
        "stargazers_count": 91,
        "watchers_count": 91,
        "size": 284312,
        "default_branch": "lows",
        "open_issues_count": 16,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-11T23:24:55Z",
        "created_at": "2011-03-09T10:46:59Z",
        "updated_at": "2025-12-31T21:09:58Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "abc6a3a4eb9814a7f17e40f7a4d330cbef86bff0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38803,
        "stargazers_count": 87622,
        "watchers_count": 87622,
        "size": 301410,
        "default_branch": "master",
        "open_issues_count": 754,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-11T22:44:29Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-11T23:35:22Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34257"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 487,
    "deletions": 149,
    "changed_files": 19,
    "commits": 10,
    "review_comments": 0,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzMjEyNzUxODI3NjQxNjcwNzQzYWNhODcxNTI5YWY4ODgxNjVhNDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f3212751827641670743aca871529af888165a48",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f3212751827641670743aca871529af888165a48",
      "tree": {
        "sha": "3d656266b7feab4ec134ee4f20bad2604b46d79e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3d656266b7feab4ec134ee4f20bad2604b46d79e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9",
          "sha": "aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9"
        }
      ],
      "message": "txgraph: initialize Ref in AddTransaction (preparation)\n\nInstead of returning a TxGraph::Ref from TxGraph::AddTransaction(),\npass in a TxGraph::Ref& which is updated to refer to the new transaction\nin that graph.\n\nThis cleans up the usage somewhat, avoiding the need for dummy Refs in\nCTxMemPoolEntry constructor calls, but the motivation is that a future\ncommit will allow a callback to passed to MakeTxGraph to define a\nfallback order on the transaction objects. This does not when a Ref is\ncreated separately from the CTxMemPoolEntry it ends up living in, as\npassing the newly-created Ref to the callback would be UB before it's\nemplaced in its final CTxMemPoolEntry.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T21:53:31Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-10T18:03:36Z"
      },
      "sha": "f3212751827641670743aca871529af888165a48"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQzYTU1MmM2ZTYyNTVkMjRjNDc5MTUwODcxY2YxZjY3NzRmZTQwNDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/43a552c6e6255d24c479150871cf1f6774fe4043",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/43a552c6e6255d24c479150871cf1f6774fe4043",
      "tree": {
        "sha": "1b41215d790c56ef22f7feafa8606149147edeb7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1b41215d790c56ef22f7feafa8606149147edeb7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f3212751827641670743aca871529af888165a48",
          "sha": "f3212751827641670743aca871529af888165a48",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f3212751827641670743aca871529af888165a48"
        }
      ],
      "message": "txgraph: update chunk index on Compact (preparation)\n\nThis makes TxGraphImpl::Compact() invoke Cluster::Updated() on all\naffected clusters, in case they have internal GraphIndex values stored\nthat may have become outdated with the renumbering of GraphIndex values\nthat Compact() caused.\n\nThis is necessary as preparation for a future commit in which chunk data\nwill gain a reference to the maximal-fallback transaction within the\nchunk.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T21:59:34Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-10T23:07:30Z"
      },
      "sha": "43a552c6e6255d24c479150871cf1f6774fe4043"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiZTkxYTVlNjJlYzI0ZjdlZWNlNDhhYzc5YjdhYmZlNGJhNzY0YWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4be91a5e62ec24f7eece48ac79b7abfe4ba764ac",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4be91a5e62ec24f7eece48ac79b7abfe4ba764ac",
      "tree": {
        "sha": "631d8e7c824a23dbd0194c30fe4c6d5d540a5235",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/631d8e7c824a23dbd0194c30fe4c6d5d540a5235"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/43a552c6e6255d24c479150871cf1f6774fe4043",
          "sha": "43a552c6e6255d24c479150871cf1f6774fe4043",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/43a552c6e6255d24c479150871cf1f6774fe4043"
        }
      ],
      "message": "txgraph: clear cluster's chunk index in ~Ref (preparation)\n\nWhenever a TxGraph::Ref is destroyed, if it by then still appears inside\nmain-level clusters, wipe the chunk index entries for those clusters, to\nprevent having lingering indexes for transactions without Ref.\n\nThis is preparation for enabling a callback being passed to MakeTxGraph\nto define a fallback order on objects. Once the Ref for a transaction is\ngone, it is not possible to invoke the callback anymore. To prevent the\nindex becoming inconsistent, we need to immediately get rid of the index\nentries when the Ref disappears.\n\nThis is not a problem, because such destructions necessarily will\ntrigger a relinearization of the cluster (assuming there are\ntransactions in it left) before becoming acceptable again, and the chunk\nordering is not observable (through CompareMainOrder, or through the\nBlockBuilder interface) until that point. However, the index itself\nneeds to remain consistent in the mean time, even if not meaningful.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T22:15:25Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-10T23:42:50Z"
      },
      "sha": "4be91a5e62ec24f7eece48ac79b7abfe4ba764ac"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwYjMzYzIzYWU0MmFmMjQyOGIzODFhMDJhNTVlMDg3ZTU4MDc5NmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00b33c23ae42af2428b381a02a55e087e580796f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/00b33c23ae42af2428b381a02a55e087e580796f",
      "tree": {
        "sha": "d06adba14eba2d922008f735e1e76fb1fad6dcec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d06adba14eba2d922008f735e1e76fb1fad6dcec"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4be91a5e62ec24f7eece48ac79b7abfe4ba764ac",
          "sha": "4be91a5e62ec24f7eece48ac79b7abfe4ba764ac",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4be91a5e62ec24f7eece48ac79b7abfe4ba764ac"
        }
      ],
      "message": "clusterlin: sort tx in chunk by feerate and size (feature)\n\nThis changes the order of transactions within a chunk to be:\n1. Topology (parents before children)\n2. Individual transaction feerate (high to low)\n3. Individual transaction weight (small to large)\n4. Random tiebreak (will be changed in future commit)\n\nTo do so, use a heap of topology-ready transactions within\nGetLinearization(), sorted by (2), (3), and (4).",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T22:48:28Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-07T15:36:03Z"
      },
      "sha": "00b33c23ae42af2428b381a02a55e087e580796f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwMDk2MTUxMzE3NmY1YjFkOWFhNzkwN2JjYzY0OThkNjRhNmE0Zjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/000961513176f5b1d9aa7907bcc6498d64a6a4f7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/000961513176f5b1d9aa7907bcc6498d64a6a4f7",
      "tree": {
        "sha": "e9dff0ea656e2598455d0876ece1b804118a9db2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e9dff0ea656e2598455d0876ece1b804118a9db2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00b33c23ae42af2428b381a02a55e087e580796f",
          "sha": "00b33c23ae42af2428b381a02a55e087e580796f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/00b33c23ae42af2428b381a02a55e087e580796f"
        }
      ],
      "message": "txgraph: sort chunks by equal-feerate-prefix size (feature)\n\nThis makes TxGraph track the equal-feerate-prefix size of all chunks in\nall clusters in the main graph, and uses it to sort chunks coming from\ndistinct clusters.\n\nThe order of chunks across clusters becomes:\n1. Feerate (high to low)\n2. Equal-feerate-chunk-prefix (small to large)\n3. Cluster sequence number (old to new); this will be changed later.\n\nThe equal-feerate-chunk-prefix size of a chunk C is defined as the sum\nof the weights of all chunks in the same cluster as C, with the same\nfeerate as C, up to and including C itself, in linearization order (but\nexcluding such chunks that appear after C).\n\nThis is an approximation of sorting chunks from small to large across\nclusters, while remaining consistent with intra-cluster linearization\norder.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T23:17:32Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-07T15:59:24Z"
      },
      "sha": "000961513176f5b1d9aa7907bcc6498d64a6a4f7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1Mzg3YzEzYWY3MjkzODY0YzViODViZmEwMWIyNjAwMmQ0ZWRkNGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5387c13af7293864c5b85bfa01b26002d4edd4e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5387c13af7293864c5b85bfa01b26002d4edd4e",
      "tree": {
        "sha": "48aef9926afc8676fa19f76d5fe5474a77c73998",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/48aef9926afc8676fa19f76d5fe5474a77c73998"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/000961513176f5b1d9aa7907bcc6498d64a6a4f7",
          "sha": "000961513176f5b1d9aa7907bcc6498d64a6a4f7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/000961513176f5b1d9aa7907bcc6498d64a6a4f7"
        }
      ],
      "message": "clusterlin: make optimal linearizations deterministic (feature)\n\nThis allows passing in a fallback order comparator to Linearize(), which\nis used as final tiebreak when deciding the order of chunks and\ntransactions within a chunk.\n\nThe order of chunks within a cluster becomes:\n1. Topology (chunks after their dependencies)\n2. Feerate (high to low)\n3. Weight (small to large)\n4. Max-fallback (chunk with lowest maximum-fallback-tx first)\n\nThe order of transactions within a chunk becomes:\n1. Topology (parents before children)\n2. Individual transaction feerate (high to low)\n3. Weight (small to large)\n4. Fallback (low to high fallback order)",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T23:18:03Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-07T20:02:02Z"
      },
      "sha": "d5387c13af7293864c5b85bfa01b26002d4edd4e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhhYzQ1ZTJiZjk2MGVjM2IwNmQ5ZTIzNzgxYjU0NmQyNTdhM2JlYzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8ac45e2bf960ec3b06d9e23781b546d257a3bec5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8ac45e2bf960ec3b06d9e23781b546d257a3bec5",
      "tree": {
        "sha": "bfe5fd09fe43b003b28a16915ace0d23d3c11c69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bfe5fd09fe43b003b28a16915ace0d23d3c11c69"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5387c13af7293864c5b85bfa01b26002d4edd4e",
          "sha": "d5387c13af7293864c5b85bfa01b26002d4edd4e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d5387c13af7293864c5b85bfa01b26002d4edd4e"
        }
      ],
      "message": "txgraph test: subclass TxGraph::Ref like mempool does (preparation)\n\nThis is a small change to the txgraph fuzz test to make it used objects\nderived from TxGraph::Ref (SimTxObject) rather than TxGraph::Ref\ndirectly. This matches how the mempool uses CTxMemPoolEntry, which\nderives from TxGraph::Ref.\n\nThis is preparation for a future commit which will introduce simulated\ntxids to the transactions in this fuzz test, to be used as falllback\norder.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T23:18:03Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-07T22:17:16Z"
      },
      "sha": "8ac45e2bf960ec3b06d9e23781b546d257a3bec5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc5Y2YxZDQ5NjQ4OTdkNTY4ZTllMTg5NDVjYTg0ZjQ4ZTQzMjQyNDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79cf1d4964897d568e9e18945ca84f48e4324243",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/79cf1d4964897d568e9e18945ca84f48e4324243",
      "tree": {
        "sha": "00298f90d08f66a259282ad33ac259b6bbada587",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/00298f90d08f66a259282ad33ac259b6bbada587"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8ac45e2bf960ec3b06d9e23781b546d257a3bec5",
          "sha": "8ac45e2bf960ec3b06d9e23781b546d257a3bec5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8ac45e2bf960ec3b06d9e23781b546d257a3bec5"
        }
      ],
      "message": "txgraph: pass fallback_order to TxGraph (preparation)\n\nThis adds an std::function<strong_ordering(Ref&,Ref&)> argument to the\nMakeTxGraph function, which can be used by the caller (e.g., mempool\ncode) to provide a fallback order to TxGraph.\n\nThis is just preparation; TxGraph does not yet use this fallback order\nfor anything.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T23:18:04Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-08T20:17:28Z"
      },
      "sha": "79cf1d4964897d568e9e18945ca84f48e4324243"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRmNGVjY2ZhNThlZmZhN2JiZDZhMmJlNjg1MjE4NTA2MzQxYWFjNWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/df4eccfa58effa7bbd6a2be685218506341aac5d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/df4eccfa58effa7bbd6a2be685218506341aac5d",
      "tree": {
        "sha": "710cff44bb150f2e775097d0df80d681431b2db3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/710cff44bb150f2e775097d0df80d681431b2db3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79cf1d4964897d568e9e18945ca84f48e4324243",
          "sha": "79cf1d4964897d568e9e18945ca84f48e4324243",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/79cf1d4964897d568e9e18945ca84f48e4324243"
        }
      ],
      "message": "txgraph: use fallback order when linearizing (feature)\n\nAdd glue to make TxGraph use the fallback order provided to it, in the\nfallback comparator it provides to the cluster linearization code.\n\nThe order of chunks within a cluster becomes:\n1. Topology (chunks after their dependencies)\n2. Feerate (high to low)\n3. Weight (small to large)\n4. Max-txid (chunk with lowest maximum-txid first)\n\nThe order of transactions within a chunk becomes:\n1. Topology (parents before children)\n2. Individual transaction feerate (high to low)\n3. Weight (small to large)\n4. Txid (low to high txid)\n\nThis makes optimal cluster linearization, both the order of chunks\nwithin a chunk, and the order of transactions within those chunks,\ncompletely deterministic.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T23:18:04Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T04:28:00Z"
      },
      "sha": "df4eccfa58effa7bbd6a2be685218506341aac5d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgyMTkwYzdjYWIwMjI3NzFjZjU1ODllZTU1ZDhjMjU4NDM2Yjk5NDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82190c7cab022771cf5589ee55d8c258436b9941",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/82190c7cab022771cf5589ee55d8c258436b9941",
      "tree": {
        "sha": "5b61563e1f2a8f68f264fdfece0329b9a28b6595",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b61563e1f2a8f68f264fdfece0329b9a28b6595"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/df4eccfa58effa7bbd6a2be685218506341aac5d",
          "sha": "df4eccfa58effa7bbd6a2be685218506341aac5d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/df4eccfa58effa7bbd6a2be685218506341aac5d"
        }
      ],
      "message": "txgraph: use fallback order to sort chunks (feature)\n\nThis makes TxGraph also use the fallback order to decide the order of\nchunks from distinct clusters.\n\nThe order of chunks across clusters becomes:\n1. Feerate (high to low)\n2. Equal-feerate-chunk-prefix (small to large)\n3. Max-txid (chunk with lowest maximum-txid first)\n\nThis makes the full TxGraph ordering fully deterministic as long as all\nclusters in it are optimally linearized.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T23:22:29Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2026-01-11T04:28:14Z"
      },
      "sha": "82190c7cab022771cf5589ee55d8c258436b9941"
    },
    {
      "event": "commented",
      "id": 3736425770,
      "node_id": "IC_kwDOABII587etVUq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3736425770",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-11T23:56:16Z",
      "updated_at": "2026-01-11T23:57:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34257.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34257#issuecomment-3736425770",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34257"
    }
  ],
  "comments": []
}