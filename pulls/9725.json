{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725",
    "id": 105307655,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTA1MzA3NjU1",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9725",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/9725.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/9725.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
    "number": 9725,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "CValidationInterface Cleanups",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This + #9605 + about three more and wallet updates from blocks will be in a background thread so that they do not block block connection. This PR is just some general cleanup that happened along the way or otherwise makes future changes easier. See commit messages for more details.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2017-02-08T21:21:49Z",
    "updated_at": "2021-09-08T11:10:34Z",
    "closed_at": "2017-04-10T19:21:27Z",
    "mergeable_state": "unknown",
    "merged_at": "2017-04-10T19:21:27Z",
    "merge_commit_sha": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "TheBlueMatt:2017-01-wallet-cache-inmempool-1",
      "ref": "2017-01-wallet-cache-inmempool-1",
      "sha": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 1443291,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDQzMjkx",
        "name": "bitcoin",
        "full_name": "TheBlueMatt/bitcoin",
        "owner": {
          "login": "TheBlueMatt",
          "id": 649246,
          "node_id": "MDQ6VXNlcjY0OTI0Ng==",
          "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheBlueMatt",
          "html_url": "https://github.com/TheBlueMatt",
          "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
          "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
          "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
          "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
          "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/TheBlueMatt/bitcoin",
        "description": "Bitcoin (dont fork from here, fork from bitcoin/bitcoin)",
        "fork": true,
        "url": "https://api.github.com/repos/TheBlueMatt/bitcoin",
        "archive_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheBlueMatt/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheBlueMatt/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheBlueMatt/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/hooks",
        "svn_url": "https://github.com/TheBlueMatt/bitcoin",
        "homepage": "http://www.bitcoin.org/",
        "language": "C++",
        "forks_count": 6,
        "stargazers_count": 19,
        "watchers_count": 19,
        "size": 171686,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T11:57:49Z",
        "created_at": "2011-03-05T14:14:49Z",
        "updated_at": "2022-12-15T18:21:13Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8c28670e92b6422eb7576f074446238f9f221999",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35475,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 668,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T15:32:04Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T16:01:10Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 197,
    "deletions": 135,
    "changed_files": 10,
    "commits": 12,
    "review_comments": 95,
    "comments": 12
  },
  "events": [
    {
      "event": "labeled",
      "id": 954596209,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDk1NDU5NjIwOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/954596209",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-02-08T21:28:36Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "labeled",
      "id": 954596210,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDk1NDU5NjIxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/954596210",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-02-08T21:28:36Z",
      "label": {
        "name": "Wallet",
        "color": "02d7e1"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 968082967,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTY4MDgyOTY3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/968082967",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-02-18T18:40:10Z"
    },
    {
      "event": "reviewed",
      "id": 23501945,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjM1MDE5NDU=",
      "url": null,
      "actor": null,
      "commit_id": "9765f81d764f075818a0f645619e94b51aad0a91",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "One comment nit in the zmq file, utACK f3ef07215b",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-23501945",
      "submitted_at": "2017-02-23T17:18:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 975009956,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTc1MDA5OTU2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/975009956",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-02-23T20:10:53Z"
    },
    {
      "event": "reviewed",
      "id": 25352756,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjUzNTI3NTY=",
      "url": null,
      "actor": null,
      "commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25352756",
      "submitted_at": "2017-03-06T20:18:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "reviewed",
      "id": 25355088,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjUzNTUwODg=",
      "url": null,
      "actor": null,
      "commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25355088",
      "submitted_at": "2017-03-06T20:29:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "reviewed",
      "id": 25366381,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjUzNjYzODE=",
      "url": null,
      "actor": null,
      "commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25366381",
      "submitted_at": "2017-03-06T21:18:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "reviewed",
      "id": 25381496,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjUzODE0OTY=",
      "url": null,
      "actor": null,
      "commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25381496",
      "submitted_at": "2017-03-06T22:22:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "reviewed",
      "id": 25382753,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjUzODI3NTM=",
      "url": null,
      "actor": null,
      "commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25382753",
      "submitted_at": "2017-03-06T22:28:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "commented",
      "id": 284555612,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDU1NTYxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284555612",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T22:30:59Z",
      "updated_at": "2017-03-06T22:30:59Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-284555612",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 988673597,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTg4NjczNTk3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/988673597",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T23:13:39Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 988675349,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTg4Njc1MzQ5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/988675349",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T23:15:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 988682781,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTg4NjgyNzgx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/988682781",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T23:21:41Z"
    },
    {
      "event": "commented",
      "id": 284568275,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDU2ODI3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284568275",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T23:24:52Z",
      "updated_at": "2017-03-06T23:30:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "To fix the issue @theuni found (\"The same set of conflicted transactions is sent here for each block.\"), I had to go rewrite a big chunk of how the mempool removal callback logic works. Now what was previously a standalone class which listens to mempool for transactions removed has gone into the ConnectTrace class, which is accessed in ActivateBestChain to generate callbacks.\r\nAlso, had to rebase.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-284568275",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "mentioned",
      "id": 988686496,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50OTg4Njg2NDk2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/988686496",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T23:24:52Z"
    },
    {
      "event": "subscribed",
      "id": 988686497,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDk4ODY4NjQ5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/988686497",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-06T23:24:52Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 989726633,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTg5NzI2NjMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/989726633",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T15:12:41Z"
    },
    {
      "event": "commented",
      "id": 284749354,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDc0OTM1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284749354",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T15:12:50Z",
      "updated_at": "2017-03-07T15:12:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased for trivial conflict from #9605.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-284749354",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "reviewed",
      "id": 25526582,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjU1MjY1ODI=",
      "url": null,
      "actor": null,
      "commit_id": "5130d7cdcc5577e6c7fcdf8f9a57230a9a322442",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK d9c8399716c6688689f02da41105588ae0d72c16.\r\n\r\nLooks good, but suggested possible improvements.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25526582",
      "submitted_at": "2017-03-07T18:29:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 990226418,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTkwMjI2NDE4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/990226418",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T20:02:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 990229771,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTkwMjI5Nzcx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/990229771",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T20:04:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 990235505,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTkwMjM1NTA1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/990235505",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T20:08:10Z"
    },
    {
      "event": "commented",
      "id": 284843897,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDg0Mzg5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/284843897",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T20:10:00Z",
      "updated_at": "2017-03-07T20:10:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Added a bunch of comments and additional commit description at @ryanofsky's request. Also, note that the reason the std::vector<CTransactionRef> of conflicted transactions is passed back to ActivateBestChain as a shared_ptr is to make it easy to add that to a queue of events shared between threads later, not for anything in this function, forgot to make that clear when I mentioned this is part of a much longer patchset.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-284843897",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "mentioned",
      "id": 990238180,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50OTkwMjM4MTgw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/990238180",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T20:10:00Z"
    },
    {
      "event": "subscribed",
      "id": 990238182,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDk5MDIzODE4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/990238182",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T20:10:00Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 990508760,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTkwNTA4NzYw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/990508760",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T23:18:46Z"
    },
    {
      "event": "reviewed",
      "id": 25802233,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjU4MDIyMzM=",
      "url": null,
      "actor": null,
      "commit_id": "c36422e8831fc9c2268777b0689c02ea0b45ea5c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK 80e7290f5b7c030c5bb2f2f108783d64732bbd10\r\n\r\nThanks for making changes, especially like the new comments.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-25802233",
      "submitted_at": "2017-03-08T16:37:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 991782874,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTkxNzgyODc0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/991782874",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-08T17:58:01Z"
    },
    {
      "event": "reviewed",
      "id": 26038041,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjYwMzgwNDE=",
      "url": null,
      "actor": null,
      "commit_id": "d95db78d185d5deb02fb31a45cbd0a9c9bfe531c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK 96370a99bc3d3728df11a4dc289514dfa6ccfcfc.\r\n\r\nThanks for the updates.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-26038041",
      "submitted_at": "2017-03-09T14:19:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 993279862,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTkzMjc5ODYy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/993279862",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-09T15:05:12Z"
    },
    {
      "event": "commented",
      "id": 285376280,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTM3NjI4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285376280",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-09T15:05:22Z",
      "updated_at": "2017-03-09T15:05:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to fix trivial conflict in rpc/mining.cpp",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-285376280",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "added_to_project",
      "id": 1013776338,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQxMDEzNzc2MzM4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1013776338",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-24T07:14:34Z",
      "project_card": {
        "id": 2207220,
        "url": "https://api.github.com/projects/columns/cards/2207220",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "reviewed",
      "id": 29537478,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mjk1Mzc0Nzg=",
      "url": null,
      "actor": null,
      "commit_id": "892ddf12e10f7a3c810d735362ab174a44be35c4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "I've reviewed most of this and it seems reasonable. I left some feedback on some minor ways to improve it, but I don't think anything is a hold up.",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-29537478",
      "submitted_at": "2017-03-28T19:50:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1019322348,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTAxOTMyMjM0OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1019322348",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-28T20:48:10Z"
    },
    {
      "event": "commented",
      "id": 289961098,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTk2MTA5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289961098",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-29T02:13:42Z",
      "updated_at": "2017-03-29T02:13:42Z",
      "author_association": "MEMBER",
      "body": "utACK acac363e574470be7ca26ab43b7c32c2beac9d9c.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-289961098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "reviewed",
      "id": 29815725,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mjk4MTU3MjU=",
      "url": null,
      "actor": null,
      "commit_id": "ff3d20571b35fa2f8856ea58935cd4775a00cd0c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Looks like one of the intermediate commits is broken (but the issue goes away in a later commit).",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-29815725",
      "submitted_at": "2017-03-29T19:48:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1021486126,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTAyMTQ4NjEyNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1021486126",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-30T01:07:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1021490694,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTAyMTQ5MDY5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1021490694",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-30T01:13:31Z"
    },
    {
      "event": "mentioned",
      "id": 1022872776,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTAyMjg3Mjc3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1022872776",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-30T18:43:51Z"
    },
    {
      "event": "subscribed",
      "id": 1022872777,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwMjI4NzI3Nzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1022872777",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-30T18:43:51Z"
    },
    {
      "event": "commented",
      "id": 291031421,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTAzMTQyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291031421",
      "actor": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-03T01:39:23Z",
      "updated_at": "2017-04-03T01:39:23Z",
      "author_association": "MEMBER",
      "body": "utACK 312683b23752bd9bdae365d0695f1ed73d3c1f3b",
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-291031421",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "commented",
      "id": 292102794,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjEwMjc5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292102794",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-06T08:19:07Z",
      "updated_at": "2017-04-06T08:19:07Z",
      "author_association": "MEMBER",
      "body": "Needs rebse.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-292102794",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNWU5YTAxOWE0YmNlZmY2ODE5YTEwNjk2ZjBlYThlYzVjOThhNDll",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5e9a019a4bceff6819a10696f0ea8ec5c98a49e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f5e9a019a4bceff6819a10696f0ea8ec5c98a49e",
      "tree": {
        "sha": "14a03c671532649b56a3a97be52216516eeb861d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/14a03c671532649b56a3a97be52216516eeb861d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c28670e92b6422eb7576f074446238f9f221999",
          "sha": "8c28670e92b6422eb7576f074446238f9f221999",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8c28670e92b6422eb7576f074446238f9f221999"
        }
      ],
      "message": "Include missing #include in zmqnotificationinterface.h",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:52:38Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-20T23:27:13Z"
      },
      "sha": "f5e9a019a4bceff6819a10696f0ea8ec5c98a49e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MjIwMDBjZjgyY2U3ODk1NDIwOWRmMGJjZjU2YjkwYzBmNDJlOWI0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/822000cf82ce78954209df0bcf56b90c0f42e9b4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/822000cf82ce78954209df0bcf56b90c0f42e9b4",
      "tree": {
        "sha": "a6347c2d986b44c6d191d3ac9a55a6f3255d6ecf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a6347c2d986b44c6d191d3ac9a55a6f3255d6ecf"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5e9a019a4bceff6819a10696f0ea8ec5c98a49e",
          "sha": "f5e9a019a4bceff6819a10696f0ea8ec5c98a49e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f5e9a019a4bceff6819a10696f0ea8ec5c98a49e"
        }
      ],
      "message": "Add pblock to connectTrace at the end of ConnectTip, not start\n\nThis makes ConnectTip responsible for the ConnectTrace instead\nof splitting the logic between ActivateBestChainStep and ConnectTip",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:41Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-06T22:11:33Z"
      },
      "sha": "822000cf82ce78954209df0bcf56b90c0f42e9b4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyOWU2ZTIzMWM4ODkwNGQwZTE3MTg3YjExNmRiNWE5NThkOTUyYmNm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29e6e231c88904d0e17187b116db5a958d952bcf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/29e6e231c88904d0e17187b116db5a958d952bcf",
      "tree": {
        "sha": "fee4b48b6eec4c540ce14fb7b622b6385bef08ef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fee4b48b6eec4c540ce14fb7b622b6385bef08ef"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/822000cf82ce78954209df0bcf56b90c0f42e9b4",
          "sha": "822000cf82ce78954209df0bcf56b90c0f42e9b4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/822000cf82ce78954209df0bcf56b90c0f42e9b4"
        }
      ],
      "message": "Make ConnectTrace::blocksConnected private, hide behind accessors",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:42Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-06T22:14:53Z"
      },
      "sha": "29e6e231c88904d0e17187b116db5a958d952bcf"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMzE2N2JhOWJiZWZjMmU1YjcwNjJmODFjNDgxNTQ3ZjIxYzVlNDRi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3167ba9bbefc2e5b7062f81c481547f21c5e44b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d3167ba9bbefc2e5b7062f81c481547f21c5e44b",
      "tree": {
        "sha": "5a0ce816036736bb70b875f7516d4ca59496186f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5a0ce816036736bb70b875f7516d4ca59496186f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29e6e231c88904d0e17187b116db5a958d952bcf",
          "sha": "29e6e231c88904d0e17187b116db5a958d952bcf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/29e6e231c88904d0e17187b116db5a958d952bcf"
        }
      ],
      "message": "Handle conflicted transactions directly in ConnectTrace",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:42Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-06T22:19:22Z"
      },
      "sha": "d3167ba9bbefc2e5b7062f81c481547f21c5e44b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMTQ3Njg3N2NlN2IwNjE0YTkzYjdiYTQ4ZWJiZTcxMDc1YzBmMjdj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a1476877ce7b0614a93b7ba48ebbe71075c0f27c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a1476877ce7b0614a93b7ba48ebbe71075c0f27c",
      "tree": {
        "sha": "5bec153a17e6cdcbab9ee93816ef2393d2dcab35",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5bec153a17e6cdcbab9ee93816ef2393d2dcab35"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3167ba9bbefc2e5b7062f81c481547f21c5e44b",
          "sha": "d3167ba9bbefc2e5b7062f81c481547f21c5e44b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d3167ba9bbefc2e5b7062f81c481547f21c5e44b"
        }
      ],
      "message": "Keep conflictedTxs in ConnectTrace per-block",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-06T22:22:50Z"
      },
      "sha": "a1476877ce7b0614a93b7ba48ebbe71075c0f27c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNDA0MzM0OTEwNjA2N2RlNjZhMzMxMmVkMzQ4NTE0OWJkYjcxMjQ3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4043349106067de66a3312ed3485149bdb71247",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f4043349106067de66a3312ed3485149bdb71247",
      "tree": {
        "sha": "ed3d7e8c68be2fdacb5227655495b38b0e61bc03",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed3d7e8c68be2fdacb5227655495b38b0e61bc03"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a1476877ce7b0614a93b7ba48ebbe71075c0f27c",
          "sha": "a1476877ce7b0614a93b7ba48ebbe71075c0f27c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a1476877ce7b0614a93b7ba48ebbe71075c0f27c"
        }
      ],
      "message": "Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\n\nThis makes a later change to move it all into one per-block callback\nsimpler.",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-07T19:43:35Z"
      },
      "sha": "f4043349106067de66a3312ed3485149bdb71247"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NjFlNDlmZWUyOTM1YjFlYjRkNGVhN2JhZTMwMjNlNjU1YzBhNmQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/461e49fee2935b1eb4d4ea7bae3023e655c0a6d8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/461e49fee2935b1eb4d4ea7bae3023e655c0a6d8",
      "tree": {
        "sha": "243e76a8c99a0059ee867976603a3426f5f8bf3c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/243e76a8c99a0059ee867976603a3426f5f8bf3c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4043349106067de66a3312ed3485149bdb71247",
          "sha": "f4043349106067de66a3312ed3485149bdb71247",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f4043349106067de66a3312ed3485149bdb71247"
        }
      ],
      "message": "SyncTransaction->TxAddedToMempool/BlockConnected/Disconnected\n\nThis simplifies fixing the wallet-returns-stale-info issue as we\ncan now hold cs_wallet across an entire block instead of only\nper-tx (though we only actually do so in the next commit).\n\nThis change also removes the NOT_IN_BLOCK constant in favor of only\npassing the CBlockIndex* parameter to SyncTransactions when a new\nblock is being connected, instead of also when a block is being\ndisconnected.\n\nThis change adds a parameter to BlockConnectedDisconnected which\nlists the transactions which were removed from mempool due to\nconfliction as a result of this operation. While its somewhat of a\nshame to make block-validation-logic generate a list of mempool\nchanges to be included in its generated callbacks, fixing this isnt\ntoo hard.\n\nFurther in this change-set, CValidationInterface starts listening\nto mempool directly, placing it in the middle and giving it a bit\nof logic to know how to route notifications from block-validation,\nmempool, etc (though not listening for conflicted-removals yet).",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-30T01:12:42Z"
      },
      "sha": "461e49fee2935b1eb4d4ea7bae3023e655c0a6d8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNmQ1ZTZjYmJlZjNkY2ExYmM5ZGNlMDk1MTI0ZjdiNzlkMDFhNTRh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e6d5e6cbbef3dca1bc9dce095124f7b79d01a54a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e6d5e6cbbef3dca1bc9dce095124f7b79d01a54a",
      "tree": {
        "sha": "26673121295c8302cdd75f5e9d9be0f42a7c0595",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/26673121295c8302cdd75f5e9d9be0f42a7c0595"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/461e49fee2935b1eb4d4ea7bae3023e655c0a6d8",
          "sha": "461e49fee2935b1eb4d4ea7bae3023e655c0a6d8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/461e49fee2935b1eb4d4ea7bae3023e655c0a6d8"
        }
      ],
      "message": "Hold cs_wallet for whole block [dis]connection processing\n\nThis simplifies fixing the wallet-returns-stale-info issue as we\nnow hold cs_wallet across an entire block instead of only per-tx.",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-08T17:55:33Z"
      },
      "sha": "e6d5e6cbbef3dca1bc9dce095124f7b79d01a54a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzphY2FkODJmMzc1NjE1ZDhkMjM4YzdkODE5YTQ4YWNkNzkwMDMyOWYy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/acad82f375615d8d238c7d819a48acd7900329f2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/acad82f375615d8d238c7d819a48acd7900329f2",
      "tree": {
        "sha": "705a6b7b1c51216fb29d60891762dc99a416be1a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/705a6b7b1c51216fb29d60891762dc99a416be1a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e6d5e6cbbef3dca1bc9dce095124f7b79d01a54a",
          "sha": "e6d5e6cbbef3dca1bc9dce095124f7b79d01a54a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e6d5e6cbbef3dca1bc9dce095124f7b79d01a54a"
        }
      ],
      "message": "Add override to functions using CValidationInterface methods",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-08T19:00:14Z"
      },
      "sha": "acad82f375615d8d238c7d819a48acd7900329f2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MWYxZTZjZTVlNzg1NDQzNTE5NjQ2NGFhY2UwZGNmN2NlMjFkZDVh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91f1e6ce5e7854435196464aace0dcf7ce21dd5a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/91f1e6ce5e7854435196464aace0dcf7ce21dd5a",
      "tree": {
        "sha": "fc112b0d20886257053cfa5cf67a36cb044aafd3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc112b0d20886257053cfa5cf67a36cb044aafd3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/acad82f375615d8d238c7d819a48acd7900329f2",
          "sha": "acad82f375615d8d238c7d819a48acd7900329f2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/acad82f375615d8d238c7d819a48acd7900329f2"
        }
      ],
      "message": "Remove dead-code tracking of requests for blocks we generated",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-19T20:47:03Z"
      },
      "sha": "91f1e6ce5e7854435196464aace0dcf7ce21dd5a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYzk1ZTJmOWM5NGYxNzJkZGRkZWRlYjEzNTg5NTM5OTJmMzlmOGJk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c95e2f9c94f172ddddedeb1358953992f39f8bd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1c95e2f9c94f172ddddedeb1358953992f39f8bd",
      "tree": {
        "sha": "8c88da5d96bbd4fb70b212f323707e39896d37b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8c88da5d96bbd4fb70b212f323707e39896d37b6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91f1e6ce5e7854435196464aace0dcf7ce21dd5a",
          "sha": "91f1e6ce5e7854435196464aace0dcf7ce21dd5a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/91f1e6ce5e7854435196464aace0dcf7ce21dd5a"
        }
      ],
      "message": "Use std::shared_ptr instead of boost::shared_ptr in ScriptForMining",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-19T21:15:41Z"
      },
      "sha": "1c95e2f9c94f172ddddedeb1358953992f39f8bd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMWE2ZDRjZDU2MGZiZGI2NjUwNjg0MTg2MGRiMDNjMDhlYTRiYmJj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "tree": {
        "sha": "f43c849782eeff69536d2312ccead096621f20e2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f43c849782eeff69536d2312ccead096621f20e2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c95e2f9c94f172ddddedeb1358953992f39f8bd",
          "sha": "1c95e2f9c94f172ddddedeb1358953992f39f8bd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1c95e2f9c94f172ddddedeb1358953992f39f8bd"
        }
      ],
      "message": "Take a CTransactionRef in AddToWalletIfInvolvingMe to avoid a copy",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-04-07T09:53:43Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-03-06T23:21:27Z"
      },
      "sha": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1033822353,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTAzMzgyMjM1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1033822353",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-07T09:54:09Z"
    },
    {
      "event": "commented",
      "id": 292493737,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjQ5MzczNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292493737",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-07T09:54:15Z",
      "updated_at": "2017-04-07T09:54:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased trivially.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-292493737",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "commented",
      "id": 292974076,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjk3NDA3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292974076",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-10T14:53:34Z",
      "updated_at": "2017-04-10T14:53:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "utack 461e49f",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-292974076",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "commented",
      "id": 293006167,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzAwNjE2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293006167",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-10T16:37:13Z",
      "updated_at": "2017-04-10T16:37:13Z",
      "author_association": "MEMBER",
      "body": "cautious utACK b1a6d4cd560fbdb66506841860db03c08ea4bbbc.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-293006167",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-10T18:47:53Z",
      "updated_at": "2017-04-10T18:47:53Z",
      "source": {
        "issue": {
          "id": 220735420,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1MTY2NDg0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10178",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10178/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10178/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10178/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10178",
          "number": 10178,
          "state": "closed",
          "state_reason": null,
          "title": "Remove CValidationInterface::UpdatedTransaction",
          "body": "Based on #9725. Also bonus of getting two extra static declarations in.\r\n\r\nThis removes another callback from block connection logic, making it\r\neasier to reason about the wallet-RPCs-returns-stale-info issue.\r\n\r\nNote that this does a full mapWallet loop after the first block\r\nwhich is connected after restart. This is due to a previous bug\r\nwhere a coinbase transaction from the current best tip which\r\nexisted in wallet immediately prior to restart would not be shown\r\nin the GUI except because on-load -checkblocks would call\r\nDisconnectBlock and ConnectBlock on the current tip. To avoid\r\nmaking it worse (ie that such transactions would never be displayed\r\nuntil restart), a scan to find such transactions was added.",
          "user": {
            "login": "TheBlueMatt",
            "id": 649246,
            "node_id": "MDQ6VXNlcjY0OTI0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheBlueMatt",
            "html_url": "https://github.com/TheBlueMatt",
            "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
            "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
            "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
            "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
            "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10178",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10178",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10178.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10178.patch"
          },
          "closed_at": "2017-04-17T12:46:50Z",
          "created_at": "2017-04-10T18:47:53Z",
          "updated_at": "2021-09-08T11:25:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "merged",
      "id": 1037073824,
      "node_id": "MDExOk1lcmdlZEV2ZW50MTAzNzA3MzgyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1037073824",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "created_at": "2017-04-10T19:21:27Z"
    },
    {
      "event": "closed",
      "id": 1037073825,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTAzNzA3MzgyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1037073825",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-10T19:21:27Z"
    },
    {
      "event": "referenced",
      "id": 1037074004,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEwMzcwNzQwMDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1037074004",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "67023e9004ba843218bee16bc821e955faf0d394",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/67023e9004ba843218bee16bc821e955faf0d394",
      "created_at": "2017-04-10T19:21:34Z"
    },
    {
      "event": "reviewed",
      "id": 31933438,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzE5MzM0Mzg=",
      "url": null,
      "actor": null,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "concept ACK, and weak utACK (although I'm not familiar enough with the interface to be confident that I haven't missed anything).\r\n\r\nOne nit that can be addressed in a future PR.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#pullrequestreview-31933438",
      "submitted_at": "2017-04-10T20:40:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-10T20:49:25Z",
      "updated_at": "2017-04-10T20:49:25Z",
      "source": {
        "issue": {
          "id": 220766094,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1MTg5MTA1",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10180",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10180/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10180/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10180/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10180",
          "number": 10180,
          "state": "closed",
          "state_reason": null,
          "title": "[trivial] Fix typos (tempoarily  temporarily, inadvertantly  inadvertently)",
          "body": "These typos were introduced in 461e49fee2935b1eb4d4ea7bae3023e655c0a6d8 which was merged into `master` earlier today as part of #9725.\r\n\r\nFriendly ping @TheBlueMatt :-)",
          "user": {
            "login": "practicalswift",
            "id": 7826565,
            "node_id": "MDQ6VXNlcjc4MjY1NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/practicalswift",
            "html_url": "https://github.com/practicalswift",
            "followers_url": "https://api.github.com/users/practicalswift/followers",
            "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
            "organizations_url": "https://api.github.com/users/practicalswift/orgs",
            "repos_url": "https://api.github.com/users/practicalswift/repos",
            "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/practicalswift/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 148216,
              "node_id": "MDU6TGFiZWwxNDgyMTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
              "name": "Docs",
              "color": "02d7e1",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10180",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10180",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10180.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10180.patch"
          },
          "closed_at": "2017-05-02T12:49:37Z",
          "created_at": "2017-04-10T20:48:44Z",
          "updated_at": "2022-08-16T17:14:46Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-11T14:37:11Z",
      "updated_at": "2017-04-11T14:37:11Z",
      "source": {
        "issue": {
          "id": 220973561,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1MzM2MTg2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10186",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10186/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10186/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10186/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10186",
          "number": 10186,
          "state": "closed",
          "state_reason": null,
          "title": "Remove SYNC_TRANSACTION_NOT_IN_BLOCK magic number",
          "body": "As suggested here: https://github.com/bitcoin/bitcoin/pull/9725#discussion_r110757861\r\n\r\n@TheBlueMatt ",
          "user": {
            "login": "jnewbery",
            "id": 1063656,
            "node_id": "MDQ6VXNlcjEwNjM2NTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jnewbery",
            "html_url": "https://github.com/jnewbery",
            "followers_url": "https://api.github.com/users/jnewbery/followers",
            "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
            "organizations_url": "https://api.github.com/users/jnewbery/orgs",
            "repos_url": "https://api.github.com/users/jnewbery/repos",
            "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jnewbery/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10186",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10186",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10186.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10186.patch"
          },
          "closed_at": "2017-04-13T08:50:47Z",
          "created_at": "2017-04-11T14:37:11Z",
          "updated_at": "2021-09-08T11:10:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 293737192,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzczNzE5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293737192",
      "actor": {
        "login": "jtimon",
        "id": 1008458,
        "node_id": "MDQ6VXNlcjEwMDg0NTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jtimon",
        "html_url": "https://github.com/jtimon",
        "followers_url": "https://api.github.com/users/jtimon/followers",
        "following_url": "https://api.github.com/users/jtimon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jtimon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jtimon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
        "organizations_url": "https://api.github.com/users/jtimon/orgs",
        "repos_url": "https://api.github.com/users/jtimon/repos",
        "events_url": "https://api.github.com/users/jtimon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jtimon/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-12T23:40:44Z",
      "updated_at": "2017-04-12T23:40:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Nice to learn about 'override'",
      "user": {
        "login": "jtimon",
        "id": 1008458,
        "node_id": "MDQ6VXNlcjEwMDg0NTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jtimon",
        "html_url": "https://github.com/jtimon",
        "followers_url": "https://api.github.com/users/jtimon/followers",
        "following_url": "https://api.github.com/users/jtimon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jtimon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jtimon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
        "organizations_url": "https://api.github.com/users/jtimon/orgs",
        "repos_url": "https://api.github.com/users/jtimon/repos",
        "events_url": "https://api.github.com/users/jtimon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jtimon/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#issuecomment-293737192",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9725"
    },
    {
      "event": "moved_columns_in_project",
      "id": 1043944286,
      "node_id": "MDI2Ok1vdmVkQ29sdW1uc0luUHJvamVjdEV2ZW50MTA0Mzk0NDI4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1043944286",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-15T00:40:10Z",
      "project_card": {
        "id": 2207220,
        "url": "https://api.github.com/projects/columns/cards/2207220",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "For backport",
        "previous_column_name": "Blockers"
      }
    },
    {
      "event": "moved_columns_in_project",
      "id": 1043944552,
      "node_id": "MDI2Ok1vdmVkQ29sdW1uc0luUHJvamVjdEV2ZW50MTA0Mzk0NDU1Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1043944552",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-15T00:40:15Z",
      "project_card": {
        "id": 2207220,
        "url": "https://api.github.com/projects/columns/cards/2207220",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers",
        "previous_column_name": "For backport"
      }
    },
    {
      "event": "removed_from_project",
      "id": 1043944699,
      "node_id": "MDIzOlJlbW92ZWRGcm9tUHJvamVjdEV2ZW50MTA0Mzk0NDY5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1043944699",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-15T00:40:44Z",
      "project_card": {
        "id": 2207220,
        "url": "https://api.github.com/projects/columns/cards/2207220",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-27T00:59:32Z",
      "updated_at": "2017-04-27T00:59:32Z",
      "source": {
        "issue": {
          "id": 224640056,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTE3ODM5NzI2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10286",
          "number": 10286,
          "state": "closed",
          "state_reason": null,
          "title": "Call wallet notify callbacks in scheduler thread (without cs_main)",
          "body": "Based on #10179, this effectively reverts #9583, regaining most of the original speedups of #7946.\r\n\r\nThis concludes the work of #9725, #10178, and #10179.\r\n\r\nSee individual commit messages for more information.",
          "user": {
            "login": "TheBlueMatt",
            "id": 649246,
            "node_id": "MDQ6VXNlcjY0OTI0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheBlueMatt",
            "html_url": "https://github.com/TheBlueMatt",
            "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
            "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
            "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
            "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
            "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 21,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10286",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10286.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10286.patch"
          },
          "closed_at": "2017-11-15T15:26:13Z",
          "created_at": "2017-04-27T00:59:32Z",
          "updated_at": "2022-02-15T10:59:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 1343227732,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNDMyMjc3MzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1343227732",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "927a1d7d088e52aa079682e1d4f514222c0a2069",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/927a1d7d088e52aa079682e1d4f514222c0a2069",
      "created_at": "2017-11-15T15:26:39Z"
    },
    {
      "event": "referenced",
      "id": 2351866197,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNTE4NjYxOTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2351866197",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1883727159002ff88c25f0306b9126a8dc60e7ff",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/1883727159002ff88c25f0306b9126a8dc60e7ff",
      "created_at": "2019-05-20T03:29:15Z"
    },
    {
      "event": "referenced",
      "id": 2353981583,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNTM5ODE1ODM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2353981583",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bc29d651bae04b7138fe4e10a34c5d73085f210f",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/bc29d651bae04b7138fe4e10a34c5d73085f210f",
      "created_at": "2019-05-20T18:39:38Z"
    },
    {
      "event": "referenced",
      "id": 2354672974,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNTQ2NzI5NzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2354672974",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ca843143f95dca94460a7ac20e1a3f7d164e5036",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/ca843143f95dca94460a7ac20e1a3f7d164e5036",
      "created_at": "2019-05-21T01:04:27Z"
    },
    {
      "event": "referenced",
      "id": 2359682870,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNTk2ODI4NzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2359682870",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "11facdfa8a7f8b1c595c19006877c0643992a29d",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/11facdfa8a7f8b1c595c19006877c0643992a29d",
      "created_at": "2019-05-22T15:11:17Z"
    },
    {
      "event": "referenced",
      "id": 2359693689,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNTk2OTM2ODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2359693689",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b050707d1421cdbfb8c02e4afc8a39e3614ab4d5",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/b050707d1421cdbfb8c02e4afc8a39e3614ab4d5",
      "created_at": "2019-05-22T15:14:23Z"
    },
    {
      "event": "referenced",
      "id": 2359914605,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNTk5MTQ2MDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2359914605",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "c6564e4ccaf1f2be4d974b63f41252771b294f2f",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/c6564e4ccaf1f2be4d974b63f41252771b294f2f",
      "created_at": "2019-05-22T16:24:28Z"
    },
    {
      "event": "referenced",
      "id": 2360768265,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNjA3NjgyNjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2360768265",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2496ec591468aabb90e0aa58cbf0e290da813cfa",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/2496ec591468aabb90e0aa58cbf0e290da813cfa",
      "created_at": "2019-05-22T22:24:30Z"
    },
    {
      "event": "referenced",
      "id": 2362379148,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNjIzNzkxNDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2362379148",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "faf502fd141ef6ea68d813e86123602567bedcf5",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/faf502fd141ef6ea68d813e86123602567bedcf5",
      "created_at": "2019-05-23T12:59:38Z"
    },
    {
      "event": "referenced",
      "id": 2362680778,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNjI2ODA3Nzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2362680778",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "321a93611c73352e8048ab1e3b75a525af17e5eb",
      "commit_url": "https://api.github.com/repos/UdjinM6/dash/commits/321a93611c73352e8048ab1e3b75a525af17e5eb",
      "created_at": "2019-05-23T14:31:10Z"
    },
    {
      "event": "referenced",
      "id": 2362689140,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNjI2ODkxNDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2362689140",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "fec5433e47fdf2ef3ac8e009c1919b2f4e88c055",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/fec5433e47fdf2ef3ac8e009c1919b2f4e88c055",
      "created_at": "2019-05-23T14:33:34Z"
    },
    {
      "event": "referenced",
      "id": 2369521969,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIzNjk1MjE5Njk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2369521969",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "60438257a5288a2f3e40b819b21e05dfa3101b9d",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/60438257a5288a2f3e40b819b21e05dfa3101b9d",
      "created_at": "2019-05-27T14:03:56Z"
    },
    {
      "event": "referenced",
      "id": 2971475258,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5NzE0NzUyNTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2971475258",
      "actor": {
        "login": "barrystyle",
        "id": 14147070,
        "node_id": "MDQ6VXNlcjE0MTQ3MDcw",
        "avatar_url": "https://avatars.githubusercontent.com/u/14147070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/barrystyle",
        "html_url": "https://github.com/barrystyle",
        "followers_url": "https://api.github.com/users/barrystyle/followers",
        "following_url": "https://api.github.com/users/barrystyle/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/barrystyle/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/barrystyle/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/barrystyle/subscriptions",
        "organizations_url": "https://api.github.com/users/barrystyle/orgs",
        "repos_url": "https://api.github.com/users/barrystyle/repos",
        "events_url": "https://api.github.com/users/barrystyle/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/barrystyle/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b6b5c39f2c193814d3ca0bcab86646711ab57632",
      "commit_url": "https://api.github.com/repos/PACGlobalOfficial/PAC/commits/b6b5c39f2c193814d3ca0bcab86646711ab57632",
      "created_at": "2020-01-22T20:21:55Z"
    },
    {
      "event": "referenced",
      "id": 3033195981,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwMzMxOTU5ODE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3033195981",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "61758874b851fa887a66e569d07207a2858fdac2",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/61758874b851fa887a66e569d07207a2858fdac2",
      "created_at": "2020-02-13T02:29:59Z"
    },
    {
      "event": "referenced",
      "id": 3035797763,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwMzU3OTc3NjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3035797763",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "76ed385c034e5593916a16c442fb0161deaabeaf",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/76ed385c034e5593916a16c442fb0161deaabeaf",
      "created_at": "2020-02-13T17:19:58Z"
    },
    {
      "event": "referenced",
      "id": 3084917727,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwODQ5MTc3Mjc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3084917727",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3eb80fdcd539357baa6bb1e1a98602f06aee7d94",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/3eb80fdcd539357baa6bb1e1a98602f06aee7d94",
      "created_at": "2020-02-29T17:51:48Z"
    },
    {
      "event": "referenced",
      "id": 3084925863,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwODQ5MjU4NjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3084925863",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "803530c83d41768615812c932be444f5a0dd9201",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/803530c83d41768615812c932be444f5a0dd9201",
      "created_at": "2020-02-29T18:00:49Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-05T15:48:14Z",
      "updated_at": "2020-08-05T15:48:14Z",
      "source": {
        "issue": {
          "id": 650732615,
          "node_id": "MDU6SXNzdWU2NTA3MzI2MTU=",
          "url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1726",
          "repository_url": "https://api.github.com/repos/PIVX-Project/PIVX",
          "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1726/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1726/comments",
          "events_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1726/events",
          "html_url": "https://github.com/PIVX-Project/PIVX/issues/1726",
          "number": 1726,
          "state": "closed",
          "state_reason": "completed",
          "title": "Up to CTransactionRef point back ports to do list.",
          "body": "This issue tracker is for tracking some specific back ports to get up to the final migration to `CTransactionRef` point.\r\n\r\n- [x] https://github.com/bitcoin/bitcoin/pull/6898 -> (partially in #1725)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/7062 -> (in #2118)\r\n- [ ] https://github.com/bitcoin/bitcoin/pull/7187\r\n- [x] https://github.com/bitcoin/bitcoin/pull/7539 -> (in #1727)\r\n- [ ] https://github.com/bitcoin/bitcoin/pull/7598\r\n- [x] https://github.com/bitcoin/bitcoin/pull/7594 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/7840 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/7997 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/8080 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/8126 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/8448 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/8515 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/8865 -> (in #1872)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/9014 -> (in #1915)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/9125 -> (in #1815) \r\n- [x] https://github.com/bitcoin/bitcoin/pull/9240 -> (in #2150)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/9371  -> (in #2150)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/9408 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/9966 -> (in #2118)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/9725 -> (in #2150)\r\n- [x] https://github.com/bitcoin/bitcoin/pull/10330 -> (in #2118)\r\n\r\nWill try to continue adding more as them appear down the back porting rabbit hole. Most likely there are more PRs in-between the ones above that need to be back ported too.\r\n\r\nEveryone is more than welcome to join this effort :) . Just pick one on the list and start doing it.",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 1,
          "closed_at": "2021-02-01T14:29:16Z",
          "created_at": "2020-07-03T18:58:41Z",
          "updated_at": "2021-02-01T14:29:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-21T13:22:26Z",
      "updated_at": "2021-01-21T13:22:26Z",
      "source": {
        "issue": {
          "id": 791083002,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTU5MTkyNzk3",
          "url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2150",
          "repository_url": "https://api.github.com/repos/PIVX-Project/PIVX",
          "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2150/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2150/comments",
          "events_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/2150/events",
          "html_url": "https://github.com/PIVX-Project/PIVX/pull/2150",
          "number": 2150,
          "state": "closed",
          "state_reason": null,
          "title": "Revamping block validation interface interaction with wallet",
          "body": "Revamped the validation interface interaction with the wallet, encapsulating and improving the mempool and block signaling and each of the wallet signals handler.\r\nRestructured the Sapling witnesses and nullifiers update under the new signals.\r\nSolved several bugs that found on the way as well (Check each commit description).\r\n\r\nThis PR concludes with #1726 long road :). Pushing our repository around 2 years ahead in btc time in the mempool and validation interface areas (without including RBF). \r\nThe new validation -> wallet interaction architecture will enable further, and much more user facing important, improvements for the syncing process, overall software responsiveness and multithreading locking issues.\r\n\r\nAdapted backports:\r\n#6464 --> Always clean up manual transaction prioritization (mempool)\r\n#9240 --> Remove txConflicted (mempool)\r\n#9371 --> Notify on removal (mempool) \r\n#9605 --> Use CScheduler for wallet flushing, remove ThreadFlushWalletDB (walletdb)\r\n#9725 --> CValidationInterface Cleanups (wallet, validation and validation interface)",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 566257187,
              "node_id": "MDU6TGFiZWw1NjYyNTcxODc=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            },
            {
              "id": 585814321,
              "node_id": "MDU6TGFiZWw1ODU4MTQzMjE=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 603270942,
              "node_id": "MDU6TGFiZWw2MDMyNzA5NDI=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Wallet",
              "name": "Wallet",
              "description": "",
              "color": "6f2dad",
              "default": false
            },
            {
              "id": 723119217,
              "node_id": "MDU6TGFiZWw3MjMxMTkyMTc=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Mempool",
              "name": "Mempool",
              "color": "fcf4c2",
              "default": false
            }
          ],
          "assignee": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "furszy",
              "id": 5377650,
              "node_id": "MDQ6VXNlcjUzNzc2NTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/furszy",
              "html_url": "https://github.com/furszy",
              "followers_url": "https://api.github.com/users/furszy/followers",
              "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
              "organizations_url": "https://api.github.com/users/furszy/orgs",
              "repos_url": "https://api.github.com/users/furszy/repos",
              "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/furszy/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/31",
            "html_url": "https://github.com/PIVX-Project/PIVX/milestone/31",
            "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/31/labels",
            "id": 6320078,
            "node_id": "MDk6TWlsZXN0b25lNjMyMDA3OA==",
            "number": 31,
            "state": "closed",
            "title": "5.1.0",
            "description": "",
            "creator": {
              "login": "random-zebra",
              "id": 18186894,
              "node_id": "MDQ6VXNlcjE4MTg2ODk0",
              "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/random-zebra",
              "html_url": "https://github.com/random-zebra",
              "followers_url": "https://api.github.com/users/random-zebra/followers",
              "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
              "organizations_url": "https://api.github.com/users/random-zebra/orgs",
              "repos_url": "https://api.github.com/users/random-zebra/repos",
              "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/random-zebra/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 116,
            "created_at": "2021-01-17T13:13:22Z",
            "updated_at": "2021-04-27T15:21:50Z",
            "closed_at": "2021-04-27T15:21:50Z"
          },
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/pulls/2150",
            "html_url": "https://github.com/PIVX-Project/PIVX/pull/2150",
            "diff_url": "https://github.com/PIVX-Project/PIVX/pull/2150.diff",
            "patch_url": "https://github.com/PIVX-Project/PIVX/pull/2150.patch"
          },
          "closed_at": "2021-01-30T12:32:17Z",
          "created_at": "2021-01-21T13:22:25Z",
          "updated_at": "2022-11-29T14:28:14Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 4269082363,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyNjkwODIzNjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4269082363",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6143f803b23527ea5f243ffc310e98544f118d38",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/6143f803b23527ea5f243ffc310e98544f118d38",
      "created_at": "2021-01-30T12:32:16Z"
    },
    {
      "event": "referenced",
      "id": 4517982003,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTc5ODIwMDM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4517982003",
      "actor": {
        "login": "ckti",
        "id": 7046769,
        "node_id": "MDQ6VXNlcjcwNDY3Njk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7046769?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ckti",
        "html_url": "https://github.com/ckti",
        "followers_url": "https://api.github.com/users/ckti/followers",
        "following_url": "https://api.github.com/users/ckti/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ckti/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ckti/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ckti/subscriptions",
        "organizations_url": "https://api.github.com/users/ckti/orgs",
        "repos_url": "https://api.github.com/users/ckti/repos",
        "events_url": "https://api.github.com/users/ckti/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ckti/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "38a9ad2b41b1a0617c3d3f7c4d84fb5ed3cb626a",
      "commit_url": "https://api.github.com/repos/ckti-ioncore-current/ion/commits/38a9ad2b41b1a0617c3d3f7c4d84fb5ed3cb626a",
      "created_at": "2021-03-28T10:03:11Z"
    },
    {
      "event": "referenced",
      "id": 4962428135,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NjI0MjgxMzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4962428135",
      "actor": {
        "login": "gades",
        "id": 4200730,
        "node_id": "MDQ6VXNlcjQyMDA3MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4200730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gades",
        "html_url": "https://github.com/gades",
        "followers_url": "https://api.github.com/users/gades/followers",
        "following_url": "https://api.github.com/users/gades/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gades/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gades/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gades/subscriptions",
        "organizations_url": "https://api.github.com/users/gades/orgs",
        "repos_url": "https://api.github.com/users/gades/repos",
        "events_url": "https://api.github.com/users/gades/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gades/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1459aa5a7210400bb68ae8e58750709bca70c596",
      "commit_url": "https://api.github.com/repos/cosanta/cosanta-core/commits/1459aa5a7210400bb68ae8e58750709bca70c596",
      "created_at": "2021-06-30T22:39:49Z"
    },
    {
      "event": "locked",
      "id": 5271591102,
      "node_id": "LOE_lADOABII584MTFISzwAAAAE6Nhi-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271591102",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T11:10:34Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102736267",
      "pull_request_review_id": 23501945,
      "id": 102736267,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwMjczNjI2Nw==",
      "diff_hunk": "@@ -144,8 +144,10 @@ void CZMQNotificationInterface::UpdatedBlockTip(const CBlockIndex *pindexNew, co\n     }\n }\n \n-void CZMQNotificationInterface::SyncTransaction(const CTransaction& tx, const CBlockIndex* pindex, int posInBlock)\n+void CZMQNotificationInterface::TransactionAddedToMempool(const CTransactionRef& ptx)",
      "path": "src/zmq/zmqnotificationinterface.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "9765f81d764f075818a0f645619e94b51aad0a91",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps we should have a comment here explaining that this function is used for all transaction notifications, and not just when things are added to the mempool?  I can imagine a future reader being confused about why BlockConnected and BlockDisconnected both call this function...",
      "created_at": "2017-02-23T15:22:53Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r102736267",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102736267"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 147,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102806507",
      "pull_request_review_id": 23574836,
      "id": 102806507,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwMjgwNjUwNw==",
      "diff_hunk": "@@ -144,8 +144,10 @@ void CZMQNotificationInterface::UpdatedBlockTip(const CBlockIndex *pindexNew, co\n     }\n }\n \n-void CZMQNotificationInterface::SyncTransaction(const CTransaction& tx, const CBlockIndex* pindex, int posInBlock)\n+void CZMQNotificationInterface::TransactionAddedToMempool(const CTransactionRef& ptx)",
      "path": "src/zmq/zmqnotificationinterface.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "9765f81d764f075818a0f645619e94b51aad0a91",
      "in_reply_to_id": 102736267,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "OK, added a few comments.",
      "created_at": "2017-02-23T20:10:56Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r102806507",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102806507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 147,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104512136",
      "pull_request_review_id": 25352756,
      "id": 104512136,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDUxMjEzNg==",
      "diff_hunk": "@@ -160,3 +162,19 @@ void CZMQNotificationInterface::SyncTransaction(const CTransaction& tx, const CB\n         }\n     }\n }\n+\n+void CZMQNotificationInterface::BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected, const std::vector<CTransactionRef>& vtxConflicted)",
      "path": "src/zmq/zmqnotificationinterface.cpp",
      "position": 19,
      "original_position": 17,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To help others review, these two functions seem to mesh with current behavior. I don't see how they could possibly be usable by any client, but there ya go.",
      "created_at": "2017-03-06T20:18:37Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104512136",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104512136"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 168,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104514485",
      "pull_request_review_id": 25355088,
      "id": 104514485,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDUxNDQ4NQ==",
      "diff_hunk": "@@ -1181,11 +1181,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);\n+void CWallet::SyncTransaction(const CTransactionRef& ptx, const CBlockIndex *pindexBlockConnected, int posInBlock) {\n+    const CTransaction& tx = *ptx;\n \n-    if (!AddToWalletIfInvolvingMe(tx, pindex, posInBlock, true))\n+    if (!AddToWalletIfInvolvingMe(tx, pindexBlockConnected, posInBlock, true))",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mind changing AddToWalletIfInvolvingMe to take a CTransactionRef here? Looks like we end up keeping 2 copies otherwise.",
      "created_at": "2017-03-06T20:29:10Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104514485",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104514485"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104524885",
      "pull_request_review_id": 25366381,
      "id": 104524885,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDUyNDg4NQ==",
      "diff_hunk": "@@ -2518,14 +2511,10 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n \n             // throw all transactions though the signal-interface\n \n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n-\n             // Transactions in the connected block are notified\n             for (const auto& pair : connectTrace.blocksConnected) {\n                 assert(pair.second);\n-                const CBlock& block = *(pair.second);\n-                for (unsigned int i = 0; i < block.vtx.size(); i++)\n-                    GetMainSignals().SyncTransaction(*block.vtx[i], pair.first, i);\n+                GetMainSignals().BlockConnected(pair.second, pair.first, *mrt.GetConflictedTransactions());",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The same set of conflicted transactions is sent here for each block.",
      "created_at": "2017-03-06T21:18:04Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104524885",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104524885"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104539518",
      "pull_request_review_id": 25381496,
      "id": 104539518,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDUzOTUxOA==",
      "diff_hunk": "@@ -1198,6 +1197,38 @@ void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex,\n     }\n }\n \n+void CWallet::TransactionAddedToMempool(const CTransactionRef& ptx) {\n+    LOCK2(cs_main, cs_wallet);\n+    SyncTransaction(ptx, NULL, -1);\n+}\n+\n+void CWallet::BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) {\n+    LOCK2(cs_main, cs_wallet);\n+    // TODO: Tempoarily ensure that mempool removals are notified before\n+    // connected transactions.  This shouldn't matter, but the abandoned\n+    // state of transactions in our wallet is currently cleared when we\n+    // receive another notification and there is a race condition where\n+    // notification of a connected conflict might cause an outside process\n+    // to abandon a transaction and then have it inadvertantly cleared by\n+    // the notification that the conflicted transaction was evicted.\n+\n+    for (const CTransactionRef& ptx : vtxConflicted) {\n+        SyncTransaction(ptx, NULL, -1);\n+    }\n+    for (size_t i = 0; i < pblock->vtx.size(); i++) {\n+        SyncTransaction(pblock->vtx[i], pindex, pindex ? i : -1);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "pindex can no longer be NULL here.",
      "created_at": "2017-03-06T22:22:29Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104539518",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104539518"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104540672",
      "pull_request_review_id": 25382753,
      "id": 104540672,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDU0MDY3Mg==",
      "diff_hunk": "@@ -2518,14 +2511,10 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n \n             // throw all transactions though the signal-interface\n \n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n-\n             // Transactions in the connected block are notified\n             for (const auto& pair : connectTrace.blocksConnected) {\n                 assert(pair.second);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 99,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Assert pair.first here too, I think. It'd be nice to doc that the BlockConnected() params are now always non-null.",
      "created_at": "2017-03-06T22:28:00Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104540672",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104540672"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104549555",
      "pull_request_review_id": 25392031,
      "id": 104549555,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDU0OTU1NQ==",
      "diff_hunk": "@@ -2518,14 +2511,10 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n \n             // throw all transactions though the signal-interface\n \n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n-\n             // Transactions in the connected block are notified\n             for (const auto& pair : connectTrace.blocksConnected) {\n                 assert(pair.second);\n-                const CBlock& block = *(pair.second);\n-                for (unsigned int i = 0; i < block.vtx.size(); i++)\n-                    GetMainSignals().SyncTransaction(*block.vtx[i], pair.first, i);\n+                GetMainSignals().BlockConnected(pair.second, pair.first, *mrt.GetConflictedTransactions());",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 103,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": 104524885,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed, with a lot more code :(.",
      "created_at": "2017-03-06T23:13:52Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104549555",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104549555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104549592",
      "pull_request_review_id": 25392075,
      "id": 104549592,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDU0OTU5Mg==",
      "diff_hunk": "@@ -2518,14 +2511,10 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n \n             // throw all transactions though the signal-interface\n \n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n-\n             // Transactions in the connected block are notified\n             for (const auto& pair : connectTrace.blocksConnected) {\n                 assert(pair.second);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 99,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": 104540672,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2017-03-06T23:14:04Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104549592",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104549592"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104549790",
      "pull_request_review_id": 25392265,
      "id": 104549790,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDU0OTc5MA==",
      "diff_hunk": "@@ -1198,6 +1197,38 @@ void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex,\n     }\n }\n \n+void CWallet::TransactionAddedToMempool(const CTransactionRef& ptx) {\n+    LOCK2(cs_main, cs_wallet);\n+    SyncTransaction(ptx, NULL, -1);\n+}\n+\n+void CWallet::BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) {\n+    LOCK2(cs_main, cs_wallet);\n+    // TODO: Tempoarily ensure that mempool removals are notified before\n+    // connected transactions.  This shouldn't matter, but the abandoned\n+    // state of transactions in our wallet is currently cleared when we\n+    // receive another notification and there is a race condition where\n+    // notification of a connected conflict might cause an outside process\n+    // to abandon a transaction and then have it inadvertantly cleared by\n+    // the notification that the conflicted transaction was evicted.\n+\n+    for (const CTransactionRef& ptx : vtxConflicted) {\n+        SyncTransaction(ptx, NULL, -1);\n+    }\n+    for (size_t i = 0; i < pblock->vtx.size(); i++) {\n+        SyncTransaction(pblock->vtx[i], pindex, pindex ? i : -1);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": 104539518,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2017-03-06T23:15:08Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104549790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104549790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104550406",
      "pull_request_review_id": 25392873,
      "id": 104550406,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDU1MDQwNg==",
      "diff_hunk": "@@ -1181,11 +1181,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);\n+void CWallet::SyncTransaction(const CTransactionRef& ptx, const CBlockIndex *pindexBlockConnected, int posInBlock) {\n+    const CTransaction& tx = *ptx;\n \n-    if (!AddToWalletIfInvolvingMe(tx, pindex, posInBlock, true))\n+    if (!AddToWalletIfInvolvingMe(tx, pindexBlockConnected, posInBlock, true))",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "942c45aa63d842a2e34e12dfb71702d209a86f21",
      "in_reply_to_id": 104514485,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2017-03-06T23:18:30Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104550406",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104550406"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104680242",
      "pull_request_review_id": 25526582,
      "id": 104680242,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY4MDI0Mg==",
      "diff_hunk": "@@ -2240,24 +2240,23 @@ struct ConnectTrace {\n  * Connect a new block to chainActive. pblock is either NULL or a pointer to a CBlock\n  * corresponding to pindexNew, to bypass loading it again from disk.\n  *\n- * The block is always added to connectTrace (either after loading from disk or by copying\n- * pblock) - if that is not intended, care must be taken to remove the last entry in\n- * blocksConnected in case of failure.\n+ * The block is always added to connectTrace in the case connection succeeds.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "5130d7cdcc5577e6c7fcdf8f9a57230a9a322442",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add pblock to connectTrace at the end of ConnectTip, not start\":\r\n\r\nMaybe write \"The block is added to connectTrace only if the connection succeeds.\" ? \"Always\" and \"in the case\" imply contradictory things to me.",
      "created_at": "2017-03-07T14:37:06Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104680242",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104680242"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104682862",
      "pull_request_review_id": 25526582,
      "id": 104682862,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY4Mjg2Mg==",
      "diff_hunk": "@@ -2291,6 +2290,8 @@ bool static ConnectTip(CValidationState& state, const CChainParams& chainparams,\n     int64_t nTime6 = GetTimeMicros(); nTimePostConnect += nTime6 - nTime5; nTimeTotal += nTime6 - nTime1;\n     LogPrint(\"bench\", \"  - Connect postprocess: %.2fms [%.2fs]\\n\", (nTime6 - nTime5) * 0.001, nTimePostConnect * 0.000001);\n     LogPrint(\"bench\", \"- Connect block: %.2fms [%.2fs]\\n\", (nTime6 - nTime1) * 0.001, nTimeTotal * 0.000001);\n+\n+    connectTrace.blocksConnected.emplace_back(pindexNew, pthisBlock);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "5130d7cdcc5577e6c7fcdf8f9a57230a9a322442",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add pblock to connectTrace at the end of ConnectTip, not start\":\r\n\r\nThis does appear to be doing what the commit message says. But could you add a line like \"Cleanup, no change in behavior\" to the commit message if that is the intention here?\r\n\r\nAs someone interested in being able to contribute reviews, and in being able to understand the direction we're taking the code, it's really helpful to me when I can read a commit message that not only tells me what change the commit is making, but also provides a little hint about why the change is being made.",
      "created_at": "2017-03-07T14:46:27Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104682862",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104682862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104691509",
      "pull_request_review_id": 25526582,
      "id": 104691509,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY5MTUwOQ==",
      "diff_hunk": "@@ -2233,7 +2233,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  */\n struct ConnectTrace {\n+private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+\n+public:\n+    void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "99634d420b2a2d7c9c7e96d7ac71c253c70a8485",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Make ConnectTrace::blocksConnected private, hide behind accessors\":\r\n\r\nDoesn't really matter because this is only called in a single place, and that place happens to require a copy. But if you wanted to write this in a move-compatible way (giving callers flexibility to either move or copy), you could write:\r\n\r\n```\r\nvoid BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\r\n    blocksConnected.emplace_back(pindex, std::move(pblock));\r\n}\r\n```",
      "created_at": "2017-03-07T15:17:47Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104691509",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104691509"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104691580",
      "pull_request_review_id": 25526582,
      "id": 104691580,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY5MTU4MA==",
      "diff_hunk": "@@ -2233,7 +2233,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  */\n struct ConnectTrace {\n+private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+\n+public:\n+    void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n+        blocksConnected.emplace_back(pindex, pblock);\n+    }\n+\n+    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > GetBlocksConnected() {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "99634d420b2a2d7c9c7e96d7ac71c253c70a8485",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Make ConnectTrace::blocksConnected private, hide behind accessors\":\r\n\r\nNow we are copying the vector (as well as the shared_ptrs inside) whenever it is accessed, which we weren't doing before. Any reason for this not to return a const reference to the vector to avoid this?\r\n\r\nAlso the method itself should be marked const.",
      "created_at": "2017-03-07T15:18:01Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104691580",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104691580"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104692562",
      "pull_request_review_id": 25526582,
      "id": 104692562,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY5MjU2Mg==",
      "diff_hunk": "@@ -2231,19 +2198,46 @@ static int64_t nTimePostConnect = 0;\n /**\n  * Used to track blocks whose transactions were applied to the UTXO state as a\n  * part of a single ActivateBestChainStep call.\n+ *\n+ * This class also tracks transactions that are removed from the mempool as\n+ * conflicts and and can be used to pass all those transactions through\n+ * SyncTransaction.\n  */\n-struct ConnectTrace {\n+class ConnectTrace {\n private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+    std::vector<CTransactionRef> conflictedTxs;\n+    CTxMemPool &pool;\n \n public:\n+    ConnectTrace(CTxMemPool &_pool) : pool(_pool) {\n+        pool.NotifyEntryRemoved.connect(boost::bind(&ConnectTrace::NotifyEntryRemoved, this, _1, _2));\n+    }\n+\n+    ~ConnectTrace() {\n+        pool.NotifyEntryRemoved.disconnect(boost::bind(&ConnectTrace::NotifyEntryRemoved, this, _1, _2));\n+    }\n+\n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n         blocksConnected.emplace_back(pindex, pblock);\n     }\n \n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > GetBlocksConnected() {\n         return blocksConnected;\n     }\n+\n+    void NotifyEntryRemoved(CTransactionRef txRemoved, MemPoolRemovalReason reason) {\n+        if (reason == MemPoolRemovalReason::CONFLICT) {\n+            conflictedTxs.push_back(txRemoved);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 75,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "91dc381aa73f3931152249e5f116d7f29673bd2e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle conflicted transactions directly in ConnectTrace\":\r\n\r\nUsing std::move and emplace would be slightly more efficient. Would also make this code have a more internally consistent style.",
      "created_at": "2017-03-07T15:21:33Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104692562",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104692562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104693002",
      "pull_request_review_id": 25526582,
      "id": 104693002,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY5MzAwMg==",
      "diff_hunk": "@@ -2526,8 +2512,15 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             fInitialDownload = IsInitialBlockDownload();\n \n             // throw all transactions though the signal-interface\n-\n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n+            connectTrace.CallSyncTransactionOnConflictedTransactions();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 114,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "91dc381aa73f3931152249e5f116d7f29673bd2e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle conflicted transactions directly in ConnectTrace\":\r\n\r\nAgain, I would find it really helpful if the commit message gave a hint about why the change is being made instead of only saying what the change is.\r\n\r\nIs this just a cleanup not intended to change behavior? Is it important that signal connect/disconnect no longer happen under cs_main? Please mention in the commit message.",
      "created_at": "2017-03-07T15:23:06Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104693002",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104693002"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104694067",
      "pull_request_review_id": 25526582,
      "id": 104694067,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY5NDA2Nw==",
      "diff_hunk": "@@ -2200,17 +2200,18 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  *\n  * This class also tracks transactions that are removed from the mempool as\n- * conflicts and and can be used to pass all those transactions through\n- * SyncTransaction.\n+ * conflicts (per block) and and can be used to pass all those transactions\n+ * through SyncTransaction.\n  */\n class ConnectTrace {\n private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n-    std::vector<CTransactionRef> conflictedTxs;\n+    std::vector<std::vector<CTransactionRef> > conflictedTxs;\n     CTxMemPool &pool;\n \n public:\n     ConnectTrace(CTxMemPool &_pool) : pool(_pool) {\n+        conflictedTxs.emplace_back();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "5459aca910afe48fb53bbba4e9574e4790624d8c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Keep conflictedTxs in ConnectTrace per-block\":\r\n\r\nCould construct the vector in the desired state initially (just pass `1` or `{{}}` to the constructor) instead of creating it empty and then pushing.",
      "created_at": "2017-03-07T15:27:02Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104694067",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104694067"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104697616",
      "pull_request_review_id": 25526582,
      "id": 104697616,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDY5NzYxNg==",
      "diff_hunk": "@@ -2195,6 +2195,12 @@ static int64_t nTimeFlush = 0;\n static int64_t nTimeChainState = 0;\n static int64_t nTimePostConnect = 0;\n \n+struct PerBlockConnectTrace {\n+    CBlockIndex* pindex = NULL;",
      "path": "src/validation.cpp",
      "position": 75,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\":\r\n\r\nMaybe s/NULL/nullptr/.",
      "created_at": "2017-03-07T15:39:13Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104697616",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104697616"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2177,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104701476",
      "pull_request_review_id": 25526582,
      "id": 104701476,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDcwMTQ3Ng==",
      "diff_hunk": "@@ -2220,28 +2226,33 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex && pblock);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\":\r\n\r\nMaybe break assert into two lines so it's easier to know which condition failed.",
      "created_at": "2017-03-07T15:52:33Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104701476",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104701476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104703615",
      "pull_request_review_id": 25526582,
      "id": 104703615,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDcwMzYxNQ==",
      "diff_hunk": "@@ -2195,6 +2195,12 @@ static int64_t nTimeFlush = 0;\n static int64_t nTimeChainState = 0;\n static int64_t nTimePostConnect = 0;\n \n+struct PerBlockConnectTrace {\n+    CBlockIndex* pindex = NULL;\n+    std::shared_ptr<const CBlock> pblock;\n+    std::shared_ptr<std::vector<CTransactionRef> > conflictedTxs;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\":\r\n\r\nMaybe s/> > />>/.",
      "created_at": "2017-03-07T16:00:18Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104703615",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104703615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104711671",
      "pull_request_review_id": 25526582,
      "id": 104711671,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDcxMTY3MQ==",
      "diff_hunk": "@@ -2220,28 +2226,33 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex && pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace> GetBlocksConnected() {\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();\n+            assert(!awaitingClear);\n+            awaitingClear = true;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\":\r\n\r\nThis awaitingClear variable never seems to be used anywhere except in asserts. It would definitely be worth mentioning this in a comment on the awaitingClear declaration, because otherwise the state this class is tracking appears to be more complicated than it really is.\r\n\r\nAlso, if possible, I think it would be better to make the interface less fragile and get rid of the need for any awaitingClear variable to detect misuse. It seems you could replace the GetBlocksConnected/ClearBlocksConnected function pair with a single function:\r\n\r\n```\r\nstd::vector<PerBlockConnectTrace> ClearBlocksConnected() {\r\n    if (!blocksConnected.back().pindex) {\r\n        blocksConnected.pop_back();\r\n    }\r\n    std::vector<PerBlockConnectTrace> ret(1);\r\n    ret.swap(blocksConnected);\r\n    return ret;\r\n}\r\n```\r\n\r\nIf you did this, another advantage would be that you could make conflictedTxs a plain vector instead of a shared_ptr to a vector, because you would no longer be creating copies of it. ",
      "created_at": "2017-03-07T16:28:57Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104711671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104711671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104714457",
      "pull_request_review_id": 25526582,
      "id": 104714457,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDcxNDQ1Nw==",
      "diff_hunk": "@@ -2220,28 +2226,33 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex && pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace> GetBlocksConnected() {\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\":\r\n\r\nCould you add a comment explaining this pop_back behavior? I thought the whole point of adding an initial null block to the blocksConnected vector was to support NotifyEntryRemoved calls prior to any BlockConnected call. But if this will now throw away the results of those calls, why not just avoid creating initial null block and have NotifyEntryRemoved do nothing if called when blocksConnected.empty()?\r\n\r\nI'm probably missing something, so a comment here mentioning the real purpose of the pop could be helpful.",
      "created_at": "2017-03-07T16:38:19Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104714457",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104714457"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104718278",
      "pull_request_review_id": 25526582,
      "id": 104718278,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDcxODI3OA==",
      "diff_hunk": "@@ -1172,6 +1171,38 @@ void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex,\n     }\n }\n \n+void CWallet::TransactionAddedToMempool(const CTransactionRef& ptx) {\n+    LOCK2(cs_main, cs_wallet);\n+    SyncTransaction(ptx, NULL, -1);\n+}\n+\n+void CWallet::BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) {\n+    LOCK2(cs_main, cs_wallet);\n+    // TODO: Tempoarily ensure that mempool removals are notified before",
      "path": "src/wallet/wallet.cpp",
      "position": 46,
      "original_position": 26,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"SyncTransaction->TxAddedToMempool/BlockConnected/Disconnected\":\r\n\r\nRealize you are only moving this, but this TODO comment seems to be describing what the current behavior is, not what the TODO is. Maybe remove TODO at the beginning of this comment, and add \"TODO: \\<thing to be done\\>\" at the end, where I'm guessing \\<thing to be done\\> is somehow fixing the race condition.",
      "created_at": "2017-03-07T16:52:29Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104718278",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104718278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1143,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104732789",
      "pull_request_review_id": 25526582,
      "id": 104732789,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDczMjc4OQ==",
      "diff_hunk": "@@ -1155,11 +1155,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 26,
      "original_position": 6,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"SyncTransaction->TxAddedToMempool/BlockConnected/Disconnected\"\r\n\r\nCould you update the commit message to explicitly say which of the changes in the commit are changes in behavior as opposed to just internal code reorganization? Maybe the following would be accurate? \"This commit doesn't change the behavior of ZMQ notifications or network message processing in any way. It does slightly change the way the wallet processes transactions. The wallet now no longer releases cs_main and cs_wallet between transactions when it is processing multiple transactions from the same block.\"\r\n\r\nAlso if this is accurate, maybe consider changing the wallet locking in a separate commit (or even a separate PR), instead of mixing code cleanup and a locking improvement in the same change.",
      "created_at": "2017-03-07T17:50:26Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104732789",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104732789"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1121,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104734533",
      "pull_request_review_id": 25526582,
      "id": 104734533,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDczNDUzMw==",
      "diff_hunk": "@@ -33,7 +34,9 @@ void UnregisterAllValidationInterfaces();\n class CValidationInterface {",
      "path": "src/validationinterface.h",
      "position": 20,
      "original_position": 17,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"SyncTransaction->TxAddedToMempool/BlockConnected/Disconnected\":\r\n\r\nWhat does the part of your commit message that says \"CValidationInterface starts listening to mempool directly, placing it in the middle\" mean?\r\n\r\nWasn't CValidationInterface always in the middle between validation code and the various listeners? And aren't the calls to the CValidationInterface still happening in the exact same places as before, just with updated function names and arguments?",
      "created_at": "2017-03-07T17:57:53Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104734533",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104734533"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104735895",
      "pull_request_review_id": 25526582,
      "id": 104735895,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDczNTg5NQ==",
      "diff_hunk": "@@ -144,8 +144,10 @@ void CZMQNotificationInterface::UpdatedBlockTip(const CBlockIndex *pindexNew, co\n     }\n }\n \n-void CZMQNotificationInterface::SyncTransaction(const CTransaction& tx, const CBlockIndex* pindex, int posInBlock)\n+void CZMQNotificationInterface::TransactionAddedToMempool(const CTransactionRef& ptx)",
      "path": "src/zmq/zmqnotificationinterface.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "9765f81d764f075818a0f645619e94b51aad0a91",
      "in_reply_to_id": 102736267,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"SyncTransaction->TxAddedToMempool/BlockConnected/Disconnected\"\r\n\r\n>> Perhaps we should have a comment here\r\n\r\n> OK, added a few comments.\r\n\r\nFWIW, not seeing a comment here. Maybe they were added elsewhere, but it would seem good to mention right in the top of the function body that this is not only called when a transaction is added to the mempool like the name would suggest. Alternately, you could leave this function named SyncTransaction and have TransactionAddedToMempool call SyncTransaction to avoid the misleading title.",
      "created_at": "2017-03-07T18:03:49Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104735895",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104735895"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 147,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104737176",
      "pull_request_review_id": 25526582,
      "id": 104737176,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDczNzE3Ng==",
      "diff_hunk": "@@ -30,10 +30,10 @@ class PeerLogicValidation : public CValidationInterface {\n public:\n     PeerLogicValidation(CConnman* connmanIn);\n \n-    virtual void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected, const std::vector<CTransactionRef>& vtxConflicted);\n-    virtual void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload);\n-    virtual void BlockChecked(const CBlock& block, const CValidationState& state);\n-    virtual void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock>& pblock);\n+    virtual void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected, const std::vector<CTransactionRef>& vtxConflicted) override;",
      "path": "src/net_processing.h",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "2897190e78e8733402be878c9e18c41bae6cb7f8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add override to functions using CValidationInterface methods\"\r\n\r\nI think normally you drop \"virtual\" when you add \"override\" to make the two different types of method declarations more distinct. At least that's the style I'm used to, and we seem to follow it everywhere else we're currently using override.",
      "created_at": "2017-03-07T18:09:31Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104737176",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104737176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104756416",
      "pull_request_review_id": 25607210,
      "id": 104756416,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc1NjQxNg==",
      "diff_hunk": "@@ -2195,6 +2195,12 @@ static int64_t nTimeFlush = 0;\n static int64_t nTimeChainState = 0;\n static int64_t nTimePostConnect = 0;\n \n+struct PerBlockConnectTrace {\n+    CBlockIndex* pindex = NULL;",
      "path": "src/validation.cpp",
      "position": 75,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104697616,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there actually a difference between nullptr and NULL to the compiler (it overrides differently, sometimes, if you're calling a function, no?)",
      "created_at": "2017-03-07T19:28:14Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104756416",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104756416"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2177,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104756495",
      "pull_request_review_id": 25607290,
      "id": 104756495,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc1NjQ5NQ==",
      "diff_hunk": "@@ -2195,6 +2195,12 @@ static int64_t nTimeFlush = 0;\n static int64_t nTimeChainState = 0;\n static int64_t nTimePostConnect = 0;\n \n+struct PerBlockConnectTrace {\n+    CBlockIndex* pindex = NULL;\n+    std::shared_ptr<const CBlock> pblock;\n+    std::shared_ptr<std::vector<CTransactionRef> > conflictedTxs;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104703615,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Heh, I still find the pre-C++11 version to be easier to read :P",
      "created_at": "2017-03-07T19:28:32Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104756495",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104756495"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104757029",
      "pull_request_review_id": 25607824,
      "id": 104757029,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc1NzAyOQ==",
      "diff_hunk": "@@ -2240,24 +2240,23 @@ struct ConnectTrace {\n  * Connect a new block to chainActive. pblock is either NULL or a pointer to a CBlock\n  * corresponding to pindexNew, to bypass loading it again from disk.\n  *\n- * The block is always added to connectTrace (either after loading from disk or by copying\n- * pblock) - if that is not intended, care must be taken to remove the last entry in\n- * blocksConnected in case of failure.\n+ * The block is always added to connectTrace in the case connection succeeds.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "5130d7cdcc5577e6c7fcdf8f9a57230a9a322442",
      "in_reply_to_id": 104680242,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Tweaked, carryover from too-little-diff-change.",
      "created_at": "2017-03-07T19:30:42Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104757029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104757029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104757198",
      "pull_request_review_id": 25607998,
      "id": 104757198,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc1NzE5OA==",
      "diff_hunk": "@@ -2233,7 +2233,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  */\n struct ConnectTrace {\n+private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+\n+public:\n+    void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "99634d420b2a2d7c9c7e96d7ac71c253c70a8485",
      "in_reply_to_id": 104691509,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I prefer to force peoplt to not take the atomic increment hit without changing the code :).",
      "created_at": "2017-03-07T19:31:21Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104757198",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104757198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104758212",
      "pull_request_review_id": 25608986,
      "id": 104758212,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc1ODIxMg==",
      "diff_hunk": "@@ -2233,7 +2233,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  */\n struct ConnectTrace {\n+private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+\n+public:\n+    void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n+        blocksConnected.emplace_back(pindex, pblock);\n+    }\n+\n+    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > GetBlocksConnected() {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "99634d420b2a2d7c9c7e96d7ac71c253c70a8485",
      "in_reply_to_id": 104691580,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, indeed. Now it just returns a reference, which should also be fine. The method is not technically const later (without making things mutable), so I'll leave the second part.",
      "created_at": "2017-03-07T19:35:19Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104758212",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104758212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104759201",
      "pull_request_review_id": 25610005,
      "id": 104759201,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc1OTIwMQ==",
      "diff_hunk": "@@ -2291,6 +2290,8 @@ bool static ConnectTip(CValidationState& state, const CChainParams& chainparams,\n     int64_t nTime6 = GetTimeMicros(); nTimePostConnect += nTime6 - nTime5; nTimeTotal += nTime6 - nTime1;\n     LogPrint(\"bench\", \"  - Connect postprocess: %.2fms [%.2fs]\\n\", (nTime6 - nTime5) * 0.001, nTimePostConnect * 0.000001);\n     LogPrint(\"bench\", \"- Connect block: %.2fms [%.2fs]\\n\", (nTime6 - nTime1) * 0.001, nTimeTotal * 0.000001);\n+\n+    connectTrace.blocksConnected.emplace_back(pindexNew, pthisBlock);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "5130d7cdcc5577e6c7fcdf8f9a57230a9a322442",
      "in_reply_to_id": 104682862,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure, added more to the commit message.",
      "created_at": "2017-03-07T19:39:36Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104759201",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104759201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104760269",
      "pull_request_review_id": 25611109,
      "id": 104760269,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2MDI2OQ==",
      "diff_hunk": "@@ -2200,17 +2200,18 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  *\n  * This class also tracks transactions that are removed from the mempool as\n- * conflicts and and can be used to pass all those transactions through\n- * SyncTransaction.\n+ * conflicts (per block) and and can be used to pass all those transactions\n+ * through SyncTransaction.\n  */\n class ConnectTrace {\n private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n-    std::vector<CTransactionRef> conflictedTxs;\n+    std::vector<std::vector<CTransactionRef> > conflictedTxs;\n     CTxMemPool &pool;\n \n public:\n     ConnectTrace(CTxMemPool &_pool) : pool(_pool) {\n+        conflictedTxs.emplace_back();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "5459aca910afe48fb53bbba4e9574e4790624d8c",
      "in_reply_to_id": 104694067,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "OK, did that for the whole patch set.",
      "created_at": "2017-03-07T19:43:57Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104760269",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104760269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104761156",
      "pull_request_review_id": 25612021,
      "id": 104761156,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2MTE1Ng==",
      "diff_hunk": "@@ -2220,28 +2226,33 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex && pblock);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104701476,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2017-03-07T19:47:24Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104761156",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104761156"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104761182",
      "pull_request_review_id": 25612047,
      "id": 104761182,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2MTE4Mg==",
      "diff_hunk": "@@ -2220,28 +2226,33 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex && pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace> GetBlocksConnected() {\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104714457,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2017-03-07T19:47:29Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104761182",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104761182"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104762386",
      "pull_request_review_id": 25613363,
      "id": 104762386,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2MjM4Ng==",
      "diff_hunk": "@@ -2220,28 +2226,33 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex && pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace> GetBlocksConnected() {\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();\n+            assert(!awaitingClear);\n+            awaitingClear = true;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104711671,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sorry, the intention of making conflictedTxs a shared_ptr is so that it can be easily passed to CValidationInterface in a later patchset, not so that we can avoid copy here, forgot to mention that when I split up the patch set.",
      "created_at": "2017-03-07T19:52:13Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104762386",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104762386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104762813",
      "pull_request_review_id": 25613825,
      "id": 104762813,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2MjgxMw==",
      "diff_hunk": "@@ -2231,19 +2198,46 @@ static int64_t nTimePostConnect = 0;\n /**\n  * Used to track blocks whose transactions were applied to the UTXO state as a\n  * part of a single ActivateBestChainStep call.\n+ *\n+ * This class also tracks transactions that are removed from the mempool as\n+ * conflicts and and can be used to pass all those transactions through\n+ * SyncTransaction.\n  */\n-struct ConnectTrace {\n+class ConnectTrace {\n private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+    std::vector<CTransactionRef> conflictedTxs;\n+    CTxMemPool &pool;\n \n public:\n+    ConnectTrace(CTxMemPool &_pool) : pool(_pool) {\n+        pool.NotifyEntryRemoved.connect(boost::bind(&ConnectTrace::NotifyEntryRemoved, this, _1, _2));\n+    }\n+\n+    ~ConnectTrace() {\n+        pool.NotifyEntryRemoved.disconnect(boost::bind(&ConnectTrace::NotifyEntryRemoved, this, _1, _2));\n+    }\n+\n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n         blocksConnected.emplace_back(pindex, pblock);\n     }\n \n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > GetBlocksConnected() {\n         return blocksConnected;\n     }\n+\n+    void NotifyEntryRemoved(CTransactionRef txRemoved, MemPoolRemovalReason reason) {\n+        if (reason == MemPoolRemovalReason::CONFLICT) {\n+            conflictedTxs.push_back(txRemoved);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 75,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "91dc381aa73f3931152249e5f116d7f29673bd2e",
      "in_reply_to_id": 104692562,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed, done.",
      "created_at": "2017-03-07T19:53:53Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104762813",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104762813"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104763065",
      "pull_request_review_id": 25614095,
      "id": 104763065,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2MzA2NQ==",
      "diff_hunk": "@@ -1172,6 +1171,38 @@ void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex,\n     }\n }\n \n+void CWallet::TransactionAddedToMempool(const CTransactionRef& ptx) {\n+    LOCK2(cs_main, cs_wallet);\n+    SyncTransaction(ptx, NULL, -1);\n+}\n+\n+void CWallet::BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) {\n+    LOCK2(cs_main, cs_wallet);\n+    // TODO: Tempoarily ensure that mempool removals are notified before",
      "path": "src/wallet/wallet.cpp",
      "position": 46,
      "original_position": 26,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104718278,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Its removed later in the PR, so probably easier to just leave it",
      "created_at": "2017-03-07T19:54:55Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104763065",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104763065"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1143,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104764225",
      "pull_request_review_id": 25615372,
      "id": 104764225,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2NDIyNQ==",
      "diff_hunk": "@@ -2526,8 +2512,15 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             fInitialDownload = IsInitialBlockDownload();\n \n             // throw all transactions though the signal-interface\n-\n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n+            connectTrace.CallSyncTransactionOnConflictedTransactions();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 114,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "91dc381aa73f3931152249e5f116d7f29673bd2e",
      "in_reply_to_id": 104693002,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It all still happens under cs_main? There are no behavior changes there. I added another line to the commit message.",
      "created_at": "2017-03-07T19:59:34Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104764225",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104764225"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104764407",
      "pull_request_review_id": 25615544,
      "id": 104764407,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2NDQwNw==",
      "diff_hunk": "@@ -1155,11 +1155,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 26,
      "original_position": 6,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104732789,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There are no behavior changes here? Everything is still under cs_main from the previous commit.",
      "created_at": "2017-03-07T20:00:18Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104764407",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104764407"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1121,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104764762",
      "pull_request_review_id": 25615932,
      "id": 104764762,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2NDc2Mg==",
      "diff_hunk": "@@ -33,7 +34,9 @@ void UnregisterAllValidationInterfaces();\n class CValidationInterface {",
      "path": "src/validationinterface.h",
      "position": 20,
      "original_position": 17,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104734533,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CValidationInterface has never listened to mempool, it was just an interface between the things in validation.cpp and other callers, now its also listening to mempool, putting it in the middle of the various callbacks we have going.",
      "created_at": "2017-03-07T20:01:41Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104764762",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104764762"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104765224",
      "pull_request_review_id": 25616436,
      "id": 104765224,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2NTIyNA==",
      "diff_hunk": "@@ -144,8 +144,10 @@ void CZMQNotificationInterface::UpdatedBlockTip(const CBlockIndex *pindexNew, co\n     }\n }\n \n-void CZMQNotificationInterface::SyncTransaction(const CTransaction& tx, const CBlockIndex* pindex, int posInBlock)\n+void CZMQNotificationInterface::TransactionAddedToMempool(const CTransactionRef& ptx)",
      "path": "src/zmq/zmqnotificationinterface.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "9765f81d764f075818a0f645619e94b51aad0a91",
      "in_reply_to_id": 102736267,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added another comment.",
      "created_at": "2017-03-07T20:03:57Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104765224",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104765224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 147,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104766145",
      "pull_request_review_id": 25617438,
      "id": 104766145,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDc2NjE0NQ==",
      "diff_hunk": "@@ -30,10 +30,10 @@ class PeerLogicValidation : public CValidationInterface {\n public:\n     PeerLogicValidation(CConnman* connmanIn);\n \n-    virtual void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected, const std::vector<CTransactionRef>& vtxConflicted);\n-    virtual void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload);\n-    virtual void BlockChecked(const CBlock& block, const CValidationState& state);\n-    virtual void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock>& pblock);\n+    virtual void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected, const std::vector<CTransactionRef>& vtxConflicted) override;",
      "path": "src/net_processing.h",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "2897190e78e8733402be878c9e18c41bae6cb7f8",
      "in_reply_to_id": 104737176,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "OK, done.",
      "created_at": "2017-03-07T20:08:11Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104766145",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104766145"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104945445",
      "pull_request_review_id": 25802233,
      "id": 104945445,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk0NTQ0NQ==",
      "diff_hunk": "@@ -2195,6 +2195,12 @@ static int64_t nTimeFlush = 0;\n static int64_t nTimeChainState = 0;\n static int64_t nTimePostConnect = 0;\n \n+struct PerBlockConnectTrace {\n+    CBlockIndex* pindex = NULL;",
      "path": "src/validation.cpp",
      "position": 75,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104697616,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": ">Is there actually a difference between nullptr and NULL to the compiler (it overrides differently, sometimes, if you're calling a function, no?)\r\n\r\nYes, but I only suggested nullptr because I thought it might be an oversight. (NULL seems retro to me, but if you prefer it, please keep.)",
      "created_at": "2017-03-08T15:41:11Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104945445",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104945445"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2177,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104948081",
      "pull_request_review_id": 25802233,
      "id": 104948081,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk0ODA4MQ==",
      "diff_hunk": "@@ -2233,7 +2233,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  */\n struct ConnectTrace {\n+private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+\n+public:\n+    void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "99634d420b2a2d7c9c7e96d7ac71c253c70a8485",
      "in_reply_to_id": 104691509,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I prefer to force peoplt to not take the atomic increment hit without changing the code :).\r\n\r\nYour version forces the atomic increment hit in every case, my version lets callers avoid it in the case where they are moving the shared pointer into the container.",
      "created_at": "2017-03-08T15:51:02Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104948081",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104948081"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104949416",
      "pull_request_review_id": 25802233,
      "id": 104949416,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk0OTQxNg==",
      "diff_hunk": "@@ -2526,8 +2512,15 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             fInitialDownload = IsInitialBlockDownload();\n \n             // throw all transactions though the signal-interface\n-\n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n+            connectTrace.CallSyncTransactionOnConflictedTransactions();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 114,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "91dc381aa73f3931152249e5f116d7f29673bd2e",
      "in_reply_to_id": 104693002,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> > Is it important that signal connect/disconnect no longer happen under cs_main?\r\n\r\n> It all still happens under cs_main? There are no behavior changes there. I added another line to the commit message.\r\n\r\nThe NotifyEntryRemoved.connect and disconnect calls happen in the ConnectTrace constructor/destructor above the LOCK(cs_main) call, instead of below it like before. Guessing this probably isn't significant, but I wanted to make sure it was intentional and thought it might be worth mentioning in the commit message as a possible change in behavior.\r\n",
      "created_at": "2017-03-08T15:56:02Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104949416",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104949416"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104951802",
      "pull_request_review_id": 25802233,
      "id": 104951802,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk1MTgwMg==",
      "diff_hunk": "@@ -1155,11 +1155,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 26,
      "original_position": 6,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104732789,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> > The wallet now no longer releases cs_main and cs_wallet between transactions when it is processing multiple transactions from the same block.\r\n\r\n> There are no behavior changes here? Everything is still under cs_main from the previous commit.\r\n\r\nEverything is still under cs_main, but previously cs_main and cs_wallet were released between processing individual transactions in the block, while now they are held until all transactions in the block are processed. You already mention this in your commit message, I was just suggesting moving the locking change to a separate commit so this one can be a pure refactoring, and the locking part can be understood on its own (and more easily identified and reverted if it causes problems).",
      "created_at": "2017-03-08T16:05:28Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104951802",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104951802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1121,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104953316",
      "pull_request_review_id": 25802233,
      "id": 104953316,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk1MzMxNg==",
      "diff_hunk": "@@ -33,7 +34,9 @@ void UnregisterAllValidationInterfaces();\n class CValidationInterface {",
      "path": "src/validationinterface.h",
      "position": 20,
      "original_position": 17,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104734533,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> CValidationInterface has never listened to mempool, it was just an interface between the things in validation.cpp and other callers, now its also listening to mempool, putting it in the middle of the various callbacks we have going.\r\n\r\nI guess I don't understand what \"listening to mempool\" means. CValidationInterface is a class with methods, and the methods seem to be called from the same places as before. I don't think it's an important point, I just don't get what this is trying to say.",
      "created_at": "2017-03-08T16:10:49Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104953316",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104953316"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104958171",
      "pull_request_review_id": 25802233,
      "id": 104958171,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk1ODE3MQ==",
      "diff_hunk": "@@ -2219,28 +2232,40 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We use\n+        // awaitingClear to keep track of this state, and pop the last\n+        // entry here to make sure the list we return is sane.\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 61,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c36422e8831fc9c2268777b0689c02ea0b45ea5c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\"\r\n\r\nCould / should you `assert(blocksConnected.back().conflictedTxs.empty())` here?",
      "created_at": "2017-03-08T16:29:06Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104958171",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104958171"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104960141",
      "pull_request_review_id": 25802233,
      "id": 104960141,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk2MDE0MQ==",
      "diff_hunk": "@@ -2219,28 +2232,40 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We use\n+        // awaitingClear to keep track of this state, and pop the last\n+        // entry here to make sure the list we return is sane.\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();\n+            assert(!awaitingClear);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c36422e8831fc9c2268777b0689c02ea0b45ea5c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Handle SyncTransaction in ActivateBestChain instead of ConnectTrace\"\r\n\r\nWhat do you think of my suggestion to get merge the ClearBlocksConnected and GetBlocksConnected methods into a single method so you can get rid of the awaitingClear variable and all the asserts? \r\n\r\nLink: https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104711671\r\n\r\nSeems better to prevent the interface misuse instead of detecting it at runtime and crashing.",
      "created_at": "2017-03-08T16:36:39Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104960141",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104960141"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104971889",
      "pull_request_review_id": 25827361,
      "id": 104971889,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk3MTg4OQ==",
      "diff_hunk": "@@ -2233,7 +2233,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  */\n struct ConnectTrace {\n+private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n+\n+public:\n+    void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "99634d420b2a2d7c9c7e96d7ac71c253c70a8485",
      "in_reply_to_id": 104691509,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh, indeed, I hate this C++11 stuff, anyway, I took the proposed change.",
      "created_at": "2017-03-08T17:22:15Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104971889",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104971889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104977598",
      "pull_request_review_id": 25827361,
      "id": 104977598,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk3NzU5OA==",
      "diff_hunk": "@@ -2219,28 +2232,40 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We use\n+        // awaitingClear to keep track of this state, and pop the last\n+        // entry here to make sure the list we return is sane.\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 61,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c36422e8831fc9c2268777b0689c02ea0b45ea5c",
      "in_reply_to_id": 104958171,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Took this change (as a part of larger changes).",
      "created_at": "2017-03-08T17:47:15Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104977598",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104977598"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104978005",
      "pull_request_review_id": 25827361,
      "id": 104978005,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk3ODAwNQ==",
      "diff_hunk": "@@ -2219,28 +2232,40 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, const std::shared_ptr<const CBlock>& pblock) {\n-        blocksConnected.emplace_back(pindex, pblock);\n-        conflictedTxs.emplace_back();\n+        assert(!awaitingClear);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = pblock;\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We use\n+        // awaitingClear to keep track of this state, and pop the last\n+        // entry here to make sure the list we return is sane.\n+        if (!blocksConnected.back().pindex) {\n+            blocksConnected.pop_back();\n+            assert(!awaitingClear);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c36422e8831fc9c2268777b0689c02ea0b45ea5c",
      "in_reply_to_id": 104960141,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Made the class use-once instead.",
      "created_at": "2017-03-08T17:49:09Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104978005",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104978005"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104978525",
      "pull_request_review_id": 25827361,
      "id": 104978525,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk3ODUyNQ==",
      "diff_hunk": "@@ -2526,8 +2512,15 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             fInitialDownload = IsInitialBlockDownload();\n \n             // throw all transactions though the signal-interface\n-\n-            } // MemPoolConflictRemovalTracker destroyed and conflict evictions are notified\n+            connectTrace.CallSyncTransactionOnConflictedTransactions();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 114,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "91dc381aa73f3931152249e5f116d7f29673bd2e",
      "in_reply_to_id": 104693002,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Argh, I believe that could be a race which triggers a reachable assertion if there are two ActivateBestChain's going at once, moved the class into the cs_main lock, which simplified the whole thing a bit.",
      "created_at": "2017-03-08T17:51:17Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104978525",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104978525"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104980158",
      "pull_request_review_id": 25827361,
      "id": 104980158,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk4MDE1OA==",
      "diff_hunk": "@@ -1155,11 +1155,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 26,
      "original_position": 6,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104732789,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh, OK, split the commit.",
      "created_at": "2017-03-08T17:58:08Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104980158",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104980158"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1121,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104981491",
      "pull_request_review_id": 25840154,
      "id": 104981491,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNDk4MTQ5MQ==",
      "diff_hunk": "@@ -33,7 +34,9 @@ void UnregisterAllValidationInterfaces();\n class CValidationInterface {",
      "path": "src/validationinterface.h",
      "position": 20,
      "original_position": 17,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ffbac04438b513483dca2c40dfd189e9e24a1db0",
      "in_reply_to_id": 104734533,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh, I see the issue. Yes, this is actually referring to something further in the change-set, but not in this PR (the full changeset is at https://github.com/TheBlueMatt/bitcoin/commits/2017-01-wallet-cache-inmempool, this is referring to https://github.com/TheBlueMatt/bitcoin/commit/71683dc0d8a00e16211194aaa66bfea1ae265f45).",
      "created_at": "2017-03-08T18:04:15Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r104981491",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/104981491"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105172038",
      "pull_request_review_id": 26038041,
      "id": 105172038,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE3MjAzOA==",
      "diff_hunk": "@@ -1155,11 +1155,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 26,
      "original_position": 6,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "d95db78d185d5deb02fb31a45cbd0a9c9bfe531c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"SyncTransaction->TxAddedToMempool/BlockConnected/Disconnected\":\r\n\r\nThis commit is currently removing LOCK2 at the top of SyncTransaction and then copying it 4 times over each place where SyncTransaction is called. Not a big deal, I guess, since the locks move again in the next commit. But just to be clear, what I was trying to suggest was only moving the locks in the _next_ commit, and leaving them completely alone in this commit.",
      "created_at": "2017-03-09T14:15:20Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r105172038",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105172038"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1121,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105182611",
      "pull_request_review_id": 26049371,
      "id": 105182611,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE4MjYxMQ==",
      "diff_hunk": "@@ -1155,11 +1155,10 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n-{\n-    LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 26,
      "original_position": 6,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "d95db78d185d5deb02fb31a45cbd0a9c9bfe531c",
      "in_reply_to_id": 105172038,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh, oops, whatever, I'll just leave it.",
      "created_at": "2017-03-09T15:00:18Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r105182611",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105182611"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1121,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108502288",
      "pull_request_review_id": 29537478,
      "id": 108502288,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwMjI4OA==",
      "diff_hunk": "@@ -8,6 +8,7 @@\n #include \"validationinterface.h\"\n #include <string>\n #include <map>\n+#include <list>",
      "path": "src/zmq/zmqnotificationinterface.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "892ddf12e10f7a3c810d735362ab174a44be35c4",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is this really missing?",
      "created_at": "2017-03-28T18:35:34Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108502288",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108502288"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 11,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108504557",
      "pull_request_review_id": 29537478,
      "id": 108504557,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNDU1Nw==",
      "diff_hunk": "@@ -2266,6 +2265,8 @@ bool static ConnectTip(CValidationState& state, const CChainParams& chainparams,\n     int64_t nTime6 = GetTimeMicros(); nTimePostConnect += nTime6 - nTime5; nTimeTotal += nTime6 - nTime1;\n     LogPrint(\"bench\", \"  - Connect postprocess: %.2fms [%.2fs]\\n\", (nTime6 - nTime5) * 0.001, nTimePostConnect * 0.000001);\n     LogPrint(\"bench\", \"- Connect block: %.2fms [%.2fs]\\n\", (nTime6 - nTime1) * 0.001, nTimeTotal * 0.000001);\n+\n+    connectTrace.blocksConnected.emplace_back(pindexNew, pthisBlock);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "bd60e24d27a73682d3814fac61c7d4c59d76603b",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe use std::move on the shared_ptr because we don't seem to use it after this point.",
      "created_at": "2017-03-28T18:43:38Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108504557",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108504557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2269,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108508829",
      "pull_request_review_id": 29537478,
      "id": 108508829,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwODgyOQ==",
      "diff_hunk": "@@ -2215,24 +2215,23 @@ struct ConnectTrace {\n  * Connect a new block to chainActive. pblock is either NULL or a pointer to a CBlock\n  * corresponding to pindexNew, to bypass loading it again from disk.\n  *\n- * The block is always added to connectTrace (either after loading from disk or by copying\n- * pblock) - if that is not intended, care must be taken to remove the last entry in\n- * blocksConnected in case of failure.\n+ * The block is added to connectTrace if connection succeeds.\n  */\n bool static ConnectTip(CValidationState& state, const CChainParams& chainparams, CBlockIndex* pindexNew, const std::shared_ptr<const CBlock>& pblock, ConnectTrace& connectTrace)",
      "path": "src/validation.cpp",
      "position": 150,
      "original_position": 9,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "bd60e24d27a73682d3814fac61c7d4c59d76603b",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is an API change probably outside the scope of this PR, but:\r\n\r\nIt might be nice to refactor ConnectTip to return an rvalue reference to a shared_ptr (and std::move pthisBlock) and have the caller decide what to do with it, because a connecttrace isn't really relevant to ConnectTip. Failing ConnectTip can return nullptr. (Could also keep the as-is ConnectTip around, calling the suggested version, if you're worried about any downstream API stuff).",
      "created_at": "2017-03-28T18:59:09Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108508829",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108508829"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2247,
      "original_line": 2247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108511218",
      "pull_request_review_id": 29537478,
      "id": 108511218,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxMTIxOA==",
      "diff_hunk": "@@ -2175,17 +2175,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  *\n  * This class also tracks transactions that are removed from the mempool as\n- * conflicts and and can be used to pass all those transactions through\n- * SyncTransaction.\n+ * conflicts (per block) and and can be used to pass all those transactions\n+ * through SyncTransaction.\n  */\n class ConnectTrace {\n private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n-    std::vector<CTransactionRef> conflictedTxs;\n+    std::vector<std::vector<CTransactionRef> > conflictedTxs;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "a9c02d029aa027425c2f79f9e576167de7ef6e1c",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: extra whitespace",
      "created_at": "2017-03-28T19:08:37Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108511218",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108511218"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108511808",
      "pull_request_review_id": 29537478,
      "id": 108511808,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxMTgwOA==",
      "diff_hunk": "@@ -2203,15 +2204,18 @@ class ConnectTrace {\n \n     void NotifyEntryRemoved(CTransactionRef txRemoved, MemPoolRemovalReason reason) {\n         if (reason == MemPoolRemovalReason::CONFLICT) {\n-            conflictedTxs.push_back(txRemoved);\n+            conflictedTxs.back().push_back(txRemoved);\n         }\n     }\n \n     void CallSyncTransactionOnConflictedTransactions() {\n-        for (const auto& tx : conflictedTxs) {\n-            GetMainSignals().SyncTransaction(*tx, NULL, CMainSignals::SYNC_TRANSACTION_NOT_IN_BLOCK);\n+        for (const auto& txRemovedForBlock : conflictedTxs) {\n+            for (const auto& tx : txRemovedForBlock) {\n+                GetMainSignals().SyncTransaction(*tx, NULL, CMainSignals::SYNC_TRANSACTION_NOT_IN_BLOCK);\n+            }\n         }\n         conflictedTxs.clear();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "a9c02d029aa027425c2f79f9e576167de7ef6e1c",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Worth doing a shrink_to_fit/swap on empty vector here?\r\n\r\n```c++\r\n\r\nstd::vector<std::vector<CTransactionRef>>(1).swap(conflictedTxs);\r\n\r\n```",
      "created_at": "2017-03-28T19:11:26Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108511808",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108511808"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2217,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108513792",
      "pull_request_review_id": 29537478,
      "id": 108513792,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxMzc5Mg==",
      "diff_hunk": "@@ -2194,29 +2207,32 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\n-        blocksConnected.emplace_back(pindex, std::move(pblock));\n-        conflictedTxs.emplace_back();\n-    }\n-\n-    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > >& GetBlocksConnected() {\n+        assert(!blocksConnected.back().pindex);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = std::move(pblock);",
      "path": "src/validation.cpp",
      "position": 117,
      "original_position": 52,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b275002930b394828c9c0affdf1fecba79f4d063",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think given where we call BlockConnected you could make pblock be an rvalue and move from the caller, saving the pass by copy.",
      "created_at": "2017-03-28T19:20:08Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108513792",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108513792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2217,
      "original_line": 2217,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108514145",
      "pull_request_review_id": 29537478,
      "id": 108514145,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxNDE0NQ==",
      "diff_hunk": "@@ -2194,29 +2207,32 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\n-        blocksConnected.emplace_back(pindex, std::move(pblock));\n-        conflictedTxs.emplace_back();\n-    }\n-\n-    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > >& GetBlocksConnected() {\n+        assert(!blocksConnected.back().pindex);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = std::move(pblock);\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We pop\n+        // the last entry here to make sure the list we return is sane.\n+        assert(!blocksConnected.back().pindex);\n+        assert(blocksConnected.back().conflictedTxs->empty());\n+        blocksConnected.pop_back();\n         return blocksConnected;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b275002930b394828c9c0affdf1fecba79f4d063",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can you set a flag so that doing things with the instance after calling GetBlocksConnected is an assert(blocks_not_gotten)?\r\n\r\nOtherwise, could you return a pair of iterators instead?",
      "created_at": "2017-03-28T19:21:41Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108514145",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108514145"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108517781",
      "pull_request_review_id": 29537478,
      "id": 108517781,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxNzc4MQ==",
      "diff_hunk": "@@ -207,7 +206,7 @@ UniValue generatetoaddress(const JSONRPCRequest& request)\n     if (!address.IsValid())\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Error: Invalid address\");\n \n-    boost::shared_ptr<CReserveScript> coinbaseScript(new CReserveScript());\n+    std::shared_ptr<CReserveScript> coinbaseScript(new CReserveScript());",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c359a52e04514bfeb93fb45232573aff23b873d3",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "please use make_shared",
      "created_at": "2017-03-28T19:38:23Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108517781",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108517781"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108517857",
      "pull_request_review_id": 29537478,
      "id": 108517857,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxNzg1Nw==",
      "diff_hunk": "@@ -3296,9 +3296,9 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n-void CWallet::GetScriptForMining(boost::shared_ptr<CReserveScript> &script)\n+void CWallet::GetScriptForMining(std::shared_ptr<CReserveScript> &script)\n {\n-    boost::shared_ptr<CReserveKey> rKey(new CReserveKey(this));\n+    std::shared_ptr<CReserveKey> rKey(new CReserveKey(this));",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c359a52e04514bfeb93fb45232573aff23b873d3",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "make_shared",
      "created_at": "2017-03-28T19:38:46Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108517857",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108517857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108518435",
      "pull_request_review_id": 29537478,
      "id": 108518435,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxODQzNQ==",
      "diff_hunk": "@@ -42,7 +41,7 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n-    virtual void GetScriptForMining(boost::shared_ptr<CReserveScript>&) {};\n+    virtual void GetScriptForMining(std::shared_ptr<CReserveScript>&) {};",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 13,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c359a52e04514bfeb93fb45232573aff23b873d3",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: could refactor API to pass up an rvalue reference rather than take an arg.",
      "created_at": "2017-03-28T19:41:30Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108518435",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108518435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108519987",
      "pull_request_review_id": 29537478,
      "id": 108519987,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUxOTk4Nw==",
      "diff_hunk": "@@ -958,8 +958,9 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n  * Abandoned state should probably be more carefully tracked via different\n  * posInBlock signals or by checking mempool presence when necessary.\n  */\n-bool CWallet::AddToWalletIfInvolvingMe(const CTransaction& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\n+bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "3f677fe53390b18a9a38b5308351a9cf867e6a07",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You probably don't need to use a ref to a CTransactionRef because CWalletTx is going to make a copy anyways -- you could just move it from the CWalletTx constructor.",
      "created_at": "2017-03-28T19:48:55Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108519987",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108519987"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 969,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108527880",
      "pull_request_review_id": 29564762,
      "id": 108527880,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyNzg4MA==",
      "diff_hunk": "@@ -8,6 +8,7 @@\n #include \"validationinterface.h\"\n #include <string>\n #include <map>\n+#include <list>",
      "path": "src/zmq/zmqnotificationinterface.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "892ddf12e10f7a3c810d735362ab174a44be35c4",
      "in_reply_to_id": 108502288,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, there is an std::list in CZMQNotificationInterface. It might not fail build due to current header organization, but it should be included if its used (and I believe it failed build when I was making changes).",
      "created_at": "2017-03-28T20:25:28Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108527880",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108527880"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 11,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108528396",
      "pull_request_review_id": 29565296,
      "id": 108528396,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyODM5Ng==",
      "diff_hunk": "@@ -2215,24 +2215,23 @@ struct ConnectTrace {\n  * Connect a new block to chainActive. pblock is either NULL or a pointer to a CBlock\n  * corresponding to pindexNew, to bypass loading it again from disk.\n  *\n- * The block is always added to connectTrace (either after loading from disk or by copying\n- * pblock) - if that is not intended, care must be taken to remove the last entry in\n- * blocksConnected in case of failure.\n+ * The block is added to connectTrace if connection succeeds.\n  */\n bool static ConnectTip(CValidationState& state, const CChainParams& chainparams, CBlockIndex* pindexNew, const std::shared_ptr<const CBlock>& pblock, ConnectTrace& connectTrace)",
      "path": "src/validation.cpp",
      "position": 150,
      "original_position": 9,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "bd60e24d27a73682d3814fac61c7d4c59d76603b",
      "in_reply_to_id": 108508829,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Well the other thing is I'd like to move the new mempool disconnect cache stuff into ConnectTrace, at which point ConnectTip again will end up needing to know about the connecttrace object. Anyway, agreed, lets table this for future work.",
      "created_at": "2017-03-28T20:27:43Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108528396",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108528396"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2247,
      "original_line": 2247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108528728",
      "pull_request_review_id": 29565662,
      "id": 108528728,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyODcyOA==",
      "diff_hunk": "@@ -2266,6 +2265,8 @@ bool static ConnectTip(CValidationState& state, const CChainParams& chainparams,\n     int64_t nTime6 = GetTimeMicros(); nTimePostConnect += nTime6 - nTime5; nTimeTotal += nTime6 - nTime1;\n     LogPrint(\"bench\", \"  - Connect postprocess: %.2fms [%.2fs]\\n\", (nTime6 - nTime5) * 0.001, nTimePostConnect * 0.000001);\n     LogPrint(\"bench\", \"- Connect block: %.2fms [%.2fs]\\n\", (nTime6 - nTime1) * 0.001, nTimeTotal * 0.000001);\n+\n+    connectTrace.blocksConnected.emplace_back(pindexNew, pthisBlock);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "bd60e24d27a73682d3814fac61c7d4c59d76603b",
      "in_reply_to_id": 108504557,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2017-03-28T20:29:10Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108528728",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108528728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2269,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108529403",
      "pull_request_review_id": 29566377,
      "id": 108529403,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyOTQwMw==",
      "diff_hunk": "@@ -2203,15 +2204,18 @@ class ConnectTrace {\n \n     void NotifyEntryRemoved(CTransactionRef txRemoved, MemPoolRemovalReason reason) {\n         if (reason == MemPoolRemovalReason::CONFLICT) {\n-            conflictedTxs.push_back(txRemoved);\n+            conflictedTxs.back().push_back(txRemoved);\n         }\n     }\n \n     void CallSyncTransactionOnConflictedTransactions() {\n-        for (const auto& tx : conflictedTxs) {\n-            GetMainSignals().SyncTransaction(*tx, NULL, CMainSignals::SYNC_TRANSACTION_NOT_IN_BLOCK);\n+        for (const auto& txRemovedForBlock : conflictedTxs) {\n+            for (const auto& tx : txRemovedForBlock) {\n+                GetMainSignals().SyncTransaction(*tx, NULL, CMainSignals::SYNC_TRANSACTION_NOT_IN_BLOCK);\n+            }\n         }\n         conflictedTxs.clear();",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "a9c02d029aa027425c2f79f9e576167de7ef6e1c",
      "in_reply_to_id": 108511808,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Hmm, its removed by the end and there is no equivalent vector on which to do so, so I think its fine.",
      "created_at": "2017-03-28T20:32:04Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108529403",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108529403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2217,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108530562",
      "pull_request_review_id": 29567643,
      "id": 108530562,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMDU2Mg==",
      "diff_hunk": "@@ -2194,29 +2207,32 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\n-        blocksConnected.emplace_back(pindex, std::move(pblock));\n-        conflictedTxs.emplace_back();\n-    }\n-\n-    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > >& GetBlocksConnected() {\n+        assert(!blocksConnected.back().pindex);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = std::move(pblock);",
      "path": "src/validation.cpp",
      "position": 117,
      "original_position": 52,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b275002930b394828c9c0affdf1fecba79f4d063",
      "in_reply_to_id": 108513792,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Likely, but the copy-from-rvalue is mostly free, and as you previously pointed out the caller now does std::move, so I dont think it matters.",
      "created_at": "2017-03-28T20:36:51Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108530562",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108530562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2217,
      "original_line": 2217,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108531071",
      "pull_request_review_id": 29568210,
      "id": 108531071,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMTA3MQ==",
      "diff_hunk": "@@ -2194,29 +2207,32 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\n-        blocksConnected.emplace_back(pindex, std::move(pblock));\n-        conflictedTxs.emplace_back();\n-    }\n-\n-    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > >& GetBlocksConnected() {\n+        assert(!blocksConnected.back().pindex);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = std::move(pblock);\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We pop\n+        // the last entry here to make sure the list we return is sane.\n+        assert(!blocksConnected.back().pindex);\n+        assert(blocksConnected.back().conflictedTxs->empty());\n+        blocksConnected.pop_back();\n         return blocksConnected;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b275002930b394828c9c0affdf1fecba79f4d063",
      "in_reply_to_id": 108514145,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Its already there implicitly, and I was trying to pair back the million asserts I had in this code (because if you have NotifyEntryRemoved(), you will assert the pindex on the back is empty, and BlockConnected will assert that its setting a pindex, so if you try to call either it will fail as the back().pindex is no longer null).",
      "created_at": "2017-03-28T20:39:08Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108531071",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108531071"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108531167",
      "pull_request_review_id": 29568307,
      "id": 108531167,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMTE2Nw==",
      "diff_hunk": "@@ -207,7 +206,7 @@ UniValue generatetoaddress(const JSONRPCRequest& request)\n     if (!address.IsValid())\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Error: Invalid address\");\n \n-    boost::shared_ptr<CReserveScript> coinbaseScript(new CReserveScript());\n+    std::shared_ptr<CReserveScript> coinbaseScript(new CReserveScript());",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c359a52e04514bfeb93fb45232573aff23b873d3",
      "in_reply_to_id": 108517781,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2017-03-28T20:39:31Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108531167",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108531167"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108532099",
      "pull_request_review_id": 29569264,
      "id": 108532099,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMjA5OQ==",
      "diff_hunk": "@@ -958,8 +958,9 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n  * Abandoned state should probably be more carefully tracked via different\n  * posInBlock signals or by checking mempool presence when necessary.\n  */\n-bool CWallet::AddToWalletIfInvolvingMe(const CTransaction& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\n+bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "3f677fe53390b18a9a38b5308351a9cf867e6a07",
      "in_reply_to_id": 108519987,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CWalletTx now copies the ref that is passed in, so using a ref here should avoid a complete copy?",
      "created_at": "2017-03-28T20:43:30Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108532099",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108532099"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 969,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108532380",
      "pull_request_review_id": 29569558,
      "id": 108532380,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMjM4MA==",
      "diff_hunk": "@@ -42,7 +41,7 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {}\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman) {}\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {}\n-    virtual void GetScriptForMining(boost::shared_ptr<CReserveScript>&) {};\n+    virtual void GetScriptForMining(std::shared_ptr<CReserveScript>&) {};",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 13,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c359a52e04514bfeb93fb45232573aff23b873d3",
      "in_reply_to_id": 108518435,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'll leave that for someone else in a later PR.",
      "created_at": "2017-03-28T20:44:42Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108532380",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108532380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108532392",
      "pull_request_review_id": 29569571,
      "id": 108532392,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMjM5Mg==",
      "diff_hunk": "@@ -3296,9 +3296,9 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n-void CWallet::GetScriptForMining(boost::shared_ptr<CReserveScript> &script)\n+void CWallet::GetScriptForMining(std::shared_ptr<CReserveScript> &script)\n {\n-    boost::shared_ptr<CReserveKey> rKey(new CReserveKey(this));\n+    std::shared_ptr<CReserveKey> rKey(new CReserveKey(this));",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "c359a52e04514bfeb93fb45232573aff23b873d3",
      "in_reply_to_id": 108517857,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2017-03-28T20:44:46Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108532392",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108532392"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108533173",
      "pull_request_review_id": 29570428,
      "id": 108533173,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUzMzE3Mw==",
      "diff_hunk": "@@ -2175,17 +2175,17 @@ static int64_t nTimePostConnect = 0;\n  * part of a single ActivateBestChainStep call.\n  *\n  * This class also tracks transactions that are removed from the mempool as\n- * conflicts and and can be used to pass all those transactions through\n- * SyncTransaction.\n+ * conflicts (per block) and and can be used to pass all those transactions\n+ * through SyncTransaction.\n  */\n class ConnectTrace {\n private:\n     std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > > blocksConnected;\n-    std::vector<CTransactionRef> conflictedTxs;\n+    std::vector<std::vector<CTransactionRef> > conflictedTxs;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "a9c02d029aa027425c2f79f9e576167de7ef6e1c",
      "in_reply_to_id": 108511218,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2017-03-28T20:48:08Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108533173",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108533173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108574758",
      "pull_request_review_id": 29614488,
      "id": 108574758,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODU3NDc1OA==",
      "diff_hunk": "@@ -8,6 +8,7 @@\n #include \"validationinterface.h\"\n #include <string>\n #include <map>\n+#include <list>",
      "path": "src/zmq/zmqnotificationinterface.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "892ddf12e10f7a3c810d735362ab174a44be35c4",
      "in_reply_to_id": 108502288,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agree, we shouldn't rely on indirect includes.",
      "created_at": "2017-03-29T01:24:39Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108574758",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108574758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 11,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108581806",
      "pull_request_review_id": 29621842,
      "id": 108581806,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODU4MTgwNg==",
      "diff_hunk": "@@ -8,6 +8,7 @@\n #include \"validationinterface.h\"\n #include <string>\n #include <map>\n+#include <list>",
      "path": "src/zmq/zmqnotificationinterface.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "892ddf12e10f7a3c810d735362ab174a44be35c4",
      "in_reply_to_id": 108502288,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah, I was viewing the diff and didn't realize it was truncated, so I didn't see the list :) ACK the include.",
      "created_at": "2017-03-29T02:46:48Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108581806",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108581806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 11,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108762239",
      "pull_request_review_id": 29815725,
      "id": 108762239,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODc2MjIzOQ==",
      "diff_hunk": "@@ -2206,19 +2173,46 @@ static int64_t nTimePostConnect = 0;\n /**\n  * Used to track blocks whose transactions were applied to the UTXO state as a\n  * part of a single ActivateBestChainStep call.\n+ *\n+ * This class also tracks transactions that are removed from the mempool as\n+ * conflicts and and can be used to pass all those transactions through",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ff3d20571b35fa2f8856ea58935cd4775a00cd0c",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: \"and and\"",
      "created_at": "2017-03-29T19:11:35Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108762239",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108762239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108768338",
      "pull_request_review_id": 29815725,
      "id": 108768338,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODc2ODMzOA==",
      "diff_hunk": "@@ -2502,12 +2515,20 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             // to abandon a transaction and then have it inadvertently cleared by\n             // the notification that the conflicted transaction was evicted.\n \n+            // throw all transactions though the signal-interface\n+            for (const PerBlockConnectTrace& trace : connectTrace.GetBlocksConnected()) {\n+                assert(trace.conflictedTxs);\n+                for (const auto& tx : *trace.conflictedTxs) {\n+                    GetMainSignals().SyncTransaction(*tx, NULL, CMainSignals::SYNC_TRANSACTION_NOT_IN_BLOCK);\n+                }\n+            }\n+\n             // Transactions in the connected block are notified\n-            for (const auto& pair : connectTrace.GetBlocksConnected()) {\n-                assert(pair.second);\n-                const CBlock& block = *(pair.second);\n+            for (const PerBlockConnectTrace& trace : connectTrace.GetBlocksConnected()) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 114,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "98ed4e0c9c15c8d7317b9175f5ef1dac722f3a7f",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is a second call to GetBlocksConnected(), which violates the single-use requirement.",
      "created_at": "2017-03-29T19:41:32Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108768338",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108768338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108822523",
      "pull_request_review_id": 29880820,
      "id": 108822523,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODgyMjUyMw==",
      "diff_hunk": "@@ -2206,19 +2173,46 @@ static int64_t nTimePostConnect = 0;\n /**\n  * Used to track blocks whose transactions were applied to the UTXO state as a\n  * part of a single ActivateBestChainStep call.\n+ *\n+ * This class also tracks transactions that are removed from the mempool as\n+ * conflicts and and can be used to pass all those transactions through",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "ff3d20571b35fa2f8856ea58935cd4775a00cd0c",
      "in_reply_to_id": 108762239,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2017-03-30T01:07:46Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108822523",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108822523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108822863",
      "pull_request_review_id": 29881175,
      "id": 108822863,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODgyMjg2Mw==",
      "diff_hunk": "@@ -2502,12 +2515,20 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             // to abandon a transaction and then have it inadvertently cleared by\n             // the notification that the conflicted transaction was evicted.\n \n+            // throw all transactions though the signal-interface\n+            for (const PerBlockConnectTrace& trace : connectTrace.GetBlocksConnected()) {\n+                assert(trace.conflictedTxs);\n+                for (const auto& tx : *trace.conflictedTxs) {\n+                    GetMainSignals().SyncTransaction(*tx, NULL, CMainSignals::SYNC_TRANSACTION_NOT_IN_BLOCK);\n+                }\n+            }\n+\n             // Transactions in the connected block are notified\n-            for (const auto& pair : connectTrace.GetBlocksConnected()) {\n-                assert(pair.second);\n-                const CBlock& block = *(pair.second);\n+            for (const PerBlockConnectTrace& trace : connectTrace.GetBlocksConnected()) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 114,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "98ed4e0c9c15c8d7317b9175f5ef1dac722f3a7f",
      "in_reply_to_id": 108768338,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2017-03-30T01:11:25Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r108822863",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108822863"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109005922",
      "pull_request_review_id": 30079157,
      "id": 109005922,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTAwNTkyMg==",
      "diff_hunk": "@@ -2194,29 +2207,32 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\n-        blocksConnected.emplace_back(pindex, std::move(pblock));\n-        conflictedTxs.emplace_back();\n-    }\n-\n-    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > >& GetBlocksConnected() {\n+        assert(!blocksConnected.back().pindex);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = std::move(pblock);\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We pop\n+        // the last entry here to make sure the list we return is sane.\n+        assert(!blocksConnected.back().pindex);\n+        assert(blocksConnected.back().conflictedTxs->empty());\n+        blocksConnected.pop_back();\n         return blocksConnected;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b275002930b394828c9c0affdf1fecba79f4d063",
      "in_reply_to_id": 108514145,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe worth explicitly differentiating the cause though -- back() being null could be caused for two reasons, and if you call twice with 0 blocksconnected it will cause UB on the second call. Also, that @sdaftuar found a double call so it's worth having this.",
      "created_at": "2017-03-30T18:43:50Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r109005922",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109005922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109008267",
      "pull_request_review_id": 30081710,
      "id": 109008267,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTAwODI2Nw==",
      "diff_hunk": "@@ -958,8 +958,9 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n  * Abandoned state should probably be more carefully tracked via different\n  * posInBlock signals or by checking mempool presence when necessary.\n  */\n-bool CWallet::AddToWalletIfInvolvingMe(const CTransaction& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\n+bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "3f677fe53390b18a9a38b5308351a9cf867e6a07",
      "in_reply_to_id": 108519987,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The CWalletTx constructor is:\r\n```c++\r\nCWalletTx(const CWallet* pwalletIn, CTransactionRef arg) : CMerkleTx(std::move(arg))\r\n```\r\n\r\nI was suggesting to add a constructor\r\n\r\n```c++\r\nCWalletTx(const CWallet* pwalletIn, CTransactionRef&& arg) : CMerkleTx(arg)\r\n```\r\n\r\nand then update L984 to\r\n\r\n```c++\r\n            CWalletTx wtx(this, std::move(ptx));\r\n```\r\n\r\nand update this line to\r\n\r\n```c++\r\nbool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\r\n```\r\n\r\nThere are two reasons:\r\n  - slightly more clear intent (AddToWalletIfInvolvingMe does get ownership)\r\n  - Eliminates an indirection",
      "created_at": "2017-03-30T18:53:34Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r109008267",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109008267"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 969,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109034578",
      "pull_request_review_id": 30111008,
      "id": 109034578,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTAzNDU3OA==",
      "diff_hunk": "@@ -958,8 +958,9 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n  * Abandoned state should probably be more carefully tracked via different\n  * posInBlock signals or by checking mempool presence when necessary.\n  */\n-bool CWallet::AddToWalletIfInvolvingMe(const CTransaction& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\n+bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "3f677fe53390b18a9a38b5308351a9cf867e6a07",
      "in_reply_to_id": 108519987,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh, OK, I missed your original point. Anyway, I would still prefer to leave it because it is a smaller diff to not change CWalletTx, and the way it is you dont end up with a variable lying around which has already been std::move()d prior to the end of the function, which I dont super like doing. Anyway, feel free to clean it up in a future PR (also maybe we need a general \"when to && vs const& vs copy-and-move style guide)",
      "created_at": "2017-03-30T20:53:10Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r109034578",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109034578"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 969,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109035097",
      "pull_request_review_id": 30111537,
      "id": 109035097,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTAzNTA5Nw==",
      "diff_hunk": "@@ -2194,29 +2207,32 @@ class ConnectTrace {\n     }\n \n     void BlockConnected(CBlockIndex* pindex, std::shared_ptr<const CBlock> pblock) {\n-        blocksConnected.emplace_back(pindex, std::move(pblock));\n-        conflictedTxs.emplace_back();\n-    }\n-\n-    std::vector<std::pair<CBlockIndex*, std::shared_ptr<const CBlock> > >& GetBlocksConnected() {\n+        assert(!blocksConnected.back().pindex);\n+        assert(pindex);\n+        assert(pblock);\n+        blocksConnected.back().pindex = pindex;\n+        blocksConnected.back().pblock = std::move(pblock);\n+        blocksConnected.emplace_back();\n+    }\n+\n+    std::vector<PerBlockConnectTrace>& GetBlocksConnected() {\n+        // We always keep one extra block at the end of our list because\n+        // blocks are added after all the conflicted transactions have\n+        // been filled in. Thus, the last entry should always be an empty\n+        // one waiting for the transactions from the next block. We pop\n+        // the last entry here to make sure the list we return is sane.\n+        assert(!blocksConnected.back().pindex);\n+        assert(blocksConnected.back().conflictedTxs->empty());\n+        blocksConnected.pop_back();\n         return blocksConnected;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b275002930b394828c9c0affdf1fecba79f4d063",
      "in_reply_to_id": 108514145,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Wait, where does it UB? I think it always asserts if you misuse it. Anyway, no need to make asserts overly complicated, the preconditions here are well-documented, the asserts are probably just as useful to remove completely as leave there.",
      "created_at": "2017-03-30T20:55:14Z",
      "updated_at": "2017-04-07T09:54:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r109035097",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109035097"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110599753",
      "pull_request_review_id": 31782638,
      "id": 110599753,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMDU5OTc1Mw==",
      "diff_hunk": "@@ -2195,6 +2195,12 @@ static int64_t nTimeFlush = 0;\n static int64_t nTimeChainState = 0;\n static int64_t nTimePostConnect = 0;\n \n+struct PerBlockConnectTrace {\n+    CBlockIndex* pindex = NULL;",
      "path": "src/validation.cpp",
      "position": 75,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "01f38bf2c2459eb6a5a35c43c291167e19110cda",
      "in_reply_to_id": 104697616,
      "user": {
        "login": "bulldozer00",
        "id": 4436398,
        "node_id": "MDQ6VXNlcjQ0MzYzOTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4436398?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bulldozer00",
        "html_url": "https://github.com/bulldozer00",
        "followers_url": "https://api.github.com/users/bulldozer00/followers",
        "following_url": "https://api.github.com/users/bulldozer00/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bulldozer00/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bulldozer00/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bulldozer00/subscriptions",
        "organizations_url": "https://api.github.com/users/bulldozer00/orgs",
        "repos_url": "https://api.github.com/users/bulldozer00/repos",
        "events_url": "https://api.github.com/users/bulldozer00/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bulldozer00/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "From Cpp Core Guidelines (https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Res-nullptr)\r\n\r\nES.47: Use nullptr rather than 0 or NULL ()\r\n\r\nReadability. Minimize surprises: nullptr cannot be confused with an int. nullptr also has a well-specified (very restrictive) type, and thus works in more scenarios where type deduction might do the wrong thing on NULL or 0.",
      "created_at": "2017-04-10T08:36:02Z",
      "updated_at": "2017-04-10T08:36:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r110599753",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110599753"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2177,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110757861",
      "pull_request_review_id": 31933438,
      "id": 110757861,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMDc1Nzg2MQ==",
      "diff_hunk": "@@ -966,8 +966,9 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n  * Abandoned state should probably be more carefully tracked via different\n  * posInBlock signals or by checking mempool presence when necessary.\n  */\n-bool CWallet::AddToWalletIfInvolvingMe(const CTransaction& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\n+bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Now that `AddToWalletIfInvolvingMe()` is called with `pindexBlockConnected` set to NULL when the transaction isn't in a block, can we remove the magic -1 value for `posInBlock` (and change the `if (posInBlock != -1)` into `if (pindexBlockConnected != NULL)`)?",
      "created_at": "2017-04-10T20:39:24Z",
      "updated_at": "2017-04-10T20:40:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r110757861",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110757861"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 969,
      "original_line": 969,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110759607",
      "pull_request_review_id": 31955637,
      "id": 110759607,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMDc1OTYwNw==",
      "diff_hunk": "@@ -966,8 +966,9 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n  * Abandoned state should probably be more carefully tracked via different\n  * posInBlock signals or by checking mempool presence when necessary.\n  */\n-bool CWallet::AddToWalletIfInvolvingMe(const CTransaction& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)\n+bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "original_commit_id": "b1a6d4cd560fbdb66506841860db03c08ea4bbbc",
      "in_reply_to_id": 110757861,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure, go for it. Still gonna have to pass in two parameters either way, sadly :/.",
      "created_at": "2017-04-10T20:48:02Z",
      "updated_at": "2017-04-10T20:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9725#discussion_r110759607",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110759607"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9725"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 969,
      "original_line": 969,
      "side": "RIGHT"
    }
  ]
}