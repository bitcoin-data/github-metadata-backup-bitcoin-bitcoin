{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847",
    "id": 1189980528,
    "node_id": "PR_kwDOABII585G7alw",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/26847",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/26847.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/26847.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
    "number": 26847,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "p2p: track AddrMan totals by network and table, improve precision of adding fixed seeds",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "AddrMan currently doesn't track the number of its entries by network, it only knows the total number of addresses. This PR makes AddrMan keep track of these numbers, which would be helpful for multiple things:\r\n\r\n1. Allow to specifically add fixed seeds to AddrMan of networks where we don't have any addresses yet - even if AddrMan as a whole is not empty (partly fixing #26035). This is in particular helpful if the user abruptly changes `-onlynet` settings (such that addrs that used to be reachable are no longer and vice versa), in which case they currently could get stuck and not find any outbound peers. The second commit of this PR implements this.\r\n1. (Future work): Add logic for automatic connection management with respect to networks - such as making attempts to have at least one connection to each reachable network as suggested [here](https://github.com/bitcoin/bitcoin/issues/26035#issuecomment-1249420209). This would involve requesting an address from a particular network from AddrMan, and expanding its corresponding function `AddrMan::Select()`  to do this requires internal knowledge of the current number of addresses for each network and table to avoid getting stuck in endless loops.\r\n1. (Future work): Perhaps display the totals to users. At least I would find this helpful to debug, the existing option (`./bitcoin-cli -addrinfo`) is rather indirect by doing the aggregation itself in each call, doesn't distinguish between new and tried, and being based on `AddrMan::GetAddr()` it's also subject to a quality filter which we probably don't want in this spot.",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "created_at": "2023-01-08T21:45:27Z",
    "updated_at": "2023-02-01T15:42:23Z",
    "closed_at": "2023-01-31T21:09:02Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged_at": "2023-01-31T21:09:02Z",
    "merge_commit_sha": "ba3d32715f985314eb1fdb006bfc4127f8d516a7",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "mzumsande:202212_addrman_tracknets",
      "ref": "202212_addrman_tracknets",
      "sha": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 187673073,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODc2NzMwNzM=",
        "name": "bitcoin",
        "full_name": "mzumsande/bitcoin",
        "owner": {
          "login": "mzumsande",
          "id": 48763452,
          "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
          "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/mzumsande",
          "html_url": "https://github.com/mzumsande",
          "followers_url": "https://api.github.com/users/mzumsande/followers",
          "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
          "organizations_url": "https://api.github.com/users/mzumsande/orgs",
          "repos_url": "https://api.github.com/users/mzumsande/repos",
          "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/mzumsande/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/mzumsande/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/mzumsande/bitcoin",
        "archive_url": "https://api.github.com/repos/mzumsande/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/mzumsande/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/mzumsande/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/mzumsande/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/mzumsande/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/mzumsande/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/mzumsande/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/mzumsande/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/mzumsande/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/mzumsande/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/mzumsande/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/mzumsande/bitcoin/events",
        "forks_url": "https://api.github.com/repos/mzumsande/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/mzumsande/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/mzumsande/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/mzumsande/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/mzumsande/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/mzumsande/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/mzumsande/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/mzumsande/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/mzumsande/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/mzumsande/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/mzumsande/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/mzumsande/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/mzumsande/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:mzumsande/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/mzumsande/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/mzumsande/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/mzumsande/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/mzumsande/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/mzumsande/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/mzumsande/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/mzumsande/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/mzumsande/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/mzumsande/bitcoin/hooks",
        "svn_url": "https://github.com/mzumsande/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 218813,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-07-28T17:06:51Z",
        "created_at": "2019-05-20T16:03:10Z",
        "updated_at": "2023-07-28T06:57:51Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ffc22b7d42c6360223508293b8c1f88b1a1a468b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 673,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-03T00:03:27Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 182,
    "deletions": 62,
    "changed_files": 8,
    "commits": 4,
    "review_comments": 66,
    "comments": 11
  },
  "events": [
    {
      "event": "commented",
      "id": 1374934695,
      "node_id": "IC_kwDOABII585R89an",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1374934695",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-08T21:45:29Z",
      "updated_at": "2023-01-31T20:55:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [naumenkogs](https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1406117438), [stratospher](https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1407118794), [vasild](https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1275192707), [achow101](https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1411057005) |\n| Concept ACK | [amitiuttarwar](https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1374936705), [brunoerg](https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1240845960), [sipa](https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1376394341) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26261](https://github.com/bitcoin/bitcoin/pull/26261) (p2p: cleanup `LookupIntern`, `Lookup` and `LookupHost` by brunoerg)\n* [#26114](https://github.com/bitcoin/bitcoin/pull/26114) (net: Make AddrFetch connections to fixed seeds by mzumsande)\n* [#25284](https://github.com/bitcoin/bitcoin/pull/25284) (consensus: Remove dependency on ADDRV2_FORMAT by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1374934695",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "labeled",
      "id": 8177194545,
      "node_id": "LE_lADOABII585a4Ph5zwAAAAHnZhYx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8177194545",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-08T21:45:31Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "commented",
      "id": 1374936705,
      "node_id": "IC_kwDOABII585R896B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1374936705",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-08T21:56:32Z",
      "updated_at": "2023-01-08T21:56:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "approach ACK. relatively simple patch to ameliorate the issue of address discovery when switching networks",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1374936705",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-09T03:56:24Z",
      "updated_at": "2023-01-09T03:56:24Z",
      "source": {
        "issue": {
          "id": 1376468939,
          "node_id": "PR_kwDOABII584_IHa-",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26114",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26114/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26114/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26114/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26114",
          "number": 26114,
          "state": "open",
          "state_reason": null,
          "title": "net: Make AddrFetch connections to fixed seeds",
          "body": "This proposes two things:\r\n\r\n1. Make AddrFetch connections to fixed seeds instead of just adding them to AddrMan (suggested in https://github.com/bitcoin/bitcoin/pull/25678#issuecomment-1210858925)\r\nWhen adding fixed seeds, we currently add them to AddrMan and then make regular full outbound connections to them. If many new nodes use the fixed seeds for this, it will result in them getting a lot of peers requiring IBD, which will create a lot of traffic for them. With an AddrFetch connection, we will only use them to get addresses from other peers and disconnect afterwards.\r\nThis PR proposes to attempt making AddrFetch connections to 10 peers for better diversity (some may be offline anyway). The fixed seeds will still be added to Addrman as before, but only after a delay of 2 minutes, after which they will hopefully no longer be the only entries in AddrMan.\r\n\r\n2. Move the logic of adding fixed seeds out of `ThreadOpenConnections` into `ThreadDNSAddressSeed` (which is being renamed to `ThreadAddressSeed`).\r\nI think this makes sense in general because adding the fixed seeds is in many ways analogous to querying the DNS seeds, and ThreadOpenConnections, which is there to actually open the connections is already quite complex.\r\nAlso, it makes the changes from 1) easier if we don't have to worry about interfering with the automatic connection making logic.\r\n\r\nOne way to test this is to start without `peers.dat` and run with `-nodnsseed -blocksonly -debug=net` and monitor the debug log and `bitcoin-cli -netinfo` behavior.",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26114",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26114",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26114.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26114.patch"
          },
          "created_at": "2022-09-16T21:01:39Z",
          "updated_at": "2023-08-02T14:36:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1240065749,
      "node_id": "PRR_kwDOABII585J6ebV",
      "url": null,
      "actor": null,
      "commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1240065749",
      "submitted_at": "2023-01-09T08:11:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1240068367,
      "node_id": "PRR_kwDOABII585J6fEP",
      "url": null,
      "actor": null,
      "commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1240068367",
      "submitted_at": "2023-01-09T08:13:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1240070044,
      "node_id": "PRR_kwDOABII585J6fec",
      "url": null,
      "actor": null,
      "commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1240070044",
      "submitted_at": "2023-01-09T08:15:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1240075440,
      "node_id": "PRR_kwDOABII585J6gyw",
      "url": null,
      "actor": null,
      "commit_id": "85dc0c97349d3264691cab7419154fabb80bc9c4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1240075440",
      "submitted_at": "2023-01-09T08:20:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1240845960,
      "node_id": "PRR_kwDOABII585J9c6I",
      "url": null,
      "actor": null,
      "commit_id": "85dc0c97349d3264691cab7419154fabb80bc9c4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1240845960",
      "submitted_at": "2023-01-09T17:05:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8185266005,
      "node_id": "HRFPE_lADOABII585a4Ph5zwAAAAHn4T9V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8185266005",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-09T19:47:03Z"
    },
    {
      "event": "reviewed",
      "id": 1241260431,
      "node_id": "PRR_kwDOABII585J_CGP",
      "url": null,
      "actor": null,
      "commit_id": "18acfdfe3b6c38f04ddae3b94bb68f0e3531ab19",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1241260431",
      "submitted_at": "2023-01-09T22:05:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "commented",
      "id": 1376394341,
      "node_id": "IC_kwDOABII585SChxl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1376394341",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-09T22:07:32Z",
      "updated_at": "2023-01-09T22:07:32Z",
      "author_association": "MEMBER",
      "body": "Concept/approach ACK",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1376394341",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8205878922,
      "node_id": "HRFPE_lADOABII585a4Ph5zwAAAAHpG8aK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8205878922",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-11T22:11:24Z"
    },
    {
      "event": "reviewed",
      "id": 1245128332,
      "node_id": "PRR_kwDOABII585KNyaM",
      "url": null,
      "actor": null,
      "commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1245128332",
      "submitted_at": "2023-01-12T08:09:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1245142323,
      "node_id": "PRR_kwDOABII585KN10z",
      "url": null,
      "actor": null,
      "commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1245142323",
      "submitted_at": "2023-01-12T08:20:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1247703211,
      "node_id": "PRR_kwDOABII585KXnCr",
      "url": null,
      "actor": null,
      "commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1247703211",
      "submitted_at": "2023-01-13T15:34:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "commented",
      "id": 1382641983,
      "node_id": "IC_kwDOABII585SaXE_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1382641983",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-14T02:46:52Z",
      "updated_at": "2023-01-14T02:46:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "code looks good. I went through all the addrman touch points to the new & tried tables to double check nothing was missed. tried my best to think through edge cases of what could go wrong and don't have anything :) \r\n\r\nleft a bunch of review comments that are all style related, no blockers. \r\n\r\nanother style related suggestion: what do you think about consolidating the two `size()` functions? adding default params to the newly introduced function means you can remove the old one & none* of the call sites need to change. I tried it out [here](https://github.com/amitiuttarwar/bitcoin/commit/ab188a62bd18668f5a9174db4dadfc398bc02b76). \r\n[*] none of the bitcoind callers. one test call site failed because of the shift from `vRandom.size` to `nNew + nTried`. the test is checking a corrupted addrman, and I don't think the size is testing anything meaningful there, so I removed that check.",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1382641983",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "reviewed",
      "id": 1248640279,
      "node_id": "PRR_kwDOABII585KbL0X",
      "url": null,
      "actor": null,
      "commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1248640279",
      "submitted_at": "2023-01-14T02:47:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "commented",
      "id": 1382746084,
      "node_id": "IC_kwDOABII585Sawfk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1382746084",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-14T13:56:14Z",
      "updated_at": "2023-01-14T13:56:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "> ... of what could go wrong and don't have anything ...\r\n\r\nOh, well.\r\n\r\n> _When nothing can possibly go wrong, it will._\r\n\r\n:)\r\n\r\nI guess `nNew` and `m_map_count[].first` could go out of sync in the future. It is good that now they are always updated next to each other (or within 1-2 lines). Further enforcing of this would be to add a new method that modifies both and only change them through this method. E.g.\r\n\r\n```cpp\r\nvoid IncNew(ssize_t delta, Network net)\r\n{\r\n    nNew += delta;\r\n    m_map_count[net].first += delta;\r\n}\r\n```\r\n\r\nOr ditch `nNew` and sum `m_map_count[].first` whenever we would read `nNew`, via a new method like `size_t CountNew() const`? Performance considerations?",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1382746084",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "commented",
      "id": 1382914789,
      "node_id": "IC_kwDOABII585SbZrl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1382914789",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-14T20:50:29Z",
      "updated_at": "2023-01-14T20:50:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "ah, just to clarify, I meant I couldn't identify anything that could go wrong in the _current_ version of the code. ofc things can always go awry in the future, which is why code style is useful to help reduce the chances of that happening :) \r\n\r\n> I guess nNew and m_map_count[].first could go out of sync in the future. It is good that now they are always updated next to each other (or within 1-2 lines). Further enforcing of this would be to add a new method that modifies both and only change them through this method.\r\n\r\nagreed that the counts of `nNew` (and also `nTried`) could go out of sync with the totals in `m_map_count`. it can also be problematic if these values are in sync with each other, but out of sync with the actual values stored on the new / tried tables & other addrman structures. \r\n\r\nthe code added to `CheckAddrman` are helpful because they offer a programatic testing against this inadvertently changing in the future. I don't think having specific \"accessor\" methods makes the most sense because we already have functions that offer logical coupling of creating & removing addrs on addrman*. also, it would require 4 additional functions (increment & decrement / new & tried).\r\n\r\n[*] for eg. other than unserialization, all additions to the new table go through `Addrman::Add`, which calls `AddSingle` which uses `Create` as a helper to construct the `AddrInfo` object & start persisting to internal data structs. my comment [here](https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070146333) suggested moving incrementing both counts inside the `Create` function. \r\n\r\n> Or ditch nNew and sum m_map_count[].first whenever we would read nNew, via a new method like size_t CountNew() const? Performance considerations?\r\n\r\nthis one I'm more open to. martin pointed out some difficulties in that approach [here](https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065041916), and I personally think its nbd either way. ",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1382914789",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8239773142,
      "node_id": "HRFPE_lADOABII585a4Ph5zwAAAAHrIPXW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8239773142",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T20:00:54Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8240512882,
      "node_id": "HRFPE_lADOABII585a4Ph5zwAAAAHrLD9y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8240512882",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T22:53:51Z"
    },
    {
      "event": "commented",
      "id": 1384648674,
      "node_id": "IC_kwDOABII585SiA_i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1384648674",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T23:00:51Z",
      "updated_at": "2023-01-16T23:00:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks a lot for the reviews! I think I have addressed all comments and implemented most of the suggestions - let me know if I missed something!\r\n\r\n> another style related suggestion: what do you think about consolidating the two `size()` functions? adding default params to the newly introduced function means you can remove the old one & none* of the call sites need to change. I tried it out [here](https://github.com/amitiuttarwar/bitcoin/commit/ab188a62bd18668f5a9174db4dadfc398bc02b76).\r\n> [*] none of the bitcoind callers. one test call site failed because of the shift from `vRandom.size` to `nNew + nTried`. the test is checking a corrupted addrman, and I don't think the size is testing anything meaningful there, so I removed that check.\r\n\r\nI did that, and combined it with @vasild's suggestion to use upper case notation `Size()` as per the developer notes. This involved a lot of renaming of existing call sites, so I did it in an extra commit at the end. Since I switched back to use `vRandom.size` to keep existing behavior, the corrupted AddrMan test doesn't need to be changed anymore.\r\n\r\n> Or ditch nNew and sum m_map_count[].first whenever we would read nNew, via a new method like size_t CountNew() const? Performance considerations?\r\n\r\n> this one I'm more open to. martin pointed out some difficulties in that approach [here](https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065041916), and I personally think its nbd either way.\r\n\r\nYes, since it's part of the serialization we can't completely do without it. Of course, we could decide to just use `nNew` and `nTried` locally in `Unserialize()`, and rebuild it from the sum from `m_network_counts` everywhere else. I would suspect that there is no major difference performance-wise because the maximum number of networks is very small - I could try to benchmark it.\r\n\r\n\r\n\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1384648674",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "mentioned",
      "id": 8240532946,
      "node_id": "MEE_lADOABII585a4Ph5zwAAAAHrLI3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8240532946",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T23:00:52Z"
    },
    {
      "event": "subscribed",
      "id": 8240532953,
      "node_id": "SE_lADOABII585a4Ph5zwAAAAHrLI3Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8240532953",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T23:00:52Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8240552108,
      "node_id": "HRFPE_lADOABII585a4Ph5zwAAAAHrLNis",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8240552108",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T23:04:44Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-17T05:48:53Z",
      "updated_at": "2023-01-17T05:48:53Z",
      "source": {
        "issue": {
          "id": 1398072802,
          "node_id": "PR_kwDOABII585AOrOs",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26261/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26261",
          "number": 26261,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: cleanup `LookupIntern`, `Lookup` and `LookupHost`",
          "body": "Continuation of #26078.\r\n\r\nTo improve readability instead of returning a bool and passing stuff by reference, this PR changes:\r\n\r\n- `LookupHost` to return `std::vector<CNetAddr>`\r\n- `LookupHost` to return `std::optional<CNetAddr>`\r\n- `Lookup` to return `std::vector<CService>`\r\n- `Lookup` to return `std::optional<CService>`.\r\n- `LookupIntern` to return `std::vector<CNetAddr>`\r\n\r\nAs discussed in #26078, it would be better to avoid using `optional` in some cases, but for specific `Lookup` and `LookupHost` functions it's necessary to use `optional` to verify if they were able to catch some data from their overloaded function.\r\n\r\n\r\n\r\n\r\n",
          "user": {
            "login": "brunoerg",
            "id": 19480819,
            "node_id": "MDQ6VXNlcjE5NDgwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brunoerg",
            "html_url": "https://github.com/brunoerg",
            "followers_url": "https://api.github.com/users/brunoerg/followers",
            "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
            "organizations_url": "https://api.github.com/users/brunoerg/orgs",
            "repos_url": "https://api.github.com/users/brunoerg/repos",
            "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/brunoerg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 22,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26261",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26261.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26261.patch"
          },
          "closed_at": "2023-05-30T15:40:23Z",
          "created_at": "2022-10-05T16:35:08Z",
          "updated_at": "2023-05-30T15:40:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-17T08:26:18Z",
      "updated_at": "2023-01-17T08:26:18Z",
      "source": {
        "issue": {
          "id": 1261819358,
          "node_id": "PR_kwDOABII5845Km3S",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25284/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25284",
          "number": 25284,
          "state": "open",
          "state_reason": null,
          "title": "net: Use serialization parameters for CAddress serialization",
          "body": "It seems confusing that picking a wrong value for `ADDRV2_FORMAT` could have effects on consensus. (See the docstring of `ADDRV2_FORMAT`).\r\n\r\nFix this by implementing https://github.com/bitcoin/bitcoin/issues/19477#issuecomment-1147421608 .",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25284",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25284",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25284.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25284.patch"
          },
          "created_at": "2022-06-06T13:04:43Z",
          "updated_at": "2023-07-28T14:02:59Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-17T09:03:11Z",
      "updated_at": "2023-01-17T09:03:11Z",
      "source": {
        "issue": {
          "id": 1167366626,
          "node_id": "PR_kwDOABII5840WLLa",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24545",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24545/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24545/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24545/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24545",
          "number": 24545,
          "state": "closed",
          "state_reason": null,
          "title": "BIP324: Enable v2 P2P encrypted transport",
          "body": "This PR brings together all other BIP324 PRs and enables v2 encrypted P2P transport.\r\n\r\nBuilds on top of PRs: #25361, #23233, #23561, #23432. It looks like there's a lot of commits, but **only the last 12 commits belong in this PR**. The rest will be merged with upstream PRs.\r\n\r\nThe dependency tree for BIP324 PRs is [here](https://bip324.com/sections/code-review/).\r\n\r\nBIP324 is [here](https://github.com/bitcoin/bips/blob/master/bip-0324.mediawiki).\r\n\r\n### Running a v2 node\r\n#### Get the code\r\n```\r\ngit remote add bip324 git@github.com:dhruv/bitcoin.git\r\ngit fetch bip324\r\ngit checkout bip324/bip324-enable\r\n```\r\n\r\n#### Build for your OS\r\n\r\nFollow the appropriate instructions [here](https://github.com/bitcoin/bitcoin/blob/master/doc/README.md)\r\n\r\n#### Run the node\r\n\r\n```\r\nsrc/bitcoind -conf=CONFIG_FILE -v2transport=1\r\n```\r\n\r\n#### Connect with a friend's v2 node\r\n```\r\nsrc/bitcoin-cli -conf=CONFIG_FILE addnode \"FRIEND_IP:FRIEND_PORT\" \"add\" true\r\n```\r\nThe last parameter(`p2p_v2:true`) signals to your node that the peer is running a v2 supportive client and we should attempt to make an encrypted P2P connection (you're simulating the `NODE_P2P_V2` service flag advertisement manually). Should that fail however (say because the peer told you mistakenly, lied, etc.), this code will downgrade the connection to unencrypted v1 transport.\r\n\r\n### Things you are helpful to test\r\n\r\n* If your friend's node is a v2 node, you can see with wireshark that the bytes are pseudorandom (the easiest way to confirm this is that with a v1 connection, wireshark will tell you it has detected a Bitcoin connection and it'll even parse out the metadata like message type, etc; with v2, wireshark has no idea -- of course that _could_ be because wireshark does simply not know v2, but it is because the bytestream is pseudorandom)\r\n* Compare the v2 encrypted session id exposed via `getpeerinfo` as `v2_session_id` with your friend.\r\n* Add another peer that is actually v1, but try `addnode` still indicating v2 support. You should see with wireshark that after a failed attempt at a v2 handshake, the connection is downgraded to unencrypted v1 and wireshark can parse it.\r\n\r\nI've been told there are v2 nodes running at (happy to update the list as more people run persistent v2 nodes; message me and I'll add it here):\r\n```\r\nbe.anyone.eu.org\r\nrp7k2go3s5lyj3fnj6zn62ktarlrsft2ohlsxkyd7v3e3idqyptvread.onion:8333\r\njdcoysubtxazi7dketpyb5rnjorvxad4onftveohash2pdwkgw4bvnqd.onion:8333\r\nxci6cphki2pdb5qe7axzrcxcxabkbm24z4zlv2hn4ziy6grquqco2kyd.onion:8333\r\nslvtesfgg3mkksqqzh67al4sq6dx3rhlzqepa4ny7jonzuckg6msf3id.onion:8333\r\ngifm4fnj3vua664xhgeanx5fnpco3txkqy4amr4txbfsciiyrkxpf2qd.onion:8333\r\n300:5ecb:6b8a:d837::3:8333\r\n300:5ecb:6b8a:d837::a6d6:8333\r\n2001:470:1f1a:365::2:8333\r\n2001:470:1f1b:365:aa20:66ff:fe3f:1909:8333\r\n184.74.240.157:8533\r\n95.179.145.232:8333\r\n```",
          "user": {
            "login": "dhruv",
            "id": 856960,
            "node_id": "MDQ6VXNlcjg1Njk2MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dhruv",
            "html_url": "https://github.com/dhruv",
            "followers_url": "https://api.github.com/users/dhruv/followers",
            "following_url": "https://api.github.com/users/dhruv/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/dhruv/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/dhruv/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
            "organizations_url": "https://api.github.com/users/dhruv/orgs",
            "repos_url": "https://api.github.com/users/dhruv/repos",
            "events_url": "https://api.github.com/users/dhruv/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/dhruv/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 47,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24545",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24545",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24545.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24545.patch"
          },
          "closed_at": "2023-05-06T11:14:46Z",
          "created_at": "2022-03-12T18:43:06Z",
          "updated_at": "2023-05-06T11:14:46Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1251162748,
      "node_id": "PRR_kwDOABII585Kkzp8",
      "url": null,
      "actor": null,
      "commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1251162748",
      "submitted_at": "2023-01-17T09:10:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "reviewed",
      "id": 1251203682,
      "node_id": "PRR_kwDOABII585Kk9pi",
      "url": null,
      "actor": null,
      "commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1251203682",
      "submitted_at": "2023-01-17T09:34:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-17T17:14:35Z",
      "updated_at": "2023-01-17T17:14:35Z",
      "source": {
        "issue": {
          "id": 1536748974,
          "node_id": "I_kwDOABII585bmO2u",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26907",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26907/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26907/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26907/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/26907",
          "number": 26907,
          "state": "open",
          "state_reason": null,
          "title": "Expose addrman size info via RPC ",
          "body": "If #26847 gets merged, addrman will maintain counts of addresses stored on the new & tried tables, broken down by network. This is useful information for monitoring the state of our addrman when we run it with different network configs on mainnet.\r\n\r\nCurrently when running a node, we can get a rough estimate into this information using the cli argument `-addrinfo`. However, this is just an estimate because it uses the RPC endpoint `getnodeaddresses`, which calls through to `Addrman::GetAddr`. Although this logic path skips the addr caching logic we apply for results propagated to the p2p network, it still applies some logic to filter results. For example it removes addresses that meet the `IsTerrible` attributes. It also doesnâ€™t distinguish between the new and tried tables. \r\n\r\nSo, I recommend we expose the raw counts to provide a better picture of addrmanâ€™s workings, especially since addrman & network integrations are particularly hard to test via our automated tooling. We can breakdown the counts by network & new vs tried. \r\n\r\nThere are a few different options for how we can expose this information. I expect this feature to primarily be used by bitcoin core contributors or super-users that understand bitcoindâ€™s inner workings. Thus, I suggest we expose it as a new, hidden RPC. That enables exposing the information to devs without having to guarantee a stable RPC interface over future versions. The name of the RPC can be something generic like  `addrmaninfo`, to allow for future extensions for other debugging information. \r\n\r\nFor more historic context around bitcoin cliâ€™s `-addrinfo` and conversation about cli vs RPC, see [#21595](https://github.com/bitcoin/bitcoin/pull/21595).  If we do end up implementing a new RPC endpoint, we could consider reworking the cli to use these values directly rather than trying to compute them with partial information. \r\n",
          "user": {
            "login": "amitiuttarwar",
            "id": 1500952,
            "node_id": "MDQ6VXNlcjE1MDA5NTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/amitiuttarwar",
            "html_url": "https://github.com/amitiuttarwar",
            "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
            "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
            "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
            "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
            "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 1,
          "created_at": "2023-01-17T17:14:35Z",
          "updated_at": "2023-01-29T21:25:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQzNTU5NWE3OGE0YTZjYWU3MmQzMjA0YzFlYzNmODJmNzdhMTBkNTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d35595a78a4a6cae72d3204c1ec3f82f77a10d56",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d35595a78a4a6cae72d3204c1ec3f82f77a10d56",
      "tree": {
        "sha": "65c2b6e89ebb2b15857638cb78eb3e21e023f232",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65c2b6e89ebb2b15857638cb78eb3e21e023f232"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/adc41cf3b22f8f168e88ce3ad5f27c1130f12beb",
          "sha": "adc41cf3b22f8f168e88ce3ad5f27c1130f12beb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/adc41cf3b22f8f168e88ce3ad5f27c1130f12beb"
        }
      ],
      "message": "addrman: add function to return size by network and table\n\nFor now, the new functionality will be used in the context of\nquerying fixed seeds. Other possible applications for\nfuture changes is the use in the context of making automatic\nconnections to specific networks, or making more detailed info\nabout addrman accessible via rpc.",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-01-26T23:11:13Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2022-11-29T22:16:26Z"
      },
      "sha": "d35595a78a4a6cae72d3204c1ec3f82f77a10d56"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM3N2M4NzdhOGU5MTY4NzhlMDlmNjRiMmZhYTEyZWVjYTc1MjhjYzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c77c877a8e916878e09f64b2faa12eeca7528cc8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c77c877a8e916878e09f64b2faa12eeca7528cc8",
      "tree": {
        "sha": "9f5af3f199dd4a75787fe1389e126d0c769326d7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f5af3f199dd4a75787fe1389e126d0c769326d7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d35595a78a4a6cae72d3204c1ec3f82f77a10d56",
          "sha": "d35595a78a4a6cae72d3204c1ec3f82f77a10d56",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d35595a78a4a6cae72d3204c1ec3f82f77a10d56"
        }
      ],
      "message": "net: Load fixed seeds from reachable networks for which we don't have addresses\n\nPreviously, we'd only load fixed seeds if we'd not\nknow any addresses at all. This change makes it possible\nto change -onlynet abruptly, e.g. from -onlynet=onion to\n-onlynet=i2p and still find peers.",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-01-26T23:11:13Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2022-11-30T20:55:22Z"
      },
      "sha": "c77c877a8e916878e09f64b2faa12eeca7528cc8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ4ODVkNmYxOTc3MzZjYjg5ZmRmYWMyNTBiMjgwZWMxMDgyOWQ5MDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4885d6f197736cb89fdfac250b280ec10829d903",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4885d6f197736cb89fdfac250b280ec10829d903",
      "tree": {
        "sha": "a0013b40ad8c49f86db1bce238872573d414b56c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a0013b40ad8c49f86db1bce238872573d414b56c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c77c877a8e916878e09f64b2faa12eeca7528cc8",
          "sha": "c77c877a8e916878e09f64b2faa12eeca7528cc8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c77c877a8e916878e09f64b2faa12eeca7528cc8"
        }
      ],
      "message": "addrman, refactor: move count increment into Create()\n\nCreate() is only called in one spot, so this doesn't\nchange behavior.\n\nCo-authored-by: Amiti Uttarwar <amiti@uttarwar.org>",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-01-26T23:11:13Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-01-16T20:59:11Z"
      },
      "sha": "4885d6f197736cb89fdfac250b280ec10829d903"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgwZjM5Yzk5ZWYyZDMwZTNlMmQ4ZGJjMDY4ZDI1Y2Y5MmFhMzIzNDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "tree": {
        "sha": "1950ae737086c50aaf42788b740e5886e5408ae4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1950ae737086c50aaf42788b740e5886e5408ae4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4885d6f197736cb89fdfac250b280ec10829d903",
          "sha": "4885d6f197736cb89fdfac250b280ec10829d903",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4885d6f197736cb89fdfac250b280ec10829d903"
        }
      ],
      "message": "addrman, refactor: combine two size functions\n\nThe functionality of the old size() is covered by the new Size()\nwhen no arguments are specified, so this does not change behavior.\n\nCo-authored-by: Martin Zumsande <mzumsande@gmail.com>",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-01-26T23:11:13Z"
      },
      "author": {
        "name": "Amiti Uttarwar",
        "email": "amiti@uttarwar.org",
        "date": "2023-01-13T22:23:38Z"
      },
      "sha": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8368660454,
      "node_id": "HRFPE_lADOABII585a4Ph5zwAAAAHyz5_m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8368660454",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-26T23:11:39Z"
    },
    {
      "event": "commented",
      "id": 1406117438,
      "node_id": "IC_kwDOABII585Tz6Y-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1406117438",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T07:23:43Z",
      "updated_at": "2023-01-27T07:23:43Z",
      "author_association": "MEMBER",
      "body": "utACK 80f39c9",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1406117438",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "review_requested",
      "id": 8371727717,
      "node_id": "RRE_lADOABII585a4Ph5zwAAAAHy_m1l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8371727717",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T10:00:23Z",
      "requested_reviewer": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_request_removed",
      "id": 8371728984,
      "node_id": "RRRE_lADOABII585a4Ph5zwAAAAHy_nJY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8371728984",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T10:00:33Z",
      "requested_reviewer": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8371728995,
      "node_id": "RRE_lADOABII585a4Ph5zwAAAAHy_nJj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8371728995",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T10:00:33Z",
      "requested_reviewer": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 1407118794,
      "node_id": "IC_kwDOABII585T3u3K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1407118794",
      "actor": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T22:00:20Z",
      "updated_at": "2023-01-27T22:00:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 80f39c9",
      "user": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1407118794",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-29T21:25:29Z",
      "updated_at": "2023-01-29T21:25:29Z",
      "source": {
        "issue": {
          "id": 1561462605,
          "node_id": "PR_kwDOABII585Iw37r",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26988",
          "number": 26988,
          "state": "open",
          "state_reason": null,
          "title": "cli: rework -addrinfo cli to use addresses which arenâ€™t filtered for quality/recency",
          "body": "implements https://github.com/bitcoin/bitcoin/issues/26907.  built on top of https://github.com/bitcoin/bitcoin/pull/27511.\r\n\r\nRework of `-addrinfo` CLI is done using `getaddrmaninfo` RPC proposed in https://github.com/bitcoin/bitcoin/pull/27511. This would be useful for users who want to know the total number of addresses the node knows about and can make connections to. \r\n\r\nCurrently, `-addrinfo` returns total number of addresses the node knows about after filtering them for quality + recency using [`isTerrible`](https://github.com/bitcoin/bitcoin/blob/4b51290f719559b8506425177f7758abe66fe2c3/src/addrman.cpp#L808). However `isTerrible`addresses [don't matter](https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1147725684) when selecting outbound peers to connect to. Total number of addresses the node knows about could be higher than what `-addrinfo` currently displays. See https://github.com/bitcoin/bitcoin/pull/24370.",
          "user": {
            "login": "stratospher",
            "id": 44024636,
            "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stratospher",
            "html_url": "https://github.com/stratospher",
            "followers_url": "https://api.github.com/users/stratospher/followers",
            "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
            "organizations_url": "https://api.github.com/users/stratospher/orgs",
            "repos_url": "https://api.github.com/users/stratospher/repos",
            "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stratospher/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 16,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26988",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26988",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26988.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26988.patch"
          },
          "created_at": "2023-01-29T21:25:28Z",
          "updated_at": "2023-07-30T06:15:19Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1275192707,
      "node_id": "PRR_kwDOABII585MAeWD",
      "url": null,
      "actor": null,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#pullrequestreview-1275192707",
      "submitted_at": "2023-01-30T13:46:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
    },
    {
      "event": "commented",
      "id": 1411057005,
      "node_id": "IC_kwDOABII585UGwVt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1411057005",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-31T20:55:28Z",
      "updated_at": "2023-01-31T20:55:28Z",
      "author_association": "MEMBER",
      "body": "ACK 80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1411057005",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "merged",
      "id": 8403818257,
      "node_id": "ME_lADOABII585a4Ph5zwAAAAH06BcR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8403818257",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ba3d32715f985314eb1fdb006bfc4127f8d516a7",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ba3d32715f985314eb1fdb006bfc4127f8d516a7",
      "created_at": "2023-01-31T21:09:02Z"
    },
    {
      "event": "closed",
      "id": 8403818286,
      "node_id": "CE_lADOABII585a4Ph5zwAAAAH06Bcu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8403818286",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-31T21:09:02Z"
    },
    {
      "event": "referenced",
      "id": 8405371440,
      "node_id": "REFE_lADOABII585a4Ph5zwAAAAH0_8ow",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8405371440",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6df4c23cbc2d948fa828bff683ba60af31d9c331",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/6df4c23cbc2d948fa828bff683ba60af31d9c331",
      "created_at": "2023-02-01T01:40:15Z"
    },
    {
      "event": "commented",
      "id": 1411458339,
      "node_id": "IC_kwDOABII585UISUj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1411458339",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-01T04:48:23Z",
      "updated_at": "2023-02-01T05:18:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "I just noticed that this can lead to intermittent failures of the `load_addrman_corrupted` unit test, while checking the size in\r\nhttps://github.com/bitcoin/bitcoin/blob/ba3d32715f985314eb1fdb006bfc4127f8d516a7/src/test/addrman_tests.cpp#L951 the internal checks fail (that weren't executed for `Size()` before this PR, and now are executed in some runs). I think it might be best to just remove this line from the test, since this is a situation where we purposefully load a corrupted `peers.dat` - seems a good thing that the Addrman Check fails then... I will open a PR tomorrow.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1411458339",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26847"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-01T15:41:58Z",
      "updated_at": "2023-02-01T15:41:58Z",
      "source": {
        "issue": {
          "id": 1566345159,
          "node_id": "PR_kwDOABII585JBUUF",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27015",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27015/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27015/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27015/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27015",
          "number": 27015,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: 26847 fixups (AddrMan totals)",
          "body": "Two fixups for #26847:\r\n* Now that `AddrMan::Size()` performs internal consistency tests (it didn't before), we can't call it in the `load_addrman_corrupted` unit tests, where we deal with an artificially corrupted `AddrMan`. This would fail the test when using `-checkaddrman=1` (leading to spurious CI fails). Therefore remove the tests assertion, which is not particularly helpful anyway (in production we abort init when peers.dat is corrupted instead of querying AddrMan in its corrupted state).  \r\n (See https://github.com/bitcoin/bitcoin/pull/26847#issuecomment-1411458339)\r\n* Use `std::nullopt` instead of `{}` for default args (suggested in https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1090643603)",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27015",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27015",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27015.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27015.patch"
          },
          "closed_at": "2023-02-01T15:56:57Z",
          "created_at": "2023-02-01T15:41:58Z",
          "updated_at": "2023-05-04T16:40:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 8411948458,
      "node_id": "REFE_lADOABII585a4Ph5zwAAAAH1ZCWq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8411948458",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2d5acc901db336868dee158022a115b120b5b675",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/2d5acc901db336868dee158022a115b120b5b675",
      "created_at": "2023-02-01T15:56:56Z"
    },
    {
      "event": "referenced",
      "id": 8414000258,
      "node_id": "REFE_lADOABII585a4Ph5zwAAAAH1g3SC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8414000258",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4732901cd53e28de30e18bc01f31691d84436bff",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/4732901cd53e28de30e18bc01f31691d84436bff",
      "created_at": "2023-02-01T19:40:40Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "rajarshimaitra",
        "id": 36541669,
        "node_id": "MDQ6VXNlcjM2NTQxNjY5",
        "avatar_url": "https://avatars.githubusercontent.com/u/36541669?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rajarshimaitra",
        "html_url": "https://github.com/rajarshimaitra",
        "followers_url": "https://api.github.com/users/rajarshimaitra/followers",
        "following_url": "https://api.github.com/users/rajarshimaitra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rajarshimaitra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rajarshimaitra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rajarshimaitra/subscriptions",
        "organizations_url": "https://api.github.com/users/rajarshimaitra/orgs",
        "repos_url": "https://api.github.com/users/rajarshimaitra/repos",
        "events_url": "https://api.github.com/users/rajarshimaitra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rajarshimaitra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-13T07:34:49Z",
      "updated_at": "2023-02-13T07:34:49Z",
      "source": {
        "issue": {
          "id": 1581817982,
          "node_id": "I_kwDOId2vBM5eSKB-",
          "url": "https://api.github.com/repos/Bitshala/Bitcoin-PR-Review-Club/issues/11",
          "repository_url": "https://api.github.com/repos/Bitshala/Bitcoin-PR-Review-Club",
          "labels_url": "https://api.github.com/repos/Bitshala/Bitcoin-PR-Review-Club/issues/11/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/Bitshala/Bitcoin-PR-Review-Club/issues/11/comments",
          "events_url": "https://api.github.com/repos/Bitshala/Bitcoin-PR-Review-Club/issues/11/events",
          "html_url": "https://github.com/Bitshala/Bitcoin-PR-Review-Club/issues/11",
          "number": 11,
          "state": "closed",
          "state_reason": "completed",
          "title": " p2p: track AddrMan totals by network and table, improve precision of adding fixed seeds #26847 ",
          "body": "### Session Details\r\n- Date: 16-02-2023\r\n- Time: IST 20:00 (UTC 14:30)\r\n- PR: https://github.com/bitcoin/bitcoin/pull/26847\r\n- Context: `[net][addrs_manager]`\r\n- Difficulty: Moderate\r\n- Language: `[c++]`\r\n- Notes and Questions: https://bitcoincore.reviews/26847\r\n\r\n### Summary\r\nThis PR adds internal tracking of the totals by network and table to AddrMan and adds this information to its public interface.\r\n\r\n### Learnings\r\n - P2P network addresses.\r\n - Node's address management system.\r\n - How a node maintains address diversity.\r\n - Network-level attack vectors. ",
          "user": {
            "login": "rajarshimaitra",
            "id": 36541669,
            "node_id": "MDQ6VXNlcjM2NTQxNjY5",
            "avatar_url": "https://avatars.githubusercontent.com/u/36541669?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rajarshimaitra",
            "html_url": "https://github.com/rajarshimaitra",
            "followers_url": "https://api.github.com/users/rajarshimaitra/followers",
            "following_url": "https://api.github.com/users/rajarshimaitra/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/rajarshimaitra/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/rajarshimaitra/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/rajarshimaitra/subscriptions",
            "organizations_url": "https://api.github.com/users/rajarshimaitra/orgs",
            "repos_url": "https://api.github.com/users/rajarshimaitra/repos",
            "events_url": "https://api.github.com/users/rajarshimaitra/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/rajarshimaitra/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 0,
          "closed_at": "2023-02-21T06:02:54Z",
          "created_at": "2023-02-13T07:34:49Z",
          "updated_at": "2023-02-21T06:02:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-24T14:00:29Z",
      "updated_at": "2023-02-24T14:00:29Z",
      "source": {
        "issue": {
          "id": 1597170393,
          "node_id": "I_kwDOGDlZec5fMuLZ",
          "url": "https://api.github.com/repos/londonbitdevs/londonbitdevs-website/issues/9",
          "repository_url": "https://api.github.com/repos/londonbitdevs/londonbitdevs-website",
          "labels_url": "https://api.github.com/repos/londonbitdevs/londonbitdevs-website/issues/9/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/londonbitdevs/londonbitdevs-website/issues/9/comments",
          "events_url": "https://api.github.com/repos/londonbitdevs/londonbitdevs-website/issues/9/events",
          "html_url": "https://github.com/londonbitdevs/londonbitdevs-website/issues/9",
          "number": 9,
          "state": "closed",
          "state_reason": "completed",
          "title": "Socratic Seminar #22 Topics",
          "body": "Gathering topics to discuss.\r\nCategories:\r\n-    News\r\n-    New Work/Research, ML posts\r\n-    Bitcoin Projects\r\n-    Lightning Projects\r\n-    Client Software Projects\r\n",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 7,
          "closed_at": "2023-02-27T17:34:04Z",
          "created_at": "2023-02-23T16:30:25Z",
          "updated_at": "2023-02-27T17:34:04Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064365792",
      "pull_request_review_id": 1240065749,
      "id": 1064365792,
      "node_id": "PRRC_kwDOABII584_cO7g",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {\n+        return -20;",
      "path": "src/addrman.cpp",
      "position": 132,
      "original_position": 108,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps it's a good opportunity to start using a named variable? :)",
      "created_at": "2023-01-09T08:11:01Z",
      "updated_at": "2023-01-09T08:11:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1064365792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064365792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1104,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064367448",
      "pull_request_review_id": 1240068367,
      "id": 1064367448,
      "node_id": "PRRC_kwDOABII584_cPVY",
      "diff_hunk": "@@ -962,6 +970,32 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else if (in_new == true) {\n+            return nNew;\n+        } else {\n+            return nTried;\n+        }\n+    }\n+    if (auto it = map_counts.find(*net); it != map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else if (in_new == true) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 85,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Here and above, maybe use `return (in_new == true) ? entry.first : entry.second;`?",
      "created_at": "2023-01-09T08:13:27Z",
      "updated_at": "2023-01-09T08:13:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1064367448",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064367448"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 990,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064368601",
      "pull_request_review_id": 1240070044,
      "id": 1064368601,
      "node_id": "PRRC_kwDOABII584_cPnZ",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 107,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Given this dependency, should we drop `nNew` and `nTried` altogether?",
      "created_at": "2023-01-09T08:15:02Z",
      "updated_at": "2023-01-09T08:15:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1064368601",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064368601"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064372051",
      "pull_request_review_id": 1240075440,
      "id": 1064372051,
      "node_id": "PRRC_kwDOABII584_cQdT",
      "diff_hunk": "@@ -969,6 +969,12 @@ class CConnman\n     void RecordBytesRecv(uint64_t bytes);\n     void RecordBytesSent(uint64_t bytes) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n \n+    /**\n+     Return networks for which we have no addresses in addrman and therefore\n+     may require loading fixed seeds.\n+     */\n+    std::vector<Network> GetFixedSeedNetworks() const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 8,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "85dc0c97349d3264691cab7419154fabb80bc9c4",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wish `for which we have no addresses` was captured by the function name somehow. Perhaps `GetRelevantFixedSeedNetworks`?",
      "created_at": "2023-01-09T08:20:06Z",
      "updated_at": "2023-01-09T08:20:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1064372051",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1064372051"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 976,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065038961",
      "pull_request_review_id": 1241097493,
      "id": 1065038961,
      "node_id": "PRRC_kwDOABII584_ezRx",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {\n+        return -20;",
      "path": "src/addrman.cpp",
      "position": 132,
      "original_position": 108,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064365792,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Do you mean getting rid of the return codes and return something like error strings instead? \r\nHmm, not sure if this wouldn't better be a separate PR.",
      "created_at": "2023-01-09T19:41:18Z",
      "updated_at": "2023-01-09T19:41:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065038961",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065038961"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1104,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065039499",
      "pull_request_review_id": 1241098298,
      "id": 1065039499,
      "node_id": "PRRC_kwDOABII584_ezaL",
      "diff_hunk": "@@ -962,6 +970,32 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else if (in_new == true) {\n+            return nNew;\n+        } else {\n+            return nTried;\n+        }\n+    }\n+    if (auto it = map_counts.find(*net); it != map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else if (in_new == true) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 85,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064367448,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Changed it to the ternary operator.",
      "created_at": "2023-01-09T19:41:58Z",
      "updated_at": "2023-01-09T19:41:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065039499",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065039499"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 990,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065041916",
      "pull_request_review_id": 1241101888,
      "id": 1065041916,
      "node_id": "PRRC_kwDOABII584_ez_8",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 107,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064368601,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": " I think that's not so straightforward - `nNew` and `nTried` are part of the serialization after all. Also, I don't like that then we'd need to build the sum over all networks every time we needed `nNew` or `nTried` (as the check code does).",
      "created_at": "2023-01-09T19:45:03Z",
      "updated_at": "2023-01-09T19:45:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065041916",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065041916"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065042665",
      "pull_request_review_id": 1241102998,
      "id": 1065042665,
      "node_id": "PRRC_kwDOABII584_e0Lp",
      "diff_hunk": "@@ -969,6 +969,12 @@ class CConnman\n     void RecordBytesRecv(uint64_t bytes);\n     void RecordBytesSent(uint64_t bytes) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n \n+    /**\n+     Return networks for which we have no addresses in addrman and therefore\n+     may require loading fixed seeds.\n+     */\n+    std::vector<Network> GetFixedSeedNetworks() const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 8,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "85dc0c97349d3264691cab7419154fabb80bc9c4",
      "in_reply_to_id": 1064372051,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Renamed it, pretty sure I even used that name in an earlier iteration.",
      "created_at": "2023-01-09T19:46:00Z",
      "updated_at": "2023-01-09T19:46:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065042665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065042665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 976,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065145002",
      "pull_request_review_id": 1241260431,
      "id": 1065145002,
      "node_id": "PRRC_kwDOABII584_fNKq",
      "diff_hunk": "@@ -1065,6 +1095,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 97,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: maybe use `size_t`  for these two variables, as the values being summed are `size_t` as well. I realize you can't actually build an addrman with enough entries to exceed `int`, but I feel it's better to be consistent.",
      "created_at": "2023-01-09T21:58:42Z",
      "updated_at": "2023-01-09T22:05:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065145002",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065145002"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1098,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065148163",
      "pull_request_review_id": 1241260431,
      "id": 1065148163,
      "node_id": "PRRC_kwDOABII584_fN8D",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return (in_new == true) ? nNew : nTried;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 76,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: `return *in_new ? nNew : nTried;` ?",
      "created_at": "2023-01-09T22:03:15Z",
      "updated_at": "2023-01-09T22:05:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065148163",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065148163"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 981,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065148700",
      "pull_request_review_id": 1241260431,
      "id": 1065148700,
      "node_id": "PRRC_kwDOABII584_fOEc",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return (in_new == true) ? nNew : nTried;\n+        }\n+    }\n+    if (auto it = map_counts.find(*net); it != map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else {\n+            return (in_new == true) ? entry.first : entry.second;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: `return *in_new ? entry.first : entry.second;`?",
      "created_at": "2023-01-09T22:03:54Z",
      "updated_at": "2023-01-09T22:05:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065148700",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065148700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 989,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065149504",
      "pull_request_review_id": 1241260431,
      "id": 1065149504,
      "node_id": "PRRC_kwDOABII584_fORA",
      "diff_hunk": "@@ -1065,6 +1095,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 99,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It'd be good if the sanity check here actually recomputed the totals per-network (by iterating over the actual addrman entries).",
      "created_at": "2023-01-09T22:05:06Z",
      "updated_at": "2023-01-09T22:05:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065149504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065149504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065149908",
      "pull_request_review_id": 1241260431,
      "id": 1065149908,
      "node_id": "PRRC_kwDOABII584_fOXU",
      "diff_hunk": "@@ -215,6 +217,9 @@ class AddrManImpl\n     /** Reference to the netgroup manager. netgroupman must be constructed before addrman and destructed after. */\n     const NetGroupManager& m_netgroupman;\n \n+    /** Number of entries in addrman per network and new/tried table. */\n+    std::unordered_map<Network, std::pair<size_t, size_t>> map_counts GUARDED_BY(cs);",
      "path": "src/addrman_impl.h",
      "position": null,
      "original_position": 14,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: naming convention? `m_map_counts`",
      "created_at": "2023-01-09T22:05:44Z",
      "updated_at": "2023-01-09T22:05:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065149908",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065149908"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065468195",
      "pull_request_review_id": 1241722435,
      "id": 1065468195,
      "node_id": "PRRC_kwDOABII584_gcEj",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {\n+        return -20;",
      "path": "src/addrman.cpp",
      "position": 132,
      "original_position": 108,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064365792,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I was thinking not touching the legacy code, but for the newly added `-20` create an enum. And the legacy codes could be replaced later on. This is not very important to me, feel free to resolve if you don't like the idea. ",
      "created_at": "2023-01-10T08:29:46Z",
      "updated_at": "2023-01-10T08:29:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065468195",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065468195"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1104,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065477668",
      "pull_request_review_id": 1241740573,
      "id": 1065477668,
      "node_id": "PRRC_kwDOABII584_geYk",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 107,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064368601,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": ">Also, I don't like that then we'd need to build the sum over all networks every time we needed nNew or nTried (as the check code does).\r\n\r\nWell, I don't think something being inside the `Check` is a good justification â€”Â it's the other way around, `Check` is needed to make sure those values are sane. Furthermore, the sum over all networks is 5 addition operations, right? \r\n\r\nHowever, I agree that dropping these values might be not trivial due to serialization. Not sure I'll find time to prototype that, but maybe someone will :) Otherwise feel free to close this suggestion.",
      "created_at": "2023-01-10T08:39:15Z",
      "updated_at": "2023-01-10T08:39:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065477668",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065477668"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065478186",
      "pull_request_review_id": 1241741175,
      "id": 1065478186,
      "node_id": "PRRC_kwDOABII584_gegq",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 107,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064368601,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Also, see [this](https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065149504) :)",
      "created_at": "2023-01-10T08:39:40Z",
      "updated_at": "2023-01-10T08:39:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1065478186",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1065478186"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1066265014",
      "pull_request_review_id": 1242887023,
      "id": 1066265014,
      "node_id": "PRRC_kwDOABII584_jem2",
      "diff_hunk": "@@ -1065,6 +1095,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 97,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": 1065145002,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That would get me a compiler warning `comparison of integer expressions of different signedness`, since `nNew` and `nTried` are `int`. But I'll change the sanity check to compare with the actual totals instead of `nNew` and `nTried`, as suggested by you below.",
      "created_at": "2023-01-10T20:03:42Z",
      "updated_at": "2023-01-10T20:03:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1066265014",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1066265014"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1098,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067506204",
      "pull_request_review_id": 1244685255,
      "id": 1067506204,
      "node_id": "PRRC_kwDOABII584_oNoc",
      "diff_hunk": "@@ -215,6 +217,9 @@ class AddrManImpl\n     /** Reference to the netgroup manager. netgroupman must be constructed before addrman and destructed after. */\n     const NetGroupManager& m_netgroupman;\n \n+    /** Number of entries in addrman per network and new/tried table. */\n+    std::unordered_map<Network, std::pair<size_t, size_t>> map_counts GUARDED_BY(cs);",
      "path": "src/addrman_impl.h",
      "position": null,
      "original_position": 14,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": 1065149908,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "renamed",
      "created_at": "2023-01-11T22:11:50Z",
      "updated_at": "2023-01-11T22:11:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067506204",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067506204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067506371",
      "pull_request_review_id": 1244685517,
      "id": 1067506371,
      "node_id": "PRRC_kwDOABII584_oNrD",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return (in_new == true) ? nNew : nTried;\n+        }\n+    }\n+    if (auto it = map_counts.find(*net); it != map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else {\n+            return (in_new == true) ? entry.first : entry.second;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": 1065148700,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-01-11T22:12:05Z",
      "updated_at": "2023-01-11T22:12:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067506371",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067506371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 989,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067506439",
      "pull_request_review_id": 1244685627,
      "id": 1067506439,
      "node_id": "PRRC_kwDOABII584_oNsH",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return (in_new == true) ? nNew : nTried;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 76,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": 1065148163,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-01-11T22:12:11Z",
      "updated_at": "2023-01-11T22:12:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067506439",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067506439"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 981,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067509698",
      "pull_request_review_id": 1244693417,
      "id": 1067509698,
      "node_id": "PRRC_kwDOABII584_oOfC",
      "diff_hunk": "@@ -1065,6 +1095,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 99,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "4b06a304db36553118756aabf30bad9440909d9a",
      "in_reply_to_id": 1065149504,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I changed this to actually recompute the totals - while doing so I noticed that it is possible that it's possible that there are \"empty\" entries  (0 new and 0 tried) in `m_map_counts` if an addr of some network was first added and later removed again from. That's not a problem in my opinion, but it means that the size of the map is not necessarily reliable. The changed check should work with this, potentially also adding an entry empty to `local_counts`.",
      "created_at": "2023-01-11T22:17:16Z",
      "updated_at": "2023-01-11T22:17:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067509698",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067509698"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1100,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067510907",
      "pull_request_review_id": 1244697141,
      "id": 1067510907,
      "node_id": "PRRC_kwDOABII584_oOx7",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {\n+        return -20;",
      "path": "src/addrman.cpp",
      "position": 132,
      "original_position": 108,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064365792,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok - I think refactoring the codes might make sense, but if so I'd prefer to do this everywhere at once (and in a separate refactoring PR) ",
      "created_at": "2023-01-11T22:19:13Z",
      "updated_at": "2023-01-11T22:19:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067510907",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067510907"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1104,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067515092",
      "pull_request_review_id": 1244701304,
      "id": 1067515092,
      "node_id": "PRRC_kwDOABII584_oPzU",
      "diff_hunk": "@@ -1065,6 +1099,15 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    int cnt_new{0};\n+    int cnt_tried{0};\n+    for (auto net : map_counts) {\n+        cnt_new += net.second.first;\n+        cnt_tried += net.second.second;\n+    }\n+    if (cnt_new != nNew || cnt_tried != nTried) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 107,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "db92c1bb6c82ce01976745087c961874aaba2880",
      "in_reply_to_id": 1064368601,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've changed the check such that it no longer compares with `nNew` and `nTried` but does a recount, see below for more context (of course the relation is still there...).",
      "created_at": "2023-01-11T22:23:35Z",
      "updated_at": "2023-01-11T22:23:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067515092",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067515092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067812969",
      "pull_request_review_id": 1245128332,
      "id": 1067812969,
      "node_id": "PRRC_kwDOABII584_pYhp",
      "diff_hunk": "@@ -102,6 +102,13 @@ class AddrMan\n     //! Return the number of (unique) addresses in all tables.\n     size_t size() const;\n \n+    /**\n+    * Return the number of (unique) addresses, optionally filtered by network",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 5,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What do you mean by unique here? How they could not be unique?",
      "created_at": "2023-01-12T08:09:06Z",
      "updated_at": "2023-01-12T08:09:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067812969",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067812969"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067822456",
      "pull_request_review_id": 1245142323,
      "id": 1067822456,
      "node_id": "PRRC_kwDOABII584_pa14",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_map_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_map_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_map_counts) {\n+        if (local_counts[net].first != count.first || local_counts[net].second != count.second) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is probably too crazy, but I was thinking what if these values overflow (from ++) and are not equal anymore due to UB? I'm actually not sure what's our attitude towards such risks across the code.",
      "created_at": "2023-01-12T08:20:15Z",
      "updated_at": "2023-01-12T08:20:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1067822456",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1067822456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068261380",
      "pull_request_review_id": 1245819183,
      "id": 1068261380,
      "node_id": "PRRC_kwDOABII584_rGAE",
      "diff_hunk": "@@ -102,6 +102,13 @@ class AddrMan\n     //! Return the number of (unique) addresses in all tables.\n     size_t size() const;\n \n+    /**\n+    * Return the number of (unique) addresses, optionally filtered by network",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 5,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1067812969,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I copied it from the line above - it means that addresses with multiple occurrences (they can be in up to 8 different spots in the new tables) are counted only once.",
      "created_at": "2023-01-12T15:24:37Z",
      "updated_at": "2023-01-12T15:24:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1068261380",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068261380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068311766",
      "pull_request_review_id": 1245903055,
      "id": 1068311766,
      "node_id": "PRRC_kwDOABII584_rSTW",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_map_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_map_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_map_counts) {\n+        if (local_counts[net].first != count.first || local_counts[net].second != count.second) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1067822456,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, It definitely shouldn't be possible and would mean that there is a serious bug in addrman, but I think that within the `Check()` code, we definitely want to abort. After all, `Check()`  doesn't normally run in production (`DEFAULT_ADDRMAN_CONSISTENCY_CHECKS == 0`) and needs to be activated by the user.",
      "created_at": "2023-01-12T16:05:11Z",
      "updated_at": "2023-01-12T16:05:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1068311766",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068311766"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069508106",
      "pull_request_review_id": 1247703211,
      "id": 1069508106,
      "node_id": "PRRC_kwDOABII584_v2YK",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: should be `Size_()` according to `doc/developer-notes.md` (and the wrapper `Size()`). I know there is already an existent `size()` which you probably wanted to be consistent with. Maybe rename that to match the coding style?",
      "created_at": "2023-01-13T14:12:27Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069508106",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069508106"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 973,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069511892",
      "pull_request_review_id": 1247703211,
      "id": 1069511892,
      "node_id": "PRRC_kwDOABII584_v3TU",
      "diff_hunk": "@@ -986,6 +1016,7 @@ int AddrManImpl::CheckAddrman() const\n \n     std::unordered_set<int> setTried;\n     std::unordered_map<int, int> mapNew;\n+    std::unordered_map<Network, std::pair<size_t, size_t>> local_counts;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 97,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Feel free to ignore. It is ok as it is, but I find code like the following a bit unreadable:\r\n\r\n```cpp\r\nx = it->second;\r\nx.first = 5;\r\nx.second = 6;\r\n// or it->second.first = 000;\r\n```\r\n\r\nConsider:\r\n\r\n```cpp\r\nstruct NewTriedCount {\r\n    size_t n_new;\r\n    size_t n_tried;\r\n};\r\nstd::unordered_map<Network, NewTriedCount> local_counts;\r\n```\r\n\r\nJust to give more meaningful names to those obscure `first` and `second`.",
      "created_at": "2023-01-13T14:16:13Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069511892",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069511892"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069514507",
      "pull_request_review_id": 1247703211,
      "id": 1069514507,
      "node_id": "PRRC_kwDOABII584_v38L",
      "diff_hunk": "@@ -1074,6 +1118,15 @@ size_t AddrManImpl::size() const\n     return vRandom.size();\n }\n \n+size_t AddrManImpl::size(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    LOCK(cs);\n+    Check();\n+    auto ret = size_(net, in_new);\n+    Check();",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 143,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is `Check()` needed before and after, given that `size_()` is a `const` method?",
      "created_at": "2023-01-13T14:18:33Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069514507",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069514507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1124,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069525993",
      "pull_request_review_id": 1247703211,
      "id": 1069525993,
      "node_id": "PRRC_kwDOABII584_v6vp",
      "diff_hunk": "@@ -990,4 +990,42 @@ BOOST_AUTO_TEST_CASE(addrman_update_address)\n     BOOST_CHECK_EQUAL(vAddr2.at(0).nServices, NODE_NETWORK_LIMITED);\n }\n \n+BOOST_AUTO_TEST_CASE(addrman_size)\n+{\n+    auto addrman = std::make_unique<AddrMan>(EMPTY_NETGROUPMAN, DETERMINISTIC, GetCheckRatio(m_node));\n+    CNetAddr source = ResolveIP(\"252.2.2.2\");\n+\n+    // empty addrman\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/std::nullopt, /*in_new=*/std::nullopt), 0U);\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/NET_IPV4, /*in_new=*/std::nullopt), 0U);\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/std::nullopt, /*in_new=*/true), 0U);\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/NET_IPV4, /*in_new=*/false), 0U);\n+\n+    // add two ipv4 addresses, one to tried and new\n+    CAddress addr1{CAddress(ResolveService(\"250.1.1.1\", 8333), NODE_NONE)};\n+    BOOST_CHECK(addrman->Add({addr1}, source));\n+    BOOST_CHECK(addrman->Good(addr1));\n+    CAddress addr2{CAddress(ResolveService(\"250.1.1.1\", 8333), NODE_NONE)};\n+    BOOST_CHECK(addrman->Add({CAddress(ResolveService(\"250.1.1.2\", 8333), NODE_NONE)}, source));",
      "path": "src/test/addrman_tests.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`addr2` is unused. Probably you meant:\r\n```suggestion\r\n    CAddress addr2{CAddress(ResolveService(\"250.1.1.2\", 8333), NODE_NONE)};\r\n    BOOST_CHECK(addrman->Add({addr2}, source));\r\n```\r\n\r\n`addr1`, `addr2` and `addr3` below can be `const`.",
      "created_at": "2023-01-13T14:28:53Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069525993",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069525993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1008,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1009,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069531417",
      "pull_request_review_id": 1247703211,
      "id": 1069531417,
      "node_id": "PRRC_kwDOABII584_v8EZ",
      "diff_hunk": "@@ -990,4 +990,42 @@ BOOST_AUTO_TEST_CASE(addrman_update_address)\n     BOOST_CHECK_EQUAL(vAddr2.at(0).nServices, NODE_NETWORK_LIMITED);\n }\n \n+BOOST_AUTO_TEST_CASE(addrman_size)\n+{\n+    auto addrman = std::make_unique<AddrMan>(EMPTY_NETGROUPMAN, DETERMINISTIC, GetCheckRatio(m_node));\n+    CNetAddr source = ResolveIP(\"252.2.2.2\");\n+\n+    // empty addrman\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/std::nullopt, /*in_new=*/std::nullopt), 0U);\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/NET_IPV4, /*in_new=*/std::nullopt), 0U);\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/std::nullopt, /*in_new=*/true), 0U);\n+    BOOST_CHECK_EQUAL(addrman->size(/*net=*/NET_IPV4, /*in_new=*/false), 0U);\n+\n+    // add two ipv4 addresses, one to tried and new\n+    CAddress addr1{CAddress(ResolveService(\"250.1.1.1\", 8333), NODE_NONE)};",
      "path": "src/test/addrman_tests.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `CAddress addr1{CAddress(...)};` is equivalent to: `CAddress addr1{...};`",
      "created_at": "2023-01-13T14:33:55Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069531417",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069531417"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1005,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069566173",
      "pull_request_review_id": 1247703211,
      "id": 1069566173,
      "node_id": "PRRC_kwDOABII584_wEjd",
      "diff_hunk": "@@ -1650,14 +1664,12 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 // We will not make outgoing connections to peers that are unreachable\n                 // (e.g. because of -onlynet configuration).\n                 // Therefore, we do not add them to addrman in the first place.\n-                // Note that if you change -onlynet setting from one network to another,\n-                // peers.dat will contain only peers of unreachable networks and\n-                // manual intervention will be needed (either delete peers.dat after\n-                // configuration change or manually add some reachable peer using addnode),\n-                // see <https://github.com/bitcoin/bitcoin/issues/26035> for details.\n+                // In case previously unreachable networks become reachable\n+                // (e.g. in case of -onlynet changes by the user), fixed seeds will\n+                // be loaded only for networks for which no we have no addressses.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n```suggestion\r\n                // be loaded only for networks for which we have no addressses.\r\n```",
      "created_at": "2023-01-13T15:05:19Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069566173",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069566173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1669,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069571899",
      "pull_request_review_id": 1247703211,
      "id": 1069571899,
      "node_id": "PRRC_kwDOABII584_wF87",
      "diff_hunk": "@@ -1650,14 +1664,12 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 // We will not make outgoing connections to peers that are unreachable\n                 // (e.g. because of -onlynet configuration).\n                 // Therefore, we do not add them to addrman in the first place.\n-                // Note that if you change -onlynet setting from one network to another,\n-                // peers.dat will contain only peers of unreachable networks and\n-                // manual intervention will be needed (either delete peers.dat after\n-                // configuration change or manually add some reachable peer using addnode),\n-                // see <https://github.com/bitcoin/bitcoin/issues/26035> for details.\n+                // In case previously unreachable networks become reachable\n+                // (e.g. in case of -onlynet changes by the user), fixed seeds will\n+                // be loaded only for networks for which no we have no addressses.\n                 seed_addrs.erase(std::remove_if(seed_addrs.begin(), seed_addrs.end(),\n-                                               [](const CAddress& addr) { return !IsReachable(addr); }),\n-                                seed_addrs.end());\n+                                                [fixed_seed_networks](const CAddress& addr) { return std::find(fixed_seed_networks.begin(), fixed_seed_networks.end(), addr.GetNetwork()) == fixed_seed_networks.end(); }),",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "A vector is usually not cheap to copy. Better capture it by reference:\r\n```suggestion\r\n                                                [&fixed_seed_networks](const CAddress& addr) { return std::find(fixed_seed_networks.begin(), fixed_seed_networks.end(), addr.GetNetwork()) == fixed_seed_networks.end(); }),\r\n```",
      "created_at": "2023-01-13T15:10:37Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069571899",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069571899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069576904",
      "pull_request_review_id": 1247703211,
      "id": 1069576904,
      "node_id": "PRRC_kwDOABII584_wHLI",
      "diff_hunk": "@@ -1650,14 +1664,12 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 // We will not make outgoing connections to peers that are unreachable\n                 // (e.g. because of -onlynet configuration).\n                 // Therefore, we do not add them to addrman in the first place.\n-                // Note that if you change -onlynet setting from one network to another,\n-                // peers.dat will contain only peers of unreachable networks and\n-                // manual intervention will be needed (either delete peers.dat after\n-                // configuration change or manually add some reachable peer using addnode),\n-                // see <https://github.com/bitcoin/bitcoin/issues/26035> for details.\n+                // In case previously unreachable networks become reachable\n+                // (e.g. in case of -onlynet changes by the user), fixed seeds will\n+                // be loaded only for networks for which no we have no addressses.\n                 seed_addrs.erase(std::remove_if(seed_addrs.begin(), seed_addrs.end(),\n-                                               [](const CAddress& addr) { return !IsReachable(addr); }),\n-                                seed_addrs.end());\n+                                                [fixed_seed_networks](const CAddress& addr) { return std::find(fixed_seed_networks.begin(), fixed_seed_networks.end(), addr.GetNetwork()) == fixed_seed_networks.end(); }),",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This will iterate `fixed_seed_networks` for every seed address: `O(num_addresses * num_networks)`. I know the list of networks is tiny and this can probably be ignored wrt performance, but it can easily be made `O(num_addresses)`. Also, if `std::unordered_set` is used, the code will be shorter:\r\n\r\n```cpp\r\nstd::find(fixed_seed_networks.begin(), fixed_seed_networks.end(), addr.GetNetwork()) == fixed_seed_networks.end();\r\n```\r\n\r\nwould become:\r\n\r\n```cpp\r\nfixed_seed_networks.count(addr.GetNetwork()) == 0;\r\n```",
      "created_at": "2023-01-13T15:15:05Z",
      "updated_at": "2023-01-13T15:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069576904",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069576904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069598095",
      "pull_request_review_id": 1247703211,
      "id": 1069598095,
      "node_id": "PRRC_kwDOABII584_wMWP",
      "diff_hunk": "@@ -1575,6 +1575,19 @@ int CConnman::GetExtraBlockRelayCount() const\n     return std::max(block_relay_peers - m_max_outbound_block_relay, 0);\n }\n \n+std::vector<Network> CConnman::GetRelevantFixedSeedNetworks() const\n+{\n+    std::vector<Network> networks{};\n+    for (int n = 0; n < NET_MAX; n++) {\n+        enum Network net = (enum Network)n;\n+        if (net == NET_UNROUTABLE || net == NET_INTERNAL) continue;\n+        if (IsReachable(net) && addrman.size(net, std::nullopt) == 0) {\n+            networks.push_back(net);\n+        }\n+    }\n+    return networks;\n+}",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This does not need to be a method of `CConnman` because it does not access any of its members (other than `addrman`). Would it be more appropriate to have it as `AddrMan` method? Then the public interface of `AddrMan` need not be changed by this PR. Edit: I mean no need to add this `AddrMan` method `size(std::optional<Network> net, std::optional<bool> in_new)`.",
      "created_at": "2023-01-13T15:32:59Z",
      "updated_at": "2023-01-13T15:38:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1069598095",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1069598095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1578,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1589,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070146333",
      "pull_request_review_id": 1248640279,
      "id": 1070146333,
      "node_id": "PRRC_kwDOABII584_ySMd",
      "diff_hunk": "@@ -592,6 +599,7 @@ bool AddrManImpl::AddSingle(const CAddress& addr, const CNetAddr& source, std::c\n         pinfo = Create(addr, source, &nId);\n         pinfo->nTime = std::max(NodeSeconds{0s}, pinfo->nTime - time_penalty);\n         nNew++;\n+        m_map_counts[pinfo->GetNetwork()].first++;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 60,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": null,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "any reason you opted to add this here vs within the `Create` function?\r\n\r\nmy guess is to keep it close to `nNew++`, but to imo it'd be better to move the `nNew` logic into `Create` instead of adding more external dependencies. it's nbd because `Create` is only called from here, but imo would better match expectations / reduce room for accidental divergence in the future",
      "created_at": "2023-01-13T22:51:39Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070146333",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070146333"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 602,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070155015",
      "pull_request_review_id": 1248640279,
      "id": 1070155015,
      "node_id": "PRRC_kwDOABII584_yUUH",
      "diff_hunk": "@@ -986,6 +1016,7 @@ int AddrManImpl::CheckAddrman() const\n \n     std::unordered_set<int> setTried;\n     std::unordered_map<int, int> mapNew;\n+    std::unordered_map<Network, std::pair<size_t, size_t>> local_counts;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 97,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069511892,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "+1 to named struct, esp since both values are counts. when intending to increment tried count, it's easier to accidentally increment \"x.first\" than it would be \"x.new\". during review I was regularly reminding myself \"first = new & second = tried\", and named vars would completely remove that mental overhead.\r\n\r\nclarification: I realized this comment is referring to the code in `CheckAddrman`, I was suggesting the named struct would be used for the member `m_map_counts`. @vasild were you thinking the same, or just thinking of updating here?",
      "created_at": "2023-01-13T23:14:47Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070155015",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070155015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070179900",
      "pull_request_review_id": 1248640279,
      "id": 1070179900,
      "node_id": "PRRC_kwDOABII584_yaY8",
      "diff_hunk": "@@ -102,6 +102,13 @@ class AddrMan\n     //! Return the number of (unique) addresses in all tables.\n     size_t size() const;\n \n+    /**\n+    * Return the number of (unique) addresses, optionally filtered by network\n+    * and/or addrman table (new if true, tried if false).\n+    * If any of the optional args are nullopt, don't filter with respect to it.\n+    */",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 8,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": null,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think using doxygen guidelines makes this comment a bit easier to parse\r\n\r\n```suggestion\r\n/**\r\n* Return size information about addrman.\r\n*\r\n* @param[in] net \t \t\tSelect addresses only from specified network (nullopt = all)\r\n* @param[in] in_new \t\tSelect addresses only from one table (true = new, false = tried, nullopt = both)\r\n*\r\n* @return \t\t\t\t\tNumber of unique addresses that match specified options.\r\n*/\r\n```",
      "created_at": "2023-01-14T00:41:30Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070179900",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070179900"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 105,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 108,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070185911",
      "pull_request_review_id": 1248640279,
      "id": 1070185911,
      "node_id": "PRRC_kwDOABII584_yb23",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return *in_new ? nNew : nTried;\n+        }\n+    }\n+    if (auto it = m_map_counts.find(*net); it != m_map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else {\n+            return *in_new ? entry.first : entry.second;\n+        }\n+    }",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": null,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style suggestion to consider. mainly, reversing the logic blocks in the if statements to reduce the `!` indirections of nested logic. \r\n\r\n<details>\r\n<summary>code</summary>\r\n\r\n```suggestion\r\n    if (!net) {\r\n        if (in_new.has_value()) {\r\n            return *in_new ? nNew : nTried;\r\n        } else {\r\n            return nNew + nTried;\r\n        }\r\n    }\r\n\r\n    if (auto it = m_map_counts.find(*net); it != m_map_counts.end()) {\r\n        auto entry = it->second;\r\n        if (in_new.has_value()) {\r\n            return *in_new ? entry.first : entry.second;\r\n        } else {\r\n            return entry.first + entry.second;\r\n        }\r\n    }\r\n\r\n```\r\n\r\n</details>\r\n\r\n",
      "created_at": "2023-01-14T01:08:33Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070185911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070185911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 977,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 991,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070186177",
      "pull_request_review_id": 1248640279,
      "id": 1070186177,
      "node_id": "PRRC_kwDOABII584_yb7B",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return *in_new ? nNew : nTried;\n+        }\n+    }\n+    if (auto it = m_map_counts.find(*net); it != m_map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else {\n+            return *in_new ? entry.first : entry.second;\n+        }\n+    }",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1070185911,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "also just noting that you use `nNew + nTried` to represent size of unique addresses in addrman. this breaks from the convention of using `vRandom.size()`, but makes sense to me. ",
      "created_at": "2023-01-14T01:09:56Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070186177",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070186177"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 977,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 991,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070187803",
      "pull_request_review_id": 1248640279,
      "id": 1070187803,
      "node_id": "PRRC_kwDOABII584_ycUb",
      "diff_hunk": "@@ -215,6 +217,9 @@ class AddrManImpl\n     /** Reference to the netgroup manager. netgroupman must be constructed before addrman and destructed after. */\n     const NetGroupManager& m_netgroupman;\n \n+    /** Number of entries in addrman per network and new/tried table. */\n+    std::unordered_map<Network, std::pair<size_t, size_t>> m_map_counts GUARDED_BY(cs);",
      "path": "src/addrman_impl.h",
      "position": null,
      "original_position": 14,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": null,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "naming: including the word `map` in the variable name seems like a hungarian notation thing. I believe we're moving away from this convention in the codebase? what do you think about something like `m_network_counts`?",
      "created_at": "2023-01-14T01:18:53Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070187803",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070187803"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070199579",
      "pull_request_review_id": 1248640279,
      "id": 1070199579,
      "node_id": "PRRC_kwDOABII584_yfMb",
      "diff_hunk": "@@ -969,6 +969,12 @@ class CConnman\n     void RecordBytesRecv(uint64_t bytes);\n     void RecordBytesSent(uint64_t bytes) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n \n+    /**\n+     Return networks for which we have no addresses in addrman and therefore\n+     may require loading fixed seeds.\n+     */\n+    std::vector<Network> GetRelevantFixedSeedNetworks() const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 8,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": null,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "naming: \"fixed seeds\" seems odd to put in the function name because that's the caller - doesn't really have to do with the logic of the function. I think the functionality would better be captured with something like `GetReachableEmptyNetworks()` ",
      "created_at": "2023-01-14T02:31:10Z",
      "updated_at": "2023-01-14T02:47:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070199579",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070199579"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 976,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070278104",
      "pull_request_review_id": 1248784115,
      "id": 1070278104,
      "node_id": "PRRC_kwDOABII584_yyXY",
      "diff_hunk": "@@ -986,6 +1016,7 @@ int AddrManImpl::CheckAddrman() const\n \n     std::unordered_set<int> setTried;\n     std::unordered_map<int, int> mapNew;\n+    std::unordered_map<Network, std::pair<size_t, size_t>> local_counts;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 97,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069511892,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`m_map_counts` too. The less first/second the better.",
      "created_at": "2023-01-14T13:46:31Z",
      "updated_at": "2023-01-14T13:46:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1070278104",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1070278104"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071540474",
      "pull_request_review_id": 1250608902,
      "id": 1071540474,
      "node_id": "PRRC_kwDOABII584_3mj6",
      "diff_hunk": "@@ -986,6 +1016,7 @@ int AddrManImpl::CheckAddrman() const\n \n     std::unordered_set<int> setTried;\n     std::unordered_map<int, int> mapNew;\n+    std::unordered_map<Network, std::pair<size_t, size_t>> local_counts;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 97,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069511892,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I like the suggestion and changed it to use the struct in both spots.",
      "created_at": "2023-01-16T19:40:46Z",
      "updated_at": "2023-01-16T19:40:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071540474",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071540474"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071541292",
      "pull_request_review_id": 1250610014,
      "id": 1071541292,
      "node_id": "PRRC_kwDOABII584_3mws",
      "diff_hunk": "@@ -215,6 +217,9 @@ class AddrManImpl\n     /** Reference to the netgroup manager. netgroupman must be constructed before addrman and destructed after. */\n     const NetGroupManager& m_netgroupman;\n \n+    /** Number of entries in addrman per network and new/tried table. */\n+    std::unordered_map<Network, std::pair<size_t, size_t>> m_map_counts GUARDED_BY(cs);",
      "path": "src/addrman_impl.h",
      "position": null,
      "original_position": 14,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1070187803,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-01-16T19:42:38Z",
      "updated_at": "2023-01-16T19:42:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071541292",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071541292"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071543988",
      "pull_request_review_id": 1250613703,
      "id": 1071543988,
      "node_id": "PRRC_kwDOABII584_3na0",
      "diff_hunk": "@@ -1074,6 +1118,15 @@ size_t AddrManImpl::size() const\n     return vRandom.size();\n }\n \n+size_t AddrManImpl::size(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    LOCK(cs);\n+    Check();\n+    auto ret = size_(net, in_new);\n+    Check();",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 143,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069514507,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's not needed, but this pattern is also used for other const methods (`GetAddr()`, `Select()`), plus we have a few mutables in AddrMan - since `Check()` is only run if the user enables it, I guess it's better to invoke it once too often rather than not?",
      "created_at": "2023-01-16T19:48:15Z",
      "updated_at": "2023-01-16T19:48:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071543988",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071543988"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1124,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071545598",
      "pull_request_review_id": 1250617541,
      "id": 1071545598,
      "node_id": "PRRC_kwDOABII584_3nz-",
      "diff_hunk": "@@ -969,6 +969,12 @@ class CConnman\n     void RecordBytesRecv(uint64_t bytes);\n     void RecordBytesSent(uint64_t bytes) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n \n+    /**\n+     Return networks for which we have no addresses in addrman and therefore\n+     may require loading fixed seeds.\n+     */\n+    std::vector<Network> GetRelevantFixedSeedNetworks() const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 8,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1070199579,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "renamed, thanks",
      "created_at": "2023-01-16T19:51:59Z",
      "updated_at": "2023-01-16T19:52:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071545598",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071545598"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 976,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071576725",
      "pull_request_review_id": 1250659715,
      "id": 1071576725,
      "node_id": "PRRC_kwDOABII584_3vaV",
      "diff_hunk": "@@ -102,6 +102,13 @@ class AddrMan\n     //! Return the number of (unique) addresses in all tables.\n     size_t size() const;\n \n+    /**\n+    * Return the number of (unique) addresses, optionally filtered by network\n+    * and/or addrman table (new if true, tried if false).\n+    * If any of the optional args are nullopt, don't filter with respect to it.\n+    */",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 8,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1070179900,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-01-16T21:00:37Z",
      "updated_at": "2023-01-16T21:00:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071576725",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071576725"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 105,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 108,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071577276",
      "pull_request_review_id": 1250660532,
      "id": 1071577276,
      "node_id": "PRRC_kwDOABII584_3vi8",
      "diff_hunk": "@@ -592,6 +599,7 @@ bool AddrManImpl::AddSingle(const CAddress& addr, const CNetAddr& source, std::c\n         pinfo = Create(addr, source, &nId);\n         pinfo->nTime = std::max(NodeSeconds{0s}, pinfo->nTime - time_penalty);\n         nNew++;\n+        m_map_counts[pinfo->GetNetwork()].first++;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 60,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1070146333,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I wanted to keep these together. I will add a commit that moves both of these lines into `Create`.",
      "created_at": "2023-01-16T21:01:58Z",
      "updated_at": "2023-01-16T21:01:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071577276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071577276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 602,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071578405",
      "pull_request_review_id": 1250662155,
      "id": 1071578405,
      "node_id": "PRRC_kwDOABII584_3v0l",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (!in_new.has_value()) {\n+            return nNew + nTried;\n+        } else {\n+            return *in_new ? nNew : nTried;\n+        }\n+    }\n+    if (auto it = m_map_counts.find(*net); it != m_map_counts.end()) {\n+        auto entry = it->second;\n+        if (!in_new.has_value()) {\n+            return entry.first + entry.second;\n+        } else {\n+            return *in_new ? entry.first : entry.second;\n+        }\n+    }",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 86,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "03a094324a14e3be726152ac5b08e2da1e80d8eb",
      "in_reply_to_id": 1070185911,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I took your suggestion wrt to the order.\r\n\r\nYes, these need to be identical, but I actually changed it to use the old `vRandom.size()` used in `size()` so that there isn't a change from the status quo when the two `size()` functions are merged as you suggest below.",
      "created_at": "2023-01-16T21:04:40Z",
      "updated_at": "2023-01-16T21:06:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071578405",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071578405"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 977,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 991,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071583163",
      "pull_request_review_id": 1250669103,
      "id": 1071583163,
      "node_id": "PRRC_kwDOABII584_3w-7",
      "diff_hunk": "@@ -1575,6 +1575,19 @@ int CConnman::GetExtraBlockRelayCount() const\n     return std::max(block_relay_peers - m_max_outbound_block_relay, 0);\n }\n \n+std::vector<Network> CConnman::GetRelevantFixedSeedNetworks() const\n+{\n+    std::vector<Network> networks{};\n+    for (int n = 0; n < NET_MAX; n++) {\n+        enum Network net = (enum Network)n;\n+        if (net == NET_UNROUTABLE || net == NET_INTERNAL) continue;\n+        if (IsReachable(net) && addrman.size(net, std::nullopt) == 0) {\n+            networks.push_back(net);\n+        }\n+    }\n+    return networks;\n+}",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069598095,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure if this belongs into AddrMan because of the `IsReachable` - I think the information which networks are reachable belongs into `net`, and possibly at some later point into `CConnman` (I know `vfLimited` is currently a global, but this might change). I don't think it makes sense that `AddrMan` should know or deal with this information, so I think I prefer leaving this out of `AddrMan` and reducing the change of the public interface by combining the `size` functions as suggested by Amiti below.",
      "created_at": "2023-01-16T21:17:06Z",
      "updated_at": "2023-01-16T21:17:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071583163",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071583163"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1578,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1589,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071596618",
      "pull_request_review_id": 1250687537,
      "id": 1071596618,
      "node_id": "PRRC_kwDOABII584_30RK",
      "diff_hunk": "@@ -1650,14 +1664,12 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 // We will not make outgoing connections to peers that are unreachable\n                 // (e.g. because of -onlynet configuration).\n                 // Therefore, we do not add them to addrman in the first place.\n-                // Note that if you change -onlynet setting from one network to another,\n-                // peers.dat will contain only peers of unreachable networks and\n-                // manual intervention will be needed (either delete peers.dat after\n-                // configuration change or manually add some reachable peer using addnode),\n-                // see <https://github.com/bitcoin/bitcoin/issues/26035> for details.\n+                // In case previously unreachable networks become reachable\n+                // (e.g. in case of -onlynet changes by the user), fixed seeds will\n+                // be loaded only for networks for which no we have no addressses.\n                 seed_addrs.erase(std::remove_if(seed_addrs.begin(), seed_addrs.end(),\n-                                               [](const CAddress& addr) { return !IsReachable(addr); }),\n-                                seed_addrs.end());\n+                                                [fixed_seed_networks](const CAddress& addr) { return std::find(fixed_seed_networks.begin(), fixed_seed_networks.end(), addr.GetNetwork()) == fixed_seed_networks.end(); }),",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069576904,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "changed it to `unordered_set` as suggested, thanks!",
      "created_at": "2023-01-16T21:51:34Z",
      "updated_at": "2023-01-16T21:51:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071596618",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071596618"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071609326",
      "pull_request_review_id": 1250704641,
      "id": 1071609326,
      "node_id": "PRRC_kwDOABII584_33Xu",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::size_(std::optional<Network> net, std::optional<bool> in_new) const",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069508106,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I had used lower case for consistency. I now changed it to upper case, and added a commit that removes the old `size()` to always use the new `Size()` as suggested by Amiti. I made that an extra commit because it involved renaming a lot of existing call sites.",
      "created_at": "2023-01-16T22:26:40Z",
      "updated_at": "2023-01-16T22:26:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071609326",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071609326"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 973,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071942436",
      "pull_request_review_id": 1251162748,
      "id": 1071942436,
      "node_id": "PRRC_kwDOABII584_5Isk",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::Size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (in_new.has_value()) {\n+            return *in_new ? nNew : nTried;\n+        } else {\n+            return vRandom.size();\n+        }\n+    }\n+    if (auto it = m_network_counts.find(*net); it != m_network_counts.end()) {\n+        auto entry = it->second;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 80,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: I'd rename this into `network_count`. `entry` made me think it's about one particular addr ",
      "created_at": "2023-01-17T09:10:26Z",
      "updated_at": "2023-01-17T09:10:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071942436",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071942436"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 985,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071970992",
      "pull_request_review_id": 1251203682,
      "id": 1071970992,
      "node_id": "PRRC_kwDOABII584_5Pqw",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_network_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_network_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_network_counts) {\n+        if (local_counts[net].n_new != count.n_new || local_counts[net].n_tried != count.n_tried) {",
      "path": "src/addrman.cpp",
      "position": 135,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`local_count[net]` could be called on the non-existent key, but that's fine and will return 0, right?",
      "created_at": "2023-01-17T09:34:06Z",
      "updated_at": "2023-01-17T09:34:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071970992",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071970992"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1107,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071976711",
      "pull_request_review_id": 1251212419,
      "id": 1071976711,
      "node_id": "PRRC_kwDOABII584_5REH",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_network_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_network_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_network_counts) {\n+        if (local_counts[net].n_new != count.n_new || local_counts[net].n_tried != count.n_tried) {",
      "path": "src/addrman.cpp",
      "position": 135,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": 1071970992,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "perhaps a test for this case would be great...",
      "created_at": "2023-01-17T09:39:32Z",
      "updated_at": "2023-01-17T09:39:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1071976711",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1071976711"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1107,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1073935110",
      "pull_request_review_id": 1254099804,
      "id": 1073935110,
      "node_id": "PRRC_kwDOABII585AAvMG",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_network_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_network_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_network_counts) {\n+        if (local_counts[net].n_new != count.n_new || local_counts[net].n_tried != count.n_tried) {",
      "path": "src/addrman.cpp",
      "position": 135,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": 1071970992,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> `local_count[net]` could be called on the non-existent key, but that's fine and will return 0, right?\r\n\r\nyes, that's correct - it will create a entry in local_counts with 0, and then return 0. I think that's actually already happening in some unit test I think - but I will try to add a more explicit test soon!",
      "created_at": "2023-01-18T18:39:47Z",
      "updated_at": "2023-01-18T18:39:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1073935110",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1073935110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1107,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1081132793",
      "pull_request_review_id": 1261596811,
      "id": 1081132793,
      "node_id": "PRRC_kwDOABII585AcMb5",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_network_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_network_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_network_counts) {\n+        if (local_counts[net].n_new != count.n_new || local_counts[net].n_tried != count.n_tried) {",
      "path": "src/addrman.cpp",
      "position": 135,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": 1071970992,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, I should have tried to break it and see whether there is a such test. Explicit is better of course.",
      "created_at": "2023-01-19T11:26:29Z",
      "updated_at": "2023-01-19T11:26:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1081132793",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1081132793"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1107,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1088429134",
      "pull_request_review_id": 1271906605,
      "id": 1088429134,
      "node_id": "PRRC_kwDOABII585A4BxO",
      "diff_hunk": "@@ -1065,6 +1098,17 @@ int AddrManImpl::CheckAddrman() const\n     if (nKey.IsNull())\n         return -16;\n \n+    // It's possible that m_network_counts may have all-zero entries that local_counts\n+    // doesn't have if addrs from a network were being added and then removed again in the past.\n+    if (m_network_counts.size() < local_counts.size()) {\n+        return -20;\n+    }\n+    for (const auto& [net, count] : m_network_counts) {\n+        if (local_counts[net].n_new != count.n_new || local_counts[net].n_tried != count.n_tried) {",
      "path": "src/addrman.cpp",
      "position": 135,
      "original_position": 126,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": 1071970992,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For this to happen, we need to have an address in AddrMan for a network at one point in time, which later gets removed, so that we have an entry in `m_network_counts` that has only zeroes, but no entry in `local_counts`.\r\nThis happens in the `addrman_tests/remove_invalid` unit test which tampers with the serialized stream, so that an address gets added and then removed during Deserialization - if you break `CheckAddrman()` by adding an assert at this spot, this subtest will fail.\r\n\r\nI think it could also happen theoretically if the last remaining address from network A is being kicked out by an address from network B due to a collision in the new tables. But this doesn't seem trivial to write a unit test for, since addresses from different networks are typically from different groups, so I'm not sure if it's easily possible to write an explicit test for this.",
      "created_at": "2023-01-26T23:08:00Z",
      "updated_at": "2023-01-26T23:10:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1088429134",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1088429134"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1107,
      "original_line": 1107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1088429895",
      "pull_request_review_id": 1271907715,
      "id": 1088429895,
      "node_id": "PRRC_kwDOABII585A4B9H",
      "diff_hunk": "@@ -962,6 +970,28 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+size_t AddrManImpl::Size_(std::optional<Network> net, std::optional<bool> in_new) const\n+{\n+    AssertLockHeld(cs);\n+\n+    if (!net.has_value()) {\n+        if (in_new.has_value()) {\n+            return *in_new ? nNew : nTried;\n+        } else {\n+            return vRandom.size();\n+        }\n+    }\n+    if (auto it = m_network_counts.find(*net); it != m_network_counts.end()) {\n+        auto entry = it->second;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 80,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "ce95448e42adc4ab59ff7519adcfe8713bc78025",
      "in_reply_to_id": 1071942436,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "renamed to `net_count` for brevity",
      "created_at": "2023-01-26T23:09:23Z",
      "updated_at": "2023-01-26T23:11:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1088429895",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1088429895"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 985,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1090594472",
      "pull_request_review_id": 1275117760,
      "id": 1090594472,
      "node_id": "PRRC_kwDOABII585BASao",
      "diff_hunk": "@@ -1575,6 +1575,19 @@ int CConnman::GetExtraBlockRelayCount() const\n     return std::max(block_relay_peers - m_max_outbound_block_relay, 0);\n }\n \n+std::vector<Network> CConnman::GetRelevantFixedSeedNetworks() const\n+{\n+    std::vector<Network> networks{};\n+    for (int n = 0; n < NET_MAX; n++) {\n+        enum Network net = (enum Network)n;\n+        if (net == NET_UNROUTABLE || net == NET_INTERNAL) continue;\n+        if (IsReachable(net) && addrman.size(net, std::nullopt) == 0) {\n+            networks.push_back(net);\n+        }\n+    }\n+    return networks;\n+}",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069598095,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What about a standalone function?",
      "created_at": "2023-01-30T12:58:47Z",
      "updated_at": "2023-01-30T12:58:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1090594472",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1090594472"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1578,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1589,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1090643603",
      "pull_request_review_id": 1275192707,
      "id": 1090643603,
      "node_id": "PRRC_kwDOABII585BAeaT",
      "diff_hunk": "@@ -99,8 +99,14 @@ class AddrMan\n     template <typename Stream>\n     void Unserialize(Stream& s_);\n \n-    //! Return the number of (unique) addresses in all tables.\n-    size_t size() const;\n+    /**\n+    * Return size information about addrman.\n+    *\n+    * @param[in] net              Select addresses only from specified network (nullopt = all)\n+    * @param[in] in_new           Select addresses only from one table (true = new, false = tried, nullopt = both)\n+    * @return                     Number of unique addresses that match specified options.\n+    */\n+    size_t Size(std::optional<Network> net = {}, std::optional<bool> in_new = {}) const;",
      "path": "src/addrman.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, if you re-touch: usually `std::nullopt` is used instead of `{}` and I think it is more readable, e.g.:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/79e18ebc81f112f989ff50fb6f5a6a17db9b6758/src/streams.h#L236",
      "created_at": "2023-01-30T13:44:27Z",
      "updated_at": "2023-01-30T13:46:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1090643603",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1090643603"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 109,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092304127",
      "pull_request_review_id": 1277763560,
      "id": 1092304127,
      "node_id": "PRRC_kwDOABII585BGzz_",
      "diff_hunk": "@@ -99,8 +99,14 @@ class AddrMan\n     template <typename Stream>\n     void Unserialize(Stream& s_);\n \n-    //! Return the number of (unique) addresses in all tables.\n-    size_t size() const;\n+    /**\n+    * Return size information about addrman.\n+    *\n+    * @param[in] net              Select addresses only from specified network (nullopt = all)\n+    * @param[in] in_new           Select addresses only from one table (true = new, false = tried, nullopt = both)\n+    * @return                     Number of unique addresses that match specified options.\n+    */\n+    size_t Size(std::optional<Network> net = {}, std::optional<bool> in_new = {}) const;",
      "path": "src/addrman.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "in_reply_to_id": 1090643603,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "will do if I need to re-touch for another reason.",
      "created_at": "2023-01-31T18:05:15Z",
      "updated_at": "2023-01-31T18:05:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1092304127",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092304127"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 109,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093386249",
      "pull_request_review_id": 1279354561,
      "id": 1093386249,
      "node_id": "PRRC_kwDOABII585BK8AJ",
      "diff_hunk": "@@ -1575,6 +1575,19 @@ int CConnman::GetExtraBlockRelayCount() const\n     return std::max(block_relay_peers - m_max_outbound_block_relay, 0);\n }\n \n+std::vector<Network> CConnman::GetRelevantFixedSeedNetworks() const\n+{\n+    std::vector<Network> networks{};\n+    for (int n = 0; n < NET_MAX; n++) {\n+        enum Network net = (enum Network)n;\n+        if (net == NET_UNROUTABLE || net == NET_INTERNAL) continue;\n+        if (IsReachable(net) && addrman.size(net, std::nullopt) == 0) {\n+            networks.push_back(net);\n+        }\n+    }\n+    return networks;\n+}",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "c75ca243386eff78d58effd9cd97c38fcfbc7465",
      "in_reply_to_id": 1069598095,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd be ok with that, but then we'd have to pass it addrman, which is a member of `CConnman`, so I'm not sure why that is better.",
      "created_at": "2023-02-01T15:32:43Z",
      "updated_at": "2023-02-01T15:32:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1093386249",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093386249"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": 1578,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1589,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093399027",
      "pull_request_review_id": 1279373658,
      "id": 1093399027,
      "node_id": "PRRC_kwDOABII585BK_Hz",
      "diff_hunk": "@@ -99,8 +99,14 @@ class AddrMan\n     template <typename Stream>\n     void Unserialize(Stream& s_);\n \n-    //! Return the number of (unique) addresses in all tables.\n-    size_t size() const;\n+    /**\n+    * Return size information about addrman.\n+    *\n+    * @param[in] net              Select addresses only from specified network (nullopt = all)\n+    * @param[in] in_new           Select addresses only from one table (true = new, false = tried, nullopt = both)\n+    * @return                     Number of unique addresses that match specified options.\n+    */\n+    size_t Size(std::optional<Network> net = {}, std::optional<bool> in_new = {}) const;",
      "path": "src/addrman.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "original_commit_id": "80f39c99ef2d30e3e2d8dbc068d25cf92aa32344",
      "in_reply_to_id": 1090643603,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in #27015",
      "created_at": "2023-02-01T15:42:22Z",
      "updated_at": "2023-02-01T15:42:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26847#discussion_r1093399027",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093399027"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26847"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 109,
      "original_line": 109,
      "side": "RIGHT"
    }
  ]
}