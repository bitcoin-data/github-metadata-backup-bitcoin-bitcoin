{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489",
    "id": 3239243501,
    "node_id": "PR_kwDOABII587BEu7t",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34489",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34489.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34489.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ede2eabfe218fe98994c694e2c52af98a94d0120",
    "number": 34489,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "index: batch db writes during initial sync",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Decouples part of #26966.\r\n\r\nRight now, index initial sync writes to disk for every block, which is not the best for HDD. This change batches those, so disk writes are less frequent during initial sync. This also cuts down `cs_main` contention by reducing the number of `NextBlockSync` calls (instead of calling it for every block, we will call it once per block window), making the node more responsive (IBD and validation) while indexes sync up. On top of that, it lays the groundwork for the bigger speedups, since part of the parallelization pre-work is already in place.\r\n\r\nJust as a small summary:\r\n\r\n* Batch DB writes instead of flushing per block, which improves sync time on HDD due to the reduced number of disk write operations.\r\n* Reduce `cs_main` lock contention, which improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n* Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n* Reduces the number of generated LDB files. See l0rinc's [comment](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3876972773).\r\n\r\nNote:\r\nPending initial sync benchmark and further testing. I have only focused on decoupling and simplifying what was in #26966 first. Commits should be simple to digest.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2026-02-03T04:06:34Z",
    "updated_at": "2026-02-16T04:44:37Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "7e8a7f220a7f6f0374c8e1fc9c4864eac3ce22e6",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2026_index_batch_processing",
      "ref": "2026_index_batch_processing",
      "sha": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 447777,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-16T04:44:08Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2026-02-07T21:37:50Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38907,
        "stargazers_count": 88138,
        "watchers_count": 88138,
        "size": 303672,
        "default_branch": "master",
        "open_issues_count": 736,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-13T14:32:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-16T04:49:01Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 276,
    "deletions": 55,
    "changed_files": 9,
    "commits": 9,
    "review_comments": 35,
    "comments": 24
  },
  "events": [
    {
      "event": "labeled",
      "id": 22484045491,
      "node_id": "LE_lADOABII587nzVEtzwAAAAU8J06z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484045491",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:06:39Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 3838931379,
      "node_id": "IC_kwDOABII587k0XGz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3838931379",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:07:08Z",
      "updated_at": "2026-02-16T04:44:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3840520048), [arejula27](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3902437705) |\n| Stale ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874191155) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34440](https://github.com/bitcoin/bitcoin/pull/34440) (Refactor CChain methods to use references, tests by optout21)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- \"already be be\" -> \"already be\" [duplicate word; the phrase \"will be already be logged\" is incorrect due to the repeated \"be\".]\n\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- BlockFilterIndex(interfaces::MakeChain(m_node), BlockFilterType::BASIC, 1 << 20, /*f_memory=*/false) in src/test/blockfilter_index_tests.cpp\n\n\n\n<sup>2026-02-16 04:44:37</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3838931379",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22484634725,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU8MExl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484634725",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/cf065aa603769458f475e1180fd4924d68023695",
      "created_at": "2026-02-03T04:42:15Z"
    },
    {
      "event": "labeled",
      "id": 22484641130,
      "node_id": "LE_lADOABII587nzVEtzwAAAAU8MGVq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484641130",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:42:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3839020141,
      "node_id": "IC_kwDOABII587k0sxt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3839020141",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:42:56Z",
      "updated_at": "2026-02-03T04:42:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `iwyu`: https://github.com/bitcoin/bitcoin/actions/runs/21616547248/job/62296358632</sub>\n<sub>LLM reason (âœ¨ experimental): IWYU (include-what-you-use) reported a failure in the test script, causing the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3839020141",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3744186020,
      "node_id": "PRR_kwDOABII587fK76k",
      "url": null,
      "actor": null,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-03T09:47:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "This relates to what you wrote [here](https://github.com/bitcoin/bitcoin/pull/33306#issuecomment-3832258602) right? It would be helpful that you check if it solves the LevelDB file issue in coinstatsindex and I am also curious about your benchmark results because @l0rinc did not find that this was  leading to a speed up.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3744186020",
      "submitted_at": "2026-02-03T09:47:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3840520048,
      "node_id": "IC_kwDOABII587k6a9w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3840520048",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:27Z",
      "updated_at": "2026-02-03T10:38:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, I prefer this over https://github.com/bitcoin/bitcoin/pull/33306 - and will investigate if this solves that problem once my benchmarking servers free up.\r\n\r\n> because @l0rinc did not find that this was leading to a speed up.\r\n\r\nI experimented with something similar in https://github.com/l0rinc/bitcoin/pull/37/changes, will compare it against this change. I wrote:\r\n> indexes: batch index writes: 34188s, 211M, 8 files\r\nIt solved the fragmentation, but didn't speed up anything.\r\nI still think this is a better direction than adding manual compactions.\r\n\r\nMost likely since writing isn't the bottleneck but MuHash calculations were.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3840520048",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22493171192,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU8so34",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493171192",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:29Z"
    },
    {
      "event": "subscribed",
      "id": 22493171236,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU8so4k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493171236",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:29Z"
    },
    {
      "event": "commented",
      "id": 3841864727,
      "node_id": "IC_kwDOABII587k_jQX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841864727",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:16Z",
      "updated_at": "2026-02-03T15:05:18Z",
      "author_association": "MEMBER",
      "body": "> This relates to what you wrote [here](https://github.com/bitcoin/bitcoin/pull/33306#issuecomment-3832258602) right? It would be helpful that you check if it solves the LevelDB file issue in coinstatsindex and I am also curious about your benchmark results because @l0rinc did not find that this was leading to a speed up.\r\n\r\n@fjahr the comment was merely an excuse to decouple the DB writes batching code out of #26966 rather than me having a formed opinion in favor or against #33306. That's why I didn't mention it in the PR description. Maybe the changes complement each other.\r\n\r\nTo be crystal clear, just updated the PR description with further details on why this change worth alone, independently on #33306.\r\n\r\nTo summarize it here, the goal of the changes are:\r\n* Batch DB writes instead of flushing per block, which will improve sync time on HDD due to the reduced number of IO operations.\r\n* Reduce `cs_main` lock contention, which orthogonally improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n*  Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n\r\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3841864727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22500147622,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9HQGm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147622",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "subscribed",
      "id": 22500147682,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9HQHi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147682",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "mentioned",
      "id": 22500147731,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9HQIT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147731",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "subscribed",
      "id": 22500147787,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9HQJL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147787",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22507397305,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU9i6C5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22507397305",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "dd76491174b3a3b60c174822f75abb03fda3b1d4",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/dd76491174b3a3b60c174822f75abb03fda3b1d4",
      "created_at": "2026-02-03T19:44:16Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22508382741,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU9mqoV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508382741",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a2f84476bf3cfdb4bb20193d1253a9ca131f93a9",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/a2f84476bf3cfdb4bb20193d1253a9ca131f93a9",
      "created_at": "2026-02-03T20:25:04Z"
    },
    {
      "event": "commented",
      "id": 3843480324,
      "node_id": "IC_kwDOABII587lFtsE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3843480324",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:26:03Z",
      "updated_at": "2026-02-03T20:26:03Z",
      "author_association": "MEMBER",
      "body": "Updated per feedback from @hebasto (thanks!).\r\nChanged `<cinttypes>` include for `<cstdint>` to make IWYU happy.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3843480324",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22508406509,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9mwbt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508406509",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:26:04Z"
    },
    {
      "event": "subscribed",
      "id": 22508406548,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9mwcU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508406548",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:26:04Z"
    },
    {
      "event": "commented",
      "id": 3843531910,
      "node_id": "IC_kwDOABII587lF6SG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3843531910",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:38:31Z",
      "updated_at": "2026-02-04T08:33:44Z",
      "author_association": "MEMBER",
      "body": "> Updated per feedback from @hebasto (thanks!). Changed `<cinttypes>` include for `<cstdint>` to make IWYU happy.\r\n\r\n~I guess, this is a bug in IWYU caused by https://github.com/include-what-you-use/include-what-you-use/commit/44480a2de0d8ef039b13391997f274ea33750be9.~\r\n\r\n**UPDATE:** Fixed in https://github.com/bitcoin/bitcoin/pull/34498.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3843531910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22508710480,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9n6pQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508710480",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:38:33Z"
    },
    {
      "event": "subscribed",
      "id": 22508710530,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9n6qC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508710530",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:38:33Z"
    },
    {
      "event": "commented",
      "id": 3847617830,
      "node_id": "IC_kwDOABII587lVf0m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3847617830",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T13:57:24Z",
      "updated_at": "2026-02-04T13:57:24Z",
      "author_association": "MEMBER",
      "body": "Can you run all unit and functional tests on all commits? Or do they time out?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3847617830",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22531839415,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU_AJW3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22531839415",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "created_at": "2026-02-04T15:17:49Z"
    },
    {
      "event": "commented",
      "id": 3848080895,
      "node_id": "IC_kwDOABII587lXQ3_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3848080895",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T15:22:03Z",
      "updated_at": "2026-02-04T15:22:09Z",
      "author_association": "MEMBER",
      "body": "> Can you run all unit and functional tests on all commits? Or do they time out?\r\n\r\nBad squash, my bad. Thanks for the heads up. Fixed.\r\nAlso rebased the branch to pick up the CI changes.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3848080895",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "unlabeled",
      "id": 22533505633,
      "node_id": "UNLE_lADOABII587nzVEtzwAAAAU_GgJh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22533505633",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T16:19:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3865998998,
      "node_id": "IC_kwDOABII587mbnaW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3865998998",
      "actor": {
        "login": "Jhackman2019",
        "id": 86029387,
        "node_id": "MDQ6VXNlcjg2MDI5Mzg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/86029387?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jhackman2019",
        "html_url": "https://github.com/Jhackman2019",
        "followers_url": "https://api.github.com/users/Jhackman2019/followers",
        "following_url": "https://api.github.com/users/Jhackman2019/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Jhackman2019/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Jhackman2019/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Jhackman2019/subscriptions",
        "organizations_url": "https://api.github.com/users/Jhackman2019/orgs",
        "repos_url": "https://api.github.com/users/Jhackman2019/repos",
        "events_url": "https://api.github.com/users/Jhackman2019/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Jhackman2019/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T02:54:45Z",
      "updated_at": "2026-02-08T10:52:14Z",
      "author_association": "NONE",
      "body": "Builds clean on ARM64 (Pi 5, Debian Bookworm). All index-related functional tests and blockfilter_index unit tests pass.\n:)",
      "user": {
        "login": "Jhackman2019",
        "id": 86029387,
        "node_id": "MDQ6VXNlcjg2MDI5Mzg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/86029387?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jhackman2019",
        "html_url": "https://github.com/Jhackman2019",
        "followers_url": "https://api.github.com/users/Jhackman2019/followers",
        "following_url": "https://api.github.com/users/Jhackman2019/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Jhackman2019/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Jhackman2019/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Jhackman2019/subscriptions",
        "organizations_url": "https://api.github.com/users/Jhackman2019/orgs",
        "repos_url": "https://api.github.com/users/Jhackman2019/repos",
        "events_url": "https://api.github.com/users/Jhackman2019/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Jhackman2019/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3865998998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3769220456,
      "node_id": "PRR_kwDOABII587gqb1o",
      "url": null,
      "actor": null,
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-08T08:31:24Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "bvbfan",
        "id": 8323581,
        "node_id": "MDQ6VXNlcjgzMjM1ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8323581?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bvbfan",
        "html_url": "https://github.com/bvbfan",
        "followers_url": "https://api.github.com/users/bvbfan/followers",
        "following_url": "https://api.github.com/users/bvbfan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bvbfan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bvbfan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bvbfan/subscriptions",
        "organizations_url": "https://api.github.com/users/bvbfan/orgs",
        "repos_url": "https://api.github.com/users/bvbfan/repos",
        "events_url": "https://api.github.com/users/bvbfan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bvbfan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3769220456",
      "submitted_at": "2026-02-08T08:31:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22624679009,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVEiTRh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22624679009",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6f66ff7e0d4424c48e0e27e9fa72d26033ba6851",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/6f66ff7e0d4424c48e0e27e9fa72d26033ba6851",
      "created_at": "2026-02-08T16:55:13Z"
    },
    {
      "event": "reviewed",
      "id": 3773517236,
      "node_id": "PRR_kwDOABII587g6020",
      "url": null,
      "actor": null,
      "commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T14:06:10Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3773517236",
      "submitted_at": "2026-02-09T14:06:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3872061961,
      "node_id": "IC_kwDOABII587myvoJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3872061961",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T14:29:36Z",
      "updated_at": "2026-02-09T21:53:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "I am confused as to how this batching relates to the batching logic of the orginal code.\r\n~~Looking at the pre-change `BaseIndex::Sync()`, it seems that Commit/WriteBatch occured only every 30 seconds (or at the chain tip), not after each block. This change does a `WriteBatch` after every 500 blocks, which in fact may be even more frequent. The original commit-after-every-30-secs is still there, so I don't see how this change makes _less_ writes. Maybe I misunderstand the change.~~\r\n\r\n```\r\n            if (!ProcessBlock(pindex)) return; // error logged internally\r\n            ...\r\n            if (current_time - last_locator_write_time >= SYNC_LOCATOR_WRITE_INTERVAL) {\r\n                SetBestBlockIndex(pindex);\r\n                last_locator_write_time = current_time;\r\n                // No need to handle errors in Commit. See rationale above.\r\n                Commit();\r\n            }\r\n```",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3872061961",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3873357077,
      "node_id": "IC_kwDOABII587m3r0V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3873357077",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T18:48:02Z",
      "updated_at": "2026-02-09T19:04:13Z",
      "author_association": "MEMBER",
      "body": "> I am confused as to how this batching relates to the batching logic of the orginal code. Looking at the pre-change `BaseIndex::Sync()`, it seems that Commit/WriteBatch occured only every 30 seconds (or at the chain tip), not after each block. This change does a `WriteBatch` after every 500 blocks, which in fact may be even more frequent. The original commit-after-every-30-secs is still there, so I don't see how this change makes _less_ writes. Maybe I misunderstand the change.\r\n> \r\n> ```\r\n>             if (!ProcessBlock(pindex)) return; // error logged internally\r\n>             ...\r\n>             if (current_time - last_locator_write_time >= SYNC_LOCATOR_WRITE_INTERVAL) {\r\n>                 SetBestBlockIndex(pindex);\r\n>                 last_locator_write_time = current_time;\r\n>                 // No need to handle errors in Commit. See rationale above.\r\n>                 Commit();\r\n>             }\r\n> ```\r\n\r\n`Commit()` only persists the locator (i.e. \"how far the index has synced\") so we can resume from that point after a restart. It does not flush or batch the per-block digested data.\r\n\r\nThe block data is written inside `CustomAppend()` which is called from `ProcessBlock()` per block, and it writes to the db immediately.\r\n\r\nWe're not replacing locator update time nor merging it with something else here, we're only batching something that previously wasn't batched at all.\r\n\r\nAlso, using a block window instead of reusing the existing time-based window is intentional. Time-based flushing makes memory usage hard to predict, and difficult to test (see #32878), because the amount of buffered data depends on runtime speed, which does not necessarily correlate with available memory (batched data stays in memory until it's flushed..). A fixed block window provides predictable memory usage and deterministic behavior, which is overall better and also integrates nicely with multiple workers sync (#26966). I would argue in favor of ditching the time window in the future, but.. that's not something related to this PR.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3873357077",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22652894155,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVGN7vL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22652894155",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d0f793ac61a0659f4f1e89f7943813244499bf7d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/d0f793ac61a0659f4f1e89f7943813244499bf7d",
      "created_at": "2026-02-09T19:58:37Z"
    },
    {
      "event": "commented",
      "id": 3873537998,
      "node_id": "IC_kwDOABII587m4X_O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3873537998",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:00:10Z",
      "updated_at": "2026-02-09T20:00:10Z",
      "author_association": "MEMBER",
      "body": "Updated per feedback, plus added test coverage for the introduced changes. Thanks @optout21.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3873537998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22652922815,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAVGOCu_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22652922815",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:00:11Z"
    },
    {
      "event": "subscribed",
      "id": 22652922859,
      "node_id": "SE_lADOABII587nzVEtzwAAAAVGOCvr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22652922859",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:00:11Z"
    },
    {
      "event": "commented",
      "id": 3874060536,
      "node_id": "IC_kwDOABII587m6Xj4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874060536",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T21:52:24Z",
      "updated_at": "2026-02-09T21:52:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the explanations, and apologies for asking trivial/irrelevant questions.\r\n\r\n> `Commit()` only persists the locator (i.e. \"how far the index has synced\") so we can resume from that point after a restart.\r\n> The block data is written inside `CustomAppend()` which is called from `ProcessBlock()` per block, and it writes to the db immediately.\r\nThese are two important points, I can see now.\r\n\r\nI was puzzled by the fact that there is a loop in `Sync()`, and another loop is introduced in `ProcessBlocks()`. But the two complement each other.\r\n\r\nAnother approach would be to keep the outer loop in `Sync()` block-by-block, store a `CDBBatch` variable, process one block, count the blocks in the batch, and flush the batch if batch size is reached (outside of `ProcessBlock`). This would be slightly less change (no secondary loop), but -- if I'm correct -- the `cs_main` lock would be still accessed at every block.\r\n\r\n> ... I would argue in favor of ditching the time window in the future, but.. that's not something related to this PR.\r\nMaybe `Commit()` could be called with the same granularity as batch writes, but that's out of scope here.\r\n",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874060536",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3874140984,
      "node_id": "IC_kwDOABII587m6rM4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874140984",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T22:11:44Z",
      "updated_at": "2026-02-09T22:11:44Z",
      "author_association": "MEMBER",
      "body": "> Another approach would be to keep the outer loop in Sync() block-by-block, store a CDBBatch variable, process one block, count the blocks in the batch, and flush the batch if batch size is reached (outside of ProcessBlock). This would be slightly less change (no secondary loop), but -- if I'm correct -- the cs_main lock would be still accessed at every block.\r\n\r\nYes. That would still lock `cs_main` on every block, which harms the overall node responsiveness, and it is also not very helpful for the parallelization goal, which requires certain isolation between batches so worker threads can process them concurrently.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874140984",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3775683458,
      "node_id": "PRR_kwDOABII587hDFuC",
      "url": null,
      "actor": null,
      "commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T22:17:24Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3775683458",
      "submitted_at": "2026-02-09T22:17:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "reviewed",
      "id": 3775687762,
      "node_id": "PRR_kwDOABII587hDGxS",
      "url": null,
      "actor": null,
      "commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T22:18:25Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3775687762",
      "submitted_at": "2026-02-09T22:18:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "reviewed",
      "id": 3775705448,
      "node_id": "PRR_kwDOABII587hDLFo",
      "url": null,
      "actor": null,
      "commit_id": "825b2c73944637894363aaf342d0cd06cdff7b47",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T22:22:37Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3775705448",
      "submitted_at": "2026-02-09T22:22:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3874191155,
      "node_id": "IC_kwDOABII587m63cz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874191155",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T22:24:52Z",
      "updated_at": "2026-02-10T07:21:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "crACK 3687ead892d207ddbdfec3f2ef5c086130414d9a\r\n\r\nLGTM after clarifications and changes! Code review, no assessment on performance.\r\n\r\nPrev:\r\ncrACK d0f793ac61a0659f4f1e89f7943813244499bf7d\r\n",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874191155",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "review_requested",
      "id": 22656412250,
      "node_id": "RRE_lADOABII587nzVEtzwAAAAVGbWpa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22656412250",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T22:24:58Z",
      "requested_reviewer": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22659373473,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVGmpmh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659373473",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7ab454d82f4328d44f7821c8e1b8183672b47adc",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/7ab454d82f4328d44f7821c8e1b8183672b47adc",
      "created_at": "2026-02-10T01:11:54Z"
    },
    {
      "event": "commented",
      "id": 3874777446,
      "node_id": "IC_kwDOABII587m9Glm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874777446",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:19:15Z",
      "updated_at": "2026-02-10T01:19:15Z",
      "author_association": "MEMBER",
      "body": "nits addressed, thanks @optout21.\r\nAlso, just for completeness, added test coverage for the \"reorg during initial sync\" scenario that was not covered before.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874777446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22659476482,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAVGnCwC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659476482",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:19:17Z"
    },
    {
      "event": "subscribed",
      "id": 22659476524,
      "node_id": "SE_lADOABII587nzVEtzwAAAAVGnCws",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659476524",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:19:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22659532973,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVGnQit",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659532973",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "created_at": "2026-02-10T01:22:27Z"
    },
    {
      "event": "labeled",
      "id": 22659547849,
      "node_id": "LE_lADOABII587nzVEtzwAAAAVGnULJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659547849",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:23:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22660698334,
      "node_id": "UNLE_lADOABII587nzVEtzwAAAAVGrtDe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22660698334",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T02:42:28Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3876972773,
      "node_id": "IC_kwDOABII587nFejl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3876972773",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T11:15:26Z",
      "updated_at": "2026-02-10T11:15:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "I just finished measuring the size and file count for this PR (it was running previously for a week with the wrong `tail -F` grep I reused from https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2965376357)\r\n\r\n<details>\r\n<summary>CoinStatsIndex DB: Before vs After Batch Writes (47c9297 â†’ dd76491)</summary>\r\n\r\n```bash\r\nCOMMITS=\"47c9297172b0866d2b5d0de6b4fd35b798db3929 dd76491174b3a3b60c174822f75abb03fda3b1d4\"; \\\r\nDATA_DIR=\"/mnt/my_storage/BitcoinData\"; export DATA_DIR; \\\r\nwait_index() { tail -F ${DATA_DIR}/debug.log 2>/dev/null | grep -q -m1 'coinstatsindex is enabled'; killall bitcoind 2>/dev/null || true; sleep 2; }; export -f wait_index; \\\r\nfor COMMIT in $COMMITS; do \\\r\n  killall bitcoind 2>/dev/null || true; rm -rf \"$DATA_DIR/indexes\" \"$DATA_DIR/debug.log\"; \\\r\n  git fetch -q origin \"$COMMIT\" >/dev/null 2>&1 || true && git checkout -q \"$COMMIT\" && git log -1 --pretty='%h %s' \"$COMMIT\"; \\\r\n  cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release >/dev/null 2>&1 && ninja -C build >/dev/null 2>&1; \\\r\n  ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0 & wait_index; \\\r\n  du -h \"$DATA_DIR/indexes/coinstatsindex/db\"; \\\r\n  find \"$DATA_DIR/indexes/coinstatsindex/db\" -type f -name '*.ldb' | wc -l; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\n```bash\r\n[1]+  Done                    ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0\r\n47c9297172 Merge bitcoin/bitcoin#32420: mining, ipc: omit dummy extraNonce from coinbase\r\n[1] 3876795\r\n[1]+  Done                    ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0\r\n216M    /mnt/my_storage/BitcoinData/indexes/coinstatsindex/db\r\n144\r\n```\r\nand\r\n```bash\r\ndd76491174 index: enable DB writes batching during sync\r\n[1] 3885937\r\n[1]+  Done                    ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0\r\n216M    /mnt/my_storage/BitcoinData/indexes/coinstatsindex/db\r\n10\r\n```\r\n\r\n<img width=\"1484\" height=\"740\" alt=\"image\" src=\"https://github.com/user-attachments/assets/8b42c7d8-f065-49a4-b251-a2a315792cf4\" />\r\n\r\nI haven't measured the speeds yet but will do that next.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3876972773",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3887811554,
      "node_id": "IC_kwDOABII587nu0vi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3887811554",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-11T23:31:42Z",
      "updated_at": "2026-02-11T23:31:42Z",
      "author_association": "MEMBER",
      "body": "Interesting, cool thanks. Another good point in favor of this change then. Will add it to the PR description.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3887811554",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3889451353,
      "node_id": "IC_kwDOABII587n1FFZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3889451353",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T08:32:45Z",
      "updated_at": "2026-02-12T08:32:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "I have finished benchmarking them:\r\n<details>\r\n<summary>indexes | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```bash\r\nBEFORE=\"64294c89094d5ab10d87236729cc267fde0a24ca\"; AFTER=\"3687ead892d207ddbdfec3f2ef5c086130414d9a\"; \\\r\nDATA_DIR=\"/mnt/my_storage/BitcoinData\"; export DATA_DIR; \\\r\nRESULTS_FILE=\"${DATA_DIR}/index_benchmark_results.txt\"; export RESULTS_FILE; \\\r\nwait_index() { \\\r\n  tail -F ${DATA_DIR}/debug.log 2>/dev/null | grep -q -m1 'index is enabled\\|is enabled at height'; \\\r\n  sleep 2; \\\r\n  killall bitcoind 2>/dev/null || true; \\\r\n  wait; \\\r\n}; export -f wait_index; \\\r\nlog_size() { \\\r\n  local label=\"$1\"; local index_dir=\"$2\"; \\\r\n  local size=$(du -sh \"$index_dir\" 2>/dev/null | cut -f1); \\\r\n  local files=$(find \"$index_dir\" -type f -name '*.ldb' 2>/dev/null | wc -l); \\\r\n  echo \"$label: size=$size, ldb_files=$files\" | tee -a \"$RESULTS_FILE\"; \\\r\n}; export -f log_size; \\\r\ngit reset --hard >/dev/null 2>&1 && git clean -fxd >/dev/null 2>&1 && git fetch origin $BEFORE $AFTER >/dev/null 2>&1; \\\r\nfor c in $BEFORE:build-before $AFTER:build-after; do \\\r\n  git checkout ${c%:*} >/dev/null 2>&1 && cmake -B ${c#*:} -G Ninja -DCMAKE_BUILD_TYPE=Release >/dev/null 2>&1 && ninja -C ${c#*:} bitcoind >/dev/null 2>&1; \\\r\ndone; \\\r\necho \"indexes | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $DATA_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $DATA_DIR | tail -1) 2>/dev/null | grep -q 0 && echo SSD || echo HDD)\" | tee -a \"$RESULTS_FILE\" && \\\r\nfor INDEX in txindex blockfilterindex coinstatsindex; do \\\r\n  echo -e \"\\n--- $INDEX ---\" | tee -a \"$RESULTS_FILE\"; \\\r\n  if [ \"$INDEX\" = \"blockfilterindex\" ]; then \\\r\n    INDEX_DIR=\"${DATA_DIR}/indexes/blockfilter/basic\"; \\\r\n  else \\\r\n    INDEX_DIR=\"${DATA_DIR}/indexes/${INDEX}\"; \\\r\n  fi; \\\r\n  export INDEX_DIR; \\\r\n  for BUILD in before after; do \\\r\n    if [ \"$BUILD\" = \"before\" ]; then COMMIT=\"${BEFORE:0:7}\"; else COMMIT=\"${AFTER:0:7}\"; fi; \\\r\n    hyperfine --runs 1 --shell bash --sort command \\\r\n      --prepare \"rm -rf ${DATA_DIR}/indexes/* ${DATA_DIR}/debug.log\" \\\r\n      --cleanup \"log_size '${INDEX} ${BUILD}' '${INDEX_DIR}'\" \\\r\n      -n \"${BUILD} (${COMMIT})\" \\\r\n      \"./build-${BUILD}/bin/bitcoind -datadir=${DATA_DIR} -${INDEX}=1 -connect=0 -printtoconsole=0 & wait_index\" \\\r\n      2>&1 | tee -a \"$RESULTS_FILE\"; \\\r\n  done; \\\r\ndone;\r\n```\r\n\r\n</details>\r\n\r\n> --- txindex ---\r\n\r\n```python\r\nBenchmark 1: before (64294c8)\r\n  Time (abs â‰¡):        7665.128 s               [User: 11912.927 s, System: 1194.716 s]\r\ntxindex before: size=63G, ldb_files=2046\r\n\r\nBenchmark 1: after (3687ead)\r\n  Time (abs â‰¡):        7579.151 s               [User: 11918.671 s, System: 1120.304 s] \r\ntxindex after: size=63G, ldb_files=2049\r\n```\r\n> --- blockfilterindex ---\r\n\r\n```python\r\nBenchmark 1: before (64294c8)\r\n  Time (abs â‰¡):        8447.157 s               [User: 8034.353 s, System: 274.633 s] \r\nblockfilterindex before: size=12G, ldb_files=3\r\n\r\nBenchmark 1: after (3687ead)\r\n  Time (abs â‰¡):        8391.136 s               [User: 7992.547 s, System: 270.205 s] \r\nblockfilterindex after: size=12G, ldb_files=3\r\n```\r\n> --- coinstatsindex ---\r\n\r\n```python\r\nBenchmark 1: before (64294c8)\r\n  Time (abs â‰¡):        35219.938 s               [User: 34115.981 s, System: 276.583 s]\r\ncoinstatsindex before: size=216M, ldb_files=145\r\n\r\nBenchmark 1: after (3687ead)\r\n  Time (abs â‰¡):        35229.893 s               [User: 34125.606 s, System: 271.160 s]\r\ncoinstatsindex after: size=216M, ldb_files=10\r\n```\r\n<img width=\"1784\" height=\"594\" alt=\"image\" src=\"https://github.com/user-attachments/assets/72448dc8-c641-413e-9bcc-ea786275d4db\" />\r\n\r\n--------\r\n\r\nSpeed is basically the same and the number of files in `coinstatsindex` were fixed.\r\nThe `txindex` file count change seems like noise.\r\nI will review the code soon, thanks for extracting it from the big PR.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3889451353",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3891683376,
      "node_id": "IC_kwDOABII587n9mAw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3891683376",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:40:01Z",
      "updated_at": "2026-02-12T15:41:15Z",
      "author_association": "MEMBER",
      "body": "> Speed is basically the same\r\n\r\nYou have a really nice machine there. The real batching gains should show up on HDDs rather than SSDs.\r\nStill, great to know this works properly on high end hardware. Thanks for the benchmark.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3891683376",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3891840766,
      "node_id": "IC_kwDOABII587n-Mb-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3891840766",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T16:08:40Z",
      "updated_at": "2026-02-12T16:08:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The real batching gains should show up on HDDs rather than SSDs\r\n\r\nyes, I would expect that to be the case - that will also be part of my review before I can ack it.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3891840766",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3892133978,
      "node_id": "IC_kwDOABII587n_UBa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3892133978",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T16:58:15Z",
      "updated_at": "2026-02-12T16:58:15Z",
      "author_association": "MEMBER",
      "body": "> yes, I would expect that to be the case - that will also be part of my review before I can ack it.\r\n\r\nyou know, even if it runs at the same speed on an HDD (which I doubt), the other improvements this PR brings still make it worth it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3892133978",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3792564543,
      "node_id": "PRR_kwDOABII587iDfE_",
      "url": null,
      "actor": null,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T18:06:28Z",
      "author_association": "NONE",
      "body": "Concept ACK [3687ead892d207ddbdfec3f2ef5c086130414d9a]\r\nI really like the idea and I think it will be a massive upgrade with your parallelisation proposal #26966",
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3792564543",
      "submitted_at": "2026-02-12T17:39:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "reviewed",
      "id": 3801538404,
      "node_id": "PRR_kwDOABII587ilt9k",
      "url": null,
      "actor": null,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-14T10:50:59Z",
      "author_association": "NONE",
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3801538404",
      "submitted_at": "2026-02-14T10:50:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22792516417,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVOijNB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22792516417",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c2953e446d53a8ac86ae3e4801208df5c9c6d2cc",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/c2953e446d53a8ac86ae3e4801208df5c9c6d2cc",
      "created_at": "2026-02-14T16:55:06Z"
    },
    {
      "event": "labeled",
      "id": 22793384042,
      "node_id": "LE_lADOABII587nzVEtzwAAAAVOl3Bq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22793384042",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T18:04:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3902278253,
      "node_id": "IC_kwDOABII587omApt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3902278253",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T18:04:58Z",
      "updated_at": "2026-02-14T18:04:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `test max 6 ancestor commits`: https://github.com/bitcoin/bitcoin/actions/runs/22020957853/job/63629927583</sub>\n<sub>LLM reason (âœ¨ experimental): Block filter index test initial_sync_reorg failed, causing the test suite to abort and CI failure.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3902278253",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3902437705,
      "node_id": "IC_kwDOABII587omnlJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3902437705",
      "actor": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-14T20:06:38Z",
      "updated_at": "2026-02-14T20:06:38Z",
      "author_association": "NONE",
      "body": "re Concept ACK [c2953e446d53a8ac86ae3e4801208df5c9c6d2cc]",
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3902437705",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY4NzkyYjBjZWRhNjJlOGM1N2E2YTgzZDU4MDEyMzZmZTkxNDc5NDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f8792b0ceda62e8c57a6a83d5801236fe9147943",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f8792b0ceda62e8c57a6a83d5801236fe9147943",
      "tree": {
        "sha": "a0241dfb5c699d862157aa6bcd761f0a7600b14c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a0241dfb5c699d862157aa6bcd761f0a7600b14c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a0241dfb5c699d862157aa6bcd761f0a7600b14c\nparent b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab\nauthor furszy <matiasfurszyfer@protonmail.com> 1771082159 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206190 -0500\n\nindex: sync, update iterator only after processing block\n\nNo behavior change. This is just for correctness.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi4ACgkQXdI8zGhq\npiO9zg/+KyVhx299hpKJ7ufnLmkjQnN2g0yYAFU7PGCAG/4nR+9/xnmspekBi0Ma\nhxcg/+ES3usuK6rbAr5WzUIzzhJCUzOom6STL2FDpXg9nqdPP7Wr1Ayc2v1PFRrZ\noaccnHxoq9aEVCoZe2triTDQe0FKK0UjowGJ4fqjgGOMMpqTmuWyewX2EEOWtsl6\nNlR1DG03t2xkc+Jd8QuAl+53uMubGd2GzUAMwKNL1dIT1nvyng2ZsMJLy5l2vfmE\nufJHhHIzA1w79Kn+usOLP8g9PVAHFOHmI/8uANC87upfjOowGC/Kk0o+/B/iszVK\n/6UGSipPbXyMKkoOrEOTGXOaiwEakFRlUR+c6Na/g3JnbAi/xQVktbokcCU4x8+z\naRRi3DtsvbyEBvOcvzaLa5JQ0LVG8F9/2PaQLrs4SpU+Ul+m5jjVJkkRiJM4lX3A\ngVCnOZTKUANQZx5AMJr6LFsK77NooTN/c9sSOQ5/CK776Xe4uSoBmZBcCAh2Mxuf\nPquxPS0uN5Dwx9xgToIosLJ0QCM686ffb4UsjpNQl7yMqMRudnAmtvwm2Jlkk6zJ\nIJlAyWexR14JTF1RaXQDSBjZTWV1Wilie2rJ0UMEWclge0tEi1oxSIx2gsCevzrS\njkkNKfgJAl3zmwqe/hpssbWFOvVqFtxdTSFxlGL8vVf1+Mfnxps=\n=Sz8W\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab",
          "sha": "b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab"
        }
      ],
      "message": "index: sync, update iterator only after processing block\n\nNo behavior change. This is just for correctness.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:10Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-14T15:15:59Z"
      },
      "sha": "f8792b0ceda62e8c57a6a83d5801236fe9147943"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFlY2Q3M2E2MDA2MTFlNTYzOWUzNDJkYzkwNmFlOTYzOTg2ODdhYjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aecd73a600611e5639e342dc906ae96398687ab7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/aecd73a600611e5639e342dc906ae96398687ab7",
      "tree": {
        "sha": "15a7a66e756a442495bfa7e8c9e76d35533f39c6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/15a7a66e756a442495bfa7e8c9e76d35533f39c6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 15a7a66e756a442495bfa7e8c9e76d35533f39c6\nparent f8792b0ceda62e8c57a6a83d5801236fe9147943\nauthor furszy <matiasfurszyfer@protonmail.com> 1771081795 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206191 -0500\n\nindex: refactor, decouple interruption from sync loop\n\nNo behavior change.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi8ACgkQXdI8zGhq\npiMuVA//ceQ74uxiPo5HFVi/pL+m/57M2BhrPUWypa8p276suhC9zKVWe+PA65yO\nIsxfMrAUyDoIxv9R5pwiYsh5TeCTtIklpbgP7J4bDCp9I+VaUOfN/fvsFrruSLeW\n1JZFj18HcGEEBa3kkXFMv5kfaecWDwbSdshuvjhw0PDjcdhN1AOyDwNjF1YWjpoV\nM0ILQZtIxDtDYHQnWpcC1uS/q5fFAOEPM7aFnUq0ZqDMokschCdmVL+w9NMsgbQa\n830pPf8a32VIzqGnIdN3BaxbsXh8KVbNQaeFkZ6vKo7w5LosyZma+XsCYUUR+v26\n6zmRN0mpYr2UaUzaR6KijTAUdKalkDcg+mCmkYodFwPJvGSb3b/Fv+L9qMMQlOqY\n7qXhT4qRIjrtHmGUI8ir8UW7o7fS1O+7GM4t6jWEVc4hKNzQsryClmfJzN7qIX4n\nOTrrybNyta2HYXS5Ncmc6Nke83w8Sf0Wsu+PW4pYzQj2yWT5STyxFPVZ4GbRJQ+N\nAh/QS/Oa1pBzTsbikvmdGxbWFyy2KvJhLBD6aHySfzkIht0bzbNfsyXnrmV23ubc\nb9q8952CmO+UPvGRvhfxD4G8GS4kiU2uJiwgKNLi8WfYf/RAnE7l3aaDj100P3oC\nCB6UyH3N9a813qK9WOXiJsxpCZbgfSexinOh6ZflB44d1n+79w4=\n=lKJk\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f8792b0ceda62e8c57a6a83d5801236fe9147943",
          "sha": "f8792b0ceda62e8c57a6a83d5801236fe9147943",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f8792b0ceda62e8c57a6a83d5801236fe9147943"
        }
      ],
      "message": "index: refactor, decouple interruption from sync loop\n\nNo behavior change.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-14T15:09:55Z"
      },
      "sha": "aecd73a600611e5639e342dc906ae96398687ab7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk3YTBjNjE3MzA4YmU3NDVkNzJmN2VkM2QxM2YwODRkMTA0NDliY2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97a0c617308be745d72f7ed3d13f084d10449bca",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/97a0c617308be745d72f7ed3d13f084d10449bca",
      "tree": {
        "sha": "246e7af97d04efc3d91470a35784a949b10ca6f1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/246e7af97d04efc3d91470a35784a949b10ca6f1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 246e7af97d04efc3d91470a35784a949b10ca6f1\nparent aecd73a600611e5639e342dc906ae96398687ab7\nauthor furszy <matiasfurszyfer@protonmail.com> 1770076674 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206191 -0500\n\nindex: add method to process block ranges\n\nNo behavior change.\n\nIntroduce ProcessBlocks(start, end) to handle a range of blocks\nin forward order. Currently used per-block, but this lays the\nfoundation for future batch processing and parallelization.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi8ACgkQXdI8zGhq\npiMJ6A//adjylvUYiYUX2SlsqK/CTLqIVX+5DhSmkyonSKRRnYdJb9lulZ0jwU87\ncRzcOHC3/vimtSpkn9/w1YRxEoRAzW1o3cDbNIofep2nP2vC8Z1xZvhH88RmBuR7\n9Jm2qP+X4iZQBzBP7bpDGf+f/w1jFyX9mTO/cUZhrzOb/j2gVx3LWCRfM3C2+tA5\nWeFDc4mcuFLHUMRYRBmF4IT/U2QpDixoXkpCGF4GvEBpShIjAk2l9S49bD00H25b\nksk3dQrV4qiax2xNCB/wwhnuS0/1y4BGHkUn7mCFSqZMZjYoM21ai+5ic0oCtTWI\nwaoZzNSPA2uUJcJ5wJDH8hrcMoCbzDlM0/s/Jt4A24x3ukfqXJGaqe/fhXDGzpgN\ndkpOhhfBaCllv/GzO4w21pUJEl6xc6XP21fWqrwLMWQ+VTklvI95ksGiMM1EVZnq\nPLADcyyRW0QU8YGx7WYFh4E8sssOlv7bbuXGiN5LJTdjg+E3xp8ZK1DQXkrrqDM+\n8wAu0qCc0XlNv11AqvQevRLLyaNqyPqVP53hZAkc8l6cLtKp1TkCtcvriNSW4U3Z\n4NHzx0/+oZLlWtgds0IpHsVaUGNIGsCXAiiEjJpBx+DmVx6IRLt/FRvpN6dLfEt7\nUAIpOk8dfq/1TQqgEbJV+SLCO0FUwWSDCSV1Mzi1W7u9s0lNRd4=\n=F0n9\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aecd73a600611e5639e342dc906ae96398687ab7",
          "sha": "aecd73a600611e5639e342dc906ae96398687ab7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aecd73a600611e5639e342dc906ae96398687ab7"
        }
      ],
      "message": "index: add method to process block ranges\n\nNo behavior change.\n\nIntroduce ProcessBlocks(start, end) to handle a range of blocks\nin forward order. Currently used per-block, but this lays the\nfoundation for future batch processing and parallelization.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-02T23:57:54Z"
      },
      "sha": "97a0c617308be745d72f7ed3d13f084d10449bca"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY2Mzg5YTJiYjc1NzEyYWY5ZWJjZDNjOTg3ODc0NThkNmEzNDZkNmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f6389a2bb75712af9ebcd3c98787458d6a346d6e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f6389a2bb75712af9ebcd3c98787458d6a346d6e",
      "tree": {
        "sha": "fea44ab3059028775005c63ff1b2df306478e7ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fea44ab3059028775005c63ff1b2df306478e7ed"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree fea44ab3059028775005c63ff1b2df306478e7ed\nparent 97a0c617308be745d72f7ed3d13f084d10449bca\nauthor furszy <matiasfurszyfer@protonmail.com> 1770077765 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206191 -0500\n\nindex: introduce BlockBatch struct for block range handling\n\nNo behavior change.\n\nLays the foundation for batch processing and future parallelization.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi8ACgkQXdI8zGhq\npiOc6Q/9FcM75VGA8lmu2tV54F+FBQXvhp/ZdrzTdZrStIVq2kgVYG8j2zs0w5d7\nrd36pBLW40ggbt3sP6d1gJgZ/mBX1pJTC3sf92jnhaD+yVcHIjenXdw5X1jYeWXn\nmnjsMwx/lX9xHWVXjvfvDSxIWxHtqdPfr5tBRCfgthyma4ENF04Nyoto8ci8DaHO\nc5P4NvulRYYmHzTfJmJzeWz3CG9fiH95OEkWJHxBYL66iFqvdt7CeG9VvTAQeJXL\n2Xj8RK+T1b8JJ/LlpDtj1W3C6vNdnRXIm2PR6UThAil9lx129gwAD80k5zSUQqzc\nX44AHSTyBFb9G41sQVB2KWHfAsLLJaNo6mEYKyza5pw61tpHZU4CExXqPh3T+TbI\nlaFRJC/G1Cd7xqx71GOy2ajXQikXyNHZQj7RlfWfM8klILPeqkVHrMkFcdc92+KR\n0PMbeh1C6cRP0bQYgbucBGciixoCJi1FazRS1U16peDnPDJNCB3cK/1emzH+5PBn\n7+SAM4036XPwF8NxLORmOEvDEiC34TLaTJHqrBmDPZUqlLn9fZrqpxATc878b9wX\nwkw8sBMwX5ICqAWPhd9PF0FjHS1m30CR09pqbkUm+omxr+yCExTlQxcCIIKu73Fj\nZ1dIZuoWmbRGDjWyINFD1M8RsHJSYkkr6XCjtIzCIT/hwktX9zA=\n=0ZtF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97a0c617308be745d72f7ed3d13f084d10449bca",
          "sha": "97a0c617308be745d72f7ed3d13f084d10449bca",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/97a0c617308be745d72f7ed3d13f084d10449bca"
        }
      ],
      "message": "index: introduce BlockBatch struct for block range handling\n\nNo behavior change.\n\nLays the foundation for batch processing and future parallelization.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:16:05Z"
      },
      "sha": "f6389a2bb75712af9ebcd3c98787458d6a346d6e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFiNGJkZTEzOWRlZGIyZjc1NzkyNTNhYzFkYWNlY2JkMWY5MTNkZDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1b4bde139dedb2f7579253ac1dacecbd1f913dd9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1b4bde139dedb2f7579253ac1dacecbd1f913dd9",
      "tree": {
        "sha": "940559c62fae2259b8d3eea6f4a2c11a51856533",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/940559c62fae2259b8d3eea6f4a2c11a51856533"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 940559c62fae2259b8d3eea6f4a2c11a51856533\nparent f6389a2bb75712af9ebcd3c98787458d6a346d6e\nauthor furszy <matiasfurszyfer@protonmail.com> 1770078767 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206191 -0500\n\nindex: compute block batch window\n\nSets the end of a block batch, starting from the next\nblock to sync and stopping at either the configured\nbatch size or the chain tip.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi8ACgkQXdI8zGhq\npiMwXhAAmOdcIV45FRweqBn8Xn83cHT7VuLI9VDinHP/39siEYSoOwFqEolnL63+\nB0hLe8Fjc4q95wN2lvZ9EOiXm5EGNhe2NrbmoMsDjy40NHWRgaSgl8vsd+j9btBL\nonV7qkKxX+VH9QKM9mDuasZ7qSaKYuHpXlWZtPNMN9W1eanjpnfgHxrGcuvEHsFk\nE/Tp1wid3aTyjZSN/xG3DL/1CjrjzzNdUvUufxvuuR2AskfOUveP01bsWI5HDboV\nXVFjy+H+uUzdmpLXYN4/Gzvc7kJZZ6yzXm/0ff2otk/ueN7DYEXyxfuNl+ZHOUvC\nHdJbsZIEktQeUhaXZDSzLeET2Xr8EEmJkisH4uWMWZNYO1Q8h+ailgop959vrrbj\n2UXs0gzBxK96qMA5LFGeiQ48ZFd6M9EqQJM1X6dvzKUGQPeRiwOM6khM7y0sHm2I\nUvJys+rZ+mAZhL9o6GQkBitEry3fMreKxAWYT+61vWWiZYhI3q1k48pkq5ih2qzH\n3MmGS35zr9rZmTaTX1BnPT5PZWI8kStHkJwZgSiT9CrCL9H0XJQGfYSoQ6Dshlpm\n+gj5Yt0K7GJRQqVNYIKU07vBe72AD+O17b8O310zIWeH/l2hrLDVTqB1kiRT2V7g\nJsA2FwwLW4OycONyPI4ygABsSaTje3GDNajOmn6ptvBIoidAm0g=\n=xctf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f6389a2bb75712af9ebcd3c98787458d6a346d6e",
          "sha": "f6389a2bb75712af9ebcd3c98787458d6a346d6e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f6389a2bb75712af9ebcd3c98787458d6a346d6e"
        }
      ],
      "message": "index: compute block batch window\n\nSets the end of a block batch, starting from the next\nblock to sync and stopping at either the configured\nbatch size or the chain tip.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:32:47Z"
      },
      "sha": "1b4bde139dedb2f7579253ac1dacecbd1f913dd9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMyYzM5MzMxNGJjMDdhN2Q3NmRmMDUwZjg5M2NmZWQ0YTBkNzM5NmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2c393314bc07a7d76df050f893cfed4a0d7396f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c2c393314bc07a7d76df050f893cfed4a0d7396f",
      "tree": {
        "sha": "93c7991d13654446d255d9ef262e1e710ff2f76d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/93c7991d13654446d255d9ef262e1e710ff2f76d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 93c7991d13654446d255d9ef262e1e710ff2f76d\nparent 1b4bde139dedb2f7579253ac1dacecbd1f913dd9\nauthor furszy <matiasfurszyfer@protonmail.com> 1770080019 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206191 -0500\n\nindex: enable DB writes batching during sync\n\nPass CDBBatch to subclasses so writes can be accumulated\nand committed together instead of flushed per block\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi8ACgkQXdI8zGhq\npiPEWxAAzjgkj/CJAJPg8GFdKVMZZdk+7Gg2b5ZYQMuG2ll4mBccx7UDtDUTc1E9\nNDsRMU50rZsYj2I5HvEVB2n2z4qJXU+u+TrIEMHabFcuN+2qXTGRDjPlFpIpDOng\n3fvi/qh8d7xh8Tw67jMNIPnO0NYmJjzCuvr2w+52wmZMS5TDDyUDHQwYaH9hsXtw\ne6B79YvMN4lpdzQXndG4CypqXnn44v26infOE2aIj5b72DLOkRfvsQw8YjB8VhXc\nbWEE5Nv1WPaynhi8eWSxckKj0JMCB7BS+hkRhZGOAqevZzoO1G5Ttt03J7reC1NF\nbuXFZynT54zKBagq6x8pkppjTEaArxKd9vR9Z0/UMp26O7v5sxU8aW/Ddw80tMgc\nXQcbtihOD0491IRYWeXcCikPdOjd/438r2ReoEa5YOsHHBQxHyXYetPP7+GKsLm+\nyp8I6LMOG3Ab5dCfJDwyJTXbhV3vTjTV6XWAXrxtn1Lp+oY0dcgExXuZ4AVjnOSv\nPYfeHL2UNWgqC70tqPqWW0MQnyRL11O+MTEYCFa9ypFcXcNBN0IZgGZ8VQIOwUDG\ngjOqz2Uo0oGvaD1oPAmY0EpHSpQ0nTQNh2DgxD7e/vtV8vMEspXuIVkgWEzLZXdA\nahqDPPeuFN4wHOVIp3vmzvxsYA48ZXnRKYHuw6t1g5GamYQmWqg=\n=27Pq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1b4bde139dedb2f7579253ac1dacecbd1f913dd9",
          "sha": "1b4bde139dedb2f7579253ac1dacecbd1f913dd9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1b4bde139dedb2f7579253ac1dacecbd1f913dd9"
        }
      ],
      "message": "index: enable DB writes batching during sync\n\nPass CDBBatch to subclasses so writes can be accumulated\nand committed together instead of flushed per block",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:53:39Z"
      },
      "sha": "c2c393314bc07a7d76df050f893cfed4a0d7396f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNkNDExMjk4YTFiZDE2ZDI1MzM3N2ViMmIzOGQ0OGI3MjE2ZTBkMjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cd411298a1bd16d253377eb2b38d48b7216e0d22",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cd411298a1bd16d253377eb2b38d48b7216e0d22",
      "tree": {
        "sha": "c5b0c4f67692973d168c49c450013cd5b02fc667",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c5b0c4f67692973d168c49c450013cd5b02fc667"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c5b0c4f67692973d168c49c450013cd5b02fc667\nparent c2c393314bc07a7d76df050f893cfed4a0d7396f\nauthor furszy <matiasfurszyfer@protonmail.com> 1770666656 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771206191 -0500\n\ntest: index, add initial sync batch writes coverage\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSdi8ACgkQXdI8zGhq\npiOCDhAAzxrfqttqR8vgClhxNVwfo8ZF1o7W54RUY05DaQeP94YmHxPe8VLrG6jI\nKHlw7IS7/DWs4Ty82NdP+dRjI6Id975v9LBTgejKb3qiWHbub9hyDOWwlCskypr2\nABnf9aLUWOBUb347p9Lyj7qF7OK+Xtww2k9pAGb4lC/M1I0wBSMPgvIhs4jXYL0K\nEmoKa3Huy/c9zDlBIDlg9YKJDgaP/DqGcC7QWkGuGf+stTjM4Bmyd3lxaelDMfIb\nSdcN3PDxrxCUW9fQ6RzZ02pBAp75dsCu4H42Q/P6O7pS3KzY+39qeIUxPRS7h8CD\nrSBzwbeZgjYxq9FvWXl8JDWbDA8aN8mRDJrdwTQCj4yQU5WEHc3e86z3lVNILCUw\nDwSYiYGOIGSXCCpxqCnJQGqxwHB3IJIMBMn8XdZA4UN9xfq3+M/AQwNsuXtd+rRP\nEoCHEf2bheMNnW2u5u+yjkS8qWkv/bM5eKIncnWJxQJrCtnaOY0pNwThvmHfo5HN\nQAoaC8yLn+eE+ziMdWzQlbcf114GqhFNqvxMc24UGJM79X177acs2IFXciysP4kM\n14ER2vE5O0BI1vzB08OFdfdNF2S534C/w8T9e4YfTiNtHIkIZyKigKDhgrijFanE\nbtMeYZYwesdZfV4E7B7BNDZvXXdHHDxZobS6RWmp9jvr9Ynu/rU=\n=LY8m\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2c393314bc07a7d76df050f893cfed4a0d7396f",
          "sha": "c2c393314bc07a7d76df050f893cfed4a0d7396f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c2c393314bc07a7d76df050f893cfed4a0d7396f"
        }
      ],
      "message": "test: index, add initial sync batch writes coverage",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T01:43:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-09T19:50:56Z"
      },
      "sha": "cd411298a1bd16d253377eb2b38d48b7216e0d22"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22811891091,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVPsdWT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22811891091",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "79e19f5fb5eb94933517219a60a5e17056fab783",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/79e19f5fb5eb94933517219a60a5e17056fab783",
      "created_at": "2026-02-16T01:46:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22812313012,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVPuEW0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22812313012",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "bb3e4a0c07d7a37645c789053bfecbd029e26f84",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/bb3e4a0c07d7a37645c789053bfecbd029e26f84",
      "created_at": "2026-02-16T02:16:09Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVjNzgzM2NiYmM1MjBkOWQwM2ViMWE5Mjc5YmZkMzE0NWVmODEyNjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ec7833cbbc520d9d03eb1a9279bfd3145ef81262",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ec7833cbbc520d9d03eb1a9279bfd3145ef81262",
      "tree": {
        "sha": "f37139628f1faa38145df9cc6375a780be10b35e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f37139628f1faa38145df9cc6375a780be10b35e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f37139628f1faa38145df9cc6375a780be10b35e\nparent cd411298a1bd16d253377eb2b38d48b7216e0d22\nauthor furszy <matiasfurszyfer@protonmail.com> 1770685473 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771216958 -0500\n\ntest: index, add coverage for initial sync reorgs\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSoD8ACgkQXdI8zGhq\npiPHuA//a4f+JPcPAQ7bW1Utc+bHNgqSbdk6jPyC9pXmtTar29s7fe7OaFYCj3x3\nIEMtqfbbbT9gDAZPJhb7jSxd7c5O5dCAtZRhzcVuZtFJcs9+vGQcfvnnVISwkqWj\n4wZN2vnx4ak0i8pHpN62/esYKCZr93OVl0iNdSwYhirec2ydJCI7Mk388vfkSkwM\nhG8Rb+ww3lT3kZUlZzRN7CSZeZJe0SzzQplhwQ0zMiATjG7o4kIrSvpGAWpOci+S\nMlukvloXMuY/bCi5+QLJ5/wuYUCibmpb2lWN/Ql1IPeJ2qMKjZ0mbGOI3QZtJJs+\nqt9i2yLnmoyOqZ1DAHcQCTGqT3AYNLlAdfssXbETveTeMT7HaW2W6/Hll+ULNohn\npfxcmftnouro7o8/bZts23KSBiu0MorkSdXfeQ5yajVV6yUOahCujLy8e5RKPATu\nS0nJmcRIP2PUkWRurY8CPUesgIWVq3eZmmF3OyheMq5KtvlUnTjersG+qrY1rFP2\nRGKFh2N25s4sQwpcXrc0gQWwgLRvGJcNkuXDK/6WL+7qXBwEc5VQRiFNl4tI5kq4\ntWll8KocjuJSTHv18eQav0+Br+aUO22VFkAlSrrdhICCt6tmntX5bNhPYBjYC/xZ\nhFFYTQoKBrU95qA+MrqqHPw45byqAMm29XaZioSyx5SBK6aEkLM=\n=bUPE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cd411298a1bd16d253377eb2b38d48b7216e0d22",
          "sha": "cd411298a1bd16d253377eb2b38d48b7216e0d22",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cd411298a1bd16d253377eb2b38d48b7216e0d22"
        }
      ],
      "message": "test: index, add coverage for initial sync reorgs",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T04:42:38Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:04:33Z"
      },
      "sha": "ec7833cbbc520d9d03eb1a9279bfd3145ef81262"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVkZTJlYWJmZTIxOGZlOTg5OTRjNjk0ZTJjNTJhZjk4YTk0ZDAxMjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ede2eabfe218fe98994c694e2c52af98a94d0120",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ede2eabfe218fe98994c694e2c52af98a94d0120",
      "tree": {
        "sha": "46f358cacc57b57843cfcedb1a11f1ec32eaad7a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/46f358cacc57b57843cfcedb1a11f1ec32eaad7a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 46f358cacc57b57843cfcedb1a11f1ec32eaad7a\nparent ec7833cbbc520d9d03eb1a9279bfd3145ef81262\nauthor furszy <matiasfurszyfer@protonmail.com> 1771087872 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1771216959 -0500\n\ntest: Add coverage for index locator persistence during shutdown\n\nVerifies the index persists the last processed index when interrupted.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmSoD8ACgkQXdI8zGhq\npiNSbRAAr7iEVLHkkkIVywTh1qQ3C4KzRV+TUJUMx+VIKDqYhamhPMsaesL6t3iV\nrHmHvMHXerZpsxc2JoFJAxCSmJy0EeLmVC0FlBgeqfp8zY8VwZplqrAdkzgpyJmd\nEAoSKRcuXpl69OH4I8BAGDgqqMaGHwaZ1tuJ+HkiOgTDj4vn1BAHLjmeOydDRad7\nSuhcc0BHz84Mg24/6I6XXYPoTgJ36nYWVSRUNezufjrD/WxlV0l+DGAndcqpA8lp\ndweQ+G51BoP8woeA5+hAwyFbrNlcg5ks6ZhSJcX4JeURvEjaQjU8pGEeXlrRbV9Y\nJk9gAL5pA2u1yjFfqYrVTc4CwJA4STmEXgrkl+ip4S/V+TozmQPJZz4R4AZUVxTg\nfc/BNRGageOFbzVTiruoAfaDG1/GNOfxWRof1/LCWE848as9ur3+QSWRx3mNWeIf\n4sPbt75IDkIoB3xL3oMQhiDJKQZOf5T0NEaQ4KCcqjA4makmMaDaEFPYYzkTTLJc\neU3/nupGVkRtWYjyDtfQR5sDriDNYRaOVh7Dr/zOOFo1uuv2DrLF30qKCKgBYzGe\nfs09NTSel1Ov4f/V/QG+25oIL7iCo70PMKdAGPlkDevxu44C3vcqvoBOf3uTY48b\nREjcuXYMAZ9sbFcB1EUuhKQIbC7wCYZ2NF6yN1LHjbsMmMp3ldw=\n=4LtM\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ec7833cbbc520d9d03eb1a9279bfd3145ef81262",
          "sha": "ec7833cbbc520d9d03eb1a9279bfd3145ef81262",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ec7833cbbc520d9d03eb1a9279bfd3145ef81262"
        }
      ],
      "message": "test: Add coverage for index locator persistence during shutdown\n\nVerifies the index persists the last processed index when interrupted.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-16T04:42:39Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-14T16:51:12Z"
      },
      "sha": "ede2eabfe218fe98994c694e2c52af98a94d0120"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22814082794,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVP00bq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22814082794",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/ede2eabfe218fe98994c694e2c52af98a94d0120",
      "created_at": "2026-02-16T04:44:10Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758171790",
      "pull_request_review_id": 3744186020,
      "id": 2758171790,
      "node_id": "PRRC_kwDOABII586kZlyO",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why keep `ProcessBlock` around? It should be simpler if we just have one function and it can be handed one or many blocks.",
      "created_at": "2026-02-03T09:42:49Z",
      "updated_at": "2026-02-03T10:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758171790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758171790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758183422",
      "pull_request_review_id": 3744186020,
      "id": 2758183422,
      "node_id": "PRRC_kwDOABII586kZon-",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Has this been optimized with benchmarks or are you planning to do that? This might be something differs between the indexes so it might make sense to let each index define their own value.",
      "created_at": "2026-02-03T09:45:14Z",
      "updated_at": "2026-02-03T09:47:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758183422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758183422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758271675",
      "pull_request_review_id": 3744323817,
      "id": 2758271675,
      "node_id": "PRRC_kwDOABII586kZ-K7",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": 2758171790,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Or, if you just want to keep it for encapsulation, consider making it private at least?",
      "created_at": "2026-02-03T10:06:56Z",
      "updated_at": "2026-02-03T10:06:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758271675",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758271675"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759584026",
      "pull_request_review_id": 3745865476,
      "id": 2759584026,
      "node_id": "PRRC_kwDOABII586ke-ka",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": 2758183422,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Has this been optimized with benchmarks or are you planning to do that? This might be something differs between the indexes so it might make sense to let each index define their own value.\r\n\r\nLet's handle it in a focused follow-up so we don't lose momentum here tuning a parameter.\r\n\r\nI'd rather land the structural improvements first, since they unblock other improvements and allow us to continue working on the parallelization goal (which introduces the major sync speedup).",
      "created_at": "2026-02-03T15:13:10Z",
      "updated_at": "2026-02-03T15:13:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2759584026",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759584026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759661644",
      "pull_request_review_id": 3745957674,
      "id": 2759661644,
      "node_id": "PRRC_kwDOABII586kfRhM",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": 2758171790,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Why keep `ProcessBlock` around? It should be simpler if we just have one function and it can be handed one or many blocks.\r\n\r\nBecause `ProcessBlocks` will be specialized in a follow-up commit (please see #26966) to enable additional speedups, such as processing blocks out-of-order for indexes that support it.\r\n\r\nAlso, I wouldn't merge them because these two methods solve different problems. `ProcessBlocks` handles ordering, `ProcessBlock` handles a single unit of work. I think keeping them separate keeps the code clean and easy to follow while allowing us to introduce improvements in the future.\r\n\r\n> Or, if you just want to keep it for encapsulation, consider making it private at least?\r\n\r\n~~Yeah, could do that.~~\r\n\r\njust realized that `ProcessBlocks` is private already.",
      "created_at": "2026-02-03T15:30:08Z",
      "updated_at": "2026-02-03T19:44:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2759661644",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759661644"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2778899461",
      "pull_request_review_id": 3769220456,
      "id": 2778899461,
      "node_id": "PRRC_kwDOABII586loqQF",
      "diff_hunk": "",
      "path": "src/index/txindex.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "original_commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "in_reply_to_id": null,
      "user": {
        "login": "bvbfan",
        "id": 8323581,
        "node_id": "MDQ6VXNlcjgzMjM1ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8323581?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bvbfan",
        "html_url": "https://github.com/bvbfan",
        "followers_url": "https://api.github.com/users/bvbfan/followers",
        "following_url": "https://api.github.com/users/bvbfan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bvbfan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bvbfan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bvbfan/subscriptions",
        "organizations_url": "https://api.github.com/users/bvbfan/orgs",
        "repos_url": "https://api.github.com/users/bvbfan/repos",
        "events_url": "https://api.github.com/users/bvbfan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bvbfan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This function doesn't exist anymore.",
      "created_at": "2026-02-08T08:31:24Z",
      "updated_at": "2026-02-08T08:31:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2778899461",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2778899461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2779512134",
      "pull_request_review_id": 3769969782,
      "id": 2779512134,
      "node_id": "PRRC_kwDOABII586lq_1G",
      "diff_hunk": "",
      "path": "src/index/txindex.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "original_commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "in_reply_to_id": 2778899461,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, thanks.",
      "created_at": "2026-02-08T16:55:21Z",
      "updated_at": "2026-02-08T16:55:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2779512134",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2779512134"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2782838686",
      "pull_request_review_id": 3773517236,
      "id": 2782838686,
      "node_id": "PRRC_kwDOABII586l3r-e",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 74,
      "original_position": 22,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The start and end are set here, according to the desired size. However, `block_batch.start_index` can change below. Wouldn't it be better/cleaner to set it just before the `ProcessBlocks` call? (I mean to keep the logic up to the deleted `pindex = pindex_next;` line, and put the bactch setup there.)",
      "created_at": "2026-02-09T14:06:09Z",
      "updated_at": "2026-02-09T14:06:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2782838686",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2782838686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783552904",
      "pull_request_review_id": 3774273520,
      "id": 2783552904,
      "node_id": "PRRC_kwDOABII586l6aWI",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 74,
      "original_position": 22,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> The start and end are set here, according to the desired size. However, `block_batch.start_index` can change below.\r\n\r\nIt seems the code I had for this case got dropped in the previous bad squash. Good catch.\r\nSee the missing line https://github.com/furszy/bitcoin-core/commit/54874bf43b2df6846061fbb844b7026f69e7bc74#diff-5251d93616c116c364d2d502ad2a59e901a3512194462fabacc9756f96fd8dddR274. Will re-add it. Thanks.\r\n\r\n> Wouldn't it be better/cleaner to set it just before the `ProcessBlocks` call? (I mean to keep the logic up to the deleted `pindex = pindex_next;` line, and put the bactch setup there.)\r\n\r\nThat would not only require taking `cs_main` an extra time, but would also introduce race conditions.\r\nThe extra locking comes from the chain lookup needed to determine the windowâ€™s end index. And, more importantly, if the tip changes between setting the start index and computing the end, we could end up on a fork at a lower height, resulting in an invalid window (start_index > end_index).\r\n",
      "created_at": "2026-02-09T16:39:51Z",
      "updated_at": "2026-02-09T16:39:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2783552904",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783552904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783869073",
      "pull_request_review_id": 3774596864,
      "id": 2783869073,
      "node_id": "PRRC_kwDOABII586l7niR",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 74,
      "original_position": 22,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> That would not only require taking `cs_main` an extra time, but would also introduce race conditions.\r\n> The extra locking comes from the chain lookup needed to determine the windowâ€™s end index.\r\n\r\nWhat I had in mind is setting both the start and end a bit later, after the `pindex` is finalized.\r\nI will try it out and provide a concrete code snippet a bit later.",
      "created_at": "2026-02-09T18:02:26Z",
      "updated_at": "2026-02-09T18:02:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2783869073",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783869073"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784110424",
      "pull_request_review_id": 3774853497,
      "id": 2784110424,
      "node_id": "PRRC_kwDOABII586l8idY",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 74,
      "original_position": 22,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> What I had in mind is setting both the start and end a bit later, after the pindex is finalized.\r\n> I will try it out and provide a concrete code snippet a bit later.\r\n\r\nI see the same two problems there, with an extra requirement of a reorg check and another rewind call. Which makes it even worse.",
      "created_at": "2026-02-09T19:00:26Z",
      "updated_at": "2026-02-09T19:00:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784110424",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784110424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784715044",
      "pull_request_review_id": 3775599058,
      "id": 2784715044,
      "node_id": "PRRC_kwDOABII586l-2Ek",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 74,
      "original_position": 22,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I acknowledge that it's important to take the cs_main lock only once in the typical scenario.\r\nAlso, the missing update of end was identified and fixed! Thx",
      "created_at": "2026-02-09T21:56:23Z",
      "updated_at": "2026-02-09T21:56:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784715044",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784715044"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784799921",
      "pull_request_review_id": 3775683458,
      "id": 2784799921,
      "node_id": "PRRC_kwDOABII586l_Kyx",
      "diff_hunk": "@@ -255,13 +265,14 @@ void BaseIndex::Sync()\n                     m_synced = true;\n                     break;\n                 }\n+                // Just process one block in case of tip change\n+                block_batch.end_index = block_batch.start_index;\n             }\n             if (block_batch.start_index->pprev != pindex && !Rewind(pindex, block_batch.start_index->pprev)) {\n                 FatalErrorf(\"Failed to rewind %s to a previous chain tip\", GetName());\n                 return;\n             }\n \n-            // For now, process a single block at time\n             if (!ProcessBlocks(block_batch.start_index, block_batch.end_index)) return; // error logged internally",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "original_commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Code review shows that by this point `start_index` and `end_index` are not null, but there is several if's to ensure that, it's not trivial. I propose to document/ensure this invariant with an `Assume` before this line, especially having in mind that `ProcessBlocks` crashes if start or end is `nullptr`.",
      "created_at": "2026-02-09T22:17:24Z",
      "updated_at": "2026-02-09T22:17:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784799921",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784799921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 276,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784804029",
      "pull_request_review_id": 3775687762,
      "id": 2784804029,
      "node_id": "PRRC_kwDOABII586l_Ly9",
      "diff_hunk": "@@ -198,6 +198,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;\n+        if (!ProcessBlock(*it)) return false;",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "original_commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: the \"// error logged internally\" comment could be passed on here as well.",
      "created_at": "2026-02-09T22:18:25Z",
      "updated_at": "2026-02-09T22:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784804029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784804029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784820993",
      "pull_request_review_id": 3775705448,
      "id": 2784820993,
      "node_id": "PRRC_kwDOABII586l_P8B",
      "diff_hunk": "",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "825b2c73944637894363aaf342d0cd06cdff7b47",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "A minor comment on the commit description: I feel an ambiguity or typo around \"during\".\n```\nPass CDBBatch to subclasses during so writes can be accumulated and committed together instead of flushing per block.\n```",
      "created_at": "2026-02-09T22:22:37Z",
      "updated_at": "2026-02-09T22:22:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784820993",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784820993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296323",
      "pull_request_review_id": 3776221298,
      "id": 2785296323,
      "node_id": "PRRC_kwDOABII586mBD_D",
      "diff_hunk": "@@ -198,6 +198,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;\n+        if (!ProcessBlock(*it)) return false;",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "original_commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "in_reply_to_id": 2784804029,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done as suggested.",
      "created_at": "2026-02-10T01:12:04Z",
      "updated_at": "2026-02-10T01:12:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2785296323",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296323"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296796",
      "pull_request_review_id": 3776221723,
      "id": 2785296796,
      "node_id": "PRRC_kwDOABII586mBEGc",
      "diff_hunk": "",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "825b2c73944637894363aaf342d0cd06cdff7b47",
      "in_reply_to_id": 2784820993,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed.",
      "created_at": "2026-02-10T01:12:16Z",
      "updated_at": "2026-02-10T01:12:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2785296796",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296796"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785303894",
      "pull_request_review_id": 3776228296,
      "id": 2785303894,
      "node_id": "PRRC_kwDOABII586mBF1W",
      "diff_hunk": "@@ -255,13 +265,14 @@ void BaseIndex::Sync()\n                     m_synced = true;\n                     break;\n                 }\n+                // Just process one block in case of tip change\n+                block_batch.end_index = block_batch.start_index;\n             }\n             if (block_batch.start_index->pprev != pindex && !Rewind(pindex, block_batch.start_index->pprev)) {\n                 FatalErrorf(\"Failed to rewind %s to a previous chain tip\", GetName());\n                 return;\n             }\n \n-            // For now, process a single block at time\n             if (!ProcessBlocks(block_batch.start_index, block_batch.end_index)) return; // error logged internally",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "original_commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "in_reply_to_id": 2784799921,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Probably better to just pass them by ref instead. Will do if have to re-touch. Otherwise it can be tackled in a quick follow-up too.",
      "created_at": "2026-02-10T01:15:40Z",
      "updated_at": "2026-02-10T01:15:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2785303894",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785303894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 276,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799911732",
      "pull_request_review_id": 3792158782,
      "id": 2799911732,
      "node_id": "PRRC_kwDOABII586m40M0",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": 2758183422,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Bitcoin [blocks do not have a consistent size](https://coinledger.io/research/bitcoin-blockchain-size-and-growth-over-time), so batching by block size will result in irregular batch sizes. I suggest considering other approaches, such as a fixed transaction count (e.g., adding blocks until the number of transactions within them falls within a target range). This could be particularly interesting for txindex, as most batches would have a similar byte size. This would make batches more uniform and lead to more predictable computation and performance.\n\nHowever, this approach would make parallelisation more difficult, since generating the batch would require a precomputation step. This is a considerable trade-off, especially given that [parallelisation of the batch computation (#26966)](https://github.com/bitcoin/bitcoin/pull/26966) would likely be a more impactful enhancement.\n",
      "created_at": "2026-02-12T16:40:43Z",
      "updated_at": "2026-02-12T16:40:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2799911732",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799911732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2800198266",
      "pull_request_review_id": 3792564543,
      "id": 2800198266,
      "node_id": "PRRC_kwDOABII586m56J6",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I wouldnâ€™t say this test truly *mimics a restart* (i.e., shutting down the node and immediately restarting it, without the blockchain growing). It is closer to a *continuation after a clean shutdown of the whole node for a long period of time*. This test is still interesting, but it does not cover a new bug window introduced by the batch approach (shutting down the node during a batch).\n\nThe test currently does the following:\n\n- Pre-mine 100 blocks  \n- Mine 173 additional blocks  \n- Create the index  \n- Synchronize the index to the tip  \n- Mine another 173 blocks  \n- Recreate the index  \n- Synchronize again to the new tip  \n\nIn a real-world scenario, all blocks would already exist on disk, and a restart would likely happen *during* a batch (for example at height 196, where the previous batch ended at 180).\n\nI would like to see a test (either a modification of this one or a new one) that verifies the index is not corrupted and can correctly resume if the node is restarted during a sync, before reaching the tip.\n\nA possible approach for such a test could be:\n\n1. Pre-populate the blockchain (e.g., 300 blocks already on disk)  \n2. Start index sync with `batch_size = 30`  \n3. Interrupt the sync after several batches but before completion  \n4. Simulate a shutdown  \n5. Restart the index and verify (with no new blocks added):  \n   - It resumes from the last checkpoint (not from genesis or the last processed block)  \n   - No corruption occurs in re-processed blocks  \n   - The sync successfully completes  \n",
      "created_at": "2026-02-12T17:37:52Z",
      "updated_at": "2026-02-12T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2800198266",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2800198266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2804822404",
      "pull_request_review_id": 3797955147,
      "id": 2804822404,
      "node_id": "PRRC_kwDOABII586nLjGE",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sorry, I don't see the point here. What you described is essentially a restart. The index gets recreated, initial sync resumes from the last stored index. That's all what we need.\r\nFeel free to experiment on a follow-up, or I could also add it here if you have some code too.",
      "created_at": "2026-02-13T15:37:00Z",
      "updated_at": "2026-02-13T15:37:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2804822404",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2804822404"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2805872084",
      "pull_request_review_id": 3799243309,
      "id": 2805872084,
      "node_id": "PRRC_kwDOABII586nPjXU",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sorry if I didnâ€™t explain this clearly before, let me try again.\r\n\r\nWith this PR, some blocks are being indexed (on disk), but the index pointer is not updated because the `Commit()` function has not been called. The commit is executed every 30 seconds (which wonâ€™t happen during the test) or when the tip is processed (batch tip).\r\n\r\nWhat Iâ€™m suggesting is to test the scenario where a batch is processed but the tip is not processed. In that case, the index should sync starting from the **last committed** block.\r\n\r\nAfter debugging your test case, the second round started from the last element of the last batch, as it was the end of the chain at round 0.  I would suggest checking the following cases (with a batch of 30 blocks and at least 101 blocks):\r\n\r\n* If the sync process is shut down when block 100 is processed, after a restart, the first block to sync should be 91 (not 0,  91 or 120), verifying that if a batch is interrupted, after a restart, the index will reindex from the last committed batch.\r\n* If the sync process is shut down when block 90 is processed, after a restart, the first block to sync should be 91, verify and an edge case of the previous scenario.\r\n\r\n\r\n\r\n**Update**\r\n\r\nI noticed that in the [code](https://github.com/furszy/bitcoin-core/blob/3687ead892d207ddbdfec3f2ef5c086130414d9a/src/index/base.cpp#L226), interruptions are handled by committing:\r\n```c++\r\nif (m_interrupt) {\r\n    LogInfo(\"%s: m_interrupt set; exiting ThreadSync\", GetName());\r\n\r\n    SetBestBlockIndex(pindex);\r\n    Commit();\r\n    return;\r\n}\r\n```\r\nBecause of this, the scenarios described above may not be useful, since the last processed block might always be committed before shutdown.\r\n\r\nIâ€™m not sure whether this interruption only applies to graceful shutdowns or if it also covers crash scenarios.\r\n\r\n",
      "created_at": "2026-02-13T19:58:32Z",
      "updated_at": "2026-02-13T20:00:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2805872084",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2805872084"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2805948523",
      "pull_request_review_id": 3799341769,
      "id": 2805948523,
      "node_id": "PRRC_kwDOABII586nP2Br",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> With this PR, some blocks are being indexed (on disk), but the index pointer is not updated because the Commit() function has not been called. The commit is executed every 30 seconds (which wonâ€™t happen during the test) or when the tip is processed (batch tip).\r\n\r\nJust to be accurate: batch writes and the index locator update are, on purpose, not related procedures. `Commit()` happens every 30 secs, during interruption or when the tip is reached prior to finishing initial sync.\r\n\r\n> What Iâ€™m suggesting is to test the scenario where a batch is processed but the tip is not processed. In that case, the index should sync starting from the last committed block.\r\n\r\nSure, we could return an error inside the test child index `CustomAppend()` that finishes the process early.\r\nIt shouldn't be hard to code. Feel encouraged to experiment with it. I can cherry-pick your changes if you have a test commit for it.",
      "created_at": "2026-02-13T20:21:45Z",
      "updated_at": "2026-02-13T20:21:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2805948523",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2805948523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806305338",
      "pull_request_review_id": 3799830227,
      "id": 2806305338,
      "node_id": "PRRC_kwDOABII586nRNI6",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": ">Just to be accurate: batch writes and the index locator update are, on purpose, not related procedures. Commit() happens every 30 secs, during interruption or when the tip is reached prior to finishing initial sync.\n\nYes, ofc :D\n>It shouldn't be hard to code. Feel encouraged to experiment with it.\nðŸ«¡",
      "created_at": "2026-02-13T22:08:46Z",
      "updated_at": "2026-02-13T22:08:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2806305338",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806305338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806770063",
      "pull_request_review_id": 3800434127,
      "id": 2806770063,
      "node_id": "PRRC_kwDOABII586nS-mP",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Having played around with the code, I found that the case i mentioned didnt worked correctly\n- **Round 0**:\n    - Max height: 273\n    - After sync, tip is at 273\n- **Round 1**:\n    - Max height: 446 (273 + 173)\n    - Sync fails at height 310\n- **Round 2**:\n\t- The first batch starts at 273, however, it should be 304 (the previous round synced one batch)\n    \n    This happens because CustomAppend() returns false and the process is stpped before the following branch is reached\n    ```c++\n    if (m_interrupt) {\n        LogInfo(\"%s: m_interrupt set; exiting ThreadSync\", GetName());\n\t     SetBestBlockIndex(pindex);\n        Commit();\n        return;\n    }\n\t```\nBelow is the code to reproduce the issue:\n\n```c++\n// Extend BlockFilterIndex to create a custom test function CustomAppend\nclass BlockFilterIndexTest : public BlockFilterIndex\n{\npublic:\n    BlockFilterIndexTest(std::unique_ptr<interfaces::Chain> chain, BlockFilterType filter_type, size_t n_cache_size, bool f_memory) :\n        BlockFilterIndex(std::move(chain), filter_type, n_cache_size, f_memory) {}\n\n    // Override CustomAppend to simulate an error during append at a specific block height\n    bool CustomAppend(CDBBatch& batch, const interfaces::BlockInfo& block) override\n    {\n        if (block.height == 290) {\n            return false;\n        }\n        return BlockFilterIndex::CustomAppend(batch, block);\n    }\n};\n\n// Ensure the initial sync batch window behaves as expected.\n// Tests sync from the genesis block and from a higher block to mimic a restart.\n// Note: Test runs in /tmp by default, which is usually cached, so timings are not\n// a meaningful benchmark (use -testdatadir to run it elsewhere).\nBOOST_FIXTURE_TEST_CASE(initial_sync_batch_window, BuildChainTestingSetup)\n{\n    constexpr int MINE_BLOCKS = 173;\n    constexpr int BATCH_SIZE = 30;\n\n    int expected_tip = 100; // pre-mined blocks\n    for (int round = 0; round < 3; round++) { // two additional rounds to test sync from genesis and from a higher block\n        mineBlocks(MINE_BLOCKS); // Generate blocks\n        const int tip_height = WITH_LOCK(::cs_main, return m_node.chainman->ActiveChain().Height());\n        BOOST_REQUIRE(tip_height == MINE_BLOCKS + expected_tip);\n        expected_tip = tip_height;\n\n        BlockFilterIndexTest filter_index(interfaces::MakeChain(m_node), BlockFilterType::BASIC, 1 << 20, /*f_memory=*/false);\n        filter_index.SetProcessingBatchSize(BATCH_SIZE);\n        BOOST_REQUIRE(filter_index.Init());\n        BOOST_CHECK(!filter_index.BlockUntilSyncedToCurrentChain());\n\n        // Ensure we can sync up to the tip\n        const auto& summary_pre{filter_index.GetSummary()};\n        // breakpoint here for following gdb ouptut\n        filter_index.Sync();\n        if (round == 1) { continue; }\n        const auto& summary{filter_index.GetSummary()};\n        BOOST_CHECK(summary.synced);\n```\n\nGDB output **before** `Sync()` in round 2:\n\n```\ngdb build/bin/test_bitcoin\nb blockfilter_index_tests.cpp:427\nb src/index/base.cpp:255\nrun\n(gdb) p round\n$2 = 2\n(gdb) p expected_tip\n$3 = 619\n(gdb) p summary_pre.best_block_height\n$4 = 273\n```\n",
      "created_at": "2026-02-14T01:47:55Z",
      "updated_at": "2026-02-14T02:01:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2806770063",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806770063"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806787570",
      "pull_request_review_id": 3800451141,
      "id": 2806787570,
      "node_id": "PRRC_kwDOABII586nTC3y",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Haven't gone through this in detail, but the locator won't update in your second round unless you advance the mock time. Also, keep in mind that if any block within the batch fails, the entire process aborts. The process doesn't save intermediate batch states.",
      "created_at": "2026-02-14T02:03:32Z",
      "updated_at": "2026-02-14T02:03:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2806787570",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806787570"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806805789",
      "pull_request_review_id": 3800473079,
      "id": 2806805789,
      "node_id": "PRRC_kwDOABII586nTHUd",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> but the locator won't update in your second round unless you advance the mock time.\n\nyes i didnt want to simulate 30 sec, i wanted the error before the timmer commit (to fail into the error handling `m_interrupt`)\n> . Also, keep in mind that if any block within the batch fails, the entire process aborts\n\nI saw that when `CustomAppend` returns false, it executes `FatalErrorf`, which simply stops the node (not gracefully) instead of raising `m_interrupt`, my bad\n\n1. What do you think about modifying the error handling in the sync process to prevent losing stored data by raising the `m_interrupt` flag? In the worst case, we lose 29.59 seconds of execution, it might not be worth it and let everything as it currently is\n\n2. I will try to modify the `CustomAppend` to raise the `m_interrupt` and create a test to show how it is correctly processed, i think it is more interesting this approach\n\n",
      "created_at": "2026-02-14T02:18:26Z",
      "updated_at": "2026-02-14T02:25:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2806805789",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2806805789"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807338683",
      "pull_request_review_id": 3801538404,
      "id": 2807338683,
      "node_id": "PRRC_kwDOABII586nVJa7",
      "diff_hunk": "@@ -198,6 +199,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(CDBBatch& db_batch, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;",
      "path": "src/index/base.cpp",
      "position": 40,
      "original_position": 40,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Returning `false` here causes the interrupt to be handled incorrectly as it will be handled in the Sync function like this:\n\n```cpp\nif (!ProcessBlocks(db_batch, block_batch.start_index, block_batch.end_index)) {\n    return; // error logged internally\n}\n```\n\nThis early return prevents execution from reaching line 226, where the correct interrupt-handling logic resides. As a result, the expected recovery path is skipped.\n\nSpecifically, this makes the following block effectively unreachable in this scenario:\n\n```cpp\nif (m_interrupt) {\n    LogInfo(\"%s: m_interrupt set; exiting ThreadSync\", GetName());\n\n    SetBestBlockIndex(pindex);\n\n    Commit();\n    return;\n}\n```\n\nI didn't find in the file a place where m_interrupt is handled in this way, might be interesting to try to make the code fall on the graceful path. A possible solution might be changing the return by continue, so it will go to the start of the loop and fall into the error handling logic\n",
      "created_at": "2026-02-14T10:50:59Z",
      "updated_at": "2026-02-14T10:54:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2807338683",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807338683"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 212,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807343816",
      "pull_request_review_id": 3801550901,
      "id": 2807343816,
      "node_id": "PRRC_kwDOABII586nVKrI",
      "diff_hunk": "@@ -198,6 +199,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(CDBBatch& db_batch, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;",
      "path": "src/index/base.cpp",
      "position": 40,
      "original_position": 40,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2807338683,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I debbuged and with this code, the restart point is ok:\n```\n if (!ProcessBlocks(db_batch, block_batch.start_index, block_batch.end_index)){\n      if (!m_interrupt) {\n           return;\n}\n                continue; \n}\n```",
      "created_at": "2026-02-14T10:58:41Z",
      "updated_at": "2026-02-14T10:58:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2807343816",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807343816"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 212,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807692937",
      "pull_request_review_id": 3802169228,
      "id": 2807692937,
      "node_id": "PRRC_kwDOABII586nWf6J",
      "diff_hunk": "@@ -198,6 +199,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(CDBBatch& db_batch, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;",
      "path": "src/index/base.cpp",
      "position": 40,
      "original_position": 40,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2807338683,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nice catch. Pushed an update that fixes it and adds test coverage.\r\n\r\nI'm considering alternative options for the structure, like removing the interruption update, but will let the ideas settle over the weekend. At least we have some nice test coverage for it now.\r\n\r\nSome context on \"removing the interruption update\":\r\nSince we save progress every 30 seconds, saving it during interruptions makes little sense, as the work lost is minimal. The code is probably there merely because it was introduced on the early index days, where things were way more chaotic, and no one really paid much attention to it afterwards.",
      "created_at": "2026-02-14T17:10:37Z",
      "updated_at": "2026-02-14T17:26:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2807692937",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807692937"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 212,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807700437",
      "pull_request_review_id": 3802187916,
      "id": 2807700437,
      "node_id": "PRRC_kwDOABII586nWhvV",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> What do you think about modifying the error handling in the sync process to prevent losing stored data by raising the m_interrupt flag? In the worst case, we lose 29.59 seconds of execution, it might not be worth it and let everything as it currently is\r\n\r\nAs you said, since we already save progress every 30 seconds, saving it during interruptions makes very little sense. The amount of work lost is minimal. Yet, this has been the case since the indexes were introduced, and I suspect it hasn't received much attention, which is probably why no one removed it before..\r\nItâ€™s something we could consider.",
      "created_at": "2026-02-14T17:20:28Z",
      "updated_at": "2026-02-14T17:20:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2807700437",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807700437"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807847401",
      "pull_request_review_id": 3802417249,
      "id": 2807847401,
      "node_id": "PRRC_kwDOABII586nXFnp",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 77,
      "original_position": 63,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2800198266,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nice, if you agree, you can mark this thread as resolved then ",
      "created_at": "2026-02-14T19:47:27Z",
      "updated_at": "2026-02-14T19:47:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2807847401",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807847401"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 396,
      "original_line": 389,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807862920",
      "pull_request_review_id": 3802471222,
      "id": 2807862920,
      "node_id": "PRRC_kwDOABII586nXJaI",
      "diff_hunk": "@@ -198,6 +199,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(CDBBatch& db_batch, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;",
      "path": "src/index/base.cpp",
      "position": 40,
      "original_position": 40,
      "commit_id": "ede2eabfe218fe98994c694e2c52af98a94d0120",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": 2807338683,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Nice catch. Pushed an update that fixes it and adds test coverage.\n\nNice. I finally managed to explain the scenario Iâ€™ve been trying to describe from the beginning, sorry for not expressing it clearly before (Iâ€™m still new as a core reviewer), at least I found a potential bug. \n\nI donâ€™t want to take up more of your time on it, so feel free to resolve this thread. I think the test implemented for the scenario is enough.\n\n> Since we save progress every 30 seconds, saving it during interruptions makes little sense, as the work lost is minimal. The code is probably there merely because it was introduced in the early index days.\n\nThatâ€™s a fair point. However, Iâ€™m not sure I see the benefit of removing it. I agree that this could be an argument for not introducing the code in the first place, since the potential work lost is minimal. But given that itâ€™s already there, Iâ€™m not sure whether removing it (even if the performance impact is small) is an improvement. Do you have something specific in mind? Perhaps something related to the parallelisation of the indexing process?\n",
      "created_at": "2026-02-14T20:04:09Z",
      "updated_at": "2026-02-14T20:45:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2807862920",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2807862920"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 212,
      "original_line": 212,
      "side": "RIGHT"
    }
  ]
}