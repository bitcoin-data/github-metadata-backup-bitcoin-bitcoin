{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489",
    "id": 3239243501,
    "node_id": "PR_kwDOABII587BEu7t",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34489",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34489.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34489.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/3687ead892d207ddbdfec3f2ef5c086130414d9a",
    "number": 34489,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "index: batch db writes during initial sync",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Decouples part of #26966.\r\n\r\nRight now, index initial sync writes to disk for every block, which is not the best for HDD. This change batches those, so disk writes are less frequent during initial sync. This also cuts down `cs_main` contention by reducing the number of `NextBlockSync` calls (instead of calling it for every block, we will call it once per block window), making the node more responsive (IBD and validation) while indexes sync up. On top of that, it lays the groundwork for the bigger speedups, since part of the parallelization pre-work is already in place.\r\n\r\nJust as a small summary:\r\n\r\n* Batch DB writes instead of flushing per block, which improves sync time on HDD due to the reduced number of disk write operations.\r\n* Reduce `cs_main` lock contention, which improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n* Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n* Reduces the number of generated LDB files. See l0rinc's [comment](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3876972773).\r\n\r\nNote:\r\nPending initial sync benchmark and further testing. I have only focused on decoupling and simplifying what was in #26966 first. Commits should be simple to digest.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2026-02-03T04:06:34Z",
    "updated_at": "2026-02-12T18:06:28Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "912594a3681cc98ed17ff38392736833819a9a83",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2026_index_batch_processing",
      "ref": "2026_index_batch_processing",
      "sha": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 447670,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-11T17:48:16Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2026-02-07T21:37:50Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "64294c89094d5ab10d87236729cc267fde0a24ca",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38905,
        "stargazers_count": 88091,
        "watchers_count": 88091,
        "size": 303642,
        "default_branch": "master",
        "open_issues_count": 731,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-12T09:43:32Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-12T18:02:24Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 213,
    "deletions": 45,
    "changed_files": 9,
    "commits": 6,
    "review_comments": 22,
    "comments": 22
  },
  "events": [
    {
      "event": "labeled",
      "id": 22484045491,
      "node_id": "LE_lADOABII587nzVEtzwAAAAU8J06z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484045491",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:06:39Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 3838931379,
      "node_id": "IC_kwDOABII587k0XGz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3838931379",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:07:08Z",
      "updated_at": "2026-02-12T17:40:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874191155) |\n| Concept ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3840520048), [arejula27](https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3792564543) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34440](https://github.com/bitcoin/bitcoin/pull/34440) (Refactor CChain methods to use references, tests by optout21)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- BlockFilterIndex filter_index(interfaces::MakeChain(m_node), BlockFilterType::BASIC, 1 << 20, /*f_memory=*/false) in src/test/blockfilter_index_tests.cpp\n\n\n\n<sup>2026-02-10 01:23:16</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3838931379",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22484634725,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU8MExl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484634725",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/cf065aa603769458f475e1180fd4924d68023695",
      "created_at": "2026-02-03T04:42:15Z"
    },
    {
      "event": "labeled",
      "id": 22484641130,
      "node_id": "LE_lADOABII587nzVEtzwAAAAU8MGVq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484641130",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:42:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3839020141,
      "node_id": "IC_kwDOABII587k0sxt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3839020141",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:42:56Z",
      "updated_at": "2026-02-03T04:42:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `iwyu`: https://github.com/bitcoin/bitcoin/actions/runs/21616547248/job/62296358632</sub>\n<sub>LLM reason (âœ¨ experimental): IWYU (include-what-you-use) reported a failure in the test script, causing the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3839020141",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3744186020,
      "node_id": "PRR_kwDOABII587fK76k",
      "url": null,
      "actor": null,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-03T09:47:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "This relates to what you wrote [here](https://github.com/bitcoin/bitcoin/pull/33306#issuecomment-3832258602) right? It would be helpful that you check if it solves the LevelDB file issue in coinstatsindex and I am also curious about your benchmark results because @l0rinc did not find that this was  leading to a speed up.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3744186020",
      "submitted_at": "2026-02-03T09:47:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3840520048,
      "node_id": "IC_kwDOABII587k6a9w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3840520048",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:27Z",
      "updated_at": "2026-02-03T10:38:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, I prefer this over https://github.com/bitcoin/bitcoin/pull/33306 - and will investigate if this solves that problem once my benchmarking servers free up.\r\n\r\n> because @l0rinc did not find that this was leading to a speed up.\r\n\r\nI experimented with something similar in https://github.com/l0rinc/bitcoin/pull/37/changes, will compare it against this change. I wrote:\r\n> indexes: batch index writes: 34188s, 211M, 8 files\r\nIt solved the fragmentation, but didn't speed up anything.\r\nI still think this is a better direction than adding manual compactions.\r\n\r\nMost likely since writing isn't the bottleneck but MuHash calculations were.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3840520048",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22493171192,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU8so34",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493171192",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:29Z"
    },
    {
      "event": "subscribed",
      "id": 22493171236,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU8so4k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493171236",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:29Z"
    },
    {
      "event": "commented",
      "id": 3841864727,
      "node_id": "IC_kwDOABII587k_jQX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841864727",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:16Z",
      "updated_at": "2026-02-03T15:05:18Z",
      "author_association": "MEMBER",
      "body": "> This relates to what you wrote [here](https://github.com/bitcoin/bitcoin/pull/33306#issuecomment-3832258602) right? It would be helpful that you check if it solves the LevelDB file issue in coinstatsindex and I am also curious about your benchmark results because @l0rinc did not find that this was leading to a speed up.\r\n\r\n@fjahr the comment was merely an excuse to decouple the DB writes batching code out of #26966 rather than me having a formed opinion in favor or against #33306. That's why I didn't mention it in the PR description. Maybe the changes complement each other.\r\n\r\nTo be crystal clear, just updated the PR description with further details on why this change worth alone, independently on #33306.\r\n\r\nTo summarize it here, the goal of the changes are:\r\n* Batch DB writes instead of flushing per block, which will improve sync time on HDD due to the reduced number of IO operations.\r\n* Reduce `cs_main` lock contention, which orthogonally improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n*  Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n\r\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3841864727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22500147622,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9HQGm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147622",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "subscribed",
      "id": 22500147682,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9HQHi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147682",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "mentioned",
      "id": 22500147731,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9HQIT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147731",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "subscribed",
      "id": 22500147787,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9HQJL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147787",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22507397305,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU9i6C5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22507397305",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "dd76491174b3a3b60c174822f75abb03fda3b1d4",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/dd76491174b3a3b60c174822f75abb03fda3b1d4",
      "created_at": "2026-02-03T19:44:16Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22508382741,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU9mqoV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508382741",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a2f84476bf3cfdb4bb20193d1253a9ca131f93a9",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/a2f84476bf3cfdb4bb20193d1253a9ca131f93a9",
      "created_at": "2026-02-03T20:25:04Z"
    },
    {
      "event": "commented",
      "id": 3843480324,
      "node_id": "IC_kwDOABII587lFtsE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3843480324",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:26:03Z",
      "updated_at": "2026-02-03T20:26:03Z",
      "author_association": "MEMBER",
      "body": "Updated per feedback from @hebasto (thanks!).\r\nChanged `<cinttypes>` include for `<cstdint>` to make IWYU happy.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3843480324",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22508406509,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9mwbt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508406509",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:26:04Z"
    },
    {
      "event": "subscribed",
      "id": 22508406548,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9mwcU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508406548",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:26:04Z"
    },
    {
      "event": "commented",
      "id": 3843531910,
      "node_id": "IC_kwDOABII587lF6SG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3843531910",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:38:31Z",
      "updated_at": "2026-02-04T08:33:44Z",
      "author_association": "MEMBER",
      "body": "> Updated per feedback from @hebasto (thanks!). Changed `<cinttypes>` include for `<cstdint>` to make IWYU happy.\r\n\r\n~I guess, this is a bug in IWYU caused by https://github.com/include-what-you-use/include-what-you-use/commit/44480a2de0d8ef039b13391997f274ea33750be9.~\r\n\r\n**UPDATE:** Fixed in https://github.com/bitcoin/bitcoin/pull/34498.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3843531910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22508710480,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9n6pQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508710480",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:38:33Z"
    },
    {
      "event": "subscribed",
      "id": 22508710530,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9n6qC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508710530",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:38:33Z"
    },
    {
      "event": "commented",
      "id": 3847617830,
      "node_id": "IC_kwDOABII587lVf0m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3847617830",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T13:57:24Z",
      "updated_at": "2026-02-04T13:57:24Z",
      "author_association": "MEMBER",
      "body": "Can you run all unit and functional tests on all commits? Or do they time out?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3847617830",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22531839415,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU_AJW3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22531839415",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "created_at": "2026-02-04T15:17:49Z"
    },
    {
      "event": "commented",
      "id": 3848080895,
      "node_id": "IC_kwDOABII587lXQ3_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3848080895",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T15:22:03Z",
      "updated_at": "2026-02-04T15:22:09Z",
      "author_association": "MEMBER",
      "body": "> Can you run all unit and functional tests on all commits? Or do they time out?\r\n\r\nBad squash, my bad. Thanks for the heads up. Fixed.\r\nAlso rebased the branch to pick up the CI changes.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3848080895",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "unlabeled",
      "id": 22533505633,
      "node_id": "UNLE_lADOABII587nzVEtzwAAAAU_GgJh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22533505633",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T16:19:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3865998998,
      "node_id": "IC_kwDOABII587mbnaW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3865998998",
      "actor": {
        "login": "Jhackman2019",
        "id": 86029387,
        "node_id": "MDQ6VXNlcjg2MDI5Mzg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/86029387?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jhackman2019",
        "html_url": "https://github.com/Jhackman2019",
        "followers_url": "https://api.github.com/users/Jhackman2019/followers",
        "following_url": "https://api.github.com/users/Jhackman2019/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Jhackman2019/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Jhackman2019/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Jhackman2019/subscriptions",
        "organizations_url": "https://api.github.com/users/Jhackman2019/orgs",
        "repos_url": "https://api.github.com/users/Jhackman2019/repos",
        "events_url": "https://api.github.com/users/Jhackman2019/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Jhackman2019/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T02:54:45Z",
      "updated_at": "2026-02-08T10:52:14Z",
      "author_association": "NONE",
      "body": "Builds clean on ARM64 (Pi 5, Debian Bookworm). All index-related functional tests and blockfilter_index unit tests pass.\n:)",
      "user": {
        "login": "Jhackman2019",
        "id": 86029387,
        "node_id": "MDQ6VXNlcjg2MDI5Mzg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/86029387?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jhackman2019",
        "html_url": "https://github.com/Jhackman2019",
        "followers_url": "https://api.github.com/users/Jhackman2019/followers",
        "following_url": "https://api.github.com/users/Jhackman2019/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Jhackman2019/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Jhackman2019/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Jhackman2019/subscriptions",
        "organizations_url": "https://api.github.com/users/Jhackman2019/orgs",
        "repos_url": "https://api.github.com/users/Jhackman2019/repos",
        "events_url": "https://api.github.com/users/Jhackman2019/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Jhackman2019/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3865998998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3769220456,
      "node_id": "PRR_kwDOABII587gqb1o",
      "url": null,
      "actor": null,
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-08T08:31:24Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "bvbfan",
        "id": 8323581,
        "node_id": "MDQ6VXNlcjgzMjM1ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8323581?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bvbfan",
        "html_url": "https://github.com/bvbfan",
        "followers_url": "https://api.github.com/users/bvbfan/followers",
        "following_url": "https://api.github.com/users/bvbfan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bvbfan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bvbfan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bvbfan/subscriptions",
        "organizations_url": "https://api.github.com/users/bvbfan/orgs",
        "repos_url": "https://api.github.com/users/bvbfan/repos",
        "events_url": "https://api.github.com/users/bvbfan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bvbfan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3769220456",
      "submitted_at": "2026-02-08T08:31:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22624679009,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVEiTRh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22624679009",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6f66ff7e0d4424c48e0e27e9fa72d26033ba6851",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/6f66ff7e0d4424c48e0e27e9fa72d26033ba6851",
      "created_at": "2026-02-08T16:55:13Z"
    },
    {
      "event": "reviewed",
      "id": 3773517236,
      "node_id": "PRR_kwDOABII587g6020",
      "url": null,
      "actor": null,
      "commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T14:06:10Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3773517236",
      "submitted_at": "2026-02-09T14:06:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3872061961,
      "node_id": "IC_kwDOABII587myvoJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3872061961",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T14:29:36Z",
      "updated_at": "2026-02-09T21:53:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "I am confused as to how this batching relates to the batching logic of the orginal code.\r\n~~Looking at the pre-change `BaseIndex::Sync()`, it seems that Commit/WriteBatch occured only every 30 seconds (or at the chain tip), not after each block. This change does a `WriteBatch` after every 500 blocks, which in fact may be even more frequent. The original commit-after-every-30-secs is still there, so I don't see how this change makes _less_ writes. Maybe I misunderstand the change.~~\r\n\r\n```\r\n            if (!ProcessBlock(pindex)) return; // error logged internally\r\n            ...\r\n            if (current_time - last_locator_write_time >= SYNC_LOCATOR_WRITE_INTERVAL) {\r\n                SetBestBlockIndex(pindex);\r\n                last_locator_write_time = current_time;\r\n                // No need to handle errors in Commit. See rationale above.\r\n                Commit();\r\n            }\r\n```",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3872061961",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3873357077,
      "node_id": "IC_kwDOABII587m3r0V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3873357077",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T18:48:02Z",
      "updated_at": "2026-02-09T19:04:13Z",
      "author_association": "MEMBER",
      "body": "> I am confused as to how this batching relates to the batching logic of the orginal code. Looking at the pre-change `BaseIndex::Sync()`, it seems that Commit/WriteBatch occured only every 30 seconds (or at the chain tip), not after each block. This change does a `WriteBatch` after every 500 blocks, which in fact may be even more frequent. The original commit-after-every-30-secs is still there, so I don't see how this change makes _less_ writes. Maybe I misunderstand the change.\r\n> \r\n> ```\r\n>             if (!ProcessBlock(pindex)) return; // error logged internally\r\n>             ...\r\n>             if (current_time - last_locator_write_time >= SYNC_LOCATOR_WRITE_INTERVAL) {\r\n>                 SetBestBlockIndex(pindex);\r\n>                 last_locator_write_time = current_time;\r\n>                 // No need to handle errors in Commit. See rationale above.\r\n>                 Commit();\r\n>             }\r\n> ```\r\n\r\n`Commit()` only persists the locator (i.e. \"how far the index has synced\") so we can resume from that point after a restart. It does not flush or batch the per-block digested data.\r\n\r\nThe block data is written inside `CustomAppend()` which is called from `ProcessBlock()` per block, and it writes to the db immediately.\r\n\r\nWe're not replacing locator update time nor merging it with something else here, we're only batching something that previously wasn't batched at all.\r\n\r\nAlso, using a block window instead of reusing the existing time-based window is intentional. Time-based flushing makes memory usage hard to predict, and difficult to test (see #32878), because the amount of buffered data depends on runtime speed, which does not necessarily correlate with available memory (batched data stays in memory until it's flushed..). A fixed block window provides predictable memory usage and deterministic behavior, which is overall better and also integrates nicely with multiple workers sync (#26966). I would argue in favor of ditching the time window in the future, but.. that's not something related to this PR.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3873357077",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22652894155,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVGN7vL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22652894155",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d0f793ac61a0659f4f1e89f7943813244499bf7d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/d0f793ac61a0659f4f1e89f7943813244499bf7d",
      "created_at": "2026-02-09T19:58:37Z"
    },
    {
      "event": "commented",
      "id": 3873537998,
      "node_id": "IC_kwDOABII587m4X_O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3873537998",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:00:10Z",
      "updated_at": "2026-02-09T20:00:10Z",
      "author_association": "MEMBER",
      "body": "Updated per feedback, plus added test coverage for the introduced changes. Thanks @optout21.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3873537998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22652922815,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAVGOCu_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22652922815",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:00:11Z"
    },
    {
      "event": "subscribed",
      "id": 22652922859,
      "node_id": "SE_lADOABII587nzVEtzwAAAAVGOCvr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22652922859",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:00:11Z"
    },
    {
      "event": "commented",
      "id": 3874060536,
      "node_id": "IC_kwDOABII587m6Xj4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874060536",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T21:52:24Z",
      "updated_at": "2026-02-09T21:52:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the explanations, and apologies for asking trivial/irrelevant questions.\r\n\r\n> `Commit()` only persists the locator (i.e. \"how far the index has synced\") so we can resume from that point after a restart.\r\n> The block data is written inside `CustomAppend()` which is called from `ProcessBlock()` per block, and it writes to the db immediately.\r\nThese are two important points, I can see now.\r\n\r\nI was puzzled by the fact that there is a loop in `Sync()`, and another loop is introduced in `ProcessBlocks()`. But the two complement each other.\r\n\r\nAnother approach would be to keep the outer loop in `Sync()` block-by-block, store a `CDBBatch` variable, process one block, count the blocks in the batch, and flush the batch if batch size is reached (outside of `ProcessBlock`). This would be slightly less change (no secondary loop), but -- if I'm correct -- the `cs_main` lock would be still accessed at every block.\r\n\r\n> ... I would argue in favor of ditching the time window in the future, but.. that's not something related to this PR.\r\nMaybe `Commit()` could be called with the same granularity as batch writes, but that's out of scope here.\r\n",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874060536",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3874140984,
      "node_id": "IC_kwDOABII587m6rM4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874140984",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T22:11:44Z",
      "updated_at": "2026-02-09T22:11:44Z",
      "author_association": "MEMBER",
      "body": "> Another approach would be to keep the outer loop in Sync() block-by-block, store a CDBBatch variable, process one block, count the blocks in the batch, and flush the batch if batch size is reached (outside of ProcessBlock). This would be slightly less change (no secondary loop), but -- if I'm correct -- the cs_main lock would be still accessed at every block.\r\n\r\nYes. That would still lock `cs_main` on every block, which harms the overall node responsiveness, and it is also not very helpful for the parallelization goal, which requires certain isolation between batches so worker threads can process them concurrently.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874140984",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3775683458,
      "node_id": "PRR_kwDOABII587hDFuC",
      "url": null,
      "actor": null,
      "commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T22:17:24Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3775683458",
      "submitted_at": "2026-02-09T22:17:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "reviewed",
      "id": 3775687762,
      "node_id": "PRR_kwDOABII587hDGxS",
      "url": null,
      "actor": null,
      "commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T22:18:25Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3775687762",
      "submitted_at": "2026-02-09T22:18:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "reviewed",
      "id": 3775705448,
      "node_id": "PRR_kwDOABII587hDLFo",
      "url": null,
      "actor": null,
      "commit_id": "825b2c73944637894363aaf342d0cd06cdff7b47",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T22:22:37Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3775705448",
      "submitted_at": "2026-02-09T22:22:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3874191155,
      "node_id": "IC_kwDOABII587m63cz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874191155",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T22:24:52Z",
      "updated_at": "2026-02-10T07:21:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "crACK 3687ead892d207ddbdfec3f2ef5c086130414d9a\r\n\r\nLGTM after clarifications and changes! Code review, no assessment on performance.\r\n\r\nPrev:\r\ncrACK d0f793ac61a0659f4f1e89f7943813244499bf7d\r\n",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874191155",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "review_requested",
      "id": 22656412250,
      "node_id": "RRE_lADOABII587nzVEtzwAAAAVGbWpa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22656412250",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T22:24:58Z",
      "requested_reviewer": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwZWI5NTg5MTBiNzkzZjczNTJjOThiYjM1YjMxMTcwMDkzYTEzMzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00eb958910b793f7352c98bb35b31170093a1335",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/00eb958910b793f7352c98bb35b31170093a1335",
      "tree": {
        "sha": "1b5b4e5b677aa1ac11ce199c65bc21145a7104c0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1b5b4e5b677aa1ac11ce199c65bc21145a7104c0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1b5b4e5b677aa1ac11ce199c65bc21145a7104c0\nparent 64294c89094d5ab10d87236729cc267fde0a24ca\nauthor furszy <matiasfurszyfer@protonmail.com> 1770076674 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770685732 -0500\n\nindex: add method to process block ranges\n\nNo behavior change.\n\nIntroduce ProcessBlocks(start, end) to handle a range of blocks\nin forward order. Currently used per-block, but this lays the\nfoundation for future batch processing and parallelization.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmKhSQACgkQXdI8zGhq\npiO5SA//VQ+Sw8+MngQft0O5xMNtSYr7kgUMgUKSs27sLidVOJnIUmE1v8GuvCQK\nzoxLr1JNtpqCn0Gu32l4h9/G8hQLZI7fthEhoihG+dN0PVwR58x1BcKGWVFWRh+y\nlbrkFLAA43JE/Km8GQCHkXkQzLew6WVq8M3ov/IqsjaKQq61fmrJfqtuyl8U31Vi\neoHAnESiELG/hGx7H4Rza6Dnhx8AuaeZl3ox49ra7NfRwVuxRjeCD84pB+t9i8WT\naScXuiteUB/NowtHA1/4V47JdGn4txwfIX1AmNqEiQyjk6cXxp9qyN6fYPY0roar\nb5uxHcvS6jlHaiAndKZSZZcFyB3L67VLfjYiaN5JmIM4sK0AT3DMpssvsdng9xYz\naqrVStRYia76SjK1AJmNF5ioWTEAwe6c2VYWpMv7bWnGx6AQJMxzpQpScoAo+gIP\nEMt4W6c/OIbzCcjGaLwZ2gNNJKtGFtHu1uh8g4bea9/vXa8le1J+tjLNhLHGAC1c\nj1Lxoz8vX7fPTPnwrA06iPg4Y0VP9wrTgnF+ZH9i/6P7nvL5QRBPpUWeow3lW26J\nkKhx8UNtbt0/yxZW3CJZPLVr/hN/Cr3ETtZ7pNnG/Rjq39azkqozpmEIJuL25+ov\nZOohNVifjjoJ1ATWI0zTS6Y3OUQ+UoHwgNMylM2vlljNAxHzwKA=\n=Evmt\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/64294c89094d5ab10d87236729cc267fde0a24ca",
          "sha": "64294c89094d5ab10d87236729cc267fde0a24ca",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/64294c89094d5ab10d87236729cc267fde0a24ca"
        }
      ],
      "message": "index: add method to process block ranges\n\nNo behavior change.\n\nIntroduce ProcessBlocks(start, end) to handle a range of blocks\nin forward order. Currently used per-block, but this lays the\nfoundation for future batch processing and parallelization.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:08:52Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-02T23:57:54Z"
      },
      "sha": "00eb958910b793f7352c98bb35b31170093a1335"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFlMDdhZDUzMTUxMGFkMWZhNjNiODdkZjRhYTYzYTE3ODcxOGIwYjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1e07ad531510ad1fa63b87df4aa63a178718b0b9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1e07ad531510ad1fa63b87df4aa63a178718b0b9",
      "tree": {
        "sha": "673affb68a1c17a29995b6eca1c931909c9b66cf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/673affb68a1c17a29995b6eca1c931909c9b66cf"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 673affb68a1c17a29995b6eca1c931909c9b66cf\nparent 00eb958910b793f7352c98bb35b31170093a1335\nauthor furszy <matiasfurszyfer@protonmail.com> 1770077765 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770685732 -0500\n\nindex: introduce BlockBatch struct for block range handling\n\nNo behavior change.\n\nLays the foundation for batch processing and future parallelization.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmKhSQACgkQXdI8zGhq\npiOLmw/+PWMhzvdvAyV5DTHXJBVr2rOWPNlrriaXXHWuWOLaRKD5d0dePJ6Gvtpu\nT7bIERPojer3Ydtw+yQJdmV2fBPukPexQ0C4dTMLAxzt/2V5wbSsPiqUkJD6+z3W\nFkg5GEwrQS83wSjvFPjMncrg6jfOqKL2P79PjcjBDkgaFOSEOxPM+u7FUczzpxyh\nrNWzFvEsjDmXpj1VRY9+McM+BN2shmvLvWiWn/bzGQYzqNVHGp1PnUI2YKshQEZs\n1BnaaxNOiJ32GxQqaCykIyTPTN/B9r8DdsNQqF1p2uBF1WzuI9WexMZwZD0LtIwZ\nX9yv6U3hT3b9A4BqlHpYhSvVGzg6O4isqZQPbco/roR3YjJ2lsK1eyUGI7hTSTPC\n8INLtAzjBPz4vqJbeV0NpI4lHzITnUVkUH0povFgHpBsNO2YbcgQsDQsU7KIsDKk\ns1VDLY/ILiBpWtwswR5KHlPnjbukvRIVTGZOPW3HtDLFps1hkB/+02rossJWnrBn\ncyrJCEoQLVLUzOn740fqBitDBRlsy1nQv3Fu+1gA5uo9QqKEkQYJhhA6LED1lyOe\nRJxj953Xc8Y0YECnGWzQcc2WNCEH4oFtFWVDM8HAgFNKE59ct7C1FV2bt89yt28k\niojFxVwJFXfMtYotEqGy/NuLZhLdUmrEH/RobfIQ+8FpVANoT+o=\n=8MDV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00eb958910b793f7352c98bb35b31170093a1335",
          "sha": "00eb958910b793f7352c98bb35b31170093a1335",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/00eb958910b793f7352c98bb35b31170093a1335"
        }
      ],
      "message": "index: introduce BlockBatch struct for block range handling\n\nNo behavior change.\n\nLays the foundation for batch processing and future parallelization.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:08:52Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:16:05Z"
      },
      "sha": "1e07ad531510ad1fa63b87df4aa63a178718b0b9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQwZWMxZjg2OWM4MWE4NzlkNzNhODBkNDM2Y2ExOTcyNjljYTYwNzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0ec1f869c81a879d73a80d436ca197269ca6071",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d0ec1f869c81a879d73a80d436ca197269ca6071",
      "tree": {
        "sha": "acb6c46114b8366c505a2bd55ab681ec7f24b759",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/acb6c46114b8366c505a2bd55ab681ec7f24b759"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree acb6c46114b8366c505a2bd55ab681ec7f24b759\nparent 1e07ad531510ad1fa63b87df4aa63a178718b0b9\nauthor furszy <matiasfurszyfer@protonmail.com> 1770078767 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770685732 -0500\n\nindex: compute block batch window\n\nSets the end of a block batch, starting from the next\nblock to sync and stopping at either the configured\nbatch size or the chain tip.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmKhSQACgkQXdI8zGhq\npiN/4g/+L4aGIgmqTqnG4kdc3CWm7OnGkz4gFI6pe7/97v4LoP0Av1/T4mRfsW59\nGVqQj2W0SR44B5AhX0Chjt1iRBZUpdUgSfeIflbq8oV9NQs3HrV7fxtjH5hl2iAg\nTCeduqFeUYA27gxGzh8ydBzSYyX130ziw1yHqH791r0AcCoDYIgZpxQvBBQ6gCA0\nXb28dh/LQSHIAI9YeuyTbQvxhtZ1wYlqTY8e1tVr5Q3MNc0BYX98wUvQBq9ezlIu\nDARYpJ+TKcZ53VfkU8LhSyl64xJ3t0SxeOjh0yf35KqpfrCkNlg1IZ254KdxjOnm\nclEx7Q5sPybqngbhB3HTr4oGWHdTcJa2KK0Z1Jv8cxQY6tVukpF7uT+dm8VdSRDo\nloX0cfUmw+AFiDwlgLS1Sk5QPFnlCZyr+vr1OuAU1yKf0/chxC6pWBlFmcEmAXky\nu/nV9KgAx3JF1xpzofQsUMmSNE81UE3pBhi8CmLe+jOZIpmzAoQhUfR5pDK46NA/\nEgafOY2NgxMaRvRLs+cXnL7umH7jGIgFhAuAN17qUJfjJ140HICefOOtJiRxfu4/\npXzR513A80oH6jgUllMkRAcQ8qAWB2cu+a6vBX9tswSPVaS2ocTwwuhPIv7c2WEA\nHbWSE+zT9g66afOS4JexA0flQkOxECXsY5HRRhQtRotmjXRBE2k=\n=NJKr\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1e07ad531510ad1fa63b87df4aa63a178718b0b9",
          "sha": "1e07ad531510ad1fa63b87df4aa63a178718b0b9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1e07ad531510ad1fa63b87df4aa63a178718b0b9"
        }
      ],
      "message": "index: compute block batch window\n\nSets the end of a block batch, starting from the next\nblock to sync and stopping at either the configured\nbatch size or the chain tip.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:08:52Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:32:47Z"
      },
      "sha": "d0ec1f869c81a879d73a80d436ca197269ca6071"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI0MDA5ZjU2MDY0OWI1MmIxM2Y4MjVjMjM2NmVlY2ZiNjNkYTA0MWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b4009f560649b52b13f825c2366eecfb63da041c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b4009f560649b52b13f825c2366eecfb63da041c",
      "tree": {
        "sha": "eb0ac79e459fe3f893c0936ae7525fe75a621810",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eb0ac79e459fe3f893c0936ae7525fe75a621810"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree eb0ac79e459fe3f893c0936ae7525fe75a621810\nparent d0ec1f869c81a879d73a80d436ca197269ca6071\nauthor furszy <matiasfurszyfer@protonmail.com> 1770080019 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770685732 -0500\n\nindex: enable DB writes batching during sync\n\nPass CDBBatch to subclasses so writes can be accumulated\nand committed together instead of flushed per block\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmKhSQACgkQXdI8zGhq\npiNYFw/6AjGmUASF7nN8TmH1vJQqPt1Hqfz8ZALjN0KsbJ/fvBnd+n4JEE9TOf5F\nutzxGtR4XKrQD0OhQ6MtZ9W17EANdI9fiuaybkTDs6ZLthEM5R1+7iYmuksMqxot\n6MwXNZCIIXsiEOBXm0/rU7SvmcBFObwzDqFNVlQwK4HNEq5L6zWBLNiweLkQjCv0\nfql+09/ua2SEvHeW88S/Tstq4azlxKoIelkkKRNSIqGQc2VwSdjqaYNMVpWuFzCB\nR5LMdKqINy9Dzw8P5HyNp5QEogguEif90ONLpGvaHoLGEO/bxESFwNlFZQO4C68W\nCY+h0nnHs16e6BaAaVyqU+zUkbYjunWY+ZUngj/5woRi29gXBawag/Wow+teIMvl\n7H/Vn/nS5rgL9PYuWSvNtE4iGlT3mpLF/LDWMMZSDk4Vd6BnuHutRogcR9RYqgIs\nVPCz2Pw/IVeOZ9VTpOXULSeGA2RgGDdS5ukMcMnBcV7w/e+hyWJaHloGuf11pBg0\n+UP467/GBnrRD9/vA1fRUuDji73NbA9tzkf66dWqJqUM7rwQF0Q5NpTnIWDrf9YL\nGW0SeM2l8yEejf+19O2NRmLuGndnEPu0bSUs6LVsVpvOfwXV13m05u+mjCI+ArFk\nuhwh1jtCyvUE80ibfeDvgdrUEEzGskpWB9UmfEIAckD2MW8DNd8=\n=7OAu\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0ec1f869c81a879d73a80d436ca197269ca6071",
          "sha": "d0ec1f869c81a879d73a80d436ca197269ca6071",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d0ec1f869c81a879d73a80d436ca197269ca6071"
        }
      ],
      "message": "index: enable DB writes batching during sync\n\nPass CDBBatch to subclasses so writes can be accumulated\nand committed together instead of flushed per block",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:08:52Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:53:39Z"
      },
      "sha": "b4009f560649b52b13f825c2366eecfb63da041c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4NjUxN2NmOTQ3YmJmNjZmYjgxZDhjNTNjMmRmOTJmMGIzZTJlNTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e86517cf947bbf66fb81d8c53c2df92f0b3e2e59",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e86517cf947bbf66fb81d8c53c2df92f0b3e2e59",
      "tree": {
        "sha": "5330e58446ee9ffbdc62f49af57ff1ad89546c4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5330e58446ee9ffbdc62f49af57ff1ad89546c4f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5330e58446ee9ffbdc62f49af57ff1ad89546c4f\nparent b4009f560649b52b13f825c2366eecfb63da041c\nauthor furszy <matiasfurszyfer@protonmail.com> 1770666656 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770685867 -0500\n\ntest: index, add initial sync batch writes coverage\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmKhasACgkQXdI8zGhq\npiNLRg/9GPZ7Kx6uRL2Yn4P0ddsTLP10Yv3lgvkB94jTsigNj69iJk7RCIAymYsw\nXsSi2texBkqdCZ6F3M5YhSm151DMsJLNp0NLRt0UN5ZrXAuEafAhBKX8JQ6iC8MS\na+U4um+BRCLLJjCFxJE+slmyqvO5fJq5LcF2i9awYGZVlM2vUgJ0HEZGiLvEmz+1\nWygaUFRylhSUdanSPPL2qEFffaRnZ+sp7ZvnD+kRjYvtqO5LiHsJ1GISWsQwiy3w\n1Shlejr7q9aFuxx4cVUaYjfB1g1FiudAKfwXwAgV2NvQ6lG9brsj5k8O9HTZ43JS\n15wDGBGb43F7o6t11gssHUmvNWu9/+fJYFtFzmQmfnW0+3uxKnaiEPiEZ6x6andU\nu3bcgpxYGDtznW6IduZRwmpRJA5DUVulLaNV+4fyGO+HEbfHLi7as59HaokiJUZY\n21sXQMyFo38l3arpJSstXkaHQXcNvF+ubIJUrJ8c1ncDynJjKzdL4FHP2aNPLI3Z\nvlPwrA6rpp6wmuV7m2ngAEFSJcMvipjZzMUkBbB51F+El00MdOj9Ip6gcpBbtEnV\nMrrduj/LF+IrcyQM+jBb5N01P0i6u+3W0pBiaPSPegs+W3wOFVUPHmDCM7HQM9pJ\neBF/6GDPx2Wv4COzHvgekReDxYKg/voPnRaU5x+hsSPGh3QZ2w4=\n=fp6Z\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b4009f560649b52b13f825c2366eecfb63da041c",
          "sha": "b4009f560649b52b13f825c2366eecfb63da041c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b4009f560649b52b13f825c2366eecfb63da041c"
        }
      ],
      "message": "test: index, add initial sync batch writes coverage",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:11:07Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-09T19:50:56Z"
      },
      "sha": "e86517cf947bbf66fb81d8c53c2df92f0b3e2e59"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22659373473,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVGmpmh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659373473",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7ab454d82f4328d44f7821c8e1b8183672b47adc",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/7ab454d82f4328d44f7821c8e1b8183672b47adc",
      "created_at": "2026-02-10T01:11:54Z"
    },
    {
      "event": "commented",
      "id": 3874777446,
      "node_id": "IC_kwDOABII587m9Glm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3874777446",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:19:15Z",
      "updated_at": "2026-02-10T01:19:15Z",
      "author_association": "MEMBER",
      "body": "nits addressed, thanks @optout21.\r\nAlso, just for completeness, added test coverage for the \"reorg during initial sync\" scenario that was not covered before.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3874777446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22659476482,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAVGnCwC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659476482",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:19:17Z"
    },
    {
      "event": "subscribed",
      "id": 22659476524,
      "node_id": "SE_lADOABII587nzVEtzwAAAAVGnCws",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659476524",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:19:17Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM2ODdlYWQ4OTJkMjA3ZGRiZGZlYzNmMmVmNWMwODYxMzA0MTRkOWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "tree": {
        "sha": "278a6444b23b3cd222a0b5ff4b87f64cf7f51983",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/278a6444b23b3cd222a0b5ff4b87f64cf7f51983"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 278a6444b23b3cd222a0b5ff4b87f64cf7f51983\nparent e86517cf947bbf66fb81d8c53c2df92f0b3e2e59\nauthor furszy <matiasfurszyfer@protonmail.com> 1770685473 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770686531 -0500\n\ntest: index, add coverage for initial sync reorgs\n\nThe general idea of the introduced test is to pause the index during initial sync\nso that a fork can be introduced. Then, once unblocked, the test verifies that the\nprocess correctly handles the reorg scenario by checking the resulting synced tip.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmKiEMACgkQXdI8zGhq\npiMmvBAAufysKOAAeF7jU5HiJZ4r4TyHfNBoAzKWdmEIZrpje6SY549DIFl4uGcZ\nNfR44tXgGezE5AO3bNyvaA8uuuqqi9jSDIbL65INxW9tMwOvmQpPv5WVk+BDxg3T\n81n/M/bZ+NdAuC+qidsT9S4KCiLi4nX7DweADZ2me/vt3W2FvOI/g0Ds7TzKdUJ3\ndYLaEl+UwrmsU932tity1mr6X0nHyBO31+XjL7cAQ/FUEvkdkt3npODRKuq0FHDJ\ngI6wWTSZwTTVYWIzgg+9ajmvhCm+ynojfwMDeTD8SF8KMFbGboSu548GPNAyyebv\n6aDbGyfsRLNrM4LGkkrpT93NZRaheyiiUaDX8SgOqOxlmSn8agQmWbxMSYmohPo0\njrj/3NQPmutsY7+zMmHDI3UNJhbeW/SKxPDAIB48XIoBki41k6lTtlU8LDnH3pfQ\nylplatPVuDQ+BOfINjRpZpK+9whaXayMu6DkXCcsdxdq7CyJbLeQrGJPLltVFVEN\ng2dOhQOezCOKHgpPOdbPHXs9Y/nWGF5t5756flIaFe3yNJsub15seGzCk4xZOkFL\nm5zsE2iiWmLk2pLOwoAwfj9Tyr9mKO7ZYHRw2wXaoytYcK9H7CmPZecRk8OxeADN\nld1PU2s+UZZUAUmhQryINfTI1EzVQYt7arnewbIByxNJulU77eQ=\n=jfdd\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e86517cf947bbf66fb81d8c53c2df92f0b3e2e59",
          "sha": "e86517cf947bbf66fb81d8c53c2df92f0b3e2e59",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e86517cf947bbf66fb81d8c53c2df92f0b3e2e59"
        }
      ],
      "message": "test: index, add coverage for initial sync reorgs\n\nThe general idea of the introduced test is to pause the index during initial sync\nso that a fork can be introduced. Then, once unblocked, the test verifies that the\nprocess correctly handles the reorg scenario by checking the resulting synced tip.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:22:11Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-10T01:04:33Z"
      },
      "sha": "3687ead892d207ddbdfec3f2ef5c086130414d9a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22659532973,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAVGnQit",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659532973",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "created_at": "2026-02-10T01:22:27Z"
    },
    {
      "event": "labeled",
      "id": 22659547849,
      "node_id": "LE_lADOABII587nzVEtzwAAAAVGnULJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22659547849",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T01:23:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22660698334,
      "node_id": "UNLE_lADOABII587nzVEtzwAAAAVGrtDe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22660698334",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T02:42:28Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3876972773,
      "node_id": "IC_kwDOABII587nFejl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3876972773",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-10T11:15:26Z",
      "updated_at": "2026-02-10T11:15:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "I just finished measuring the size and file count for this PR (it was running previously for a week with the wrong `tail -F` grep I reused from https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2965376357)\r\n\r\n<details>\r\n<summary>CoinStatsIndex DB: Before vs After Batch Writes (47c9297 â†’ dd76491)</summary>\r\n\r\n```bash\r\nCOMMITS=\"47c9297172b0866d2b5d0de6b4fd35b798db3929 dd76491174b3a3b60c174822f75abb03fda3b1d4\"; \\\r\nDATA_DIR=\"/mnt/my_storage/BitcoinData\"; export DATA_DIR; \\\r\nwait_index() { tail -F ${DATA_DIR}/debug.log 2>/dev/null | grep -q -m1 'coinstatsindex is enabled'; killall bitcoind 2>/dev/null || true; sleep 2; }; export -f wait_index; \\\r\nfor COMMIT in $COMMITS; do \\\r\n  killall bitcoind 2>/dev/null || true; rm -rf \"$DATA_DIR/indexes\" \"$DATA_DIR/debug.log\"; \\\r\n  git fetch -q origin \"$COMMIT\" >/dev/null 2>&1 || true && git checkout -q \"$COMMIT\" && git log -1 --pretty='%h %s' \"$COMMIT\"; \\\r\n  cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release >/dev/null 2>&1 && ninja -C build >/dev/null 2>&1; \\\r\n  ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0 & wait_index; \\\r\n  du -h \"$DATA_DIR/indexes/coinstatsindex/db\"; \\\r\n  find \"$DATA_DIR/indexes/coinstatsindex/db\" -type f -name '*.ldb' | wc -l; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\n```bash\r\n[1]+  Done                    ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0\r\n47c9297172 Merge bitcoin/bitcoin#32420: mining, ipc: omit dummy extraNonce from coinbase\r\n[1] 3876795\r\n[1]+  Done                    ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0\r\n216M    /mnt/my_storage/BitcoinData/indexes/coinstatsindex/db\r\n144\r\n```\r\nand\r\n```bash\r\ndd76491174 index: enable DB writes batching during sync\r\n[1] 3885937\r\n[1]+  Done                    ./build/bin/bitcoind -datadir=\"$DATA_DIR\" -connect=0 -coinstatsindex=1 -printtoconsole=0\r\n216M    /mnt/my_storage/BitcoinData/indexes/coinstatsindex/db\r\n10\r\n```\r\n\r\n<img width=\"1484\" height=\"740\" alt=\"image\" src=\"https://github.com/user-attachments/assets/8b42c7d8-f065-49a4-b251-a2a315792cf4\" />\r\n\r\nI haven't measured the speeds yet but will do that next.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3876972773",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3887811554,
      "node_id": "IC_kwDOABII587nu0vi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3887811554",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-11T23:31:42Z",
      "updated_at": "2026-02-11T23:31:42Z",
      "author_association": "MEMBER",
      "body": "Interesting, cool thanks. Another good point in favor of this change then. Will add it to the PR description.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3887811554",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3889451353,
      "node_id": "IC_kwDOABII587n1FFZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3889451353",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T08:32:45Z",
      "updated_at": "2026-02-12T08:32:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "I have finished benchmarking them:\r\n<details>\r\n<summary>indexes | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```bash\r\nBEFORE=\"64294c89094d5ab10d87236729cc267fde0a24ca\"; AFTER=\"3687ead892d207ddbdfec3f2ef5c086130414d9a\"; \\\r\nDATA_DIR=\"/mnt/my_storage/BitcoinData\"; export DATA_DIR; \\\r\nRESULTS_FILE=\"${DATA_DIR}/index_benchmark_results.txt\"; export RESULTS_FILE; \\\r\nwait_index() { \\\r\n  tail -F ${DATA_DIR}/debug.log 2>/dev/null | grep -q -m1 'index is enabled\\|is enabled at height'; \\\r\n  sleep 2; \\\r\n  killall bitcoind 2>/dev/null || true; \\\r\n  wait; \\\r\n}; export -f wait_index; \\\r\nlog_size() { \\\r\n  local label=\"$1\"; local index_dir=\"$2\"; \\\r\n  local size=$(du -sh \"$index_dir\" 2>/dev/null | cut -f1); \\\r\n  local files=$(find \"$index_dir\" -type f -name '*.ldb' 2>/dev/null | wc -l); \\\r\n  echo \"$label: size=$size, ldb_files=$files\" | tee -a \"$RESULTS_FILE\"; \\\r\n}; export -f log_size; \\\r\ngit reset --hard >/dev/null 2>&1 && git clean -fxd >/dev/null 2>&1 && git fetch origin $BEFORE $AFTER >/dev/null 2>&1; \\\r\nfor c in $BEFORE:build-before $AFTER:build-after; do \\\r\n  git checkout ${c%:*} >/dev/null 2>&1 && cmake -B ${c#*:} -G Ninja -DCMAKE_BUILD_TYPE=Release >/dev/null 2>&1 && ninja -C ${c#*:} bitcoind >/dev/null 2>&1; \\\r\ndone; \\\r\necho \"indexes | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $DATA_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $DATA_DIR | tail -1) 2>/dev/null | grep -q 0 && echo SSD || echo HDD)\" | tee -a \"$RESULTS_FILE\" && \\\r\nfor INDEX in txindex blockfilterindex coinstatsindex; do \\\r\n  echo -e \"\\n--- $INDEX ---\" | tee -a \"$RESULTS_FILE\"; \\\r\n  if [ \"$INDEX\" = \"blockfilterindex\" ]; then \\\r\n    INDEX_DIR=\"${DATA_DIR}/indexes/blockfilter/basic\"; \\\r\n  else \\\r\n    INDEX_DIR=\"${DATA_DIR}/indexes/${INDEX}\"; \\\r\n  fi; \\\r\n  export INDEX_DIR; \\\r\n  for BUILD in before after; do \\\r\n    if [ \"$BUILD\" = \"before\" ]; then COMMIT=\"${BEFORE:0:7}\"; else COMMIT=\"${AFTER:0:7}\"; fi; \\\r\n    hyperfine --runs 1 --shell bash --sort command \\\r\n      --prepare \"rm -rf ${DATA_DIR}/indexes/* ${DATA_DIR}/debug.log\" \\\r\n      --cleanup \"log_size '${INDEX} ${BUILD}' '${INDEX_DIR}'\" \\\r\n      -n \"${BUILD} (${COMMIT})\" \\\r\n      \"./build-${BUILD}/bin/bitcoind -datadir=${DATA_DIR} -${INDEX}=1 -connect=0 -printtoconsole=0 & wait_index\" \\\r\n      2>&1 | tee -a \"$RESULTS_FILE\"; \\\r\n  done; \\\r\ndone;\r\n```\r\n\r\n</details>\r\n\r\n> --- txindex ---\r\n\r\n```python\r\nBenchmark 1: before (64294c8)\r\n  Time (abs â‰¡):        7665.128 s               [User: 11912.927 s, System: 1194.716 s]\r\ntxindex before: size=63G, ldb_files=2046\r\n\r\nBenchmark 1: after (3687ead)\r\n  Time (abs â‰¡):        7579.151 s               [User: 11918.671 s, System: 1120.304 s] \r\ntxindex after: size=63G, ldb_files=2049\r\n```\r\n> --- blockfilterindex ---\r\n\r\n```python\r\nBenchmark 1: before (64294c8)\r\n  Time (abs â‰¡):        8447.157 s               [User: 8034.353 s, System: 274.633 s] \r\nblockfilterindex before: size=12G, ldb_files=3\r\n\r\nBenchmark 1: after (3687ead)\r\n  Time (abs â‰¡):        8391.136 s               [User: 7992.547 s, System: 270.205 s] \r\nblockfilterindex after: size=12G, ldb_files=3\r\n```\r\n> --- coinstatsindex ---\r\n\r\n```python\r\nBenchmark 1: before (64294c8)\r\n  Time (abs â‰¡):        35219.938 s               [User: 34115.981 s, System: 276.583 s]\r\ncoinstatsindex before: size=216M, ldb_files=145\r\n\r\nBenchmark 1: after (3687ead)\r\n  Time (abs â‰¡):        35229.893 s               [User: 34125.606 s, System: 271.160 s]\r\ncoinstatsindex after: size=216M, ldb_files=10\r\n```\r\n<img width=\"1784\" height=\"594\" alt=\"image\" src=\"https://github.com/user-attachments/assets/72448dc8-c641-413e-9bcc-ea786275d4db\" />\r\n\r\n--------\r\n\r\nSpeed is basically the same and the number of files in `coinstatsindex` were fixed.\r\nThe `txindex` file count change seems like noise.\r\nI will review the code soon, thanks for extracting it from the big PR.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3889451353",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3891683376,
      "node_id": "IC_kwDOABII587n9mAw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3891683376",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T15:40:01Z",
      "updated_at": "2026-02-12T15:41:15Z",
      "author_association": "MEMBER",
      "body": "> Speed is basically the same\r\n\r\nYou have a really nice machine there. The real batching gains should show up on HDDs rather than SSDs.\r\nStill, great to know this works properly on high end hardware. Thanks for the benchmark.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3891683376",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3891840766,
      "node_id": "IC_kwDOABII587n-Mb-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3891840766",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T16:08:40Z",
      "updated_at": "2026-02-12T16:08:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The real batching gains should show up on HDDs rather than SSDs\r\n\r\nyes, I would expect that to be the case - that will also be part of my review before I can ack it.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3891840766",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "commented",
      "id": 3892133978,
      "node_id": "IC_kwDOABII587n_UBa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3892133978",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T16:58:15Z",
      "updated_at": "2026-02-12T16:58:15Z",
      "author_association": "MEMBER",
      "body": "> yes, I would expect that to be the case - that will also be part of my review before I can ack it.\r\n\r\nyou know, even if it runs at the same speed on an HDD (which I doubt), the other improvements this PR brings still make it worth it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3892133978",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3792564543,
      "node_id": "PRR_kwDOABII587iDfE_",
      "url": null,
      "actor": null,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-12T18:06:28Z",
      "author_association": "NONE",
      "body": "Concept ACK [3687ead892d207ddbdfec3f2ef5c086130414d9a]\r\nI really like the idea and I think it will be a massive upgrade with your parallelisation proposal #26966",
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3792564543",
      "submitted_at": "2026-02-12T17:39:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758171790",
      "pull_request_review_id": 3744186020,
      "id": 2758171790,
      "node_id": "PRRC_kwDOABII586kZlyO",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why keep `ProcessBlock` around? It should be simpler if we just have one function and it can be handed one or many blocks.",
      "created_at": "2026-02-03T09:42:49Z",
      "updated_at": "2026-02-03T10:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758171790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758171790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758183422",
      "pull_request_review_id": 3744186020,
      "id": 2758183422,
      "node_id": "PRRC_kwDOABII586kZon-",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Has this been optimized with benchmarks or are you planning to do that? This might be something differs between the indexes so it might make sense to let each index define their own value.",
      "created_at": "2026-02-03T09:45:14Z",
      "updated_at": "2026-02-03T09:47:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758183422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758183422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758271675",
      "pull_request_review_id": 3744323817,
      "id": 2758271675,
      "node_id": "PRRC_kwDOABII586kZ-K7",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": 2758171790,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Or, if you just want to keep it for encapsulation, consider making it private at least?",
      "created_at": "2026-02-03T10:06:56Z",
      "updated_at": "2026-02-03T10:06:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758271675",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758271675"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759584026",
      "pull_request_review_id": 3745865476,
      "id": 2759584026,
      "node_id": "PRRC_kwDOABII586ke-ka",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": 2758183422,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Has this been optimized with benchmarks or are you planning to do that? This might be something differs between the indexes so it might make sense to let each index define their own value.\r\n\r\nLet's handle it in a focused follow-up so we don't lose momentum here tuning a parameter.\r\n\r\nI'd rather land the structural improvements first, since they unblock other improvements and allow us to continue working on the parallelization goal (which introduces the major sync speedup).",
      "created_at": "2026-02-03T15:13:10Z",
      "updated_at": "2026-02-03T15:13:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2759584026",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759584026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759661644",
      "pull_request_review_id": 3745957674,
      "id": 2759661644,
      "node_id": "PRRC_kwDOABII586kfRhM",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": 2758171790,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Why keep `ProcessBlock` around? It should be simpler if we just have one function and it can be handed one or many blocks.\r\n\r\nBecause `ProcessBlocks` will be specialized in a follow-up commit (please see #26966) to enable additional speedups, such as processing blocks out-of-order for indexes that support it.\r\n\r\nAlso, I wouldn't merge them because these two methods solve different problems. `ProcessBlocks` handles ordering, `ProcessBlock` handles a single unit of work. I think keeping them separate keeps the code clean and easy to follow while allowing us to introduce improvements in the future.\r\n\r\n> Or, if you just want to keep it for encapsulation, consider making it private at least?\r\n\r\n~~Yeah, could do that.~~\r\n\r\njust realized that `ProcessBlocks` is private already.",
      "created_at": "2026-02-03T15:30:08Z",
      "updated_at": "2026-02-03T19:44:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2759661644",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759661644"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2778899461",
      "pull_request_review_id": 3769220456,
      "id": 2778899461,
      "node_id": "PRRC_kwDOABII586loqQF",
      "diff_hunk": "",
      "path": "src/index/txindex.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "original_commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "in_reply_to_id": null,
      "user": {
        "login": "bvbfan",
        "id": 8323581,
        "node_id": "MDQ6VXNlcjgzMjM1ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8323581?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bvbfan",
        "html_url": "https://github.com/bvbfan",
        "followers_url": "https://api.github.com/users/bvbfan/followers",
        "following_url": "https://api.github.com/users/bvbfan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bvbfan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bvbfan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bvbfan/subscriptions",
        "organizations_url": "https://api.github.com/users/bvbfan/orgs",
        "repos_url": "https://api.github.com/users/bvbfan/repos",
        "events_url": "https://api.github.com/users/bvbfan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bvbfan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This function doesn't exist anymore.",
      "created_at": "2026-02-08T08:31:24Z",
      "updated_at": "2026-02-08T08:31:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2778899461",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2778899461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2779512134",
      "pull_request_review_id": 3769969782,
      "id": 2779512134,
      "node_id": "PRRC_kwDOABII586lq_1G",
      "diff_hunk": "",
      "path": "src/index/txindex.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "original_commit_id": "8826900ddc5e4a57b10d4757da76acf4e5cec7f6",
      "in_reply_to_id": 2778899461,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, thanks.",
      "created_at": "2026-02-08T16:55:21Z",
      "updated_at": "2026-02-08T16:55:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2779512134",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2779512134"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2782838686",
      "pull_request_review_id": 3773517236,
      "id": 2782838686,
      "node_id": "PRRC_kwDOABII586l3r-e",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 64,
      "original_position": 22,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The start and end are set here, according to the desired size. However, `block_batch.start_index` can change below. Wouldn't it be better/cleaner to set it just before the `ProcessBlocks` call? (I mean to keep the logic up to the deleted `pindex = pindex_next;` line, and put the bactch setup there.)",
      "created_at": "2026-02-09T14:06:09Z",
      "updated_at": "2026-02-09T14:06:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2782838686",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2782838686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 246,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783552904",
      "pull_request_review_id": 3774273520,
      "id": 2783552904,
      "node_id": "PRRC_kwDOABII586l6aWI",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 64,
      "original_position": 22,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> The start and end are set here, according to the desired size. However, `block_batch.start_index` can change below.\r\n\r\nIt seems the code I had for this case got dropped in the previous bad squash. Good catch.\r\nSee the missing line https://github.com/furszy/bitcoin-core/commit/54874bf43b2df6846061fbb844b7026f69e7bc74#diff-5251d93616c116c364d2d502ad2a59e901a3512194462fabacc9756f96fd8dddR274. Will re-add it. Thanks.\r\n\r\n> Wouldn't it be better/cleaner to set it just before the `ProcessBlocks` call? (I mean to keep the logic up to the deleted `pindex = pindex_next;` line, and put the bactch setup there.)\r\n\r\nThat would not only require taking `cs_main` an extra time, but would also introduce race conditions.\r\nThe extra locking comes from the chain lookup needed to determine the windowâ€™s end index. And, more importantly, if the tip changes between setting the start index and computing the end, we could end up on a fork at a lower height, resulting in an invalid window (start_index > end_index).\r\n",
      "created_at": "2026-02-09T16:39:51Z",
      "updated_at": "2026-02-09T16:39:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2783552904",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783552904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 246,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783869073",
      "pull_request_review_id": 3774596864,
      "id": 2783869073,
      "node_id": "PRRC_kwDOABII586l7niR",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 64,
      "original_position": 22,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> That would not only require taking `cs_main` an extra time, but would also introduce race conditions.\r\n> The extra locking comes from the chain lookup needed to determine the windowâ€™s end index.\r\n\r\nWhat I had in mind is setting both the start and end a bit later, after the `pindex` is finalized.\r\nI will try it out and provide a concrete code snippet a bit later.",
      "created_at": "2026-02-09T18:02:26Z",
      "updated_at": "2026-02-09T18:02:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2783869073",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2783869073"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 246,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784110424",
      "pull_request_review_id": 3774853497,
      "id": 2784110424,
      "node_id": "PRRC_kwDOABII586l8idY",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 64,
      "original_position": 22,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> What I had in mind is setting both the start and end a bit later, after the pindex is finalized.\r\n> I will try it out and provide a concrete code snippet a bit later.\r\n\r\nI see the same two problems there, with an extra requirement of a reorg check and another rewind call. Which makes it even worse.",
      "created_at": "2026-02-09T19:00:26Z",
      "updated_at": "2026-02-09T19:00:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784110424",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784110424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 246,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784715044",
      "pull_request_review_id": 3775599058,
      "id": 2784715044,
      "node_id": "PRRC_kwDOABII586l-2Ek",
      "diff_hunk": "@@ -234,8 +235,17 @@ void BaseIndex::Sync()\n             }\n \n             BlockBatch block_batch;\n-            block_batch.start_index = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n-            block_batch.end_index = block_batch.start_index;\n+            {\n+                LOCK(cs_main);\n+                block_batch.start_index = NextSyncBlock(pindex, m_chainstate->m_chain);\n+                if (block_batch.start_index) {\n+                    const int start_height = block_batch.start_index->nHeight;\n+                    const int tip_height = m_chainstate->m_chain.Height();\n+                    // Compute the last height in the batch without exceeding the chain tip\n+                    const int batch_end_height = std::min(start_height + m_num_blocks_batch - 1, tip_height);\n+                    block_batch.end_index = m_chainstate->m_chain[batch_end_height];",
      "path": "src/index/base.cpp",
      "position": 64,
      "original_position": 22,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "eed9ea5fc5628084cd664a76c40ad0268369b643",
      "in_reply_to_id": 2782838686,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I acknowledge that it's important to take the cs_main lock only once in the typical scenario.\r\nAlso, the missing update of end was identified and fixed! Thx",
      "created_at": "2026-02-09T21:56:23Z",
      "updated_at": "2026-02-09T21:56:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784715044",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784715044"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 246,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784799921",
      "pull_request_review_id": 3775683458,
      "id": 2784799921,
      "node_id": "PRRC_kwDOABII586l_Kyx",
      "diff_hunk": "@@ -255,13 +265,14 @@ void BaseIndex::Sync()\n                     m_synced = true;\n                     break;\n                 }\n+                // Just process one block in case of tip change\n+                block_batch.end_index = block_batch.start_index;\n             }\n             if (block_batch.start_index->pprev != pindex && !Rewind(pindex, block_batch.start_index->pprev)) {\n                 FatalErrorf(\"Failed to rewind %s to a previous chain tip\", GetName());\n                 return;\n             }\n \n-            // For now, process a single block at time\n             if (!ProcessBlocks(block_batch.start_index, block_batch.end_index)) return; // error logged internally",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "original_commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Code review shows that by this point `start_index` and `end_index` are not null, but there is several if's to ensure that, it's not trivial. I propose to document/ensure this invariant with an `Assume` before this line, especially having in mind that `ProcessBlocks` crashes if start or end is `nullptr`.",
      "created_at": "2026-02-09T22:17:24Z",
      "updated_at": "2026-02-09T22:17:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784799921",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784799921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 276,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784804029",
      "pull_request_review_id": 3775687762,
      "id": 2784804029,
      "node_id": "PRRC_kwDOABII586l_Ly9",
      "diff_hunk": "@@ -198,6 +198,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;\n+        if (!ProcessBlock(*it)) return false;",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "original_commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: the \"// error logged internally\" comment could be passed on here as well.",
      "created_at": "2026-02-09T22:18:25Z",
      "updated_at": "2026-02-09T22:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784804029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784804029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784820993",
      "pull_request_review_id": 3775705448,
      "id": 2784820993,
      "node_id": "PRRC_kwDOABII586l_P8B",
      "diff_hunk": "",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "825b2c73944637894363aaf342d0cd06cdff7b47",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "A minor comment on the commit description: I feel an ambiguity or typo around \"during\".\n```\nPass CDBBatch to subclasses during so writes can be accumulated and committed together instead of flushing per block.\n```",
      "created_at": "2026-02-09T22:22:37Z",
      "updated_at": "2026-02-09T22:22:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2784820993",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2784820993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296323",
      "pull_request_review_id": 3776221298,
      "id": 2785296323,
      "node_id": "PRRC_kwDOABII586mBD_D",
      "diff_hunk": "@@ -198,6 +198,23 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    // Collect all block indexes from [end...start] in order\n+    std::vector<const CBlockIndex*> ordered_blocks;\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        ordered_blocks.emplace_back(block);\n+    }\n+\n+    // And process blocks in forward order: from start to end\n+    for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+        if (m_interrupt) return false;\n+        if (!ProcessBlock(*it)) return false;",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "original_commit_id": "0d980feb9552ff50b9232c7c7151638c694057e3",
      "in_reply_to_id": 2784804029,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done as suggested.",
      "created_at": "2026-02-10T01:12:04Z",
      "updated_at": "2026-02-10T01:12:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2785296323",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296323"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296796",
      "pull_request_review_id": 3776221723,
      "id": 2785296796,
      "node_id": "PRRC_kwDOABII586mBEGc",
      "diff_hunk": "",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "825b2c73944637894363aaf342d0cd06cdff7b47",
      "in_reply_to_id": 2784820993,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed.",
      "created_at": "2026-02-10T01:12:16Z",
      "updated_at": "2026-02-10T01:12:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2785296796",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785296796"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785303894",
      "pull_request_review_id": 3776228296,
      "id": 2785303894,
      "node_id": "PRRC_kwDOABII586mBF1W",
      "diff_hunk": "@@ -255,13 +265,14 @@ void BaseIndex::Sync()\n                     m_synced = true;\n                     break;\n                 }\n+                // Just process one block in case of tip change\n+                block_batch.end_index = block_batch.start_index;\n             }\n             if (block_batch.start_index->pprev != pindex && !Rewind(pindex, block_batch.start_index->pprev)) {\n                 FatalErrorf(\"Failed to rewind %s to a previous chain tip\", GetName());\n                 return;\n             }\n \n-            // For now, process a single block at time\n             if (!ProcessBlocks(block_batch.start_index, block_batch.end_index)) return; // error logged internally",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 41,
      "commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "original_commit_id": "360c43d7c572f8cace50f1592ea4179f9f5c8663",
      "in_reply_to_id": 2784799921,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Probably better to just pass them by ref instead. Will do if have to re-touch. Otherwise it can be tackled in a quick follow-up too.",
      "created_at": "2026-02-10T01:15:40Z",
      "updated_at": "2026-02-10T01:15:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2785303894",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785303894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 276,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799911732",
      "pull_request_review_id": 3792158782,
      "id": 2799911732,
      "node_id": "PRRC_kwDOABII586m40M0",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": 2758183422,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Bitcoin [blocks do not have a consistent size](https://coinledger.io/research/bitcoin-blockchain-size-and-growth-over-time), so batching by block size will result in irregular batch sizes. I suggest considering other approaches, such as a fixed transaction count (e.g., adding blocks until the number of transactions within them falls within a target range). This could be particularly interesting for txindex, as most batches would have a similar byte size. This would make batches more uniform and lead to more predictable computation and performance.\n\nHowever, this approach would make parallelisation more difficult, since generating the batch would require a precomputation step. This is a considerable trade-off, especially given that [parallelisation of the batch computation (#26966)](https://github.com/bitcoin/bitcoin/pull/26966) would likely be a more impactful enhancement.\n",
      "created_at": "2026-02-12T16:40:43Z",
      "updated_at": "2026-02-12T16:40:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2799911732",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2799911732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2800198266",
      "pull_request_review_id": 3792564543,
      "id": 2800198266,
      "node_id": "PRRC_kwDOABII586m56J6",
      "diff_hunk": "@@ -379,8 +381,116 @@ BOOST_FIXTURE_TEST_CASE(index_reorg_crash, BuildChainTestingSetup)\n     // Unblock the index thread so it can process the reorg\n     promise.set_value();\n     // Wait for the index to reach the new tip\n-    func_wait_until(blocking_height + 2, 5s);\n+    WaitForHeight(&index, blocking_height + 2, 5s);\n     index.Stop();\n }\n \n+// Ensure the initial sync batch window behaves as expected.\n+// Tests sync from the genesis block and from a higher block to mimic a restart.",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 63,
      "original_position": 63,
      "commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "original_commit_id": "3687ead892d207ddbdfec3f2ef5c086130414d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I wouldnâ€™t say this test truly *mimics a restart* (i.e., shutting down the node and immediately restarting it, without the blockchain growing). It is closer to a *continuation after a clean shutdown of the whole node for a long period of time*. This test is still interesting, but it does not cover a new bug window introduced by the batch approach (shutting down the node during a batch).\n\nThe test currently does the following:\n\n- Pre-mine 100 blocks  \n- Mine 173 additional blocks  \n- Create the index  \n- Synchronize the index to the tip  \n- Mine another 173 blocks  \n- Recreate the index  \n- Synchronize again to the new tip  \n\nIn a real-world scenario, all blocks would already exist on disk, and a restart would likely happen *during* a batch (for example at height 196, where the previous batch ended at 180).\n\nI would like to see a test (either a modification of this one or a new one) that verifies the index is not corrupted and can correctly resume if the node is restarted during a sync, before reaching the tip.\n\nA possible approach for such a test could be:\n\n1. Pre-populate the blockchain (e.g., 300 blocks already on disk)  \n2. Start index sync with `batch_size = 30`  \n3. Interrupt the sync after several batches but before completion  \n4. Simulate a shutdown  \n5. Restart the index and verify (with no new blocks added):  \n   - It resumes from the last checkpoint (not from genesis or the last processed block)  \n   - No corruption occurs in re-processed blocks  \n   - The sync successfully completes  \n",
      "created_at": "2026-02-12T17:37:52Z",
      "updated_at": "2026-02-12T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2800198266",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2800198266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 389,
      "original_line": 389,
      "side": "RIGHT"
    }
  ]
}