{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489",
    "id": 3239243501,
    "node_id": "PR_kwDOABII587BEu7t",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34489",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34489.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34489.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/cf065aa603769458f475e1180fd4924d68023695",
    "number": 34489,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "index: batch db writes during initial sync",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Decouples part of #26966.\r\n\r\nRight now, index initial sync writes to disk for every block, which is not the best for HDD. This change batches those, so disk writes are less frequent during initial sync. This also cuts down `cs_main` contention by reducing the number of `NextBlockSync` calls (instead of calling it for every block, we will call it once per block window), making the node more responsive (IBD and validation) while indexes sync up. On top of that, it lays the groundwork for the bigger speedups, since part of the parallelization pre-work is already in place.\r\n\r\nJust as a small summary:\r\n\r\n* Batch DB writes instead of flushing per block, which improves sync time on HDD due to the reduced number of disk write operations.\r\n* Reduce `cs_main` lock contention, which improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n* Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n\r\nNote:\r\nPending initial sync benchmark and further testing. I have only focused on decoupling and simplifying what was in #26966 first. Commits should be simple to diggest.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2026-02-03T04:06:34Z",
    "updated_at": "2026-02-03T15:58:45Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "b7e1a04da5072074e6678f0047f188642521a33a",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2026_index_batch_processing",
      "ref": "2026_index_batch_processing",
      "sha": "cf065aa603769458f475e1180fd4924d68023695",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 447148,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-03T04:42:14Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2026-02-02T17:33:46Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "47c9297172b0866d2b5d0de6b4fd35b798db3929",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38846,
        "stargazers_count": 87904,
        "watchers_count": 87904,
        "size": 303024,
        "default_branch": "master",
        "open_issues_count": 742,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-03T11:26:44Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-03T15:51:04Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 87,
    "deletions": 29,
    "changed_files": 9,
    "commits": 4,
    "review_comments": 6,
    "comments": 4
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgzNjhhYmFhOGIzNGY4NTFmMjVmYWMwZThiOTEwMmNkMjJmYjNkODk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "tree": {
        "sha": "7dc9bf356c7adf7280c852dbb1bb17d93fd5b766",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7dc9bf356c7adf7280c852dbb1bb17d93fd5b766"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7dc9bf356c7adf7280c852dbb1bb17d93fd5b766\nparent 47c9297172b0866d2b5d0de6b4fd35b798db3929\nauthor furszy <matiasfurszyfer@protonmail.com> 1770076674 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770081530 -0500\n\nindex: add method to process block ranges\n\nNo behavior change.\n\nIntroduce ProcessBlocks(start, end) to handle a range of blocks\nin forward order. Currently used per-block, but this lays the\nfoundation for future batch processing and parallelization.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmBTPsACgkQXdI8zGhq\npiNNDw/+J7M6UxJ+ETlVBRpN1wTPJBQiTl7HGJU5rJc3rI5VffEExhGiYDA6/I7p\nIJd4VIAAy8pwf+585jRexaAqsq5IjEVYnkXmsCW+onaOte2T8XXx98H0Raies+RF\npEG7asTW0mz+Tto1jo9pOfwzZ3RB/zg9FAu3gkR240u26vYGNoniwyvFqhHTZxbX\n9sVG0xvDvbWN+gs0vufhfL8vMcVyRTVPcLJQZIhT24MZQhQYIH887ezeZLofOzbG\na+7Fx6fFbckSEw+0rTDKpcKbOVgKtV2MPDR2JxKjRWAVA/DpNiwp9XjmUA7B6ui4\nrWAmp2Xi4XWvpnhMUQpgfyaUWdFV9CD7BNTGjspBG4a05eJZAHrLrXLSs+H8JTfN\nVtaBn2VF+cZJQ4HnWWlifiNO8awDDDn/QSQK0CezUEpG2tf0IYqyQxEGPnU8Yi3s\nYot/CJ4XTsBa5qQHfl3V4Uk+60IUrzNhS/UqwgHbX9NVD+DT6i8SNNl5PAjvevFI\n79/nelPyRiJXYU1891KWRBgaquDPKo95p8leIWdNdAMdR/Rd706bSqgQGzwl9u4H\nSb1LOyAoYJbdzfFcrDgvfp6TwKlNmfhM/1h7rflUxnOVdcibazyLopbNEIQAsQKC\n3ps45UhzLP58eqspTJ3TBRzw8vL4Kc24AA1N3+0qX8FyY/kUXOU=\n=ru3r\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/47c9297172b0866d2b5d0de6b4fd35b798db3929",
          "sha": "47c9297172b0866d2b5d0de6b4fd35b798db3929",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/47c9297172b0866d2b5d0de6b4fd35b798db3929"
        }
      ],
      "message": "index: add method to process block ranges\n\nNo behavior change.\n\nIntroduce ProcessBlocks(start, end) to handle a range of blocks\nin forward order. Currently used per-block, but this lays the\nfoundation for future batch processing and parallelization.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T01:18:50Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-02T23:57:54Z"
      },
      "sha": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRiMzc4ZGQzOTU3MTg3Y2FkY2JmNzJiNjZhNjIyMDE0NjY3ZDRhNjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db378dd3957187cadcbf72b66a622014667d4a64",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/db378dd3957187cadcbf72b66a622014667d4a64",
      "tree": {
        "sha": "db508ad9e58934b45dacdf759e82436e7d529c06",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db508ad9e58934b45dacdf759e82436e7d529c06"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree db508ad9e58934b45dacdf759e82436e7d529c06\nparent 8368abaa8b34f851f25fac0e8b9102cd22fb3d89\nauthor furszy <matiasfurszyfer@protonmail.com> 1770077765 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770081531 -0500\n\nindex: introduce BlockBatch struct for block range handling\n\nNo behavior change.\n\nLays the foundation for batch processing and future parallelization.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmBTPsACgkQXdI8zGhq\npiP7ihAAirRoJlCMPMyAF0fWIalBfRxIVqDg4o4A9b0RklGnRCLKbGRZPGubsRq5\nYXWroSbV7putC0blvVnk8JwPDTMHK//bDPMW0wBljzD5h8kSZnj6eLqYs9yZmwyH\nOqbsw8aCCzaWo75QTEmMCRdFAPIa3uCEpyvsVunCrthQwtsnPDuNMtXnSojhh8Es\nzE4OJrPhHQ8AE9y9VHy12Ql+hlX7+3Hcqv/ochYrTwYcbUYGL6W85BUuQtbsTVNG\nFvmS7soNwZb7plZQGclPgQkZvGAsaU5EfpNj4PfshH7/lw3Mx2uXMpxlGNwmzeP9\nstH9fb33Fp4mudcT+lvOPBZqMcrzvFO2U6w7AxwZw+2PrRNl1e1XSGum/fZlvDDJ\nt9uhAhmGYEeNcOP3Ham9f9NWdWDaztIlaHx4ObPsmqYm4UcyhcjKYjuOWpvAvV0I\nIYQdH7SmZIP8IU0DLPwK2XJA65flzKD+PE+jcyYqMvCcNAWD89hED6Gtr1LRaFV4\n5pjHsEOFEzRO3yPKJY1NXHT7iKPMeWzsSTr8uB6zdMb9P+mVggk1SLa0zi/g0SnL\nRTk+avUtDd8DPCigPEtGTiHJVQ1GwsFoYZqxyRq9LiCooa+3CrETwq/OSUKWEsUQ\n6Ahqu3rwASmN87IcdY5QWM84pfu3dWvKauHY2oiOaCs58n71f/k=\n=nXz8\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
          "sha": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8368abaa8b34f851f25fac0e8b9102cd22fb3d89"
        }
      ],
      "message": "index: introduce BlockBatch struct for block range handling\n\nNo behavior change.\n\nLays the foundation for batch processing and future parallelization.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T01:18:51Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:16:05Z"
      },
      "sha": "db378dd3957187cadcbf72b66a622014667d4a64"
    },
    {
      "event": "labeled",
      "id": 22484045491,
      "node_id": "LE_lADOABII587nzVEtzwAAAAU8J06z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484045491",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:06:39Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 3838931379,
      "node_id": "IC_kwDOABII587k0XGz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3838931379",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:07:08Z",
      "updated_at": "2026-02-03T10:38:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3840520048) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3838931379",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU3ZmEwZDAwZTFkZGE4MWM5MWIyMWJkNTRhNzQ0NDJjZjc5ZjVhMDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "tree": {
        "sha": "529edbda6f9b5998aef6f3b236e00175469d5168",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/529edbda6f9b5998aef6f3b236e00175469d5168"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 529edbda6f9b5998aef6f3b236e00175469d5168\nparent db378dd3957187cadcbf72b66a622014667d4a64\nauthor furszy <matiasfurszyfer@protonmail.com> 1770078767 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770093705 -0500\n\nindex: compute block batch window\n\nSets the end of a block batch, starting from the next\nblock to sync and stopping at either the configured\nbatch size or the chain tip.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmBfIkACgkQXdI8zGhq\npiN9KhAAmflQJraFs/K2DAa4/NYuIpsGfmt/pvXrr4eJkfgNXqxJk+iRawiAO7l3\nTbG0DL8qlBIxYbbNcr6kDDi2NQXhXeoBGj8jOnEGn9YakGo1z5Q3k00swLKCB/gB\n0Cy8CsjIeIVa169CGI8TMq5UhTl0bVQ5fW/GVgYGkFBuq5BSH6LUiOFYFPVeCpHG\n1rSTZ0FbjwfVSmurMjwJSaJYidHHSIdVtbxHN6OHqhFT6lKImp3rlAwlIDbPa75k\nORLU21PyKXPAQ3k4zLFrj5cX63U33cyd3IzmA2l6Bpn5ieHZVx934RERXbmid7pD\nTG/iW9DpzzzVvZAwSpdXdVGdPsTtcUS3VY4X3nTxPLfP/v2Ug9Xd6dWc25h9/II2\nB64qM+w3ytYZmf8pnWKnehv9XUO5tASqFfwTZ9RRDBLk2TyJb+jyhhvRZkhJXsBI\nLZgOT4fnqT5KJ1PmWHBX5DDgKgR71AV0F3LsEc7kypqBzZ/rMaPyBbqoGZemtGlb\n+K+ji3RMaoKCUt54FlQtuZHhdfrnVcFg3zMC92Oy9eu3gRXYv/TD/3La2N4gzOuX\nBd4+7wgsmUmwWqw6I/2QyfQOVhW9QxOtbeyra3dQGOGuqMfSAKz6doRfPrBDgNsB\n4O7dd2xVkyUpQjXfHbvXmWOjFy7Jeeho+ukqnkadLivWLRsAX+Q=\n=8txN\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db378dd3957187cadcbf72b66a622014667d4a64",
          "sha": "db378dd3957187cadcbf72b66a622014667d4a64",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/db378dd3957187cadcbf72b66a622014667d4a64"
        }
      ],
      "message": "index: compute block batch window\n\nSets the end of a block batch, starting from the next\nblock to sync and stopping at either the configured\nbatch size or the chain tip.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T04:41:45Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:32:47Z"
      },
      "sha": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNmMDY1YWE2MDM3Njk0NThmNDc1ZTExODBmZDQ5MjRkNjgwMjM2OTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf065aa603769458f475e1180fd4924d68023695",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cf065aa603769458f475e1180fd4924d68023695",
      "tree": {
        "sha": "163b638aac8ff65f30f75a02c25c448c952f532f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/163b638aac8ff65f30f75a02c25c448c952f532f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 163b638aac8ff65f30f75a02c25c448c952f532f\nparent e7fa0d00e1dda81c91b21bd54a74442cf79f5a08\nauthor furszy <matiasfurszyfer@protonmail.com> 1770080019 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1770093705 -0500\n\nindex: enable DB writes batching during sync\n\nPass CDBBatch to subclasses during so writes\ncan be accumulated and committed together\ninstead of flushing per block.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmmBfIkACgkQXdI8zGhq\npiM4VQ/+KokOt7jAnFJT8qL7hRPLhzLzUruAdgpDlw7hBkbXMssarXUq/I9fm255\nbKmflbdgrNIt+oBetfME8ThxJgmohXLRxc3yjqeo+lImNAu3okLWmXdBvPvOHGqc\nwdwphUyWp5EK4FQFzdShZb3GxAYBX0eeu9wiJtu/1GbJV+KxM6OqkUj7FNeNMwYx\nfSI4TijfxJLBudOaEZieO20ojzo+7zN0YR58NU7s+cH/KQzxlFj1Ggmz1SbaSmG3\nqcxsCNp2z1poWtt6mIm/r1gRRO8eK62VZWcbF1tyOfOWXln2OKyv+43N/m6npVIg\n3IGzKG7wDIlilJ9GdTG7iKFXHBVvfGZyqoDKLKiW/SyeAhbHhSrB8fqQ/0iTsAyZ\n312mEUmj0xBklBsCDKrjAxkIN2gsb+T0i1N7zaSNDU0tExMznIJoCDUs28S/RwZW\nDetFJ/zaPSSnLX+awyki3PP1PXddeEIQZN7X575CGUrgM67u+agoqNn0RHHJ2a0q\n24W40B/BM59hSlALGjJyR+ZHCWz7JigrnWiVJjUpHTIatmEZt17KFgtLMJ4UURC0\ntTEVpamlNUnoe+D6geOyNffBcA8kkNltvOIvTB+uXG8DJMscOWm0jzeY2AeABVjO\nwNfYXRQ4zyvJp6O0kJTLncBcJ3Y0I3/jHDJlpf5N7GF+J5JX1tk=\n=19xx\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
          "sha": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e7fa0d00e1dda81c91b21bd54a74442cf79f5a08"
        }
      ],
      "message": "index: enable DB writes batching during sync\n\nPass CDBBatch to subclasses during so writes\ncan be accumulated and committed together\ninstead of flushing per block.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T04:41:45Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-02-03T00:53:39Z"
      },
      "sha": "cf065aa603769458f475e1180fd4924d68023695"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22484634725,
      "node_id": "HRFPE_lADOABII587nzVEtzwAAAAU8MExl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484634725",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/cf065aa603769458f475e1180fd4924d68023695",
      "created_at": "2026-02-03T04:42:15Z"
    },
    {
      "event": "labeled",
      "id": 22484641130,
      "node_id": "LE_lADOABII587nzVEtzwAAAAU8MGVq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22484641130",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:42:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3839020141,
      "node_id": "IC_kwDOABII587k0sxt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3839020141",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T04:42:56Z",
      "updated_at": "2026-02-03T04:42:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `iwyu`: https://github.com/bitcoin/bitcoin/actions/runs/21616547248/job/62296358632</sub>\n<sub>LLM reason (âœ¨ experimental): IWYU (include-what-you-use) reported a failure in the test script, causing the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3839020141",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "reviewed",
      "id": 3744186020,
      "node_id": "PRR_kwDOABII587fK76k",
      "url": null,
      "actor": null,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-03T09:47:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "This relates to what you wrote [here](https://github.com/bitcoin/bitcoin/pull/33306#issuecomment-3832258602) right? It would be helpful that you check if it solves the LevelDB file issue in coinstatsindex and I am also curious about your benchmark results because @l0rinc did not find that this was  leading to a speed up.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#pullrequestreview-3744186020",
      "submitted_at": "2026-02-03T09:47:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
    },
    {
      "event": "commented",
      "id": 3840520048,
      "node_id": "IC_kwDOABII587k6a9w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3840520048",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:27Z",
      "updated_at": "2026-02-03T10:38:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, I prefer this over https://github.com/bitcoin/bitcoin/pull/33306 - and will investigate if this solves that problem once my benchmarking servers free up.\r\n\r\n> because @l0rinc did not find that this was leading to a speed up.\r\n\r\nI experimented with something similar in https://github.com/l0rinc/bitcoin/pull/37/changes, will compare it against this change. I wrote:\r\n> indexes: batch index writes: 34188s, 211M, 8 files\r\nIt solved the fragmentation, but didn't speed up anything.\r\nI still think this is a better direction than adding manual compactions.\r\n\r\nMost likely since writing isn't the bottleneck but MuHash calculations were.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3840520048",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22493171192,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU8so34",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493171192",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:29Z"
    },
    {
      "event": "subscribed",
      "id": 22493171236,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU8so4k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493171236",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:38:29Z"
    },
    {
      "event": "commented",
      "id": 3841864727,
      "node_id": "IC_kwDOABII587k_jQX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841864727",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:16Z",
      "updated_at": "2026-02-03T15:05:18Z",
      "author_association": "MEMBER",
      "body": "> This relates to what you wrote [here](https://github.com/bitcoin/bitcoin/pull/33306#issuecomment-3832258602) right? It would be helpful that you check if it solves the LevelDB file issue in coinstatsindex and I am also curious about your benchmark results because @l0rinc did not find that this was leading to a speed up.\r\n\r\n@fjahr the comment was merely an excuse to decouple the DB writes batching code out of #26966 rather than me having a formed opinion in favor or against #33306. That's why I didn't mention it in the PR description. Maybe the changes complement each other.\r\n\r\nTo be crystal clear, just updated the PR description with further details on why this change worth alone, independently on #33306.\r\n\r\nTo summarize it here, the goal of the changes are:\r\n* Batch DB writes instead of flushing per block, which will improve sync time on HDD due to the reduced number of IO operations.\r\n* Reduce `cs_main` lock contention, which orthogonally improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n*  Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n\r\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3841864727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34489"
    },
    {
      "event": "mentioned",
      "id": 22500147622,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9HQGm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147622",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "subscribed",
      "id": 22500147682,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9HQHi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147682",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "mentioned",
      "id": 22500147731,
      "node_id": "MEE_lADOABII587nzVEtzwAAAAU9HQIT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147731",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    },
    {
      "event": "subscribed",
      "id": 22500147787,
      "node_id": "SE_lADOABII587nzVEtzwAAAAU9HQJL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500147787",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:02:23Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758171790",
      "pull_request_review_id": 3744186020,
      "id": 2758171790,
      "node_id": "PRRC_kwDOABII586kZlyO",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why keep `ProcessBlock` around? It should be simpler if we just have one function and it can be handed one or many blocks.",
      "created_at": "2026-02-03T09:42:49Z",
      "updated_at": "2026-02-03T10:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758171790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758171790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758183422",
      "pull_request_review_id": 3744186020,
      "id": 2758183422,
      "node_id": "PRRC_kwDOABII586kZon-",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Has this been optimized with benchmarks or are you planning to do that? This might be something differs between the indexes so it might make sense to let each index define their own value.",
      "created_at": "2026-02-03T09:45:14Z",
      "updated_at": "2026-02-03T09:47:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758183422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758183422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758271675",
      "pull_request_review_id": 3744323817,
      "id": 2758271675,
      "node_id": "PRRC_kwDOABII586kZ-K7",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": 2758171790,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Or, if you just want to keep it for encapsulation, consider making it private at least?",
      "created_at": "2026-02-03T10:06:56Z",
      "updated_at": "2026-02-03T10:06:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2758271675",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758271675"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759584026",
      "pull_request_review_id": 3745865476,
      "id": 2759584026,
      "node_id": "PRRC_kwDOABII586ke-ka",
      "diff_hunk": "@@ -27,6 +27,10 @@ class CBlockIndex;\n class Chainstate;\n \n struct CBlockLocator;\n+\n+/** Range of blocks to process in batches */\n+static constexpr int INDEX_BATCH_SIZE = 500;",
      "path": "src/index/base.h",
      "position": 6,
      "original_position": 6,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "e7fa0d00e1dda81c91b21bd54a74442cf79f5a08",
      "in_reply_to_id": 2758183422,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Has this been optimized with benchmarks or are you planning to do that? This might be something differs between the indexes so it might make sense to let each index define their own value.\r\n\r\nLet's handle it in a focused follow-up so we don't lose momentum here tuning a parameter.\r\n\r\nI'd rather land the structural improvements first, since they unblock other improvements and allow us to continue working on the parallelization goal (which introduces the major sync speedup).",
      "created_at": "2026-02-03T15:13:10Z",
      "updated_at": "2026-02-03T15:13:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2759584026",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759584026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759661644",
      "pull_request_review_id": 3745957674,
      "id": 2759661644,
      "node_id": "PRRC_kwDOABII586kfRhM",
      "diff_hunk": "@@ -198,6 +198,22 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n     return true;\n }\n \n+bool BaseIndex::ProcessBlocks(const CBlockIndex* start, const CBlockIndex* end)",
      "path": "src/index/base.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "cf065aa603769458f475e1180fd4924d68023695",
      "original_commit_id": "8368abaa8b34f851f25fac0e8b9102cd22fb3d89",
      "in_reply_to_id": 2758171790,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Why keep `ProcessBlock` around? It should be simpler if we just have one function and it can be handed one or many blocks.\r\n\r\nBecause `ProcessBlocks` will be specialized in a follow-up commit (please see #26966) to enable additional speedups, such as processing blocks out-of-order for indexes that support it.\r\n\r\nAlso, I wouldn't merge them because these two methods solve different problems. `ProcessBlocks` handles ordering, `ProcessBlock` handles a single unit of work. I think keeping them separate keeps the code clean and easy to follow while allowing us to introduce improvements in the future.\r\n\r\n> Or, if you just want to keep it for encapsulation, consider making it private at least?\r\n\r\nYeah, could do that.",
      "created_at": "2026-02-03T15:30:08Z",
      "updated_at": "2026-02-03T15:33:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34489#discussion_r2759661644",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759661644"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34489"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    }
  ]
}