{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512",
    "id": 2876629729,
    "node_id": "PR_kwDOABII586rdeLh",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33512",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33512.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33512.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/afb1bc120ecce2bf663093e15c93f5592c0d4a98",
    "number": 33512,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "coins: use number of dirty cache entries in flush warnings/logs",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Revival of https://github.com/bitcoin/bitcoin/pull/31703 with all outstanding review feedback addressed.\r\n\r\n<details>\r\n<summary>A few changes compared to the original</summary>\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/34207 resolved part of dirty counting in `SanityCheck`\r\n* `EmplaceCoinInternalDANGER` is also fuzz tested now\r\n* Warning and logging moved from `FlushStateToDisk` to `CCoinsViewDB::BatchWrite`, ensuring `AssumeUTXO` snapshot writes also display progress warnings\r\n* Removed the redundant changed counter in `BatchWrite` since we now track `dirty_count` directly\r\n* All instances use `dirty_count` (not `num_dirty`) and parameter alignment is corrected\r\n\r\n</details>\r\n\r\n----\r\n\r\n> Since #28280 and #28233, the percentage of dirty entries in the cache when a flush happens may in practice be far from 100%. The log output, the decision to warn about a large flush (#31534), and the disk-full detection, however always use the entire size of the cache.\r\n>\r\n> Fix this by keeping track of the number of dirty entries in `CCoinsViewCache`, and using that number. We've dropped the usage of `DynamicMemoryUsage` as it's the wrong metric, even before the non-wiping flushes were introduced (if everything is dirty, memory usage is correlated with, but not the same as, the amount of disk space written or used). They could be improved by keeping track of proper write size estimates in a follow-up, but here we're just using a fixed 48 bytes per entry estimate.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/74",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/74",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/74/labels",
      "id": 12610874,
      "node_id": "MI_kwDOABII584AwG06",
      "number": 74,
      "state": "open",
      "title": "31.0",
      "creator": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "open_issues": 24,
      "closed_issues": 43,
      "created_at": "2025-03-25T18:44:16Z",
      "updated_at": "2026-02-13T11:17:34Z"
    },
    "created_at": "2025-10-01T02:24:51Z",
    "updated_at": "2026-02-17T07:25:15Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "2d55cd20ba0f123cb80d9c6083be80f6e4af59f7",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/warn-dirty-coin-coint",
      "ref": "l0rinc/warn-dirty-coin-coint",
      "sha": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 290987,
        "default_branch": "master",
        "open_issues_count": 45,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-16T17:09:52Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2026-02-13T22:28:06Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8f0e1f6540be5cc4f91f2409f0326a95d498087d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38905,
        "stargazers_count": 88150,
        "watchers_count": 88150,
        "size": 303672,
        "default_branch": "master",
        "open_issues_count": 736,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-16T13:43:11Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-17T06:09:16Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 68,
    "deletions": 26,
    "changed_files": 6,
    "commits": 3,
    "review_comments": 50,
    "comments": 12
  },
  "events": [
    {
      "event": "commented",
      "id": 3354465035,
      "node_id": "IC_kwDOABII587H8RML",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3354465035",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T02:24:56Z",
      "updated_at": "2026-02-16T12:00:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33512.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [andrewtoth](https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3780240209) |\n| Concept ACK | [Eunovo](https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3807747387) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34514](https://github.com/bitcoin/bitcoin/pull/34514) (refactor: remove unnecessary std::move for trivially copyable types by l0rinc)\n* [#34435](https://github.com/bitcoin/bitcoin/pull/34435) (refactor: use `_MiB`/`_GiB` consistently for byte conversions by l0rinc)\n* [#34124](https://github.com/bitcoin/bitcoin/pull/34124) (refactor: make `CCoinsView` a pure virtual interface by l0rinc)\n* [#33018](https://github.com/bitcoin/bitcoin/pull/33018) (coins: remove SetFresh method from CCoinsCacheEntry by andrewtoth)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n* [#29700](https://github.com/bitcoin/bitcoin/pull/29700) (kernel, refactor: return error status on all fatal errors by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3354465035",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "commented",
      "id": 3354509363,
      "node_id": "IC_kwDOABII587H8cAz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3354509363",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T02:49:23Z",
      "updated_at": "2025-10-01T02:49:23Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/18149289661/job/51656823259?pr=33512#step:9:2059:\r\n```bash\r\nRun coins_view_db with args ['/home/admin/actions-runner/_work/_temp/build/bin/fuzz', '-runs=1', PosixPath('/home/admin/actions-runner/_work/_temp/ci/scratch/qa-assets/fuzz_corpora/coins_view_db')]INFO: Running with entropic power schedule (0xFF, 100).\r\nINFO: Seed: 1436700023\r\nINFO: Loaded 1 modules   (611994 inline 8-bit counters): 611994 [0x6082fc8a27f8, 0x6082fc937e92), \r\nINFO: Loaded 1 PC tables (611994 PCs): 611994 [0x6082fc937e98,0x6082fd28e838), \r\nINFO:     2396 files found in /home/admin/actions-runner/_work/_temp/ci/scratch/qa-assets/fuzz_corpora/coins_view_db\r\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 275937 bytes\r\nINFO: seed corpus: files: 2396 min: 2b max: 275937b total: 27207582b rss: 109Mb\r\n/home/admin/actions-runner/_work/_temp/src/coins.h:288:23: runtime error: unsigned integer overflow: 0 - 1 cannot be represented in type 'size_t' (aka 'unsigned long')\r\n    #0 0x6082f97eb6c4 in CoinsViewCacheCursor::NextAndMaybeErase(std::pair<COutPoint const, CCoinsCacheEntry>&) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./coins.h:288:23\r\n    #1 0x6082fb3e30bb in CCoinsViewDB::BatchWrite(CoinsViewCacheCursor&, uint256 const&) /home/admin/actions-runner/_work/_temp/build/src/./txdb.cpp:137:21\r\n    #2 0x6082f9ec4573 in CCoinsViewCache::Flush() /home/admin/actions-runner/_work/_temp/build/src/./coins.cpp:265:22\r\n    #3 0x6082f97cb77f in TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_0::operator()() const /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/coins_view.cpp:77:48\r\n    #4 0x6082f97cb77f in unsigned long CallOneOf<TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_0, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_1, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_2, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_3, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_4, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_5, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_6, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_7, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_8, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_9, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_10>(FuzzedDataProvider&, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_0, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_1, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_2, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_3, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_4, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_5, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_6, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_7, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_8, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_9, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_10) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/util.h:42:27\r\n    #5 0x6082f97cb77f in TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/coins_view.cpp:56:9\r\n    #6 0x6082f97cfc0c in coins_view_db_fuzz_target(std::span<unsigned char const, 18446744073709551615ul>) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/coins_view.cpp:323:5\r\n    #7 0x6082f9e6efae in std::function<void (std::span<unsigned char const, 18446744073709551615ul>)>::operator()(std::span<unsigned char const, 18446744073709551615ul>) const /usr/lib/gcc/x86_64-linux-gnu/13/../../../../include/c++/13/bits/std_function.h:591:9\r\n    #8 0x6082f9e6efae in test_one_input(std::span<unsigned char const, 18446744073709551615ul>) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\r\n    #9 0x6082f9e6efae in LLVMFuzzerTestOneInput /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/util/./test/fuzz/fuzz.cpp:216:5\r\n    #10 0x6082f947d66f in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a8366f) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #11 0x6082f947cc79 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool, bool*) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a82c79) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #12 0x6082f947e9e2 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a849e2) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #13 0x6082f947ef00 in fuzzer::Fuzzer::Loop(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a84f00) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #14 0x6082f946b585 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a71585) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #15 0x6082f9497946 in main (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a9d946) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #16 0x756d565fa1c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\r\n    #17 0x756d565fa28a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\r\n    #18 0x6082f945fb54 in _start (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a65b54) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /home/admin/actions-runner/_work/_temp/src/coins.h:288:23 \r\nMS: 0 ; base unit: 0000000000000000000000000000000000000000\r\n0x1,0xff,0xff,0xff,0xf2,0xfc,0xff,0x2f,0x1f,0xa9,0x5d,0x30,0x30,0x90,0x0,0x0,0x0,0x14,0x69,0x0,0x0,0x0,0x0,0x0,0x0,0xc1,0xc1,0xc1,0xc1,0xc1,0xc1,0xb7,0xc1,0xc1,0x5c,0x91,0x3b,0x72,0x0,0xff,0xfa,0x21,\r\n\\001\\377\\377\\377\\362\\374\\377/\\037\\251]00\\220\\000\\000\\000\\024i\\000\\000\\000\\000\\000\\000\\301\\301\\301\\301\\301\\301\\267\\301\\301\\\\\\221;r\\000\\377\\372!\r\nartifact_prefix='./'; Test unit written to ./crash-ebc99ca6d40a3c7a37202cdba9a8b36a2cb6007b\r\nBase64: Af////L8/y8fqV0wMJAAAAAUaQAAAAAAAMHBwcHBwbfBwVyRO3IA//oh\r\n\r\nINFO: Running with entropic power schedule (0xFF, 100).\r\nINFO: Seed: 1436700023\r\nINFO: Loaded 1 modules   (611994 inline 8-bit counters): 611994 [0x6082fc8a27f8, 0x6082fc937e92), \r\nINFO: Loaded 1 PC tables (611994 PCs): 611994 [0x6082fc937e98,0x6082fd28e838), \r\nINFO:     2396 files found in /home/admin/actions-runner/_work/_temp/ci/scratch/qa-assets/fuzz_corpora/coins_view_db\r\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 275937 bytes\r\nINFO: seed corpus: files: 2396 min: 2b max: 275937b total: 27207582b rss: 109Mb\r\n/home/admin/actions-runner/_work/_temp/src/coins.h:288:23: runtime error: unsigned integer overflow: 0 - 1 cannot be represented in type 'size_t' (aka 'unsigned long')\r\n    #0 0x6082f97eb6c4 in CoinsViewCacheCursor::NextAndMaybeErase(std::pair<COutPoint const, CCoinsCacheEntry>&) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./coins.h:288:23\r\n    #1 0x6082fb3e30bb in CCoinsViewDB::BatchWrite(CoinsViewCacheCursor&, uint256 const&) /home/admin/actions-runner/_work/_temp/build/src/./txdb.cpp:137:21\r\n    #2 0x6082f9ec4573 in CCoinsViewCache::Flush() /home/admin/actions-runner/_work/_temp/build/src/./coins.cpp:265:22\r\n    #3 0x6082f97cb77f in TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_0::operator()() const /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/coins_view.cpp:77:48\r\n    #4 0x6082f97cb77f in unsigned long CallOneOf<TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_0, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_1, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_2, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_3, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_4, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_5, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_6, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_7, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_8, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_9, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_10>(FuzzedDataProvider&, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_0, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_1, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_2, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_3, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_4, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_5, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_6, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_7, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_8, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_9, TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool)::$_10) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/util.h:42:27\r\n    #5 0x6082f97cb77f in TestCoinsView(FuzzedDataProvider&, CCoinsView&, bool) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/coins_view.cpp:56:9\r\n    #6 0x6082f97cfc0c in coins_view_db_fuzz_target(std::span<unsigned char const, 18446744073709551615ul>) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/./test/fuzz/coins_view.cpp:323:5\r\n    #7 0x6082f9e6efae in std::function<void (std::span<unsigned char const, 18446744073709551615ul>)>::operator()(std::span<unsigned char const, 18446744073709551615ul>) const /usr/lib/gcc/x86_64-linux-gnu/13/../../../../include/c++/13/bits/std_function.h:591:9\r\n    #8 0x6082f9e6efae in test_one_input(std::span<unsigned char const, 18446744073709551615ul>) /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\r\n    #9 0x6082f9e6efae in LLVMFuzzerTestOneInput /home/admin/actions-runner/_work/_temp/build/src/test/fuzz/util/./test/fuzz/fuzz.cpp:216:5\r\n    #10 0x6082f947d66f in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a8366f) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #11 0x6082f947cc79 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool, bool*) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a82c79) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #12 0x6082f947e9e2 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a849e2) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #13 0x6082f947ef00 in fuzzer::Fuzzer::Loop(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a84f00) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #14 0x6082f946b585 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a71585) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #15 0x6082f9497946 in main (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a9d946) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n    #16 0x756d565fa1c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\r\n    #17 0x756d565fa28a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\r\n    #18 0x6082f945fb54 in _start (/home/admin/actions-runner/_work/_temp/build/bin/fuzz+0x1a65b54) (BuildId: c46e5f78c23c1d0b2ce0fb85b0817bc7fae97dd8)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /home/admin/actions-runner/_work/_temp/src/coins.h:288:23 \r\nMS: 0 ; base unit: 0000000000000000000000000000000000000000\r\n0x1,0xff,0xff,0xff,0xf2,0xfc,0xff,0x2f,0x1f,0xa9,0x5d,0x30,0x30,0x90,0x0,0x0,0x0,0x14,0x69,0x0,0x0,0x0,0x0,0x0,0x0,0xc1,0xc1,0xc1,0xc1,0xc1,0xc1,0xb7,0xc1,0xc1,0x5c,0x91,0x3b,0x72,0x0,0xff,0xfa,0x21,\r\n\\001\\377\\377\\377\\362\\374\\377/\\037\\251]00\\220\\000\\000\\000\\024i\\000\\000\\000\\000\\000\\000\\301\\301\\301\\301\\301\\301\\267\\301\\301\\\\\\221;r\\000\\377\\372!\r\nartifact_prefix='./'; Test unit written to ./crash-ebc99ca6d40a3c7a37202cdba9a8b36a2cb6007b\r\nBase64: Af////L8/y8fqV0wMJAAAAAUaQAAAAAAAMHBwcHBwbfBwVyRO3IA//oh\r\n\r\n⚠️ Failure generated from target with exit code 1: ['/home/admin/actions-runner/_work/_temp/build/bin/fuzz', '-runs=1', PosixPath('/home/admin/actions-runner/_work/_temp/ci/scratch/qa-assets/fuzz_corpora/coins_view_db')]\r\n```",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3354509363",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20023825298,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASpg1OS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20023825298",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cb270b0ab17cc47141bf0637df22961838859bef",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/cb270b0ab17cc47141bf0637df22961838859bef",
      "created_at": "2025-10-01T02:49:36Z"
    },
    {
      "event": "commented",
      "id": 3354512593,
      "node_id": "IC_kwDOABII587H8czR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3354512593",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T02:51:40Z",
      "updated_at": "2025-10-01T02:51:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "@fanquake the fuzz test is fixed in a [separate PR](https://github.com/bitcoin/bitcoin/pull/32313), I have reverted a similar attempt here",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3354512593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "mentioned",
      "id": 20023843201,
      "node_id": "MEE_lADOABII587O7tROzwAAAASpg5mB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20023843201",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T02:51:42Z"
    },
    {
      "event": "subscribed",
      "id": 20023843235,
      "node_id": "SE_lADOABII587O7tROzwAAAASpg5mj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20023843235",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T02:51:42Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20043143953,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASqqhsR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20043143953",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b9ce8f30eaa6d4970d99307545615c7b19af3ff0",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/b9ce8f30eaa6d4970d99307545615c7b19af3ff0",
      "created_at": "2025-10-01T20:15:11Z"
    },
    {
      "event": "renamed",
      "id": 20043292921,
      "node_id": "RTE_lADOABII587O7tROzwAAAASqrGD5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20043292921",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T20:22:10Z",
      "rename": {
        "from": "Use number of dirty cache entries in flush warnings/logs",
        "to": "coins: use number of dirty cache entries in flush warnings/logs"
      }
    },
    {
      "event": "labeled",
      "id": 20043294083,
      "node_id": "LE_lADOABII587O7tROzwAAAASqrGWD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20043294083",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-01T20:22:14Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20043437438,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASqrpV-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20043437438",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "created_at": "2025-10-01T20:29:00Z"
    },
    {
      "event": "reviewed",
      "id": 3291791993,
      "node_id": "PRR_kwDOABII587ENMJ5",
      "url": null,
      "actor": null,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-02T02:12:54Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3291791993",
      "submitted_at": "2025-10-02T02:12:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20048656677,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASq_jkl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20048656677",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "14350992afdb9ca5a19baff9d94e2956f51fafed",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/14350992afdb9ca5a19baff9d94e2956f51fafed",
      "created_at": "2025-10-02T03:15:55Z"
    },
    {
      "event": "reviewed",
      "id": 3301923992,
      "node_id": "PRR_kwDOABII587Ez1yY",
      "url": null,
      "actor": null,
      "commit_id": "223c8490711f4917a7abebb0febe4964a87453aa",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-04T14:50:29Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3301923992",
      "submitted_at": "2025-10-04T14:50:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20131690334,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASv8Tde",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20131690334",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "70991e683d6f12ddcebfb03267e95ce44228bf57",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/70991e683d6f12ddcebfb03267e95ce44228bf57",
      "created_at": "2025-10-07T04:33:30Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20153722955,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASxQWhL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20153722955",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "78f1f460269e9a8e2dab28d68736a6737f35967e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/78f1f460269e9a8e2dab28d68736a6737f35967e",
      "created_at": "2025-10-08T03:02:04Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20154073684,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAASxRsJU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20154073684",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0fe4ba2a85c2ee77ebbd37ae45753020fcaee628",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/0fe4ba2a85c2ee77ebbd37ae45753020fcaee628",
      "created_at": "2025-10-08T03:37:09Z"
    },
    {
      "event": "labeled",
      "id": 20300368553,
      "node_id": "LE_lADOABII587O7tROzwAAAAS5_wqp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20300368553",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-15T16:23:00Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20307530182,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAS6bFHG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20307530182",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "created_at": "2025-10-16T00:31:46Z"
    },
    {
      "event": "commented",
      "id": 3408731231,
      "node_id": "IC_kwDOABII587LLRxf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3408731231",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-16T00:33:15Z",
      "updated_at": "2025-10-16T00:33:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased after https://github.com/bitcoin/bitcoin/pull/32313, the PR is simpler and better tested this way.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3408731231",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "unlabeled",
      "id": 20307814617,
      "node_id": "UNLE_lADOABII587O7tROzwAAAAS6cKjZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20307814617",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-16T01:09:07Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20356020110,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAS9UDeO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20356020110",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "54151d612b63f4e42fe03a143540e597728a4cc3",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/54151d612b63f4e42fe03a143540e597728a4cc3",
      "created_at": "2025-10-18T05:45:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20388259973,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAS_PCiF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20388259973",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "created_at": "2025-10-20T20:18:04Z"
    },
    {
      "event": "reviewed",
      "id": 3358352925,
      "node_id": "PRR_kwDOABII587ILGYd",
      "url": null,
      "actor": null,
      "commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-21T00:00:35Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3358352925",
      "submitted_at": "2025-10-21T00:00:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20392582887,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAS_fh7n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20392582887",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "23271597eb09efc0d6735aee01f405a01d514868",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/23271597eb09efc0d6735aee01f405a01d514868",
      "created_at": "2025-10-21T02:03:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20842735406,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAATaUucu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20842735406",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d850b4998d19007ac48cce71480830f30a14414f",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d850b4998d19007ac48cce71480830f30a14414f",
      "created_at": "2025-11-10T17:31:09Z"
    },
    {
      "event": "commented",
      "id": 3513030399,
      "node_id": "IC_kwDOABII587RZJb_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3513030399",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-10T17:31:25Z",
      "updated_at": "2025-11-10T17:31:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased, ready for review.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3513030399",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "reviewed",
      "id": 3468199365,
      "node_id": "PRR_kwDOABII587OuIXF",
      "url": null,
      "actor": null,
      "commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-15T16:38:40Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3468199365",
      "submitted_at": "2025-11-15T16:38:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "reviewed",
      "id": 3468202347,
      "node_id": "PRR_kwDOABII587OuJFr",
      "url": null,
      "actor": null,
      "commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-15T16:40:28Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3468202347",
      "submitted_at": "2025-11-15T16:40:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "reviewed",
      "id": 3468213135,
      "node_id": "PRR_kwDOABII587OuLuP",
      "url": null,
      "actor": null,
      "commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-15T17:00:33Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3468213135",
      "submitted_at": "2025-11-15T17:00:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "commented",
      "id": 3536685676,
      "node_id": "IC_kwDOABII587SzYps",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3536685676",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-15T17:13:00Z",
      "updated_at": "2025-11-15T17:13:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "A general observation: keeping a count like the dirty count is very efficient, but prone to going out of sync, e.g with future incorrect code changes. For eg., a missing decrement can result in the value creeping higher, a missing increment can result the value going lower, event to underflow -- `size_t` is unsigned. One mitigation is to create (inlinable) inc/dec methods, with sanity checks (in debug mode); pre-decrease the value cannot be 0, pre-increase it cannot be equal to the total entries. Event thought this value is used only for logging, checking for sub-0 underflow would make sense, as a guard against future bugs.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3536685676",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21097501312,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAATpglKA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21097501312",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3631ca738f76266633dbb15b332fe59d5936179f",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/3631ca738f76266633dbb15b332fe59d5936179f",
      "created_at": "2025-11-21T13:51:53Z"
    },
    {
      "event": "reviewed",
      "id": 3492784897,
      "node_id": "PRR_kwDOABII587QL6sB",
      "url": null,
      "actor": null,
      "commit_id": "d850b4998d19007ac48cce71480830f30a14414f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-21T13:52:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the comments @optout21, since I wasn't invalidating any ACKs, I have applied your suggestions (with rebase) - let me know if this is what you meant.\n\n> keeping a count like the dirty count is very efficient, but prone to going out of sync\n\nyeah, we have a few of these - but the sanitizers and sanity checks and fuzzers usually reveal the problems (sanitizers break on underflow and the sanity checks recalculate everything during testing).",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3492784897",
      "submitted_at": "2025-11-21T13:52:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "reviewed",
      "id": 3549880812,
      "node_id": "PRR_kwDOABII587TluHs",
      "url": null,
      "actor": null,
      "commit_id": "1d14979d5b746ef562b068e4198e30a9e85df1bb",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T02:16:18Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3549880812",
      "submitted_at": "2025-12-08T02:16:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "labeled",
      "id": 21491478403,
      "node_id": "LE_lADOABII587O7tROzwAAAAUA_e-D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21491478403",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T00:11:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21503781047,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAUBuai3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21503781047",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d119cdf877c296d39e5f3522c024c5d2ee81ae5b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d119cdf877c296d39e5f3522c024c5d2ee81ae5b",
      "created_at": "2025-12-11T12:58:05Z"
    },
    {
      "event": "unlabeled",
      "id": 21503916895,
      "node_id": "UNLE_lADOABII587O7tROzwAAAAUBu7tf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21503916895",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T13:04:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3641843791,
      "node_id": "IC_kwDOABII587ZEiBP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3641843791",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T13:07:00Z",
      "updated_at": "2025-12-11T13:07:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Clean rebase, reviews are welcome again.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3641843791",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "labeled",
      "id": 21505091489,
      "node_id": "LE_lADOABII587O7tROzwAAAAUBzaeh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21505091489",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T14:00:51Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21511140200,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAUCKfNo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21511140200",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "eac63b284fd7fc02f03cfd50ae06451baac16a51",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/eac63b284fd7fc02f03cfd50ae06451baac16a51",
      "created_at": "2025-12-11T18:31:54Z"
    },
    {
      "event": "unlabeled",
      "id": 21514300841,
      "node_id": "UNLE_lADOABII587O7tROzwAAAAUCWi2p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21514300841",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T21:35:42Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 21833988617,
      "node_id": "LE_lADOABII587O7tROzwAAAAUVaDoJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21833988617",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T02:43:23Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21835690207,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAUVgjDf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21835690207",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4",
      "created_at": "2026-01-03T11:33:13Z"
    },
    {
      "event": "commented",
      "id": 3706994613,
      "node_id": "IC_kwDOABII587c9D-1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3706994613",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T11:37:11Z",
      "updated_at": "2026-01-03T11:37:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased after https://github.com/bitcoin/bitcoin/pull/33866\r\n\r\n`git range-diff -U0 master eac63b2 0ac4cb6`:\r\n* Adjusted the `Flush`/`Sync` changes;\r\n* Removed a useless move from: `stack.back()->AddCoin(op, std::move(newcoin), ...`;\r\n\r\nReady for review again!",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3706994613",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "unlabeled",
      "id": 21836052679,
      "node_id": "UNLE_lADOABII587O7tROzwAAAAUVh7jH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21836052679",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T13:24:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3668222487,
      "node_id": "PRR_kwDOABII587apKIX",
      "url": null,
      "actor": null,
      "commit_id": "0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-16T00:30:26Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3668222487",
      "submitted_at": "2026-01-16T00:30:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "reviewed",
      "id": 3668300187,
      "node_id": "PRR_kwDOABII587apdGb",
      "url": null,
      "actor": null,
      "commit_id": "0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-16T01:12:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "utACK 0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4\r\n\r\nThis removes redundant logging of the large flush warning when running in pruned mode or in steady state, the latter of which happens more often now that we're flushing every hour.\r\n\r\nThis also does a more accurate disk space check, which currently might needlessly shutdown nodes even though the flush is actually small and can fit in the available disk space.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3668300187",
      "submitted_at": "2026-01-16T01:12:41Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22360229210,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAU0xgVa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22360229210",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "832a82eb0e661d97770b9ecfadbf967b001214f4",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/832a82eb0e661d97770b9ecfadbf967b001214f4",
      "created_at": "2026-01-28T23:04:08Z"
    },
    {
      "event": "commented",
      "id": 3814376790,
      "node_id": "IC_kwDOABII587jWsVW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3814376790",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T23:04:11Z",
      "updated_at": "2026-01-28T23:04:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Trivial rebase after https://github.com/bitcoin/bitcoin/pull/34207, ready for review again!",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3814376790",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "reviewed",
      "id": 3720158134,
      "node_id": "PRR_kwDOABII587dvRu2",
      "url": null,
      "actor": null,
      "commit_id": "ea9a9186669316b8c813fd568caa843d9de8cba1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-29T02:18:17Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3720158134",
      "submitted_at": "2026-01-29T02:18:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22383044774,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAU2Iiim",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22383044774",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ab191efac0dc7a08950b7251bf7b224f7e57f647",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/ab191efac0dc7a08950b7251bf7b224f7e57f647",
      "created_at": "2026-01-29T17:09:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22383062222,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAU2ImzO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22383062222",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5c117ced207b8758926962ab5a355a5dffc408f6",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/5c117ced207b8758926962ab5a355a5dffc408f6",
      "created_at": "2026-01-29T17:10:31Z"
    },
    {
      "event": "commented",
      "id": 3831768657,
      "node_id": "IC_kwDOABII587kZCZR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3831768657",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-01T19:01:55Z",
      "updated_at": "2026-02-01T19:01:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 5c117ced207b8758926962ab5a355a5dffc408f6\r\n ",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3831768657",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "milestoned",
      "id": 22566519962,
      "node_id": "MIE_lADOABII587O7tROzwAAAAVBEcSa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22566519962",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-05T18:01:09Z",
      "milestone": {
        "title": "31.0"
      }
    },
    {
      "event": "labeled",
      "id": 22616839877,
      "node_id": "LE_lADOABII587O7tROzwAAAAVEEZbF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22616839877",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T00:03:19Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdlNTJiMWI5NDVjNDEzN2UwZmIwNTcxNTA5MDYzNWNlODJlZDA0YjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e52b1b945c4137e0fb05715090635ce82ed04b3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7e52b1b945c4137e0fb05715090635ce82ed04b3",
      "tree": {
        "sha": "ae38abde671f39d67670e7184deb40e05e6c22a3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ae38abde671f39d67670e7184deb40e05e6c22a3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ae38abde671f39d67670e7184deb40e05e6c22a3\nparent 8f0e1f6540be5cc4f91f2409f0326a95d498087d\nauthor Lőrinc <pap.lorinc@gmail.com> 1759268316 -0400\ncommitter Lőrinc <pap.lorinc@gmail.com> 1770533788 +0100\n\nfuzz: call `EmplaceCoinInternalDANGER` as well in `SimulationTest`\n\nAdds test coverage by randomly calling `EmplaceCoinInternalDANGER` in `SimulationTest` to verify it remains correct as we modify it in a future commit.\n\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmIM5wACgkQZp//D/pH\nenb1Aw/9HctKY2c39pjLxY7HrYqZpsYx34Oe4MgEZTySdEoBgFQy78y/hZLGUen0\nRTFiY8iQWfTfOnFpObSHLwTI+Ig8bs5jLbdbTRCu8sE2iptsrRbpYglXV5EIkomq\n5xh+NeKV7rAfB2n6qs92fHUP5w8OKoJJFO0DeFnbv0YMQ7ToTJyb+CUh4N8Zp8q0\nxAJswvqY9/l+nBk/1kOHWY4f9CH48WwmVTiRu7Wb9pZivfOt9ftXhw+fwW2CgpI2\n9xwTTxT908pPVDCSmA+vfBLeIQykrOF6Nu29uQsFMo2grFgguH2j9wvrRbmTKe9c\nhgjB2N5bXStF+1pfI07r7vEj4zaYNQ8/btQaG7ArgS9JpmkZDvhPtrRWPmMx6IRe\ntnrrsAm/gqOuSegYDn+jy4PwyFMnN9bxc3oIGYZ9w4jyt6dy1+b7nPidovGl4CfR\n5k/id284jS58QZ/urxvZ/aFDgcm512jpnFB5X+Y8GglxKC9SkkaBZrrZce3U/yoX\nPFMxRC2COkCZ9+IUA9LYu9+sg01BgWrOPCsqMbElaTNXv87XMa4SDR4FXy0eeFOW\nu0+AwUNX5QP+tJl0w76gYIOKbAxku8e/KrXAh9aWrwWEmkdhEU6PXnByoa2pXKk4\nKM6wlKtYa2RsOMjXgct5K/hiosZQVo3/Trx2glWzZDFBWRJSb04=\n=gJyN\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8f0e1f6540be5cc4f91f2409f0326a95d498087d",
          "sha": "8f0e1f6540be5cc4f91f2409f0326a95d498087d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8f0e1f6540be5cc4f91f2409f0326a95d498087d"
        }
      ],
      "message": "fuzz: call `EmplaceCoinInternalDANGER` as well in `SimulationTest`\n\nAdds test coverage by randomly calling `EmplaceCoinInternalDANGER` in `SimulationTest` to verify it remains correct as we modify it in a future commit.\n\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-08T06:56:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-09-30T21:38:36Z"
      },
      "sha": "7e52b1b945c4137e0fb05715090635ce82ed04b3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22619860813,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAVEP69N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22619860813",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "70a8b67659fbb3d48d2ed4442dcaa87122f462b5",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/70a8b67659fbb3d48d2ed4442dcaa87122f462b5",
      "created_at": "2026-02-08T06:57:45Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI0MTM0OTFhMWNkZDlhNTFmMmFhMTBiNzc1NjUwZjU0ZjY3ODVlM2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "tree": {
        "sha": "e90a5b24393ff48ed2bd8d1866523ed8ee886ecd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e90a5b24393ff48ed2bd8d1866523ed8ee886ecd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e90a5b24393ff48ed2bd8d1866523ed8ee886ecd\nparent 7e52b1b945c4137e0fb05715090635ce82ed04b3\nauthor Pieter Wuille <pieter@wuille.net> 1737486130 -0500\ncommitter Lőrinc <pap.lorinc@gmail.com> 1770535416 +0100\n\ncoins: Keep track of number of dirty entries in `CCoinsViewCache`\n\nAdds `m_dirty_count` member to track the running count of dirty cache entries as follows:\n* Incremented when entries are marked dirty via `CCoinsCacheEntry::SetDirty`\n* Decremented when dirty entries are removed or cleaned\n* Passed through `CoinsViewCacheCursor` and updated during iteration\n\nThe dirty count is needed because after non-wiping flushes (introduced in #28280 and #28233), the percentage of dirty entries in the cache may be far below 100%. Using total cache size for flush warnings and disk space checks is therefore misleading.\n\nUpdates all test code to properly initialize and maintain the dirty count.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\nCo-authored-by: optout <13562139+optout21@users.noreply.github.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmIOfgACgkQZp//D/pH\nenaatQ//bqKa83KKmRoKaKDb2cnkvM0LnwRqlhDhCGidDdbNbYcZrArO1zlDxfEm\njahtjArQJX/fpUnoD9v+mYxDJBTNk70IV0X2A+3OK9cJjmml/K3VKNWPpTvYrHhN\nTrVpRfHdlmS3NxSjk/0pQgoR8NvBz82XYyfHHiokvEmoRd5+LMDoGl1RVtBYngRK\ntElCrewbBgSXQTOKSZa8Ry44X/8no1gKWB8yRGitgmDtii7yM2gMPJWtjl9vhSuA\nqD7uIPHimRjH1qXyyp2Yi2EcO4gA/4ywUEs/UnLG4owWmRoafDtZpBUdm2YjXffK\na2EMb5gc6EjU/uSXjlo44okvIOVBYHFsjGGzhh8v/xqQcRwPClbOpS0Le33Kk25H\nJcu1Nxju6IiFPmjW15MGsv9AMOlL9eaS8tQFm4gSRNA/ua90+zTEuXmnaIoqjXqE\nUqVwgd31SK+dHeyLvcQV2IbQ+2IXkFx1Uw9IJGhe9D0Ko5aQ46ND6MK9n7vKyZp3\n42Zl0pylYSkWuWhwY3E1KrW0iATtR4jTB9BMBcbWSRnyxjwj6Cjwlo/WWV08Grcz\no9N+kqWM/bRZTKl3q5KIqjB6Ru4guRojIjpSeiJcu+n7O9NWDYRnLp1skjMiVjUT\n8CKKacu7K/971ciiCLa/sSWxHxjvNl3EQCEnV3PYXpXTISF2u6o=\n=+z9z\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e52b1b945c4137e0fb05715090635ce82ed04b3",
          "sha": "7e52b1b945c4137e0fb05715090635ce82ed04b3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7e52b1b945c4137e0fb05715090635ce82ed04b3"
        }
      ],
      "message": "coins: Keep track of number of dirty entries in `CCoinsViewCache`\n\nAdds `m_dirty_count` member to track the running count of dirty cache entries as follows:\n* Incremented when entries are marked dirty via `CCoinsCacheEntry::SetDirty`\n* Decremented when dirty entries are removed or cleaned\n* Passed through `CoinsViewCacheCursor` and updated during iteration\n\nThe dirty count is needed because after non-wiping flushes (introduced in #28280 and #28233), the percentage of dirty entries in the cache may be far below 100%. Using total cache size for flush warnings and disk space checks is therefore misleading.\n\nUpdates all test code to properly initialize and maintain the dirty count.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\nCo-authored-by: Andrew Toth <andrewstoth@gmail.com>\nCo-authored-by: optout <13562139+optout21@users.noreply.github.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-08T07:23:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-21T19:02:10Z"
      },
      "sha": "b413491a1cdd9a51f2aa10b775650f54f6785e3e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFmYjFiYzEyMGVjY2UyYmY2NjMwOTNlMTVjOTNmNTU5MmMwZDRhOTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "tree": {
        "sha": "ad77b77b321a809b76316dd2bf3fd7a2e1aadcec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ad77b77b321a809b76316dd2bf3fd7a2e1aadcec"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ad77b77b321a809b76316dd2bf3fd7a2e1aadcec\nparent b413491a1cdd9a51f2aa10b775650f54f6785e3e\nauthor Pieter Wuille <pieter@wuille.net> 1737487254 -0500\ncommitter Lőrinc <pap.lorinc@gmail.com> 1770535417 +0100\n\nvalidation: Use dirty entry count in flush warnings and disk space checks\n\nChanges flush warnings to use the actual number of dirty entries being written rather than total cache size or memory usage:\n* Moves warning from `FlushStateToDisk` to `CCoinsViewDB::BatchWrite` so it applies to both regular flushes and `AssumeUTXO` snapshot writes\n* Changes threshold from `WARN_FLUSH_COINS_SIZE` (1 GiB) to `WARN_FLUSH_COINS_COUNT` (10M entries), approximately equivalent - this also helps with the confusion caused by UTXO size difference on-disk vs in-memory\n* Moves benchmark logging to `BatchWrite` where the actual disk I/O occurs to make sure AssumeUTXO also warns\n* Uses dirty count for disk space check (48 bytes per entry estimate)\n* Removes redundant `changed` counter since `dirty_count` is now tracked\n\nThis ensures users are warned appropriately even when only a fraction of the cache is dirty, and provides accurate warnings during `AssumeUTXO` loads.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmIOfkACgkQZp//D/pH\nenYyxRAAyIdWkYtrXS+r7rKsGVuwsX6g1lPPz6hESoYuER9v3UzJJh8DfFozhGMe\nuhGKfp6p6syKAmpGBb4QNw5fvZr4siqTqc7z58Pv9O7pO/tKCJXY2MykwqNPTMss\nnS3R3nu1w7x+lcjv+ip2rJVBTr/enI6iQ5Klzc7BFarY0F3MhCUtFkrdLKcD/MW5\nOkQJl8PQuKoBhmOxt3u2v3bJHROa5i3DuCu2FCfdK0DquRwrTVjvUZAA2mxSN4um\nm0SpT2TKnKQmvhLXzQ7EimnQ+Q/N9tAc9C+O5g7uhHPXiOBuHLPXoKn1Y3yfEmC4\ndSN2l913pcc2iQHTHDCsYi+xIWSzdCuzcBMsJtEukifeZo4CwX3ckdmp9Bk9vVcN\nCipNlaZ+Lu2zdfSvxYKGpxw/Z6Rs9bzeEjGexJbsQjD6AQHJocc/NTKOCe9cIFOS\nfkUw3UAJjLi2u2QWhzn9BKVgVQOmTWcPMLjsLvtVEok1EDT5ZHAf38zTjqIMs6UY\nLVVUe/T8EQNoeW5kZgI8aZ9crysG+5hgJbfl69RA/NxRlAOzTeiMVLazElXMycjl\now8cyP207ypdedQN3j/9uzMZxBTs8vElDfnqKod3HITScmN+GY5eDU9LoO5s6xcr\nzWqDfGcB6+Uy5UVMJD76glQ1TJdpiIHpZZ2UEWX3MUXojIV6GVs=\n=iyBE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b413491a1cdd9a51f2aa10b775650f54f6785e3e",
          "sha": "b413491a1cdd9a51f2aa10b775650f54f6785e3e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b413491a1cdd9a51f2aa10b775650f54f6785e3e"
        }
      ],
      "message": "validation: Use dirty entry count in flush warnings and disk space checks\n\nChanges flush warnings to use the actual number of dirty entries being written rather than total cache size or memory usage:\n* Moves warning from `FlushStateToDisk` to `CCoinsViewDB::BatchWrite` so it applies to both regular flushes and `AssumeUTXO` snapshot writes\n* Changes threshold from `WARN_FLUSH_COINS_SIZE` (1 GiB) to `WARN_FLUSH_COINS_COUNT` (10M entries), approximately equivalent - this also helps with the confusion caused by UTXO size difference on-disk vs in-memory\n* Moves benchmark logging to `BatchWrite` where the actual disk I/O occurs to make sure AssumeUTXO also warns\n* Uses dirty count for disk space check (48 bytes per entry estimate)\n* Removes redundant `changed` counter since `dirty_count` is now tracked\n\nThis ensures users are warned appropriately even when only a fraction of the cache is dirty, and provides accurate warnings during `AssumeUTXO` loads.\n\nCo-authored-by: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-08T07:23:37Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2025-01-21T19:20:54Z"
      },
      "sha": "afb1bc120ecce2bf663093e15c93f5592c0d4a98"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22620043274,
      "node_id": "HRFPE_lADOABII587O7tROzwAAAAVEQngK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22620043274",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "created_at": "2026-02-08T07:23:46Z"
    },
    {
      "event": "labeled",
      "id": 22620046977,
      "node_id": "LE_lADOABII587O7tROzwAAAAVEQoaB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22620046977",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T07:24:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3866387916,
      "node_id": "IC_kwDOABII587mdGXM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3866387916",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T07:24:27Z",
      "updated_at": "2026-02-08T07:24:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `Alpine (musl)`: https://github.com/bitcoin/bitcoin/actions/runs/21794006003/job/62878385889</sub>\n<sub>LLM reason (✨ experimental): txvalidationcache_tests failed with a subprocess abort (CoinsViewCache::Flush assertion).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3866387916",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "unlabeled",
      "id": 22620595265,
      "node_id": "UNLE_lADOABII587O7tROzwAAAAVESuRB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22620595265",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T08:38:34Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22621071000,
      "node_id": "UNLE_lADOABII587O7tROzwAAAAVEUiaY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22621071000",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T09:26:28Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3868377224,
      "node_id": "IC_kwDOABII587mksCI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3868377224",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-08T21:58:53Z",
      "updated_at": "2026-02-08T21:58:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased after silent conflict with https://github.com/bitcoin/bitcoin/pull/34164/changes#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77cR281.\r\nReady for review again, would be great if it could make it into v31.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#issuecomment-3868377224",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33512"
    },
    {
      "event": "reviewed",
      "id": 3780240209,
      "node_id": "PRR_kwDOABII587hUeNR",
      "url": null,
      "actor": null,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-10T16:40:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK afb1bc120ecce2bf663093e15c93f5592c0d4a98\n\nAdded `m_dirty_count` to `Reset`, and covered it in the `Reset` unit test.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3780240209",
      "submitted_at": "2026-02-10T16:40:49Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    },
    {
      "event": "reviewed",
      "id": 3807747387,
      "node_id": "PRR_kwDOABII587i9Z07",
      "url": null,
      "actor": null,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-16T12:00:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK https://github.com/bitcoin/bitcoin/pull/33512/commits/afb1bc120ecce2bf663093e15c93f5592c0d4a98\r\n\r\nI will test soon",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#pullrequestreview-3807747387",
      "submitted_at": "2026-02-16T12:00:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396411224",
      "pull_request_review_id": 3291791993,
      "id": 2396411224,
      "node_id": "PRRC_kwDOABII586O1lVY",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Adds test coverage by randomly calling `EmplaceCoinInternalDANGER` in `SimulationTest` to verify the accounting remains correct.\r\n\r\nWhere do we verify that the accounting is correct? This also checks that the map does not contain this coin, so the `if (inserted) {` block will always be true and we never test the other case.",
      "created_at": "2025-10-02T01:35:46Z",
      "updated_at": "2025-10-02T02:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396411224",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396411224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396423379",
      "pull_request_review_id": 3291791993,
      "id": 2396423379,
      "node_id": "PRRC_kwDOABII586O1oTT",
      "diff_hunk": "@@ -99,7 +99,7 @@ class CCoinsViewCacheTest : public CCoinsViewCache\n \n     CCoinsMap& map() const { return cacheCoins; }\n     CoinsCachePair& sentinel() const { return m_sentinel; }\n-    size_t& usage() const { return cachedCoinsUsage; }\n+    void AddUsage(size_t usage) const { cachedCoinsUsage += usage; }",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "original_commit_id": "6aecb42c40d789e01d70d56d0e1c14a1c5324ac0",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The benefit of the change in this commit is unclear. I think it could just be removed to make review easier.",
      "created_at": "2025-10-02T01:48:54Z",
      "updated_at": "2025-10-02T02:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396423379",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396423379"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396429458",
      "pull_request_review_id": 3291791993,
      "id": 2396429458,
      "node_id": "PRRC_kwDOABII586O1pyS",
      "diff_hunk": "@@ -205,8 +210,9 @@ bool CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &ha\n                 } else {\n                     entry.coin = it->second.coin;\n                 }\n-                cachedCoinsUsage += entry.coin.DynamicMemoryUsage();\n                 CCoinsCacheEntry::SetDirty(*itUs, m_sentinel);\n+                ++m_dirty_count;\n+                cachedCoinsUsage += entry.coin.DynamicMemoryUsage();",
      "path": "src/coins.cpp",
      "position": 44,
      "original_position": 44,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "db66bc45bf9c1645ea13b240c9574e4ebb150020",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why was this line moved?",
      "created_at": "2025-10-02T01:55:41Z",
      "updated_at": "2025-10-02T02:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396429458",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396429458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 217,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396433735",
      "pull_request_review_id": 3291791993,
      "id": 2396433735,
      "node_id": "PRRC_kwDOABII586O1q1H",
      "diff_hunk": "@@ -251,19 +261,20 @@ bool CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &ha\n }\n \n bool CCoinsViewCache::Flush() {\n-    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_sentinel, cacheCoins, /*will_erase=*/true)};\n+    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/true)};\n     bool fOk = base->BatchWrite(cursor, hashBlock);\n     if (fOk) {\n         cacheCoins.clear();\n         ReallocateCache();\n     }\n     cachedCoinsUsage = 0;\n+    m_dirty_count = 0;\n     return fOk;\n }\n \n bool CCoinsViewCache::Sync()\n {\n-    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_sentinel, cacheCoins, /*will_erase=*/false)};\n+    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/false)};\n     bool fOk = base->BatchWrite(cursor, hashBlock);\n     if (fOk) {\n         if (m_sentinel.second.Next() != &m_sentinel) {",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 90,
      "commit_id": "eac63b284fd7fc02f03cfd50ae06451baac16a51",
      "original_commit_id": "db66bc45bf9c1645ea13b240c9574e4ebb150020",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Should we also throw here if m_dirty_count is not zero?",
      "created_at": "2025-10-02T02:00:08Z",
      "updated_at": "2025-10-02T02:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396433735",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396433735"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 280,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396441413",
      "pull_request_review_id": 3291791993,
      "id": 2396441413,
      "node_id": "PRRC_kwDOABII586O1stF",
      "diff_hunk": "@@ -148,9 +154,9 @@ bool CCoinsViewDB::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashB\n     batch.Erase(DB_HEAD_BLOCKS);\n     batch.Write(DB_BEST_BLOCK, hashBlock);\n \n-    LogDebug(BCLog::COINDB, \"Writing final batch of %.2f MiB\\n\", batch.ApproximateSize() * (1.0 / 1048576.0));\n+    LogDebug(BCLog::COINDB, \"Writing final batch of %.2f MiB\", batch.ApproximateSize() * (1.0 / 1048576.0));",
      "path": "src/txdb.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "original_commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This was touched just to remove the `\\n`?",
      "created_at": "2025-10-02T02:09:15Z",
      "updated_at": "2025-10-02T02:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396441413",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396441413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396442654",
      "pull_request_review_id": 3291791993,
      "id": 2396442654,
      "node_id": "PRRC_kwDOABII586O1tAe",
      "diff_hunk": "@@ -2891,7 +2885,7 @@ bool Chainstate::FlushStateToDisk(\n                     (uint32_t)mode,\n                     (uint64_t)coins_count,\n                     (uint64_t)coins_mem_usage,\n-                    (bool)fFlushForPrune);\n+                    fFlushForPrune);",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "original_commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why was this line changed?",
      "created_at": "2025-10-02T02:10:44Z",
      "updated_at": "2025-10-02T02:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396442654",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396442654"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2888,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396496517",
      "pull_request_review_id": 3291892191,
      "id": 2396496517,
      "node_id": "PRRC_kwDOABII586O16KF",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```\r\n    /**\r\n     * Emplace a coin into cacheCoins without performing any checks, marking\r\n     * the emplaced coin as dirty.\r\n     *\r\n     * NOT FOR GENERAL USE. Used only when loading coins from a UTXO snapshot.\r\n     * @sa ChainstateManager::PopulateAndValidateSnapshot()\r\n     */\r\n    void EmplaceCoinInternalDANGER(COutPoint&& outpoint, Coin&& coin);\r\n```\r\n`EmplaceCoinInternalDANGER` is not meant to be used for an overwrite according to the docs, so to mimick the assumeutxo inserts I only called this when it's not already in the set.\r\nNot exactly sure why there's an `if (inserted) {` branch in `EmplaceCoinInternalDANGER` the first place, but don't want to modify too much here. What do you suggest?",
      "created_at": "2025-10-02T03:06:59Z",
      "updated_at": "2025-10-02T03:07:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396496517",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396496517"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505624",
      "pull_request_review_id": 3291906129,
      "id": 2396505624,
      "node_id": "PRRC_kwDOABII586O18YY",
      "diff_hunk": "@@ -2891,7 +2885,7 @@ bool Chainstate::FlushStateToDisk(\n                     (uint32_t)mode,\n                     (uint64_t)coins_count,\n                     (uint64_t)coins_mem_usage,\n-                    (bool)fFlushForPrune);\n+                    fFlushForPrune);",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "original_commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "in_reply_to_id": 2396442654,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "since we're casting a boolean to boolean, but I've reverted it",
      "created_at": "2025-10-02T03:15:50Z",
      "updated_at": "2025-10-02T03:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396505624",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2888,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505667",
      "pull_request_review_id": 3291906185,
      "id": 2396505667,
      "node_id": "PRRC_kwDOABII586O18ZD",
      "diff_hunk": "@@ -148,9 +154,9 @@ bool CCoinsViewDB::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &hashB\n     batch.Erase(DB_HEAD_BLOCKS);\n     batch.Write(DB_BEST_BLOCK, hashBlock);\n \n-    LogDebug(BCLog::COINDB, \"Writing final batch of %.2f MiB\\n\", batch.ApproximateSize() * (1.0 / 1048576.0));\n+    LogDebug(BCLog::COINDB, \"Writing final batch of %.2f MiB\", batch.ApproximateSize() * (1.0 / 1048576.0));",
      "path": "src/txdb.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "original_commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "in_reply_to_id": 2396441413,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "to unify it with the line below - not sure why you'd want to leave them different, but reverted it.",
      "created_at": "2025-10-02T03:15:53Z",
      "updated_at": "2025-10-02T03:15:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396505667",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505667"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 157,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505698",
      "pull_request_review_id": 3291906230,
      "id": 2396505698,
      "node_id": "PRRC_kwDOABII586O18Zi",
      "diff_hunk": "@@ -251,19 +261,20 @@ bool CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &ha\n }\n \n bool CCoinsViewCache::Flush() {\n-    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_sentinel, cacheCoins, /*will_erase=*/true)};\n+    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/true)};\n     bool fOk = base->BatchWrite(cursor, hashBlock);\n     if (fOk) {\n         cacheCoins.clear();\n         ReallocateCache();\n     }\n     cachedCoinsUsage = 0;\n+    m_dirty_count = 0;\n     return fOk;\n }\n \n bool CCoinsViewCache::Sync()\n {\n-    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_sentinel, cacheCoins, /*will_erase=*/false)};\n+    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/false)};\n     bool fOk = base->BatchWrite(cursor, hashBlock);\n     if (fOk) {\n         if (m_sentinel.second.Next() != &m_sentinel) {",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 90,
      "commit_id": "eac63b284fd7fc02f03cfd50ae06451baac16a51",
      "original_commit_id": "db66bc45bf9c1645ea13b240c9574e4ebb150020",
      "in_reply_to_id": 2396433735,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sure, we can add a `Assume(m_dirty_count == 0);` like in `ReallocateCache`",
      "created_at": "2025-10-02T03:15:55Z",
      "updated_at": "2025-10-02T03:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396505698",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505698"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 280,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505738",
      "pull_request_review_id": 3291906523,
      "id": 2396505738,
      "node_id": "PRRC_kwDOABII586O18aK",
      "diff_hunk": "@@ -205,8 +210,9 @@ bool CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &ha\n                 } else {\n                     entry.coin = it->second.coin;\n                 }\n-                cachedCoinsUsage += entry.coin.DynamicMemoryUsage();\n                 CCoinsCacheEntry::SetDirty(*itUs, m_sentinel);\n+                ++m_dirty_count;\n+                cachedCoinsUsage += entry.coin.DynamicMemoryUsage();",
      "path": "src/coins.cpp",
      "position": 44,
      "original_position": 44,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "db66bc45bf9c1645ea13b240c9574e4ebb150020",
      "in_reply_to_id": 2396429458,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "To make sure the `m_dirty_count` updates and the `cachedCoinsUsage` updates are always done in the same order for consistency.",
      "created_at": "2025-10-02T03:15:57Z",
      "updated_at": "2025-10-02T15:20:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396505738",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505738"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 217,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505776",
      "pull_request_review_id": 3291906596,
      "id": 2396505776,
      "node_id": "PRRC_kwDOABII586O18aw",
      "diff_hunk": "@@ -99,7 +99,7 @@ class CCoinsViewCacheTest : public CCoinsViewCache\n \n     CCoinsMap& map() const { return cacheCoins; }\n     CoinsCachePair& sentinel() const { return m_sentinel; }\n-    size_t& usage() const { return cachedCoinsUsage; }\n+    void AddUsage(size_t usage) const { cachedCoinsUsage += usage; }",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "bedb06362f793c4c62744e8eb98a7eaa3e88c9ce",
      "original_commit_id": "6aecb42c40d789e01d70d56d0e1c14a1c5324ac0",
      "in_reply_to_id": 2396423379,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "it's meant to avoid structures like `cache.usage() += InsertCoinsMapEntry(cache.map()`, but I don't mind reverting if you find that more readable.",
      "created_at": "2025-10-02T03:15:59Z",
      "updated_at": "2025-10-02T03:16:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2396505776",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2396505776"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2399206305",
      "pull_request_review_id": 3295173770,
      "id": 2399206305,
      "node_id": "PRRC_kwDOABII586PAPuh",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You also answered something similar in https://github.com/bitcoin/bitcoin/pull/31132#discussion_r2399049434",
      "created_at": "2025-10-02T15:21:47Z",
      "updated_at": "2025-10-02T15:21:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2399206305",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2399206305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2404014654",
      "pull_request_review_id": 3301923630,
      "id": 2404014654,
      "node_id": "PRRC_kwDOABII586PSlo-",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I see, so if this gets merged the test here can be modified in #31132 to test for insertion if already exists?\r\n\r\nI don't see where we verify the accounting though. You are referring to the `cachedCoinsUsage` accounting? This test doesn't seem to check that. Maybe that can be added?",
      "created_at": "2025-10-04T14:49:12Z",
      "updated_at": "2025-10-04T14:49:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2404014654",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2404014654"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2404015081",
      "pull_request_review_id": 3301923992,
      "id": 2404015081,
      "node_id": "PRRC_kwDOABII586PSlvp",
      "diff_hunk": "@@ -76,9 +76,6 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     bool inserted;\n     std::tie(it, inserted) = cacheCoins.emplace(std::piecewise_construct, std::forward_as_tuple(outpoint), std::tuple<>());\n     bool fresh = false;\n-    if (!inserted) {\n-        cachedCoinsUsage -= it->second.coin.DynamicMemoryUsage();\n-    }\n     if (!possible_overwrite) {\n         if (!it->second.coin.IsSpent()) {\n             throw std::logic_error(\"Attempted to overwrite an unspent coin (when possible_overwrite is false)\");",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 9,
      "commit_id": "0fe4ba2a85c2ee77ebbd37ae45753020fcaee628",
      "original_commit_id": "223c8490711f4917a7abebb0febe4964a87453aa",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Could we add a unit test to trigger this accounting error?",
      "created_at": "2025-10-04T14:50:29Z",
      "updated_at": "2025-10-04T14:50:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2404015081",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2404015081"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 83,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2409314955",
      "pull_request_review_id": 3308301293,
      "id": 2409314955,
      "node_id": "PRRC_kwDOABII586PmzqL",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, [added](https://github.com/bitcoin/bitcoin/compare/14350992afdb9ca5a19baff9d94e2956f51fafed..70991e683d6f12ddcebfb03267e95ce44228bf57) a fuzz test and allowed existing entries to be attempted in `EmplaceCoinInternalDANGER`",
      "created_at": "2025-10-07T04:34:28Z",
      "updated_at": "2025-10-07T04:35:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2409314955",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2409314955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2409318128",
      "pull_request_review_id": 3308306017,
      "id": 2409318128,
      "node_id": "PRRC_kwDOABII586Pm0bw",
      "diff_hunk": "@@ -76,9 +76,6 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     bool inserted;\n     std::tie(it, inserted) = cacheCoins.emplace(std::piecewise_construct, std::forward_as_tuple(outpoint), std::tuple<>());\n     bool fresh = false;\n-    if (!inserted) {\n-        cachedCoinsUsage -= it->second.coin.DynamicMemoryUsage();\n-    }\n     if (!possible_overwrite) {\n         if (!it->second.coin.IsSpent()) {\n             throw std::logic_error(\"Attempted to overwrite an unspent coin (when possible_overwrite is false)\");",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 9,
      "commit_id": "0fe4ba2a85c2ee77ebbd37ae45753020fcaee628",
      "original_commit_id": "223c8490711f4917a7abebb0febe4964a87453aa",
      "in_reply_to_id": 2404015081,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The modified fuzz already covers that - what would be the advantage of adding a unit test for it as well?",
      "created_at": "2025-10-07T04:36:34Z",
      "updated_at": "2025-10-07T04:36:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2409318128",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2409318128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 83,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2412387188",
      "pull_request_review_id": 3312648061,
      "id": 2412387188,
      "node_id": "PRRC_kwDOABII586Pyht0",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Update: had to remove the fuzz test, the accounting is broken here, but it's fixed in another PR, see: https://github.com/bitcoin/bitcoin/pull/32313#issuecomment-3379397164",
      "created_at": "2025-10-08T03:04:32Z",
      "updated_at": "2025-10-08T03:04:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2412387188",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2412387188"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423229107",
      "pull_request_review_id": 3327721136,
      "id": 2423229107,
      "node_id": "PRRC_kwDOABII586Qb4qz",
      "diff_hunk": "@@ -76,9 +76,6 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     bool inserted;\n     std::tie(it, inserted) = cacheCoins.emplace(std::piecewise_construct, std::forward_as_tuple(outpoint), std::tuple<>());\n     bool fresh = false;\n-    if (!inserted) {\n-        cachedCoinsUsage -= it->second.coin.DynamicMemoryUsage();\n-    }\n     if (!possible_overwrite) {\n         if (!it->second.coin.IsSpent()) {\n             throw std::logic_error(\"Attempted to overwrite an unspent coin (when possible_overwrite is false)\");",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 9,
      "commit_id": "0fe4ba2a85c2ee77ebbd37ae45753020fcaee628",
      "original_commit_id": "223c8490711f4917a7abebb0febe4964a87453aa",
      "in_reply_to_id": 2404015081,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "A unit test would check for regression on every test run.",
      "created_at": "2025-10-12T00:08:21Z",
      "updated_at": "2025-10-12T00:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2423229107",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423229107"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 83,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423229704",
      "pull_request_review_id": 3327721708,
      "id": 2423229704,
      "node_id": "PRRC_kwDOABII586Qb40I",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Does this PR depend on #32313?",
      "created_at": "2025-10-12T00:10:55Z",
      "updated_at": "2025-10-12T00:10:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2423229704",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423229704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423233247",
      "pull_request_review_id": 3327724876,
      "id": 2423233247,
      "node_id": "PRRC_kwDOABII586Qb5rf",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The two are related, but I made sure we can merge either of them - but the other one will likely need to be rebase after that",
      "created_at": "2025-10-12T00:27:57Z",
      "updated_at": "2025-10-12T00:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2423233247",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423233247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423304917",
      "pull_request_review_id": 3327841358,
      "id": 2423304917,
      "node_id": "PRRC_kwDOABII586QcLLV",
      "diff_hunk": "@@ -76,9 +76,6 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     bool inserted;\n     std::tie(it, inserted) = cacheCoins.emplace(std::piecewise_construct, std::forward_as_tuple(outpoint), std::tuple<>());\n     bool fresh = false;\n-    if (!inserted) {\n-        cachedCoinsUsage -= it->second.coin.DynamicMemoryUsage();\n-    }\n     if (!possible_overwrite) {\n         if (!it->second.coin.IsSpent()) {\n             throw std::logic_error(\"Attempted to overwrite an unspent coin (when possible_overwrite is false)\");",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 9,
      "commit_id": "0fe4ba2a85c2ee77ebbd37ae45753020fcaee628",
      "original_commit_id": "223c8490711f4917a7abebb0febe4964a87453aa",
      "in_reply_to_id": 2404015081,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Here I'm only modifying them because the build was failing otherwise, but I have indeed added tests to https://github.com/bitcoin/bitcoin/pull/32313 which will ideally be merged before this. Either way the other one needs rebasing.",
      "created_at": "2025-10-12T03:06:34Z",
      "updated_at": "2025-10-12T03:06:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2423304917",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2423304917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 83,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2440626085",
      "pull_request_review_id": 3351165038,
      "id": 2440626085,
      "node_id": "PRRC_kwDOABII586ReP-l",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think this is resolved now, with the merge of #32313?",
      "created_at": "2025-10-17T17:02:33Z",
      "updated_at": "2025-10-17T17:02:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2440626085",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2440626085"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2440729584",
      "pull_request_review_id": 3351300957,
      "id": 2440729584,
      "node_id": "PRRC_kwDOABII586RepPw",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, I think we can now remove the conditions `!stack.back()->map().contains(op) && !coin.IsSpent()`.",
      "created_at": "2025-10-17T17:44:45Z",
      "updated_at": "2025-10-17T17:44:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2440729584",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2440729584"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2441590945",
      "pull_request_review_id": 3352571515,
      "id": 2441590945,
      "node_id": "PRRC_kwDOABII586Rh7ih",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I wanted to make it more realistic, but the tests do pass now without them, thanks for the feedback, removed.",
      "created_at": "2025-10-18T05:45:48Z",
      "updated_at": "2025-10-18T05:46:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2441590945",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2441590945"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446031471",
      "pull_request_review_id": 3357812157,
      "id": 2446031471,
      "node_id": "PRRC_kwDOABII586Ry3pv",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Seems we were wrong, the test assumes that after this call the given `COutPoint` will correspond to the current coins - which isn't the case with `EmplaceCoinInternalDANGER` which never replaces, so I have reverted https://github.com/bitcoin/bitcoin/compare/62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e..54151d612b63f4e42fe03a143540e597728a4cc3\r\n\r\nSee the previous errors that the suggestions resulted in:\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/18611576758/job/53070427535?pr=33512#step:7:40482\r\n",
      "created_at": "2025-10-20T20:21:50Z",
      "updated_at": "2025-10-20T20:21:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2446031471",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446031471"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446373422",
      "pull_request_review_id": 3358287618,
      "id": 2446373422,
      "node_id": "PRRC_kwDOABII586R0LIu",
      "diff_hunk": "@@ -194,8 +194,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7afa7187772deb548fbf184525288b0599e7445e",
      "in_reply_to_id": 2396411224,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> the test assumes that after this call the given COutPoint will correspond to the current coins - which isn't the case with EmplaceCoinInternalDANGER which never replaces\r\n\r\nRight, so we still need `!stack.back()->map().contains(op)` but we don't need the `!coin.IsSpent()` check. Also, a few lines up we randomly set the pubkey to unspendable. In `AddCoin` we check if it is unspendable and don't add it, but in `EmplaceCoinInternalDANGER` we would add it. So I think we should also not use `EmplaceCoinInternalDANGER` if `newcoin.out.scriptPubKey.IsUnspendable()`.",
      "created_at": "2025-10-20T23:34:38Z",
      "updated_at": "2025-10-20T23:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2446373422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446373422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446409517",
      "pull_request_review_id": 3358352925,
      "id": 2446409517,
      "node_id": "PRRC_kwDOABII586R0T8t",
      "diff_hunk": "@@ -194,8 +195,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "original_commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !newcoin.out.scriptPubKey.IsUnspendable() && m_rng.randbool()) {\r\n```",
      "created_at": "2025-10-21T00:00:35Z",
      "updated_at": "2025-10-21T00:00:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2446409517",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446409517"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446538339",
      "pull_request_review_id": 3358514351,
      "id": 2446538339,
      "node_id": "PRRC_kwDOABII586R0zZj",
      "diff_hunk": "@@ -194,8 +195,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !coin.IsSpent() && m_rng.randbool()) {",
      "path": "src/test/coins_tests.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "original_commit_id": "62cb2a2ed84e695c0959d8e27fc5bedd9b5a135e",
      "in_reply_to_id": 2446409517,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, added you as coauthor, thanks",
      "created_at": "2025-10-21T02:04:03Z",
      "updated_at": "2025-10-21T02:04:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2446538339",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446538339"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2520732338",
      "pull_request_review_id": 3456606112,
      "id": 2520732338,
      "node_id": "PRRC_kwDOABII586WP1Ky",
      "diff_hunk": "@@ -251,19 +261,20 @@ bool CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256 &ha\n }\n \n bool CCoinsViewCache::Flush() {\n-    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_sentinel, cacheCoins, /*will_erase=*/true)};\n+    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/true)};\n     bool fOk = base->BatchWrite(cursor, hashBlock);\n     if (fOk) {\n         cacheCoins.clear();\n         ReallocateCache();\n     }\n     cachedCoinsUsage = 0;\n+    m_dirty_count = 0;\n     return fOk;\n }\n \n bool CCoinsViewCache::Sync()\n {\n-    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_sentinel, cacheCoins, /*will_erase=*/false)};\n+    auto cursor{CoinsViewCacheCursor(cachedCoinsUsage, m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/false)};\n     bool fOk = base->BatchWrite(cursor, hashBlock);\n     if (fOk) {\n         if (m_sentinel.second.Next() != &m_sentinel) {",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 90,
      "commit_id": "eac63b284fd7fc02f03cfd50ae06451baac16a51",
      "original_commit_id": "db66bc45bf9c1645ea13b240c9574e4ebb150020",
      "in_reply_to_id": 2396433735,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This behavior will conflict with https://github.com/bitcoin/bitcoin/pull/33866 then right? It will abort during tests if `Sync` is called with a raw `CCoinsView`. Should we throw instead and then we'll be able to catch it? Then whichever is merged second can add the catch condition?",
      "created_at": "2025-11-13T01:40:27Z",
      "updated_at": "2025-11-13T01:40:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2520732338",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2520732338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 280,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2529998066",
      "pull_request_review_id": 3468199365,
      "id": 2529998066,
      "node_id": "PRRC_kwDOABII586WzLTy",
      "diff_hunk": "@@ -666,7 +667,8 @@ static void WriteCoinsViewEntry(CCoinsView& view, const MaybeCoin& cache_coin)\n     CCoinsMapMemoryResource resource;\n     CCoinsMap map{0, CCoinsMap::hasher{}, CCoinsMap::key_equal{}, &resource};\n     if (cache_coin) InsertCoinsMapEntry(map, sentinel, *cache_coin);\n-    auto cursor{CoinsViewCacheCursor(sentinel, map, /*will_erase=*/true)};\n+    size_t dirty_count{cache_coin && cache_coin->IsDirty() ? 1U : 0U};\n+    auto cursor{CoinsViewCacheCursor(dirty_count, sentinel, map, /*will_erase=*/true)};",
      "path": "src/test/coins_tests.cpp",
      "position": 28,
      "original_position": 14,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can a check on `dirty_count` be added after the `BatchWrite` below?",
      "created_at": "2025-11-15T16:38:40Z",
      "updated_at": "2025-11-15T16:38:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2529998066",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2529998066"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 661,
      "original_line": 671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2530000189",
      "pull_request_review_id": 3468202347,
      "id": 2530000189,
      "node_id": "PRRC_kwDOABII586WzL09",
      "diff_hunk": "@@ -461,6 +466,9 @@ class CCoinsViewCache : public CCoinsViewBacked\n     //! Calculate the size of the cache (in number of transaction outputs)\n     unsigned int GetCacheSize() const;\n \n+    //! Calculate the number of dirty cache entries (transaction outputs)",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 43,
      "commit_id": "d850b4998d19007ac48cce71480830f30a14414f",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Misleading comment, no calculation takes place here, it's just an accessor.",
      "created_at": "2025-11-15T16:40:28Z",
      "updated_at": "2025-11-15T16:40:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2530000189",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2530000189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2530010319",
      "pull_request_review_id": 3468213135,
      "id": 2530010319,
      "node_id": "PRRC_kwDOABII586WzOTP",
      "diff_hunk": "@@ -96,10 +96,12 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n         fresh = !it->second.IsDirty();\n     }\n     if (!inserted) {\n+        m_dirty_count -= it->second.IsDirty();\n         cachedCoinsUsage -= it->second.coin.DynamicMemoryUsage();\n     }\n     it->second.coin = std::move(coin);\n     CCoinsCacheEntry::SetDirty(*it, m_sentinel);\n+    ++m_dirty_count;",
      "path": "src/coins.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I suggest moving this line one line down, such that `m_dirty_count` and `cachedCoinsUsage` updates are on adjacent lines, as they are logically related.",
      "created_at": "2025-11-15T17:00:32Z",
      "updated_at": "2025-11-15T17:00:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2530010319",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2530010319"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 106,
      "original_line": 104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549775651",
      "pull_request_review_id": 3492784897,
      "id": 2549775651,
      "node_id": "PRRC_kwDOABII586X-n0j",
      "diff_hunk": "@@ -666,7 +667,8 @@ static void WriteCoinsViewEntry(CCoinsView& view, const MaybeCoin& cache_coin)\n     CCoinsMapMemoryResource resource;\n     CCoinsMap map{0, CCoinsMap::hasher{}, CCoinsMap::key_equal{}, &resource};\n     if (cache_coin) InsertCoinsMapEntry(map, sentinel, *cache_coin);\n-    auto cursor{CoinsViewCacheCursor(sentinel, map, /*will_erase=*/true)};\n+    size_t dirty_count{cache_coin && cache_coin->IsDirty() ? 1U : 0U};\n+    auto cursor{CoinsViewCacheCursor(dirty_count, sentinel, map, /*will_erase=*/true)};",
      "path": "src/test/coins_tests.cpp",
      "position": 28,
      "original_position": 14,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": 2529998066,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You mean like:\r\n```C++\r\n    BOOST_CHECK_EQUAL(dirty_count, 0U);\r\n```\r\n? Done",
      "created_at": "2025-11-21T13:32:05Z",
      "updated_at": "2025-11-21T13:52:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2549775651",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549775651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 661,
      "original_line": 671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549782860",
      "pull_request_review_id": 3492784897,
      "id": 2549782860,
      "node_id": "PRRC_kwDOABII586X-plM",
      "diff_hunk": "@@ -461,6 +466,9 @@ class CCoinsViewCache : public CCoinsViewBacked\n     //! Calculate the size of the cache (in number of transaction outputs)\n     unsigned int GetCacheSize() const;\n \n+    //! Calculate the number of dirty cache entries (transaction outputs)",
      "path": "src/coins.h",
      "position": 1,
      "original_position": 43,
      "commit_id": "d850b4998d19007ac48cce71480830f30a14414f",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": 2530000189,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fair, changed both:\r\n```C++\r\n    //! Size of the cache (in number of transaction outputs)\r\n    unsigned int GetCacheSize() const;\r\n\r\n    //! Number of dirty cache entries (transaction outputs)\r\n    size_t GetDirtyCount() const noexcept { return m_dirty_count; }\r\n```",
      "created_at": "2025-11-21T13:34:34Z",
      "updated_at": "2025-11-21T13:52:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2549782860",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549782860"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549809335",
      "pull_request_review_id": 3492784897,
      "id": 2549809335,
      "node_id": "PRRC_kwDOABII586X-wC3",
      "diff_hunk": "@@ -96,10 +96,12 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n         fresh = !it->second.IsDirty();\n     }\n     if (!inserted) {\n+        m_dirty_count -= it->second.IsDirty();\n         cachedCoinsUsage -= it->second.coin.DynamicMemoryUsage();\n     }\n     it->second.coin = std::move(coin);\n     CCoinsCacheEntry::SetDirty(*it, m_sentinel);\n+    ++m_dirty_count;",
      "path": "src/coins.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": 2530010319,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I have grouped dirty setter and dirty count updates deliberately:\r\n```bash\r\n% git grep -A1 'CCoinsCacheEntry::SetDirty' src/coins.cpp\r\nsrc/coins.cpp:    CCoinsCacheEntry::SetDirty(*it, m_sentinel);\r\nsrc/coins.cpp-    ++m_dirty_count;\r\n--\r\nsrc/coins.cpp:        CCoinsCacheEntry::SetDirty(*it, m_sentinel);\r\nsrc/coins.cpp-        ++m_dirty_count;\r\n--\r\nsrc/coins.cpp:        CCoinsCacheEntry::SetDirty(*it, m_sentinel);\r\nsrc/coins.cpp-        ++m_dirty_count;\r\n--\r\nsrc/coins.cpp:                CCoinsCacheEntry::SetDirty(*itUs, m_sentinel);\r\nsrc/coins.cpp-                ++m_dirty_count;\r\n--\r\nsrc/coins.cpp:                    CCoinsCacheEntry::SetDirty(*itUs, m_sentinel);\r\nsrc/coins.cpp-                    ++m_dirty_count;\r\n```",
      "created_at": "2025-11-21T13:43:38Z",
      "updated_at": "2025-11-21T13:52:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2549809335",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549809335"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 106,
      "original_line": 104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596842637",
      "pull_request_review_id": 3549880812,
      "id": 2596842637,
      "node_id": "PRRC_kwDOABII586ayKyN",
      "diff_hunk": "@@ -271,10 +271,11 @@ struct CoinsViewCacheCursor\n     //! This is an optimization compared to erasing all entries as the cursor iterates them when will_erase is set.\n     //! Calling CCoinsMap::clear() afterwards is faster because a CoinsCachePair cannot be coerced back into a\n     //! CCoinsMap::iterator to be erased, and must therefore be looked up again by key in the CCoinsMap before being erased.\n-    CoinsViewCacheCursor(CoinsCachePair& sentinel LIFETIMEBOUND,\n+    CoinsViewCacheCursor(size_t& dirty_count LIFETIMEBOUND,",
      "path": "src/coins.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "1d14979d5b746ef562b068e4198e30a9e85df1bb",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Do we really need to pass the dirty count here? We always iterate through the entire cursor, so we can just set `m_dirty_count = 0;` after a `Sync` or `Flush` (we already do for `Flush`).",
      "created_at": "2025-12-08T02:16:18Z",
      "updated_at": "2025-12-08T02:16:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2596842637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596842637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 268,
      "original_line": 274,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2601978362",
      "pull_request_review_id": 3556573371,
      "id": 2601978362,
      "node_id": "PRRC_kwDOABII586bFwn6",
      "diff_hunk": "@@ -271,10 +271,11 @@ struct CoinsViewCacheCursor\n     //! This is an optimization compared to erasing all entries as the cursor iterates them when will_erase is set.\n     //! Calling CCoinsMap::clear() afterwards is faster because a CoinsCachePair cannot be coerced back into a\n     //! CCoinsMap::iterator to be erased, and must therefore be looked up again by key in the CCoinsMap before being erased.\n-    CoinsViewCacheCursor(CoinsCachePair& sentinel LIFETIMEBOUND,\n+    CoinsViewCacheCursor(size_t& dirty_count LIFETIMEBOUND,",
      "path": "src/coins.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "1d14979d5b746ef562b068e4198e30a9e85df1bb",
      "in_reply_to_id": 2596842637,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm, how would you display the warning in https://github.com/bitcoin/bitcoin/blob/3631ca738f76266633dbb15b332fe59d5936179f/src/txdb.cpp#L116 without knowing the dirty count in advance?  ",
      "created_at": "2025-12-09T10:17:09Z",
      "updated_at": "2025-12-09T10:17:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2601978362",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2601978362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 268,
      "original_line": 274,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2696441041",
      "pull_request_review_id": 3668222487,
      "id": 2696441041,
      "node_id": "PRRC_kwDOABII586guGzR",
      "diff_hunk": "@@ -255,19 +265,21 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n \n void CCoinsViewCache::Flush(bool will_reuse_cache)\n {\n-    auto cursor{CoinsViewCacheCursor(m_sentinel, cacheCoins, /*will_erase=*/true)};\n+    auto cursor{CoinsViewCacheCursor(m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/true)};\n     base->BatchWrite(cursor, hashBlock);\n     cacheCoins.clear();\n     if (will_reuse_cache) {\n         ReallocateCache();\n     }\n     cachedCoinsUsage = 0;\n+    m_dirty_count = 0;",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 80,
      "commit_id": "832a82eb0e661d97770b9ecfadbf967b001214f4",
      "original_commit_id": "0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We call `Assume(m_dirty_count == 0);` in `ReallocateCache();` above, but only set `m_dirty_count = 0;` here. We should just `Assume(m_dirty_count == 0);` after `BatchWrite` like we do with `Sync`.",
      "created_at": "2026-01-16T00:30:26Z",
      "updated_at": "2026-01-16T00:30:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2696441041",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2696441041"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 275,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2696500539",
      "pull_request_review_id": 3668294172,
      "id": 2696500539,
      "node_id": "PRRC_kwDOABII586guVU7",
      "diff_hunk": "@@ -271,10 +271,11 @@ struct CoinsViewCacheCursor\n     //! This is an optimization compared to erasing all entries as the cursor iterates them when will_erase is set.\n     //! Calling CCoinsMap::clear() afterwards is faster because a CoinsCachePair cannot be coerced back into a\n     //! CCoinsMap::iterator to be erased, and must therefore be looked up again by key in the CCoinsMap before being erased.\n-    CoinsViewCacheCursor(CoinsCachePair& sentinel LIFETIMEBOUND,\n+    CoinsViewCacheCursor(size_t& dirty_count LIFETIMEBOUND,",
      "path": "src/coins.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "1d14979d5b746ef562b068e4198e30a9e85df1bb",
      "in_reply_to_id": 2596842637,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Right, we need that since we're moving the checks to the db. You can resolve this conversation.",
      "created_at": "2026-01-16T01:09:30Z",
      "updated_at": "2026-01-16T01:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2696500539",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2696500539"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 268,
      "original_line": 274,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2739455346",
      "pull_request_review_id": 3720158134,
      "id": 2739455346,
      "node_id": "PRRC_kwDOABII586jSMVy",
      "diff_hunk": "@@ -316,6 +329,7 @@ void CCoinsViewCache::SanityCheck() const\n {\n     size_t recomputed_usage = 0;\n     size_t count_dirty = 0;\n+    size_t dirty_count = 0;",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 104,
      "commit_id": "ea9a9186669316b8c813fd568caa843d9de8cba1",
      "original_commit_id": "ea9a9186669316b8c813fd568caa843d9de8cba1",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We don't need this `dirty_count` anymore, it is redundant with `count_dirty`.",
      "created_at": "2026-01-29T02:18:17Z",
      "updated_at": "2026-01-29T02:18:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2739455346",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2739455346"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 332,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742677627",
      "pull_request_review_id": 3724007851,
      "id": 2742677627,
      "node_id": "PRRC_kwDOABII586jefB7",
      "diff_hunk": "@@ -316,6 +329,7 @@ void CCoinsViewCache::SanityCheck() const\n {\n     size_t recomputed_usage = 0;\n     size_t count_dirty = 0;\n+    size_t dirty_count = 0;",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 104,
      "commit_id": "ea9a9186669316b8c813fd568caa843d9de8cba1",
      "original_commit_id": "ea9a9186669316b8c813fd568caa843d9de8cba1",
      "in_reply_to_id": 2739455346,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hah, beautiful, [fixed](https://github.com/bitcoin/bitcoin/compare/832a82eb0e661d97770b9ecfadbf967b001214f4..5c117ced207b8758926962ab5a355a5dffc408f6) and adjusted the PR description.",
      "created_at": "2026-01-29T17:10:31Z",
      "updated_at": "2026-01-29T17:12:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2742677627",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742677627"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 332,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742678132",
      "pull_request_review_id": 3724008391,
      "id": 2742678132,
      "node_id": "PRRC_kwDOABII586jefJ0",
      "diff_hunk": "@@ -255,19 +265,21 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n \n void CCoinsViewCache::Flush(bool will_reuse_cache)\n {\n-    auto cursor{CoinsViewCacheCursor(m_sentinel, cacheCoins, /*will_erase=*/true)};\n+    auto cursor{CoinsViewCacheCursor(m_dirty_count, m_sentinel, cacheCoins, /*will_erase=*/true)};\n     base->BatchWrite(cursor, hashBlock);\n     cacheCoins.clear();\n     if (will_reuse_cache) {\n         ReallocateCache();\n     }\n     cachedCoinsUsage = 0;\n+    m_dirty_count = 0;",
      "path": "src/coins.cpp",
      "position": 1,
      "original_position": 80,
      "commit_id": "832a82eb0e661d97770b9ecfadbf967b001214f4",
      "original_commit_id": "0ac4cb69b59f382bf45a3cacc97e49b1eea1dbe4",
      "in_reply_to_id": 2696441041,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, good observation, adjusted and added you as coauthor.",
      "created_at": "2026-01-29T17:10:39Z",
      "updated_at": "2026-01-29T17:10:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2742678132",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742678132"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 275,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742679028",
      "pull_request_review_id": 3724009660,
      "id": 2742679028,
      "node_id": "PRRC_kwDOABII586jefX0",
      "diff_hunk": "@@ -666,7 +667,8 @@ static void WriteCoinsViewEntry(CCoinsView& view, const MaybeCoin& cache_coin)\n     CCoinsMapMemoryResource resource;\n     CCoinsMap map{0, CCoinsMap::hasher{}, CCoinsMap::key_equal{}, &resource};\n     if (cache_coin) InsertCoinsMapEntry(map, sentinel, *cache_coin);\n-    auto cursor{CoinsViewCacheCursor(sentinel, map, /*will_erase=*/true)};\n+    size_t dirty_count{cache_coin && cache_coin->IsDirty() ? 1U : 0U};\n+    auto cursor{CoinsViewCacheCursor(dirty_count, sentinel, map, /*will_erase=*/true)};",
      "path": "src/test/coins_tests.cpp",
      "position": 28,
      "original_position": 14,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "dcbc4c2fd3a2a3b488f0d378a9c394b41ed20b2f",
      "in_reply_to_id": 2529998066,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, added you as coauthor",
      "created_at": "2026-01-29T17:10:53Z",
      "updated_at": "2026-01-29T17:10:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2742679028",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742679028"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 661,
      "original_line": 671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2811636851",
      "pull_request_review_id": 3807747387,
      "id": 2811636851,
      "node_id": "PRRC_kwDOABII586nlixz",
      "diff_hunk": "@@ -189,8 +189,11 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\n                     (coin.IsSpent() ? added_an_entry : updated_an_entry) = true;\n                     coin = newcoin;\n                 }\n-                bool is_overwrite = !coin.IsSpent() || m_rng.rand32() & 1;\n-                stack.back()->AddCoin(COutPoint(txid, 0), std::move(newcoin), is_overwrite);\n+                if (COutPoint op(txid, 0); !stack.back()->map().contains(op) && !newcoin.out.scriptPubKey.IsUnspendable() && m_rng.randbool()) {\n+                    stack.back()->EmplaceCoinInternalDANGER(std::move(op), std::move(newcoin));",
      "path": "src/test/coins_tests.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "7e52b1b945c4137e0fb05715090635ce82ed04b3",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/33512/commits/7e52b1b945c4137e0fb05715090635ce82ed04b3:\r\n\r\nIt might be a good idea to add a `used_emplacedcoinsdanger` to verify coverage as done in https://github.com/bitcoin/bitcoin/blob/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab/src/test/coins_tests.cpp#L265-L275",
      "created_at": "2026-02-16T10:12:02Z",
      "updated_at": "2026-02-16T12:00:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2811636851",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2811636851"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 194,
      "original_line": 193,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2811990141",
      "pull_request_review_id": 3807747387,
      "id": 2811990141,
      "node_id": "PRRC_kwDOABII586nm5B9",
      "diff_hunk": "@@ -227,6 +233,7 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n             if (itUs->second.IsFresh() && it->second.coin.IsSpent()) {\n                 // The grandparent cache does not have an entry, and the coin\n                 // has been spent. We can just delete it from the parent cache.\n+                m_dirty_count -= itUs->second.IsDirty();",
      "path": "src/coins.cpp",
      "position": 52,
      "original_position": 52,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/33512/commits/b413491a1cdd9a51f2aa10b775650f54f6785e3e:\r\n\r\nI noticed that this line is not covered in the test.",
      "created_at": "2026-02-16T11:38:13Z",
      "updated_at": "2026-02-16T12:37:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2811990141",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2811990141"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2812575992",
      "pull_request_review_id": 3808793376,
      "id": 2812575992,
      "node_id": "PRRC_kwDOABII586npID4",
      "diff_hunk": "@@ -227,6 +233,7 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n             if (itUs->second.IsFresh() && it->second.coin.IsSpent()) {\n                 // The grandparent cache does not have an entry, and the coin\n                 // has been spent. We can just delete it from the parent cache.\n+                m_dirty_count -= itUs->second.IsDirty();",
      "path": "src/coins.cpp",
      "position": 52,
      "original_position": 52,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "in_reply_to_id": 2811990141,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The fuzzer should fail immediately if you remove that.\r\nAnd the `Flush` assertion is immediately triggered by the unit tests as well:\r\n```bash\r\nRunning 11 test cases...\r\n./coins.cpp:268 void CCoinsViewCache::Flush(bool): Assertion `m_dirty_count == 0' failed.\r\nunknown location(0): fatal error: in \"coins_tests/updatecoins_simulation_test\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(457): last checkpoint\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_serialization\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(521): last checkpoint: \"ccoins_serialization\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_access\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(693): last checkpoint: \"ccoins_access\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_spend\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(723): last checkpoint: \"ccoins_spend\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_add\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(759): last checkpoint: \"ccoins_add\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_write\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(804): last checkpoint: \"ccoins_write\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_flush_behavior\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(1048): last checkpoint: \"ccoins_flush_behavior\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/coins_resource_is_used\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(1062): last checkpoint: \"coins_resource_is_used\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_addcoin_exception_keeps_usage_balanced\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(1087): last checkpoint: \"ccoins_addcoin_exception_keeps_usage_balanced\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_emplace_duplicate_keeps_usage_balanced\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(1105): last checkpoint: \"ccoins_emplace_duplicate_keeps_usage_balanced\" fixture ctor\r\ntest_bitcoin: ./common/args.cpp:582: void ArgsManager::AddArg(const std::string&, const std::string&, unsigned int, const OptionsCategory&): Assertion `ret.second' failed.\r\nunknown location(0): fatal error: in \"coins_tests/ccoins_reset_guard\": signal: SIGABRT (application abort requested)\r\n./test/coins_tests.cpp(1123): last checkpoint: \"ccoins_reset_guard\" fixture ctor\r\n```",
      "created_at": "2026-02-16T14:00:07Z",
      "updated_at": "2026-02-16T14:00:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2812575992",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2812575992"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2812697137",
      "pull_request_review_id": 3808931074,
      "id": 2812697137,
      "node_id": "PRRC_kwDOABII586nplox",
      "diff_hunk": "@@ -227,6 +233,7 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n             if (itUs->second.IsFresh() && it->second.coin.IsSpent()) {\n                 // The grandparent cache does not have an entry, and the coin\n                 // has been spent. We can just delete it from the parent cache.\n+                m_dirty_count -= itUs->second.IsDirty();",
      "path": "src/coins.cpp",
      "position": 52,
      "original_position": 52,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "in_reply_to_id": 2811990141,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Commenting out this line doesn't break the unit tests, but I have confirmed that it does break the fuzzer. ",
      "created_at": "2026-02-16T14:28:03Z",
      "updated_at": "2026-02-16T14:28:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2812697137",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2812697137"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2812970264",
      "pull_request_review_id": 3809239129,
      "id": 2812970264,
      "node_id": "PRRC_kwDOABII586nqoUY",
      "diff_hunk": "@@ -227,6 +233,7 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n             if (itUs->second.IsFresh() && it->second.coin.IsSpent()) {\n                 // The grandparent cache does not have an entry, and the coin\n                 // has been spent. We can just delete it from the parent cache.\n+                m_dirty_count -= itUs->second.IsDirty();",
      "path": "src/coins.cpp",
      "position": 52,
      "original_position": 52,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "in_reply_to_id": 2811990141,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I ran\r\n```bash\r\ncmake -B build -DCMAKE_BUILD_TYPE=Debug && \\\r\ncmake --build build -j$(nproc) && \\\r\n./build/bin/test_bitcoin --run_test=coins_tests\r\n```\r\nwith\r\n```patch\r\ndiff --git a/src/coins.cpp b/src/coins.cpp\r\nindex 1bc01d20a5..2fec6bec79 100644\r\n--- a/src/coins.cpp\r\n+++ b/src/coins.cpp\r\n@@ -233,7 +233,7 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\r\n             if (itUs->second.IsFresh() && it->second.coin.IsSpent()) {\r\n                 // The grandparent cache does not have an entry, and the coin\r\n                 // has been spent. We can just delete it from the parent cache.\r\n-                m_dirty_count -= itUs->second.IsDirty();\r\n+                // TODO m_dirty_count -= itUs->second.IsDirty();\r\n                 cachedCoinsUsage -= itUs->second.coin.DynamicMemoryUsage();\r\n                 cacheCoins.erase(itUs);\r\n             } else {\r\n```\r\nand got the error above:\r\n```\r\n./coins.cpp:268 void CCoinsViewCache::Flush(bool): Assertion `m_dirty_count == 0' failed\r\n```\r\n\r\nMaybe you compiled in `Release` mode and the assertions were optimized out - can you retry in `Debug` mode instead?",
      "created_at": "2026-02-16T15:27:34Z",
      "updated_at": "2026-02-16T15:27:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2812970264",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2812970264"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2815378270",
      "pull_request_review_id": 3812157853,
      "id": 2815378270,
      "node_id": "PRRC_kwDOABII586nz0Ne",
      "diff_hunk": "@@ -227,6 +233,7 @@ void CCoinsViewCache::BatchWrite(CoinsViewCacheCursor& cursor, const uint256& ha\n             if (itUs->second.IsFresh() && it->second.coin.IsSpent()) {\n                 // The grandparent cache does not have an entry, and the coin\n                 // has been spent. We can just delete it from the parent cache.\n+                m_dirty_count -= itUs->second.IsDirty();",
      "path": "src/coins.cpp",
      "position": 52,
      "original_position": 52,
      "commit_id": "afb1bc120ecce2bf663093e15c93f5592c0d4a98",
      "original_commit_id": "b413491a1cdd9a51f2aa10b775650f54f6785e3e",
      "in_reply_to_id": 2811990141,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Confirmed.",
      "created_at": "2026-02-17T07:25:14Z",
      "updated_at": "2026-02-17T07:25:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33512#discussion_r2815378270",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2815378270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33512"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    }
  ]
}