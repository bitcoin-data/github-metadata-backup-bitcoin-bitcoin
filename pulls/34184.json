{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184",
    "id": 3138438378,
    "node_id": "PR_kwDOABII5867EMTq",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34184",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34184.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34184.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/e629a8262c083d4d210689961a4bbeb41851c0af",
    "number": 34184,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "mining: add cooldown to createNewBlock() immediately after IBD",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "_This PR makes a breaking change to the Mining interface._\r\n\r\nAs reported in #33994, connected mining clients will receive a flood of new templates if the node is still going through IBD or catching up on the last 24 hours. This PR fixes that using an _optional_ cooldown mechanism, only applied to `createNewBlock()`.\r\n\r\nFirst, cooldown waits for IBD. Then, as the tip keeps moving forward, it waits a few seconds to see if the tip updated. If so, it restarts the timer and waits again. The trade-offs for this mechanism are explained below.\r\n\r\nBecause this PR changes `createNewBlock()` from a method that returns quickly to one that can block for minutes, the first commit fixes a bug in our `.capnp` definition, adding the missing `context` to `createNewBlock` (and `checkBlock`). It's an improved version of #33936.\r\n\r\nThis is a breaking API change, so it bumps the `makeMining` version and throws a nice error for older clients. That's tested in the functional test, and I also saw it with the sv2 Rust client. It may be possible to instead work around the existing bug and avoid the breaking change, but I don't think that's worth the efort and potential confusion at this point.\r\n\r\nThe second commit introduces the actual cooldown mechanism.\r\n\r\nThe third then adds an `interrupt()` method so that clients can cleanly disconnect.\r\n\r\n---\r\n\r\n## Rationale\r\n\r\nThe cooldown argument is optional, and not used by internal non-IPC code, for two reasons:\r\n\r\n1. The mechanism wreaks havoc on the functional test suite, which would require very careful mock time handling to work around. But that's pointless, because only IPC clients need it.\r\n2. It needs to be optional for IPC clients too, because in some situations, like a signet with only one miner, waiting for IBD can mean being stuck forever.\r\n\r\nThe reason it's only applied to `createNewBlock()` is that this is the first method called by clients; `waitNext()` is a method on the interface returned by `createNewBlock()`, at which point the cooldown is done.\r\n\r\nAfter IBD, we wait N seconds if the header is N blocks ahead of the tip, with a minimum of 3 and a maximum of 20 seconds. The minimum waiting time is short enough that it shouldn't be annoying or confusing for someone manually starting up a client. While the maximum should be harmless if it happens spuriously (which it shouldn't).\r\n\r\nIf the minimum wait is too short, clients get a burst of templates, as observed in the original issue. We can't entirely rule this out without a lot of additional complexity (like scanning our own log file for heuristics). This PR should make it a lot less likely, and thanks to the IBD wait also limit it to one day worth of blocks (`-maxtipage`).\r\n\r\nSome test runs on an M4 MacBook Pro, where I had a node catch up on the last few days worth of blocks:\r\n\r\n<img width=\"872\" height=\"972\" alt=\"Scherm­afbeelding 2026-02-04 om 18 21 17\" src=\"https://github.com/user-attachments/assets/7902a0f2-0e0b-4604-9688-cec2da073261\" />\r\n\r\nAs the chart shows, sometimes it takes longer than 3 seconds. But it turns out that in all those cases there were quite a few headers ahead of the tip. It also demonstrates that it's important to first wait for IBD, because it's less likely a random tip update takes longer than 20 seconds.\r\n\r\n- modified sv2-apps: https://github.com/Sjors/sv2-apps/tree/2026/02/cooldown\r\n- test script: https://gist.github.com/Sjors/feb6122c97acc2b9e6d66b168614609c#file-run_mainnet_pool_loop-zsh\r\n- chart script: https://gist.github.com/Sjors/feb6122c97acc2b9e6d66b168614609c#file-tip_interval_charts-py",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-12-31T05:17:32Z",
    "updated_at": "2026-02-12T04:19:02Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged": false,
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "Sjors:2025/12/cool-down",
      "ref": "2025/12/cool-down",
      "sha": "e629a8262c083d4d210689961a4bbeb41851c0af",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 11,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 283955,
        "default_branch": "master",
        "open_issues_count": 6,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-09T16:21:14Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2026-02-02T15:20:19Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38902,
        "stargazers_count": 88083,
        "watchers_count": 88083,
        "size": 303580,
        "default_branch": "master",
        "open_issues_count": 727,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-12T02:22:36Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-12T03:25:41Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 203,
    "deletions": 27,
    "changed_files": 12,
    "commits": 3,
    "review_comments": 39,
    "comments": 20
  },
  "events": [
    {
      "event": "renamed",
      "id": 21804681786,
      "node_id": "RTE_lADOABII587g1EbpzwAAAAUTqQo6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21804681786",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T05:23:06Z",
      "rename": {
        "from": "mining: add cooldown to createNewBlock() immediately after IBD ",
        "to": "mining: add cooldown to createNewBlock() immediately after IBD"
      }
    },
    {
      "event": "labeled",
      "id": 21804682005,
      "node_id": "LE_lADOABII587g1EbpzwAAAAUTqQsV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21804682005",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T05:23:08Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 3701469781,
      "node_id": "IC_kwDOABII587cn_JV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3701469781",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T05:23:12Z",
      "updated_at": "2026-02-11T15:25:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34184.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3775253204) |\n| Concept ACK | [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3785186735) |\n| Stale ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3706545897), [w0xlt](https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3731734738) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33966](https://github.com/bitcoin/bitcoin/pull/33966) (refactor: disentangle miner startup defaults from runtime options by Sjors)\n* [#33965](https://github.com/bitcoin/bitcoin/pull/33965) (mining: fix -blockreservedweight shadows IPC option by Sjors)\n* [#32297](https://github.com/bitcoin/bitcoin/pull/32297) (bitcoin-cli: Add -ipcconnect option by ryanofsky)\n* [#29409](https://github.com/bitcoin/bitcoin/pull/29409) (multiprocess: Add capnp wrapper for Chain interface by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- std::nullptr -> nullptr [std::nullptr is not a valid identifier; the correct null pointer literal is nullptr (or for std::optional return, std::nullopt).]\n\n\n\n<sup>2026-02-07 11:35:51</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3701469781",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21805313874,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAUTsq9S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21805313874",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a73a5b603f3fbd1796210124c0783766d3a99fff",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/a73a5b603f3fbd1796210124c0783766d3a99fff",
      "created_at": "2025-12-31T06:48:24Z"
    },
    {
      "event": "labeled",
      "id": 21805316160,
      "node_id": "LE_lADOABII587g1EbpzwAAAAUTsrhA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21805316160",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T06:48:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21805386195,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAUTs8nT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21805386195",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "62524ac69c25499c6afb114e4c023d91abc9681c",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/62524ac69c25499c6afb114e4c023d91abc9681c",
      "created_at": "2025-12-31T06:59:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21805543133,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAUTti7d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21805543133",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e8b01c43bb05f1a52adf1279280a744111b8dc45",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/e8b01c43bb05f1a52adf1279280a744111b8dc45",
      "created_at": "2025-12-31T07:19:10Z"
    },
    {
      "event": "commented",
      "id": 3701624323,
      "node_id": "IC_kwDOABII587cok4D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3701624323",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T07:28:35Z",
      "updated_at": "2025-12-31T07:30:09Z",
      "author_association": "MEMBER",
      "body": "Switched to avoid mock time for the cooldown mechanism (it's possible, but would require additional refactoring).\r\n\r\nAdded a constraint to ignore alternative header branches. This probably doesn't matter in real life, but it does in tests. E.g. the assume_utxo test \"Check importing a snapshot where current chain-tip is not an ancestor of the snapshot block but has less work\" creates an alternative chain of blocks despite having better headers (but not their blocks). In real life this implies a giant block witholding attack.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3701624323",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "unlabeled",
      "id": 21806209700,
      "node_id": "UNLE_lADOABII587g1EbpzwAAAAUTwFqk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21806209700",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-31T08:35:56Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3706545897,
      "node_id": "IC_kwDOABII587c7Wbp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3706545897",
      "actor": {
        "login": "bensig",
        "id": 1872138,
        "node_id": "MDQ6VXNlcjE4NzIxMzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1872138?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bensig",
        "html_url": "https://github.com/bensig",
        "followers_url": "https://api.github.com/users/bensig/followers",
        "following_url": "https://api.github.com/users/bensig/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bensig/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bensig/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bensig/subscriptions",
        "organizations_url": "https://api.github.com/users/bensig/orgs",
        "repos_url": "https://api.github.com/users/bensig/repos",
        "events_url": "https://api.github.com/users/bensig/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bensig/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T00:46:16Z",
      "updated_at": "2026-01-03T00:46:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK e8b01c43bb05f1a52adf1279280a744111b8dc45\r\n\r\nTested on macOS - `interface_ipc.py` passes.\r\n\r\nCode review:\r\n- Using `SteadyClock` for the cooldown (independent of mocktime) is the right call\r\n- `BestHeaderAheadOfActiveTip()` correctly uses ancestor check to ignore competing branches\r\n- 1s timeout prevents DoS from header-only attacks while still allowing catch-up during final IBD\r\n- \r\n\r\nNice fix for #33994 ",
      "user": {
        "login": "bensig",
        "id": 1872138,
        "node_id": "MDQ6VXNlcjE4NzIxMzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1872138?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bensig",
        "html_url": "https://github.com/bensig",
        "followers_url": "https://api.github.com/users/bensig/followers",
        "following_url": "https://api.github.com/users/bensig/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bensig/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bensig/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bensig/subscriptions",
        "organizations_url": "https://api.github.com/users/bensig/orgs",
        "repos_url": "https://api.github.com/users/bensig/repos",
        "events_url": "https://api.github.com/users/bensig/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bensig/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3706545897",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "labeled",
      "id": 22016373847,
      "node_id": "LE_lADOABII587g1EbpzwAAAAUgRzRX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22016373847",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T13:12:04Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22210260386,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAUr1a2i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22210260386",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "created_at": "2026-01-22T09:02:12Z"
    },
    {
      "event": "commented",
      "id": 3783295599,
      "node_id": "IC_kwDOABII587hgIJv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3783295599",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T09:02:58Z",
      "updated_at": "2026-01-22T09:02:58Z",
      "author_association": "MEMBER",
      "body": "Rebased.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3783295599",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "unlabeled",
      "id": 22212110947,
      "node_id": "UNLE_lADOABII587g1EbpzwAAAAUr8epj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22212110947",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T10:23:06Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3709380896,
      "node_id": "PRR_kwDOABII587dGKkg",
      "url": null,
      "actor": null,
      "commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-27T06:44:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3709380896",
      "submitted_at": "2026-01-27T06:44:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22313984204,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAUyBGDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22313984204",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "created_at": "2026-01-27T10:49:41Z"
    },
    {
      "event": "reviewed",
      "id": 3712671569,
      "node_id": "PRR_kwDOABII587dSt9R",
      "url": null,
      "actor": null,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-27T17:58:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/34184/commits/9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3712671569",
      "submitted_at": "2026-01-27T17:58:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "reviewed",
      "id": 3716923738,
      "node_id": "PRR_kwDOABII587di8Fa",
      "url": null,
      "actor": null,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T15:06:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 9817657d463ff1d8502a5edf0641e88b9b1d4853. This seems like probably the simplest change that can resolve #33994.\n\nI guess I have two lingering concerns about it:\n\n- This can cause the createNewBlock function to block for potentially a very long time when it didn't before and createNewBlock doesn't currently have any cancellation option other than shutting down the node. So it could make it hard for IPC clients to disconnect cleanly, and I suspect we may want to follow up here by adding some timeout or cancellation mechanism.\n\n- I'm not very sure about effectiveness of the cooldown strategy, and wouldn't be surprised if there were cases where it didn't work well but it does seem like a good starting point, and pretty conservative.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3716923738",
      "submitted_at": "2026-01-28T15:06:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22379488156,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAU16-Oc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22379488156",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/b57da688c21233e852c5afe5c5afafd3cae84e91",
      "created_at": "2026-01-29T14:59:16Z"
    },
    {
      "event": "commented",
      "id": 3818253766,
      "node_id": "IC_kwDOABII587jle3G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3818253766",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T15:01:02Z",
      "updated_at": "2026-01-29T15:01:02Z",
      "author_association": "MEMBER",
      "body": "I added a commit that allows interrupting both `createNewBlock()` and `waitTipChanged()`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3818253766",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "reviewed",
      "id": 3724337519,
      "node_id": "PRR_kwDOABII587d_OFv",
      "url": null,
      "actor": null,
      "commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-29T19:33:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review b57da688c21233e852c5afe5c5afafd3cae84e91. Thanks for the updates! Documentation update and while loop simplification since last review look good. I'm concerned about the new `MinerImpl::m_interrupt` variable, however, since I can see it leading to segfaults if clients destroy the `Mining` interface too early (even if they don't call the `interrupt` method). So I suggested moving the variable to the `KernelNotications` class to avoid this.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3724337519",
      "submitted_at": "2026-01-29T19:33:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "reviewed",
      "id": 3724930526,
      "node_id": "PRR_kwDOABII587eBe3e",
      "url": null,
      "actor": null,
      "commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-29T21:15:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review b57da688c21233e852c5afe5c5afafd3cae84e91. There's a small thread safety bug in the second commit (see below), but the previous concern I had about crashes isn't really an issue, and the current implementation of cancellation here seems pretty good.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3724930526",
      "submitted_at": "2026-01-29T21:15:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "referenced",
      "id": 22405115147,
      "node_id": "REFE_lADOABII587g1EbpzwAAAAU3cu0L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22405115147",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1ae88d1688958fe567a087ec591015ea832aa8f0",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/1ae88d1688958fe567a087ec591015ea832aa8f0",
      "created_at": "2026-01-30T11:38:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22405115378,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAU3cu3y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22405115378",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1ae88d1688958fe567a087ec591015ea832aa8f0",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/1ae88d1688958fe567a087ec591015ea832aa8f0",
      "created_at": "2026-01-30T11:38:17Z"
    },
    {
      "event": "mentioned",
      "id": 22405147596,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU3c2vM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22405147596",
      "actor": {
        "login": "RetVal",
        "id": 2731831,
        "node_id": "MDQ6VXNlcjI3MzE4MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2731831?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RetVal",
        "html_url": "https://github.com/RetVal",
        "followers_url": "https://api.github.com/users/RetVal/followers",
        "following_url": "https://api.github.com/users/RetVal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RetVal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RetVal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RetVal/subscriptions",
        "organizations_url": "https://api.github.com/users/RetVal/orgs",
        "repos_url": "https://api.github.com/users/RetVal/repos",
        "events_url": "https://api.github.com/users/RetVal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RetVal/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T11:39:48Z"
    },
    {
      "event": "subscribed",
      "id": 22405147616,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU3c2vg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22405147616",
      "actor": {
        "login": "RetVal",
        "id": 2731831,
        "node_id": "MDQ6VXNlcjI3MzE4MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2731831?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RetVal",
        "html_url": "https://github.com/RetVal",
        "followers_url": "https://api.github.com/users/RetVal/followers",
        "following_url": "https://api.github.com/users/RetVal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RetVal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RetVal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RetVal/subscriptions",
        "organizations_url": "https://api.github.com/users/RetVal/orgs",
        "repos_url": "https://api.github.com/users/RetVal/repos",
        "events_url": "https://api.github.com/users/RetVal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RetVal/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T11:39:48Z"
    },
    {
      "event": "commented",
      "id": 3825499142,
      "node_id": "IC_kwDOABII587kBHwG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3825499142",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T20:03:44Z",
      "updated_at": "2026-01-30T20:03:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 1ae88d1688958fe567a087ec591015ea832aa8f0, just fixing missing lock on the interrupt variable and adding some comments since last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3825499142",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "review_requested",
      "id": 22416460208,
      "node_id": "RRE_lADOABII587g1EbpzwAAAAU4IAmw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22416460208",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T20:03:52Z",
      "requested_reviewer": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3731734738,
      "node_id": "PRR_kwDOABII587ebcDS",
      "url": null,
      "actor": null,
      "commit_id": "1ae88d1688958fe567a087ec591015ea832aa8f0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T06:10:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK https://github.com/bitcoin/bitcoin/pull/34184/changes/1ae88d1688958fe567a087ec591015ea832aa8f0",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3731734738",
      "submitted_at": "2026-01-31T06:10:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "commented",
      "id": 3827969455,
      "node_id": "IC_kwDOABII587kKi2v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3827969455",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T09:12:28Z",
      "updated_at": "2026-01-31T09:12:28Z",
      "author_association": "MEMBER",
      "body": "@plebhash can you take this for a spin?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3827969455",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "mentioned",
      "id": 22426465510,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU4uLTm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22426465510",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T09:12:30Z"
    },
    {
      "event": "subscribed",
      "id": 22426465518,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU4uLTu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22426465518",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-31T09:12:30Z"
    },
    {
      "event": "labeled",
      "id": 22479450625,
      "node_id": "LE_lADOABII587g1EbpzwAAAAU74TIB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22479450625",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-02T23:49:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3841460581,
      "node_id": "IC_kwDOABII587k-All",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841460581",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T13:52:16Z",
      "updated_at": "2026-02-03T13:52:16Z",
      "author_association": "NONE",
      "body": "> @plebhash can you take this for a spin?\r\n\r\nI checked out this branch, compiled it, launched it on `testnet4` and hooked SRI Pool via IPC.\r\n\r\nmy `testnet4` datadir had been off for a few days, so I left it catch up while observing Pool logs.\r\n\r\nthere was a flood of `NewTemplate` + `SetNewPrevHash` messages, just like the behavior reported on https://github.com/bitcoin/bitcoin/issues/33994",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3841460581",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "mentioned",
      "id": 22498121762,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU8_hgi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22498121762",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T13:52:17Z"
    },
    {
      "event": "subscribed",
      "id": 22498121797,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU8_hhF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22498121797",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T13:52:17Z"
    },
    {
      "event": "referenced",
      "id": 22498223945,
      "node_id": "REFE_lADOABII587g1EbpzwAAAAU8_6dJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22498223945",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "984434bfa067a118930a13130181cb6e9bea7a2f",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/984434bfa067a118930a13130181cb6e9bea7a2f",
      "created_at": "2026-02-03T13:56:04Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22498224074,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAU8_6fK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22498224074",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "984434bfa067a118930a13130181cb6e9bea7a2f",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/984434bfa067a118930a13130181cb6e9bea7a2f",
      "created_at": "2026-02-03T13:56:04Z"
    },
    {
      "event": "commented",
      "id": 3841481015,
      "node_id": "IC_kwDOABII587k-Fk3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841481015",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T13:56:08Z",
      "updated_at": "2026-02-03T13:56:08Z",
      "author_association": "MEMBER",
      "body": "Rebased for trivial conflict after #32420.\r\n\r\n@plebhash ok that's bad news. It seems unlikely that your node needs more than 1 second to connect testnet4 blocks. Can you share the node log in a gist so we can see if there's any 1+ second gaps that could explain this?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3841481015",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "mentioned",
      "id": 22498226421,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU8_7D1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22498226421",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T13:56:10Z"
    },
    {
      "event": "subscribed",
      "id": 22498226459,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU8_7Eb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22498226459",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T13:56:10Z"
    },
    {
      "event": "commented",
      "id": 3841781399,
      "node_id": "IC_kwDOABII587k_O6X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841781399",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T14:47:48Z",
      "updated_at": "2026-02-03T14:48:10Z",
      "author_association": "NONE",
      "body": "> @plebhash ok that's bad news. It seems unlikely that your node needs more than 1 second to connect testnet4 blocks. Can you share the node log in a gist so we can see if there's any 1+ second gaps that could explain this?\r\n\r\n- `bitcoin-node` logs: https://gist.github.com/plebhash/41000992b96bfca123141a47cf5c424d\r\n- SRI Pool logs: https://gist.github.com/plebhash/ac803825cb72e8b77d7be44b52ee74ba\r\n\r\nyou should be able to reproduce:\r\n```\r\ngit clone https://github.com/stratum-mining/sv2-apps -b v0.2.0\r\ncd pool-apps/pool\r\ncargo run -- -c config-examples/testnet4/pool-config-bitcoin-core-ipc-example.toml\r\n```\r\n\r\nthis is assuming you want to use `testnet4` under default `datadir`... for setup variations:\r\n- for a different network, there's also `config-examples/{mainnet, signet}` \r\n- for non-default datadir, edit `pool-config-bitcoin-core-ipc-example.toml` and uncomment `data_dir` field",
      "user": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3841781399",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "mentioned",
      "id": 22499726005,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU9FpK1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22499726005",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T14:47:49Z"
    },
    {
      "event": "subscribed",
      "id": 22499726036,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU9FpLU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22499726036",
      "actor": {
        "login": "plebhash",
        "id": 147345153,
        "node_id": "U_kgDOCMhPAQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/147345153?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/plebhash",
        "html_url": "https://github.com/plebhash",
        "followers_url": "https://api.github.com/users/plebhash/followers",
        "following_url": "https://api.github.com/users/plebhash/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/plebhash/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/plebhash/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/plebhash/subscriptions",
        "organizations_url": "https://api.github.com/users/plebhash/orgs",
        "repos_url": "https://api.github.com/users/plebhash/repos",
        "events_url": "https://api.github.com/users/plebhash/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/plebhash/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T14:47:49Z"
    },
    {
      "event": "unlabeled",
      "id": 22501049811,
      "node_id": "UNLE_lADOABII587g1EbpzwAAAAU9KsXT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22501049811",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:35:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3842137995,
      "node_id": "IC_kwDOABII587lAl-L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3842137995",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:53:25Z",
      "updated_at": "2026-02-03T15:53:25Z",
      "author_association": "MEMBER",
      "body": "I was able to reproduce the issue with testnet4.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3842137995",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "convert_to_draft",
      "id": 22501531872,
      "node_id": "CTDE_lADOABII587g1EbpzwAAAAU9MiDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22501531872",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:54:07Z"
    },
    {
      "event": "commented",
      "id": 3842398388,
      "node_id": "IC_kwDOABII587lBli0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3842398388",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T16:40:33Z",
      "updated_at": "2026-02-03T16:40:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "From the logs it looks like `waitNext` calls are churning, not `createNewBlock` calls, so just adding the cooldown delay to `createNewBlock` does not help.\r\n\r\nA possible fix might be to add an additional delay to `createNewBlock` so it waits to be connected to peers before returning, although this could also be fragile.\r\n\r\nAnother fix might be to add the 1 block/second cooldown delay to `waitNext` as well. This seems like it should be ok although there might be a bigger risk `waitNext` blocking when it shouldn't. Maybe adjusting the cooldown to delay to block if 2 blocks were connected in last second instead of 1 block (or something like that) might be safer if adding the cooldown to `waitNext`",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3842398388",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "commented",
      "id": 3842979682,
      "node_id": "IC_kwDOABII587lDzdi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3842979682",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T18:33:13Z",
      "updated_at": "2026-02-03T18:37:38Z",
      "author_association": "MEMBER",
      "body": "I was thinking of just increasing the cooldown. As long as it's only on `createNewBlock()` that seems safe.\r\n\r\nFrom my own testing with syncing testnet4 from sratch on an M4 Apple Silicon machine, gaps of 1 second are common. Once I switched to a 3 second cool down, the pool behaved.\r\n\r\nI also tried the 3 second cool down while syncing a mainnet node, but 3 seconds isn't long enough on my machine. Just picking a bigger number would be annoying in the normal case.\r\n\r\nI tried a slightly fancier heuristic: cooldown is extended by the number of blocks remaining in seconds, capped at 20. \r\n\r\nCombined with also gating behind `IsInitialBlockDownload()` (which considers `-maxtipage`) it should work most of the time. In particular this deals with the (fairly common) situation where the node doesn't get any headers / blocks from its peers for a minute or so after startup. Just checking for connections isn't enough.\r\n\r\nWill push some code later.\r\n\r\n#29565 would be quite handy for testing this.\r\n\r\n(the experiment caused the node to segfault as I triggered unclean pool shutdowns with `timeout`, I believe that's a known issue being worked on)",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3842979682",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "commented",
      "id": 3843370276,
      "node_id": "IC_kwDOABII587lFS0k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3843370276",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:00:55Z",
      "updated_at": "2026-02-03T20:16:38Z",
      "author_association": "MEMBER",
      "body": "This is exceedingly hard to test / debug, due to a combination of four issues:\r\n\r\n1. getting a node in a \"almost done syncing\" state is tedious (the trick it to `kill -9` the node when it reaches the tip, so it has to start over)\r\n2. the node will crash if the client ungraciously exists\r\n3. the sv2 client doesn't know about the interrupt method yet (since this PR introduces it)\r\n4. `createNewBlock` doesn't have a `context` argument (known issue) so a second connection quietly fails to establish (in case of a test sscript that tries to connect a second time)\r\n\r\nOnce I clean up the code, I'll publish a gist with some patches to make testing easier without increasing the scope of this PR.\r\n\r\n@ryanofsky regarding (4), I'm puzzled why `interrupt()` works at all in the functional test. Shouldn't the lack `context` cause the IPC server thread to block, thus never getting the interrupt message?\r\n\r\n```py\r\nself.log.debug(\"interrupt() should abort createNewBlock() during cooldown\")\r\nasync def create_block():\r\n    result = await mining.createNewBlock(opts)\r\n    # interrupt() causes createNewBlock to return nullptr\r\n    assert_equal(result._has(\"result\"), False)\r\n\r\nawait wait_and_do(create_block(), mining.interrupt())\r\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3843370276",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "mentioned",
      "id": 22507992268,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU9lLTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22507992268",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:08:25Z"
    },
    {
      "event": "subscribed",
      "id": 22507992316,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU9lLT8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22507992316",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:08:25Z"
    },
    {
      "event": "commented",
      "id": 3843509076,
      "node_id": "IC_kwDOABII587lF0tU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3843509076",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:32:50Z",
      "updated_at": "2026-02-03T20:32:50Z",
      "author_association": "MEMBER",
      "body": "@ismaelsadeeq is going to be so excited if I need to pull in #33936 and make this a breaking IPC change (in which case I'll also delete the previously deprecated methods, though probably in a followup).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3843509076",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "mentioned",
      "id": 22508579458,
      "node_id": "MEE_lADOABII587g1EbpzwAAAAU9naqC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508579458",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:32:51Z"
    },
    {
      "event": "subscribed",
      "id": 22508579486,
      "node_id": "SE_lADOABII587g1EbpzwAAAAU9naqe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22508579486",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T20:32:51Z"
    },
    {
      "event": "referenced",
      "id": 22533580369,
      "node_id": "REFE_lADOABII587g1EbpzwAAAAU_GyZR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22533580369",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "299f15677b3d32b878f79945128c977dc8eaedfd",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/299f15677b3d32b878f79945128c977dc8eaedfd",
      "created_at": "2026-02-04T16:22:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22533580672,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAU_GyeA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22533580672",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "299f15677b3d32b878f79945128c977dc8eaedfd",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/299f15677b3d32b878f79945128c977dc8eaedfd",
      "created_at": "2026-02-04T16:22:25Z"
    },
    {
      "event": "commented",
      "id": 3848499251,
      "node_id": "IC_kwDOABII587lY3Az",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3848499251",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T16:36:46Z",
      "updated_at": "2026-02-04T16:36:46Z",
      "author_association": "MEMBER",
      "body": "Alright, I made some changes...\r\n\r\nFirst, I added a commit to pass missing `context` to `createNewBlock` (and `checkBlock`). This is a breaking API change, so it bumps the `makeMining` version and throws a nice error for older clients. That's tested in the functional test, and I also saw it with the sv2 Rust client. At this point, at least with the change in this PR, I don't think it's worth trying to work around this bug, as it's confusing at best.\r\n\r\nNext, I made `cooldown` an optional argument. This is because the mechanism ended up breaking the functional test suite, especially waiting for IBD. And in some situations, like a signet with only one miner, waiting for IBD could mean being stuck forever.\r\n\r\nSo cooldown waits for IBD and then as the tip keeps moving forward, it waits a bit to see if new blocks come in. But how long to wait?\r\n\r\n<img width=\"850\" height=\"720\" alt=\"Scherm­afbeelding 2026-02-04 om 17 23 51\" src=\"https://github.com/user-attachments/assets/de695e11-1384-4984-8a41-b48b063f4389\" />\r\n\r\nI decided on a minimum of 3 seconds. That short enough that it's not going to annoy someone who manually starts up a client. And at least on my M4 MacBook Pro on mainnet, it works. I'll share some (not pretty) code to test this later.\r\n\r\nAs the chart shows, sometimes it takes longer than 3 seconds. But it turns out that in all those cases there were quite a few headers ahead of the tip. So the cooldown mechanism has another heuristic: wait N seconds if the header is N blocks ahead of the tip, with a minimum of 3 and a maximum of 20.\r\n\r\nI'm sure we could tweak this numbers further and have the node analyse it's own log files for perfection, but ultimately it's just an educated guess. If we wait too long, it's slightly annoying, but 3 - 20 seconds isn't terrible. If we wait too short, clients get a burst of templates. That can lead to others issues, but I guess in the worst case they can just restart, reconnect and try again a minute later. The code itself seems acceptably simple.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3848499251",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "labeled",
      "id": 22535143916,
      "node_id": "LE_lADOABII587g1EbpzwAAAAU_MwHs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22535143916",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T17:19:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 22535412695,
      "node_id": "REFE_lADOABII587g1EbpzwAAAAU_NxvX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22535412695",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/4756af92d229d88659490146999f77e20572b668",
      "created_at": "2026-02-04T17:29:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22535413030,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAU_Nx0m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22535413030",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/4756af92d229d88659490146999f77e20572b668",
      "created_at": "2026-02-04T17:29:35Z"
    },
    {
      "event": "commented",
      "id": 3848777683,
      "node_id": "IC_kwDOABII587lZ6_T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3848777683",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T17:30:39Z",
      "updated_at": "2026-02-04T18:32:20Z",
      "author_association": "MEMBER",
      "body": "I moved `run_deprecated_mining_test` down to avoid running into #34284.\r\n\r\nLinks to the (vibe coded) scripts used for the experiment and chart are at the bottom of the PR description.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3848777683",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "unlabeled",
      "id": 22536858040,
      "node_id": "UNLE_lADOABII587g1EbpzwAAAAU_TSm4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22536858040",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T18:24:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "ready_for_review",
      "id": 22537051504,
      "node_id": "RFRE_lADOABII587g1EbpzwAAAAU_UB1w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22537051504",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T18:31:18Z"
    },
    {
      "event": "reviewed",
      "id": 3758352187,
      "node_id": "PRR_kwDOABII587gA-c7",
      "url": null,
      "actor": null,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-05T18:00:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 299f15677b3d32b878f79945128c977dc8eaedfd. Since last review, `createNewBlock` was fixed (by adding context parameter) to be actually interruptible, and cooldown was made optional and off by default, wait for `chainman().IsInitialBlockDownload()` was added, and `CooldownIfHeadersAhead` internal logic was improved to wait longer when there are more blocks waiting to be connected, instead of returning as soon as more than 1 second elapses between connecting blocks.\n\nAll of these changes seem very nice. I left suggestions for keeping backwards compatibility and fixing a missing lock with I think would be good to apply but probably not critical.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3758352187",
      "submitted_at": "2026-02-05T18:00:23Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "labeled",
      "id": 22608190600,
      "node_id": "LE_lADOABII587g1EbpzwAAAAVDjZyI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22608190600",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T10:39:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhYTEyMDllYTQ0NjJkMTIyMWUwNDk4OTFmYjU4OGFkYjVjZjYwZDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eaa1209ea4462d1221e049891fb588adb5cf60d3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eaa1209ea4462d1221e049891fb588adb5cf60d3",
      "tree": {
        "sha": "29d285ca3c5cf3d0e85546950e102f5e922b6885",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/29d285ca3c5cf3d0e85546950e102f5e922b6885"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 29d285ca3c5cf3d0e85546950e102f5e922b6885\nparent 54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8\nauthor Sjors Provoost <sjors@sprovoost.nl> 1763994885 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1770463124 +0100\n\nmining: pass missing context to BlockTemplate methods\n\nThis is breaking IPC interface change.\n\nAdding a context parameter ensures that these methods are run in\ntheir own thread and don't block other calls. They were missing\nfor:\n\n- createNewBlock()\n- checkBlock()\n\nA later commit makes createNewBlock() potentially long running. This\nmakes the lack of context parameter a problem, justifying a breaking\nchange.\n\nSince this is a breaking API change, we also fix the same issue for\ncheckBlock. This ensures that when checkBlock() receives a slow to\nvalidate block from an untrusted origin (the IPC connection itself\nis assumed to trusted), it will not block the IPC server (though\nvalidation itself still blocks cs_main).\n\nTo make this change explicit, bump the version of makeMining from 2\nto 3. Old clients calling the original ordinal will receive an error\nmessage suggesting they update. A test covers this behavior.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmmHH5QACgkQV/+b28ww\nEAma3g/9EqWEaqe4gbnnh8LaA82oah0fGtRmdodySGA02qYac7G8jb5M1ADOot/+\n4e0gm9+jM2IEv5lDpvcb1z/7uAJFLO3vLQv1yBqZC1RpmBr6+CEqFD/3E9CdOYEq\nDzEZO7BX+stySS8DdPsN80jWZpciE9O758Dm9TYzaMS1tx83ubpP8oqQDF894OJA\ndCNmQwxu9TZ3BWZtbFCoP9VJIw2fco3onNvBPwA6VmhIEY8Euy3NdAs1wPv42m9R\n5/YRg/m+Vx2IsbqqesXjsWiu4LAA1Rx0Gs5YyqYvR61cU/YVu21ZvYjSJj/EB+7x\nyeaXc9BscNNLZ3l0zdlRobjSnfNBSmlFvqLSOAKxFJdrbPjkBlUZdpkk09/FDy44\nMucUbY8dwbMFgD3+IIWbgMbgj+9s5PNb5DMElXhCoHh/86rLcPLOod3sQMVIv/4E\nLN9UZj09EuqBVN2Dz+jnGqsdaZ3w6MEKXGHhNPHzp01gJnG1VUOaHwo5fGqGB6it\nlPdO7yslmDbtHTM75Z+Y3BrCMARmgaG2lvgccZNEC6argQPw27GW7AilLfX0EvqU\nzn0QEYiI8aCnKXwrLcXYGXi/WGZfLbER74vHyvd317PGrp42OMIQVh5Na6dSzKYU\nqJQsjTQe8Vraalinm+iDdF2F8ec/6u6VfdrmU1WreOQ9f1i7gsI=\n=FDxi\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8",
          "sha": "54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/54bd49c7e3c7de1fdb744d118abd4f12e7dafcd8"
        }
      ],
      "message": "mining: pass missing context to BlockTemplate methods\n\nThis is breaking IPC interface change.\n\nAdding a context parameter ensures that these methods are run in\ntheir own thread and don't block other calls. They were missing\nfor:\n\n- createNewBlock()\n- checkBlock()\n\nA later commit makes createNewBlock() potentially long running. This\nmakes the lack of context parameter a problem, justifying a breaking\nchange.\n\nSince this is a breaking API change, we also fix the same issue for\ncheckBlock. This ensures that when checkBlock() receives a slow to\nvalidate block from an untrusted origin (the IPC connection itself\nis assumed to trusted), it will not block the IPC server (though\nvalidation itself still blocks cs_main).\n\nTo make this change explicit, bump the version of makeMining from 2\nto 3. Old clients calling the original ordinal will receive an error\nmessage suggesting they update. A test covers this behavior.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T11:18:44Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-11-24T14:34:45Z"
      },
      "sha": "eaa1209ea4462d1221e049891fb588adb5cf60d3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBkNGNmNzA0MWFmNDFlNjM3MTQ3M2Y3ZGY5MzMwMWQ3MTAwY2VhM2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d4cf7041af41e6371473f7df93301d7100cea3e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0d4cf7041af41e6371473f7df93301d7100cea3e",
      "tree": {
        "sha": "fd30c9a830477a38393f5daf851c4b385de7eda8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fd30c9a830477a38393f5daf851c4b385de7eda8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree fd30c9a830477a38393f5daf851c4b385de7eda8\nparent eaa1209ea4462d1221e049891fb588adb5cf60d3\nauthor Sjors Provoost <sjors@sprovoost.nl> 1770205831 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1770463124 +0100\n\nmining: add cooldown argument to createNewBlock()\n\nAt startup, if the needs to catch up, connected mining clients will\nreceive a flood of new templates as new blocks are connected.\n\nFix this by adding an optional cooldown argument to createNewBlock().\nWhen set to true, block template creation is briefly paused while the\nbest header chain is ahead of the tip.\n\nThis wait only happens when the best header extends the current tip,\nto ignore competing branches.\n\nAdditionally, cooldown waits for isInitialBlockDownload() to latch to\nfalse, which happens when there is less than a day of blocks left to sync.\n\nWhen cooldown is false, the default and used by all internal callers,\ncreateNewBlock() returns immediately. The argument is optional,\nbecause the functional test suite is negatively impacted by this\nmechanism, and single miner signets could end up stuck if no block\nwas mined for a day.\n\nFixes #33994\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmmHH5QACgkQV/+b28ww\nEAkYdxAAs+CbvgUnRTuTugQ6G328RYnT14W8GyMTkM0LMSA8ZEZhiSXlS+BWvtm8\nplduYrD2B1XOz0PDC6gOTJEU6cRy6YiA7+MR7tXR/4syFGkU8ojd5jRAniYDfzjE\nFhefJScRiXYkbhp9xAwMWkdjmVGDeiM8F+K5JadYY1+VpWoHQvdh1WbHn9+yLwKy\nt9DdB52TWTV4oIx6WtgnCk584fhPo/aD1BC5/lSh0r2kOp1CF0qghsxRP/0fy2M6\ng/HN9FhEvNMwNvqpRmzw+XvylBhgHELx3JK3FuK06HpJhy0mukLSe0Qw0Sujhaes\nk4yhCq6s9YKyaWsvWJqmaXsR2wPzzhb4uCrqjYrz6BwW7KQQ5w3xT/Ul6lQC6H4I\nLBCbgZrhhBpC/pJhIyVVWjcOtEj+skt+h9fGC6XjtKYEN2pu9uwfsDWfsCb6NE4V\nBIPmolmZ5pQdlYJViEoX3BMXbJ+oGpb4bhz0HFDy0+QdVgK/x4PcoCs++00D94bG\nJCUZLr5xSqec6Z9wdcLIw4QTVDpC1oenuq3pgNIXVqiHFhj/l8cN+UBmtiYCS2dz\nXt9pEwRYO8FEe7DXj/nB0GGvRsuf2MWH9eziDUFAUfjHxcrdiHgklde4mzBJpNew\nL0Z2+GFLcgOKQMR4gIUkX2My/d+DQy4+ySvK+lJxYBkACdlWU48=\n=W4jB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eaa1209ea4462d1221e049891fb588adb5cf60d3",
          "sha": "eaa1209ea4462d1221e049891fb588adb5cf60d3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eaa1209ea4462d1221e049891fb588adb5cf60d3"
        }
      ],
      "message": "mining: add cooldown argument to createNewBlock()\n\nAt startup, if the needs to catch up, connected mining clients will\nreceive a flood of new templates as new blocks are connected.\n\nFix this by adding an optional cooldown argument to createNewBlock().\nWhen set to true, block template creation is briefly paused while the\nbest header chain is ahead of the tip.\n\nThis wait only happens when the best header extends the current tip,\nto ignore competing branches.\n\nAdditionally, cooldown waits for isInitialBlockDownload() to latch to\nfalse, which happens when there is less than a day of blocks left to sync.\n\nWhen cooldown is false, the default and used by all internal callers,\ncreateNewBlock() returns immediately. The argument is optional,\nbecause the functional test suite is negatively impacted by this\nmechanism, and single miner signets could end up stuck if no block\nwas mined for a day.\n\nFixes #33994",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T11:18:44Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-04T11:50:31Z"
      },
      "sha": "0d4cf7041af41e6371473f7df93301d7100cea3e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU2MjlhODI2MmMwODNkNGQyMTA2ODk5NjFhNGJiZWI0MTg1MWMwYWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e629a8262c083d4d210689961a4bbeb41851c0af",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e629a8262c083d4d210689961a4bbeb41851c0af",
      "tree": {
        "sha": "6365a72d318649130777df4525ce3097f456923f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6365a72d318649130777df4525ce3097f456923f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6365a72d318649130777df4525ce3097f456923f\nparent 0d4cf7041af41e6371473f7df93301d7100cea3e\nauthor Sjors Provoost <sjors@sprovoost.nl> 1770464062 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1770464062 +0100\n\nmining: add interrupt()\n\nBoth waitTipChanged() and createNewBlock() can take a long time to\nreturn. Add a way for clients to interrupt them.\n\nThe new m_interrupt_mining is safely accessed with a lock on\nm_tip_block_mutex, but it has no guard annotation. A more thorough\nsolution is discussed here:\nhttps://github.com/bitcoin/bitcoin/pull/34184#discussion_r2743566474\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmmHIz8ACgkQV/+b28ww\nEAm9qA/+Jj6Zb8JbOXEGiBGid5TIVcigZ3/A0sC46sXTjEMRPuujRcgtn48pAbhn\n2bUL0jj16WIo/H3QGwA9WV91VsBsEGo8FY6sH9Ai/lXuybjeMw35tgAS0B/Ri1XD\njiAwJUYYeT1kJVnaS5pf+tbh3m0l7k5Xtt9uUtvrii8iRVwp4UdWsMQUOE8ZIra2\n6Voqeb/f9OXjfHuTp7AhTgBhA6/LtzFsExN6d/qaFl3/rCnUyh+dZxDr0hNsBYl4\nSiDn5AFtIJyAjfx11RY0o+aPKFhOgM5y7VsqHT5xqhib+gviw5RvyuVJDXhKq7ek\niLF2EKJvaWzv4ePq6ATWLiMWLYoYh1iheqiWPsEVV65zDaWCoJGWOWehwxR6PAyH\nR/B+BEnmXhnLD4so+WCMF384atiPV/JHg6L008yWGn3+YKWE9XTOOS9DrONLBNgS\neKqVNoJrK+mWCDXc1YUtwd1CUFF7OZ04RWJ84rIJS1tah0jwc3+h2NBLSuZLbbIC\nSfGIZTz0bnXv5om3uIsHVVsUzMqPGVAKIBdzQrXNC+GzT/vvFJ1P7RB5bR+IZY/c\nLe9xWc4Evmf2DaOu2gJQof3MdSlFuNg7uJ5VRSTj98YVN950WA9M5VrbHuasLAXQ\n8JiH2wDP1QX0wyHoVX+3SRZMVYEBJencsgXTDw5a7bhXdkSrK4U=\n=sUAD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d4cf7041af41e6371473f7df93301d7100cea3e",
          "sha": "0d4cf7041af41e6371473f7df93301d7100cea3e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0d4cf7041af41e6371473f7df93301d7100cea3e"
        }
      ],
      "message": "mining: add interrupt()\n\nBoth waitTipChanged() and createNewBlock() can take a long time to\nreturn. Add a way for clients to interrupt them.\n\nThe new m_interrupt_mining is safely accessed with a lock on\nm_tip_block_mutex, but it has no guard annotation. A more thorough\nsolution is discussed here:\nhttps://github.com/bitcoin/bitcoin/pull/34184#discussion_r2743566474",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T11:34:22Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2026-02-07T11:34:22Z"
      },
      "sha": "e629a8262c083d4d210689961a4bbeb41851c0af"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22608825341,
      "node_id": "HRFPE_lADOABII587g1EbpzwAAAAVDl0v9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22608825341",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e629a8262c083d4d210689961a4bbeb41851c0af",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/e629a8262c083d4d210689961a4bbeb41851c0af",
      "created_at": "2026-02-07T11:35:22Z"
    },
    {
      "event": "commented",
      "id": 3864346724,
      "node_id": "IC_kwDOABII587mVUBk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3864346724",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T11:35:31Z",
      "updated_at": "2026-02-07T11:35:31Z",
      "author_association": "MEMBER",
      "body": "Rebased after the test split in #34452.\r\n\r\nRe: https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2770232149\r\n\r\nI'd like to stick to making this a breaking change, assuming it's merged before the v31 branch-off. We quite recently effectively bumped the minium requirement from v30 to v30.2 by removing the older releases, so we lost strong backward compatibility anyway. With v31 coming in two months, it seems fine to do a little cleanup.\r\n\r\nI also haven't seen other breaking changes on the horizon (unless I overlooked them), so I don't expect this to happen again soon.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3864346724",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "unlabeled",
      "id": 22609605412,
      "node_id": "UNLE_lADOABII587g1EbpzwAAAAVDozMk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22609605412",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T13:00:57Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3775253204,
      "node_id": "PRR_kwDOABII587hBcrU",
      "url": null,
      "actor": null,
      "commit_id": "e629a8262c083d4d210689961a4bbeb41851c0af",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-09T20:44:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK e629a8262c083d4d210689961a4bbeb41851c0af. Changes since last review were rebasing to fix test conflicts and renaming the interrupt variable and adding a missing lock around one access.\n\nI still feel like it would be better to replace the first commit breaking compatibility with the simpler change suggested in https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2770232149 which keeps compatibility.\n\nBut I can understand being in a hurry to break compatibility when dealing with bugs in older clients & the pace of review here.\n\nSo assuming you do want to keep the commit which breaks compatibility (eaa1209ea4462d1221e049891fb588adb5cf60d3), I'd suggest two more changes from my notes about things to fix in the next version bump. One would be to credit @plebhash for first pointing out the missing Context arguments in his comment https://github.com/bitcoin/bitcoin/issues/33575#issuecomment-3383006863. I think he was the first person to notice that. The other would be to fix inconsistent defaults between C++ and Cap'n Proto interfaces, since changing default values also breaks backwards compatibility and the current missing defaults can lead to unnecessary problems and boilerplate in clients. Assigning consistent defaults should be possible with:\n\n<details><summary>diff</summary>\n<p>\n\n```diff\n--- a/src/ipc/capnp/mining.capnp\n+++ b/src/ipc/capnp/mining.capnp\n@@ -12,11 +12,15 @@ using Proxy = import \"/mp/proxy.capnp\";\n $Proxy.include(\"interfaces/mining.h\");\n $Proxy.includeTypes(\"ipc/capnp/mining-types.h\");\n \n+const maxMoney :Int64 = 2100000000000000;\n+const maxDouble :Float64 = 1.7976931348623157e308;\n+const defaultBlockReservedWeight :UInt32 = 8000;\n+\n interface Mining $Proxy.wrap(\"interfaces::Mining\") {\n     isTestChain @0 (context :Proxy.Context) -> (result: Bool);\n     isInitialBlockDownload @1 (context :Proxy.Context) -> (result: Bool);\n     getTip @2 (context :Proxy.Context) -> (result: Common.BlockRef, hasResult: Bool);\n-    waitTipChanged @3 (context :Proxy.Context, currentTip: Data, timeout: Float64) -> (result: Common.BlockRef);\n+    waitTipChanged @3 (context :Proxy.Context, currentTip: Data, timeout: Float64 = .maxDouble) -> (result: Common.BlockRef);\n     createNewBlock @4 (context :Proxy.Context, options: BlockCreateOptions, cooldown: Bool) -> (result: BlockTemplate);\n     checkBlock @5 (context :Proxy.Context, block: Data, options: BlockCheckOptions) -> (reason: Text, debug: Text, result: Bool);\n     interrupt @6 () -> ();\n@@ -39,19 +43,19 @@ interface BlockTemplate $Proxy.wrap(\"interfaces::BlockTemplate\") {\n }\n \n struct BlockCreateOptions $Proxy.wrap(\"node::BlockCreateOptions\") {\n-    useMempool @0 :Bool $Proxy.name(\"use_mempool\");\n-    blockReservedWeight @1 :UInt64 $Proxy.name(\"block_reserved_weight\");\n-    coinbaseOutputMaxAdditionalSigops @2 :UInt64 $Proxy.name(\"coinbase_output_max_additional_sigops\");\n+    useMempool @0 :Bool = true $Proxy.name(\"use_mempool\");\n+    blockReservedWeight @1 :UInt64 = .defaultBlockReservedWeight $Proxy.name(\"block_reserved_weight\");\n+    coinbaseOutputMaxAdditionalSigops @2 :UInt64 = 400 $Proxy.name(\"coinbase_output_max_additional_sigops\");\n }\n \n struct BlockWaitOptions $Proxy.wrap(\"node::BlockWaitOptions\") {\n-    timeout @0 : Float64 $Proxy.name(\"timeout\");\n-    feeThreshold @1 : Int64 $Proxy.name(\"fee_threshold\");\n+    timeout @0 : Float64 = .maxDouble $Proxy.name(\"timeout\");\n+    feeThreshold @1 : Int64 = .maxMoney $Proxy.name(\"fee_threshold\");\n }\n \n struct BlockCheckOptions $Proxy.wrap(\"node::BlockCheckOptions\") {\n-    checkMerkleRoot @0 :Bool $Proxy.name(\"check_merkle_root\");\n-    checkPow @1 :Bool $Proxy.name(\"check_pow\");\n+    checkMerkleRoot @0 :Bool = true $Proxy.name(\"check_merkle_root\");\n+    checkPow @1 :Bool = true $Proxy.name(\"check_pow\");\n }\n \n struct CoinbaseTx $Proxy.wrap(\"node::CoinbaseTx\") {\n```\n</p>\n</details>\n\nPR also seems fine it its current form, though and these are just suggestions.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3775253204",
      "submitted_at": "2026-02-09T20:44:05Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "review_requested",
      "id": 22654057057,
      "node_id": "RRE_lADOABII587g1EbpzwAAAAVGSXph",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22654057057",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T20:44:10Z",
      "requested_reviewer": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3873855371,
      "node_id": "IC_kwDOABII587m5leL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3873855371",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-09T21:04:49Z",
      "updated_at": "2026-02-09T21:04:49Z",
      "author_association": "MEMBER",
      "body": "> I'd suggest two more changes \r\n\r\nI'll amend the commit to give credit if I need to touch it again.\r\n\r\nThe additional interface changes are in different methods, so I prefer to do them as a followup PR. I'll also drop the previously deprected methods there.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3873855371",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "reviewed",
      "id": 3785186735,
      "node_id": "PRR_kwDOABII587hnV2v",
      "url": null,
      "actor": null,
      "commit_id": "e629a8262c083d4d210689961a4bbeb41851c0af",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-11T15:25:44Z",
      "author_association": "MEMBER",
      "body": "Concept ACK\n\nI briefly looked at this, you could still mine on a stale tip even with this when your node stalls for a bit for any reason.\n\nBut I get the point, mining on a stale, is far better than waiting forever.\n\nI have some suggestions below.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#pullrequestreview-3785186735",
      "submitted_at": "2026-02-11T15:25:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
    },
    {
      "event": "labeled",
      "id": 22722217166,
      "node_id": "LE_lADOABII587g1EbpzwAAAAVKWYTO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22722217166",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T02:55:49Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3888387599,
      "node_id": "IC_kwDOABII587nxBYP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3888387599",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-12T02:55:50Z",
      "updated_at": "2026-02-12T02:55:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#issuecomment-3888387599",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34184"
    },
    {
      "event": "referenced",
      "id": 22723085982,
      "node_id": "REFE_lADOABII587g1EbpzwAAAAVKZsae",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22723085982",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e555eb86e9cd85eb00ec68c28b9ed6db72c8af35",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/e555eb86e9cd85eb00ec68c28b9ed6db72c8af35",
      "created_at": "2026-02-12T04:05:45Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730496651",
      "pull_request_review_id": 3709380896,
      "id": 2730496651,
      "node_id": "PRRC_kwDOABII586iwBKL",
      "diff_hunk": "@@ -445,6 +445,42 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    constexpr auto COOLDOWN{1s};\n+    // Use a steady clock so cooldown is independent of mocktime.\n+    auto cooldown_deadline{SteadyClock::now() + COOLDOWN};\n+    uint256 last_tip_hash{last_tip.hash};\n+    while (true) {\n+        bool best_header_ahead{false};\n+        {\n+            LOCK(::cs_main);\n+            best_header_ahead = chainman.BestHeaderAheadOfActiveTip();\n+        }\n+        if (!best_header_ahead) break;\n+\n+        WAIT_LOCK(kernel_notifications.m_tip_block_mutex, lock);\n+        kernel_notifications.m_tip_block_cv.wait_until(lock, cooldown_deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n+            const auto tip_block = kernel_notifications.TipBlock();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "984434bfa067a118930a13130181cb6e9bea7a2f",
      "original_commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Runtime assertion for consistency with `WaitAndCreateNewBlock` pattern.\r\n\r\n```suggestion\r\n            AssertLockHeld(kernel_notifications.m_tip_block_mutex);\r\n            const auto tip_block = kernel_notifications.TipBlock();\r\n```",
      "created_at": "2026-01-27T06:43:37Z",
      "updated_at": "2026-01-27T06:46:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2730496651",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730496651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 476,
      "original_line": 476,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730498440",
      "pull_request_review_id": 3709380896,
      "id": 2730498440,
      "node_id": "PRRC_kwDOABII586iwBmI",
      "diff_hunk": "@@ -445,6 +445,42 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    constexpr auto COOLDOWN{1s};\n+    // Use a steady clock so cooldown is independent of mocktime.\n+    auto cooldown_deadline{SteadyClock::now() + COOLDOWN};\n+    uint256 last_tip_hash{last_tip.hash};\n+    while (true) {\n+        bool best_header_ahead{false};\n+        {\n+            LOCK(::cs_main);\n+            best_header_ahead = chainman.BestHeaderAheadOfActiveTip();\n+        }\n+        if (!best_header_ahead) break;\n+\n+        WAIT_LOCK(kernel_notifications.m_tip_block_mutex, lock);\n+        kernel_notifications.m_tip_block_cv.wait_until(lock, cooldown_deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n+            const auto tip_block = kernel_notifications.TipBlock();\n+            return tip_block && *tip_block != last_tip_hash;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 21,
      "commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "original_commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This makes the wait wakes immediately on shutdown signal.\r\n\r\n```suggestion\r\n            return (tip_block && *tip_block != last_tip_hash) || chainman.m_interrupt;\r\n```",
      "created_at": "2026-01-27T06:44:07Z",
      "updated_at": "2026-01-27T06:48:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2730498440",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2730498440"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 465,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731376853",
      "pull_request_review_id": 3710430204,
      "id": 2731376853,
      "node_id": "PRRC_kwDOABII586izYDV",
      "diff_hunk": "@@ -445,6 +445,42 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    constexpr auto COOLDOWN{1s};\n+    // Use a steady clock so cooldown is independent of mocktime.\n+    auto cooldown_deadline{SteadyClock::now() + COOLDOWN};\n+    uint256 last_tip_hash{last_tip.hash};\n+    while (true) {\n+        bool best_header_ahead{false};\n+        {\n+            LOCK(::cs_main);\n+            best_header_ahead = chainman.BestHeaderAheadOfActiveTip();\n+        }\n+        if (!best_header_ahead) break;\n+\n+        WAIT_LOCK(kernel_notifications.m_tip_block_mutex, lock);\n+        kernel_notifications.m_tip_block_cv.wait_until(lock, cooldown_deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n+            const auto tip_block = kernel_notifications.TipBlock();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "984434bfa067a118930a13130181cb6e9bea7a2f",
      "original_commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "in_reply_to_id": 2730496651,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "There's other places where we don't bother with `AssertLockHeld` for an inline function.  It seems a bit overkill.",
      "created_at": "2026-01-27T10:41:22Z",
      "updated_at": "2026-01-27T10:41:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2731376853",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731376853"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 476,
      "original_line": 476,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731412877",
      "pull_request_review_id": 3710473540,
      "id": 2731412877,
      "node_id": "PRRC_kwDOABII586izg2N",
      "diff_hunk": "@@ -445,6 +445,42 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    constexpr auto COOLDOWN{1s};\n+    // Use a steady clock so cooldown is independent of mocktime.\n+    auto cooldown_deadline{SteadyClock::now() + COOLDOWN};\n+    uint256 last_tip_hash{last_tip.hash};\n+    while (true) {\n+        bool best_header_ahead{false};\n+        {\n+            LOCK(::cs_main);\n+            best_header_ahead = chainman.BestHeaderAheadOfActiveTip();\n+        }\n+        if (!best_header_ahead) break;\n+\n+        WAIT_LOCK(kernel_notifications.m_tip_block_mutex, lock);\n+        kernel_notifications.m_tip_block_cv.wait_until(lock, cooldown_deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n+            const auto tip_block = kernel_notifications.TipBlock();\n+            return tip_block && *tip_block != last_tip_hash;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 21,
      "commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "original_commit_id": "c02c2832f7b37681b0d79fded875baed26cb6f7d",
      "in_reply_to_id": 2730498440,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken.",
      "created_at": "2026-01-27T10:49:47Z",
      "updated_at": "2026-01-27T10:49:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2731412877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731412877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 465,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736820422",
      "pull_request_review_id": 3716923738,
      "id": 2736820422,
      "node_id": "PRRC_kwDOABII586jIJDG",
      "diff_hunk": "@@ -163,6 +163,14 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman);\n  * Returns the current tip, or nullopt if the node is shutting down. */\n std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout);\n \n+/**\n+ * Pause block template creation when the best header chain is ahead of the tip.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: createNewBlock() waits if tip is updating\" (9817657d463ff1d8502a5edf0641e88b9b1d4853)\r\n\r\nThis is a little vague. I think it would be helpful to describe this in terms of observable behavior, maybe:\r\n\r\n```\r\n/**\r\n * Wait while the best known header extends the current chain tip\r\n * AND at least one block per second is being added to the tip.\r\n *\r\n * Returns false if interrupted.\r\n */\r\n```\r\n\r\nMight also be good to add the \"not safe to keep waiting\" info from your commit description, and maybe say something about how we think this is safe to use for createNewBlock since miners should only call it once on startup, but are avoiding it in waitNext.",
      "created_at": "2026-01-28T14:09:26Z",
      "updated_at": "2026-01-28T17:22:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2736820422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736820422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736824227",
      "pull_request_review_id": 3716923738,
      "id": 2736824227,
      "node_id": "PRRC_kwDOABII586jIJ-j",
      "diff_hunk": "@@ -6310,6 +6310,16 @@ void ChainstateManager::RecalculateBestHeader()\n     }\n }\n \n+bool ChainstateManager::BestHeaderAheadOfActiveTip() const",
      "path": "src/validation.cpp",
      "position": 1,
      "original_position": 108,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: createNewBlock() waits if tip is updating\" (9817657d463ff1d8502a5edf0641e88b9b1d4853)\n\nMaybe s/Active/Current/ here, can also use CurrentChain() below.",
      "created_at": "2026-01-28T14:10:19Z",
      "updated_at": "2026-01-28T15:06:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2736824227",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736824227"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 6313,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736866828",
      "pull_request_review_id": 3716923738,
      "id": 2736866828,
      "node_id": "PRRC_kwDOABII586jIUYM",
      "diff_hunk": "@@ -445,6 +445,42 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    constexpr auto COOLDOWN{1s};\n+    // Use a steady clock so cooldown is independent of mocktime.\n+    auto cooldown_deadline{SteadyClock::now() + COOLDOWN};\n+    uint256 last_tip_hash{last_tip.hash};\n+    while (true) {\n+        bool best_header_ahead{false};\n+        {\n+            LOCK(::cs_main);\n+            best_header_ahead = chainman.BestHeaderAheadOfActiveTip();\n+        }\n+        if (!best_header_ahead) break;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: createNewBlock() waits if tip is updating\" (9817657d463ff1d8502a5edf0641e88b9b1d4853)\n\nCould collapse lines 454-460 to just:\n\n```c++\nwhile (WITH_LOCK(::cs_main, return chainman.BestHeaderAheadOfActiveTip())) {\n```\n\nI feel like that would be easier to understand without the bool and break. Or maybe better just lock cs_main inside BestHeaderAheadOfActiveTip so this can be:\n\n\n```c++\nwhile (chainman.BestHeaderAheadOfActiveTip()) {\n```\n",
      "created_at": "2026-01-28T14:20:05Z",
      "updated_at": "2026-01-28T15:06:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2736866828",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736866828"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": 454,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736935556",
      "pull_request_review_id": 3716923738,
      "id": 2736935556,
      "node_id": "PRRC_kwDOABII586jIlKE",
      "diff_hunk": "@@ -265,19 +271,38 @@ async def async_routine():\n             assert_equal(oldblockref.height, newblockref.height)\n \n             async with AsyncExitStack() as stack:\n-                self.log.debug(\"Create a template\")\n                 opts = self.capnp_modules['mining'].BlockCreateOptions()\n                 opts.useMempool = True\n                 opts.blockReservedWeight = 4000\n                 opts.coinbaseOutputMaxAdditionalSigops = 0\n+\n+                self.log.debug(\"createNewBlock() should wait if tip is still updating\")\n+                self.disconnect_nodes(0, 1)\n+                node1_block_hash = self.generate(self.nodes[1], 1, sync_fun=self.no_op)[0]\n+                header = from_hex(CBlockHeader(), self.nodes[1].getblockheader(node1_block_hash, False))\n+                header_only_peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+                header_only_peer.send_and_ping(msg_headers([header]))\n+                start = time.time()\n+                async with destroying((await mining.createNewBlock(opts)).result, ctx):\n+                    pass\n+                # Lower-bound only: a heavily loaded CI host might still exceed 0.9s\n+                # even without the cooldown, so this can miss regressions but avoids\n+                # spurious failures.\n+                assert_greater_than_or_equal(time.time() - start, 0.9)",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 56,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: createNewBlock() waits if tip is updating\" (9817657d463ff1d8502a5edf0641e88b9b1d4853)\n\nSince this check uses a delay, if there is a way you could move this test to a separate test function (not `run_mining_test`) i think that would be very good.\n\nI'm concerned about interface_ipc test getting harder to maintain and slower to run, and would like to move towards using separate test methods like #34284, so we can still have fast update/test cycles by being able to run specific tests.",
      "created_at": "2026-01-28T14:35:14Z",
      "updated_at": "2026-01-28T15:06:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2736935556",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736935556"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 322,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742088692",
      "pull_request_review_id": 3723273353,
      "id": 2742088692,
      "node_id": "PRRC_kwDOABII586jcPP0",
      "diff_hunk": "@@ -265,19 +271,38 @@ async def async_routine():\n             assert_equal(oldblockref.height, newblockref.height)\n \n             async with AsyncExitStack() as stack:\n-                self.log.debug(\"Create a template\")\n                 opts = self.capnp_modules['mining'].BlockCreateOptions()\n                 opts.useMempool = True\n                 opts.blockReservedWeight = 4000\n                 opts.coinbaseOutputMaxAdditionalSigops = 0\n+\n+                self.log.debug(\"createNewBlock() should wait if tip is still updating\")\n+                self.disconnect_nodes(0, 1)\n+                node1_block_hash = self.generate(self.nodes[1], 1, sync_fun=self.no_op)[0]\n+                header = from_hex(CBlockHeader(), self.nodes[1].getblockheader(node1_block_hash, False))\n+                header_only_peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+                header_only_peer.send_and_ping(msg_headers([header]))\n+                start = time.time()\n+                async with destroying((await mining.createNewBlock(opts)).result, ctx):\n+                    pass\n+                # Lower-bound only: a heavily loaded CI host might still exceed 0.9s\n+                # even without the cooldown, so this can miss regressions but avoids\n+                # spurious failures.\n+                assert_greater_than_or_equal(time.time() - start, 0.9)",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 56,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": 2736935556,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm looking into splitting the mining ipc tests out entirely. Will leave this line untouched for now, as one second isn't too bad.",
      "created_at": "2026-01-29T15:00:07Z",
      "updated_at": "2026-01-29T15:00:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2742088692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742088692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 322,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742088792",
      "pull_request_review_id": 3723273489,
      "id": 2742088792,
      "node_id": "PRRC_kwDOABII586jcPRY",
      "diff_hunk": "@@ -445,6 +445,42 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    constexpr auto COOLDOWN{1s};\n+    // Use a steady clock so cooldown is independent of mocktime.\n+    auto cooldown_deadline{SteadyClock::now() + COOLDOWN};\n+    uint256 last_tip_hash{last_tip.hash};\n+    while (true) {\n+        bool best_header_ahead{false};\n+        {\n+            LOCK(::cs_main);\n+            best_header_ahead = chainman.BestHeaderAheadOfActiveTip();\n+        }\n+        if (!best_header_ahead) break;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": 2736866828,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nice, taken.",
      "created_at": "2026-01-29T15:00:09Z",
      "updated_at": "2026-01-29T15:00:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2742088792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742088792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": 454,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742089349",
      "pull_request_review_id": 3723274164,
      "id": 2742089349,
      "node_id": "PRRC_kwDOABII586jcPaF",
      "diff_hunk": "@@ -163,6 +163,14 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman);\n  * Returns the current tip, or nullopt if the node is shutting down. */\n std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout);\n \n+/**\n+ * Pause block template creation when the best header chain is ahead of the tip.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": 2736820422,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken. I moved some text from the commit message to the comment here.",
      "created_at": "2026-01-29T15:00:18Z",
      "updated_at": "2026-01-29T15:00:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2742089349",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742089349"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742950202",
      "pull_request_review_id": 3724337519,
      "id": 2742950202,
      "node_id": "PRRC_kwDOABII586jfhk6",
      "diff_hunk": "@@ -995,6 +1000,7 @@ class MinerImpl : public Mining\n     NodeContext* context() override { return &m_node; }\n     ChainstateManager& chainman() { return *Assert(m_node.chainman); }\n     KernelNotifications& notifications() { return *Assert(m_node.notifications); }\n+    bool m_interrupt{false};",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add interrupt()\" (b57da688c21233e852c5afe5c5afafd3cae84e91)\n\nWould be good to note that `notifications().m_tip_block_mutex` must be held while accessing this variable because it is accessed from multiple threads. Not sure if it would be possible to add a `GUARDED_BY` annotation but that could be nice.\n\nMore importantly, we may want to consider moving this variable somewhere else. A side-effect of adding the variable here is that it makes the MinerImpl class have state, which can be bad because now destroying the `Mining` object while `createNewBlock` or `waitNext` calls are in progress can cause segfaults. This could cause the node to crash with existing IPC clients if they destroy `Mining` objects early, or if they just disconnect during a `waitNext` call and the `Mining` object is garbage collected before it returns.\n\nFor these reasons I think it might be good to move the `MinerImpl::m_interrupt` variable somewhere else like `KernelNotifications::m_blocktemplate_request_interrupted`. This would be hackier than the current solution but I think worth it to avoid node crashes triggered by IPC.\n\n(In the longer term a better solution would be to provide an `interfaces::Interrupt` type that could be passed to `waitNext` and `createBlockTemplate` methods as additional method argument. These methods could then attach a `std::function<void()>` lambda to run whatever code they need when an interrupt is triggered. Clients would then have the ability to cancel individual calls by triggering the `Interrupt` object. Internally, the cancellation could be implemented either by making a separate RPC call or by using Cap'n Proto's native `allowCancellation` mechanism.)\n\n\n",
      "created_at": "2026-01-29T18:23:02Z",
      "updated_at": "2026-01-29T19:33:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2742950202",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2742950202"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1015,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743104032",
      "pull_request_review_id": 3724510717,
      "id": 2743104032,
      "node_id": "PRRC_kwDOABII586jgHIg",
      "diff_hunk": "@@ -265,19 +271,38 @@ async def async_routine():\n             assert_equal(oldblockref.height, newblockref.height)\n \n             async with AsyncExitStack() as stack:\n-                self.log.debug(\"Create a template\")\n                 opts = self.capnp_modules['mining'].BlockCreateOptions()\n                 opts.useMempool = True\n                 opts.blockReservedWeight = 4000\n                 opts.coinbaseOutputMaxAdditionalSigops = 0\n+\n+                self.log.debug(\"createNewBlock() should wait if tip is still updating\")\n+                self.disconnect_nodes(0, 1)\n+                node1_block_hash = self.generate(self.nodes[1], 1, sync_fun=self.no_op)[0]\n+                header = from_hex(CBlockHeader(), self.nodes[1].getblockheader(node1_block_hash, False))\n+                header_only_peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+                header_only_peer.send_and_ping(msg_headers([header]))\n+                start = time.time()\n+                async with destroying((await mining.createNewBlock(opts)).result, ctx):\n+                    pass\n+                # Lower-bound only: a heavily loaded CI host might still exceed 0.9s\n+                # even without the cooldown, so this can miss regressions but avoids\n+                # spurious failures.\n+                assert_greater_than_or_equal(time.time() - start, 0.9)",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 56,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "9817657d463ff1d8502a5edf0641e88b9b1d4853",
      "in_reply_to_id": 2736935556,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See #34452. No preference on merge order, either should be easy to rebase.",
      "created_at": "2026-01-29T19:09:30Z",
      "updated_at": "2026-01-29T19:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2743104032",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743104032"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 322,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743211728",
      "pull_request_review_id": 3724642323,
      "id": 2743211728,
      "node_id": "PRRC_kwDOABII586jghbQ",
      "diff_hunk": "@@ -995,6 +1000,7 @@ class MinerImpl : public Mining\n     NodeContext* context() override { return &m_node; }\n     ChainstateManager& chainman() { return *Assert(m_node.chainman); }\n     KernelNotifications& notifications() { return *Assert(m_node.notifications); }\n+    bool m_interrupt{false};",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "in_reply_to_id": 2742950202,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I mostly just cloned the pattern we used for `waitNext()`. Does it have a similar issue?\r\n\r\n---\r\n\r\nWill give it some thought, but if it's too complicated then I'll move the commit to a followup PR.",
      "created_at": "2026-01-29T19:40:23Z",
      "updated_at": "2026-01-29T19:46:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2743211728",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743211728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1015,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743442295",
      "pull_request_review_id": 3724930526,
      "id": 2743442295,
      "node_id": "PRRC_kwDOABII586jhZt3",
      "diff_hunk": "@@ -487,16 +490,22 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n         // always returns valid tip information when possible and only\n         // returns null when shutting down, not when timing out.\n         kernel_notifications.m_tip_block_cv.wait(lock, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n-            return kernel_notifications.TipBlock() || chainman.m_interrupt;\n+            return kernel_notifications.TipBlock() || chainman.m_interrupt || interrupt;\n         });\n-        if (chainman.m_interrupt) return {};\n+        if (chainman.m_interrupt || interrupt) {\n+            interrupt = false;\n+            return {};\n+        }\n         // At this point TipBlock is set, so continue to wait until it is\n         // different then `current_tip` provided by caller.\n         kernel_notifications.m_tip_block_cv.wait_until(lock, deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n-            return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt;\n+            return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt || interrupt;\n         });\n     }\n-    if (chainman.m_interrupt) return {};\n+    if (chainman.m_interrupt || interrupt) {\n+        interrupt = false;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 54,
      "commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "original_commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add interrupt()\" (b57da688c21233e852c5afe5c5afafd3cae84e91)\n\nThere is a thread safety issue here because `interrupt` is accessed without `m_tip_block_mutex` and it could be written by another thread calling the `interrupt` method. Could be fixed by moving these checks one line up into the block above",
      "created_at": "2026-01-29T20:39:38Z",
      "updated_at": "2026-01-29T21:15:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2743442295",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743442295"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": 505,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 506,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743566474",
      "pull_request_review_id": 3724930526,
      "id": 2743566474,
      "node_id": "PRRC_kwDOABII586jh4CK",
      "diff_hunk": "@@ -995,6 +1000,7 @@ class MinerImpl : public Mining\n     NodeContext* context() override { return &m_node; }\n     ChainstateManager& chainman() { return *Assert(m_node.chainman); }\n     KernelNotifications& notifications() { return *Assert(m_node.notifications); }\n+    bool m_interrupt{false};",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "in_reply_to_id": 2742950202,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2742950202\r\n\r\n> I mostly just cloned the pattern we used for `waitNext()`. Does it have a similar issue?\r\n\r\nYou are right, I misremembered the way `interruptWait` was implemented and it does follow a similar pattern, and the issue is not as bad as I thought.\r\n\r\nThe issue is actually pretty hard to trigger because the Cap'n Proto's internal reference counting keeps the `BlockTemplate` object alive by default until the `waitNext` call returns. So a client would have to explicitly call destroy on the `BlockTemplate` object in that case or the `Mining` object in this case for there to be a crash.\r\n\r\nSo I think the current implementation of this is ok and unlikely to lead to any accidental crashes.\r\n\r\nI did go ahead and implement my suggestion before realizing the problem was not so bad, so will paste it here for reference, but your current solution seems cleaner and I'd recommend keeping it.\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/node/interfaces.cpp\r\n+++ b/src/node/interfaces.cpp\r\n@@ -929,7 +929,7 @@ public:\r\n \r\n     void interruptWait() override\r\n     {\r\n-        InterruptWait(notifications(), m_interrupt_wait);\r\n+        InterruptWait(notifications(), &m_interrupt_wait);\r\n     }\r\n \r\n     const BlockAssembler::Options m_assemble_options;\r\n@@ -964,7 +964,7 @@ public:\r\n \r\n     std::optional<BlockRef> waitTipChanged(uint256 current_tip, MillisecondsDouble timeout) override\r\n     {\r\n-        return WaitTipChanged(chainman(), notifications(), current_tip, timeout, m_interrupt);\r\n+        return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\r\n     }\r\n \r\n     std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\r\n@@ -976,7 +976,7 @@ public:\r\n         // Avoid generating a new template immediately after connecting a block while\r\n         // our best known header chain still has more work. This prevents a burst of\r\n         // block templates during the final catch-up moments after IBD.\r\n-        if (!CooldownIfHeadersAhead(chainman(), notifications(), *maybe_tip, m_interrupt)) return {};\r\n+        if (!CooldownIfHeadersAhead(chainman(), notifications(), *maybe_tip)) return {};\r\n \r\n         BlockAssembler::Options assemble_options{options};\r\n         ApplyArgsManOptions(*Assert(m_node.args), assemble_options);\r\n@@ -985,7 +985,7 @@ public:\r\n \r\n     void interrupt() override\r\n     {\r\n-        InterruptWait(notifications(), m_interrupt);\r\n+        InterruptWait(notifications());\r\n     }\r\n \r\n     bool checkBlock(const CBlock& block, const node::BlockCheckOptions& options, std::string& reason, std::string& debug) override\r\n@@ -1000,7 +1000,6 @@ public:\r\n     NodeContext* context() override { return &m_node; }\r\n     ChainstateManager& chainman() { return *Assert(m_node.chainman); }\r\n     KernelNotifications& notifications() { return *Assert(m_node.notifications); }\r\n-    bool m_interrupt{false};\r\n     NodeContext& m_node;\r\n };\r\n } // namespace\r\n--- a/src/node/kernel_notifications.h\r\n+++ b/src/node/kernel_notifications.h\r\n@@ -61,6 +61,14 @@ public:\r\n     //! Might be unset during an early shutdown.\r\n     std::optional<uint256> TipBlock() EXCLUSIVE_LOCKS_REQUIRED(m_tip_block_mutex);\r\n \r\n+    //! Whether a createNewBlock() / waitNext() cancellation has been requested.\r\n+    //! Having this variable here hacky, but avoids the problem of\r\n+    //! createNewBlock not being interruptible during IBD by mining clients, and\r\n+    //! avoids memory safety issues that would occur if the variable was\r\n+    //! somewhere else. An idea for getting rid of this is described in\r\n+    //! https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2742950202\r\n+    bool m_blocktemplate_request_interrupted GUARDED_BY(m_tip_block_mutex);\r\n+\r\n private:\r\n     const std::function<bool()>& m_shutdown_request;\r\n     std::atomic<int>& m_exit_status;\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -341,13 +341,27 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\r\n     block.fChecked = false;\r\n }\r\n \r\n-void InterruptWait(KernelNotifications& kernel_notifications, bool& interrupt_wait)\r\n+void InterruptWait(KernelNotifications& kernel_notifications, bool* interrupt_wait)\r\n {\r\n     LOCK(kernel_notifications.m_tip_block_mutex);\r\n-    interrupt_wait = true;\r\n+    kernel_notifications.m_blocktemplate_request_interrupted = true;\r\n+    if (interrupt_wait) *interrupt_wait = true;\r\n     kernel_notifications.m_tip_block_cv.notify_all();\r\n }\r\n \r\n+static bool Interrupted(const KernelNotifications& kernel_notifications, const bool* interrupt_wait = nullptr) EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex)\r\n+{\r\n+    return kernel_notifications.m_blocktemplate_request_interrupted || (interrupt_wait && *interrupt_wait);\r\n+}\r\n+\r\n+static bool ResetInterrupt(KernelNotifications& kernel_notifications, bool* interrupt_wait = nullptr) EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex)\r\n+{\r\n+    if (!Interrupted(kernel_notifications, interrupt_wait)) return false;\r\n+    kernel_notifications.m_blocktemplate_request_interrupted = false;\r\n+    if (interrupt_wait) *interrupt_wait = false;\r\n+    return true;\r\n+}\r\n+\r\n std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\r\n                                                       KernelNotifications& kernel_notifications,\r\n                                                       CTxMemPool* mempool,\r\n@@ -379,12 +393,9 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\r\n                 // method on BlockTemplate and no template could have been\r\n                 // generated before a tip exists.\r\n                 tip_changed = Assume(tip_block) && tip_block != block_template->block.hashPrevBlock;\r\n-                return tip_changed || chainman.m_interrupt || interrupt_wait;\r\n+                return tip_changed || chainman.m_interrupt || Interrupted(kernel_notifications, &interrupt_wait);\r\n             });\r\n-            if (interrupt_wait) {\r\n-                interrupt_wait = false;\r\n-                return nullptr;\r\n-            }\r\n+            if (ResetInterrupt(kernel_notifications, &interrupt_wait)) return nullptr;\r\n         }\r\n \r\n         if (chainman.m_interrupt) return nullptr;\r\n@@ -445,7 +456,7 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\r\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\r\n }\r\n \r\n-bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip, bool& interrupt)\r\n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\r\n {\r\n     constexpr auto COOLDOWN{1s};\r\n     // Use a steady clock so cooldown is independent of mocktime.\r\n@@ -455,12 +466,9 @@ bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& ke\r\n         WAIT_LOCK(kernel_notifications.m_tip_block_mutex, lock);\r\n         kernel_notifications.m_tip_block_cv.wait_until(lock, cooldown_deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\r\n             const auto tip_block = kernel_notifications.TipBlock();\r\n-            return chainman.m_interrupt || interrupt || (tip_block && *tip_block != last_tip_hash);\r\n+            return chainman.m_interrupt || Interrupted(kernel_notifications) || (tip_block && *tip_block != last_tip_hash);\r\n         });\r\n-        if (chainman.m_interrupt || interrupt) {\r\n-            interrupt = false;\r\n-            return false;\r\n-        }\r\n+        if (chainman.m_interrupt || ResetInterrupt(kernel_notifications)) return false;\r\n \r\n         // If the tip changed during the wait, extend the deadline\r\n         const auto tip_block = kernel_notifications.TipBlock();\r\n@@ -477,7 +485,7 @@ bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& ke\r\n     return true;\r\n }\r\n \r\n-std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout, bool& interrupt)\r\n+std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout)\r\n {\r\n     Assume(timeout >= 0ms); // No internal callers should use a negative timeout\r\n     if (timeout < 0ms) timeout = 0ms;\r\n@@ -490,21 +498,15 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\r\n         // always returns valid tip information when possible and only\r\n         // returns null when shutting down, not when timing out.\r\n         kernel_notifications.m_tip_block_cv.wait(lock, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\r\n-            return kernel_notifications.TipBlock() || chainman.m_interrupt || interrupt;\r\n+            return kernel_notifications.TipBlock() || chainman.m_interrupt || Interrupted(kernel_notifications);\r\n         });\r\n-        if (chainman.m_interrupt || interrupt) {\r\n-            interrupt = false;\r\n-            return {};\r\n-        }\r\n+        if (chainman.m_interrupt || ResetInterrupt(kernel_notifications)) return {};\r\n         // At this point TipBlock is set, so continue to wait until it is\r\n         // different then `current_tip` provided by caller.\r\n         kernel_notifications.m_tip_block_cv.wait_until(lock, deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\r\n-            return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt || interrupt;\r\n+            return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt || Interrupted(kernel_notifications);\r\n         });\r\n-    }\r\n-    if (chainman.m_interrupt || interrupt) {\r\n-        interrupt = false;\r\n-        return {};\r\n+        if (chainman.m_interrupt || ResetInterrupt(kernel_notifications)) return {};\r\n     }\r\n \r\n     // Must release m_tip_block_mutex before getTip() locks cs_main, to\r\n--- a/src/node/miner.h\r\n+++ b/src/node/miner.h\r\n@@ -143,7 +143,7 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\r\n \r\n \r\n /* Interrupt a blocking call. */\r\n-void InterruptWait(KernelNotifications& kernel_notifications, bool& interrupt_wait);\r\n+void InterruptWait(KernelNotifications& kernel_notifications, bool* interrupt_wait = nullptr);\r\n /**\r\n  * Return a new block template when fees rise to a certain threshold or after a\r\n  * new tip; return nullopt if timeout is reached.\r\n@@ -163,7 +163,7 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman);\r\n  * Returns the current tip, or nullopt if the node is shutting down or interrupt()\r\n  * is called.\r\n  */\r\n-std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout, bool& interrupt);\r\n+std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const uint256& current_tip, MillisecondsDouble& timeout);\r\n \r\n /**\r\n  * Wait while the best known header extends the current chain tip AND at least\r\n@@ -177,11 +177,10 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\r\n  * once per connected client. Subsequent templates are provided by waitNext().\r\n  *\r\n  * @param last_tip tip at the start of the cooldown window.\r\n- * @param interrupt set to true to interrupt the cooldown.\r\n  *\r\n  * @returns false if interrupted.\r\n  */\r\n-bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip, bool& interrupt);\r\n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip);\r\n } // namespace node\r\n \r\n #endif // BITCOIN_NODE_MINER_H\r\n```\r\n</p>\r\n</details>\r\n\r\n\r\n\r\n",
      "created_at": "2026-01-29T21:11:56Z",
      "updated_at": "2026-01-29T21:15:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2743566474",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743566474"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1015,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2745846683",
      "pull_request_review_id": 3727775186,
      "id": 2745846683,
      "node_id": "PRRC_kwDOABII586jqkub",
      "diff_hunk": "@@ -487,16 +490,22 @@ std::optional<BlockRef> WaitTipChanged(ChainstateManager& chainman, KernelNotifi\n         // always returns valid tip information when possible and only\n         // returns null when shutting down, not when timing out.\n         kernel_notifications.m_tip_block_cv.wait(lock, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n-            return kernel_notifications.TipBlock() || chainman.m_interrupt;\n+            return kernel_notifications.TipBlock() || chainman.m_interrupt || interrupt;\n         });\n-        if (chainman.m_interrupt) return {};\n+        if (chainman.m_interrupt || interrupt) {\n+            interrupt = false;\n+            return {};\n+        }\n         // At this point TipBlock is set, so continue to wait until it is\n         // different then `current_tip` provided by caller.\n         kernel_notifications.m_tip_block_cv.wait_until(lock, deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n-            return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt;\n+            return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt || interrupt;\n         });\n     }\n-    if (chainman.m_interrupt) return {};\n+    if (chainman.m_interrupt || interrupt) {\n+        interrupt = false;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 54,
      "commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "original_commit_id": "b57da688c21233e852c5afe5c5afafd3cae84e91",
      "in_reply_to_id": 2743442295,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done, and added a link to your more elaborate solution in the commit message.",
      "created_at": "2026-01-30T11:38:50Z",
      "updated_at": "2026-01-30T11:38:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2745846683",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2745846683"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": 505,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 506,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770232149",
      "pull_request_review_id": 3758352187,
      "id": 2770232149,
      "node_id": "PRRC_kwDOABII586lHmNV",
      "diff_hunk": "@@ -39,6 +39,7 @@ class Init\n     virtual Ipc* ipc() { return nullptr; }\n     virtual bool canListenIpc() { return false; }\n     virtual const char* exeName() { return nullptr; }\n+    virtual void makeMiningV2() { throw std::runtime_error(\"Old mining interface (@2) not supported. Please update your client!\"); }",
      "path": "src/interfaces/init.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "original_commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: pass missing context to BlockTemplate methods\" (c236980ad64aabf6b9bf5119b92a599d8e707d0b)\r\n\r\nI feel like it would be simpler just to stay backwards compatible, instead breaking compatibility with existing IPC clients over this cooldown feature. Should be doable with less code, just:\r\n\r\n```diff\r\n--- a/src/ipc/capnp/mining.capnp\r\n+++ b/src/ipc/capnp/mining.capnp\r\n@@ -17,8 +17,12 @@ interface Mining $Proxy.wrap(\"interfaces::Mining\") {\r\n     isInitialBlockDownload @1 (context :Proxy.Context) -> (result: Bool);\r\n     getTip @2 (context :Proxy.Context) -> (result: Common.BlockRef, hasResult: Bool);\r\n     waitTipChanged @3 (context :Proxy.Context, currentTip: Data, timeout: Float64) -> (result: Common.BlockRef);\r\n-    createNewBlock @4 (options: BlockCreateOptions) -> (result: BlockTemplate);\r\n-    checkBlock @5 (block: Data, options: BlockCheckOptions) -> (reason: Text, debug: Text, result: Bool);\r\n+    createNewBlock @6 (context :Proxy.Context, options: BlockCreateOptions) -> (result: BlockTemplate);\r\n+    checkBlock @7 (context :Proxy.Context, block: Data, options: BlockCheckOptions) -> (reason: Text, debug: Text, result: Bool);\r\n+\r\n+    # DEPRECATED: older versions of methods which don't take a context argument (so can't run asynchronously).\r\n+    createNewBlockOld4 @4 (options: BlockCreateOptions) -> (result: BlockTemplate) $Proxy.name(\"createNewBlock\");\r\n+    checkBlockOld5 @5 (block: Data, options: BlockCheckOptions) -> (reason: Text, debug: Text, result: Bool) $Proxy.name(\"checkBlock\");\r\n }\r\n```\r\n\r\nPlus an update to the python test to pass the context.",
      "created_at": "2026-02-05T17:07:55Z",
      "updated_at": "2026-02-05T18:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2770232149",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770232149"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770257302",
      "pull_request_review_id": 3758352187,
      "id": 2770257302,
      "node_id": "PRRC_kwDOABII586lHsWW",
      "diff_hunk": "@@ -19,5 +19,8 @@ using Mining = import \"mining.capnp\";\n interface Init $Proxy.wrap(\"interfaces::Init\") {\n     construct @0 (threadMap: Proxy.ThreadMap) -> (threadMap :Proxy.ThreadMap);\n     makeEcho @1 (context :Proxy.Context) -> (result :Echo.Echo);\n-    makeMining @2 (context :Proxy.Context) -> (result :Mining.Mining);\n+    makeMining @3 (context :Proxy.Context) -> (result :Mining.Mining);\n+\n+    # DEPRECATED: no longer supported; server returns an error.\n+    makeMiningV2 @2 () -> ();",
      "path": "src/ipc/capnp/init.capnp",
      "position": 1,
      "original_position": 8,
      "commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "original_commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: pass missing context to BlockTemplate methods\" (c236980ad64aabf6b9bf5119b92a599d8e707d0b)\r\n\r\n(If not using other suggestion for staying backwards compatible)\r\n\r\nI think I suggested this `V2` suffix in another issue, but now I think another suffix like `Old2` might be less confusing because `V2` sounds like it indicates a newer version of the method.",
      "created_at": "2026-02-05T17:13:17Z",
      "updated_at": "2026-02-05T18:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2770257302",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770257302"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770296029",
      "pull_request_review_id": 3758352187,
      "id": 2770296029,
      "node_id": "PRRC_kwDOABII586lH1zd",
      "diff_hunk": "@@ -452,6 +452,38 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    uint256 last_tip_hash{last_tip.hash};\n+\n+    while (const std::optional<int> remaining = chainman.BlocksAheadOfTip()) {\n+        const int cooldown_seconds = std::clamp(*remaining, 3, 20);",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 9,
      "commit_id": "e629a8262c083d4d210689961a4bbeb41851c0af",
      "original_commit_id": "a98510d8055fb3dba19eac9e6ff3bfc3be39996c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add cooldown argument to createNewBlock()\" (617eb13ec178154bdfd1a2f41496912d87bf17fc)\r\n\r\nLike this, clever!",
      "created_at": "2026-02-05T17:23:42Z",
      "updated_at": "2026-02-05T18:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2770296029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770296029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 460,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770370562",
      "pull_request_review_id": 3758352187,
      "id": 2770370562,
      "node_id": "PRRC_kwDOABII586lIIAC",
      "diff_hunk": "@@ -982,18 +982,23 @@ class MinerImpl : public Mining\n             // forever if no block was mined in the past day.\n             while (chainman().IsInitialBlockDownload()) {\n                 maybe_tip = waitTipChanged(maybe_tip->hash, MillisecondsDouble{1000});\n-                if (!maybe_tip) return {};\n+                if (!maybe_tip || m_interrupt) return {};",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "4756af92d229d88659490146999f77e20572b668",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: add interrupt()\" (299f15677b3d32b878f79945128c977dc8eaedfd)\n\nWould probably change this to:\n\n```c++\nif (!maybe_tip || chainman().m_interrupt || WITH_LOCK(notifications().m_tip_block_mutex, return m_interrupt)) return {};\n```\n\nsince it's not safe to check `this->m_interrupt` without the mutex and it is probably good to include `chainman().m_interrupt` for completeness, even though `waitTipChanged` recently checked it.\n",
      "created_at": "2026-02-05T17:42:51Z",
      "updated_at": "2026-02-05T18:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2770370562",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770370562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 985,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777431726",
      "pull_request_review_id": 3766889490,
      "id": 2777431726,
      "node_id": "PRRC_kwDOABII586ljD6u",
      "diff_hunk": "@@ -39,6 +39,7 @@ class Init\n     virtual Ipc* ipc() { return nullptr; }\n     virtual bool canListenIpc() { return false; }\n     virtual const char* exeName() { return nullptr; }\n+    virtual void makeMiningV2() { throw std::runtime_error(\"Old mining interface (@2) not supported. Please update your client!\"); }",
      "path": "src/interfaces/init.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "original_commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "in_reply_to_id": 2770232149,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Responded in the main thread.",
      "created_at": "2026-02-07T11:12:15Z",
      "updated_at": "2026-02-07T11:12:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2777431726",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777431726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777446099",
      "pull_request_review_id": 3766898916,
      "id": 2777446099,
      "node_id": "PRRC_kwDOABII586ljHbT",
      "diff_hunk": "@@ -982,18 +982,23 @@ class MinerImpl : public Mining\n             // forever if no block was mined in the past day.\n             while (chainman().IsInitialBlockDownload()) {\n                 maybe_tip = waitTipChanged(maybe_tip->hash, MillisecondsDouble{1000});\n-                if (!maybe_tip) return {};\n+                if (!maybe_tip || m_interrupt) return {};",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "4756af92d229d88659490146999f77e20572b668",
      "original_commit_id": "4756af92d229d88659490146999f77e20572b668",
      "in_reply_to_id": 2770370562,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Good catch, seems I ignored my own source code comment.\r\n\r\nI renamed it to `m_interrupt_mining` and also renamed the `CooldownIfHeadersAhead` argument, because it got confusing.",
      "created_at": "2026-02-07T11:34:36Z",
      "updated_at": "2026-02-07T11:34:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2777446099",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777446099"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 985,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777446115",
      "pull_request_review_id": 3766898940,
      "id": 2777446115,
      "node_id": "PRRC_kwDOABII586ljHbj",
      "diff_hunk": "@@ -19,5 +19,8 @@ using Mining = import \"mining.capnp\";\n interface Init $Proxy.wrap(\"interfaces::Init\") {\n     construct @0 (threadMap: Proxy.ThreadMap) -> (threadMap :Proxy.ThreadMap);\n     makeEcho @1 (context :Proxy.Context) -> (result :Echo.Echo);\n-    makeMining @2 (context :Proxy.Context) -> (result :Mining.Mining);\n+    makeMining @3 (context :Proxy.Context) -> (result :Mining.Mining);\n+\n+    # DEPRECATED: no longer supported; server returns an error.\n+    makeMiningV2 @2 () -> ();",
      "path": "src/ipc/capnp/init.capnp",
      "position": 1,
      "original_position": 8,
      "commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "original_commit_id": "a47fd4298d89ca8b3318e2888e1d146eb11b4d50",
      "in_reply_to_id": 2770257302,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Changed to `makeMiningDeprecatedV2`",
      "created_at": "2026-02-07T11:34:41Z",
      "updated_at": "2026-02-07T11:39:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2777446115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2777446115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793623882",
      "pull_request_review_id": 3785186735,
      "id": 2793623882,
      "node_id": "PRRC_kwDOABII586mg1FK",
      "diff_hunk": "@@ -145,13 +145,15 @@ class Mining\n    /**\n      * Construct a new block template.\n      *\n-     * During node initialization, this will wait until the tip is connected.\n-     *\n      * @param[in] options options for creating the block\n+     * @param[in] cooldown wait for tip to be connected and IBD to complete.\n+     *                     If the best header is ahead of the tip, wait for the\n+     *                     tip to catch up. Recommended, except for regtest and\n+     *                     signets with only one miner.\n      * @retval BlockTemplate a block template.\n      * @retval std::nullptr if the node is shut down.\n      */\n-    virtual std::unique_ptr<BlockTemplate> createNewBlock(const node::BlockCreateOptions& options = {}) = 0;\n+    virtual std::unique_ptr<BlockTemplate> createNewBlock(const node::BlockCreateOptions& options = {}, bool cooldown = false) = 0;",
      "path": "src/interfaces/mining.h",
      "position": 15,
      "original_position": 15,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\nIn \"mining: add cooldown argument to createNewBlock()\" 0d4cf7041af41e6371473f7df93301d7100cea3e\n\nShouldn't it be the other way around, cooldown true? You do not cool down when on a custom setup?",
      "created_at": "2026-02-11T14:31:33Z",
      "updated_at": "2026-02-11T15:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2793623882",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793623882"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793635435",
      "pull_request_review_id": 3785186735,
      "id": 2793635435,
      "node_id": "PRRC_kwDOABII586mg35r",
      "diff_hunk": "@@ -145,13 +145,15 @@ class Mining\n    /**\n      * Construct a new block template.\n      *\n-     * During node initialization, this will wait until the tip is connected.\n-     *\n      * @param[in] options options for creating the block\n+     * @param[in] cooldown wait for tip to be connected and IBD to complete.\n+     *                     If the best header is ahead of the tip, wait for the\n+     *                     tip to catch up. Recommended, except for regtest and\n+     *                     signets with only one miner.",
      "path": "src/interfaces/mining.h",
      "position": 10,
      "original_position": 10,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\nIn \"mining: add cooldown argument to createNewBlock()\" 0d4cf7041af41e6371473f7df93301d7100cea3e\n\nnit: no need to mention all the custom setups that don't need cooldown; highlight that we return immediately.",
      "created_at": "2026-02-11T14:33:48Z",
      "updated_at": "2026-02-11T15:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2793635435",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793635435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": 151,
      "original_start_line": 151,
      "start_side": "RIGHT",
      "line": 152,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793733665",
      "pull_request_review_id": 3785186735,
      "id": 2793733665,
      "node_id": "PRRC_kwDOABII586mhP4h",
      "diff_hunk": "@@ -967,10 +967,27 @@ class MinerImpl : public Mining\n         return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\n     }\n \n-    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n+    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options, bool cooldown) override\n     {\n         // Ensure m_tip_block is set so consumers of BlockTemplate can rely on that.\n-        if (!waitTipChanged(uint256::ZERO, MillisecondsDouble::max())) return {};\n+        std::optional<BlockRef> maybe_tip{waitTipChanged(uint256::ZERO, MillisecondsDouble::max())};\n+\n+        if (!maybe_tip) return {};\n+\n+        if (cooldown) {\n+            // Do not return a template during IBD, because it can have long\n+            // pauses and sometimes takes a while to get started. Although this\n+            // is useful in general, it's gated behind the cooldown argument,\n+            // because on regtest and single miner signets this would wait\n+            // forever if no block was mined in the past day.\n+            while (chainman().IsInitialBlockDownload()) {\n+                maybe_tip = waitTipChanged(maybe_tip->hash, MillisecondsDouble{1000});\n+                if (!maybe_tip) return {};\n+            }",
      "path": "src/node/interfaces.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: add cooldown argument to createNewBlock()\" 0d4cf7041af41e6371473f7df93301d7100cea3e\n\nHmm, when the node loses connectivity briefly during IBD, or experiences block stalling due to poor peers or any other reason, this will return empty.\nWhy not have it wait until IBD is done or interrupt during shutdown using a conditional variable (It is safe to block in this case because we are not in the final catch up yet) ?",
      "created_at": "2026-02-11T14:52:35Z",
      "updated_at": "2026-02-11T15:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2793733665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793733665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": 983,
      "original_start_line": 983,
      "start_side": "RIGHT",
      "line": 986,
      "original_line": 986,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793798684",
      "pull_request_review_id": 3785186735,
      "id": 2793798684,
      "node_id": "PRRC_kwDOABII586mhfwc",
      "diff_hunk": "@@ -452,6 +452,38 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    uint256 last_tip_hash{last_tip.hash};\n+\n+    while (const std::optional<int> remaining = chainman.BlocksAheadOfTip()) {\n+        const int cooldown_seconds = std::clamp(*remaining, 3, 20);\n+        // Use a steady clock so cooldown is independent of mocktime.",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: add cooldown argument to createNewBlock()\" 0d4cf7041af41e6371473f7df93301d7100cea3e\n\nWhy not mockable steady clock? It also moves forward only and will allow for testing some scenarios??\n",
      "created_at": "2026-02-11T15:04:37Z",
      "updated_at": "2026-02-11T15:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2793798684",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793798684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 461,
      "original_line": 461,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793823662",
      "pull_request_review_id": 3785186735,
      "id": 2793823662,
      "node_id": "PRRC_kwDOABII586mhl2u",
      "diff_hunk": "@@ -452,6 +452,38 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    uint256 last_tip_hash{last_tip.hash};\n+\n+    while (const std::optional<int> remaining = chainman.BlocksAheadOfTip()) {\n+        const int cooldown_seconds = std::clamp(*remaining, 3, 20);",
      "path": "src/node/miner.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: add cooldown argument to createNewBlock()\" 0d4cf7041af41e6371473f7df93301d7100cea3e\n\nThree seconds minimum seems a bit much, IMO, should just be 1? ",
      "created_at": "2026-02-11T15:09:14Z",
      "updated_at": "2026-02-11T15:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2793823662",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793823662"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 460,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793850594",
      "pull_request_review_id": 3785186735,
      "id": 2793850594,
      "node_id": "PRRC_kwDOABII586mhsbi",
      "diff_hunk": "@@ -967,10 +967,27 @@ class MinerImpl : public Mining\n         return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\n     }\n \n-    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n+    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options, bool cooldown) override\n     {\n         // Ensure m_tip_block is set so consumers of BlockTemplate can rely on that.\n-        if (!waitTipChanged(uint256::ZERO, MillisecondsDouble::max())) return {};\n+        std::optional<BlockRef> maybe_tip{waitTipChanged(uint256::ZERO, MillisecondsDouble::max())};",
      "path": "src/node/interfaces.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"mining: add cooldown argument to createNewBlock()\" 0d4cf7041af41e6371473f7df93301d7100cea3e\n\nShould this implementation code move to miner?",
      "created_at": "2026-02-11T15:13:56Z",
      "updated_at": "2026-02-11T15:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2793850594",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2793850594"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 973,
      "original_line": 973,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794186220",
      "pull_request_review_id": 3785824477,
      "id": 2794186220,
      "node_id": "PRRC_kwDOABII586mi-Xs",
      "diff_hunk": "@@ -145,13 +145,15 @@ class Mining\n    /**\n      * Construct a new block template.\n      *\n-     * During node initialization, this will wait until the tip is connected.\n-     *\n      * @param[in] options options for creating the block\n+     * @param[in] cooldown wait for tip to be connected and IBD to complete.\n+     *                     If the best header is ahead of the tip, wait for the\n+     *                     tip to catch up. Recommended, except for regtest and\n+     *                     signets with only one miner.\n      * @retval BlockTemplate a block template.\n      * @retval std::nullptr if the node is shut down.\n      */\n-    virtual std::unique_ptr<BlockTemplate> createNewBlock(const node::BlockCreateOptions& options = {}) = 0;\n+    virtual std::unique_ptr<BlockTemplate> createNewBlock(const node::BlockCreateOptions& options = {}, bool cooldown = false) = 0;",
      "path": "src/interfaces/mining.h",
      "position": 15,
      "original_position": 15,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793623882,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The vast majority of code paths is in test code, so this default is easier (less code churn). Since IPC clients (unless they use libmultiprocess) can't take advantage of the default value anyway, might as well use `false`. ",
      "created_at": "2026-02-11T16:17:20Z",
      "updated_at": "2026-02-11T16:17:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794186220",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794186220"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794196914",
      "pull_request_review_id": 3785835679,
      "id": 2794196914,
      "node_id": "PRRC_kwDOABII586mjA-y",
      "diff_hunk": "@@ -145,13 +145,15 @@ class Mining\n    /**\n      * Construct a new block template.\n      *\n-     * During node initialization, this will wait until the tip is connected.\n-     *\n      * @param[in] options options for creating the block\n+     * @param[in] cooldown wait for tip to be connected and IBD to complete.\n+     *                     If the best header is ahead of the tip, wait for the\n+     *                     tip to catch up. Recommended, except for regtest and\n+     *                     signets with only one miner.",
      "path": "src/interfaces/mining.h",
      "position": 10,
      "original_position": 10,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793635435,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Even though the default in our c++ code is `false` (see above), the recommendation for real clients is `true`, with these two exceptions. ",
      "created_at": "2026-02-11T16:19:24Z",
      "updated_at": "2026-02-11T16:19:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794196914",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794196914"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": 151,
      "original_start_line": 151,
      "start_side": "RIGHT",
      "line": 152,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794217526",
      "pull_request_review_id": 3785857340,
      "id": 2794217526,
      "node_id": "PRRC_kwDOABII586mjGA2",
      "diff_hunk": "@@ -967,10 +967,27 @@ class MinerImpl : public Mining\n         return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\n     }\n \n-    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n+    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options, bool cooldown) override\n     {\n         // Ensure m_tip_block is set so consumers of BlockTemplate can rely on that.\n-        if (!waitTipChanged(uint256::ZERO, MillisecondsDouble::max())) return {};\n+        std::optional<BlockRef> maybe_tip{waitTipChanged(uint256::ZERO, MillisecondsDouble::max())};\n+\n+        if (!maybe_tip) return {};\n+\n+        if (cooldown) {\n+            // Do not return a template during IBD, because it can have long\n+            // pauses and sometimes takes a while to get started. Although this\n+            // is useful in general, it's gated behind the cooldown argument,\n+            // because on regtest and single miner signets this would wait\n+            // forever if no block was mined in the past day.\n+            while (chainman().IsInitialBlockDownload()) {\n+                maybe_tip = waitTipChanged(maybe_tip->hash, MillisecondsDouble{1000});\n+                if (!maybe_tip) return {};\n+            }",
      "path": "src/node/interfaces.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793733665,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "No, we return empty if the node shuts down or the call is interrupted. If there's a timeout, `waitTipChanged` returns the current tip, not `nullopt`.\r\n\r\nThis loop just checks once per second if we're still in IBD.",
      "created_at": "2026-02-11T16:23:08Z",
      "updated_at": "2026-02-11T16:24:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794217526",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794217526"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": 983,
      "original_start_line": 983,
      "start_side": "RIGHT",
      "line": 986,
      "original_line": 986,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794263926",
      "pull_request_review_id": 3785909768,
      "id": 2794263926,
      "node_id": "PRRC_kwDOABII586mjRV2",
      "diff_hunk": "@@ -452,6 +452,38 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    uint256 last_tip_hash{last_tip.hash};\n+\n+    while (const std::optional<int> remaining = chainman.BlocksAheadOfTip()) {\n+        const int cooldown_seconds = std::clamp(*remaining, 3, 20);",
      "path": "src/node/miner.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793823662,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Based on my and Plebhash' testing that's not enough. There are plenty of multi second gaps even on a fast machine, see the chart in PR description.",
      "created_at": "2026-02-11T16:30:38Z",
      "updated_at": "2026-02-11T16:30:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794263926",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794263926"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 460,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794275542",
      "pull_request_review_id": 3785923128,
      "id": 2794275542,
      "node_id": "PRRC_kwDOABII586mjULW",
      "diff_hunk": "@@ -967,10 +967,27 @@ class MinerImpl : public Mining\n         return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\n     }\n \n-    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n+    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options, bool cooldown) override\n     {\n         // Ensure m_tip_block is set so consumers of BlockTemplate can rely on that.\n-        if (!waitTipChanged(uint256::ZERO, MillisecondsDouble::max())) return {};\n+        std::optional<BlockRef> maybe_tip{waitTipChanged(uint256::ZERO, MillisecondsDouble::max())};",
      "path": "src/node/interfaces.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793850594,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe, but at the moment both cooldown and interrupt are specific to IPC.",
      "created_at": "2026-02-11T16:32:39Z",
      "updated_at": "2026-02-11T16:32:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794275542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794275542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 973,
      "original_line": 973,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794284337",
      "pull_request_review_id": 3785932979,
      "id": 2794284337,
      "node_id": "PRRC_kwDOABII586mjWUx",
      "diff_hunk": "@@ -452,6 +452,38 @@ std::optional<BlockRef> GetTip(ChainstateManager& chainman)\n     return BlockRef{tip->GetBlockHash(), tip->nHeight};\n }\n \n+bool CooldownIfHeadersAhead(ChainstateManager& chainman, KernelNotifications& kernel_notifications, const BlockRef& last_tip)\n+{\n+    uint256 last_tip_hash{last_tip.hash};\n+\n+    while (const std::optional<int> remaining = chainman.BlocksAheadOfTip()) {\n+        const int cooldown_seconds = std::clamp(*remaining, 3, 20);\n+        // Use a steady clock so cooldown is independent of mocktime.",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793798684,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In an earlier version of this PR the cooldown would also happen in the test framework by default, so using mock time was a headache. But now it's gated behind the `cooldown` argument. I'll look into using a mockable stead clock if I need to retouch.",
      "created_at": "2026-02-11T16:34:08Z",
      "updated_at": "2026-02-11T16:34:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794284337",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794284337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 461,
      "original_line": 461,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794399230",
      "pull_request_review_id": 3786062344,
      "id": 2794399230,
      "node_id": "PRRC_kwDOABII586mjyX-",
      "diff_hunk": "@@ -967,10 +967,27 @@ class MinerImpl : public Mining\n         return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\n     }\n \n-    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options) override\n+    std::unique_ptr<BlockTemplate> createNewBlock(const BlockCreateOptions& options, bool cooldown) override\n     {\n         // Ensure m_tip_block is set so consumers of BlockTemplate can rely on that.\n-        if (!waitTipChanged(uint256::ZERO, MillisecondsDouble::max())) return {};\n+        std::optional<BlockRef> maybe_tip{waitTipChanged(uint256::ZERO, MillisecondsDouble::max())};\n+\n+        if (!maybe_tip) return {};\n+\n+        if (cooldown) {\n+            // Do not return a template during IBD, because it can have long\n+            // pauses and sometimes takes a while to get started. Although this\n+            // is useful in general, it's gated behind the cooldown argument,\n+            // because on regtest and single miner signets this would wait\n+            // forever if no block was mined in the past day.\n+            while (chainman().IsInitialBlockDownload()) {\n+                maybe_tip = waitTipChanged(maybe_tip->hash, MillisecondsDouble{1000});\n+                if (!maybe_tip) return {};\n+            }",
      "path": "src/node/interfaces.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793733665,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "That makes sense, thanks for clarifying.",
      "created_at": "2026-02-11T16:54:51Z",
      "updated_at": "2026-02-11T16:54:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2794399230",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2794399230"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": 983,
      "original_start_line": 983,
      "start_side": "RIGHT",
      "line": 986,
      "original_line": 986,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796695852",
      "pull_request_review_id": 3788663798,
      "id": 2796695852,
      "node_id": "PRRC_kwDOABII586msjEs",
      "diff_hunk": "@@ -145,13 +145,15 @@ class Mining\n    /**\n      * Construct a new block template.\n      *\n-     * During node initialization, this will wait until the tip is connected.\n-     *\n      * @param[in] options options for creating the block\n+     * @param[in] cooldown wait for tip to be connected and IBD to complete.\n+     *                     If the best header is ahead of the tip, wait for the\n+     *                     tip to catch up. Recommended, except for regtest and\n+     *                     signets with only one miner.\n      * @retval BlockTemplate a block template.\n      * @retval std::nullptr if the node is shut down.\n      */\n-    virtual std::unique_ptr<BlockTemplate> createNewBlock(const node::BlockCreateOptions& options = {}) = 0;\n+    virtual std::unique_ptr<BlockTemplate> createNewBlock(const node::BlockCreateOptions& options = {}, bool cooldown = false) = 0;",
      "path": "src/interfaces/mining.h",
      "position": 15,
      "original_position": 15,
      "commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "original_commit_id": "0d4cf7041af41e6371473f7df93301d7100cea3e",
      "in_reply_to_id": 2793623882,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Since IPC clients (unless they use libmultiprocess) can't take advantage of the default value anyway, might as well use `false`.\r\n\r\nI don't think I have an opinion on what the default should be, but wanted to point out that Cap'n Proto supports setting default values, so IPC clients should be able to take advantage of whatever default is set.\r\n\r\nI opened #34568 just now which sets defaults for other parameters. The only restriction capnproto has on defaults is that you can only set them when fields and parameters are first introduced. One a field exists changing its default is not backwards compatible (because on the wire default values are always 0 and internally it uses some trickery to map 0 to whatever the declared default value is).\r\n",
      "created_at": "2026-02-12T04:19:02Z",
      "updated_at": "2026-02-12T04:19:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34184#discussion_r2796695852",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2796695852"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34184"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "RIGHT"
    }
  ]
}