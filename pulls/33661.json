{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661",
    "id": 2929620815,
    "node_id": "PR_kwDOABII586unndP",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33661",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33661.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33661.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ea998e18f6d64f485d4e2d85a1028474fb35120a",
    "number": 33661,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: Add test on skip heights in CBlockIndex",
    "user": {
      "login": "optout21",
      "id": 13562139,
      "node_id": "MDQ6VXNlcjEzNTYyMTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/optout21",
      "html_url": "https://github.com/optout21",
      "followers_url": "https://api.github.com/users/optout21/followers",
      "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
      "organizations_url": "https://api.github.com/users/optout21/orgs",
      "repos_url": "https://api.github.com/users/optout21/repos",
      "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/optout21/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "The skip height values, used by `CBlockIndex::BuildSkip()` and `GetSkipHeight` are not tested and not well documented. (noticed while reviewing #33515, recently merged).\r\n\r\nThe motivation is to document the skip value computation through a test.\r\n\r\nThe first commit adds a test for the properties of the distribution of skip values, namely that they have non-uniform distribution: most values are small but there are some large ones as well.\r\n\r\nThe second commit adds low-level tests to the `GetSkipHeight()` internal method. The tests are low level, thus of limited value, and the commit also touches the non-test code minimally (to make the method accessible). Therefore this commit has lower priority.\r\n",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-10-20T12:08:37Z",
    "updated_at": "2025-11-06T14:03:04Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "662e4e6c38122d218383f46143f96dffc1fd9921",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "optout21:skip-height-test2",
      "ref": "skip-height-test2",
      "sha": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1072154294,
        "node_id": "R_kgDOP-fGtg",
        "name": "bitcoin",
        "full_name": "optout21/bitcoin",
        "owner": {
          "login": "optout21",
          "id": 13562139,
          "node_id": "MDQ6VXNlcjEzNTYyMTM5",
          "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/optout21",
          "html_url": "https://github.com/optout21",
          "followers_url": "https://api.github.com/users/optout21/followers",
          "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
          "organizations_url": "https://api.github.com/users/optout21/orgs",
          "repos_url": "https://api.github.com/users/optout21/repos",
          "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/optout21/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/optout21/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/optout21/bitcoin",
        "archive_url": "https://api.github.com/repos/optout21/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/optout21/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/optout21/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/optout21/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/optout21/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/optout21/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/optout21/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/optout21/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/optout21/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/optout21/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/optout21/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/optout21/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/optout21/bitcoin/events",
        "forks_url": "https://api.github.com/repos/optout21/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/optout21/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/optout21/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/optout21/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/optout21/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/optout21/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/optout21/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/optout21/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/optout21/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/optout21/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/optout21/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/optout21/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/optout21/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/optout21/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/optout21/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/optout21/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:optout21/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/optout21/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/optout21/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/optout21/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/optout21/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/optout21/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/optout21/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/optout21/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/optout21/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/optout21/bitcoin/hooks",
        "svn_url": "https://github.com/optout21/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 251857,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-06T13:58:48Z",
        "created_at": "2025-10-08T10:33:29Z",
        "updated_at": "2025-10-08T10:33:29Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5c5704e730796c6f31e2d7891bf6334674a04219",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38164,
        "stargazers_count": 86665,
        "watchers_count": 86665,
        "size": 295721,
        "default_branch": "master",
        "open_issues_count": 742,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-05T15:04:55Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-11-06T14:41:56Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 109,
    "deletions": 1,
    "changed_files": 2,
    "commits": 2,
    "review_comments": 46,
    "comments": 8
  },
  "events": [
    {
      "event": "labeled",
      "id": 20378762485,
      "node_id": "LE_lADOABII587SiRz0zwAAAAS-qzz1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20378762485",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-20T12:08:41Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 3421799444,
      "node_id": "IC_kwDOABII587L9IQU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3421799444",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-20T12:08:43Z",
      "updated_at": "2025-11-06T13:59:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33661.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/33661#pullrequestreview-3407000419) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3421799444",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20378870736,
      "node_id": "HRFPE_lADOABII587SiRz0zwAAAAS-rOPQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20378870736",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "commit_url": "https://api.github.com/repos/optout21/bitcoin/commits/6a22013f5aae2312a4a67b78773108a72146bdc7",
      "created_at": "2025-10-20T12:15:02Z"
    },
    {
      "event": "commented",
      "id": 3423668761,
      "node_id": "IC_kwDOABII587MEQoZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3423668761",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-20T20:48:08Z",
      "updated_at": "2025-10-20T20:48:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, thanks for helping with the coverage and documentation.\r\nFor reference https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/chain.cpp.gcov.html is pretty well covered otherwise, but these tests can help with the specifics.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3423668761",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "commented",
      "id": 3425525600,
      "node_id": "IC_kwDOABII587MLV9g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3425525600",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-21T09:04:10Z",
      "updated_at": "2025-10-21T09:04:10Z",
      "author_association": "NONE",
      "body": "> For reference https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/chain.cpp.gcov.html is pretty well covered otherwise, but these tests can help with the specifics.\r\n\r\nThanks for the link! Indirectly it is tested extensively, as the skip mechanism is used while searching in the chain. However, there are no tests focusing on this specifically, and the why and how on the exact skip generation algorithm is not documented.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3425525600",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "ready_for_review",
      "id": 20620945396,
      "node_id": "RFRE_lADOABII587SiRz0zwAAAATNGqf0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20620945396",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T22:27:53Z"
    },
    {
      "event": "reviewed",
      "id": 3407000419,
      "node_id": "PRR_kwDOABII587LErNj",
      "url": null,
      "actor": null,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-03T12:33:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, during review I also understood this behavior better :)\r\nI have a few suggestions for simplification and am throwing you into the deep end by asking for a property based (fuzz) test as well to check certain invariants. Not a must-have, but seems simple enough. I also suggest simplifying the distribution test to just check for the median instead.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#pullrequestreview-3407000419",
      "submitted_at": "2025-11-03T12:33:05Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20676996208,
      "node_id": "HRFPE_lADOABII587SiRz0zwAAAATQcexw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20676996208",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "commit_url": "https://api.github.com/repos/optout21/bitcoin/commits/19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "created_at": "2025-11-03T14:56:04Z"
    },
    {
      "event": "commented",
      "id": 3480999335,
      "node_id": "IC_kwDOABII587Pe9Wn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3480999335",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T15:02:19Z",
      "updated_at": "2025-11-03T15:02:19Z",
      "author_association": "NONE",
      "body": "Review comments addressed, mostly minor:\r\n\r\n- Reduce the number of iterations to 10000 (from 30000), for faster test execution.\r\n- Add comments on choice of test inputs.\r\n- Use BOOST_REQUIRE_EQUAL or BOOST_CHECK_GT where possible.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3480999335",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "commented",
      "id": 3481005723,
      "node_id": "IC_kwDOABII587Pe-6b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3481005723",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T15:03:47Z",
      "updated_at": "2025-11-03T15:03:47Z",
      "author_association": "NONE",
      "body": "@sipa, as this is triggered by #33515 of yours, I would kindly ask for a review.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3481005723",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "mentioned",
      "id": 20677187785,
      "node_id": "MEE_lADOABII587SiRz0zwAAAATQdNjJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20677187785",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T15:03:48Z"
    },
    {
      "event": "subscribed",
      "id": 20677187811,
      "node_id": "SE_lADOABII587SiRz0zwAAAATQdNjj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20677187811",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T15:03:48Z"
    },
    {
      "event": "review_requested",
      "id": 20677932786,
      "node_id": "RRE_lADOABII587SiRz0zwAAAATQgDby",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20677932786",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T15:32:31Z",
      "requested_reviewer": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20696757049,
      "node_id": "HRFPE_lADOABII587SiRz0zwAAAATRn3M5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20696757049",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "fcf9c443d83c30bb2a073b4c1fd07f2f0ec4c8ce",
      "commit_url": "https://api.github.com/repos/optout21/bitcoin/commits/fcf9c443d83c30bb2a073b4c1fd07f2f0ec4c8ce",
      "created_at": "2025-11-04T09:35:00Z"
    },
    {
      "event": "commented",
      "id": 3484908644,
      "node_id": "IC_kwDOABII587Pt3xk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3484908644",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T09:38:26Z",
      "updated_at": "2025-11-04T09:49:59Z",
      "author_association": "NONE",
      "body": "Changes applied:\r\n- Fix lint issue\r\n- Added check on the median as well\r\n- some minor formatting\r\n",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3484908644",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20701441354,
      "node_id": "HRFPE_lADOABII587SiRz0zwAAAATR5u1K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20701441354",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "commit_url": "https://api.github.com/repos/optout21/bitcoin/commits/6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "created_at": "2025-11-04T12:23:57Z"
    },
    {
      "event": "commented",
      "id": 3485734385,
      "node_id": "IC_kwDOABII587PxBXx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3485734385",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T12:26:28Z",
      "updated_at": "2025-11-04T12:26:28Z",
      "author_association": "NONE",
      "body": "CI failed, limits of the 3rd for cycle were off; fixed\r\n\r\n```diff\r\n     int count_diff_smaller_16 = 0;\r\n     int max_diff = 0;\r\n     int total_diff = 0;\r\n-    for(int i{1}; i < n; ++i) {\r\n+    for(size_t i{0}; i < skip_diffs.size(); ++i) {\r\n         auto diff = skip_diffs[i];\r\n         if (diff < 16) {\r\n             ++count_diff_smaller_16;\r\n```",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3485734385",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    },
    {
      "event": "reviewed",
      "id": 3416668206,
      "node_id": "PRR_kwDOABII587Lpjgu",
      "url": null,
      "actor": null,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T14:06:51Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#pullrequestreview-3416668206",
      "submitted_at": "2025-11-04T14:06:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
    },
    {
      "event": "reviewed",
      "id": 3416721752,
      "node_id": "PRR_kwDOABII587LpwlY",
      "url": null,
      "actor": null,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T14:15:58Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#pullrequestreview-3416721752",
      "submitted_at": "2025-11-04T14:15:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
    },
    {
      "event": "reviewed",
      "id": 3416731921,
      "node_id": "PRR_kwDOABII587LpzER",
      "url": null,
      "actor": null,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T14:17:49Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#pullrequestreview-3416731921",
      "submitted_at": "2025-11-04T14:17:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVmOTRlOGQ0Y2NiYTQ4NGE0NjBmMTE2YTc4MTQ0OTI5NDliNWY1NzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f94e8d4ccba484a460f116a7814492949b5f571",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5f94e8d4ccba484a460f116a7814492949b5f571",
      "tree": {
        "sha": "d4601ed8df6ffd39ce36d25f9a5deb3f67ca888b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d4601ed8df6ffd39ce36d25f9a5deb3f67ca888b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0eeae4d174a41c3fc2eae41e76b929fa3114d6f3",
          "sha": "0eeae4d174a41c3fc2eae41e76b929fa3114d6f3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0eeae4d174a41c3fc2eae41e76b929fa3114d6f3"
        }
      ],
      "message": "Add test on skip heights in CBlockIndex\n\nAdd unit tests for the properties of the skip height in CBlockIndex.\nSkip heights are set by CBlockIndex::BuildSkip(), which internally\nuses the GetSkipHeight() and InvertLowestOne() methods.\nThese methods don't have unit tests and are only minimally documented.\nThe new unit test collects and analyses the distribution of the skip\ndifference numbers, and checks some properties:\nnon-uniform distribution with most values small but\nwith some large values as well.",
      "committer": {
        "name": "optout",
        "email": "13562139+optout21@users.noreply.github.com",
        "date": "2025-11-06T13:57:35Z"
      },
      "author": {
        "name": "optout",
        "email": "13562139+optout21@users.noreply.github.com",
        "date": "2025-10-18T07:43:19Z"
      },
      "sha": "5f94e8d4ccba484a460f116a7814492949b5f571"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhOTk4ZTE4ZjZkNjRmNDg1ZDRlMmQ4NWExMDI4NDc0ZmIzNTEyMGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "tree": {
        "sha": "27f73d5eca13bae945d9b793a6acc7dcf2b449ad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/27f73d5eca13bae945d9b793a6acc7dcf2b449ad"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f94e8d4ccba484a460f116a7814492949b5f571",
          "sha": "5f94e8d4ccba484a460f116a7814492949b5f571",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5f94e8d4ccba484a460f116a7814492949b5f571"
        }
      ],
      "message": "Add low-level tests for GetSkipHeight()\n\nThis internal method in chain.cpp has low and indirect test\ncoverage, and not documented well.\nA straightforward, simple, direct unit test is added.\nThe method is changed to be not static and inline, so that\nthe test can link with it.",
      "committer": {
        "name": "optout",
        "email": "13562139+optout21@users.noreply.github.com",
        "date": "2025-11-06T13:57:41Z"
      },
      "author": {
        "name": "optout",
        "email": "13562139+optout21@users.noreply.github.com",
        "date": "2025-10-18T10:44:56Z"
      },
      "sha": "ea998e18f6d64f485d4e2d85a1028474fb35120a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20760799205,
      "node_id": "HRFPE_lADOABII587SiRz0zwAAAATVcKfl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20760799205",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "commit_url": "https://api.github.com/repos/optout21/bitcoin/commits/ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "created_at": "2025-11-06T13:58:50Z"
    },
    {
      "event": "commented",
      "id": 3497405231,
      "node_id": "IC_kwDOABII587Qdisv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3497405231",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-06T14:01:26Z",
      "updated_at": "2025-11-06T14:01:26Z",
      "author_association": "NONE",
      "body": "Pushed minor fixes after comments:\r\n- simplify test assertions\r\n- simplify computing of total/avg and max (no for loop)\r\n- formatting\r\n",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#issuecomment-3497405231",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33661"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483243259",
      "pull_request_review_id": 3407000419,
      "id": 2483243259,
      "node_id": "PRRC_kwDOABII586UA0j7",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {",
      "path": "src/chain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "ðŸ‘ for the static removal, but why remove the `inline` keyword?",
      "created_at": "2025-11-01T08:50:23Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2483243259",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483243259"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483265868",
      "pull_request_review_id": 3407000419,
      "id": 2483265868,
      "node_id": "PRRC_kwDOABII586UA6FM",
      "diff_hunk": "@@ -41,6 +41,57 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 11,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "cdffd675d526bc0e1be85cfcd6b89ad1fe46cdfc",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This seems unused",
      "created_at": "2025-11-01T09:00:48Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2483265868",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483265868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486172116",
      "pull_request_review_id": 3407000419,
      "id": 2486172116,
      "node_id": "PRRC_kwDOABII586UL_nU",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {\n     if (height < 2)",
      "path": "src/chain.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: can this be `if (height <= 2)` as well? It's likely outside the scope of the change though",
      "created_at": "2025-11-03T11:34:24Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486172116",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486172116"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 80,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486181169",
      "pull_request_review_id": 3407000419,
      "id": 2486181169,
      "node_id": "PRRC_kwDOABII586UMB0x",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 21,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "we could add comments explaining the magic values:\n\\# height <= 2\n\\# powers of 2\n\\# odd/even heights\n\\# absurdly big values or whatever\n\nOtherwise it's not obvious why 4 is 0 and 5 is 1 and there is no 6 but 7 is 1 again...\n\nI need to understand why we chose these numbers, especially since the PR is meant to document the change",
      "created_at": "2025-11-03T11:38:11Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486181169",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486181169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 54,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486186460",
      "pull_request_review_id": 3407000419,
      "id": 2486186460,
      "node_id": "PRRC_kwDOABII586UMDHc",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I like the binary representation, but maybe we could use `BOOST_CHECK_EQUAL` insead (helps with the reason when they fail) and maybe we could align these to simplify finding the differences in their endings:\n```C++\n    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101000),\n                                    0b0001011101100000);\n    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101001),\n                                    0b0001011101000001);\n    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011000),\n                                    0b0110101101010000);\n    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011001),\n                                    0b0110101101000001);\n```\n\nAnd a short comment could help in drawing our attention to the ending",
      "created_at": "2025-11-03T11:40:35Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486186460",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486186460"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486188243",
      "pull_request_review_id": 3407000419,
      "id": 2486188243,
      "node_id": "PRRC_kwDOABII586UMDjT",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but",
      "path": "src/test/chain_tests.cpp",
      "position": 74,
      "original_position": 38,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "it seems to test more than non-uniformity.\nMy understanding is that you want to show that most jumps are small, right?\nIf so, maybe we don't have to be that specific, can we just check that the median jump is tiny?\n\n```C++\nBOOST_AUTO_TEST_CASE(skip_height_properties_test)\n{\n    constexpr int n{30'000};\n\n    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n    block_index.push_back(std::make_unique<CBlockIndex>());\n    for(int i{0}; i < n; ++i) {\n        auto new_index{std::make_unique<CBlockIndex>()};\n        new_index->pprev = block_index.back().get();\n        new_index->nHeight = new_index->pprev->nHeight + 1;\n        new_index->BuildSkip();\n        block_index.push_back(std::move(new_index));\n    }\n\n    std::vector<int> skip_diffs;\n    skip_diffs.reserve(n);\n    for(int i{1}; i <= n; ++i) {\n        skip_diffs.push_back(i - block_index[i]->pskip->nHeight);\n    }\n\n    std::ranges::sort(skip_diffs);\n    const int median{skip_diffs[n / 2]};\n    \n    BOOST_CHECK_LT(median, 10); // Most jumps are small\n}\n```",
      "created_at": "2025-11-03T11:41:23Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486188243",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486188243"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486192203",
      "pull_request_review_id": 3407000419,
      "id": 2486192203,
      "node_id": "PRRC_kwDOABII586UMEhL",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I need more context, how did we get to these numbers exactly?\r\nDo we really need to be this precise? Wouldn't it suffice to check that their median is low enough?",
      "created_at": "2025-11-03T11:43:08Z",
      "updated_at": "2025-11-03T12:34:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486192203",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486192203"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486214751",
      "pull_request_review_id": 3407000419,
      "id": 2486214751,
      "node_id": "PRRC_kwDOABII586UMKBf",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(int i = 1; i < n; ++i) {\n+        BOOST_CHECK(block_index[i]->nHeight == i);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 65,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "this sounds like a `BOOST_REQUIRE_EQUAL` instead",
      "created_at": "2025-11-03T11:52:40Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486214751",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486214751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486224185",
      "pull_request_review_id": 3407000419,
      "id": 2486224185,
      "node_id": "PRRC_kwDOABII586UMMU5",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 47,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "maybe this would also work\n```suggestion\n    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n    block_index.push_back(std::make_unique<CBlockIndex>());\n```",
      "created_at": "2025-11-03T11:55:43Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486224185",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486224185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": 75,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486242198",
      "pull_request_review_id": 3407000419,
      "id": 2486242198,
      "node_id": "PRRC_kwDOABII586UMQuW",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 50,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "was wondering how slow this is, but seems acceptable:\n```bash\ncmake -B build  -DCMAKE_BUILD_TYPE=Debug && cmake --build build && time ./build/bin/test_bitcoin --run_test=chain_tests/skip_height_properties_test\n...\n./build/bin/test_bitcoin --run_test=chain_tests/skip_height_properties_test  0.32s user 0.02s system 27% cpu 1.269 total \n```",
      "created_at": "2025-11-03T12:02:49Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486242198",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486242198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486256971",
      "pull_request_review_id": 3407000419,
      "id": 2486256971,
      "node_id": "PRRC_kwDOABII586UMUVL",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(int i = 1; i < n; ++i) {",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "how come we're iterating one less than before?\n\n```suggestion\n    for(int i = 1; i <= n; ++i) {\n```",
      "created_at": "2025-11-03T12:07:36Z",
      "updated_at": "2025-11-03T12:33:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486256971",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486256971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486262621",
      "pull_request_review_id": 3407000419,
      "id": 2486262621,
      "node_id": "PRRC_kwDOABII586UMVtd",
      "diff_hunk": "",
      "path": "src/chain.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can we add a fuzz test that asserts for all h > 0: `GetSkipHeight(h)` < h and [popcount](https://en.cppreference.com/w/cpp/numeric/popcount.html)(result) < [popcount](https://en.cppreference.com/w/cpp/numeric/popcount.html)(h) (and just skip 0 since that's already unit tested)?",
      "created_at": "2025-11-03T12:09:52Z",
      "updated_at": "2025-11-03T12:35:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486262621",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486262621"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 86,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486416019",
      "pull_request_review_id": 3410937114,
      "id": 2486416019,
      "node_id": "PRRC_kwDOABII586UM7KT",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {\n     if (height < 2)",
      "path": "src/chain.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486172116,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed, the input 2 also gives 0 as result. The intent may have been that got indices 0 and 1 it makes no sense to jump, for the rest follow the computation (but 2 accidentally also gives 0).\r\nIn any case, I don't want to change product behavior to the slightest in this PR.",
      "created_at": "2025-11-03T13:01:33Z",
      "updated_at": "2025-11-03T13:01:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486416019",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486416019"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 80,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486699478",
      "pull_request_review_id": 3411322792,
      "id": 2486699478,
      "node_id": "PRRC_kwDOABII586UOAXW",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(int i = 1; i < n; ++i) {",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486256971,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It doesn't make sense to check the skip for block index 0, that's why 0 is excluded.",
      "created_at": "2025-11-03T14:34:42Z",
      "updated_at": "2025-11-03T14:34:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486699478",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486699478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486708184",
      "pull_request_review_id": 3411334707,
      "id": 2486708184,
      "node_id": "PRRC_kwDOABII586UOCfY",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {",
      "path": "src/chain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2483243259,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If it's inlined, it can't be used as extern from the test :(",
      "created_at": "2025-11-03T14:37:16Z",
      "updated_at": "2025-11-03T14:37:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486708184",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486708184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486733227",
      "pull_request_review_id": 3411367909,
      "id": 2486733227,
      "node_id": "PRRC_kwDOABII586UOImr",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but",
      "path": "src/test/chain_tests.cpp",
      "position": 74,
      "original_position": 38,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486188243,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I check the avg, which is computationally easier to obtain. It would make sense to check the median as well, and maybe compare the median with the average. However, I prefer to avoid the O(N log N) complexity of the sorting.",
      "created_at": "2025-11-03T14:44:38Z",
      "updated_at": "2025-11-03T14:44:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486733227",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486733227"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486736452",
      "pull_request_review_id": 3411372069,
      "id": 2486736452,
      "node_id": "PRRC_kwDOABII586UOJZE",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 50,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486242198,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, nontheless I reduce the count from 30000 to 10000, that's also enough for the test.",
      "created_at": "2025-11-03T14:45:32Z",
      "updated_at": "2025-11-03T14:45:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486736452",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486736452"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486781519",
      "pull_request_review_id": 3411431905,
      "id": 2486781519,
      "node_id": "PRRC_kwDOABII586UOUZP",
      "diff_hunk": "@@ -41,6 +41,57 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 11,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "cdffd675d526bc0e1be85cfcd6b89ad1fe46cdfc",
      "in_reply_to_id": 2483265868,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Removed",
      "created_at": "2025-11-03T14:58:08Z",
      "updated_at": "2025-11-03T14:58:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486781519",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486781519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486783350",
      "pull_request_review_id": 3411434435,
      "id": 2486783350,
      "node_id": "PRRC_kwDOABII586UOU12",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 21,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486181169,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I've adjusted the numbers used and added comments",
      "created_at": "2025-11-03T14:58:45Z",
      "updated_at": "2025-11-03T14:58:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486783350",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486783350"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 54,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486784728",
      "pull_request_review_id": 3411436566,
      "id": 2486784728,
      "node_id": "PRRC_kwDOABII586UOVLY",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486186460,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Changed to `BOOST_CHECK_EQUAL`, added comments",
      "created_at": "2025-11-03T14:59:13Z",
      "updated_at": "2025-11-03T14:59:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486784728",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486784728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486787928",
      "pull_request_review_id": 3411441256,
      "id": 2486787928,
      "node_id": "PRRC_kwDOABII586UOV9Y",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 47,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486224185,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-11-03T15:00:15Z",
      "updated_at": "2025-11-03T15:00:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2486787928",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486787928"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": 75,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487011524",
      "pull_request_review_id": 3411731190,
      "id": 2487011524,
      "node_id": "PRRC_kwDOABII586UPMjE",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(int i = 1; i < n; ++i) {",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486256971,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "yeah, but why is n skipped (see my suggested code)",
      "created_at": "2025-11-03T16:01:23Z",
      "updated_at": "2025-11-03T16:01:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487011524",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487011524"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487015862",
      "pull_request_review_id": 3411737545,
      "id": 2487015862,
      "node_id": "PRRC_kwDOABII586UPNm2",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {",
      "path": "src/chain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2483243259,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "how so, what's the failure you're seeing? It was working for me locally ",
      "created_at": "2025-11-03T16:02:35Z",
      "updated_at": "2025-11-03T16:02:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487015862",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487015862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487024773",
      "pull_request_review_id": 3411750247,
      "id": 2487024773,
      "node_id": "PRRC_kwDOABII586UPPyF",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but",
      "path": "src/test/chain_tests.cpp",
      "position": 74,
      "original_position": 38,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486188243,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "median is less sensitive to outliers  - and nlogn is fine in tests",
      "created_at": "2025-11-03T16:05:13Z",
      "updated_at": "2025-11-03T16:05:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487024773",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487024773"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487089474",
      "pull_request_review_id": 3411848203,
      "id": 2487089474,
      "node_id": "PRRC_kwDOABII586UPflC",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {",
      "path": "src/chain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2483243259,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If `GetSkipHeight` is `inline`, I get the error:\r\n\r\n```\r\n[ 75%] Built target bitcoin-node\r\n/usr/bin/ld: CMakeFiles/test_bitcoin.dir/chain_tests.cpp.o: in function `chain_tests::get_skip_height_test::test_method()':\r\n/home/bitcoin/bitcoin-core/build/src/test/./test/chain_tests.cpp:50:(.text+0x68b): undefined reference to `GetSkipHeight(int)'\r\n/usr/bin/ld: /home/bitcoin/bitcoin-core/build/src/test/./test/chain_tests.cpp:51:(.text+0x7cf): undefined reference to `GetSkipHeight(int)'\r\n/usr/bin/ld: /home/bitcoin/bitcoin-core/build/src/test/./test/chain_tests.cpp:52:(.text+0x90c): undefined reference to `GetSkipHeight(int)'\r\n/usr/bin/ld: /home/bitcoin/bitcoin-core/build/src/test/./test/chain_tests.cpp:53:(.text+0xa49): undefined reference to `GetSkipHeight(int)'\r\n/usr/bin/ld: /home/bitcoin/bitcoin-core/build/src/test/./test/chain_tests.cpp:54:(.text+0xb86): undefined reference to `GetSkipHeight(int)'\r\n/usr/bin/ld: CMakeFiles/test_bitcoin.dir/chain_tests.cpp.o:/home/bitcoin/bitcoin-core/build/src/test/./test/chain_tests.cpp:55: more undefined references to `GetSkipHeight(int)' follow\r\ncollect2: error: ld returned 1 exit status\r\ngmake[2]: *** [src/test/CMakeFiles/test_bitcoin.dir/build.make:2463: bin/test_bitcoin] Error 1\r\n```\r\n\r\nInlined method is not included in the obj file as a method.\r\nThe solution would be to expose it through the header file, but I did not want to make that change just for the sake of the test.",
      "created_at": "2025-11-03T16:22:07Z",
      "updated_at": "2025-11-03T16:22:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487089474",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487089474"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487099898",
      "pull_request_review_id": 3411862703,
      "id": 2487099898,
      "node_id": "PRRC_kwDOABII586UPiH6",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(int i = 1; i < n; ++i) {",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486256971,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Oh, I see. There are in fact n+1 elements. Will change.",
      "created_at": "2025-11-03T16:25:08Z",
      "updated_at": "2025-11-03T16:25:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487099898",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487099898"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487919199",
      "pull_request_review_id": 3413018685,
      "id": 2487919199,
      "node_id": "PRRC_kwDOABII586USqJf",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486186460,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Formatting them to be on top of each other as the above example shows allows easier bit comparison, otherwise the binary representation doesn't really help",
      "created_at": "2025-11-03T21:36:05Z",
      "updated_at": "2025-11-03T21:36:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487919199",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487919199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487946786",
      "pull_request_review_id": 3413053949,
      "id": 2487946786,
      "node_id": "PRRC_kwDOABII586USw4i",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 47,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486224185,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I see you've moved it as well, clang complains with:\r\n> Clangd: Moving a temporary object prevents copy elision",
      "created_at": "2025-11-03T21:49:50Z",
      "updated_at": "2025-11-03T21:49:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487946786",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487946786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": 75,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487950675",
      "pull_request_review_id": 3413058460,
      "id": 2487950675,
      "node_id": "PRRC_kwDOABII586USx1T",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 50,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486242198,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: consider formatting it as `10'000` for readability",
      "created_at": "2025-11-03T21:50:56Z",
      "updated_at": "2025-11-03T21:50:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487950675",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487950675"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487956680",
      "pull_request_review_id": 3413065209,
      "id": 2487956680,
      "node_id": "PRRC_kwDOABII586USzTI",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {",
      "path": "src/chain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2483243259,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "interesting, it does work for me, but inline might indeed be problematic in this case.\r\nRemoving it should be fine, please resolve this comment.",
      "created_at": "2025-11-03T21:53:36Z",
      "updated_at": "2025-11-03T21:53:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2487956680",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2487956680"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489540239",
      "pull_request_review_id": 3415155636,
      "id": 2489540239,
      "node_id": "PRRC_kwDOABII586UY16P",
      "diff_hunk": "@@ -76,7 +76,7 @@ CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n int static inline InvertLowestOne(int n) { return n & (n - 1); }\n \n /** Compute what height to jump back to with the CBlockIndex::pskip pointer. */\n-int static inline GetSkipHeight(int height) {\n+int GetSkipHeight(int height) {",
      "path": "src/chain.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2483243259,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed. Inline is only a hint, not crucial for modern compliers.",
      "created_at": "2025-11-04T09:39:01Z",
      "updated_at": "2025-11-04T09:39:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489540239",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489540239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489550775",
      "pull_request_review_id": 3415171019,
      "id": 2489550775,
      "node_id": "PRRC_kwDOABII586UY4e3",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486186460,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I did that for the longer values, for shorter values with only a few ones is not really need.",
      "created_at": "2025-11-04T09:40:46Z",
      "updated_at": "2025-11-04T09:40:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489550775",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489550775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489552705",
      "pull_request_review_id": 3415173619,
      "id": 2489552705,
      "node_id": "PRRC_kwDOABII586UY49B",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but",
      "path": "src/test/chain_tests.cpp",
      "position": 74,
      "original_position": 38,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486188243,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added median check as well. Much lower than the avg!",
      "created_at": "2025-11-04T09:41:07Z",
      "updated_at": "2025-11-04T09:41:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489552705",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489552705"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489553665",
      "pull_request_review_id": 3415174789,
      "id": 2489553665,
      "node_id": "PRRC_kwDOABII586UY5MB",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486192203,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added explanatory comments",
      "created_at": "2025-11-04T09:41:22Z",
      "updated_at": "2025-11-04T09:41:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489553665",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489553665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489555855",
      "pull_request_review_id": 3415177769,
      "id": 2489555855,
      "node_id": "PRRC_kwDOABII586UY5uP",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 47,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486224185,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Oops, fixed!",
      "created_at": "2025-11-04T09:41:41Z",
      "updated_at": "2025-11-04T09:41:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489555855",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489555855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": 75,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489557279",
      "pull_request_review_id": 3415179572,
      "id": 2489557279,
      "node_id": "PRRC_kwDOABII586UY6Ef",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 50,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486242198,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-11-04T09:41:53Z",
      "updated_at": "2025-11-04T09:41:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489557279",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489557279"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489560183",
      "pull_request_review_id": 3415183031,
      "id": 2489560183,
      "node_id": "PRRC_kwDOABII586UY6x3",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    FastRandomContext ctx;\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+\n+    // Create genesis block\n+    auto genesis = std::make_unique<CBlockIndex>();\n+    genesis->nHeight = 0;\n+    block_index.push_back(std::move(genesis));\n+\n+    // Build a chain\n+    const auto n{30000};\n+    for(int i = 0; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Analyze the diff (in height) of each element and its pskip\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(int i = 1; i < n; ++i) {",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 64,
      "commit_id": "19b87a8e9058f94685dc68e7b9090c2d6ccb960f",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486256971,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "All cycles go from 1 to n-1; 0 is the genesis.",
      "created_at": "2025-11-04T09:42:15Z",
      "updated_at": "2025-11-04T09:42:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489560183",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489560183"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489569251",
      "pull_request_review_id": 3415194147,
      "id": 2489569251,
      "node_id": "PRRC_kwDOABII586UY8_j",
      "diff_hunk": "",
      "path": "src/chain.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486262621,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "A fuzz test for this functionality (essentially a one-liner) seems a bit too much.",
      "created_at": "2025-11-04T09:43:33Z",
      "updated_at": "2025-11-04T09:43:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2489569251",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2489569251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 86,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490663038",
      "pull_request_review_id": 3416668206,
      "id": 2490663038,
      "node_id": "PRRC_kwDOABII586UdIB-",
      "diff_hunk": "@@ -41,6 +43,113 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    // Even values: the rightmost bit is zeroed\n+    // Test with variouse even values with at least 2 bits set",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "original_commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "in_reply_to_id": null,
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\r\n    variouse -> various [spelling error in comment making the word invalid]\r\n",
      "created_at": "2025-11-04T14:06:51Z",
      "updated_at": "2025-11-04T14:06:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2490663038",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490663038"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490689248",
      "pull_request_review_id": 3416706221,
      "id": 2490689248,
      "node_id": "PRRC_kwDOABII586UdObg",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 15,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486186460,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can we do it for the shorter ones as well? it's easier to compare them and more consistent with the rest",
      "created_at": "2025-11-04T14:13:29Z",
      "updated_at": "2025-11-04T14:13:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2490689248",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490689248"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490696786",
      "pull_request_review_id": 3416717373,
      "id": 2490696786,
      "node_id": "PRRC_kwDOABII586UdQRS",
      "diff_hunk": "@@ -41,6 +43,78 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101000) == 0b0001011101100000);\n+    BOOST_CHECK(GetSkipHeight(0b0001011101101001) == 0b0001011101000001);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011000) == 0b0110101101010000);\n+    BOOST_CHECK(GetSkipHeight(0b0110101101011001) == 0b0110101101000001);\n+    BOOST_CHECK(GetSkipHeight(0) == 0);\n+    BOOST_CHECK(GetSkipHeight(1) == 0);\n+    BOOST_CHECK(GetSkipHeight(2) == 0);\n+    BOOST_CHECK(GetSkipHeight(3) == 1);\n+    BOOST_CHECK(GetSkipHeight(4) == 0);\n+    BOOST_CHECK(GetSkipHeight(5) == 1);\n+    BOOST_CHECK(GetSkipHeight(7) == 1);\n+    BOOST_CHECK(GetSkipHeight(8) == 0);\n+    BOOST_CHECK(GetSkipHeight(15) == 9);\n+    BOOST_CHECK(GetSkipHeight(16) == 0);\n+    BOOST_CHECK(GetSkipHeight(17) == 1);\n+    BOOST_CHECK(GetSkipHeight(256) == 0);\n+    BOOST_CHECK(GetSkipHeight(65536) == 0);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but",
      "path": "src/test/chain_tests.cpp",
      "position": 74,
      "original_position": 38,
      "commit_id": "ea998e18f6d64f485d4e2d85a1028474fb35120a",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486188243,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The test became more complicated than it was before (which was my main critique of it, seems arbitrary).\r\nCould we simplify it? I think we're testing too many things, a single median check should likely suffice in my opinion.",
      "created_at": "2025-11-04T14:15:18Z",
      "updated_at": "2025-11-04T14:15:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2490696786",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490696786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490699922",
      "pull_request_review_id": 3416721752,
      "id": 2490699922,
      "node_id": "PRRC_kwDOABII586UdRCS",
      "diff_hunk": "@@ -41,6 +43,113 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    // Even values: the rightmost bit is zeroed\n+    // Test with variouse even values with at least 2 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010010), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00100010), 0b00100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b01000010), 0b01000000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010100), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00011000), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101010), 0b10101000);\n+    // Odd values: the 2nd and 3rd bits are zeroed\n+    // Test with various odd values with at least 4 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10100011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b11000011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010101), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10011001), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101011), 0b10100001);\n+    // Some longer random values (even and odd)\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101000),\n+                                    0b0001011101100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101001),\n+                                    0b0001011101000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011000),\n+                                    0b0110101101010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011001),\n+                                    0b0110101101000001);\n+    // All values 0--10",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 40,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "original_commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "what does `--` mean here?",
      "created_at": "2025-11-04T14:15:58Z",
      "updated_at": "2025-11-04T14:15:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2490699922",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490699922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490707151",
      "pull_request_review_id": 3416731921,
      "id": 2490707151,
      "node_id": "PRRC_kwDOABII586UdSzP",
      "diff_hunk": "@@ -41,6 +43,113 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    // Even values: the rightmost bit is zeroed\n+    // Test with variouse even values with at least 2 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010010), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00100010), 0b00100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b01000010), 0b01000000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010100), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00011000), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101010), 0b10101000);\n+    // Odd values: the 2nd and 3rd bits are zeroed\n+    // Test with various odd values with at least 4 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10100011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b11000011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010101), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10011001), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101011), 0b10100001);\n+    // Some longer random values (even and odd)\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101000),\n+                                    0b0001011101100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101001),\n+                                    0b0001011101000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011000),\n+                                    0b0110101101010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011001),\n+                                    0b0110101101000001);\n+    // All values 0--10\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(1), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(2), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(3), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(4), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(5), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(6), 4);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(7), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(8), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(9), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(10), 8);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    const auto n{10'000};\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+    block_index.reserve(n);\n+    // Create genesis block\n+    block_index.push_back(std::make_unique<CBlockIndex>());\n+    // Build a chain\n+    for(int i{1}; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Collect the diff (in height) of each element and its pskip\n+    std::vector<int> skip_diffs;\n+    skip_diffs.reserve(n);\n+    for(int i{1}; i < n; ++i) {\n+        BOOST_REQUIRE_EQUAL(block_index[i]->nHeight, i);\n+        auto skip_height = block_index[i]->pskip->nHeight;\n+        BOOST_CHECK(skip_height <= i && skip_height >= 0);\n+        skip_diffs.push_back(i - skip_height);\n+    }\n+\n+    // Analyze the diffs\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(size_t i{0}; i < skip_diffs.size(); ++i) {\n+        auto diff = skip_diffs[i];\n+        if (diff < 16) {\n+            ++count_diff_smaller_16;\n+        }\n+        max_diff = diff > max_diff ? diff : max_diff;\n+        total_diff += diff;\n+    }\n+    auto avg = double(total_diff) / double(n);\n+    // Compute the median\n+    std::ranges::sort(skip_diffs);\n+    const int median{skip_diffs[n / 2]};\n+\n+    // Assert some parameters of the distribution\n+    // Values picked are rough to show proportions,\n+    // but general enough to be resilient to the exact test\n+    // details and algorithm\n+\n+    // The median skip diff is lower than the average\n+    BOOST_CHECK_LT(median, avg);\n+    // Most skip diffs are small (more than 67% are below 16):",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 110,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "original_commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't understand where `16` and the `67%` come from.\nCan we just keep the very last check of the median instead?",
      "created_at": "2025-11-04T14:17:49Z",
      "updated_at": "2025-11-04T14:17:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2490707151",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490707151"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 143,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490708490",
      "pull_request_review_id": 3416733793,
      "id": 2490708490,
      "node_id": "PRRC_kwDOABII586UdTIK",
      "diff_hunk": "",
      "path": "src/chain.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "original_commit_id": "6a22013f5aae2312a4a67b78773108a72146bdc7",
      "in_reply_to_id": 2486262621,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "k, please resolve the comment",
      "created_at": "2025-11-04T14:18:11Z",
      "updated_at": "2025-11-04T14:18:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2490708490",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490708490"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 86,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2499080199",
      "pull_request_review_id": 3428340889,
      "id": 2499080199,
      "node_id": "PRRC_kwDOABII586U9PAH",
      "diff_hunk": "@@ -41,6 +43,113 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    // Even values: the rightmost bit is zeroed\n+    // Test with variouse even values with at least 2 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010010), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00100010), 0b00100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b01000010), 0b01000000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010100), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00011000), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101010), 0b10101000);\n+    // Odd values: the 2nd and 3rd bits are zeroed\n+    // Test with various odd values with at least 4 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10100011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b11000011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010101), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10011001), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101011), 0b10100001);\n+    // Some longer random values (even and odd)\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101000),\n+                                    0b0001011101100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101001),\n+                                    0b0001011101000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011000),\n+                                    0b0110101101010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011001),\n+                                    0b0110101101000001);\n+    // All values 0--10",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 40,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "original_commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "in_reply_to_id": 2490699922,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\"0--10\" meant \"from 0 to 10 inclusive\". Changed to \"0-10\" to avoid parsing issues.",
      "created_at": "2025-11-06T14:02:32Z",
      "updated_at": "2025-11-06T14:02:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2499080199",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2499080199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2499081771",
      "pull_request_review_id": 3428343129,
      "id": 2499081771,
      "node_id": "PRRC_kwDOABII586U9PYr",
      "diff_hunk": "@@ -41,6 +43,113 @@ const CBlockIndex* NaiveLastCommonAncestor(const CBlockIndex* a, const CBlockInd\n \n } // namespace\n \n+BOOST_AUTO_TEST_CASE(get_skip_height_test)\n+{\n+    // Even values: the rightmost bit is zeroed\n+    // Test with variouse even values with at least 2 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010010), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00100010), 0b00100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b01000010), 0b01000000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00010100), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b00011000), 0b00010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101010), 0b10101000);\n+    // Odd values: the 2nd and 3rd bits are zeroed\n+    // Test with various odd values with at least 4 bits set\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10100011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b11000011), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10010101), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10011001), 0b10000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b10101011), 0b10100001);\n+    // Some longer random values (even and odd)\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101000),\n+                                    0b0001011101100000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0001011101101001),\n+                                    0b0001011101000001);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011000),\n+                                    0b0110101101010000);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0b0110101101011001),\n+                                    0b0110101101000001);\n+    // All values 0--10\n+    BOOST_CHECK_EQUAL(GetSkipHeight(0), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(1), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(2), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(3), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(4), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(5), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(6), 4);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(7), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(8), 0);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(9), 1);\n+    BOOST_CHECK_EQUAL(GetSkipHeight(10), 8);\n+}\n+\n+BOOST_AUTO_TEST_CASE(skip_height_properties_test)\n+{\n+    // The test collects and analyses the distribution of the\n+    // skip difference numbers, and checks some properties:\n+    // non-uniform distribution with most values small but\n+    // with some large values as well.\n+\n+    const auto n{10'000};\n+    std::vector<std::unique_ptr<CBlockIndex>> block_index;\n+    block_index.reserve(n);\n+    // Create genesis block\n+    block_index.push_back(std::make_unique<CBlockIndex>());\n+    // Build a chain\n+    for(int i{1}; i < n; ++i) {\n+        auto new_index = std::make_unique<CBlockIndex>();\n+        new_index->pprev = block_index.back().get();\n+        BOOST_CHECK(new_index->pprev);\n+        new_index->nHeight = new_index->pprev->nHeight + 1;\n+        new_index->BuildSkip();\n+        block_index.push_back(std::move(new_index));\n+    }\n+\n+    // Collect the diff (in height) of each element and its pskip\n+    std::vector<int> skip_diffs;\n+    skip_diffs.reserve(n);\n+    for(int i{1}; i < n; ++i) {\n+        BOOST_REQUIRE_EQUAL(block_index[i]->nHeight, i);\n+        auto skip_height = block_index[i]->pskip->nHeight;\n+        BOOST_CHECK(skip_height <= i && skip_height >= 0);\n+        skip_diffs.push_back(i - skip_height);\n+    }\n+\n+    // Analyze the diffs\n+    int count_diff_smaller_16 = 0;\n+    int max_diff = 0;\n+    int total_diff = 0;\n+    for(size_t i{0}; i < skip_diffs.size(); ++i) {\n+        auto diff = skip_diffs[i];\n+        if (diff < 16) {\n+            ++count_diff_smaller_16;\n+        }\n+        max_diff = diff > max_diff ? diff : max_diff;\n+        total_diff += diff;\n+    }\n+    auto avg = double(total_diff) / double(n);\n+    // Compute the median\n+    std::ranges::sort(skip_diffs);\n+    const int median{skip_diffs[n / 2]};\n+\n+    // Assert some parameters of the distribution\n+    // Values picked are rough to show proportions,\n+    // but general enough to be resilient to the exact test\n+    // details and algorithm\n+\n+    // The median skip diff is lower than the average\n+    BOOST_CHECK_LT(median, avg);\n+    // Most skip diffs are small (more than 67% are below 16):",
      "path": "src/test/chain_tests.cpp",
      "position": 1,
      "original_position": 110,
      "commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "original_commit_id": "6adafaa721ae8426b0ad3c511712f5c2757d01ec",
      "in_reply_to_id": 2490707151,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The checks have been simplified, usage of \"magic numbers\" reduced.",
      "created_at": "2025-11-06T14:03:04Z",
      "updated_at": "2025-11-06T14:03:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33661#discussion_r2499081771",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2499081771"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33661"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 143,
      "side": "RIGHT"
    }
  ]
}