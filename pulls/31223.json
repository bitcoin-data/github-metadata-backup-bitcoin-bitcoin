{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223",
    "id": 2163643091,
    "node_id": "PR_kwDOABII586A9pLT",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31223",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31223.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31223.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
    "number": 31223,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "net, init: derive default onion port if a user specified a -port",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This resolves #31133 (setups with multiple local nodes each using a different `-port` no longer working with v28.0, see the issue description for more details) by deriving the default onion listening port to be the value specified by `-port` incremented by 1 (idea by vasild / laanwj).\r\nNote that with this fix, the chosen `-port` values of two local nodes cannot be adjacent, otherwise there will be port collisions again.\r\n\r\nFrom the discussion in the linked issue, this was the most popular option, followed by doing nothing and telling affected users to change their setups to use `-bind` instead of `-port`. But more opinions are certainly welcome!\r\n\r\nI think that if we decide to do something about the problem described in the issue, we should do so soon (in 28.1.), so I opened this PR.\r\nFixes #31133",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 7385890064,
        "node_id": "LA_kwDOABII588AAAABuDu9EA",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20backport%20(28.x)",
        "name": "Needs backport (28.x)",
        "description": "",
        "color": "dd7200",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/70",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/70",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/70/labels",
      "id": 11766653,
      "node_id": "MI_kwDOABII584As4t9",
      "number": 70,
      "state": "open",
      "title": "28.1",
      "description": "",
      "creator": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "open_issues": 5,
      "closed_issues": 0,
      "created_at": "2024-10-21T08:35:32Z",
      "updated_at": "2024-11-06T10:28:56Z"
    },
    "created_at": "2024-11-05T18:01:38Z",
    "updated_at": "2024-11-17T01:44:07Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "73ef2473370286fc3891ca79093e1d5639fbeb95",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "mzumsande:202410_portplus1",
      "ref": "202410_portplus1",
      "sha": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 187673073,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODc2NzMwNzM=",
        "name": "bitcoin",
        "full_name": "mzumsande/bitcoin",
        "owner": {
          "login": "mzumsande",
          "id": 48763452,
          "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
          "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/mzumsande",
          "html_url": "https://github.com/mzumsande",
          "followers_url": "https://api.github.com/users/mzumsande/followers",
          "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
          "organizations_url": "https://api.github.com/users/mzumsande/orgs",
          "repos_url": "https://api.github.com/users/mzumsande/repos",
          "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/mzumsande/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/mzumsande/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/mzumsande/bitcoin",
        "archive_url": "https://api.github.com/repos/mzumsande/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/mzumsande/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/mzumsande/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/mzumsande/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/mzumsande/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/mzumsande/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/mzumsande/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/mzumsande/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/mzumsande/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/mzumsande/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/mzumsande/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/mzumsande/bitcoin/events",
        "forks_url": "https://api.github.com/repos/mzumsande/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/mzumsande/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/mzumsande/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/mzumsande/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/mzumsande/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/mzumsande/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/mzumsande/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/mzumsande/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/mzumsande/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/mzumsande/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/mzumsande/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/mzumsande/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/mzumsande/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:mzumsande/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/mzumsande/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/mzumsande/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/mzumsande/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/mzumsande/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/mzumsande/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/mzumsande/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/mzumsande/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/mzumsande/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/mzumsande/bitcoin/hooks",
        "svn_url": "https://github.com/mzumsande/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 252440,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-15T21:29:01Z",
        "created_at": "2019-05-20T16:03:10Z",
        "updated_at": "2024-09-24T20:49:23Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ccc2d3abcd39c64a78e366f3e4794de729155e9e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36374,
        "stargazers_count": 79562,
        "watchers_count": 79562,
        "size": 272357,
        "default_branch": "master",
        "open_issues_count": 641,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-15T14:53:26Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-11-17T01:51:24Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 94,
    "deletions": 19,
    "changed_files": 9,
    "commits": 3,
    "review_comments": 15,
    "comments": 8
  },
  "events": [
    {
      "event": "commented",
      "id": 2457839577,
      "node_id": "IC_kwDOABII586Sf6fZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2457839577",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-05T18:01:42Z",
      "updated_at": "2024-11-17T01:44:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31223.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/31223#pullrequestreview-2440835235) |\n| Concept ACK | [Christewart](https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2457898255), [laanwj](https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2459213686), [i-am-yuvi](https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2463949135) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31260](https://github.com/bitcoin/bitcoin/pull/31260) (scripted-diff: Type-safe settings retrieval by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2457839577",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "referenced",
      "id": 15124655819,
      "node_id": "REFE_lADOABII586dIDS-zwAAAAOFf-7L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15124655819",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a0be9a6b080c7ed70125240ebdb1d87a21a11ea9",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/a0be9a6b080c7ed70125240ebdb1d87a21a11ea9",
      "created_at": "2024-11-05T18:06:37Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15124655944,
      "node_id": "HRFPE_lADOABII586dIDS-zwAAAAOFf-9I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15124655944",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-05T18:06:38Z"
    },
    {
      "event": "commented",
      "id": 2457898255,
      "node_id": "IC_kwDOABII586SgI0P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2457898255",
      "actor": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-05T18:35:26Z",
      "updated_at": "2024-11-05T18:35:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "concept ACK",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2457898255",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "reviewed",
      "id": 2417053413,
      "node_id": "PRR_kwDOABII586QEU7l",
      "url": null,
      "actor": null,
      "commit_id": "a0be9a6b080c7ed70125240ebdb1d87a21a11ea9",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK\r\n\r\nThis seems like a reasonable and straightforward way to alleviate the issue.\r\n\r\nSeemed to work nicely with two node instances run as follows:\r\n```\r\nbuild/src/bitcoind -port=11000 -rpcport=11100 -datadir=/mnt/tmp/n1/\r\n```\r\n```\r\nbuild/src/bitcoind -port=12000 -rpcport=12100 -datadir=/mnt/tmp/n2/\r\n```\r\n\r\n```\r\nss -tulpn\r\n...\r\n\r\n... 127.0.0.1:11100                    0.0.0.0:*           users:((\"bitcoind\",pid=192480,fd=12))       \r\n... 127.0.0.1:11001                    0.0.0.0:*           users:((\"bitcoind\",pid=192480,fd=29))       \r\n... 127.0.0.1:12100                    0.0.0.0:*           users:((\"bitcoind\",pid=192511,fd=12))       \r\n... 127.0.0.1:12001                    0.0.0.0:*           users:((\"bitcoind\",pid=192511,fd=29))                                                         \r\n... 0.0.0.0:11000                    0.0.0.0:*           users:((\"bitcoind\",pid=192480,fd=32))       \r\n... 0.0.0.0:12000                    0.0.0.0:*           users:((\"bitcoind\",pid=192511,fd=32))\r\n\r\n...\r\n```",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#pullrequestreview-2417053413",
      "submitted_at": "2024-11-06T01:49:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
    },
    {
      "event": "commented",
      "id": 2459213686,
      "node_id": "IC_kwDOABII586SlJ92",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2459213686",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-06T10:15:48Z",
      "updated_at": "2024-11-06T10:15:48Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2459213686",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "labeled",
      "id": 15145573436,
      "node_id": "LE_lADOABII586dIDS-zwAAAAOGvxw8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15145573436",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-06T10:16:01Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "milestoned",
      "id": 15146024368,
      "node_id": "MIE_lADOABII586dIDS-zwAAAAOGxf2w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15146024368",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-06T10:28:56Z",
      "milestone": {
        "title": "28.1"
      }
    },
    {
      "event": "labeled",
      "id": 15146046136,
      "node_id": "LE_lADOABII586dIDS-zwAAAAOGxlK4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15146046136",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-06T10:29:19Z",
      "label": {
        "name": "Needs backport (28.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "referenced",
      "id": 15152757455,
      "node_id": "REFE_lADOABII586dIDS-zwAAAAOHLLrP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15152757455",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "created_at": "2024-11-06T15:25:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15152757698,
      "node_id": "HRFPE_lADOABII586dIDS-zwAAAAOHLLvC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15152757698",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-06T15:25:35Z"
    },
    {
      "event": "reviewed",
      "id": 2418908916,
      "node_id": "PRR_kwDOABII586QLZ70",
      "url": null,
      "actor": null,
      "commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Another alternative: don't listen for Tor on regtest by default (were all reports for this for regtest?).\r\n\r\nWhat about setups that use e.g. `-port=5000` and have a manually configured the Tor hidden service in `torrc` that redirects to `127.0.0.1:8334`? E.g.:\r\n\r\n```\r\nHiddenServiceDir /var/db/tor/myservice/\r\nHiddenServiceVersion 3\r\nHiddenServicePort 8333 127.0.0.1:8334\r\n```\r\n\r\nThis change would _silently_ break those setups - because we will now be listening on `127.0.0.1:5001` and other peers that try to connect to the node will get a failure because the Tor router gets connection refused on `127.0.0.1:8334` and this may remain unnoticed for a long time.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#pullrequestreview-2418908916",
      "submitted_at": "2024-11-06T17:47:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
    },
    {
      "event": "commented",
      "id": 2463949135,
      "node_id": "IC_kwDOABII586S3OFP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2463949135",
      "actor": {
        "login": "i-am-yuvi",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/i-am-yuvi",
        "html_url": "https://github.com/i-am-yuvi",
        "followers_url": "https://api.github.com/users/i-am-yuvi/followers",
        "following_url": "https://api.github.com/users/i-am-yuvi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/i-am-yuvi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/i-am-yuvi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/i-am-yuvi/subscriptions",
        "organizations_url": "https://api.github.com/users/i-am-yuvi/orgs",
        "repos_url": "https://api.github.com/users/i-am-yuvi/repos",
        "events_url": "https://api.github.com/users/i-am-yuvi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/i-am-yuvi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-08T07:28:02Z",
      "updated_at": "2024-11-08T07:28:02Z",
      "author_association": "NONE",
      "body": "Concept ACK ",
      "user": {
        "login": "i-am-yuvi",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/i-am-yuvi",
        "html_url": "https://github.com/i-am-yuvi",
        "followers_url": "https://api.github.com/users/i-am-yuvi/followers",
        "following_url": "https://api.github.com/users/i-am-yuvi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/i-am-yuvi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/i-am-yuvi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/i-am-yuvi/subscriptions",
        "organizations_url": "https://api.github.com/users/i-am-yuvi/orgs",
        "repos_url": "https://api.github.com/users/i-am-yuvi/repos",
        "events_url": "https://api.github.com/users/i-am-yuvi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/i-am-yuvi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2463949135",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "reviewed",
      "id": 2424908328,
      "node_id": "PRR_kwDOABII586QiSoo",
      "url": null,
      "actor": null,
      "commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": ">Another alternative: don't listen for Tor on regtest by default (were all reports for this for regtest?).\r\n\r\nI don't know, but I could see people / orgs having local setups with multiple nodes on mainnet, e.g. with one node facing random peers from the internet/allowing inbounds, and others that only connect to local trusted peers. In general, I don't like regtest-specific rules so I would see them as a last resort if nothing else works.\r\n\r\n> What about setups that use e.g. -port=5000 and have a manually configured the Tor hidden service in torrc that redirects to 127.0.0.1:8334?\r\n\r\nGood point, I agree that this is a downside of the port +1 approach. I'm really not sure how widespread this kind of behavior is, at least our tor.md doesn't recomment using `-port` for anything related to tor.\r\n\r\nHaven't pushed any changes yet, will do a bit more testing for vasild's suggested change / also look into a functional test next week.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#pullrequestreview-2424908328",
      "submitted_at": "2024-11-08T22:45:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
    },
    {
      "event": "commented",
      "id": 2466206753,
      "node_id": "IC_kwDOABII586S_1Qh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2466206753",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T13:01:21Z",
      "updated_at": "2024-11-09T13:12:37Z",
      "author_association": "MEMBER",
      "body": "> Another alternative: don't listen for Tor on regtest by default (were all reports for this for regtest?).\r\n\r\nAgree with @mzumsande in that i don't particularly like this; remember that regtest is primarily for testing mainnet behavior (and mainnet code paths) in our functional tests, so we want the behavior to be as close to that as possible. Every extra flag needed makes for more test-only code.\r\n\r\n> What about setups that use e.g. -port=5000 and have a manually configured the Tor hidden service in torrc that redirects to 127.0.0.1:8334?\r\n\r\n It's important to make this clear in the release notes. They'll either have to update their Tor configuation, or specify an explicit torbind on 8334 using `-bind`. \r\n\r\nAll in all i think this is much better, and more expected, behavior than a hardcoded, unchangable port.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2466206753",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "mentioned",
      "id": 15238117025,
      "node_id": "MEE_lADOABII586dIDS-zwAAAAOMQzah",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15238117025",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T13:01:22Z"
    },
    {
      "event": "subscribed",
      "id": 15238117028,
      "node_id": "SE_lADOABII586dIDS-zwAAAAOMQzak",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15238117028",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T13:01:22Z"
    },
    {
      "event": "commented",
      "id": 2470680219,
      "node_id": "IC_kwDOABII586TQ5ab",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2470680219",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-12T14:26:23Z",
      "updated_at": "2024-11-12T14:26:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It's important to make this clear in the release notes.\r\n\r\nNote that the problem this PR is trying to resolve has a release note and an easy workaround. We are here because some people (many?) didn't read the release notes even after encountering the problem (second bitcoind refuses to start because of port collision). A startup failure is an error that cannot be ignored. Whereas a silent breakage of the hidden service could remain unnoticed for a long time - one would have to check the number of incoming Tor connections, wonder why they are 0 over long period of time and investigate... I just wonder if the cure (this PR) can turn out to be worse than the disease.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2470680219",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBlMmIxMmI5MmEyOGEyOTQ5ZTc1YmY1MGYzMTU2M2Y1MmU2NDdkNmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e2b12b92a28a2949e75bf50f31563f52e647d6e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0e2b12b92a28a2949e75bf50f31563f52e647d6e",
      "tree": {
        "sha": "d87c4166db67e29d80ae13fe199ec5ce9007e1cb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d87c4166db67e29d80ae13fe199ec5ce9007e1cb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e546b4e1a0c5f8db398dc0178de3404c1337d97f",
          "sha": "e546b4e1a0c5f8db398dc0178de3404c1337d97f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e546b4e1a0c5f8db398dc0178de3404c1337d97f"
        }
      ],
      "message": "net, init: derive default onion port if a user specified a -port\n\nAfter port collisions are no longer tolerated but lead to\na startup failure in v28.0, local setups of multiple nodes,\neach with a different -port value would not be possible anymore\ndue to collision of the onion default port - even if the nodes\nwere using tor or not interested in receiving onion inbound connections.\n\nFix this by deriving the onion listening port to be -port + 1.\n(idea by vasild / laanwj)\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-11-14T18:41:02Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-11-04T23:24:45Z"
      },
      "sha": "0e2b12b92a28a2949e75bf50f31563f52e647d6e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15303175138,
      "node_id": "HRFPE_lADOABII586dIDS-zwAAAAOQI-vi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15303175138",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "created_at": "2024-11-14T19:01:19Z"
    },
    {
      "event": "referenced",
      "id": 15303175553,
      "node_id": "REFE_lADOABII586dIDS-zwAAAAOQI-2B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15303175553",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "created_at": "2024-11-14T19:01:21Z"
    },
    {
      "event": "commented",
      "id": 2477220525,
      "node_id": "IC_kwDOABII586Tp2Kt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2477220525",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-14T19:15:40Z",
      "updated_at": "2024-11-14T19:16:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated PR (took much longer than expected due to a medical issue, sorry) and I still plan on adding a functional test, hopefully tomorrow.\r\n\r\n- took vasild's suggestion, so that `OnionServiceTargetPort()` is removed from `chainparamsbase`\r\n- expanded release note\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2477220525",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "reviewed",
      "id": 2438045624,
      "node_id": "PRR_kwDOABII586RUZ-4",
      "url": null,
      "actor": null,
      "commit_id": "74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "I reviewed the code and it looks safe and will achieve the intended purpose.\r\n\r\nSince I introduced the current behavior which this PR is aiming to fix, I understand that I may have a bias towards downplaying the current issue (port collision) and a biased preference towards \"It's fine, don't do anything\". However, even with this realization, I can't help but think whether this will [introduce a bigger problem than the one it solves](https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2470680219): silent breakage vs obvious breakage.\r\n\r\nThus I will neither approve nor disapprove this. In other words - I do not object this if enough other people think it is good.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#pullrequestreview-2438045624",
      "submitted_at": "2024-11-15T09:22:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk5Nzc1N2RkMmI0ZDdiMjBiMTcyOTlmYmQyMTk3MGIyZWZiOGJiYzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/997757dd2b4d7b20b17299fbd21970b2efb8bbc8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/997757dd2b4d7b20b17299fbd21970b2efb8bbc8",
      "tree": {
        "sha": "90e4bc3f525af4327d61b0a56e8138d11b182ae7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90e4bc3f525af4327d61b0a56e8138d11b182ae7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e2b12b92a28a2949e75bf50f31563f52e647d6e",
          "sha": "0e2b12b92a28a2949e75bf50f31563f52e647d6e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0e2b12b92a28a2949e75bf50f31563f52e647d6e"
        }
      ],
      "message": "test: add functional test for -port behavior",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-11-15T21:05:32Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-11-15T21:05:12Z"
      },
      "sha": "997757dd2b4d7b20b17299fbd21970b2efb8bbc8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFkZDNhZjhmYmMzNTBjNmYxZWZhOGFlNjQ0OWU2N2UxYjQyY2NmZjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "tree": {
        "sha": "f75b44f1bab381ad2a1d1ada289d7afc927f04e2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f75b44f1bab381ad2a1d1ada289d7afc927f04e2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/997757dd2b4d7b20b17299fbd21970b2efb8bbc8",
          "sha": "997757dd2b4d7b20b17299fbd21970b2efb8bbc8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/997757dd2b4d7b20b17299fbd21970b2efb8bbc8"
        }
      ],
      "message": "Add release note for #31223\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-11-15T21:27:51Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-11-05T18:04:20Z"
      },
      "sha": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15317823504,
      "node_id": "HRFPE_lADOABII586dIDS-zwAAAAORA3AQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15317823504",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "created_at": "2024-11-15T21:29:03Z"
    },
    {
      "event": "commented",
      "id": 2479974458,
      "node_id": "IC_kwDOABII586T0Wg6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2479974458",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-15T21:39:41Z",
      "updated_at": "2024-11-15T21:39:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated Release note and added a commit that adds a functional test for various aspects of `-port` that have been discussed in this PR an the issue.\r\n\r\nWhen it comes to the question whether the issue should be fixed in 28.1, I guess it also comes down to how widespread we think a scenario with `-port` and a manual `torrc` is, vs how many more people doing local testing setups would be affected by the `-port` change from 28.0.\r\nI can't say I have a good feeling for either - to be honest I would have expected way more people to complain about their local setups not working anymore, than actually did in the last couple of weeks. \r\n\r\nBut, to be clear, if reviewers think it's better not to make another change now and tell affected users to  use `-bind` instead of `-port`, I'm happy to close this / maybe still add a functional test for `-port` so that future changes in this area are more likely to be caught by tests.\r\n\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#issuecomment-2479974458",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31223"
    },
    {
      "event": "reviewed",
      "id": 2440835235,
      "node_id": "PRR_kwDOABII586RfDCj",
      "url": null,
      "actor": null,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4\r\n\r\n> if reviewers think it's better not to make another change now and tell affected users to use -bind instead of -port\r\n\r\nI don't feel very strongly either way, but I lean toward implementing the port+1 approach in this PR.\r\n\r\n> still add a functional test for -port so that future changes in this area are more likely to be caught by tests.\r\n\r\nI support this. It's descriptive and helps catch issues later.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#pullrequestreview-2440835235",
      "submitted_at": "2024-11-17T01:44:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
    },
    {
      "event": "review_requested",
      "id": 15323346249,
      "node_id": "RRE_lADOABII586dIDS-zwAAAAORV7VJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15323346249",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-17T01:44:07Z",
      "requested_reviewer": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1830257430",
      "pull_request_review_id": 2417053413,
      "id": 1830257430,
      "node_id": "PRRC_kwDOABII585tF4MW",
      "diff_hunk": "@@ -711,9 +711,9 @@ void StopTorControl()\n     }\n }\n \n-CService DefaultOnionServiceTarget()\n+CService DefaultOnionServiceTarget(std::optional<uint16_t> port)\n {\n     struct in_addr onion_service_target;\n     onion_service_target.s_addr = htonl(INADDR_LOOPBACK);\n-    return {onion_service_target, BaseParams().OnionServiceTargetPort()};\n+    return {onion_service_target, port.has_value() ? port.value() : BaseParams().OnionServiceTargetPort()};",
      "path": "src/torcontrol.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "2dccdc69d78ea58ba795abd5192182c8c8d63e70",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": " `std::optional::value_or()` might work nicely here.\r\n\r\ne.g.\r\n```diff\r\ndiff --git a/src/torcontrol.cpp b/src/torcontrol.cpp\r\nindex d56216a7cb0..b518cf1bb93 100644\r\n--- a/src/torcontrol.cpp\r\n+++ b/src/torcontrol.cpp\r\n@@ -715,5 +715,5 @@ CService DefaultOnionServiceTarget(std::optional<uint16_t> port)\r\n {\r\n     struct in_addr onion_service_target;\r\n     onion_service_target.s_addr = htonl(INADDR_LOOPBACK);\r\n-    return {onion_service_target, port.has_value() ? port.value() : BaseParams().OnionServiceTargetPort()};\r\n+    return {onion_service_target, port.value_or(BaseParams().OnionServiceTargetPort())};\r\n }\r\n```",
      "created_at": "2024-11-06T00:53:34Z",
      "updated_at": "2024-11-06T01:49:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1830257430",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1830257430"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 718,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831240767",
      "pull_request_review_id": 2418656616,
      "id": 1831240767,
      "node_id": "PRRC_kwDOABII585tJoQ_",
      "diff_hunk": "@@ -711,9 +711,9 @@ void StopTorControl()\n     }\n }\n \n-CService DefaultOnionServiceTarget()\n+CService DefaultOnionServiceTarget(std::optional<uint16_t> port)\n {\n     struct in_addr onion_service_target;\n     onion_service_target.s_addr = htonl(INADDR_LOOPBACK);\n-    return {onion_service_target, BaseParams().OnionServiceTargetPort()};\n+    return {onion_service_target, port.has_value() ? port.value() : BaseParams().OnionServiceTargetPort()};",
      "path": "src/torcontrol.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "2dccdc69d78ea58ba795abd5192182c8c8d63e70",
      "in_reply_to_id": 1830257430,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, changed to that.",
      "created_at": "2024-11-06T15:25:47Z",
      "updated_at": "2024-11-06T15:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1831240767",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831240767"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 718,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831395166",
      "pull_request_review_id": 2418908916,
      "id": 1831395166,
      "node_id": "PRRC_kwDOABII585tKN9e",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+P2P and network changes\n+-----------------------\n+When the `-port` configuration option is used, the default onion listening port will now\n+be derived to be that port + 1 instead of being set to a fixed value.\n+This re-allows setups with multiple local nodes using different `-port`, which\n+would lead to a startup failure in v28.0 due to a port collision error. (#31223)",
      "path": "doc/release-notes-31223.md",
      "position": null,
      "original_position": 6,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This implies that it's not possible in v28.0, but it is if `-bind=...=onion` is used. Maybe clarify:\r\n\r\n```suggestion\r\nThis re-allows setups with multiple local nodes using different `-port`, which\r\nwould lead to a startup failure in v28.0 if `-bind=...=onion` is not used due to a port collision error. (#31223)\r\n```",
      "created_at": "2024-11-06T16:50:32Z",
      "updated_at": "2024-11-06T17:47:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1831395166",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831395166"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 5,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831404260",
      "pull_request_review_id": 2418908916,
      "id": 1831404260,
      "node_id": "PRRC_kwDOABII585tKQLk",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If `-port=5999` is given (5999 is not bad, but 6000 is), then this would produce a warning like \"-port request to listen on port 6000 ...\" which could be confusing because the user did not specify 6000. But more importantly I think we don't need this bad port check at all because this is completely local thing, only between `bitcoin` and the Tor router. That port is not announced to the outside world, so it is ok to just drop check.",
      "created_at": "2024-11-06T16:56:32Z",
      "updated_at": "2024-11-06T17:47:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1831404260",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831404260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 1914,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1917,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831444830",
      "pull_request_review_id": 2418908916,
      "id": 1831444830,
      "node_id": "PRRC_kwDOABII585tKaFe",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }\n+        }\n+        onion_service_target = DefaultOnionServiceTarget(onion_port);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think it is simpler and is ok to use reduce all this to:\r\n\r\n```diff\r\ndiff --git i/src/init.cpp w/src/init.cpp\r\nindex c10f792c7d..7e141dbd4c 100644\r\n--- i/src/init.cpp\r\n+++ w/src/init.cpp\r\n@@ -518,13 +518,13 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\r\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\r\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\r\n \r\n     argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n-    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it (default: 0.0.0.0). Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming Tor connections (default: 127.0.0.1:%u=onion, testnet3: 127.0.0.1:%u=onion, testnet4: 127.0.0.1:%u=onion, signet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), testnet4BaseParams->OnionServiceTargetPort(), signetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\r\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it (default: 0.0.0.0). Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming Tor connections (default: 127.0.0.1:%u=onion, testnet3: 127.0.0.1:%u=onion, testnet4: 127.0.0.1:%u=onion, signet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultChainParams->GetDefaultPort() + 1, testnetChainParams->GetDefaultPort() + 1, testnet4ChainParams->GetDefaultPort() + 1, signetChainParams->GetDefaultPort() + 1, regtestChainParams->GetDefaultPort() + 1), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-cjdnsreachable\", \"If set, then this host is configured for CJDNS (connecting to fc00::/8 addresses would lead us to the CJDNS network, see doc/cjdns.md) (default: 0)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-connect=<ip>\", \"Connect only to the specified node; -noconnect disables automatic connections (the rules for this peer are the same as for -addnode). This option can be specified multiple times to connect to multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-discover\", \"Discover own IP addresses (default: 1 when listening and no -externalip or -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-dns\", strprintf(\"Allow DNS lookups for -addnode, -seednode and -connect (default: %u)\", DEFAULT_NAME_LOOKUP), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-dnsseed\", strprintf(\"Query for peer addresses via DNS lookup, if low on addresses (default: %u unless -connect used or -maxconnections=0)\", DEFAULT_DNSSEED), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n     argsman.AddArg(\"-externalip=<ip>\", \"Specify your own public address\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n@@ -1844,12 +1844,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     connOptions.whitelist_relay = args.GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY);\r\n \r\n     // Port to bind to if `-bind=addr` is provided without a `:port` suffix.\r\n     const uint16_t default_bind_port =\r\n         static_cast<uint16_t>(args.GetIntArg(\"-port\", Params().GetDefaultPort()));\r\n \r\n+    const uint16_t default_bind_port_onion = default_bind_port + 1;\r\n+\r\n     const auto BadPortWarning = [](const char* prefix, uint16_t port) {\r\n         return strprintf(_(\"%s request to listen on port %u. This port is considered \\\"bad\\\" and \"\r\n                            \"thus it is unlikely that any peer will connect to it. See \"\r\n                            \"doc/p2p-bad-ports.md for details and a full list.\"),\r\n                          prefix,\r\n                          port);\r\n@@ -1868,13 +1870,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n                 continue;\r\n             }\r\n         } else {\r\n             const std::string network_type = bind_arg.substr(index + 1);\r\n             if (network_type == \"onion\") {\r\n                 const std::string truncated_bind_arg = bind_arg.substr(0, index);\r\n-                bind_addr = Lookup(truncated_bind_arg, BaseParams().OnionServiceTargetPort(), false);\r\n+                bind_addr = Lookup(truncated_bind_arg, default_bind_port_onion, false);\r\n                 if (bind_addr.has_value()) {\r\n                     connOptions.onion_binds.push_back(bind_addr.value());\r\n                     continue;\r\n                 }\r\n             }\r\n         }\r\n@@ -1904,22 +1906,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     CService onion_service_target;\r\n     if (!connOptions.onion_binds.empty()) {\r\n         onion_service_target = connOptions.onion_binds.front();\r\n     } else if (!connOptions.vBinds.empty()) {\r\n         onion_service_target = connOptions.vBinds.front();\r\n     } else {\r\n-        std::optional<uint16_t> onion_port;\r\n-        if (args.IsArgSet(\"-port\")) {\r\n-            // If -port was specified but no onion bind, derive the onion listening port by incrementing\r\n-            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\r\n-            onion_port = args.GetIntArg(\"-port\", 0) + 1;\r\n-            if (IsBadPort(*onion_port)) {\r\n-                InitWarning(BadPortWarning(\"-port\", *onion_port));\r\n-            }\r\n-        }\r\n-        onion_service_target = DefaultOnionServiceTarget(onion_port);\r\n+        onion_service_target = DefaultOnionServiceTarget(default_bind_port_onion);\r\n         connOptions.onion_binds.push_back(onion_service_target);\r\n     }\r\n \r\n     if (args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION)) {\r\n         if (connOptions.onion_binds.size() > 1) {\r\n             InitWarning(strprintf(_(\"More than one onion bind address is provided. Using %s \"\r\ndiff --git i/src/torcontrol.h w/src/torcontrol.h\r\nindex f57bf9e65f..0b66201cf1 100644\r\n--- i/src/torcontrol.h\r\n+++ w/src/torcontrol.h\r\n@@ -24,13 +24,13 @@ extern const std::string DEFAULT_TOR_CONTROL;\r\n static const bool DEFAULT_LISTEN_ONION = true;\r\n \r\n void StartTorControl(CService onion_service_target);\r\n void InterruptTorControl();\r\n void StopTorControl();\r\n \r\n-CService DefaultOnionServiceTarget(std::optional<uint16_t> port);\r\n+CService DefaultOnionServiceTarget(uint16_t port);\r\n \r\n /** Reply from Tor, can be single or multi-line */\r\n class TorControlReply\r\n {\r\n public:\r\n     TorControlReply() { Clear(); }\r\ndiff --git i/src/torcontrol.cpp w/src/torcontrol.cpp\r\nindex d56216a7cb..60df916f16 100644\r\n--- i/src/torcontrol.cpp\r\n+++ w/src/torcontrol.cpp\r\n@@ -708,12 +708,12 @@ void StopTorControl()\r\n         torControlThread.join();\r\n         event_base_free(gBase);\r\n         gBase = nullptr;\r\n     }\r\n }\r\n \r\n-CService DefaultOnionServiceTarget(std::optional<uint16_t> port)\r\n+CService DefaultOnionServiceTarget(uint16_t port)\r\n {\r\n     struct in_addr onion_service_target;\r\n     onion_service_target.s_addr = htonl(INADDR_LOOPBACK);\r\n-    return {onion_service_target, port.has_value() ? port.value() : BaseParams().OnionServiceTargetPort()};\r\n+    return {onion_service_target, port};\r\n }\r\ndiff --git i/src/chainparamsbase.h w/src/chainparamsbase.h\r\nindex c75a70cb96..adbd6a5174 100644\r\n--- i/src/chainparamsbase.h\r\n+++ w/src/chainparamsbase.h\r\n@@ -19,21 +19,19 @@ class ArgsManager;\r\n  */\r\n class CBaseChainParams\r\n {\r\n public:\r\n     const std::string& DataDir() const { return strDataDir; }\r\n     uint16_t RPCPort() const { return m_rpc_port; }\r\n-    uint16_t OnionServiceTargetPort() const { return m_onion_service_target_port; }\r\n \r\n     CBaseChainParams() = delete;\r\n-    CBaseChainParams(const std::string& data_dir, uint16_t rpc_port, uint16_t onion_service_target_port)\r\n-        : m_rpc_port(rpc_port), m_onion_service_target_port(onion_service_target_port), strDataDir(data_dir) {}\r\n+    CBaseChainParams(const std::string& data_dir, uint16_t rpc_port)\r\n+        : m_rpc_port(rpc_port), strDataDir(data_dir) {}\r\n \r\n private:\r\n     const uint16_t m_rpc_port;\r\n-    const uint16_t m_onion_service_target_port;\r\n     std::string strDataDir;\r\n };\r\n \r\n /**\r\n  * Creates and returns a std::unique_ptr<CBaseChainParams> of the chosen chain.\r\n  */\r\ndiff --git i/src/chainparamsbase.cpp w/src/chainparamsbase.cpp\r\nindex aadd04e509..060d519d92 100644\r\n--- i/src/chainparamsbase.cpp\r\n+++ w/src/chainparamsbase.cpp\r\n@@ -38,21 +38,21 @@ const CBaseChainParams& BaseParams()\r\n  * been chosen arbitrarily to keep ranges of used ports tight.\r\n  */\r\n std::unique_ptr<CBaseChainParams> CreateBaseChainParams(const ChainType chain)\r\n {\r\n     switch (chain) {\r\n     case ChainType::MAIN:\r\n-        return std::make_unique<CBaseChainParams>(\"\", 8332, 8334);\r\n+        return std::make_unique<CBaseChainParams>(\"\", 8332);\r\n     case ChainType::TESTNET:\r\n-        return std::make_unique<CBaseChainParams>(\"testnet3\", 18332, 18334);\r\n+        return std::make_unique<CBaseChainParams>(\"testnet3\", 18332);\r\n     case ChainType::TESTNET4:\r\n-        return std::make_unique<CBaseChainParams>(\"testnet4\", 48332, 48334);\r\n+        return std::make_unique<CBaseChainParams>(\"testnet4\", 48332);\r\n     case ChainType::SIGNET:\r\n-        return std::make_unique<CBaseChainParams>(\"signet\", 38332, 38334);\r\n+        return std::make_unique<CBaseChainParams>(\"signet\", 38332);\r\n     case ChainType::REGTEST:\r\n-        return std::make_unique<CBaseChainParams>(\"regtest\", 18443, 18445);\r\n+        return std::make_unique<CBaseChainParams>(\"regtest\", 18443);\r\n     }\r\n     assert(false);\r\n }\r\n \r\n void SelectBaseParams(const ChainType chain)\r\n {\r\n```\r\n\r\nwhich will also handle variants like `-port=5555 -bind=127.0.0.1=onion` (will result in listening on `127.0.0.1:5556` for incoming Tor connections).",
      "created_at": "2024-11-06T17:24:52Z",
      "updated_at": "2024-11-06T17:47:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1831444830",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1831444830"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1919,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1835050453",
      "pull_request_review_id": 2424908328,
      "id": 1835050453,
      "node_id": "PRRC_kwDOABII585tYKXV",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831404260,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "will drop as suggested. I  guess I was also thinking about local port contention: If bitcoind binds to a port from the list that is usually used by other protocols, then this might affect other programs from starting up or working correctly. Do you think that is an issue we should care about?",
      "created_at": "2024-11-08T20:58:25Z",
      "updated_at": "2024-11-08T22:46:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1835050453",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1835050453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 1914,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1917,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1835061247",
      "pull_request_review_id": 2424908328,
      "id": 1835061247,
      "node_id": "PRRC_kwDOABII585tYM__",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }\n+        }\n+        onion_service_target = DefaultOnionServiceTarget(onion_port);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831444830,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sound interesting - will try to test this a bit more / and will probably change it to that early next week.\r\n\r\nIs this interaction between `-port` and `-bind` without port useful / necessary for anything or more of a gimmick? (it already exists on master) I kind of think as `-port` as an option I'd choose if I didn't want to use `-bind` (and would use `-bind` with a port if I used it at all), so the combination seems a bit confusing. ",
      "created_at": "2024-11-08T21:11:25Z",
      "updated_at": "2024-11-08T22:45:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1835061247",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1835061247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1919,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1835065201",
      "pull_request_review_id": 2424908328,
      "id": 1835065201,
      "node_id": "PRRC_kwDOABII585tYN9x",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+P2P and network changes\n+-----------------------\n+When the `-port` configuration option is used, the default onion listening port will now\n+be derived to be that port + 1 instead of being set to a fixed value.\n+This re-allows setups with multiple local nodes using different `-port`, which\n+would lead to a startup failure in v28.0 due to a port collision error. (#31223)",
      "path": "doc/release-notes-31223.md",
      "position": null,
      "original_position": 6,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831395166,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think that `-bind=...=onion` in connection with `-port` doesn't resolve the problem completely, because that node wouldn't have any other binds than the onion bind (in particular no bind-on-any) and therefore couldn't receive any non-onion inbound connections. \r\nNot sure if there is a way to avoid the problem other than not using `-port` in the first place.",
      "created_at": "2024-11-08T21:16:40Z",
      "updated_at": "2024-11-08T22:45:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1835065201",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1835065201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 5,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1838156911",
      "pull_request_review_id": 2429687779,
      "id": 1838156911,
      "node_id": "PRRC_kwDOABII585tkAxv",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+P2P and network changes\n+-----------------------\n+When the `-port` configuration option is used, the default onion listening port will now\n+be derived to be that port + 1 instead of being set to a fixed value.\n+This re-allows setups with multiple local nodes using different `-port`, which\n+would lead to a startup failure in v28.0 due to a port collision error. (#31223)",
      "path": "doc/release-notes-31223.md",
      "position": null,
      "original_position": 6,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831395166,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I meant `-bind=` as a means to disable the onion bind on `127.0.0.1:8334` to avoid the port collision, but I typed `-bind=...=onion` instead :(\r\n\r\nOne can use both depending on what's needed: `-bind=1.2.3.4:5555 -bind=127.0.0.1:8335=onion`.",
      "created_at": "2024-11-12T14:02:21Z",
      "updated_at": "2024-11-12T14:02:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1838156911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1838156911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 5,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1838170305",
      "pull_request_review_id": 2429711429,
      "id": 1838170305,
      "node_id": "PRRC_kwDOABII585tkEDB",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831404260,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Do you think that is an issue we should care about?\r\n\r\nNo.\r\n\r\nI have found simple/dumb programs easier to configure compared to programs that try to be intelligent on behalf of the user. \r\n\r\n> Shaw's Principle:\r\n>        Build a system that even a fool can use, and only a fool will want to use it.\r\n\r\nThis is a bit subjective and I may have a bias here, but if I put `Port 80` in `/etc/ssh/sshd_config` I can't imagine sshd saying something like \"Hey, you are binding sshd on port 80, your web server may not work well\". :-D",
      "created_at": "2024-11-12T14:09:51Z",
      "updated_at": "2024-11-12T14:09:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1838170305",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1838170305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 1914,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1917,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1838181981",
      "pull_request_review_id": 2429730314,
      "id": 1838181981,
      "node_id": "PRRC_kwDOABII585tkG5d",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }\n+        }\n+        onion_service_target = DefaultOnionServiceTarget(onion_port);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831444830,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't know how useful `-port=5555 -bind=127.0.0.1=onion` is or how many people use it. But it is supported on `master` and thus we better not brick it. And this makes our lives harder.\r\n\r\nOut of the scope of this PR, I am in favor of dropping support for `-bind=addresswithoutport`. Just to make things simpler for us and maybe also for the users that will not have to wonder what happens if some weird combination of options are used, e.g. `port=1111 bind=2.2.2.2:3333`.\r\n\r\n",
      "created_at": "2024-11-12T14:16:51Z",
      "updated_at": "2024-11-12T14:16:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1838181981",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1838181981"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1919,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1842752832",
      "pull_request_review_id": 2436973262,
      "id": 1842752832,
      "node_id": "PRRC_kwDOABII585t1i1A",
      "diff_hunk": "@@ -1907,7 +1907,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     } else if (!connOptions.vBinds.empty()) {\n         onion_service_target = connOptions.vBinds.front();\n     } else {\n-        onion_service_target = DefaultOnionServiceTarget();\n+        std::optional<uint16_t> onion_port;\n+        if (args.IsArgSet(\"-port\")) {\n+            // If -port was specified but no onion bind, derive the onion listening port by incrementing\n+            // that port by 1. This avoids port collisions in case of setups with multiple local nodes.\n+            onion_port = args.GetIntArg(\"-port\", 0) + 1;\n+            if (IsBadPort(*onion_port)) {\n+                InitWarning(BadPortWarning(\"-port\", *onion_port));\n+            }\n+        }\n+        onion_service_target = DefaultOnionServiceTarget(onion_port);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "e382bdcc547a28af7c752d53c0707bbebe29e0bb",
      "in_reply_to_id": 1831444830,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "took the suggestion now!",
      "created_at": "2024-11-14T19:02:06Z",
      "updated_at": "2024-11-14T19:02:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1842752832",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1842752832"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1919,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1843426357",
      "pull_request_review_id": 2438045624,
      "id": 1843426357,
      "node_id": "PRRC_kwDOABII585t4HQ1",
      "diff_hunk": "@@ -0,0 +1,8 @@\n+P2P and network changes\n+-----------------------\n+When the `-port` configuration option is used, the default onion listening port will now\n+be derived to be that port + 1 instead of being set to a fixed value (8334 on mainnet).\n+This re-allows setups with multiple local nodes using different `-port` and not using `-bind`,\n+which would lead to a startup failure in v28.0 due to a port collision.\n+Note that a `HiddenServicePort` manually configured in `torrc` may need adjustment if used in\n+connection with the `-port` option. (#31223)",
      "path": "doc/release-notes-31223.md",
      "position": null,
      "original_position": 8,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Maybe further elaborate this with an example:\r\n\r\nIf you are using `-port=` with non-standard value, for example `-port=5555` and not using `-bind=...=onion`, previously Bitcoin Core would listen for incoming Tor connections on `127.0.0.1:8334`. Now it would listen on `127.0.0.1:5556` (`-port` plus one). If you configured the hidden service manually in `torrc` now you have to change it from `HiddenServicePort 8333 127.0.0.1:8334` to `HiddenServicePort 8333 127.0.0.1:5556`, or configure `bitcoind` with `-bind=127.0.0.1:8334=onion` to get the previous behavior.",
      "created_at": "2024-11-15T09:08:26Z",
      "updated_at": "2024-11-15T09:22:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1843426357",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1843426357"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 7,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1844527950",
      "pull_request_review_id": 2439720008,
      "id": 1844527950,
      "node_id": "PRRC_kwDOABII585t8UNO",
      "diff_hunk": "@@ -0,0 +1,8 @@\n+P2P and network changes\n+-----------------------\n+When the `-port` configuration option is used, the default onion listening port will now\n+be derived to be that port + 1 instead of being set to a fixed value (8334 on mainnet).\n+This re-allows setups with multiple local nodes using different `-port` and not using `-bind`,\n+which would lead to a startup failure in v28.0 due to a port collision.\n+Note that a `HiddenServicePort` manually configured in `torrc` may need adjustment if used in\n+connection with the `-port` option. (#31223)",
      "path": "doc/release-notes-31223.md",
      "position": null,
      "original_position": 8,
      "commit_id": "1dd3af8fbc350c6f1efa8ae6449e67e1b42ccff4",
      "original_commit_id": "74f5106d8ae1fa988ae34f607cc39782502d6b16",
      "in_reply_to_id": 1843426357,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done (in a slightly adjusted form)",
      "created_at": "2024-11-15T21:29:31Z",
      "updated_at": "2024-11-15T21:29:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31223#discussion_r1844527950",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1844527950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31223"
        }
      },
      "start_line": null,
      "original_start_line": 7,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    }
  ]
}