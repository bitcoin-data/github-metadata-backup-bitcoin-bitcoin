{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381",
    "id": 1951298940,
    "node_id": "PR_kwDOABII5850TnV8",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30381",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30381.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30381.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4c199714f91197d419c72aeec09443b633b0f327",
    "number": 30381,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "[WIP] net: return result from addnode RPC",
    "user": {
      "login": "willcl-ark",
      "id": 6606587,
      "node_id": "MDQ6VXNlcjY2MDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willcl-ark",
      "html_url": "https://github.com/willcl-ark",
      "followers_url": "https://api.github.com/users/willcl-ark/followers",
      "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
      "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
      "repos_url": "https://api.github.com/users/willcl-ark/repos",
      "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixes: #20552\r\n\r\nPicks up a [branch](https://github.com/bitcoin/bitcoin/compare/master...amitiuttarwar:bitcoin:2020-11-open-conn-improvements) from by @amitiuttarwar which adds a success response to `addnode` RPC.\r\n\r\nIt adds a new return object to `addnode` RPC indicating that the call was successful:\r\n\r\n```cpp\r\n{\r\n    {RPCResult::Type::STR, \"operation\", \"The operation called (onetry/add/remove)\"},\r\n    {RPCResult::Type::STR, \"result\", \"The result of the operation (success/failed)\"},\r\n    {RPCResult::Type::STR, \"address\", \"The address of the peer\"},\r\n}\r\n```",
    "labels": [],
    "created_at": "2024-07-03T10:21:04Z",
    "updated_at": "2024-07-31T18:06:22Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "1470ca606c56f998190394a663a113db4a6c9cc4",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "willcl-ark:addnode-failure",
      "ref": "addnode-failure",
      "sha": "4c199714f91197d419c72aeec09443b633b0f327",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 164122552,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjQxMjI1NTI=",
        "name": "bitcoin",
        "full_name": "willcl-ark/bitcoin",
        "owner": {
          "login": "willcl-ark",
          "id": 6606587,
          "node_id": "MDQ6VXNlcjY2MDY1ODc=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/willcl-ark",
          "html_url": "https://github.com/willcl-ark",
          "followers_url": "https://api.github.com/users/willcl-ark/followers",
          "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
          "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
          "repos_url": "https://api.github.com/users/willcl-ark/repos",
          "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/willcl-ark/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/willcl-ark/bitcoin",
        "archive_url": "https://api.github.com/repos/willcl-ark/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/willcl-ark/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/willcl-ark/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/willcl-ark/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/willcl-ark/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/willcl-ark/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/willcl-ark/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/willcl-ark/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/willcl-ark/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/willcl-ark/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/willcl-ark/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/willcl-ark/bitcoin/events",
        "forks_url": "https://api.github.com/repos/willcl-ark/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/willcl-ark/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/willcl-ark/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/willcl-ark/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/willcl-ark/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/willcl-ark/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/willcl-ark/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/willcl-ark/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/willcl-ark/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/willcl-ark/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/willcl-ark/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/willcl-ark/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/willcl-ark/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:willcl-ark/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/willcl-ark/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/willcl-ark/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/willcl-ark/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/willcl-ark/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/willcl-ark/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/willcl-ark/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/willcl-ark/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/willcl-ark/bitcoin/hooks",
        "svn_url": "https://github.com/willcl-ark/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 244800,
        "default_branch": "master",
        "open_issues_count": 7,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-24T15:56:14Z",
        "created_at": "2019-01-04T15:17:29Z",
        "updated_at": "2024-07-23T08:50:36Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "3714692644f45808a6480525abc36870aeee1de4",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35688,
        "stargazers_count": 77423,
        "watchers_count": 77423,
        "size": 264006,
        "default_branch": "master",
        "open_issues_count": 671,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-31T18:16:12Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-07-31T16:53:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 45,
    "deletions": 37,
    "changed_files": 8,
    "commits": 3,
    "review_comments": 3,
    "comments": 6
  },
  "events": [
    {
      "event": "mentioned",
      "id": 13378227552,
      "node_id": "MEE_lADOABII586OWdlhzwAAAAMdZ41g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13378227552",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:21:04Z"
    },
    {
      "event": "subscribed",
      "id": 13378227573,
      "node_id": "SE_lADOABII586OWdlhzwAAAAMdZ411",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13378227573",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:21:04Z"
    },
    {
      "event": "commented",
      "id": 2205723593,
      "node_id": "IC_kwDOABII586DeKvJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2205723593",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:21:07Z",
      "updated_at": "2024-07-31T18:06:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30381).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/30381#pullrequestreview-2159102244), [tdb3](https://github.com/bitcoin/bitcoin/pull/30381#pullrequestreview-2160865613) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2205723593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381"
    },
    {
      "event": "commented",
      "id": 2205725737,
      "node_id": "IC_kwDOABII586DeLQp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2205725737",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:22:08Z",
      "updated_at": "2024-07-03T10:22:08Z",
      "author_association": "MEMBER",
      "body": "I did experiment with not throwing `JSONRPCError`s at all from this call, and always returning a `result` and optionally an `error` if it occurred, but this doesn't align with our general practice of throwing `JSONRPCError`s on failures, so I abandoned this approach.\r\n\r\nThis does mean that the `result` field here is pretty much redundant; we either throw, or return a result (implicitly indidcating success). Perhaps it could therefore be removed? Unsure if folks would prefer the re-assurance of seeing `\"result\": \"success\"` (we can never return `\"failure\"` here currently!)",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2205725737",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381"
    },
    {
      "event": "labeled",
      "id": 13378255315,
      "node_id": "LE_lADOABII586OWdlhzwAAAAMdZ_nT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13378255315",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:23:13Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2205734826,
      "node_id": "IC_kwDOABII586DeNeq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2205734826",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:26:38Z",
      "updated_at": "2024-07-03T10:26:38Z",
      "author_association": "MEMBER",
      "body": "Before these changes:\r\n\r\n```log\r\n$ src/bitcoin-cli -signet addnode i-am-not-an-address onetry\r\n\r\n```\r\n\r\nAfter:\r\n\r\n```log\r\n$ src/bitcoin-cli -signet addnode i-am-not-an-address onetry\r\nerror code: -24\r\nerror message:\r\nUnable to open connection\r\n```",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2205734826",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNiM2Y3ODRlNTQ4Mjg3NmZhYWMyZDNhODE2Y2NiM2UzMGFmMWRkMmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb3f784e5482876faac2d3a816ccb3e30af1dd2c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cb3f784e5482876faac2d3a816ccb3e30af1dd2c",
      "tree": {
        "sha": "5c8d72c9ccaed8944863235592497cfe72a962de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5c8d72c9ccaed8944863235592497cfe72a962de"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5c8d72c9ccaed8944863235592497cfe72a962de\nparent 3714692644f45808a6480525abc36870aeee1de4\nauthor willcl-ark <will@256k1.dev> 1719933631 +0100\ncommitter willcl-ark <will@256k1.dev> 1720003418 +0100\n\nnet: make OpenNetworkConnection return a bool\n\nThis lets us propagate errors back to `CConnman::AddConnection()` and\nthe `addnode` RPC in the future.\n\nCo-authored-by: Amiti Uttarwar <amiti@uttarwar.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEoAg2YPI1onAAzTyBzm7EmUXBfqYFAmaFK1oACgkQzm7EmUXB\nfqb1/hAArphGb/YcDXocljKqODF1ko/veapo+duU7XtYt0bEEh3h4QRsewr+g4nq\ncUuHXEMBS9j0prCuRK3SLOFW2f+Ofq1+5WTnw1Eyhho5cur/ML9WYTLHxJcUm1tV\nRogR+RgFk+pbEeQe61lALIrsJJHWONd5B2m9Psw+yD86Uk+zvpD2BnHbiVcolGLy\ng003ERfgN5BZGv8tHVQCdb2Y5bvet2gJI4Ej0hk4eForTVMinWxiNfWyBI7i7bz1\nEWJflkq1F+M/DPCbudVDeM0fReg/e0MAkB1gQPu1mOK3o/jKNZJSx71QKogfWBbT\nIYGh/LxBgTh+q2caBh88Mydex1VXWtGnLHKspVxGX+bzS5q1ce657d9l37F1YGiA\n2/Lk7er8aO+uMf7GsrngChrgbiKfR7FgIU3mCN57E/2IzDiEQd6XDte47WSUUTy4\nHp+SZDPsw306P4FwD+QZ91rj6uIAKVWPmNWCwXcQ5P+RhRgtLX5WN6WS9MFGFtkn\ntX5mescN9agZvDC6/3uS474BmTaN8ZYrf2tVCvrmYmqt1OZ7x/g6kEYlfFS80nqn\nrLxCtZh7mnt3mS8dgCx4r61NW7idhd7Uyoc5dkE4wT2bGnLd8TCMASrb+JMbi7pB\nwV3D7EYS2ZT4X97oxfpGMhjJYFLquddrkHS0N2DHQSPW5YV244k=\n=Wsnp\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3714692644f45808a6480525abc36870aeee1de4",
          "sha": "3714692644f45808a6480525abc36870aeee1de4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3714692644f45808a6480525abc36870aeee1de4"
        }
      ],
      "message": "net: make OpenNetworkConnection return a bool\n\nThis lets us propagate errors back to `CConnman::AddConnection()` and\nthe `addnode` RPC in the future.\n\nCo-authored-by: Amiti Uttarwar <amiti@uttarwar.org>",
      "committer": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2024-07-03T10:43:38Z"
      },
      "author": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2024-07-02T15:20:31Z"
      },
      "sha": "cb3f784e5482876faac2d3a816ccb3e30af1dd2c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUzZTU4ODJhODY4MmUyMjA0MzFhNmMwZTg1MDVhMTEzMWI2OWIxMDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/53e5882a8682e220431a6c0e8505a1131b69b105",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/53e5882a8682e220431a6c0e8505a1131b69b105",
      "tree": {
        "sha": "34be29a72c1ab4dd8c847bec5070b458b4f1036f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/34be29a72c1ab4dd8c847bec5070b458b4f1036f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 34be29a72c1ab4dd8c847bec5070b458b4f1036f\nparent cb3f784e5482876faac2d3a816ccb3e30af1dd2c\nauthor willcl-ark <will@256k1.dev> 1719933749 +0100\ncommitter willcl-ark <will@256k1.dev> 1720003419 +0100\n\nnet: make CConnMan::AddConnection return success\n\nReturn the status of `AddConnection()` to the `addconnection()` RPC.\n\nAlso rename RPCErrorCode 34 to align with the behaviour it signifies.\n\nCo-authored-by: Amiti Uttarwar <amiti@uttarwar.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEoAg2YPI1onAAzTyBzm7EmUXBfqYFAmaFK1sACgkQzm7EmUXB\nfqZQTxAApqeQBvKnLYOfI57OLDNnHImVkYYOuN8fLjS+oB+hELBwd74JzCDlXBu0\ngtinyOFASC0CJ7fuNAWIKGq+67uwkI6WPipWjtMGiABs61nTqXRzwv4NZ6FB50af\nOuFnjZ/E72wpY1Fk4s95FQfZ1FoBuFLC1OQ+9R8355JwzSGeKnZ3eJ/RMa2fUAp5\nDGk8byCkqjL9J9XWd1+SR5rT7WgCkr1mlZDZTZHISFUN/FEZnre73rK//B4A6ql0\nJtrmMrIvpHc740CGj6Xwvmg0I9/AkiKygYUnh0iXuyZXYrco66y4neTG+UbzKrkz\n9fKWlghQeOQm0DMKokej/opnfI4iX12db8rCKYAkQBf/ADxH2wo6NRmd1m5eOXAe\n/b3mfhtu50tNMOKPchRotg2ZEfZBk4LdnUXgMVXHZa0mmoYiv4ttSkQ3HXMB6YFv\neVJnZX7kuJHK7LpFLDQdk+Z+1gHUfrCXgj7yH2nHuqHi4/8vLdPUWQYZ2t8IbCq/\nh8d2sYxZHLpjmnRwjfa/5TOP1bFYkkV3llKfmy5AtHANp70R5rMsGMYSYQp9tuzX\ngbb0bvvIX45WpVQkiIJgOY+6eGCt/QPWXPnlOjWTwssV5viDgb7Cx6KslvYkQ4ry\nAMKUetLPC/fREbOb8ZZoggGUCM+f4kagW90xCpHtCN8hDk5mKYE=\n=IiOB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb3f784e5482876faac2d3a816ccb3e30af1dd2c",
          "sha": "cb3f784e5482876faac2d3a816ccb3e30af1dd2c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cb3f784e5482876faac2d3a816ccb3e30af1dd2c"
        }
      ],
      "message": "net: make CConnMan::AddConnection return success\n\nReturn the status of `AddConnection()` to the `addconnection()` RPC.\n\nAlso rename RPCErrorCode 34 to align with the behaviour it signifies.\n\nCo-authored-by: Amiti Uttarwar <amiti@uttarwar.org>",
      "committer": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2024-07-03T10:43:39Z"
      },
      "author": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2024-07-02T15:22:29Z"
      },
      "sha": "53e5882a8682e220431a6c0e8505a1131b69b105"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRjMTk5NzE0ZjkxMTk3ZDQxOWM3MmFlZWMwOTQ0M2I2MzNiMGYzMjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c199714f91197d419c72aeec09443b633b0f327",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4c199714f91197d419c72aeec09443b633b0f327",
      "tree": {
        "sha": "bf2ce13e084aaad4bfd7f38a031f2c03bbb113b1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bf2ce13e084aaad4bfd7f38a031f2c03bbb113b1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bf2ce13e084aaad4bfd7f38a031f2c03bbb113b1\nparent 53e5882a8682e220431a6c0e8505a1131b69b105\nauthor willcl-ark <will@256k1.dev> 1719933861 +0100\ncommitter willcl-ark <will@256k1.dev> 1720003552 +0100\n\nrpc: return result from `addnode` rpc\n\nWhen we call the `addnode` RPC, previous behaviour was to return an RPC\nerror in some situations, but otherwise return null.\n\nThis commit changes that behaviour to instead return an `RPCResult` from\ncalls to `addnode`. This will include the address the result relates to,\nand additionally either a `result` or an `error` field.\n\nThe presence of these fields can be used to determine success, or error\nrespectively.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEoAg2YPI1onAAzTyBzm7EmUXBfqYFAmaFK+IACgkQzm7EmUXB\nfqZQTQ/+PO7kIhQNAXfZ2hc6DnxwAN/ZjQTsJZrPG7KaEs6I/vB8Cq6HuuGq2ihg\nJHWr+3aUfpJhZDFNrFPW3nItvH+aI+UaqGzbr016ktVdAxoTzrFFLJ38NCz5p3vV\nztd0TpBDH0uTi5d6jwtBvxVNwEwTg9cEIUc5zEl2A048c8kMu1OnDa8dqWAIZsmi\nYusWPpbQOGlGIxO1Zq6KLOOQkZrENBlDM5oiG9eRp+BC+L1svqUeaHkdAWE05EF4\nsqRbGmGGsTqqYi/iVMF/XI1KfA1z8oBGoptS50OLaGIL7dsPGs8gVHTQ7yfqRLFL\nIY/FzHUqfXuqdo8GOAlsCBikg0Ssyhy6qTlhi1MCLlI/hYpD7ipUoq7DPVq5xbfd\nT1peV1CUzTl8EIiDzAm4VKV+zLxck795Ha39YpAC+mz9xKkXT1Y+GkrOAkBsu8ko\n72skIy2SYpGPNNQahXlo97crEvXzJU3tcWdF3sP9lwCjW9zaDdk2Qa0Jqc1VZr0p\nkrRqGy9TlcRnExIvme2igODipBu6EFZkn8CtzL9KZaLbMyWMX1PvArNpwKk86D58\na2BSDf+hHD1N8nPrfXialKjkfbqpemC72gYTuuOXe2yunIbOlYxDkWR0eInLiFk7\nj/hM/7G++8YItTsVbEmzc632Lwy5NuInNpd+CIpIYnpirm9S1XA=\n=9S5F\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/53e5882a8682e220431a6c0e8505a1131b69b105",
          "sha": "53e5882a8682e220431a6c0e8505a1131b69b105",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/53e5882a8682e220431a6c0e8505a1131b69b105"
        }
      ],
      "message": "rpc: return result from `addnode` rpc\n\nWhen we call the `addnode` RPC, previous behaviour was to return an RPC\nerror in some situations, but otherwise return null.\n\nThis commit changes that behaviour to instead return an `RPCResult` from\ncalls to `addnode`. This will include the address the result relates to,\nand additionally either a `result` or an `error` field.\n\nThe presence of these fields can be used to determine success, or error\nrespectively.",
      "committer": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2024-07-03T10:45:52Z"
      },
      "author": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2024-07-02T15:24:21Z"
      },
      "sha": "4c199714f91197d419c72aeec09443b633b0f327"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13378562000,
      "node_id": "HRFPE_lADOABII586OWdlhzwAAAAMdbKfQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13378562000",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T10:46:15Z"
    },
    {
      "event": "unlabeled",
      "id": 13379883367,
      "node_id": "UNLE_lADOABII586OWdlhzwAAAAMdgNFn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13379883367",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-03T12:28:45Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2158639334,
      "node_id": "PRR_kwDOABII586Aqjjm",
      "url": null,
      "actor": null,
      "commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "There's a lot of stuff happening in one commit:\r\n1. behaviour change: allow removing a v2 connection when `!node_v2transport`\r\n2. behaviour change: explicitly throwing a a `JSONRPCError` when opening the connection for a `onetry` fails, instead of returning NULL (which makes it indistinguishable from a success operation)\r\n3. behaviour change: always returning a results object with input values and `result==success`\r\n4. clang-tidy fixes\r\n\r\nI would suggest breaking things up a bit and describing the rationale for each.\r\n\r\nSome initial thoughts/questions about each of the above points, addressed individually:\r\n1. can you talk more about the rationale here?\r\n2. this seems like a useful improvement, not being able to distinguish between a failure and success case is problematic\r\n3. this seems like unnecessary API breakage for a one-off change (not just the return type, also the changed error messages) with no clear benefit to the user: they already know the `operation` and `address` fields, and the `result` field is always `true`. I think (ideally consistently) returning newly created objects as a response can be a useful pattern, but doing it as a one-off I'm not really enthusiastic about.\r\n\r\nMore general thoughts:\r\n- if we're going to return something, the peer id seems like actual useful (new) information?\r\n- it seems not very elegant to have the input fields named `node` and `command`, and then call them `address` and `operation` in the result, when they are the exact same thing?",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#pullrequestreview-2158639334",
      "submitted_at": "2024-07-04T10:55:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
    },
    {
      "event": "commented",
      "id": 2209098078,
      "node_id": "IC_kwDOABII586DrCle",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2209098078",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T14:11:40Z",
      "updated_at": "2024-07-04T14:11:40Z",
      "author_association": "MEMBER",
      "body": "> There's a lot of stuff happening in one commit:\r\n\r\nRight, I wanted to open this up specifically while WIP as I ended up less-sure about the idea of the change in general (nor the implementation approach). The final commit does indeed need breaking up, but I wanted to get feedback on the mechanics of the whole change before investing more time into it, so thank you very much for your detailed review!\r\n\r\n> 1. behaviour change: allow removing a v2 connection when `!node_v2transport`\r\n\r\nThis was actually done to align with the helptext: https://github.com/bitcoin/bitcoin/blob/bd5d1688b4311e21c0e0ff89a3ae02ef7d0543b8/src/rpc/net.cpp#L317 but can be easily reverted if undesired (although this way makes more sense to me as removing a node doesn't depend on `-v2transport`).\r\n\r\n\r\n> 2. behaviour change: explicitly throwing a a `JSONRPCError` when opening the connection for a `onetry` fails, instead of returning NULL (which makes it indistinguishable from a success operation)\r\n\r\nCorrect, this is basically the main aim of the PR; to clarify whether we are returning successfully or not. As mentioned in 2nd post above, initially I removed some (or all) of the `JSONRPCError`s in this RPC, as if we are returning a `result` and/or `error` field, then we might as well catch and return errors gracefully to the caller. However that doesn't align with our general RPC ethos where we throw specific `JSONRPCError`s, so the behaviour is introduced here to align with that model.\r\n\r\n> 3. behaviour change: always returning a results object with input values and `result==success`\r\n\r\nI agree this is redundant as mentioned in [comment](https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2205725737)\r\n\r\n> * if we're going to return something, the peer id seems like actual useful (new) information?\r\n\r\nWill be happy to implement this instead, so we have a useful return value.\r\n\r\n> 4. clang-tidy fixes\r\n\r\nok\r\n\r\n \r\n\r\n> 1. can you talk more about the rationale here?\r\n\r\nThe rationale is directly from https://github.com/bitcoin/bitcoin/issues/20552\r\n\r\n \r\n> 3. this seems like unnecessary API breakage for a one-off change (not just the return type, also the changed error messages) with no clear benefit to the user: they already know the `operation` and `address` fields, and the `result` field is always `true`. I think (ideally consistently) returning newly created objects as a response can be a useful pattern, but doing it as a one-off I'm not really enthusiastic about.\r\n\r\nDo you have any suggestions on another way to determine success or failure without a breaking API change? I suppose we could guarantee thrown errors on every fail-case, and retain NULL as indicating success? That could work, but feels less intuitive to me personally.\r\n\r\n>     * it seems not very elegant to have the input fields named `node` and `command`, and then call them `address` and `operation` in the result, when they are the exact same thing?\r\n\r\nAgreed. I will sort those out.\r\n\r\nThanks again! â¤ï¸ \r\n",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2209098078",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381"
    },
    {
      "event": "reviewed",
      "id": 2159102244,
      "node_id": "PRR_kwDOABII586AsUkk",
      "url": null,
      "actor": null,
      "commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, I'd find this useful.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#pullrequestreview-2159102244",
      "submitted_at": "2024-07-04T14:53:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
    },
    {
      "event": "commented",
      "id": 2209184357,
      "node_id": "IC_kwDOABII586DrXpl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2209184357",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T14:59:14Z",
      "updated_at": "2024-07-04T14:59:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The rationale is directly from https://github.com/bitcoin/bitcoin/issues/20552\r\n\r\nSorry, I should have phrased this more clearly, the initial thoughts I mentioned were numbered to be addressing the same numbered elements from the paragraph above. So specifically the rationale for \"behaviour change: allow removing a v2 connection when !node_v2transport\", which I now understand is just to get it in line with the documentation.\r\n\r\n> Do you have any suggestions on another way to determine success or failure without a breaking API change?\r\n\r\nI'm okay with breaking API changes when they're meaningful, such as to address the issue outlined in #20552. My point was about changing the API for no good reason, such as the currently proposed new result, or the changes in error messages such as `\"Error: Node could not be removed. It has not been added previously.\"` -> `\"Node could not be removed. It has not been added previously.\"`",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2209184357",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381"
    },
    {
      "event": "reviewed",
      "id": 2160865613,
      "node_id": "PRR_kwDOABII586AzDFN",
      "url": null,
      "actor": null,
      "commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\nThere is definitely value in ensuring errors are provided to the user (e.g. no longer failing silently for unsuccessful `onetry`).\r\n\r\nI could see there being value in returning the peer id, but think that might be better off for a follow up PR.  This one could focus on fixing the problem of masking the error (and prevent discussion on a return object vs null from impacting what is otherwise a relatively straightforward bug fix).\r\n\r\nIf this PR remains scoped to returning the returning an object then `deprecatedrpc` should be implemented (giving users the ability to use the old return behavior temporarily).  Something like `-deprecatedrpc=addnode`.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#pullrequestreview-2160865613",
      "submitted_at": "2024-07-05T14:44:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
    },
    {
      "event": "commented",
      "id": 2211829520,
      "node_id": "IC_kwDOABII586D1dcQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2211829520",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-06T17:42:24Z",
      "updated_at": "2024-07-06T17:42:24Z",
      "author_association": "MEMBER",
      "body": "The return value seems entirely redundant. Maybe it should just be the new peer id (Object-encapsulated for future extension), and make `getpeerinfo` accept a peer id param to just investigate that one?",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#issuecomment-2211829520",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30381"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1665533399",
      "pull_request_review_id": 2158639334,
      "id": 1665533399,
      "node_id": "PRRC_kwDOABII585jRgXX",
      "diff_hunk": "@@ -325,42 +332,41 @@ static RPCHelpMan addnode()\n {\n     const auto command{self.Arg<std::string>(\"command\")};\n     if (command != \"onetry\" && command != \"add\" && command != \"remove\") {\n-        throw std::runtime_error(\n-            self.ToString());\n+        throw std::runtime_error(self.ToString());\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n     CConnman& connman = EnsureConnman(node);\n-\n     const auto node_arg{self.Arg<std::string>(\"node\")};\n     bool node_v2transport = connman.GetLocalServices() & NODE_P2P_V2;\n     bool use_v2transport = self.MaybeArg<bool>(\"v2transport\").value_or(node_v2transport);\n \n-    if (use_v2transport && !node_v2transport) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Error: v2transport requested but not enabled (see -v2transport)\");\n-    }\n+    UniValue result(UniValue::VOBJ);\n+    result.pushKV(\"address\", node_arg);\n+    result.pushKV(\"operation\", command);\n \n-    if (command == \"onetry\")\n-    {\n-        CAddress addr;\n-        connman.OpenNetworkConnection(addr, /*fCountFailure=*/false, /*grant_outbound=*/{}, node_arg.c_str(), ConnectionType::MANUAL, use_v2transport);\n-        return UniValue::VNULL;\n+    if (command != \"remove\" && use_v2transport && !node_v2transport) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Error: Adding v2transport connections requires -v2transport init flag to be set.\");\n     }\n \n-    if (command == \"add\")\n-    {\n+    std::string error_message;",
      "path": "src/rpc/net.cpp",
      "position": 50,
      "original_position": 50,
      "commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "original_commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: is this necessary?",
      "created_at": "2024-07-04T10:54:17Z",
      "updated_at": "2024-07-04T10:55:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#discussion_r1665533399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1665533399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 352,
      "original_line": 352,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1665813596",
      "pull_request_review_id": 2159102244,
      "id": 1665813596,
      "node_id": "PRRC_kwDOABII585jSkxc",
      "diff_hunk": "@@ -325,42 +332,41 @@ static RPCHelpMan addnode()\n {\n     const auto command{self.Arg<std::string>(\"command\")};\n     if (command != \"onetry\" && command != \"add\" && command != \"remove\") {\n-        throw std::runtime_error(\n-            self.ToString());\n+        throw std::runtime_error(self.ToString());\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n     CConnman& connman = EnsureConnman(node);\n-\n     const auto node_arg{self.Arg<std::string>(\"node\")};\n     bool node_v2transport = connman.GetLocalServices() & NODE_P2P_V2;\n     bool use_v2transport = self.MaybeArg<bool>(\"v2transport\").value_or(node_v2transport);\n \n-    if (use_v2transport && !node_v2transport) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Error: v2transport requested but not enabled (see -v2transport)\");\n-    }\n+    UniValue result(UniValue::VOBJ);\n+    result.pushKV(\"address\", node_arg);\n+    result.pushKV(\"operation\", command);\n \n-    if (command == \"onetry\")\n-    {\n-        CAddress addr;\n-        connman.OpenNetworkConnection(addr, /*fCountFailure=*/false, /*grant_outbound=*/{}, node_arg.c_str(), ConnectionType::MANUAL, use_v2transport);\n-        return UniValue::VNULL;\n+    if (command != \"remove\" && use_v2transport && !node_v2transport) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Error: Adding v2transport connections requires -v2transport init flag to be set.\");\n     }\n \n-    if (command == \"add\")\n-    {\n+    std::string error_message;\n+\n+    if (command == \"onetry\") {\n+        if (!connman.OpenNetworkConnection(CAddress(), false, {}, node_arg.c_str(), ConnectionType::MANUAL, use_v2transport)) {\n+            throw JSONRPCError(RPC_CLIENT_NODE_NOT_ADDED, \"Unable to open connection\");",
      "path": "src/rpc/net.cpp",
      "position": 54,
      "original_position": 54,
      "commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "original_commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Suggest `Unable to open connection to <peer address>`",
      "created_at": "2024-07-04T14:50:05Z",
      "updated_at": "2024-07-04T14:53:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#discussion_r1665813596",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1665813596"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 356,
      "original_line": 356,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1665816378",
      "pull_request_review_id": 2159102244,
      "id": 1665816378,
      "node_id": "PRRC_kwDOABII585jSlc6",
      "diff_hunk": "@@ -316,7 +316,14 @@ static RPCHelpMan addnode()\n                     {\"command\", RPCArg::Type::STR, RPCArg::Optional::NO, \"'add' to add a node to the list, 'remove' to remove a node from the list, 'onetry' to try a connection to the node once\"},\n                     {\"v2transport\", RPCArg::Type::BOOL, RPCArg::DefaultHint{\"set by -v2transport\"}, \"Attempt to connect using BIP324 v2 transport protocol (ignored for 'remove' command)\"},\n                 },\n-                RPCResult{RPCResult::Type::NONE, \"\", \"\"},\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"operation\", \"The operation called (onetry/add/remove)\"},\n+                        {RPCResult::Type::STR, \"result\", \"The result of the operation (success/failed)\"},",
      "path": "src/rpc/net.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "original_commit_id": "4c199714f91197d419c72aeec09443b633b0f327",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agree with @stickies-v that returning the peer id would be more useful than the result.",
      "created_at": "2024-07-04T14:52:43Z",
      "updated_at": "2024-07-04T14:53:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30381#discussion_r1665816378",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1665816378"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30381"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "RIGHT"
    }
  ]
}