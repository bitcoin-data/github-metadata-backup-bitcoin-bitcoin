{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33755",
    "id": 2966899263,
    "node_id": "PR_kwDOABII586w10o_",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33755",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33755.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33755.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33755/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33755/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
    "number": 33755,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Relax standardness rules regarding CHECKMULTISIG",
    "user": {
      "login": "roconnor-blockstream",
      "id": 21371712,
      "node_id": "MDQ6VXNlcjIxMzcxNzEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/roconnor-blockstream",
      "html_url": "https://github.com/roconnor-blockstream",
      "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
      "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
      "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
      "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
      "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "In PR #5247, the STRICTENC standardness rules were tightened with regards to CHECKMULTISIG so that unparsable public keys fail the script when they are encountered. The overall purpose here was to disallow the use of confusing hybrid public keys by policy while keeping policy compatible (i.e., strictly stronger) with consensus rules.\r\n\r\nComments in PR #5247 note that \"I don't believe it should affect any system in production\"; however, this belief is/was false. Counterparty was stuffing data blobs into multisig pubkey lists, but these UTXOs were meant to be spendable because, although some pubkeys were unparsable, other keys were parsable, and the UTXOs were meant to be spent by those valid keys.\r\n\r\nBut in tackling the hybrid key issue, PR #5247 disallowed any unparsable keys in multisigs, whether or not they were hybrid, and whether or not the signature was meant to satisfy a hybrid key.\r\n\r\nIn production, Counterparty UTXOs were inadvertently caught up in this standardness rule change and became \"soft confiscated.\"  That is, they were no longer spendable by policy but still recoverable if users are able to somehow bypass standardness by mining their transactions themselves, or getting out-of-band assistance from some other miner.\r\n\r\nI understand that Bitcoin Core never intended to \"soft confiscate\" any UTXOs by policy changes.  This change addresses the problem.\r\n\r\nWith this change, only hybrid formatted keys and empty keys will cause early abort in CHECKMULTISIG operations. Otherwise, failing signature checks revert to their consensus behaviour of testing subsequent public keys.\r\n\r\nCounterparty UTXOs were never intended to make use of hybrid keys and thus shouldn't have any passing signatures using hybrid keys.\r\n",
    "labels": [
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      }
    ],
    "created_at": "2025-10-31T14:02:13Z",
    "updated_at": "2025-11-24T19:11:06Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "f709d0b2c1175baedcdef2afb85027b48f2973ab",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "roconnor-blockstream:multisig-standardness-2025-10",
      "ref": "multisig-standardness-2025-10",
      "sha": "4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 86512803,
        "node_id": "MDEwOlJlcG9zaXRvcnk4NjUxMjgwMw==",
        "name": "bitcoin",
        "full_name": "roconnor-blockstream/bitcoin",
        "owner": {
          "login": "roconnor-blockstream",
          "id": 21371712,
          "node_id": "MDQ6VXNlcjIxMzcxNzEy",
          "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/roconnor-blockstream",
          "html_url": "https://github.com/roconnor-blockstream",
          "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
          "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
          "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
          "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
          "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/roconnor-blockstream/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/roconnor-blockstream/bitcoin",
        "archive_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/events",
        "forks_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/roconnor-blockstream/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:roconnor-blockstream/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/roconnor-blockstream/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/hooks",
        "svn_url": "https://github.com/roconnor-blockstream/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 267467,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-12T14:32:01Z",
        "created_at": "2017-03-28T22:24:52Z",
        "updated_at": "2025-05-20T10:20:01Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "47618446a06d67876b9e16f6895cba28e7501729",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38251,
        "stargazers_count": 86979,
        "watchers_count": 86979,
        "size": 296256,
        "default_branch": "master",
        "open_issues_count": 736,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-24T15:24:04Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-11-25T01:53:34Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33755"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 6,
    "deletions": 20,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 0,
    "comments": 24
  },
  "events": [
    {
      "event": "commented",
      "id": 3473227082,
      "node_id": "IC_kwDOABII587PBT1K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3473227082",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T14:02:17Z",
      "updated_at": "2025-11-03T23:42:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33755.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3483040703) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33759](https://github.com/bitcoin/bitcoin/pull/33759) (Fix BIP143 standardness rules for CHECKMULTISIG by roconnor-blockstream)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3473227082",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "labeled",
      "id": 20635189338,
      "node_id": "LE_lADOABII587VF4d2zwAAAATN9ABa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20635189338",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T14:07:58Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 3473633999,
      "node_id": "IC_kwDOABII587PC3LP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3473633999",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T15:35:27Z",
      "updated_at": "2025-10-31T15:35:27Z",
      "author_association": "MEMBER",
      "body": "If anyone has documentation showing the format (pre-OP_RETURN) this would be useful.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3473633999",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3473751931,
      "node_id": "IC_kwDOABII587PDT97",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3473751931",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T15:58:32Z",
      "updated_at": "2025-10-31T15:58:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "> If anyone has documentation showing the format (pre-OP_RETURN) this would be useful.\r\n\r\nhttps://docs.counterparty.io/docs/advanced/protocol/#transactions and https://github.com/CounterpartyXCP/counterparty-core/blob/master/counterparty-core/counterpartycore/lib/api/composer.py#L304 should give an idea. AFAICT the real pubkey goes last.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3473751931",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20639188296,
      "node_id": "HRFPE_lADOABII587VF4d2zwAAAATOMQVI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20639188296",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "bbfaed4983c9f4440a6d60b870949bcb90d09486",
      "commit_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/commits/bbfaed4983c9f4440a6d60b870949bcb90d09486",
      "created_at": "2025-10-31T17:03:24Z"
    },
    {
      "event": "commented",
      "id": 3474035674,
      "node_id": "IC_kwDOABII587PEZPa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474035674",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T17:05:16Z",
      "updated_at": "2025-10-31T17:05:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "This change affects enforcement of `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` which afaics should not be weakened [bip143](https://github.com/bitcoin/bips/blob/master/bip-0143.mediawiki#restrictions-on-public-key-type)?",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3474035674",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3474132937,
      "node_id": "IC_kwDOABII587PEw_J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474132937",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T17:33:54Z",
      "updated_at": "2025-10-31T17:33:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "@ajtowns I did consider that.\r\n\r\nFirstly we should note that `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` and BIP-143 rules regarding compressed public keys are not consensus rules, but policy only.  So at least it *can* be weakened.\r\n\r\nRegarding as to whether it should be weakened: Currently Bitcoin Core's implementation choice for CHECKMULTISIG is such that once enough signatures match the pubkeys, no further pubkeys in the CHECKMULTISIG stack are inspected for well-formedness policy constraints.  That is to say, current policy lets you have uncompressed pubkeys (or at least data that looks like uncompressed pubkeys) on one side of the stack of pubkeys but not the other.  This change in policy makes it (more) symmetric so that you can have uncompressed pubkeys (or data that looks like uncompressed pubkeys) on either end of the stack of pubkeys, but those uncompressed pubkeys cannot be used in passing signature checks.\r\n\r\nNow the Counterparty UTXO predates Segwit V0, so we could refactor the code to keep the current asymmetric policy rules regarding Segwit V0 script, and I would be fine with that.  However, my current judgement is that, since data-that-looks-like-uncompressed-pubkeys is already allowed on one side of the pubkey stack in Segwit V0 script, it isn't worth the code complexity to maintain this policy for the sake of Segwit V0 script.  There is no real advantage in doing that extra work.  If other folks do think it is worthwhile for reasons I cannot imagine, I'm fine with that too.",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3474132937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "mentioned",
      "id": 20639752988,
      "node_id": "MEE_lADOABII587VF4d2zwAAAATOOaMc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20639752988",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T17:33:55Z"
    },
    {
      "event": "subscribed",
      "id": 20639753028,
      "node_id": "SE_lADOABII587VF4d2zwAAAATOOaNE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20639753028",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T17:33:56Z"
    },
    {
      "event": "commented",
      "id": 3474594418,
      "node_id": "IC_kwDOABII587PGhpy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474594418",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T19:21:46Z",
      "updated_at": "2025-10-31T19:21:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "If you're deliberately changing the standardness rules specified in BIP143, that should be in the PR description, and possibly proposed as an update to the BIP. If you're not deliberately changing them, they shouldn't be changed by accident. Personally, I don't see the justification for changing them here, though I don't really understand why it was specced as a policy rule rather than a consensus one at the time, either.\r\n\r\nPersonally, I don't really understand the motivation for reconsidering a policy rule that's been in place for 11 years, either, and for which new adoption would only be less fee efficient than what's already allowed. If there were real coins locked due to this policy, it seems like they should have been already recovered via getting a non-standard spend mined directly.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3474594418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3474639402,
      "node_id": "IC_kwDOABII587PGsoq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474639402",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T19:36:50Z",
      "updated_at": "2025-10-31T20:21:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "I guess we could change BIP143.  Currently the text reads: \r\n\r\n> Each public key passed to a sigop inside version 0 witness program must be a compressed key: the first byte MUST be either 0x02 or 0x03, and the size MUST be 33 bytes. Transactions that break this rule will not be relayed or mined by default.\r\n\r\nNote that is **not** how Bitcoin Core implements `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` currently as you can pass pubkeys to CHECKMULTISIG that violate this policy when the signature stack is used up before reaching the end of the pubkey stack.\r\n\r\nSo the current status is that the `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` policy implementation does not match the text of BIP143. So to that extent this PR doesn't really break anything that isn't already broken.\r\n\r\nEdit: Or we could change how `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` is implement to correctly follow BIP143.  I'm fine with that too.  Just let me know.",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3474639402",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3474717031,
      "node_id": "IC_kwDOABII587PG_ln",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474717031",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T20:04:28Z",
      "updated_at": "2025-10-31T20:10:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "> If there were real coins locked due to this policy, it seems like they should have been already recovered via getting a non-standard spend mined directly.\r\n\r\nI don't know why you would think that they should have already been recovered.  You think anyone can just call up a mining pool and get their non-standard transactions mined?  How much money needs to be at stake before you can even get a pool's attention?  Or how small in value do UTXOs have to be so that it is okay to soft-confiscate it since it isn't worth fixing for such a little amount?\r\n\r\nAnyhow, AFAIU Counterparty was using bare multisigs, so in theory we don't have to speculate and we can just look for such UTXOs that are waiting to be freed.  Someone please correct me if I'm wrong and Counterparty was using p2sh multisigs.\r\n\r\nI haven't checked my IRC logs, but my recollection is the person I was chatting with who had their UTXO's soft-confiscated by Bitcoin Core's policy change decided the amount of funds were small and they were not going to pursue it.  However what was a small amount of Bitcoin 11 years ago may not be a small amount today.\r\n\r\nAgain, this soft-confiscation was inadvertent.  PR #5247 was trying to address hybrid keys, not Counterparty UTXOs.  An error was made and the result was arguably unjust towards those folks holding those UTXOs.\r\n\r\nRecent posts on the mailing list made me aware that people incorrectly believe that Bitcoin Core has never soft-confiscated folk's UTXOs before, but I know that isn't true.  I'm not sure what my thinking was at the time, but had I thought there it was a deliberate policy decision against Counterparty transactions. However, upon rereviewing PR #5247 last night I came to understand the policy was never intended to soft-confiscate Counterparty UTXOs.  And this morning I realized we can fix this injustice.  Better late than never.\r\n\r\nSoft-confiscating these transactions was wrong, and we should fix mistakes if we can when we realize we have made one, even if the mistake was made 11 years ago.  This code is the way PR #5247 ought to have been written in the first place.",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3474717031",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3475291617,
      "node_id": "IC_kwDOABII587PJL3h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3475291617",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-01T00:24:41Z",
      "updated_at": "2025-11-01T00:24:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > If there were real coins locked due to this policy, it seems like they should have been already recovered via getting a non-standard spend mined directly.\r\n> \r\n> I don't know why you would think that they should have already been recovered. You think anyone can just call up a mining pool and get their non-standard transactions mined?\r\n\r\nThat's what things like slipstream allow today, so, yes? Template building by hashers also make that more accessible today than previously. In any event, if it's not worth calling up a single miner and getting it mined, it also doesn't seem worth changing the default policy for every miner that follows our defaults.\r\n\r\n> How much money needs to be at stake before you can even get a pool's attention? Or how small in value do UTXOs have to be so that it is okay to soft-confiscate it since it isn't worth fixing for such a little amount?\r\n\r\nI don't think chastising the reader about confiscating coins is constructive. If you want to make those coins easily accessible now, that's a fine thing to argue for, but it should be done on its merits, not by attempting to guilt trip people. This PR isn't passing CI, for instance.\r\n\r\n> Anyhow, AFAIU Counterparty was using bare multisigs, so in theory we don't have to speculate and we can just look for such UTXOs that are waiting to be freed.\r\n\r\nThere seem to be six utxos from prior to block 400,000 that currently have a value of more than $100 USD that fit the description here:\r\n\r\n * [176be48b7e1091915b48c12c01cfeb8e301dba09988c49314e696906ca383cf2:0](https://mempool.space/tx/176be48b7e1091915b48c12c01cfeb8e301dba09988c49314e696906ca383cf2) - 2014-03-06 960k sat / $1050\r\n * [3482ea1d219120b13f3be49f63fd7079136785dff2bf7487726b640da5876e33:0](https://mempool.space/tx/3482ea1d219120b13f3be49f63fd7079136785dff2bf7487726b640da5876e33) - 2014-09-11 2.0M sat / $2190\r\n * [d6d89928cf8cf92ae3db54898329174c9cde766f63a8aa0cca6da6d17bcaf17d:0](https://mempool.space/tx/d6d89928cf8cf92ae3db54898329174c9cde766f63a8aa0cca6da6d17bcaf17d) - 2015-02-13 3.8M sat / $4160\r\n * [2cc8dcd16da3912e54429946eecc5f7f1755ea3bbbd0ea60e5906209c73d6b14:0](https://mempool.space/tx/2cc8dcd16da3912e54429946eecc5f7f1755ea3bbbd0ea60e5906209c73d6b14) - 2015-02-20 500k sat / $547\r\n * [28a21c72d59649744a8c93683eb5d28a14e5ebcfa1252d63553a81dcabdda140:0](https://mempool.space/tx/28a21c72d59649744a8c93683eb5d28a14e5ebcfa1252d63553a81dcabdda140) - 2015-03-28 100k sat / $109\r\n * [97ae8b20c783ed6deecc2a4578a0c36861296ff40146fb3cc9b10f0944dca960:0](https://mempool.space/tx/97ae8b20c783ed6deecc2a4578a0c36861296ff40146fb3cc9b10f0944dca960) - 2015-10-02 200k sat / $219\r\n \r\nThe 3.8M sat output was worth about $11 at the time, so I could quite easily see it having been written off as a loss and access to the corresponding private keys not having been maintained in the meantime.\r\n\r\nThere are an additional 15,133 outputs from prior to block 400k that look like they might fit this case, all with between 780 and 30,919 sats, totalling 1.0148,8939 BTC, which had a total value of about $472 if I pick the highest BTC price in the above timeframe. (Or at least there were as at block 897666 which is the utxo data I have handy for analysing. This likely includes some false positives as well, though I think I eliminated most things)\r\n\r\nFor comparison, it looks to me like there was 0.9068,0410 BTC (so $422 at the time by the same logic) across perhaps 11k bare multisig addresses that can only be spent via uncompressed pubkeys (eg [this](https://mempool.space/tx/7af3670ba59cd6e11e0a36149dcc2042e16e5d86d155ca8bbdba1beb59625feb) looks like ~10M sats worth ~$10k USD today, sent to a 2/3 uncompressed bare multisig, from the same multisig, so at one point certainly spendable).\r\n\r\n> Soft-confiscating these transactions was wrong, and we should fix mistakes if we can when we realize we have made one, [...]\r\n\r\nSoft-confiscating is always a risk with policy restrictions, but there is also already a straight-forward solution to all problems in that class: talk to a miner directly.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3475291617",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3475458507,
      "node_id": "IC_kwDOABII587PJ0nL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3475458507",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-01T02:20:06Z",
      "updated_at": "2025-11-01T02:20:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Those outputs look like multisigs that are composed out of valid compressed or uncompressed pubkeys, and I believe spending them would pass standardness rules (except for 3482ea1d219120b13f3be49f63fd7079136785dff2bf7487726b640da5876e33:0, which appears to simply be a broken script).\r\n\r\nThe UTXO's I'm looking for would have pubkeys with an invalid prefix, or an invalid length for their prefix.\r\n\r\nBased on the code prior to https://github.com/CounterpartyXCP/counterparty-core/pull/443/commits/f1a8c82914b2f913560496e3d1becc1b63f88118 I would specifically expect a 1-of-3 multisig where at least 1 of the keys is 33 bytes but does not begin with 0x02 or 0x03.",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3475458507",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3476337221,
      "node_id": "IC_kwDOABII587PNLJF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3476337221",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-01T12:23:31Z",
      "updated_at": "2025-11-01T12:23:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Bitcoin Core relay policy is largely motivated by not relaying third party malleable transactions.  There is no reason to relay transactions if they are just going to be modified before they get mined.\r\n\r\nGiven the, unfortunately extensive, amount of malleability generally afford by Bitcoin Script's design, sometimes policy just limits third party malleable transactions to some canonical form, one that minimizes transaction size so that miners are not incentivized to reduce the size further.  Hence the policy around canonical pushes and IF arguments, cleanstack, etc. \r\n\r\nClosely related is policy around fee bumping, where policy is addressing abuse from first party malleable transactions to prevent excessively relaying transactions that aren't going to be mined due to replacement.\r\n\r\nThere are a couple of relay policies around soft-fork points. The use of NOP*n* transactions are banned by policy.  Again these forms of script are unused by folks, who have a perfectly good normal NOP operation that they could have used instead.  Using OP_NOP7 is either carelessness or maliciousness.\r\n\r\nThere is some other policy around OP_RETURN which is about limiting the damage of externalities caused by users who are motivated to store data on the blockchain.  This policy was recently improved, so that's good.\r\n\r\nThen we get to hybrid keys policy...\r\n\r\nArguably hybrid keys don't even deserve to be banned by policy to begin with.  They are do not cause malleability issues in most practical cases.  In particular, their malleability problems are no worse than malleability problems induced by uncompressed pubkeys, which are not banned.\r\n\r\nThe main problem with hybrid keys is that they are weird, and that implementers of the Bitcoin protocol are likely to mess it up.  Hybrid key policy is there just in case maybe we want to soft-fork them out one day.  In my opinion the Bitcoin protocol already has a lot of weirdness in it and is hard to reimplement correctly anyways.  Hybrid keys are no more abusive than uncompressed pubkeys and for that reason we are probably never going to soft-fork them out.  Folks already are motivated to avoid them for the same reason they avoid uncompressed pubkeys.  Similar to using NOP7, users of hybrid keys would just be doing so to be malicious.  But unlike NOP7 hybrid keys don't exist to soft-fork in new behaviour.\r\n\r\nBut fine, this PR isn't proposing the removal of hybrid key policy.  Transactions using hybrid keys remain disallowed in this PR.\r\n\r\nThe problem is that PR #5247 doesn't *just* ban the use of hybrid keys.  The implementation goes *way* overboard and disallows all sorts of data passed to CHECKMULTISIG that isn't even hybrid keys.\r\n\r\nOkay, but maybe the policy implemented #5247 just happens to be good for other reasons beyond its primary purpose?  Isn't banning arbitrary data in CHECKMULTISIG good?  I don't know if it is good or not, but #5247 doesn't ban arbitrary data in CHECKMULTISIG.  #5247 still allows arbitrary data pushes in CHECKMULTISIG so long as they occur after all the signatures are consumed.  So this policy implementation isn't providing any additional benefits.\r\n\r\nOkay, but at least the policy implemented #5247 isn't harming anyone right?  This is the crux of the problem with #5247: it *has* harmed Bitcoin users.  I cannot think of any other relay policy implemented in Bitcoin Core that has ever disallowed **actively used** non-malicious transactions before.\r\n\r\nAre the Counterparty transactions that were banned #5247 malicious?  Maybe, but I don't think so.  The blockspace used by them are identical to a normal 1-of-3 multisig transaction.  In fact, in response to #5247 [Counterparty simply reversed the order of their \"pubkey\" data in their protocol](https://github.com/CounterpartyXCP/counterparty-core/commit/f1a8c82914b2f913560496e3d1becc1b63f88118#diff-b9154ac64e110b5561c5bcadc77b532aaea3f44eb53e9c4a76ae2ed3c6fad8b8L231-R261) in order to satisfy the restrictions imposed by #5247. (They also did a better job hiding their data pushes look more like pubkeys to prevent further policy interference). So however malicious their transactions are, their replacement is equally malicious and it isn't banned.  Because disallowing \"bad data\" was never the purpose of #5247, it isn't surprising that the policy doesn't stop it.\r\n\r\nBut Counterparty adjusting their protocol to comply with #5247 does nothing to help the folks that were **already** using their older protocol, and is the big problem, and why I think this is, in fact, a big deal.  Again, I cannot think of any other relay policy implemented in Bitcoin Core that has ever banned **actively used** non-malicious, non-malleable transactions before or since.\r\n\r\nIt undermines Bitcoin's premise as permissionless money if every time a user comes up with an novel, safe, secure, non-malicious use of Bitcoin as it is today, they run the risk of their UTXOs being thoughtlessly banned without consideration of their use case.\r\n\r\nAnd yes #5247 did ban these Counterparty UTXOs without consideration.  When petertodd **correctly** noted \"Equally this change may render some users' funds unspendable, potentially even funds locked in P2SH outputs.\" sipa replied \"I don't believe it should affect any system in production, as hybrid pubkeys have been non-standard since v0.8.\"  No one at the time seemed to be aware that #5247 was affecting in use Counterparty transactions!  The PR didn't just **maybe** render some users's funds unspendable, it actually did!  sipa also said \"AFAIK does not change anything for tx acceptance except in weird checksig+not cases\", but this isn't a checksig+not case.\r\n\r\nI'm am quite certain that #5247 would have never been accepted in its form had the authors been aware that they were banning **actively used** non-malicious transaction protocols.\r\n\r\nAs far as guilt tripping goes, I personally feel bad that long ago when someone came to me asking for my help in spending their transaction, I had to tell them something like \"SFYL, redeeming your UTXO is now banned from the Bitcoin network.  You will require miner assistance\".  And today I feel much worse now that I understand that the banning of their UTXO was actually unintentional.  Had I just dug into the issue a little bit more and seen the orginal purpose of the code, we could have perhaps fixed this policy implementation a long time ago.\r\n\r\nSo in summary:\r\n\r\n1. We probably shouldn't even bother banning hybrid keys by policy, but even this PR still keeps the use of hybrid keys disallowed.\r\n2. The policy rules implemented in #5247 go well beyond what is necessary to ban hybrid keys, banning other sorts of pubkey arguments within CHECKMULTISIG.\r\n3. The policy rules implemented in #5247 do not comprehensively protect against all non-pubkey arguments within CHECKMULTISIG and thus are not providing other sorts of relay protection.\r\n4. Yes we should feel bad when we impose policy restrictions on users that interrupt existing, non-malicious, UTXOs / uses of Bitcoin.\r\n5. We wouldn't disallow uncompressed pubkey by policy, and we shouldn't have disallowed old-style Counterparty transaction. Just because old-style Counterparty transactions are fewer in value and lower in number doesn't make them unworthy of our consideration.\r\n6. And we should feel doubly bad when we impose such policy restrictions unintentionally and without consideration for their existing usage.\r\n7.  Folks are trusting Bitcoin with their money and thoughtlessly changing policy out from under them undermines the premise of Bitcoin as a safe, permissionless system for anyone to use.\r\n8. And we should feel quadruply bad when we **do** have an opportunity to make the situation right again, no matter how late, and decide not to take it because, well it was just all so long ago.",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3476337221",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3476339242,
      "node_id": "IC_kwDOABII587PNLoq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3476339242",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-01T12:27:14Z",
      "updated_at": "2025-11-01T12:27:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "@TheCharlatan I touch on this in the above, but I do want to explicitly note that the order of public keys that Counterparty uses changed in response to #5247 and the [the keys used to be in the other order](https://github.com/CounterpartyXCP/counterparty-core/commit/f1a8c82914b2f913560496e3d1becc1b63f88118#diff-b9154ac64e110b5561c5bcadc77b532aaea3f44eb53e9c4a76ae2ed3c6fad8b8L231-R261).",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3476339242",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "mentioned",
      "id": 20651910286,
      "node_id": "MEE_lADOABII587VF4d2zwAAAATO8ySO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20651910286",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-01T12:27:16Z"
    },
    {
      "event": "subscribed",
      "id": 20651910293,
      "node_id": "SE_lADOABII587VF4d2zwAAAATO8ySV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20651910293",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-01T12:27:16Z"
    },
    {
      "event": "commented",
      "id": 3482566467,
      "node_id": "IC_kwDOABII587Pk79D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3482566467",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T20:55:54Z",
      "updated_at": "2025-11-03T20:55:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The problem is that PR #5247 doesn't _just_ ban the use of hybrid keys. The implementation goes _way_ overboard and disallows all sorts of data passed to CHECKMULTISIG that isn't even hybrid keys.\r\n\r\nI think the process was:\r\n\r\n * hybrid keys were banned as a result of:\r\n   * discussion on the list at https://gnusha.org/pi/bitcoindev/20120616192651.GA13438@vps7135.xlshosting.net/t/#u\r\n   * implemented via #1742 (test only changes)\r\n   * activated by #1677 (see https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7794418)\r\n   * (both PRs merged on the same day)\r\n   * this was released in 0.8.0 (2013-02-19)\r\n * this change did not affect people using random data as multisig pubkeys, as signatures would never have valid against those keys anyway\r\n * this change introduced a bug where consensus invalid transactions would be accepted to the mempool and mined, see discussion at https://gnusha.org/pi/bitcoindev/20141106103820.GA17096@savin.petertodd.org/t/#u \r\n * this bug was fixed by #5247\r\n * that fix was included in 0.10.0 (2015-02-16)\r\n * a side-effect of this fix, that was not observed at the time, was that it also prevented consensus-valid spends where a signature applied to a valid key deeper in the stack than a fake key\r\n * this behaviour affected counterparty spends, for which a fix was made (~2014-12-02)\r\n * this was reported as issue #5939 (2015-03-23) and #9455 (2017-01-02)\r\n\r\n> The UTXO's I'm looking for would have pubkeys with an invalid prefix, or an invalid length for their prefix.\r\n>\r\n> Based on the code prior to https://github.com/CounterpartyXCP/counterparty-core/commit/f1a8c82914b2f913560496e3d1becc1b63f88118 I would specifically expect a 1-of-3 multisig where at least 1 of the keys is 33 bytes but does not begin with 0x02 or 0x03.\r\n\r\nAlso, the latter keys should be the ones that are invalid, as they will be popped off the stack first.\r\n\r\nFor that, it looks to me like there are 147,470 such utxos from prior to block 400k, containing a total of 9.2591,3010 BTC, though only four utxos are individually worth more than $20 today:\r\n\r\n * [a4c7a42d51d84cc9d01c2ab2b75ce326ea206bbc0e749194f49c93b5acc1c70c:0](https://mempool.space/tx/a4c7a42d51d84cc9d01c2ab2b75ce326ea206bbc0e749194f49c93b5acc1c70c) 800000 sats, block 363216\r\n * [d8214c4b26dbdeca3aa62c645c582d3e2527a8f8eb6f193e921d1f930eb06a62:1](https://mempool.space/tx/d8214c4b26dbdeca3aa62c645c582d3e2527a8f8eb6f193e921d1f930eb06a62) 543000 sats, block 286953\r\n * [4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1](https://mempool.space/tx/4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6) 21720 sats, block 280112\r\n * [7be22151bc96041932830d79c2af4472e40e9dedaa29018fff6757501e7855c6:0](https://mempool.space/tx/7be22151bc96041932830d79c2af4472e40e9dedaa29018fff6757501e7855c6) 20000 sats, block 344398\r\n\r\nThat still feels a bit borderline to me: if they actually get reclaimed, that's great; but when they're all that old and that low individual value, the chances that anything much will happen still seems low to me.\r\n\r\nFor context, 0.8.0 came out around block 222,000, the counterparty commit cited above was made around block 332,500,\r\n0.10.0 came out around 343,500. The earliest utxos affected seem to be:\r\n\r\n * [057d10cc33455f4f7af44d2f030b3866e3a16416ecf984e304c76abe98393c1d:1](https://mempool.space/tx/057d10cc33455f4f7af44d2f030b3866e3a16416ecf984e304c76abe98393c1d) 10860 sats, block 280112\r\n * [4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1](https://mempool.space/tx/4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6) 21720 sats, block 280112\r\n * [3ac6ea5b329832e2dc31ead6c5277beccb7d95f0d9f20f256f97067223c81e00:1](https://mempool.space/tx/3ac6ea5b329832e2dc31ead6c5277beccb7d95f0d9f20f256f97067223c81e00) 10860 sats, block 280114\r\n * [66fc1409ac6646bd8c267de89c57d2204e31bb6dfce9ee2a3ab18416fadf9e9c:1](https://mempool.space/tx/66fc1409ac6646bd8c267de89c57d2204e31bb6dfce9ee2a3ab18416fadf9e9c) 10860 sats, block 280156\r\n * [6ecb7518eaabf0a655ea6f67af9145cb625f08e43cdb8884ba4959a9c404e99e:0](https://mempool.space/tx/6ecb7518eaabf0a655ea6f67af9145cb625f08e43cdb8884ba4959a9c404e99e) 10860 sats, block 280336\r\n * [6ecb7518eaabf0a655ea6f67af9145cb625f08e43cdb8884ba4959a9c404e99e:1](https://mempool.space/tx/6ecb7518eaabf0a655ea6f67af9145cb625f08e43cdb8884ba4959a9c404e99e) 10860 sats, block 280336\r\n\r\n> As far as guilt tripping goes, I personally feel bad that long ago \r\n> 4. Yes we should feel bad\r\n> 6. And we should feel doubly bad\r\n> 8. And we should feel quadruply bad\r\n\r\nI'm sorry you feel bad about this, but I think emotional arguments are more destructive than constructive in regards to technical issues. Maybe that's okay in moderation, but it's definitely been overused over the past 6+ months.\r\n\r\nI think the minimally intrusive change here would be replace `!IsCompressedOrUncompressedPubkey()` with `IsEmptyOrHybridPubkey()` -- continue to fail when attempting to check a sig against an empty pubkey or a hybrid pubkey, but just allow the signature check to fail for anything else that's not compressed or uncompressed. The empty pubkey allows existing tests to continue to pass, and hybrid pubkey at least doesn't match anything in any of the bare multisigs that I found. I believe that would not change the BIP143 behaviour.\r\n\r\n```diff\r\n--- a/src/script/interpreter.cpp\r\n+++ b/src/script/interpreter.cpp\r\n@@ -61,26 +61,15 @@ static inline void popstack(std::vector<valtype>& stack)\r\n     stack.pop_back();\r\n }\r\n\r\n-bool static IsCompressedOrUncompressedPubKey(const valtype &vchPubKey) {\r\n-    if (vchPubKey.size() < CPubKey::COMPRESSED_SIZE) {\r\n-        //  Non-canonical public key: too short\r\n-        return false;\r\n-    }\r\n-    if (vchPubKey[0] == 0x04) {\r\n-        if (vchPubKey.size() != CPubKey::SIZE) {\r\n-            //  Non-canonical public key: invalid length for uncompressed key\r\n-            return false;\r\n-        }\r\n-    } else if (vchPubKey[0] == 0x02 || vchPubKey[0] == 0x03) {\r\n-        if (vchPubKey.size() != CPubKey::COMPRESSED_SIZE) {\r\n-            //  Non-canonical public key: invalid length for compressed key\r\n-            return false;\r\n+static bool IsEmptyOrHybridPubKey(const valtype &vchPubKey)\r\n+{\r\n+    if (vchPubKey.size() == 0) return true;\r\n+    if (vchPubKey.size() == CPubKey::SIZE) {\r\n+        if (vchPubKey[0] == 0x06 || vchPubKey[0] == 0x07) {\r\n+            return true;\r\n         }\r\n-    } else {\r\n-        //  Non-canonical public key: neither compressed nor uncompressed\r\n-        return false;\r\n     }\r\n-    return true;\r\n+    return false;\r\n }\r\n\r\n bool static IsCompressedPubKey(const valtype &vchPubKey) {\r\n@@ -216,7 +205,7 @@ bool CheckSignatureEncoding(const std::vector<unsigned char> &vchSig, script_ver\r\n }\r\n\r\n bool static CheckPubKeyEncoding(const valtype &vchPubKey, script_verify_flags flags, const SigVersion &sigversion, ScriptError* serror) {\r\n-    if ((flags & SCRIPT_VERIFY_STRICTENC) != 0 && !IsCompressedOrUncompressedPubKey(vchPubKey)) {\r\n+    if ((flags & SCRIPT_VERIFY_STRICTENC) != 0 && IsEmptyOrHybridPubKey(vchPubKey)) {\r\n         return set_error(serror, SCRIPT_ERR_PUBKEYTYPE);\r\n     }\r\n     // Only compressed keys are accepted in segwit\r\n```",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3482566467",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQwMTNmNGQ3YWQxZWQwODAxZmJlN2Q3MTAxNWM0N2FkMDNjODA0ZTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "tree": {
        "sha": "f6e0ac21d70c3b668093fdc1a7d17b767c2ebda7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f6e0ac21d70c3b668093fdc1a7d17b767c2ebda7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/305384a0372a13fef8dc7029fc79eaf79d8f4bc1",
          "sha": "305384a0372a13fef8dc7029fc79eaf79d8f4bc1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/305384a0372a13fef8dc7029fc79eaf79d8f4bc1"
        }
      ],
      "message": "Relax standardness rules regarding CHECKMULTISIG\n\nIn PR #5247, the STRICTENC standardness rules were tightened with regards to\nCHECKMULTISIG so that unparsable public keys fail the script when they are\nencountered. The overall purpose here was to disallow the use of confusing\nhybrid public keys by policy while keeping policy compatible (i.e., strictly\nstronger) with consensus rules.\n\nComments in PR #5247 note that \"I don't believe it should affect any system in\nproduction\"; however, this belief is/was false. Counterparty was stuffing data\nblobs into multisig pubkey lists, but these UTXOs were meant to be spendable\nbecause, although some pubkeys were unparsable, other keys were parsable, and\nthe UTXOs were meant to be spent by those valid keys.\n\nBut in tackling the hybrid key issue, PR #5247 disallowed any unparsable keys in\nmultisigs, whether or not they were hybrid, and whether or not the signature was\nmeant to satisfy a hybrid key.\n\nIn production, Counterparty UTXOs were inadvertently caught up in this\nstandardness rule change and became \"soft confiscated.\" That is, they were no\nlonger spendable by policy but still recoverable if users are able to somehow\nbypass standardness by mining their transactions themselves, or getting\nout-of-band assistance from some other miner.\n\nI understand that Bitcoin Core never intended to \"soft confiscate\" any UTXOs by\npolicy changes. This change addresses the problem.\n\nWith this change, only hybrid formatted keys and empty keys will cause early\nabort in CHECKMULTISIG operations. Otherwise, failing signature checks revert to\ntheir consensus behaviour of testing subsequent public keys.\n\nCounterparty UTXOs were never intended to make use of hybrid keys and thus\nshouldn't have any passing signatures using hybrid keys.",
      "committer": {
        "name": "Russell O'Connor",
        "email": "roconnor@blockstream.io",
        "date": "2025-11-03T22:10:49Z"
      },
      "author": {
        "name": "Russell O'Connor",
        "email": "roconnor@blockstream.io",
        "date": "2025-11-03T22:10:49Z"
      },
      "sha": "4013f4d7ad1ed0801fbe7d71015c47ad03c804e9"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20686284778,
      "node_id": "HRFPE_lADOABII587VF4d2zwAAAATQ_6fq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20686284778",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "commit_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/commits/4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "created_at": "2025-11-03T22:17:56Z"
    },
    {
      "event": "commented",
      "id": 3482836515,
      "node_id": "IC_kwDOABII587Pl94j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3482836515",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T22:21:09Z",
      "updated_at": "2025-11-03T22:24:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "At the risk of opening the bikeshed, another reasonable option I was thinking of today is allowing arbitrary data up to 33 bytes, or an uncompressed pubkey:\r\n\r\n    bool static IsDataOrUncompressedPubKey(const valtype &vchPubKey) {\r\n        if (!vchPubKey.empty() && vchPubKey.size() <= CPubKey::COMPRESSED_SIZE) {\r\n            // A \"data\" push or a compressed pubkey.\r\n            return true;\r\n        }\r\n        if (vchPubKey[0] == 0x04 && vchPubKey.size() == CPubKey::SIZE) {\r\n            // An uncompressed pubkey.\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\nI'm not sure if any of the 147,470 UTXO would pass one condition but not the other.\r\n\r\nFor the moment I've pushed @ajtowns's suggested policy.  I'm fine with that one or the one above or anything in between.",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3482836515",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "mentioned",
      "id": 20686342555,
      "node_id": "MEE_lADOABII587VF4d2zwAAAATRAImb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20686342555",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T22:21:10Z"
    },
    {
      "event": "subscribed",
      "id": 20686342590,
      "node_id": "SE_lADOABII587VF4d2zwAAAATRAIm-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20686342590",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T22:21:10Z"
    },
    {
      "event": "commented",
      "id": 3483040703,
      "node_id": "IC_kwDOABII587Pmvu_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3483040703",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T23:42:29Z",
      "updated_at": "2025-11-03T23:42:29Z",
      "author_association": "MEMBER",
      "body": "Concept NACK, they \"soft confiscated\" their own coins. This isn't a good excuse to enable spam.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3483040703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3483434223,
      "node_id": "IC_kwDOABII587PoPzv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3483434223",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T02:14:48Z",
      "updated_at": "2025-11-04T02:18:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "> At the risk of opening the bikeshed, another reasonable option I was thinking of today is allowing arbitrary data up to 33 bytes, or an uncompressed pubkey:\r\n\r\nI see two misses for this approach (though I'm still not looking at any utxos after block 400k):\r\n\r\n * [7be22151bc96041932830d79c2af4472e40e9dedaa29018fff6757501e7855c6:0](https://mempool.space/tx/7be22151bc96041932830d79c2af4472e40e9dedaa29018fff6757501e7855c6) 20000 sats, block 344398 (two 65 byte data pushes on top of a compressed key)\r\n * [15595590636afdf807462551fb58655a18419cfdb9a0ad9c866cf00f74108bc5:1](https://mempool.space/tx/15595590636afdf807462551fb58655a18419cfdb9a0ad9c866cf00f74108bc5) 10860 sats, block 280515 (probably a compressed key mistakenly pushed with an extra 00 byte on the end, making for an invalid pubkey, on top of a compressed and an uncompressed key)\r\n\r\n(EDIT: also, keep `vchPubKey.empty()` as a separate test, both for readability (I missed it!) and to that `vchPubKey[0] == 0x04` doesn't fault...)",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3483434223",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3493057300,
      "node_id": "IC_kwDOABII587QM9MU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3493057300",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T19:53:24Z",
      "updated_at": "2025-11-05T19:53:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "It would be good to add a test case that demonstrates scriptPubKeys of this form (baremultisig and possible multisig in p2sh, with valid key push prior to invalid key) are spendable.\r\n\r\nI think creating these outputs became non-standard with #12460 (2018-04-05 merge date), which changed the checks for pubkeys in a bare multisig from a size between 33 and 65 bytes (inclusive) to an explicit check of 02/03-and-33-bytes or 04/06/07-and-65-bytes.\r\n\r\nIn trying to create a functional test to validate these become spendable, I'm getting `bad-txns-nonstandard-inputs` which indicates they're still unspendable, because `Solver` doesn't consider them to be a sane multisig scriptPubKey.\r\n\r\nFix and test case at https://github.com/ajtowns/bitcoin/commits/202511-cparty-spends/ Not really convinced adding params to Solver is sensible, but also pulling the pubkey size checks out also seems silly.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3493057300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3497161573,
      "node_id": "IC_kwDOABII587QcnNl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3497161573",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-06T13:00:19Z",
      "updated_at": "2025-11-06T13:00:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Doe this mean that, due to `AreInputsStandard`, even more UTXOs were soft-confiscated when #12460 was added?",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3497161573",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3499059367,
      "node_id": "IC_kwDOABII587Qj2in",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3499059367",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-06T19:30:27Z",
      "updated_at": "2025-11-06T19:30:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Doe this mean that, due to `AreInputsStandard`, even more UTXOs were soft-confiscated when #12460 was added?\r\n\r\nI think that's pretty likely, but haven't confirmed. Should mean that bare multisigs are only spendable if any data is pushed as a fake un/compressed pubkey.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3499059367",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3517541201,
      "node_id": "IC_kwDOABII587RqWtR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517541201",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T15:48:47Z",
      "updated_at": "2025-11-11T15:50:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "I tried cargo culting @ajtowns 's testing code to check that currently one can create (multisig) UTXOs with hybrid keys, but cannot spend them:\r\n\r\n        self.log.info(\"Restarting node with -permitbaremultisig=1\")\r\n        self.restart_node(0, extra_args=[\"-permitbaremultisig=1\"])\r\n\r\n        self.log.info('Creating hybrid txs is standard, but spending is non-standard')\r\n        address = self.wallet.get_address()\r\n        tx = self.wallet.create_self_transfer()['tx']  # Pick a random coin(base) to spend\r\n        privkey, pubkey = generate_keypair()\r\n        data = b'\\x07'*65\r\n        tx.vout[0].scriptPubKey = keys_to_multisig_script([data, pubkey, data], k=1)\r\n        self.check_mempool_result(\r\n            # result_expected=[{'txid': tx.txid_hex, 'allowed': True, 'vsize': tx.get_vsize(),  'fees': { 'base': Decimal('0.00031200')}}],\r\n            result_expected=[{'txid': tx.txid_hex, 'allowed': True, 'vsize': 400,  'fees': { 'base': Decimal('0.00031200')}}],\r\n            rawtxs=[tx.serialize().hex()],\r\n            maxfeerate=0,\r\n        )\r\n        self.generateblock(node, address, [tx.serialize().hex()])\r\n        tx_spend = CTransaction()\r\n        tx_spend.vin.append(CTxIn(COutPoint(tx.txid_int, 0), b\"\"))\r\n        tx_spend.vout.append(CTxOut(tx.vout[0].nValue - int(fee*COIN), script_to_p2wsh_script(CScript([OP_TRUE]))))\r\n        sign_input_legacy(tx_spend, 0, tx.vout[0].scriptPubKey, privkey, sighash_type=SIGHASH_ALL)\r\n        tx_spend.vin[0].scriptSig = bytes(CScript([OP_0])) + tx_spend.vin[0].scriptSig\r\n        self.check_mempool_result(\r\n            result_expected=[{'txid': tx_spend.txid_hex,  'allowed': False, 'reject-reason': 'mempool-script-verify-flag-failed (Public key is neither compressed or uncompressed)'}],\r\n            rawtxs=[tx_spend.serialize().hex()],\r\n            maxfeerate=0,\r\n        )\r\n\r\nHopefully I got that test case right.  It means our current policy surrounding bare multisig is incoherent.  I'll open an issue listing all the problems I have with the current policy since this seems to have grown larger than a single PR.\r\n\r\nP.S. another worm crawling out of this can that I opened: Why doesn't `tx.get_vsize()` return the correct value in the code above.  Did I make a stupid mistake somewhere?",
      "user": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3517541201",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "mentioned",
      "id": 20866070147,
      "node_id": "MEE_lADOABII587VF4d2zwAAAATbtvaD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20866070147",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T15:48:49Z"
    },
    {
      "event": "subscribed",
      "id": 20866070224,
      "node_id": "SE_lADOABII587VF4d2zwAAAATbtvbQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20866070224",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T15:48:49Z"
    },
    {
      "event": "commented",
      "id": 3518709899,
      "node_id": "IC_kwDOABII587Ru0CL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3518709899",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T21:00:22Z",
      "updated_at": "2025-11-11T21:00:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Why doesn't `tx.get_vsize()` return the correct value in the code above. Did I make a stupid mistake somewhere?\r\n\r\nThe vsize that `check_mempool_result()` (aka `testmempoolaccept`) returns is adjusted for the sigop count (which is treated as 20 due to `fAccurate=false` via `GetTransactionSigOpCost()`/`GetLegacySigOpCount()`), while `get_vsize` is not. See also #32800.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3518709899",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20889584775,
      "node_id": "HRFPE_lADOABII587VF4d2zwAAAATdHcSH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20889584775",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a4ee513443ed62b408d3c222612b80848e647d5f",
      "commit_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/commits/a4ee513443ed62b408d3c222612b80848e647d5f",
      "created_at": "2025-11-12T14:11:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20890099156,
      "node_id": "HRFPE_lADOABII587VF4d2zwAAAATdJZ3U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20890099156",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "commit_url": "https://api.github.com/repos/roconnor-blockstream/bitcoin/commits/4013f4d7ad1ed0801fbe7d71015c47ad03c804e9",
      "created_at": "2025-11-12T14:32:03Z"
    },
    {
      "event": "labeled",
      "id": 20890115223,
      "node_id": "LE_lADOABII587VF4d2zwAAAATdJdyX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20890115223",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T14:32:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 20893121621,
      "node_id": "UNLE_lADOABII587VF4d2zwAAAATdU7xV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20893121621",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T16:32:42Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3560024890,
      "node_id": "IC_kwDOABII587UMas6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3560024890",
      "actor": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-20T21:00:56Z",
      "updated_at": "2025-11-20T21:01:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It would be good to add a test case that demonstrates scriptPubKeys of this form (baremultisig and possible multisig in p2sh, with valid key push prior to invalid key) are spendable.\r\n\r\nHi AJ, are these the test vectors you had in mind? \r\n\r\n```\r\n[\r\n    \"0 0x47 0x3044022044dc17b0887c161bb67ba9635bf758735bdde503e4b0a0987f587f14a4e1143d022009a215772d49a85dae40d8ca03955af26ad3978a0ff965faa12915e9586249a501\",\r\n    \"1 0 0x21 0x02865c40293a680cb9c020e7b1e106d8c1916d3cef99aa431a56d253e69256dac0 2 CHECKMULTISIG NOT\",\r\n    \"P2SH,STRICTENC\",\r\n    \"PUBKEYTYPE\",\r\n    \"1-of-2 CHECKMULTISIG NOT with the first pubkey invalid, with a 2nd valid signature/key combo.\"\r\n],\r\n[\r\n    \"0 0x47 0x3044022044dc17b0887c161bb67ba9635bf758735bdde503e4b0a0987f587f14a4e1143d022009a215772d49a85dae40d8ca03955af26ad3978a0ff965faa12915e9586249a501\",\r\n    \"1 0 0x21 0x02865c40293a680cb9c020e7b1e106d8c1916d3cef99aa431a56d253e69256dac0 2 CHECKMULTISIG NOT\",\r\n    \"P2SH\",\r\n    \"OK\",\r\n    \"1-of-2 CHECKMULTISIG NOT with the first pubkey invalid, with a 2nd valid signature/key combo.\"\r\n]\r\n```\r\n\r\nYou can run them here with `script_tests.json` minimized to relevant test cases (I believe): https://github.com/bitcoin/bitcoin/commit/c41a23dcf224c10cdbcb367c0e5495df34538bb4 . I can PR if I'm on the right path",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3560024890",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3565835341,
      "node_id": "IC_kwDOABII587UilRN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3565835341",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-22T06:39:11Z",
      "updated_at": "2025-11-22T06:39:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Hi AJ, are these the test vectors you had in mind?\r\n\r\nI was thinking functional tests, to also make sure there isn't some obscure policy rule that the unit tests miss that nevertheless ends up blocking successful spends of things that should be spendable. Unit tests are good too though.\r\n\r\n\"CMS NOT\" isn't super interesting though, since it's easily satisfiable with empty sigs (apart from mempool/consensus inconsistency bugs). The things that (per this PR's arguments) should be spendable are `1 <pubkey> <invalid> 2 CMS` and `1 <invalid> <pubkey> 2 CMS`.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3565835341",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    },
    {
      "event": "commented",
      "id": 3572313467,
      "node_id": "IC_kwDOABII587U7S17",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3572313467",
      "actor": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T19:11:06Z",
      "updated_at": "2025-11-24T19:11:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Hi AJ, are these the test vectors you had in mind?\r\n> \r\n> I was thinking functional tests, to also make sure there isn't some obscure policy rule that the unit tests miss that nevertheless ends up blocking successful spends of things that should be spendable. Unit tests are good too though.\r\n\r\n:+1:\r\n\r\n> The things that (per this PR's arguments) should be spendable are `1 <pubkey> <invalid> 2 CMS` and `1 <invalid> <pubkey> 2 CMS`.\r\n\r\nI took a closer look through `script_tests.json` and it seems that these cases are partially covered: https://github.com/bitcoin/bitcoin/blob/master/src/test/data/script_tests.json#L1713\r\n\r\nWe have the following permutations in `script_tests.json`:\r\n\r\n- [1-of-2 with the second 1 hybrid pubkey and no STRICTENC](https://github.com/bitcoin/bitcoin/blob/238c1c8933b1f7479a9bca2b7cb207d26151c39d/src/test/data/script_tests.json#L1718C6-L1718C61)\r\n- [1-of-2 with the second 1 hybrid pubkey](https://github.com/bitcoin/bitcoin/blob/238c1c8933b1f7479a9bca2b7cb207d26151c39d/src/test/data/script_tests.json#L1725)\r\n- [1-of-2 with the first 1 hybrid pubkey](https://github.com/bitcoin/bitcoin/blob/238c1c8933b1f7479a9bca2b7cb207d26151c39d/src/test/data/script_tests.json#L1732)\r\n\r\nI believe we are missing `1-of-2 with the first 1 hybrid pubkey and no STRICTENC`. \r\n",
      "user": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33755#issuecomment-3572313467",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33755"
    }
  ],
  "comments": []
}