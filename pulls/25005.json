{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005",
    "id": 920774417,
    "node_id": "PR_kwDOABII58424ecR",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/25005",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/25005.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/25005.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
    "number": 25005,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "wallet: remove extra wtx lookup in 'AvailableCoins' + several code cleanups.",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This started in #24845 but grew out of scope of it. \r\n\r\nSo, points tackled:\r\n\r\n1) Avoid extra `GetWalletTx` lookups inside `AvailableCoins -> IsSpentKey`.\r\n    `IsSpentKey` was receiving the tx hash and index to internally lookup the tx inside the wallet's map. As all the `IsSpentKey` function callers already have the wtx available, them can provide the `scriptPubKey` directly.\r\n\r\n2) Most of the time, we call `Wallet::AvailableCoins`, and later on the process, skip the non-spendable coins from the result in subsequent for-loops. So to speedup the process: introduced the ability to filter by \"only_spendable\" coins inside `Wallet::AvailableCoins` directly.\r\n(the non-spendable coins skip examples are inside `AttemptSelection->GroupOutputs` and `GetAvailableBalance`).\r\n\r\n4) Refactored `AvailableCoins` in several ways:\r\n\r\n   a) Now it will return a new struct `CoinsResult` instead of receiving the vCoins vector reference (which was being cleared at the beginning of the method anyway). --> this is coming from #24845 but cherry-picked it here too to make the following commits look nicer.\r\n\r\n   b) Unified all the 'wtx.tx->vout[I]' calls into a single call (coming from this comment https://github.com/bitcoin/bitcoin/pull/24699#discussion_r854163032). \r\n\r\n5) The wallet `IsLockedCoin` and `IsSpent` methods now accept an `OutPoint` instead of a hash:index. Which let me cleanup a bunch of extra code.\r\n\r\n6) Speeded up the wallet 'GetAvailableBalance': filtering `AvailableCoins` by spendable outputs only and using the 'AvailableCoins' retrieved `total_amount` instead of looping over all the retrieved coins once more.\r\n\r\n-------------------------------------------------------\r\n\r\nSide topic, all this process will look even nicer with #25218",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2022-04-27T15:09:06Z",
    "updated_at": "2023-05-27T01:51:51Z",
    "closed_at": "2022-06-17T22:03:07Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-06-17T22:03:07Z",
    "merge_commit_sha": "8be652e43964329c1f2dadd676916b53e5c40974",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "furszy:2022_availableBalance_improvements",
      "ref": "2022_availableBalance_improvements",
      "sha": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 380408,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-08T20:44:32Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2023-02-27T18:01:49Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b9416c3847cd347238a9d75d949327f69e187d79",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34348,
        "stargazers_count": 69856,
        "watchers_count": 69856,
        "size": 234261,
        "default_branch": "master",
        "open_issues_count": 631,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-09T10:08:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-09T11:33:55Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 118,
    "deletions": 107,
    "changed_files": 9,
    "commits": 9,
    "review_comments": 18,
    "comments": 12
  },
  "events": [
    {
      "event": "labeled",
      "id": 6507865900,
      "node_id": "LE_lADOABII585IkYOdzwAAAAGD5ics",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6507865900",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T15:09:36Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "review_requested",
      "id": 6507870911,
      "node_id": "RRE_lADOABII585IkYOdzwAAAAGD5jq_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6507870911",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T15:10:16Z",
      "requested_reviewer": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 1111657636,
      "node_id": "IC_kwDOABII585CQoyk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111657636",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T02:00:32Z",
      "updated_at": "2022-06-17T07:02:57Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25269](https://github.com/bitcoin/bitcoin/pull/25269) (wallet: re-activate the not triggered  \"AmountWithFeeExceedsBalance\" error by furszy)\n* [#25183](https://github.com/bitcoin/bitcoin/pull/25183) (rpc: Segwit-only inputs option for fundrawtransaction by aureleoules)\n* [#24699](https://github.com/bitcoin/bitcoin/pull/24699) (wallet: Improve AvailableCoins performance by reducing duplicated operations by achow101)\n* [#24584](https://github.com/bitcoin/bitcoin/pull/24584) (wallet: avoid mixing different `OutputTypes` during coin selection by josibake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1111657636",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "commented",
      "id": 1112056877,
      "node_id": "IC_kwDOABII585CSKQt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112056877",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T10:45:43Z",
      "updated_at": "2022-04-28T10:45:43Z",
      "author_association": "MEMBER",
      "body": "@furszy It looks like the qt wallet test is failing in the CI. You can run `./src/qt/test/test_bitcoin-qt` in your dev environment to reproduce and debug the issue.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1112056877",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "mentioned",
      "id": 6514034168,
      "node_id": "MEE_lADOABII585IkYOdzwAAAAGEREX4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6514034168",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T10:45:43Z"
    },
    {
      "event": "subscribed",
      "id": 6514034178,
      "node_id": "SE_lADOABII585IkYOdzwAAAAGEREYC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6514034178",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T10:45:44Z"
    },
    {
      "event": "commented",
      "id": 1112243680,
      "node_id": "IC_kwDOABII585CS33g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112243680",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T14:01:29Z",
      "updated_at": "2022-04-28T14:19:17Z",
      "author_association": "MEMBER",
      "body": "Ah, thanks @jonatack ðŸ‘Œ. Just noticed that the GUI `WalletTests` isn't run by default in my OS under `make check`.\r\n\r\nIt's an easy fix; as the test doesn't start the balance polling timer, the model does not have the balance cached so.. as 5babfb7 make uses of it, the creation process fails with a not-enough balance error.\r\n\r\nWill push the fix and expand + improve the test coverage a bit more.\r\nAnd.. most likely will decouple that last commit into a separate PR in few days. Have some further improvements locally for the wallet model area that can package out all together that aren't really part of the scope of this PR.\r\n(like a mutex to be able to access the model cached balance from different threads, connect it to the widgets etc..)",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1112243680",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "mentioned",
      "id": 6515434139,
      "node_id": "MEE_lADOABII585IkYOdzwAAAAGEWaKb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6515434139",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T14:01:29Z"
    },
    {
      "event": "subscribed",
      "id": 6515434155,
      "node_id": "SE_lADOABII585IkYOdzwAAAAGEWaKr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6515434155",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T14:01:29Z"
    },
    {
      "event": "renamed",
      "id": 6523031502,
      "node_id": "RTE_lADOABII585IkYOdzwAAAAGEzY_O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6523031502",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-29T12:50:55Z",
      "rename": {
        "from": "wallet: remove extra wtx lookup in 'AvailableCoins' + several code improvements.",
        "to": "wallet: remove extra wtx lookup in 'AvailableCoins' + several code cleanups."
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6576225273,
      "node_id": "HRFPE_lADOABII585IkYOdzwAAAAGH-Tv5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6576225273",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-09T20:53:33Z"
    },
    {
      "event": "commented",
      "id": 1121574208,
      "node_id": "IC_kwDOABII585C2d1A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1121574208",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-09T20:58:06Z",
      "updated_at": "2022-05-10T15:03:59Z",
      "author_association": "MEMBER",
      "body": "> 6) The GUI `WalletModel::prepareTransaction` will now use the cached balance to make the funds availability check if the user didn't manually selected outputs to spend. This will avoid an entire on-demand recalculation of the available balance which is quite expensive as the wallet has to walk through the entire txs map.\r\n\r\nDropped the last two commits that were implementing point (6) described above. They are now part of https://github.com/bitcoin-core/gui/pull/598",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1121574208",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "reviewed",
      "id": 974523072,
      "node_id": "PRR_kwDOABII5846FgrA",
      "url": null,
      "actor": null,
      "commit_id": "2cdd2a1a5498cb8767799dd26a4082e9d3b064ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I don't quite understand the purpose of the first commit. It doesn't seem like it materially improves anything?",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#pullrequestreview-974523072",
      "submitted_at": "2022-05-16T20:27:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
    },
    {
      "event": "commented",
      "id": 1133735550,
      "node_id": "IC_kwDOABII585Dk25-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133735550",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-21T17:54:51Z",
      "updated_at": "2022-05-21T17:54:51Z",
      "author_association": "MEMBER",
      "body": "Hey achow101, thanks for the review!\r\n\r\n> I don't quite understand the purpose of the first commit. It doesn't seem like it materially improves anything?\r\n\r\nWe are skipping the non-spendable coins that appear in `vCoins` (`AvailableCoins` result) later, in several parts of the `CreateTransaction` and `GetBalance` flows:\r\n\r\n1.  `GetAvailableBalance` was (1) getting all the available coins calling `AvailableCoins` and, right away, walking through the entire vector, skipping the non-spendable coins, to calculate the total balance.â€¨\r\n\r\n2. Inside `CreateTransactionInternal` â€”> `SelectCoins(vCoins,...)`, we have several calls to `AttemptSelection` which, on each of them internally, we call twice to `GroupOutputs` which internally has two for-loops over the entire `vCoins` vector that skip the non-spendable coins.\r\n\r\nSo, the purpose is not add the non-spendable coins into the `AvailableCoins` result (`vCoins`) in the first place for the processes that arenâ€™t using them at all, so we donâ€™t waste resources skipping them later so many times.\r\n\r\nNote: this speedup is for all the processes that calls to `CreateTransaction` and `GetBalance*` internally.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1133735550",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6663122959,
      "node_id": "HRFPE_lADOABII585IkYOdzwAAAAGNJzAP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6663122959",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-23T17:51:05Z"
    },
    {
      "event": "commented",
      "id": 1134992768,
      "node_id": "IC_kwDOABII585Dpp2A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134992768",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-23T18:18:26Z",
      "updated_at": "2022-05-23T18:18:26Z",
      "author_association": "MEMBER",
      "body": "Rebased after #25083 merge. Conflicts solved.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1134992768",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "reviewed",
      "id": 993779961,
      "node_id": "PRR_kwDOABII5847O-D5",
      "url": null,
      "actor": null,
      "commit_id": "5b6124da55a4408e56688a0f5b93f0ee0f374641",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#pullrequestreview-993779961",
      "submitted_at": "2022-06-02T16:00:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6730404020,
      "node_id": "HRFPE_lADOABII585IkYOdzwAAAAGRKdC0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6730404020",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-02T17:57:47Z"
    },
    {
      "event": "commented",
      "id": 1145160959,
      "node_id": "IC_kwDOABII585EQcT_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145160959",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-02T18:06:07Z",
      "updated_at": "2022-06-02T18:06:07Z",
      "author_association": "MEMBER",
      "body": "Ready, feedback applied:\r\n\r\n- Moved `only_spendable` from be a `CoinControl` field to be a `AvailableCoins` param.\r\n- Nits tackled.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1145160959",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6743607580,
      "node_id": "HRFPE_lADOABII585IkYOdzwAAAAGR80kc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6743607580",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-05T14:20:59Z"
    },
    {
      "event": "commented",
      "id": 1146877116,
      "node_id": "IC_kwDOABII585EW_S8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146877116",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-05T20:18:45Z",
      "updated_at": "2022-06-05T20:18:45Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1146877116",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "reviewed",
      "id": 998508682,
      "node_id": "PRR_kwDOABII5847hAiK",
      "url": null,
      "actor": null,
      "commit_id": "5646ccf4af89bd77953030dedabb1545b851d3ea",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM, changes all make sense to me, also thanks to chat we had in IRC :)\r\n\r\nLeft a few nits below. Also, can you change the commit texts to have a shorter line length? This makes the git history more readable. Breaking at 72-80 characters seem to be good values.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#pullrequestreview-998508682",
      "submitted_at": "2022-06-07T17:12:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRjZTIzNWVmOGY5YTlkZGRjNTJkN2FiNjBjOGY3MWJkYTFkMzg4NzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873",
      "tree": {
        "sha": "256749d54ebf6fae7ee0ae533bf5ad4de0be45ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/256749d54ebf6fae7ee0ae533bf5ad4de0be45ab"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 256749d54ebf6fae7ee0ae533bf5ad4de0be45ab\nparent fbb90c44ac8a4121ce6ba7fcbf864084f35734ba\nauthor furszy <matiasfurszyfer@protonmail.com> 1650659488 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654694716 -0300\n\nwallet: return 'CoinsResult' struct in `AvailableCoins`\n\nInstead of accepting a `vCoins` reference that is cleared at the beginning of the method.\n\nNote:\nThis new struct, down the commits line, will contain other `AvailableCoins` useful results.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgozwACgkQXdI8zGhq\npiM4CQ//eKe6fnfgPEMC6ve3qT73HgjzJtcoui8qhtrEP7C2tWLbXRpIpYBPYsY/\nTrGNZN1OEwsyYOoWjwJN7dev35lkv8JcCneGF+Gojj85Hn9d5ECAYJLjlIpxICDS\nZizmccMKSoLybmEOF9O/EgcHTSS7IZzE5wwZ2sF8JUruPC/txZvmvvJ3RkBsNsHR\nPaxuZeYKrgnktUX+i2t3lWa3fryKUXsUrLr9ihLQygnvkKLlVjo/VspqJ7LYY01x\n8a3luWN9pmc4gmkDM6z9TBIFuLaIIvCWshYhN9D+pHNErOZ6vu3tCNhl4YWdqunh\nowh28CgA+Bi3h2z8CglYjDM1sl94xpJbpllea2P4HzbIScmhdezexceK4ws451gX\nH94oI7LzAOnDVcrQRETwRgu7gI/lqBKTT5++iK4O8kpwDX8EmQ2r5yeI9yaUvcxJ\no25nCPlIIE5KpPTOyqTB6PeRNADNJVR7oj57Kyh1q82nQ3dpO/+GAbclAPf7kW18\n4NE8WqDCkaABfa4OJmJdkvqO29/Ji3NfrNjIEsNXk3MXp09wE8gVODM8xd5UaTKE\nSbWYD7Ky1kIdFG4E3lLWJi6hr9umWkVVwgfM47BVfLkh9CgqrWNfS5v9r9bjdo79\nR2aIfOWRCyAXCF+jkyNPh9LVolfQu/hPn6mTK5KKhmrQtBFAOjk=\n=jRta\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fbb90c44ac8a4121ce6ba7fcbf864084f35734ba",
          "sha": "fbb90c44ac8a4121ce6ba7fcbf864084f35734ba",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fbb90c44ac8a4121ce6ba7fcbf864084f35734ba"
        }
      ],
      "message": "wallet: return 'CoinsResult' struct in `AvailableCoins`\n\nInstead of accepting a `vCoins` reference that is cleared at the beginning of the method.\n\nNote:\nThis new struct, down the commits line, will contain other `AvailableCoins` useful results.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T13:25:16Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-22T20:31:28Z"
      },
      "sha": "4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk0NzJjYTBhNjUzOTYyMDZiMzA3OGJkZGY5OGY0YzE4MDdiZTJkODI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9472ca0a65396206b3078bddf98f4c1807be2d82",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9472ca0a65396206b3078bddf98f4c1807be2d82",
      "tree": {
        "sha": "7f66d5f6938c51a98765faa9fab108359481481b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7f66d5f6938c51a98765faa9fab108359481481b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7f66d5f6938c51a98765faa9fab108359481481b\nparent 4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873\nauthor furszy <matiasfurszyfer@protonmail.com> 1651066459 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654694751 -0300\n\nwallet: AvailableCoins, don't call 'wtx.tx->vout[i]' multiple times\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgo18ACgkQXdI8zGhq\npiPkphAAiTzkx0rCAv/WNxi7/SWespZKmnoWWVS4OGU2hVGBGb5DwMKnAGVZ8hjE\nuH0ZMbMfuhUeAyqGVHHjHp1pasIJBr2t2GDu9Tc4CKoYHXYoR74LXkREFinIVB54\nwBdHbJSf2WfO4+3wKuhooH3WPCb5ZWTh1bxlgn+6ruI5pt5zIC9Kh6LtgWHTpOQs\nz7sGIP01bYrk2Kc/MQyPwR8M2S/ZB3eGmWz7B9W6edeVbEO5+HPbtlLTwoIKIqhX\n9JPA1a4slruiXxjlEM4ZrWtzRhGkmG95URWW7z0xpIpQAlT7YlHJ4Vm8FHcDP90o\nJakYBME/jCc+wQWJ/P0MMxAtUg/nV5avFt4nJHvUikl2A1DdtyGGZWhHkILFsEO5\n7Zc0KnG7pCWGY6OtTOdKWODUbtX2c05HMSL8bOvHYcrFz1JAvn402kE0e6sVX1xV\nb0SArQx/rVEeXvc+SZBUvR7AU7ZImihz8rVA0hFm0NrHml/hRqg+owVBdaEaRKEC\ntG5Yl5Z3RO6PJW1OeTbtavU3QttmjKjxEJtpUAFL/vrWmDlF1sYBJjOUKtu0v08U\nZNdxVuy1sL+c2bA8APPyOg15cPAMnJ5jiOTpZrhnREreVntNd/L/xE2iHmO23yti\nmzozqqenWSXldhv7P9nd4N33XbVn3lullChO8MZXHh3zZRI01nw=\n=yQfb\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873",
          "sha": "4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4ce235ef8f9a9dddc52d7ab60c8f71bda1d38873"
        }
      ],
      "message": "wallet: AvailableCoins, don't call 'wtx.tx->vout[i]' multiple times",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T13:25:51Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T13:34:19Z"
      },
      "sha": "9472ca0a65396206b3078bddf98f4c1807be2d82"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkxOTAyYjc3MjAyZmM2MzZlZGIzZGI1ODdjYjZlODdkOWZiOWI2MGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91902b77202fc636edb3db587cb6e87d9fb9b60a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/91902b77202fc636edb3db587cb6e87d9fb9b60a",
      "tree": {
        "sha": "db865522da24521a1cf7453ee8038c7ba0b6a584",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db865522da24521a1cf7453ee8038c7ba0b6a584"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree db865522da24521a1cf7453ee8038c7ba0b6a584\nparent 9472ca0a65396206b3078bddf98f4c1807be2d82\nauthor furszy <matiasfurszyfer@protonmail.com> 1651066670 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654694808 -0300\n\nwallet: IsLockedCoin, 'COutPoint' arg instead of (hash, index)\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgo5gACgkQXdI8zGhq\npiNB/w/9Eb1rxWm8ihebI+NNzbtacycWQBVc6t06osDsjz0C2ScboFB8TR6lT18y\n6wZ9dGep3JmEtQea6sKO9AqrkA01+OZuJGhSQzyfR946+DaigUYURhe7YEzVLpro\na6JbGn5m7vk+/e+CKdZXjcRQgKtPeW+8PkX7W4XlBr4cMohCvKm4qfAarP4Ww4xv\nuXQ1J+zML9qT+0kNXgOWCWkPQ1h6odHC3vz2Onpc9bdkvPCvIapWSDct2vtjgEE4\nQPv5/IM5UGhTLtjtkFUh72cVO8rScRn0Zq8roXjEbMLfAO0USKKqusPEgQf4SyJS\n1kvK7SCoOFLgD62WlIcnTlU2QFf7EnkxkelUm5pG9Bhh3wu/yNN+Qj5to+PJiaRS\nvXKV2LYYQCoEgPXrZQaQzC6NcoTtOoFuuKyV/80CuHaWxDkgjOQyCpDf9vOsMLIj\nid6wlEPy7AOXG5uLDimE4gTWMRHBWItBDdeqdXHTMkefvYZqsMMx5uhrHeLBmDBm\nYhvu9z56o5AGYqNFc2cMhGuSVFvD66CGPEUw6RlWdLhrtUfU0eevUVWlXmIVOHlY\ndgw015EQl5AjUcxCZvXvKvB+Xvt+KJ8jLe6dD/f/kFNFH2HLDDzlXSIqfrSyaBsV\nGvjsTLE6L/tT82pRsYmdvIiQtdSdK/q4iVAYcfIN6i4hb0jM5ic=\n=D9o9\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9472ca0a65396206b3078bddf98f4c1807be2d82",
          "sha": "9472ca0a65396206b3078bddf98f4c1807be2d82",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9472ca0a65396206b3078bddf98f4c1807be2d82"
        }
      ],
      "message": "wallet: IsLockedCoin, 'COutPoint' arg instead of (hash, index)",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T13:26:48Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T13:37:50Z"
      },
      "sha": "91902b77202fc636edb3db587cb6e87d9fb9b60a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEwNmZhOTRmZjgxZTJiY2NlZjAzMTZlYTVlYzRlY2EwZjRkZTUwNzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a06fa94ff81e2bccef0316ea5ec4eca0f4de5071",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a06fa94ff81e2bccef0316ea5ec4eca0f4de5071",
      "tree": {
        "sha": "2539c545d00292374270690795d78a91b92fee6c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2539c545d00292374270690795d78a91b92fee6c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2539c545d00292374270690795d78a91b92fee6c\nparent 91902b77202fc636edb3db587cb6e87d9fb9b60a\nauthor furszy <matiasfurszyfer@protonmail.com> 1651067550 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654698159 -0300\n\nwallet: IsSpent, 'COutPoint' arg instead of (hash, index)\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgsK8ACgkQXdI8zGhq\npiNKMg/+PAjwt/eFdQ+Ytbe04VilTVTYi3MDZSWJmsl5weiF0QsQoPvEmte1/p4M\ncKGAQFgE5tFqk48USY/UzqCJAIHWt8H6nBI53azjrQROrN20AhLe51bkbMfcVyaq\nj9lJJ7IWMxzXgqkIeXqv6h/lhr0EmR898N0duV+286ZjelYryCwhHvxi1B0la3zZ\n/dK2so9Vqj8nJa3tf8cQBibrx8K+FqBycYfxZCakFkwjAoBjtxlQr22dgHh+Q3Yu\nNNRHaWg+8phWc8s9Gw10EPfLd/ih1z4LmzWP3d9yC3Mwp8x/0+7BaDUzMxRYfkgy\ns8XNIe0ArZOto2L4BtvBTFKb77KRLpjE1joc3xURDEYjjZugBw+9CXP5tA6NBNjM\ntY8beXdsuDV8AgywSxOa3gj7iqJgjepgtV0oqhlhf6PPhuwvVJb2doHTCfUMXrQA\ndQ3tcj+C4u9iN7vgtNf1PfZXHvPutQREcxdZrNCE4kpGJ2ilqfpmK364pwDg3O7o\neq2QDyRX3L1bYwDXzwdkgL/gVav9zTDxfSOh6wAHmunpyZIs7y9J6r8AoV8miNyK\nI65mwwnAkYMIohspqj/2zEw2hw0gXW5j79m52We6VCjzFsfqpc2ZfLLno7rVgi+X\n62a5xQOf6jYCv0AW3YWRumpm+ZaJce3rVUuZICvIgmTxpux6bWc=\n=Hfrm\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91902b77202fc636edb3db587cb6e87d9fb9b60a",
          "sha": "91902b77202fc636edb3db587cb6e87d9fb9b60a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/91902b77202fc636edb3db587cb6e87d9fb9b60a"
        }
      ],
      "message": "wallet: IsSpent, 'COutPoint' arg instead of (hash, index)",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T14:22:39Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T13:52:30Z"
      },
      "sha": "a06fa94ff81e2bccef0316ea5ec4eca0f4de5071"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNkOGEyODIyNTcwZTNjZjRkMWJjNGY5ZDU5YjVkY2IwMTQ1OTIwYWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad",
      "tree": {
        "sha": "112ad0963a371d4b45cd058ebdfd9b3132b21470",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/112ad0963a371d4b45cd058ebdfd9b3132b21470"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 112ad0963a371d4b45cd058ebdfd9b3132b21470\nparent a06fa94ff81e2bccef0316ea5ec4eca0f4de5071\nauthor furszy <matiasfurszyfer@protonmail.com> 1651068095 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654698159 -0300\n\nwallet: decouple IsSpentKey(scriptPubKey) from IsSpentKey(hash, n)\n\nThis will be used in a follow-up commit to prevent extra 'GetWalletTx' lookups if the function caller already have the wtx and can just provide the scriptPubKey directly.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgsK8ACgkQXdI8zGhq\npiMg7hAAyXaM+AlJ7YqRUyCvdWVFMM6U6WmvJ8pFIjm/Qs17pe42OptiEXEO3OEt\nOHeumbeJRbYXVR0XGWwlL9l3ryyLGng15bC0SCRuBCAvVZdD9euddwhLuLp0RgkN\n2z5WJQLwLm3u5cc2WrTuN4K+35NNXM83P3N6+97wMHB5l6UUzFzu9ls50RwkWhQw\neGQGopN+R3k12+jQcvTbsVI0B+J/d1XqN/J3p28vvDG6jCIGkqQGE6Ps0uV1gEto\nF83Jb233JIw05xUZfYjAgKI+2AyaE0ag9/KbPm59m1sshBrDvddd/ruBZWixpz6E\nTv8jao3QWAkjz9Oh5Z4orX4TXDMFqQe5Ya1XRcFuadSnSE4RDKS4f7tPYMnL+oVz\nybrmXt5glE5ys0YRRrtNoo63pCDCetIlAPcmc17Jdpop/Uuu4dn9dNGZsOTHThcQ\nCwRvxQk3//xhd5Tzig4i35D3QnNlQp+db/YUh7KKZxLrIn+noTNu03yY5/2HnHXJ\n3tvsm5rh32A6BE8A4a6NSM09eiFBJXIH46fXuyxA5p5nYGflkdyNIIEBlYxCaDGw\noXsO1968Qb7GfpWq4rf24m28VWU98/11ZM41JioMpInoCAvqls3O4YkjFZi4Tc5P\nLLmsKxi/Z3yZ1GcXv1bCeZpjfvAgWoMTX7MTNhTRHHTOvjHOrdE=\n=M7fg\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a06fa94ff81e2bccef0316ea5ec4eca0f4de5071",
          "sha": "a06fa94ff81e2bccef0316ea5ec4eca0f4de5071",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a06fa94ff81e2bccef0316ea5ec4eca0f4de5071"
        }
      ],
      "message": "wallet: decouple IsSpentKey(scriptPubKey) from IsSpentKey(hash, n)\n\nThis will be used in a follow-up commit to prevent extra 'GetWalletTx' lookups if the function caller already have the wtx and can just provide the scriptPubKey directly.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T14:22:39Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T14:01:35Z"
      },
      "sha": "3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiODNiZjhkYmNmNmI4YjFjMTI5MzU3NTM5MWU5MGFjN2UyMWIwZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0",
      "tree": {
        "sha": "4ac5a5f92709ae76159429c885834570527eecb0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4ac5a5f92709ae76159429c885834570527eecb0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4ac5a5f92709ae76159429c885834570527eecb0\nparent 3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad\nauthor furszy <matiasfurszyfer@protonmail.com> 1651068271 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654698160 -0300\n\nwallet: avoid extra IsSpentKey -> GetWalletTx lookups\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgsLAACgkQXdI8zGhq\npiMQ3BAAslNRj772+if26sAyAInQ0TUpaOwgcYg2pvwKuItIHZ3GdNY7KHGE3HyP\nBLslGfdIzeRaUs1n+gbwnDfDvp0yQHaS54vqIU1TxdIdBA1WY5mukEaKXuYi4Xed\nswKvN1B02QOnPreQnsads+/JzyqnUtl8jJra6R7hQMvAsAESmtgqfJHpZPDBRtF9\njFJn6nXQmfkFTDvTYymF8Cn3FB2UemSkzOXLaRHIq1Q9qj0HjcqPvlt300Cwr7NJ\nmuXSpAugFiOYcct9oukmQgo/4/ZojSFar0NSFKsudNSD9Nw0Oj+CKitNkZfLYAMw\nIYTvWWd6zC11A7F+NkpuO3kVbaGnaN8hgymYiKs2DxSTKaoHOaeQ8quVdct4Q5kT\nuz2Z7YUeNuA7ZEERbEG2OgO+qoIgkzok0hCryiafvBQ9B4LRKcCRj6jMFBnIQ/ED\nxe5MQjraXDp7lXQQBsNri8tUQcEh12DzUm2azQLNaY2ZQpzgSWtJlsCuQcbMS8NC\nAZ3VQOjI+eIo6RmkDb8ivd9Vv2jlYQjJtGZ1VGazUeUewxTdzhaM/GDl2W8+Gx6m\nMLMIrZA3Ne0vZZt9wE4KasLMk7ehIuknXU9+I6JhaCApeQwNYIWNs2dP2XL/ORbz\nvsP3uD+txx2Y3miZpko6Pbj1tcTyn8OeG8AzEBFbwJkTzlqMLbU=\n=fWR+\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad",
          "sha": "3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3d8a2822570e3cf4d1bc4f9d59b5dcb0145920ad"
        }
      ],
      "message": "wallet: avoid extra IsSpentKey -> GetWalletTx lookups",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T14:22:40Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T14:04:31Z"
      },
      "sha": "4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNkZjE4NWNjZmIyMDg1ZTVhNGJmODJkODMzMzkyZDc0Yjc0OGFlZmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdf185ccfb2085e5a4bf82d833392d74b748aeff",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cdf185ccfb2085e5a4bf82d833392d74b748aeff",
      "tree": {
        "sha": "120b8b850fbd7a34f8a54e52d635043958dd4750",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/120b8b850fbd7a34f8a54e52d635043958dd4750"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 120b8b850fbd7a34f8a54e52d635043958dd4750\nparent 4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0\nauthor furszy <matiasfurszyfer@protonmail.com> 1651068533 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654698160 -0300\n\nwallet: remove unused IsSpentKey(hash, index) method\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgsLAACgkQXdI8zGhq\npiMoUg//QzPrM87MdmZzuo3S9Vxofd0CYivllL8DWdvq1Bw7Np1MXvyTOq6GqD2U\n/Lh8v+ztvFCofGFZCFtE+PTaUft4ZGjK0ZdR5H1O3iOti/dzNVit4j0k02VnOfzO\nYySK+NuTmvRIb+kHEqNm4mXloM7SX+D1K630PH9NF1jp1RrR+WNnwDfQVVlQqpBC\n9+9u3xPYJPOxlHns9z7h0RImehuDpE81un+4zo93RgbzxiT4XhXj1KN4HCZw9LmE\niP4DbsAOthV+p09lMZb41YkpIXwbXleGcC0G4JYwe+gYyLJ2W+WfXkvkuxOjJ3JJ\nogM7Clggg79wS2d7TuHG5EwDwtOjG+DDtmoIzGqGhxjmM2u5uYVId9URiNyHvnKG\niS0+svgAYklNA72Zl8f87hR736hY0lPQzuafFVHHr9Jfb0QZRChnft3667Wge+6w\n1SjpUBE6d5kH8zEEVG0Ro893/AjW/mZbK7od/zPYd9wQBdTKBsphW8/+A+1i7qHz\nTmpwUZoCDoKUog1rwAykECHMQZCl4bOi0nJ/9K8KvokvD/nPOfnvHmU9JPBKQ4eM\nHkly/zIKOPBst5PdTabBia/ghXPotx496A2iJyyBeq4JaU4UnlwRslgqBUMJecch\nIqCqgF+u3sa0qsBzUm2YnwD/tU+FMJuBH2mWYwZjFtQajYIxA1o=\n=7vux\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0",
          "sha": "4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4b83bf8dbcf6b8b1c1293575391e90ac7e21b0e0"
        }
      ],
      "message": "wallet: remove unused IsSpentKey(hash, index) method",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T14:22:40Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T14:08:53Z"
      },
      "sha": "cdf185ccfb2085e5a4bf82d833392d74b748aeff"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE2MmQ0YWQxMGYyOGM1ZmEzODU1MWQ2OWNlOWIyOTZhYjM5MzNjNzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/162d4ad10f28c5fa38551d69ce9b296ab3933c77",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/162d4ad10f28c5fa38551d69ce9b296ab3933c77",
      "tree": {
        "sha": "2feac567b475a83267f9658a565bb1a3bacf24df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2feac567b475a83267f9658a565bb1a3bacf24df"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2feac567b475a83267f9658a565bb1a3bacf24df\nparent cdf185ccfb2085e5a4bf82d833392d74b748aeff\nauthor furszy <matiasfurszyfer@protonmail.com> 1654191904 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654698625 -0300\n\nwallet: add 'only_spendable' filter to AvailableCoins\n\nWe are skipping the non-spendable coins that appear in vCoins ('AvailableCoins' result) later, in several parts of the CreateTransaction and GetBalance flows:\n\nGetAvailableBalance (1) gets all the available coins calling AvailableCoins and, right away, walk through the entire vector, skipping the non-spendable coins, to calculate the total balance.\n\nInside CreateTransactionInternal â€”> SelectCoins(vCoins,...), we have several calls to AttemptSelection which, on each of them internally, we call twice to GroupOutputs which internally has two for-loops over the entire vCoins vector that skip the non-spendable coins.\n\nSo, Purpose is not add the non-spendable coins into the AvailableCoins result (vCoins) in the first place for the processes that arenâ€™t using them at all, so we donâ€™t waste resources skipping them later so many times.\n\nNote: this speedup is for all the processes that call to CreateTransaction and GetBalance* internally.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgsoIACgkQXdI8zGhq\npiOfuxAAzeGIpQvydTUBj6SrC++MBAKsAHFL3J9hbd+rqLWin8s0FJJGCw5EV1aS\nieTljPd7UXjriqveFLqjw7mNV29Tsm4fLXW2TKwfLUuiAwGdqBumgn12KaiLT5X8\n7hjeAEjVgavgixuzH4xlhxb0rtXvLWAorGQvuK6eqcRaaU8QElRjIPYQeK6rrOzx\nMAXFolJyYkWRROU38KSIA8MX+ywphkdNYV9dZtpbQNqOHfsSGmeQmhDFxA/3l1hL\nPTeWwWtF475AoCumoeoLbG6YYuDqKYqxYF0htuUEz43Y5Q4m71Zilc1yM112U1Zh\n1MG7HxsrS6pnmSSRZ0CvnWxP6kWCLTouA/85XZt7cbZw2nAog2lTrKPQnqhP5fP+\nJBIIOEFItmFAp0OkbNHCFB58iH0q0DWh40tKR/TWm/5PisP1a/ZFOnWGSpPmFxT+\nrGqNDFe6pdMkpj3bo5mN8Zs/qkCCwP7V+asdCv3YyEYPYD0EI7bxadVrv68zi+tb\nv+4Lpmj65Olo8zT7lLZpVmz3LwzB8Kj2T8r0ye1rKUNJsN4WIp2gDBSdHWb7UBSC\njHypvvQVo1wX5+mz7Yb/dKeXB/fHE0HhF4DxasOe6QKTnilYwLxLDqLQczE5KBpu\nmUSbr/NBW6SKIZuRcEXJcn9ezLy2ECgcUg96qUp0741DyVRCJtc=\n=h8sw\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdf185ccfb2085e5a4bf82d833392d74b748aeff",
          "sha": "cdf185ccfb2085e5a4bf82d833392d74b748aeff",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cdf185ccfb2085e5a4bf82d833392d74b748aeff"
        }
      ],
      "message": "wallet: add 'only_spendable' filter to AvailableCoins\n\nWe are skipping the non-spendable coins that appear in vCoins ('AvailableCoins' result) later, in several parts of the CreateTransaction and GetBalance flows:\n\nGetAvailableBalance (1) gets all the available coins calling AvailableCoins and, right away, walk through the entire vector, skipping the non-spendable coins, to calculate the total balance.\n\nInside CreateTransactionInternal â€”> SelectCoins(vCoins,...), we have several calls to AttemptSelection which, on each of them internally, we call twice to GroupOutputs which internally has two for-loops over the entire vCoins vector that skip the non-spendable coins.\n\nSo, Purpose is not add the non-spendable coins into the AvailableCoins result (vCoins) in the first place for the processes that arenâ€™t using them at all, so we donâ€™t waste resources skipping them later so many times.\n\nNote: this speedup is for all the processes that call to CreateTransaction and GetBalance* internally.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T14:30:25Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-02T17:45:04Z"
      },
      "sha": "162d4ad10f28c5fa38551d69ce9b296ab3933c77"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZkNWM5OTZkMTYwOWU2Zjg4NzY5ZjZmM2VmMGMzMjJlMzQzNWIzYWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "tree": {
        "sha": "251fead3ab31d300ed6231be0160e0537d2a5ef1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/251fead3ab31d300ed6231be0160e0537d2a5ef1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 251fead3ab31d300ed6231be0160e0537d2a5ef1\nparent 162d4ad10f28c5fa38551d69ce9b296ab3933c77\nauthor furszy <matiasfurszyfer@protonmail.com> 1651068909 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1654698626 -0300\n\nwallet: GetAvailableBalance, remove double walk-through every available coin\n\nFiltering `AvailableCoins` by spendable outputs only and using the retrieved total_amount.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmKgsoMACgkQXdI8zGhq\npiOHEQ/9Hd9TzjxUccpfjXI8Nd/tP66KczhlYqip9d1camFjSR5D7vVusdTVkQ7B\n0K5Hh4KpnO4rBU8oOQ7YIGafkS/Rf97AGo/hmv+rAtKozlo7EKCCYuSPXqRUS7rw\nDJhDrNGCgSP41zisD+KJ28Z59lJ6GJzpsTShz30HezDd/f3tcQaoh+4zuCHiJ+VR\nvWgkna7fnsp0w8HnSsB/BfCfZUNN3J4KwwJgx7jf2S6oUqoaBLnp1PASpbcMhd8Y\nWTe4tyzdzcue73T1Eum50oWft57DI6ycAf8wOQsNixF8JZVYElFwl1ciH8F0ebyR\n03InpinkkWTUX2dcsuCmVFaUBikywt7fPkqVhosps4UFJtMq/2Waq9ATmcpiw5o2\nHSREQc9rWnbMMeaO3PY/CyV0rBHQvTAF8MG7g9gXtNucsDGDzM6tOLNpbAODZDvc\nZXKRwzpSWGswUnuUsjWz5A0k18fmdS71BSxF8FBSl75W0rXPlqHkzKCP7QeaPGJx\nX/OKsa6b6j+VeGZWHMXdxqABe2Lb4rauct1foppf1fqOzfUZ8sMV9zsng2aZ46Qz\nSLSNpMsuf7PQN2pG1+vTreFojDn903XUEd4ltb+jTaEOxOI2ICrGnZelzh+VO2NY\nArrkZAo/fE9aNuFx1GBu2NmPGXXwc9EwB2m12xJGzQJFh8Axl3Y=\n=TuSW\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/162d4ad10f28c5fa38551d69ce9b296ab3933c77",
          "sha": "162d4ad10f28c5fa38551d69ce9b296ab3933c77",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/162d4ad10f28c5fa38551d69ce9b296ab3933c77"
        }
      ],
      "message": "wallet: GetAvailableBalance, remove double walk-through every available coin\n\nFiltering `AvailableCoins` by spendable outputs only and using the retrieved total_amount.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-06-08T14:30:26Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-04-27T14:15:09Z"
      },
      "sha": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6770474319,
      "node_id": "HRFPE_lADOABII585IkYOdzwAAAAGTjT1P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6770474319",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-08T14:31:33Z"
    },
    {
      "event": "commented",
      "id": 1150006470,
      "node_id": "IC_kwDOABII585Ei7TG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150006470",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-08T14:36:56Z",
      "updated_at": "2022-06-08T14:37:29Z",
      "author_association": "MEMBER",
      "body": "thanks for the feedback theStack!\r\n\r\nApplied the following changes:\r\n\r\n1) Re-wrote commits titles to be 72-80 characters long.\r\n2) Moved the `only_spendable` arg of `AvailableCoins` to be true by default.\r\n3) By having `spendable_only=true` by default, fixed an already existent hidden issue in `sendall` RPC command -> [description](https://github.com/bitcoin/bitcoin/pull/25005#discussion_r892438732)",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1150006470",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "commented",
      "id": 1156910573,
      "node_id": "IC_kwDOABII585E9Q3t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1156910573",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-15T20:42:18Z",
      "updated_at": "2022-06-15T20:42:18Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1156910573",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "commented",
      "id": 1158118362,
      "node_id": "IC_kwDOABII585FB3va",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1158118362",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T20:52:23Z",
      "updated_at": "2022-06-16T20:52:23Z",
      "author_association": "MEMBER",
      "body": "ACK fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1158118362",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "reviewed",
      "id": 1009705443,
      "node_id": "PRR_kwDOABII5848LuHj",
      "url": null,
      "actor": null,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "crACK fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#pullrequestreview-1009705443",
      "submitted_at": "2022-06-16T21:22:46Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
    },
    {
      "event": "review_requested",
      "id": 6824364592,
      "node_id": "RRE_lADOABII585IkYOdzwAAAAGWw4ow",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6824364592",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T22:15:08Z",
      "requested_reviewer": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 6824365081,
      "node_id": "RRE_lADOABII585IkYOdzwAAAAGWw4wZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6824365081",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-16T22:15:15Z",
      "requested_reviewer": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1009996258,
      "node_id": "PRR_kwDOABII5848M1Hi",
      "url": null,
      "actor": null,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review ACK https://github.com/bitcoin/bitcoin/pull/25005/commits/fd5c996d1609e6f88769f6f3ef0c322e3435b3aa\r\n\r\nClear improvement in code readability and `Available Coins()` logic.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#pullrequestreview-1009996258",
      "submitted_at": "2022-06-17T04:54:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
    },
    {
      "event": "merged",
      "id": 6831694612,
      "node_id": "ME_lADOABII585IkYOdzwAAAAGXM2MU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6831694612",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8be652e43964329c1f2dadd676916b53e5c40974",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8be652e43964329c1f2dadd676916b53e5c40974",
      "created_at": "2022-06-17T22:03:07Z"
    },
    {
      "event": "closed",
      "id": 6831694627,
      "node_id": "CE_lADOABII585IkYOdzwAAAAGXM2Mj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6831694627",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-17T22:03:07Z"
    },
    {
      "event": "reviewed",
      "id": 1010996802,
      "node_id": "PRR_kwDOABII5848QpZC",
      "url": null,
      "actor": null,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Post-merge approach ACK fd5c996, nice refactor!\r\n\r\nI did have a couple of nits/style suggestions during review, none of them crucial. I'll post them anyway since you may want to consider them in future PRs.\r\n\r\nOne thing I wonder (just out of curiosity) is why for `IsSpent()` and `IsLockedCoin()` you refactored the function signature in a single commit, whereas for `IsSpentKey()` you did it in three commits? I think both are done elegantly, just curious if there's a reason behind the (apparent) inconsistency.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#pullrequestreview-1010996802",
      "submitted_at": "2022-06-18T01:17:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
    },
    {
      "event": "commented",
      "id": 1159403854,
      "node_id": "IC_kwDOABII585FGxlO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159403854",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-18T09:11:35Z",
      "updated_at": "2022-06-18T09:11:35Z",
      "author_association": "MEMBER",
      "body": "https://cirrus-ci.com/task/4885942589718528?logs=ci#L6616\r\n\r\n```\r\nwallet/spend.cpp:237:41: error: argument name 'feerate' in comment does not match parameter name 'nMinimumAmount' [bugprone-argument-comment,-warnings-as-errors]\r\n                          std::nullopt, /*feerate=*/\r\n                                        ^\r\n./wallet/spend.h:49:43: note: 'nMinimumAmount' declared here\r\n                           const CAmount& nMinimumAmount = 1,\r\n                                          ^\r\nwallet/spend.cpp:87:13: note: actual callee ('AvailableCoins') is declared here\r\nCoinsResult AvailableCoins(const CWallet& wallet,\r\n            ^",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#issuecomment-1159403854",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25005"
    },
    {
      "event": "referenced",
      "id": 6833311100,
      "node_id": "REFE_lADOABII585IkYOdzwAAAAGXTA18",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6833311100",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8e7eeb5971444c0c93e9a89bbdcc3a51a19e09e9",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/8e7eeb5971444c0c93e9a89bbdcc3a51a19e09e9",
      "created_at": "2022-06-18T16:12:12Z"
    },
    {
      "event": "referenced",
      "id": 6835026209,
      "node_id": "REFE_lADOABII585IkYOdzwAAAAGXZjkh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6835026209",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "581c6a74be3f6e9efe5617a253da3f183167ad54",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/581c6a74be3f6e9efe5617a253da3f183167ad54",
      "created_at": "2022-06-19T17:55:25Z"
    },
    {
      "event": "referenced",
      "id": 7190700067,
      "node_id": "REFE_lADOABII585IkYOdzwAAAAGsmWAj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7190700067",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6d4889a694da12e03ef4d18bef2ff60d1d170f18",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/6d4889a694da12e03ef4d18bef2ff60d1d170f18",
      "created_at": "2022-08-15T18:38:26Z"
    },
    {
      "event": "referenced",
      "id": 8153073552,
      "node_id": "REFE_lADOABII585IkYOdzwAAAAHl9geQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8153073552",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "139ba2bf121c1d496a0ecfedb3b5f263b944cc85",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/139ba2bf121c1d496a0ecfedb3b5f263b944cc85",
      "created_at": "2023-01-04T17:11:58Z"
    },
    {
      "event": "referenced",
      "id": 8153869348,
      "node_id": "REFE_lADOABII585IkYOdzwAAAAHmAiwk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8153869348",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b23c80f51c55dcbb0c372e37756e968017574990",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/b23c80f51c55dcbb0c372e37756e968017574990",
      "created_at": "2023-01-04T19:11:27Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 9355568606,
      "node_id": "HRDE_lADOABII585IkYOdzwAAAAItoqXe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9355568606",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-27T01:51:51Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874124981",
      "pull_request_review_id": 974523072,
      "id": 874124981,
      "node_id": "PRRC_kwDOABII5840Gha1",
      "diff_hunk": "@@ -225,17 +223,13 @@ CoinsResult AvailableCoins(const CWallet& wallet,\n     return result;\n }\n \n-CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* coinControl)\n+CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* _coinControl)\n {\n     LOCK(wallet.cs_wallet);\n-\n-    CAmount balance = 0;\n-    for (const COutput& out : AvailableCoins(wallet, coinControl).coins) {\n-        if (out.spendable) {\n-            balance += out.txout.nValue;\n-        }\n-    }\n-    return balance;\n+    // Copy to filter by spendable coins only\n+    CCoinControl coinControl = _coinControl ? *_coinControl : CCoinControl();",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "2cdd2a1a5498cb8767799dd26a4082e9d3b064ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 2cdd2a1a5498cb8767799dd26a4082e9d3b064ee \"wallet: speedup 'GetAvailableBalance' filtering by spendable outputs only and using the 'AvailableCoins' retrieved total_amount.\"\r\n\r\nWhat is the purpose of the rename and making an empty `CCoinControl` here? `AvailableCoins` can take `nullptr` for `coinControl`.",
      "created_at": "2022-05-16T20:23:45Z",
      "updated_at": "2022-05-16T20:27:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r874124981",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874124981"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878744964",
      "pull_request_review_id": 980866810,
      "id": 878744964,
      "node_id": "PRRC_kwDOABII5840YJWE",
      "diff_hunk": "@@ -225,17 +223,13 @@ CoinsResult AvailableCoins(const CWallet& wallet,\n     return result;\n }\n \n-CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* coinControl)\n+CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* _coinControl)\n {\n     LOCK(wallet.cs_wallet);\n-\n-    CAmount balance = 0;\n-    for (const COutput& out : AvailableCoins(wallet, coinControl).coins) {\n-        if (out.spendable) {\n-            balance += out.txout.nValue;\n-        }\n-    }\n-    return balance;\n+    // Copy to filter by spendable coins only\n+    CCoinControl coinControl = _coinControl ? *_coinControl : CCoinControl();",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "2cdd2a1a5498cb8767799dd26a4082e9d3b064ee",
      "in_reply_to_id": 874124981,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The previous flow was:\r\n```c++\r\nstd::vector<COutput> vCoins;\r\nAvailableCoins(wallet, vCoins, coinControl);\r\nfor (const COutput& out : vCoins) {\r\n     if (out.spendable) { --> // this is the reason\r\n         balance += out.txout.nValue;\r\n     }\r\n}\r\n```\r\n\r\nTo remove the second unnecessary for-loop, as the function arg is `const CCoinControl*`, in order to continue having the same calculation (skipping the non-spendable coins), needed to create a local copy of the `coinControl` arg and set the new flag `m_include_only_spendable_outputs` to true (which by default is false).\r\n\r\nSo the coins vector and the total balance returned by `AvailableCoins` has all, and only, the spendable coins directly.\r\n\r\nIn the new flow:\r\n```c++\r\nCCoinControl coinControl = _coinControl ? *_coinControl : CCoinControl();\r\ncoinControl.m_include_only_spendable_outputs = true; // --> this enforces that non-spendable coins are filtered from `AvailableCoins` result.\r\nreturn AvailableCoins(wallet, &coinControl).total_amount;\r\n```\r\n",
      "created_at": "2022-05-21T18:09:03Z",
      "updated_at": "2022-05-21T21:46:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r878744964",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878744964"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888117918",
      "pull_request_review_id": 993779961,
      "id": 888117918,
      "node_id": "PRRC_kwDOABII584075qe",
      "diff_hunk": "@@ -395,6 +396,8 @@ RPCHelpMan sendmany()\n         coin_control.m_signal_bip125_rbf = request.params[5].get_bool();\n     }\n \n+    coin_control.m_include_only_spendable_outputs = true;",
      "path": "src/wallet/rpc/spend.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "3082f2270fa96eaf2bd1d5e69d56fce9588a4f79",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 3082f2270fa96eaf2bd1d5e69d56fce9588a4f79 \"wallet: add 'm_include_only_spendable_outputs' filter to CoinControl\"\r\n\r\nInstead of setting this parameter all the way out here in the RPC, I think it would make more sense to set it closer to the places where it actually matters, e.g. in `CreateTransactionInternal` right before `AvailableCoins` is called. This way we won't have to remember to always set this option for every caller to `CreateTransaction`.",
      "created_at": "2022-06-02T15:53:03Z",
      "updated_at": "2022-06-02T16:00:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r888117918",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888117918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 399,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888119926",
      "pull_request_review_id": 993779961,
      "id": 888119926,
      "node_id": "PRRC_kwDOABII584076J2",
      "diff_hunk": "@@ -166,24 +166,27 @@ CoinsResult AvailableCoins(const CWallet& wallet,\n         bool tx_from_me = CachedTxIsFromMe(wallet, wtx, ISMINE_ALL);\n \n         for (unsigned int i = 0; i < wtx.tx->vout.size(); i++) {\n+            const CTxOut& output = wtx.tx->vout[i];\n+            COutPoint outpoint(wtxid, i);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "aa0be53fcd85f8ad8102c5843baeec9d0740297a",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In aa0be53fcd85f8ad8102c5843baeec9d0740297a \"wallet::AvailableCoins, stop calling 'wtx.tx->vout[i]' multiple times.\"\r\n\r\nnit: const\r\n```suggestion\r\n            const COutPoint outpoint(wtxid, i);\r\n```",
      "created_at": "2022-06-02T15:55:13Z",
      "updated_at": "2022-06-02T16:00:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r888119926",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888119926"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888123040",
      "pull_request_review_id": 993779961,
      "id": 888123040,
      "node_id": "PRRC_kwDOABII5840766g",
      "diff_hunk": "@@ -204,9 +204,9 @@ CAmount CachedTxGetAvailableCredit(const CWallet& wallet, const CWalletTx& wtx,\n     bool allow_used_addresses = (filter & ISMINE_USED) || !wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\n     CAmount nCredit = 0;\n     uint256 hashTx = wtx.GetHash();\n-    for (unsigned int i = 0; i < wtx.tx->vout.size(); i++)\n-    {\n-        if (!wallet.IsSpent(hashTx, i) && (allow_used_addresses || !wallet.IsSpentKey(hashTx, i))) {\n+    for (unsigned int i = 0; i < wtx.tx->vout.size(); i++)  {\n+        COutPoint outpoint(hashTx, i);\n+        if (!wallet.IsSpent(outpoint) && (allow_used_addresses || !wallet.IsSpentKey(hashTx, i))) {",
      "path": "src/wallet/receive.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "da875e6e8008f9b7053b5ce42fade49a322e0a50",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In da875e6e8008f9b7053b5ce42fade49a322e0a50 \"wallet::IsSpent accepting 'COutPoint' instead of hash:index.\"\r\n\r\nnit: inline\r\n```suggestion\r\n        if (!wallet.IsSpent(COutPoint(hashTx, i)) && (allow_used_addresses || !wallet.IsSpentKey(hashTx, i))) {\r\n```",
      "created_at": "2022-06-02T15:58:31Z",
      "updated_at": "2022-06-02T16:00:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r888123040",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888123040"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": 208,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888153750",
      "pull_request_review_id": 993829928,
      "id": 888153750,
      "node_id": "PRRC_kwDOABII58408CaW",
      "diff_hunk": "@@ -395,6 +396,8 @@ RPCHelpMan sendmany()\n         coin_control.m_signal_bip125_rbf = request.params[5].get_bool();\n     }\n \n+    coin_control.m_include_only_spendable_outputs = true;",
      "path": "src/wallet/rpc/spend.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "3082f2270fa96eaf2bd1d5e69d56fce9588a4f79",
      "in_reply_to_id": 888117918,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I was doing it there first but the `CCoinControl` arg of `CreateTransactionInternal` is const. Options were (1) modify it by copying the coin control object to a temp variable or (2) change the function signature.\r\n\r\nAnd at least in this case, I wasn't totally good with those two options (not against neither, it was a \"maybe\"). But open for new thoughts, would you prefer option 1 more?",
      "created_at": "2022-06-02T16:25:22Z",
      "updated_at": "2022-06-02T16:25:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r888153750",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888153750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 399,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888192137",
      "pull_request_review_id": 993884505,
      "id": 888192137,
      "node_id": "PRRC_kwDOABII58408LyJ",
      "diff_hunk": "@@ -395,6 +396,8 @@ RPCHelpMan sendmany()\n         coin_control.m_signal_bip125_rbf = request.params[5].get_bool();\n     }\n \n+    coin_control.m_include_only_spendable_outputs = true;",
      "path": "src/wallet/rpc/spend.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "3082f2270fa96eaf2bd1d5e69d56fce9588a4f79",
      "in_reply_to_id": 888117918,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Actually, since this option is really just for `AvailableCoins` itself, it might make more sense to make it a parameter to `AvailableCoins` rather than having it in `CCoinControl`.",
      "created_at": "2022-06-02T17:08:27Z",
      "updated_at": "2022-06-02T17:08:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r888192137",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888192137"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 399,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888245468",
      "pull_request_review_id": 993957994,
      "id": 888245468,
      "node_id": "PRRC_kwDOABII58408Yzc",
      "diff_hunk": "@@ -395,6 +396,8 @@ RPCHelpMan sendmany()\n         coin_control.m_signal_bip125_rbf = request.params[5].get_bool();\n     }\n \n+    coin_control.m_include_only_spendable_outputs = true;",
      "path": "src/wallet/rpc/spend.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "3082f2270fa96eaf2bd1d5e69d56fce9588a4f79",
      "in_reply_to_id": 888117918,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ðŸ‘ðŸ¼ , added it in 8daa58b.",
      "created_at": "2022-06-02T18:02:46Z",
      "updated_at": "2022-06-05T14:21:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r888245468",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888245468"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 399,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891477877",
      "pull_request_review_id": 998508682,
      "id": 891477877,
      "node_id": "PRRC_kwDOABII5841It91",
      "diff_hunk": "@@ -34,16 +34,28 @@ struct TxSize {\n TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* wallet, const std::vector<CTxOut>& txouts, const CCoinControl* coin_control = nullptr);\n TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* wallet, const CCoinControl* coin_control = nullptr) EXCLUSIVE_LOCKS_REQUIRED(wallet->cs_wallet);\n \n+struct CoinsResult {\n+    std::vector<COutput> coins;\n+    // Sum of all the coins amounts\n+    CAmount total_amount{0};\n+};\n /**\n- * populate vCoins with vector of available COutputs.\n+ * Populate vCoins with vector of available COutputs.",
      "path": "src/wallet/spend.h",
      "position": null,
      "original_position": 11,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "5646ccf4af89bd77953030dedabb1545b851d3ea",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The `vCoins` parameter doesn't exist anymore, i.e. the comment should be adapted accordingly. E.g.\r\n```suggestion\r\n * Return vector of available COutputs.\r\n```",
      "created_at": "2022-06-07T16:44:01Z",
      "updated_at": "2022-06-07T17:12:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r891477877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891477877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891482704",
      "pull_request_review_id": 998508682,
      "id": 891482704,
      "node_id": "PRRC_kwDOABII5841IvJQ",
      "diff_hunk": "@@ -204,10 +204,9 @@ CAmount CachedTxGetAvailableCredit(const CWallet& wallet, const CWalletTx& wtx,\n     bool allow_used_addresses = (filter & ISMINE_USED) || !wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE);\n     CAmount nCredit = 0;\n     uint256 hashTx = wtx.GetHash();\n-    for (unsigned int i = 0; i < wtx.tx->vout.size(); i++)\n-    {\n-        if (!wallet.IsSpent(hashTx, i) && (allow_used_addresses || !wallet.IsSpentKey(hashTx, i))) {\n-            const CTxOut &txout = wtx.tx->vout[i];\n+    for (unsigned int i = 0; i < wtx.tx->vout.size(); i++)  {",
      "path": "src/wallet/receive.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "5646ccf4af89bd77953030dedabb1545b851d3ea",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: unnecessary whitespace\r\n```suggestion\r\n    for (unsigned int i = 0; i < wtx.tx->vout.size(); i++) {\r\n```",
      "created_at": "2022-06-07T16:48:19Z",
      "updated_at": "2022-06-07T17:12:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r891482704",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891482704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 207,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891498739",
      "pull_request_review_id": 998508682,
      "id": 891498739,
      "node_id": "PRRC_kwDOABII5841IzDz",
      "diff_hunk": "@@ -159,76 +165,82 @@ void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const C\n         bool tx_from_me = CachedTxIsFromMe(wallet, wtx, ISMINE_ALL);\n \n         for (unsigned int i = 0; i < wtx.tx->vout.size(); i++) {\n+            const CTxOut& output = wtx.tx->vout[i];\n+            const COutPoint outpoint(wtxid, i);\n+\n             // Only consider selected coins if add_inputs is false\n-            if (coinControl && !coinControl->m_add_inputs && !coinControl->IsSelected(COutPoint(entry.first, i))) {\n+            if (coinControl && !coinControl->m_add_inputs && !coinControl->IsSelected(outpoint)) {\n                 continue;\n             }\n \n-            if (wtx.tx->vout[i].nValue < nMinimumAmount || wtx.tx->vout[i].nValue > nMaximumAmount)\n+            if (output.nValue < nMinimumAmount || output.nValue > nMaximumAmount)\n                 continue;\n \n-            if (coinControl && coinControl->HasSelected() && !coinControl->fAllowOtherInputs && !coinControl->IsSelected(COutPoint(entry.first, i)))\n+            if (coinControl && coinControl->HasSelected() && !coinControl->fAllowOtherInputs && !coinControl->IsSelected(outpoint))\n                 continue;\n \n-            if (wallet.IsLockedCoin(entry.first, i))\n+            if (wallet.IsLockedCoin(outpoint))\n                 continue;\n \n-            if (wallet.IsSpent(wtxid, i))\n+            if (wallet.IsSpent(outpoint))\n                 continue;\n \n-            isminetype mine = wallet.IsMine(wtx.tx->vout[i]);\n+            isminetype mine = wallet.IsMine(output);\n \n             if (mine == ISMINE_NO) {\n                 continue;\n             }\n \n-            if (!allow_used_addresses && wallet.IsSpentKey(wtxid, i)) {\n+            if (!allow_used_addresses && wallet.IsSpentKey(output.scriptPubKey)) {\n                 continue;\n             }\n \n-            std::unique_ptr<SigningProvider> provider = wallet.GetSolvingProvider(wtx.tx->vout[i].scriptPubKey);\n+            std::unique_ptr<SigningProvider> provider = wallet.GetSolvingProvider(output.scriptPubKey);\n \n-            bool solvable = provider ? IsSolvable(*provider, wtx.tx->vout[i].scriptPubKey) : false;\n+            bool solvable = provider ? IsSolvable(*provider, output.scriptPubKey) : false;\n             bool spendable = ((mine & ISMINE_SPENDABLE) != ISMINE_NO) || (((mine & ISMINE_WATCH_ONLY) != ISMINE_NO) && (coinControl && coinControl->fAllowWatchOnly && solvable));\n-            int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n \n-            vCoins.emplace_back(COutPoint(wtx.GetHash(), i), wtx.tx->vout.at(i), nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me, feerate);\n+            // Filter by spendable outputs only\n+            if (!spendable && only_spendable) continue;\n+\n+            int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n+            result.coins.emplace_back(outpoint, output, nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me, feerate);\n+            result.total_amount += output.nValue;\n \n             // Checks the sum amount of all UTXO's.\n             if (nMinimumSumAmount != MAX_MONEY) {\n-                nTotal += wtx.tx->vout[i].nValue;\n-\n-                if (nTotal >= nMinimumSumAmount) {\n-                    return;\n+                if (result.total_amount >= nMinimumSumAmount) {\n+                    return result;\n                 }\n             }\n \n             // Checks the maximum number of UTXO's.\n-            if (nMaximumCount > 0 && vCoins.size() >= nMaximumCount) {\n-                return;\n+            if (nMaximumCount > 0 && result.coins.size() >= nMaximumCount) {\n+                return result;\n             }\n         }\n     }\n+\n+    return result;\n }\n \n-void AvailableCoinsListUnspent(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n+CoinsResult AvailableCoinsListUnspent(const CWallet& wallet, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n {\n-    AvailableCoins(wallet, vCoins, coinControl, /*feerate=*/ std::nullopt, nMinimumAmount, nMaximumAmount, nMinimumSumAmount, nMaximumCount);\n+    return AvailableCoins(wallet, coinControl, /*feerate=*/ std::nullopt, nMinimumAmount, nMaximumAmount, nMinimumSumAmount, nMaximumCount);\n }\n \n CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* coinControl)\n {\n     LOCK(wallet.cs_wallet);\n-\n-    CAmount balance = 0;\n-    std::vector<COutput> vCoins;\n-    AvailableCoinsListUnspent(wallet, vCoins, coinControl);\n-    for (const COutput& out : vCoins) {\n-        if (out.spendable) {\n-            balance += out.txout.nValue;\n-        }\n-    }\n-    return balance;\n+    return AvailableCoins(wallet,\n+                          coinControl,\n+                          std::nullopt, /*feerate=*/\n+                          1,            /*nMinimumAmount*/\n+                          MAX_MONEY,    /*nMaximumAmount*/\n+                          MAX_MONEY,    /*nMinimumSumAmount*/\n+                          0,            /*nMaximumCount*/\n+                          true          /*spendable_only*/\n+                          ).total_amount;",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 130,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "5646ccf4af89bd77953030dedabb1545b851d3ea",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not tested, but would it make sense to set the default parameter of `spendable_only` of `AvailableCoins` to `true` rather than `false`? Then this call would simply be\r\n```suggestion\r\n    return AvailableCoins(wallet, coinControl).total_amount;\r\n```\r\nAs far as I can see, there are only 4 instances in total that call `AvailableCoins`, so it should be quite easy to find out where `false` has to be passed explicitly for the `spendable_only` parameter.",
      "created_at": "2022-06-07T17:05:25Z",
      "updated_at": "2022-06-07T17:12:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r891498739",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/891498739"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": 235,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 242,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892438732",
      "pull_request_review_id": 999842474,
      "id": 892438732,
      "node_id": "PRRC_kwDOABII5841MYjM",
      "diff_hunk": "@@ -159,76 +165,82 @@ void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const C\n         bool tx_from_me = CachedTxIsFromMe(wallet, wtx, ISMINE_ALL);\n \n         for (unsigned int i = 0; i < wtx.tx->vout.size(); i++) {\n+            const CTxOut& output = wtx.tx->vout[i];\n+            const COutPoint outpoint(wtxid, i);\n+\n             // Only consider selected coins if add_inputs is false\n-            if (coinControl && !coinControl->m_add_inputs && !coinControl->IsSelected(COutPoint(entry.first, i))) {\n+            if (coinControl && !coinControl->m_add_inputs && !coinControl->IsSelected(outpoint)) {\n                 continue;\n             }\n \n-            if (wtx.tx->vout[i].nValue < nMinimumAmount || wtx.tx->vout[i].nValue > nMaximumAmount)\n+            if (output.nValue < nMinimumAmount || output.nValue > nMaximumAmount)\n                 continue;\n \n-            if (coinControl && coinControl->HasSelected() && !coinControl->fAllowOtherInputs && !coinControl->IsSelected(COutPoint(entry.first, i)))\n+            if (coinControl && coinControl->HasSelected() && !coinControl->fAllowOtherInputs && !coinControl->IsSelected(outpoint))\n                 continue;\n \n-            if (wallet.IsLockedCoin(entry.first, i))\n+            if (wallet.IsLockedCoin(outpoint))\n                 continue;\n \n-            if (wallet.IsSpent(wtxid, i))\n+            if (wallet.IsSpent(outpoint))\n                 continue;\n \n-            isminetype mine = wallet.IsMine(wtx.tx->vout[i]);\n+            isminetype mine = wallet.IsMine(output);\n \n             if (mine == ISMINE_NO) {\n                 continue;\n             }\n \n-            if (!allow_used_addresses && wallet.IsSpentKey(wtxid, i)) {\n+            if (!allow_used_addresses && wallet.IsSpentKey(output.scriptPubKey)) {\n                 continue;\n             }\n \n-            std::unique_ptr<SigningProvider> provider = wallet.GetSolvingProvider(wtx.tx->vout[i].scriptPubKey);\n+            std::unique_ptr<SigningProvider> provider = wallet.GetSolvingProvider(output.scriptPubKey);\n \n-            bool solvable = provider ? IsSolvable(*provider, wtx.tx->vout[i].scriptPubKey) : false;\n+            bool solvable = provider ? IsSolvable(*provider, output.scriptPubKey) : false;\n             bool spendable = ((mine & ISMINE_SPENDABLE) != ISMINE_NO) || (((mine & ISMINE_WATCH_ONLY) != ISMINE_NO) && (coinControl && coinControl->fAllowWatchOnly && solvable));\n-            int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n \n-            vCoins.emplace_back(COutPoint(wtx.GetHash(), i), wtx.tx->vout.at(i), nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me, feerate);\n+            // Filter by spendable outputs only\n+            if (!spendable && only_spendable) continue;\n+\n+            int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n+            result.coins.emplace_back(outpoint, output, nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me, feerate);\n+            result.total_amount += output.nValue;\n \n             // Checks the sum amount of all UTXO's.\n             if (nMinimumSumAmount != MAX_MONEY) {\n-                nTotal += wtx.tx->vout[i].nValue;\n-\n-                if (nTotal >= nMinimumSumAmount) {\n-                    return;\n+                if (result.total_amount >= nMinimumSumAmount) {\n+                    return result;\n                 }\n             }\n \n             // Checks the maximum number of UTXO's.\n-            if (nMaximumCount > 0 && vCoins.size() >= nMaximumCount) {\n-                return;\n+            if (nMaximumCount > 0 && result.coins.size() >= nMaximumCount) {\n+                return result;\n             }\n         }\n     }\n+\n+    return result;\n }\n \n-void AvailableCoinsListUnspent(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n+CoinsResult AvailableCoinsListUnspent(const CWallet& wallet, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n {\n-    AvailableCoins(wallet, vCoins, coinControl, /*feerate=*/ std::nullopt, nMinimumAmount, nMaximumAmount, nMinimumSumAmount, nMaximumCount);\n+    return AvailableCoins(wallet, coinControl, /*feerate=*/ std::nullopt, nMinimumAmount, nMaximumAmount, nMinimumSumAmount, nMaximumCount);\n }\n \n CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* coinControl)\n {\n     LOCK(wallet.cs_wallet);\n-\n-    CAmount balance = 0;\n-    std::vector<COutput> vCoins;\n-    AvailableCoinsListUnspent(wallet, vCoins, coinControl);\n-    for (const COutput& out : vCoins) {\n-        if (out.spendable) {\n-            balance += out.txout.nValue;\n-        }\n-    }\n-    return balance;\n+    return AvailableCoins(wallet,\n+                          coinControl,\n+                          std::nullopt, /*feerate=*/\n+                          1,            /*nMinimumAmount*/\n+                          MAX_MONEY,    /*nMaximumAmount*/\n+                          MAX_MONEY,    /*nMinimumSumAmount*/\n+                          0,            /*nMaximumCount*/\n+                          true          /*spendable_only*/\n+                          ).total_amount;",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 130,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "5646ccf4af89bd77953030dedabb1545b851d3ea",
      "in_reply_to_id": 891498739,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You found an existing issue in the RPC `sendall` command :).\r\n\r\nWhen `send_max` is set, `sendall` uses all the coins returned from `AvailableCoins` as inputs for a new transaction, without checking if the coin are spendable/solvable first.\r\n\r\nSo.. this command should be always failing in master if the user sets the `send_max` param and the wallet has at least one non-spendable or non-solvable coin.\r\n\r\nNote:\r\nThis is easily solved passing the new `spendable_only=false` flag to `AvailableCoins` here.",
      "created_at": "2022-06-08T14:14:51Z",
      "updated_at": "2022-06-08T14:39:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r892438732",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892438732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": 235,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 242,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900489542",
      "pull_request_review_id": 1010996802,
      "id": 900489542,
      "node_id": "PRRC_kwDOABII5841rGFG",
      "diff_hunk": "@@ -34,16 +34,29 @@ struct TxSize {\n TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* wallet, const std::vector<CTxOut>& txouts, const CCoinControl* coin_control = nullptr);\n TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* wallet, const CCoinControl* coin_control = nullptr) EXCLUSIVE_LOCKS_REQUIRED(wallet->cs_wallet);\n \n+struct CoinsResult {\n+    std::vector<COutput> coins;\n+    // Sum of all the coins amounts\n+    CAmount total_amount{0};\n+};\n /**\n- * populate vCoins with vector of available COutputs.\n+ * Return vector of available COutputs.",
      "path": "src/wallet/spend.h",
      "position": 11,
      "original_position": 11,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `CoinsResult` is not technically a vector of `COutputs`, think this could be updated a little bit?",
      "created_at": "2022-06-17T20:41:00Z",
      "updated_at": "2022-06-18T01:19:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r900489542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900489542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 43,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900504744",
      "pull_request_review_id": 1010996802,
      "id": 900504744,
      "node_id": "PRRC_kwDOABII5841rJyo",
      "diff_hunk": "@@ -791,11 +799,16 @@ static std::optional<CreatedTransactionResult> CreateTransactionInternal(\n     CAmount selection_target = recipients_sum + not_input_fees;\n \n     // Get available coins\n-    std::vector<COutput> vAvailableCoins;\n-    AvailableCoins(wallet, vAvailableCoins, &coin_control, coin_selection_params.m_effective_feerate, 1, MAX_MONEY, MAX_MONEY, 0);\n+    auto res_available_coins = AvailableCoins(wallet,",
      "path": "src/wallet/spend.cpp",
      "position": 152,
      "original_position": 152,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: I think the `res_` prefix is not really necessary?\r\n```suggestion\r\n    auto available_coins = AvailableCoins(wallet,\r\n```",
      "created_at": "2022-06-17T21:13:31Z",
      "updated_at": "2022-06-18T01:17:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r900504744",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900504744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 802,
      "original_line": 802,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900506046",
      "pull_request_review_id": 1010996802,
      "id": 900506046,
      "node_id": "PRRC_kwDOABII5841rKG-",
      "diff_hunk": "@@ -84,12 +84,18 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *walle\n     return CalculateMaximumSignedTxSize(tx, wallet, txouts, coin_control);\n }\n \n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl, std::optional<CFeeRate> feerate, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n+CoinsResult AvailableCoins(const CWallet& wallet,\n+                           const CCoinControl* coinControl,\n+                           std::optional<CFeeRate> feerate,\n+                           const CAmount& nMinimumAmount,\n+                           const CAmount& nMaximumAmount,\n+                           const CAmount& nMinimumSumAmount,\n+                           const uint64_t nMaximumCount,\n+                           bool only_spendable)\n {\n     AssertLockHeld(wallet.cs_wallet);\n \n-    vCoins.clear();\n-    CAmount nTotal = 0;\n+    CoinsResult result;",
      "path": "src/wallet/spend.cpp",
      "position": 18,
      "original_position": 18,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ideally, `result` is declared as closely as possible to where it's used.",
      "created_at": "2022-06-17T21:16:30Z",
      "updated_at": "2022-06-18T01:17:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r900506046",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900506046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900514170",
      "pull_request_review_id": 1010996802,
      "id": 900514170,
      "node_id": "PRRC_kwDOABII5841rMF6",
      "diff_hunk": "@@ -791,11 +799,16 @@ static std::optional<CreatedTransactionResult> CreateTransactionInternal(\n     CAmount selection_target = recipients_sum + not_input_fees;\n \n     // Get available coins\n-    std::vector<COutput> vAvailableCoins;\n-    AvailableCoins(wallet, vAvailableCoins, &coin_control, coin_selection_params.m_effective_feerate, 1, MAX_MONEY, MAX_MONEY, 0);\n+    auto res_available_coins = AvailableCoins(wallet,\n+                                              &coin_control,\n+                                              coin_selection_params.m_effective_feerate,\n+                                              1,            /*nMinimumAmount*/\n+                                              MAX_MONEY,    /*nMaximumAmount*/\n+                                              MAX_MONEY,    /*nMinimumSumAmount*/\n+                                              0);           /*nMaximumCount*/\n \n     // Choose coins to use\n-    std::optional<SelectionResult> result = SelectCoins(wallet, vAvailableCoins, /*nTargetValue=*/selection_target, coin_control, coin_selection_params);\n+    std::optional<SelectionResult> result = SelectCoins(wallet, res_available_coins.coins, /*nTargetValue=*/selection_target, coin_control, coin_selection_params);",
      "path": "src/wallet/spend.cpp",
      "position": 162,
      "original_position": 162,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: since you're already touching this, maybe you could update `result` to something more helpful like `selected_coins`? It does affect a few other lines so would understand if out of scope.",
      "created_at": "2022-06-17T21:36:57Z",
      "updated_at": "2022-06-18T01:17:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r900514170",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900514170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 811,
      "original_line": 811,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900574047",
      "pull_request_review_id": 1010996802,
      "id": 900574047,
      "node_id": "PRRC_kwDOABII5841ratf",
      "diff_hunk": "@@ -110,7 +110,7 @@ WalletTxOut MakeWalletTxOut(const CWallet& wallet,\n     result.txout = wtx.tx->vout[n];\n     result.time = wtx.GetTxTime();\n     result.depth_in_main_chain = depth;\n-    result.is_spent = wallet.IsSpent(wtx.GetHash(), n);\n+    result.is_spent = wallet.IsSpent(COutPoint(wtx.GetHash(), n));",
      "path": "src/wallet/interfaces.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it's preferred to use {} list initialization - any reason not to? (Here and in quite a few other places)\r\n```suggestion\r\n    result.is_spent = wallet.IsSpent(COutPoint{wtx.GetHash(), n});\r\n```",
      "created_at": "2022-06-17T23:47:45Z",
      "updated_at": "2022-06-18T01:17:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r900574047",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900574047"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 113,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900638179",
      "pull_request_review_id": 1010996802,
      "id": 900638179,
      "node_id": "PRRC_kwDOABII5841rqXj",
      "diff_hunk": "@@ -159,76 +165,81 @@ void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const C\n         bool tx_from_me = CachedTxIsFromMe(wallet, wtx, ISMINE_ALL);\n \n         for (unsigned int i = 0; i < wtx.tx->vout.size(); i++) {\n+            const CTxOut& output = wtx.tx->vout[i];\n+            const COutPoint outpoint(wtxid, i);\n+\n             // Only consider selected coins if add_inputs is false\n-            if (coinControl && !coinControl->m_add_inputs && !coinControl->IsSelected(COutPoint(entry.first, i))) {\n+            if (coinControl && !coinControl->m_add_inputs && !coinControl->IsSelected(outpoint)) {\n                 continue;\n             }\n \n-            if (wtx.tx->vout[i].nValue < nMinimumAmount || wtx.tx->vout[i].nValue > nMaximumAmount)\n+            if (output.nValue < nMinimumAmount || output.nValue > nMaximumAmount)\n                 continue;\n \n-            if (coinControl && coinControl->HasSelected() && !coinControl->fAllowOtherInputs && !coinControl->IsSelected(COutPoint(entry.first, i)))\n+            if (coinControl && coinControl->HasSelected() && !coinControl->fAllowOtherInputs && !coinControl->IsSelected(outpoint))\n                 continue;\n \n-            if (wallet.IsLockedCoin(entry.first, i))\n+            if (wallet.IsLockedCoin(outpoint))\n                 continue;\n \n-            if (wallet.IsSpent(wtxid, i))\n+            if (wallet.IsSpent(outpoint))\n                 continue;\n \n-            isminetype mine = wallet.IsMine(wtx.tx->vout[i]);\n+            isminetype mine = wallet.IsMine(output);\n \n             if (mine == ISMINE_NO) {\n                 continue;\n             }\n \n-            if (!allow_used_addresses && wallet.IsSpentKey(wtxid, i)) {\n+            if (!allow_used_addresses && wallet.IsSpentKey(output.scriptPubKey)) {\n                 continue;\n             }\n \n-            std::unique_ptr<SigningProvider> provider = wallet.GetSolvingProvider(wtx.tx->vout[i].scriptPubKey);\n+            std::unique_ptr<SigningProvider> provider = wallet.GetSolvingProvider(output.scriptPubKey);\n \n-            bool solvable = provider ? IsSolvable(*provider, wtx.tx->vout[i].scriptPubKey) : false;\n+            bool solvable = provider ? IsSolvable(*provider, output.scriptPubKey) : false;\n             bool spendable = ((mine & ISMINE_SPENDABLE) != ISMINE_NO) || (((mine & ISMINE_WATCH_ONLY) != ISMINE_NO) && (coinControl && coinControl->fAllowWatchOnly && solvable));\n-            int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n \n-            vCoins.emplace_back(COutPoint(wtx.GetHash(), i), wtx.tx->vout.at(i), nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me, feerate);\n+            // Filter by spendable outputs only\n+            if (!spendable && only_spendable) continue;\n+\n+            int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n+            result.coins.emplace_back(outpoint, output, nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me, feerate);\n+            result.total_amount += output.nValue;\n \n             // Checks the sum amount of all UTXO's.\n             if (nMinimumSumAmount != MAX_MONEY) {\n-                nTotal += wtx.tx->vout[i].nValue;\n-\n-                if (nTotal >= nMinimumSumAmount) {\n-                    return;\n+                if (result.total_amount >= nMinimumSumAmount) {\n+                    return result;\n                 }\n             }\n \n             // Checks the maximum number of UTXO's.\n-            if (nMaximumCount > 0 && vCoins.size() >= nMaximumCount) {\n-                return;\n+            if (nMaximumCount > 0 && result.coins.size() >= nMaximumCount) {\n+                return result;\n             }\n         }\n     }\n+\n+    return result;\n }\n \n-void AvailableCoinsListUnspent(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n+CoinsResult AvailableCoinsListUnspent(const CWallet& wallet, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n {\n-    AvailableCoins(wallet, vCoins, coinControl, /*feerate=*/ std::nullopt, nMinimumAmount, nMaximumAmount, nMinimumSumAmount, nMaximumCount);\n+    return AvailableCoins(wallet, coinControl, /*feerate=*/ std::nullopt, nMinimumAmount, nMaximumAmount, nMinimumSumAmount, nMaximumCount, /*only_spendable=*/false);\n }\n \n CAmount GetAvailableBalance(const CWallet& wallet, const CCoinControl* coinControl)\n {\n     LOCK(wallet.cs_wallet);\n-\n-    CAmount balance = 0;\n-    std::vector<COutput> vCoins;\n-    AvailableCoinsListUnspent(wallet, vCoins, coinControl);\n-    for (const COutput& out : vCoins) {\n-        if (out.spendable) {\n-            balance += out.txout.nValue;\n-        }\n-    }\n-    return balance;\n+    return AvailableCoins(wallet,\n+                          coinControl,\n+                          std::nullopt, /*feerate=*/\n+                          1,            /*nMinimumAmount*/\n+                          MAX_MONEY,    /*nMaximumAmount*/\n+                          MAX_MONEY,    /*nMinimumSumAmount*/\n+                          0             /*nMaximumCount*/\n+                          ).total_amount;",
      "path": "src/wallet/spend.cpp",
      "position": 129,
      "original_position": 129,
      "commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "original_commit_id": "fd5c996d1609e6f88769f6f3ef0c322e3435b3aa",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Since we're explicitly relying on `only_spendable` to be `true`, I think it would be nice to make the argument explicit?",
      "created_at": "2022-06-18T01:15:11Z",
      "updated_at": "2022-06-18T01:17:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25005#discussion_r900638179",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900638179"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25005"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 242,
      "original_line": 242,
      "side": "RIGHT"
    }
  ]
}