{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075",
    "id": 3102178109,
    "node_id": "PR_kwDOABII586453s9",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34075",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34075.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34075.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/522406cdf593c1956403bf4aa7cb51e1a25ea241",
    "number": 34075,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "fees: Introduce Mempool Based Fee Estimation to reduce overestimation",
    "user": {
      "login": "ismaelsadeeq",
      "id": 48946461,
      "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ismaelsadeeq",
      "html_url": "https://github.com/ismaelsadeeq",
      "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
      "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
      "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
      "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
      "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This PR is another attempt to fix #27995 using a better approach.\r\n\r\nFor background and motivation, see #27995 and the discussion in the Delving Bitcoin post [Mempool Based Fee Estimation on Bitcoin Core](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703)\r\nThis PR is currently limited to using the mempool only to lower what is recommended by the Block Policy Estimator.\r\nAccurate and safe fee estimation using the mempool is challenging. There are open questions about how to prevent mempool games that are theoretically possible for miners [(a variant of the Finney attack)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6)\r\n\r\nThis is one of the reasons I opted to use the mempool only to lower the Block Policy Estimator, which itself is not gameable, and therefore this mechanism is not susceptible to this attack.\r\n\r\nThe underlying assumption here is that, with the current tools and work done to make RBF and CPFP feasible and guarantee (TRUC transaction relay, ephemeral anchors, cluster size 2 package rbf), it is safer to underestimate rather than overestimate.\r\nWe now assume it is relatively easy to fee-bump later if a transaction does not confirm, whereas once a fee is overestimated there is no way to recover from that.\r\n\r\nAnother open question when using the mempool for fee estimation is how to account for incoming transaction inflow.\r\n[Bitcoin Augur](https://github.com/block/bitcoin-augur) does this by using past inflow plus a constant expected inflow to predict future inflow. I find this unconvincing for fee estimation and potentially prone to more overestimation, as past conditions are not always representative of the future. See my [review of the Augur fee rate estimator and open questions](https://github.com/block/bitcoin-augur/issues/3).\r\n\r\nThis PR uses a much simpler approach based on current user behavior, similar to the widely used method employed by mempool.space: looking at the top block of the mempool and selecting a percentile feerate depending on whether the user is economical or conservative.\r\n\r\nEmpirical data from both myself and Clara Shikhelman shows that the 75th percentile feerate for economical users and the 50th percentile feerate for conservative users provide positive confirmation guarantees, hence this is what is used in this PR.\r\n\r\nParallel research by René Pickhardt and his student suggests that using the [average fee per byte of the block template performs well](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/12).\r\n\r\nAll of these are constants that can be adjusted, there is parallel work exploring these constants and running benchmarks across fee estimators to find a sweet spot.\r\n\r\nSee also work in LND, the [LND Budget Sweeper](https://delvingbitcoin.org/t/lnds-deadline-aware-budget-sweeper/1512), which applies this idea successfully. Their approach is to estimate fees initially with bitcoind, then increment gradually as the confirmation deadline approaches, using a fixed fee budget.\r\n\r\nHistorical data indicates that by doing only the approach in this PR, we are able to [reduce overestimation quite significantly (~29%)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8).\r\n\r\nThis is particularly useful in scenarios where the Block Policy Estimator recommends a high feerate while the mempool is empty.\r\n<img width=\"1800\" height=\"1090\" alt=\"56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e\" src=\"https://github.com/user-attachments/assets/c035c40c-8ece-42a7-b290-d29f1ac9bf4d\" />\r\n\r\nAs seen in the image above, there is only one remaining unfixed case: when there is a sudden inflow of transactions and the feerate rises, the Block Policy Estimator takes time to reflect this. In that case, users will continue to see a low feerate estimate until it slowly updates. From the historical data linked above, [this occurs about ~26% of the time](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8)).\r\n\r\nOverall, we observe a **73% success rate with 0% overestimation, and 26% underestimation** with this approach.\r\n\r\nThis PR also includes refactors that enable this work. Rather than splitting the PR and implementing changes incrementally, I opted for an end-to-end implementation:\r\n\r\n### 1. Refactors\r\n\r\n* Separation of feerate format from the fee estimate mode enumerator (separation of concerns, as they are semantically distinct)\r\n* Move logging after fee estimation estimateSmartFee from the wallet to the Block Policy Estimator internal method (also separation of concerns and avoiding leaking fee estimator internals). This change also comes with updating `createTransactionInternal` to log only the fee and its source (fee estimator, fallback fee, etc.), which is more appropriate.\r\n* Separate the fee estimate mode enum from the fee source enumerator (separation of concerns, as they are semantically distinct). This introduces a minor breaking change: the wallet RPCs now return fee *source* instead of fee *reason*, which is more accurate. Let me know if we prefer to keep the field name unchanged while returning the fee source.\r\n* Move the `StringForReason` enum from `common` to the Block Policy Estimator (also separation of concerns)\r\n* Various test file updates and renames for improved accuracy\r\n* Update Block Policy Estimator unit tests to be independent of the mempool and the validation interface\r\n\r\n### 2. Introduce Mempool-Based Fee Estimator and Fee Estimator Manager\r\n\r\n* Introduce a new abstract fee estimator base class that all fee estimators must implement\r\n\r\n* Introduce `FeeRateEstimateResult` as the response type, containing metadata and avoiding the use of out-parameters. This is easily extensible and makes future changes less invasive, as method signatures do not need to change.\r\n\r\n* Add `FeeEstimatorType` enum to identify different fee estimators\r\n\r\n* Make `CBlockPolicyEstimator` derive from the new fee estimator base class\r\n\r\n* Add `FeeRateEstimatorManager`, responsible for managing all fee estimators\r\n\r\n* Update the node context to store a `unique_ptr` to `FeeRateEstimatorManager` instead of `CBlockPolicyEstimator`\r\n\r\n* Update `CBlockPolicyEstimator` to no longer subscribe directly to the validation interface; instead, `FeeRateEstimatorManager` subscribes and forwards relevant notifications\r\n\r\n* Add a percentile calculation function that takes the chunk feerates of a block template and returns feerate percentiles; this can also be reused by the `getblockstats` RPC\r\n\r\n* Add a mempool fee estimator that generates a block template when called, calculates a percentile feerate, and returns the 75th percentile for economical mode or the 50th percentile for conservative mode\r\n\r\n* Add caching to the mempool estimator so that new estimates are generated only every 7 seconds, assuming enough [transactions have propagated](https://bitcoin.stackexchange.com/questions/125776/how-long-does-it-take-for-a-transaction-to-propagate-through-the-network/125777#125777) to make a meaningful difference.\r\n  This heuristic will likely be replaced by requesting block templates via the general-purpose block template cache proposed here: [https://github.com/bitcoin/bitcoin/issues/33389](https://github.com/bitcoin/bitcoin/issues/33389)\r\n\r\n* Update `MempoolTransactionRemovedForBlock` to return the actual block transactions as well\r\n\r\n* Track the weight of block transactions and evicted transactions after each block connection\r\n  This data is tracked for the last 6 mined blocks. A mempool feerate estimate is returned only when the average ratio of mempool transaction weight evicted due to `BLOCK` reasons to block transaction weight is greater than 75%. This heuristic provides rough confidence that the node’s mempool matches that of the majority of the hashrate. The 75% threshold is arbitrary and can be adjusted.\r\n\r\nThere is a caveat when transactions in the local mempool are consistently not mined by the network, as described in #27995 (e.g., due to filtering).\r\nAccounting for these transactions during fee estimation is not necessary, as they should be evicted from the mempool itself (see #33510). Handling this again within fee estimation would be redundant.\r\n\r\n* Persist statistics for the 6 most recent blocks to disk during periodic flushes and shutdown, so this data is available after restarts\r\n* Expose this data to users when running `estimatesmartfee` with verbosity > 2\r\n\r\n<details>\r\n<summary>see example output</summary>\r\n\r\n```\r\nbitcoin-cli estimatesmartfee 1 \"conservative\" 2\r\n```\r\n\r\n```\r\n{\r\n  \"feerate\": 0.00002133,\r\n  \"errors\": [],\r\n  \"blocks\": 2,\r\n  \"mempool_health_statistics\": [\r\n    {\r\n      \"block_height\": 927953,\r\n      \"block_weight\": 3991729,\r\n      \"mempool_txs_weight\": 3942409,\r\n      \"ratio\": 0.987644451815241\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\n</details>",
    "labels": [
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      }
    ],
    "created_at": "2025-12-15T11:53:35Z",
    "updated_at": "2026-02-03T16:24:22Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "e91acc1b8f79877cd734a4fca7e2d639939ae245",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ismaelsadeeq:12-2025-fee-estimation-improvement",
      "ref": "12-2025-fee-estimation-improvement",
      "sha": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 577730599,
        "node_id": "R_kgDOIm94Jw",
        "name": "bitcoin",
        "full_name": "ismaelsadeeq/bitcoin",
        "owner": {
          "login": "ismaelsadeeq",
          "id": 48946461,
          "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
          "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ismaelsadeeq",
          "html_url": "https://github.com/ismaelsadeeq",
          "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
          "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
          "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
          "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
          "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ismaelsadeeq/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ismaelsadeeq/bitcoin",
        "archive_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ismaelsadeeq/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ismaelsadeeq/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ismaelsadeeq/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/hooks",
        "svn_url": "https://github.com/ismaelsadeeq/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 296592,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-03T15:08:02Z",
        "created_at": "2022-12-13T11:54:34Z",
        "updated_at": "2023-03-10T09:46:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b58eebf1520f503bd4c7c5693546a6859064ce51",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38846,
        "stargazers_count": 87906,
        "watchers_count": 87906,
        "size": 303024,
        "default_branch": "master",
        "open_issues_count": 743,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-03T11:26:44Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-03T16:57:43Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 1666,
    "deletions": 456,
    "changed_files": 59,
    "commits": 29,
    "review_comments": 18,
    "comments": 12
  },
  "events": [
    {
      "event": "labeled",
      "id": 21564546035,
      "node_id": "LE_lADOABII587eVGWDzwAAAAUFWNvz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21564546035",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-15T11:53:38Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 3655219358,
      "node_id": "IC_kwDOABII587Z3jie",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3655219358",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-15T11:53:44Z",
      "updated_at": "2026-02-03T15:09:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34075.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34405](https://github.com/bitcoin/bitcoin/pull/34405) (wallet: skip APS when no partial spend exists by 8144225309)\n* [#33922](https://github.com/bitcoin/bitcoin/pull/33922) (mining: add getMemoryLoad() and track template non-mempool memory footprint by Sjors)\n* [#33421](https://github.com/bitcoin/bitcoin/pull/33421) (node: add  `BlockTemplateCache` by ismaelsadeeq)\n* [#33199](https://github.com/bitcoin/bitcoin/pull/33199) (fees: enable `CBlockPolicyEstimator` return sub 1 sat/vb fee rate estimates by ismaelsadeeq)\n* [#32427](https://github.com/bitcoin/bitcoin/pull/32427) ((RFC) kernel: Replace leveldb-based BlockTreeDB with flat-file based store by sedited)\n* [#32138](https://github.com/bitcoin/bitcoin/pull/32138) (wallet, rpc: remove settxfee and paytxfee by polespinasa)\n* [#31382](https://github.com/bitcoin/bitcoin/pull/31382) (kernel: Flush in ChainstateManager destructor by sedited)\n* [#30343](https://github.com/bitcoin/bitcoin/pull/30343) (wallet, logging: Replace WalletLogPrintf() with LogInfo() by ryanofsky)\n* [#28690](https://github.com/bitcoin/bitcoin/pull/28690) (build: Introduce internal kernel library by sedited)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- \"block policy estimates file that are more than 60 hours (2.5 days) old will not be read,\" -> \"block policy estimates files that are more than 60 hours (2.5 days) old will not be read,\" [plural agreement: \"file that are\" is ungrammatical; use \"files that are\" or rephrase to singular]\n- \"// Similate it being added into the mempool by adding it to mempool txs\" -> \"// Simulate it being added into the mempool by adding it to mempool txs\" [spelling error: \"Similate\" -> \"Simulate\"]\n\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- assert_raises_rpc_error(...) in test/functional/rpc_estimatefee.py\n- estimatesmartfee(...) in test/functional/feature_fee_estimation.py\n\n\n\n<sup>2026-02-03 15:09:19</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3655219358",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "labeled",
      "id": 21566242386,
      "node_id": "LE_lADOABII587eVGWDzwAAAAUFcr5S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21566242386",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-15T13:11:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21567109730,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAUFf_pi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21567109730",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6ab7665b128ac5f8096bcf99f2054f74ba6d4117",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/6ab7665b128ac5f8096bcf99f2054f74ba6d4117",
      "created_at": "2025-12-15T13:47:25Z"
    },
    {
      "event": "unlabeled",
      "id": 21573564259,
      "node_id": "UNLE_lADOABII587eVGWDzwAAAAUF4ndj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21573564259",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-15T18:15:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3657960271,
      "node_id": "IC_kwDOABII587aCAtP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3657960271",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-15T23:01:56Z",
      "updated_at": "2025-12-15T23:01:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think this is a good idea, especially if it there was a 'very conservative' that just didn't use this.\r\n\r\n> Accounting for these transactions during fee estimation is not necessary, as they should be evicted from the mempool itself\r\n\r\nI don't agree here-- rather time based expiration should probably be eliminated over time.  If there really is a censored transaction then we want nodes to work on getting it mined, and not just give up if the censors manage to control the blocks for a long time.\r\n\r\nAlso two weeks is already long time to allow a non-minable transaction to distort fee estimates.  And it's a short time for low rate confirmation-- there have been times in history when transactions weren't confirmed for months after their initial announcement (though those were also at time so far where size based expiration would have eliminated them).\r\n\r\nSo I suggest instead that *future work* (not this PR) could improve the estimator by excluding from considerations transactions that should have been mined according to our template but weren't for more than a threshold number of blocks, perhaps 6 or something like that.\r\n\r\nSuch code could also be used to log/warn the user that there is either ongoing censorship or that their node's policy appears to be less restrictive than the network.\r\n\r\nBut in any case it doesn't need to be done immediate to make use of this kind of estimator.\r\n\r\n> Overall, we observe a 73% success rate with 0% overestimation, and 26% underestimation with this approach.\r\n\r\nOne thing to keep in mind is that if this approach is widely used the success rate will probably change.  It might make sense to initially deploy with more conservative settings (/defaults) and slowly increase them to avoid causing an abrupt change.\r\n",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3657960271",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "labeled",
      "id": 21595613005,
      "node_id": "LE_lADOABII587eVGWDzwAAAAUHMudN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21595613005",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-16T15:25:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21595884546,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAUHNwwC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21595884546",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "41076c665c2ef5f9124ab6ef2c254ffa1b767a69",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/41076c665c2ef5f9124ab6ef2c254ffa1b767a69",
      "created_at": "2025-12-16T15:36:51Z"
    },
    {
      "event": "commented",
      "id": 3661177072,
      "node_id": "IC_kwDOABII587aOSDw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3661177072",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-16T15:39:16Z",
      "updated_at": "2025-12-16T15:39:16Z",
      "author_association": "MEMBER",
      "body": "> I don't agree here; rather, time-based expiration should probably be eliminated over time. If there really is a censored transaction, then we want nodes to continue working to get it mined, not just give up if censors manage to control blocks for a long time.\r\n\r\nIndeed. In the context of censorship, we would want to keep such transactions if they are incentive compatible. However, there may also be legitimate reasons miners deliberately exclude them for example, a legacy node that is unaware of a soft fork that invalidates a certain spend (e.g., post-quantum).\r\n\r\nHence as you also mentioned, I would like to see the direction of #33510, leaning toward deferring this improvement to future work.\r\n\r\n> Especially if there were a “very conservative” option that simply didn’t use this. One thing to keep in mind is that if this approach is widely used, the success rate will probably change. It might make sense to initially deploy with more conservative settings (or defaults) and slowly increase them to avoid causing an abrupt change.\r\n\r\nI considered this and even had a branch that added an option to `estimatesmartfee` to force block-policy-only behavior.\r\n\r\nHowever, the users this targets are those running `bitcoind` with default settings and trusting developers to make sane default choices. I’ve seen this scenario before with previous conservative defaults: complaints and issues accumulated over time, eventually leading us to [switch block policy the default to economical](https://github.com/bitcoin/bitcoin/pull/30275), which provided a significant reduction in overestimation and better accuracy.\r\n\r\nFWIW, I also did some research over a short block interval to get a sense of what Bitcoin core wallet users uses for feerate estimation, and I find that the majority of Bitcoin Core wallet users (that I was able to fingerprints) are not using the block-policy estimator, we’ve seen self-hosted users [1](https://github.com/decred/dcrdex/pull/3046) [2](https://github.com/btcpayserver/btcpayserver/pull/5490) switch approaches in the past, I’ve also personally spoken to large Bitcoin services that rely on third party but want this feature.  \r\nIt seems to me enabling this by default feels like the better direction, IMHO.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3661177072",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "unlabeled",
      "id": 21598633487,
      "node_id": "UNLE_lADOABII587eVGWDzwAAAAUHYP4P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21598633487",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-16T17:47:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3665733085,
      "node_id": "IC_kwDOABII587afqXd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3665733085",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T14:57:03Z",
      "updated_at": "2025-12-17T14:57:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think enabling it by default probably makes sense, that particular sub comment was more about having a ready way to choose not to use it when transacting.\r\n\r\nAs far as the initial defaults I think there I meant that that it shouldn't target too close to the bottom of the mempool as even if that currently gets high success that may not be true after wide deployment.  Though on reflection I'm not sure that thats true as this only lowers feerates, so other people using this should only increase your odds of success while using it.",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3665733085",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "labeled",
      "id": 21649028684,
      "node_id": "LE_lADOABII587eVGWDzwAAAAUKYfZM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21649028684",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T17:13:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21704632461,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAUNsmiN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21704632461",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "created_at": "2025-12-22T13:16:19Z"
    },
    {
      "event": "unlabeled",
      "id": 21705746691,
      "node_id": "UNLE_lADOABII587eVGWDzwAAAAUNw2kD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21705746691",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T14:17:44Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3724715323,
      "node_id": "IC_kwDOABII587eAqU7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3724715323",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T16:40:50Z",
      "updated_at": "2026-01-08T16:40:50Z",
      "author_association": "MEMBER",
      "body": "@brunoerg friendly ping for a mutation score and un-killed mutants 🔪 \r\n\r\n\r\n--- \r\nI will fix the issues brought up by @DrahtBot soon.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3724715323",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "mentioned",
      "id": 21927693642,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAUa_g1K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21927693642",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T16:40:51Z"
    },
    {
      "event": "subscribed",
      "id": 21927693671,
      "node_id": "SE_lADOABII587eVGWDzwAAAAUa_g1n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21927693671",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T16:40:51Z"
    },
    {
      "event": "mentioned",
      "id": 21927693709,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAUa_g2N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21927693709",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T16:40:51Z"
    },
    {
      "event": "subscribed",
      "id": 21927693740,
      "node_id": "SE_lADOABII587eVGWDzwAAAAUa_g2s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21927693740",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T16:40:51Z"
    },
    {
      "event": "commented",
      "id": 3724801582,
      "node_id": "IC_kwDOABII587eA_Yu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3724801582",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T17:00:36Z",
      "updated_at": "2026-01-08T17:00:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @brunoerg friendly ping for a mutation score and un-killed mutants 🔪 \n> \n> \n> \n> \n> \n> --- \n> \n> I will fix the issues brought up by @DrahtBot soon.\n\nI'm running it. ",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3724801582",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "mentioned",
      "id": 21928107388,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAUbBF18",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21928107388",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T17:00:37Z"
    },
    {
      "event": "subscribed",
      "id": 21928107423,
      "node_id": "SE_lADOABII587eVGWDzwAAAAUbBF2f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21928107423",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T17:00:37Z"
    },
    {
      "event": "mentioned",
      "id": 21928107468,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAUbBF3M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21928107468",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T17:00:37Z"
    },
    {
      "event": "subscribed",
      "id": 21928107512,
      "node_id": "SE_lADOABII587eVGWDzwAAAAUbBF34",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21928107512",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T17:00:37Z"
    },
    {
      "event": "reviewed",
      "id": 3645650633,
      "node_id": "PRR_kwDOABII587ZTDbJ",
      "url": null,
      "actor": null,
      "commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-09T21:45:49Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3645650633",
      "submitted_at": "2026-01-09T21:45:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21972613795,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAUdq3qj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21972613795",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "de42f89889f9494eaa9bcbb7efdbe85d86b344b7",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/de42f89889f9494eaa9bcbb7efdbe85d86b344b7",
      "created_at": "2026-01-11T17:01:40Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21973066478,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAUdsmLu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21973066478",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9e2070f9fc199f5b374975387d921c614cae1114",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/9e2070f9fc199f5b374975387d921c614cae1114",
      "created_at": "2026-01-11T17:36:36Z"
    },
    {
      "event": "labeled",
      "id": 21974105799,
      "node_id": "LE_lADOABII587eVGWDzwAAAAUdwj7H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21974105799",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-11T18:53:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3735422097,
      "node_id": "IC_kwDOABII587epgSR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3735422097",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-11T18:53:37Z",
      "updated_at": "2026-01-11T18:53:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `32 bit ARM`: https://github.com/bitcoin/bitcoin/actions/runs/20899189424/job/60042443886</sub>\n<sub>LLM reason (✨ experimental): Compilation failed due to a dangling reference error in mempool_estimator.cpp, treated as an error by -Werror.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3735422097",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21991543518,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAUezFLe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21991543518",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/76b36fe917ec61cd390734278f478b82c2409703",
      "created_at": "2026-01-12T14:46:42Z"
    },
    {
      "event": "unlabeled",
      "id": 21993564715,
      "node_id": "UNLE_lADOABII587eVGWDzwAAAAUe6yor",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21993564715",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-12T16:04:31Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3669126866,
      "node_id": "PRR_kwDOABII587asm7S",
      "url": null,
      "actor": null,
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-16T06:23:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "This is very impressive and a nice improvement. This is quite a big PR so I've spent some time trying to understand what the PR is doing conceptually, why the design choices were made, and what trade-offs are being accepted, before diving deeply into the code.\r\nI’m still new, so please treat the points below as learning-oriented feedback rather than authoritative critique\r\n\r\n### High-level understanding/summary\r\nFrom my understanding, this PR Introduces a mempool-based fee estimator that supplements (but never replaces) the existing Block Policy Estimator i.e:\r\n\r\n`Final fee = min(Block Policy Estimator, mempool-based estimate)\r\n`\r\n\r\nThis means:\r\nFees are never increased above the Block Policy Estimator using mempool data.\r\nMempool data can only lower the recommendation when conditions look favorable.\r\nIf the local mempool is deemed unreliable (via the “mempool health” heuristic), the system falls back entirely to the Block Policy Estimator.\r\n\r\n### Threat model, assumptions, and mitigations\r\n\r\n**Miner manipulation (Finney-like attacks):** A miner could try to seed the mempool with fake high-fee transactions or withhold a block to raise mempool fees before releasing it (a variant of a Finney attack). However, because this PR uses `min(Block Policy Estimator, mempool_estimate)`, an attacker cannot force the recommended fee above the safe Block Policy Estimator value (which is based on confirmed blocks). In effect, miners can only induce under-bidding, not over-bidding. As a result, the worst-case is that transactions are slower to confirm (underestimate), but never require overpayment. Underpayment is considered safer since transactions can be fee bumped later if needed. So the assumption here is “it is relatively easy to fee-bump later if a transaction does not confirm, whereas once a fee is overestimated there is no way to recover from that”\r\n\r\n**Mempool Representativeness & Filtering Issues:** Local mempool divergence (e.g. due to policy differences or connectivity) could otherwise spoil the estimator. The PR addresses this through the “mempool health” (sanity) check: it tracks, for each of the last 6 blocks, how much weight of the block’s transactions was present in our mempool when the block arrived. If the average is below 75%, we assume our mempool isn’t representative (e.g. we missed many tx, or we hold tx miners wouldn’t mine) therefore we will not use  the mempool estimator, falling back to Block Policy Estimator.  \r\n\r\nTo be more elaborate IIUC, based on the mempool health, choose estimator:\r\n\r\n**If mempool is healthy:** Bitcoin Core may use the mempool estimator by simulating the next block and computing a percentile fee (e.g., 50th or 75th percentile). Then it takes:\r\n\r\n`final_fee = min(Block Policy Estimator, mempool fee)`\r\n\r\n**If mempool is not healthy:** Bitcoin Core skips the mempool estimator entirely and just uses the Block Policy Estimator\r\n\r\nMempool health check make sure our mempool ≈ to the miners’ mempool. If my understanding is correct.\r\n\r\nSo I’m guessing this will be dynamic i.e always performing mempool health checks before choosing either to use Block Policy Estimator or mempool Estimator depending on the above conditions.\r\n\r\n**Question:**\r\nAre we treating the 75% mempool-health threshold as a statistically meaningful guarantee of fee-estimate correctness, or merely as a coarse guardrail — and do we have empirical evidence about false positives where the guardrail passes but the estimate is still misleading?\r\n\r\n**Adversarial flooding of mempool:** The assumption here is that malicious peer could flood the local mempool with many very low-fee or very high-fee transactions. If low-fee spam dominates the top of the mempool histogram, the chosen percentile fee rate drops sharply, causing an underestimate. This is tolerated (the user may pay less but risk delay), and in practice the mempool “health” checks will likely disable mempool-based estimates if the mempool is dominated by attacker traffic. Flooding with high-fee spam cannot raise the fee estimate beyond Block Policy Estimator, limiting damage.\r\n\r\n**Choice of Percentiles and Other Heuristics:** The PR chooses fixed fee percentiles for the mempool-based estimator based on empirical testing. In economical mode, it returns the 75th percentile fee from a simulated block template built from the current mempool, while conservative mode returns the 50th percentile. The percentile represents the fee rate at which that fraction of the block’s total weight would be filled when transactions are ordered by fee rate. These choices aim to balance cost and reliability: higher percentiles lower fees but increase delay risk, while lower percentiles raise fees and improve confirmation odds. Mainnet testing (Feb–Mar 2024) showed almost no overpayments and about 26% underpayments, compared to roughly 29% overpayments when using the historical Block Policy Estimator alone.\r\n\r\nBeyond percentiles, the PR introduces two additional heuristics: a 7-second cache and a 75% mempool weight threshold. The cache avoids rebuilding block templates too frequently, based on the assumption that mempool contents do not change meaningfully within a few seconds. The weight threshold checks whether the local mempool is representative by requiring that, on average, at least 75% of the transaction weight in recent blocks was already present in the node’s mempool before mining. If this condition is not met, the estimator ignores the mempool and falls back to Block Policy Estimator.\r\nThese constants are explicitly acknowledged as tunable and somewhat arbitrary. Overall, the heuristics are intended as a practical starting point that improves fee accuracy without compromising safety, while leaving room for refinement.\r\n\r\n**Handling Sudden Inflows (“Unfixed Case”):** A key concern is when the mempool suddenly fills (fee demand surges) after the estimate was computed but before the transaction is mined. In this case the mempool-based estimate was too low and Block Policy Estimator will catch up only gradually via future blocks. Historical data suggests this happens roughly 26% of the time, accounting for most underestimation cases. In such cases users may need an RBF bump once the fee crisis becomes apparent.\r\n\r\n### Mempool health check suggestions\r\nThe PR already exposes detailed mempool_health_statistics via estimatesmartfee (verbosity > 2), which is a great foundation. However, I think node operators and wallet developers currently lack guidance on how to interpret and act on this data. I suggest the following improvements and documentation clarifications:\r\n\r\n**Clarify how mempool health is interpreted**\r\nDocument that each entry shows how much of a mined block’s weight was already present in the local mempool.\r\nExplain that the estimator averages the ratios over recent blocks (typically 6), and considers the mempool healthy if the average ≥ 75%.\r\n\r\nExplicitly state that if the threshold is not met (unless my understanding about this is incorrect), Bitcoin Core falls back to the Block Policy Estimator.\r\nConsider exposing:\r\n` \"mempool_healthy\": true|false`\r\nI think this avoids forcing node operators and tooling to recompute the average manually and makes monitoring simpler.\r\n\r\n**Improve logs when switching estimators:**\r\nI don’t know whether this already exists. But I think adding explicit log lines when mempool estimator is enabled or disabled due to health and which estimator was chosen for a given estimatesmartfee call will also be beneficial by making debugging easier when a node suddenly stops using mempool estimates.\r\nExamples:\r\n```\r\nINFO: mempool health avg=0.94 ≥ 0.75 — using mempool estimator\r\nWARN: mempool health avg=0.62 < 0.75 — falling back to Block Policy Estimator\r\n```\r\n**Suggest sanity warnings / metrics**\r\nOperators monitoring nodes could benefit from:\r\nAlerts when mempool health drops below threshold for a long duration\r\nA gauge or counter for mempool health ratio over time\r\nI think this helps detect network connectivity issues or local policy divergences before they impact fee estimates.\r\n\r\n**Document interpretation & edge cases**\r\nFinally I think adding a brief section in the PR or documentation covering:\r\nWhat does it mean when mempool health is low?\r\nShould users be concerned if the mempool estimator is frequently disabled? If yes, then when should they be concerned?\r\n\r\nI will be reviewing the code very soon.\r\n",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3669126866",
      "submitted_at": "2026-01-16T06:22:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "commented",
      "id": 3768609357,
      "node_id": "IC_kwDOABII587goGpN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3768609357",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-19T14:27:47Z",
      "updated_at": "2026-01-19T14:28:54Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review @musaHaruna \r\n\r\n> In effect, miners can only induce under-bidding, not over-bidding. As a result, the worst-case is that transactions are slower to confirm (underestimate), but never require overpayment.\r\n\r\nI don't think that is an accurate claim; when there are high-fee transactions available in the mempool, that would directly affect the outcome. \r\nThere are two scenarios and can think of in that case: \r\n- They publish low-fee transactions, and there are high-fee transactions present. In this case, the estimate would be higher than the miners' low-fee transactions, and the final result would be min(mempool, block policy). \r\n- They publish low-fee transactions that result in the mempool being lower than the block policy, then you use the mempool, but that's not under-bidding; the mempool is empty anyway, and you would have bid higher with the block policy.\r\n\r\n> Are we treating the 75% mempool-health threshold as a statistically meaningful guarantee of fee-estimate correctness, or merely as a coarse guardrail — and do we have empirical evidence about false positives where the guardrail passes but the estimate is still misleading?\r\n\r\nThat's a good question. The 75% is a reasonable constant that is chosen. A 100% match is nearly impossible, and most of the time, when a node has been up for a while, it achieves 95% or above based on empirical evidence. However, it's set much lower than that to avoid making the requirement too strict; for example, a node that starts fresh or a node that restarts after a while should not have to spend a long time to be able to make a mempool-based estimate.\r\n\r\nFor other questions, you answered yourself already.\r\nOn suggestions for more debug information, let me know whether you have explicit code suggestions inline on where more info is needed. I believe the current log and info are sufficient. We log after each estimate is made by an estimator, and we also log the final estimate.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3768609357",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "mentioned",
      "id": 22139951574,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAUnpNnW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22139951574",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-19T14:27:48Z"
    },
    {
      "event": "subscribed",
      "id": 22139951609,
      "node_id": "SE_lADOABII587eVGWDzwAAAAUnpNn5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22139951609",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-19T14:27:48Z"
    },
    {
      "event": "reviewed",
      "id": 3683292797,
      "node_id": "PRR_kwDOABII587bipZ9",
      "url": null,
      "actor": null,
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T09:42:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "The PR looks conceptually sound, but I’ll wait for feedback from a more experienced contributor before confirming.\r\nIn the meantime I have reviewed the first 28 of 29 commits.\r\n\r\n\r\n- [X] [fees: separate feerate format from fee estimate mode (44f6548)](https://github.com/bitcoin/bitcoin/pull/34075/changes/44f6548eb7e6cf45c3ea9756f2af88ddf1eb41c7)\r\nThe commit is separating fee rate format from fee estimate mode (because they are logically independent), by creating separate enum `FeeRateFormat`. And moving `FeeEstimationMode` to `src/util/fees.h‎`. Which makes sense because `FeeEstimationMode` describes more of a choice, and not a policy rule. Also in the commit's that follows, `src/util/fees.h‎` houses fee related utilities so moving `FeeEstimationMode` is justified I think .\r\n\r\n\r\n- [X] [fees: make estimateSmartFee log internal (dfdc26e)](https://github.com/bitcoin/bitcoin/pull/34075/changes/dfdc26ee1dc3ba415627b8e4c5be095050ad9b1c)\r\nConfirmed that logs are now emitted by `CBlockPolicyEstimator::estimateSmartFee` by running `./build/test/functional/feature_fee_estimation.py --tmpdir $(pwd)/tmp --nocleanup` and checking the `debug.log` file of node0 and confirmed:\r\n`2026-01-20T15:22:16.608377Z [httpworker.0] [policy/fees/block_policy_estimator.cpp:976] [estimateSmartFee] [estimatefee] estimateSmartFee Selected feerate :129421 Tgt:2 (requested 1) Reason:\"Target 85% Threshold\" Decay 0.96200: Estimation: (125239 - 131501) 91.79% 16.2/(17.7 0 mem 0.0 out) Fail: (108186 - 125239) 83.05% 22.7/(27.3 0 mem 0.0 out)`\r\nI think the commit message can also benefit from adding the new changes of creating a temporary local copy `FeeCalculation temp_fee_calc;` object that `CBlockPolicyEstimator::estimateSmartFee` function builds step by step, only at the end (or on failure) does it copy it to *feeCalc, to avoid partially filled data inconsistent output (if that's the intent).\r\n\r\n\r\n- [X] [fees: seperate fee estimate mode from fee source (dfdc26e)](https://github.com/bitcoin/bitcoin/pull/34075/changes/dfdc26ee1dc3ba415627b8e4c5be095050ad9b1c)\r\nThe commit's separates fee estimation mode from fee estimate source (because they are semantically different) by creating a separate function `StringForFeeSource` that holds fee estimation sources. This change makes sense.\r\nI also noticed commit is also returning the user input confirmation target in `GetMinimumFeeRate(const CWallet& wallet, const CCoinControl& coin_control, FeeSource* fee_source, int* returned_target);` and `CAmount GetMinimumFee(const CWallet& wallet, unsigned int nTxBytes, const CCoinControl& coin_control, FeeSource* fee_source, int* returned_target);` which was somehow not captured before the change in this commit. If that's the case, I think incorporating this change in the commit message could also make sense.\r\n\r\n\r\n- [X] [fees: move StringForReason to block policy estimator (dd9b1b6)](https://github.com/bitcoin/bitcoin/pull/34075/changes/dd9b1b674eea162d8d2bf9e3eeb5187fe09ec48c)\r\nMoves the function `StringForFeeReason` from `src/common/messages.cpp` to `src/policy/fees/block_policy_estimator.cpp`.  Which makes sense seeing that it holds fee estimate enums for block policy estimator.\r\nConfirmed fee reason is now been logged:\r\n`2026-01-20T16:13:41.094109Z [httpworker.0] [policy/fees/block_policy_estimator.cpp:976] [estimateSmartFee] [estimatefee] estimateSmartFee Selected feerate :153904 Tgt:2 (requested 1) Reason:\"Target 85% Threshold\" Decay 0.96200: Estimation: (152229 - 176224) 94.48% 26.0/(27.5 0 mem 0.0 out) Fail: (131501 - 152229) 81.39% 11.8/(14.5 0 mem 0.0 out)`\r\n\r\n\r\n- [X] [wallet: log transaction fee in `CreateTransactionInternal` (3a8931c)](https://github.com/bitcoin/bitcoin/pull/34075/changes/3a8931cbb8661bac4291dcfe67a22ed97f9dfe81)\r\nConfirmed transaction fee is now been logged, coming from `CreateTransactionInternal` confirmed this by running `./build/test/functional/wallet_basic.py --tmpdir $(pwd)/tmp --nocleanup` checked the `debug.log` file of node2:\r\n`2026-01-20T16:31:34.430738Z [httpworker.0] [wallet/wallet.h:938] [WalletLogPrintf] [default_wallet] Fee Calculation: Fee:2820 Bytes:141 Source: Fallback fee`\r\n\r\n\r\n- [X] [test: rename policyestimator_tests to blockpolicyestimator_tests (dd9b1b6)](https://github.com/bitcoin/bitcoin/pull/34075/changes/171aca2c6719d2b92ae39ff89de17cc806788d31)\r\nRename makes sense, after scheming through the test file I noticed that the test is mainly testing the block policy estimator functionality, coming commit [d117b09](https://github.com/bitcoin/bitcoin/pull/34075/changes/d117b091e687e64978bf8e08826fd0358c40e814), \"make blockpolicyestimator_tests independent of mempool\", puts more emphasis on my first point. \r\n\r\n\r\n- [X] [test: rename policy estimator to block policy estimator (787b436)](https://github.com/bitcoin/bitcoin/pull/34075/changes/787b4360079d43a5cb4749a5cf8c8a49f172a89f)\r\nRename makes sense, after a brief scheme through the file, I noticed most of the code are block policy estimator codes.\r\n\r\n\r\n- [X] [test: make blockpolicyestimator_tests independent of mempool (d117b09)](https://github.com/bitcoin/bitcoin/pull/34075/changes/d117b091e687e64978bf8e08826fd0358c40e814)\r\nCommit makes test independent of the mempool, by bypassing node machinery and talking to the estimator directly without using `CTxMemPool`, validation signals,locks,`TryAddToMempool`, `removeForBlock`. Instead, It manually constructs `NewMempoolTransactionInfo`,`RemovedMempoolTransactionInfo` and calls `feeEst.processTransaction(...)`,`feeEst.processBlock(...)`. Testing the block policy estimator directly without mempool overhead. I wanted to suggest a refactor of the test because I find it a bit difficult to reason about, but I think that will be out of scope for the PR.\r\n\r\n\r\n- [X] [fees: add abstract fee estimator (6e83c82)](https://github.com/bitcoin/bitcoin/pull/34075/changes/6e83c828f0d5d4d1e71d705ee2821d5b4b3d110a)\r\nAdds `FeeRateEstimator` abstract base class for fee rate estimators, which derived classes (`CBlockPolicyEstimator`, `MemPoolFeeRateEstimator`) must provide concrete implementation of the virtual methods (`EstimateFeeRate()` which returns estimated fee rate for a package to confirm within the given target and `MaximumTarget()` which returns the maximum supported confirmation target).\r\nAdds `FeeRateEstimatorType` a struct used for identifying fee estimators e.g `BLOCK POLICY` or `MEMPOOL POLICY`.\r\nAdds ` FeeRateEstimatorResult` struct represents the response returned by a fee rate estimator. Response includes: `feerate`, `current_block_height`, `return_target` (target at which the package is likely to confirm within), `error` and `feerate_estimator` (identifies which fee rate estimator is providing this feerate estimate).\r\n\r\n\r\n- [X] [fees: make block_policy_estimator a FeeRateEstimator (273597)](https://github.com/bitcoin/bitcoin/pull/34075/changes/6e83c828f0d5d4d1e71d705ee2821d5b4b3d110a)\r\n`CBlockPolicyEstimator` class implement the `FeeRateEstimator` interface (`EstimateFeeRate()` and `MaximumTarget()`)\r\n\r\n\r\n- [X] [add FeeRateEstimatorManager class (a1c6cc1)](https://github.com/bitcoin/bitcoin/pull/34075/changes/a1c6cc13cf17f9a1035808075e5e4c642c52f263)\r\nIntroduces `FeeRateEstimatorManager` class which acts as a controller for different fee rate estimators.\r\n**Question:** Is there a specific reason for naming the files `estimator_man.cpp/h` instead of `estimator_manager.cpp/h`. I think the former is more elaborate and derives home the intent of the file more clearly.\r\n\r\n\r\n- [X] [fees: add typed accessor for FeeRateEstimator (838f627)](https://github.com/bitcoin/bitcoin/pull/34075/changes/838f6275d727b80fb8d925cda097e8b679bd457f)\r\nAdd `GetFeeRateEstimator()` a templated method which returns a pointer to a fee rate estimator given an estimator type.\r\n\r\n\r\n- [X] [fees: replace CBlockPolicyEstimator with FeeEstimatorManager(8f9aba8)](https://github.com/bitcoin/bitcoin/pull/34075/changes/8f9aba833e6500ad900e254cc3b94f8f9823cc5e#diff-7506ae22ea95d31de359f3c9e4f40afe8923d585eb80405e50e963c68c81a5cb)\r\nInitializing `FeeEstimatorManager` in the node instead directly using `CBlockPolicyEstimator` by\r\nreplacing `CBlockPolicyEstimator` with `FeeEstimatorManager` i.e making use of `CBlockPolicyEstimator` through `FeeEstimatorManager` which manages it and other estimators. Now fee rate estimation requests is through `FeeEstimatorManager` which holds a map of all registered estimators to their unique pointers (`std::unordered_map<FeeRateEstimatorType, std::unique_ptr<FeeRateEstimator>> estimators;`). Chain interface now returns `FeeRateEstimatorResult` through which fee rate can be accessed instead. `FeeEstimatorManager` also inherits from `CValidationInterface` overidding `TransactionAddedToMempool`, `TransactionRemovedFromMempool`, `MempoolTransactionsRemovedForBlock` (I think it could also be good if this also captured in the commit message). \r\n\r\n\r\n- [X] [add CalculatePercentiles function (2b30932)](https://github.com/bitcoin/bitcoin/pull/34075/changes/2b30932ca6c22ad8aa090c81bb498a934b2f79d5)\r\nAdds `CalculatePercentiles`which calculates the percentile fee rates from a given block template chunks assumes that the chunk fee rates in the input vector are sorted in descending order based on mining score priority and returns `Percentiles` object containing the calculated percentile (25th,50th, 75th and 95th) fee rates. Left a question and suggestion below.\r\n\r\n\r\n- [X] [fees: add MemPoolFeeRateEstimator class (bf69cd1)](https://github.com/bitcoin/bitcoin/pull/34075/changes/bf69cd122da8ef7f7ae03f67e6c0e26f759aed61)\r\nAdds `MemPoolFeeRateEstimator` class that inherits from `FeeRateEstimator` and implements all its virtual method, is a `FeeRateEstimator` type that uses Bitcoin Core's block-building algorithm to generate the block template that will likely be mined from unconfirmed transactions in the mempool. It calculates its fee rate through `EstimateFeeRate()` by calculating percentile fee rates from the selected packages of the template: the 75th percentile fee rate is used as the economical fee rate estimate, and the 50th fee rate percentile as the conservative estimates. Left a question below.\r\n\r\n\r\n- [X] [fees: add FeeRateEstimatorTypeToString method (76a1d22)](https://github.com/bitcoin/bitcoin/pull/34075/changes/76a1d228b29aa8037c018b5c7ffc25204b46830b)\r\nFunction returns string `\"Block Policy Estimator\"` or `\"Mempool Fee Rate Estimator\"` depending on the `FeeRateEstimatorType`. Call the function in logs of `CBlockPolicyEstimator::estimateSmartFee` and `MemPoolFeeRateEstimator::EstimateFeeRate` respectively.\r\n\r\n\r\n- [X] [test: add mempool fee estimator unit test (73109e7)](https://github.com/bitcoin/bitcoin/pull/34075/changes/73109e70db7b92090706f5458b0aaf10c11d9f5f)\r\nDid a quick run through review of the test and ran it. It looks good for now. I will look at it again later to see if I can find something.\r\n\r\n\r\n\r\n\r\n- [X] [fees: add caching to MemPoolFeeRateEstimator (c49879d)](https://github.com/bitcoin/bitcoin/pull/34075/changes/c49879d1a2885ca93be5e4154b0d39a52a104b63)\r\nAdds `MemPoolFeeRateEstimatorCache` which holds a cache of recent fee rate estimates. A fresh fee rate is only provided if the cached value is older than CACHE_LIFE which is 7secs adds `IsStale()` which returns true if cache is older that 7secs, `GetCachedEstimate()` returns the cached `Percentiles` fee rate if available and not stale, `GetChainTipHash()` returns the chain tip hash that the cache corresponds to and `Update()` which updates the cache with a new estimates and chain tip hash.\r\n\r\n\r\n- [X] [fees: return mempool estimates when it's lower than block policy (f62fbee)](https://github.com/bitcoin/bitcoin/pull/34075/changes/f62fbee89733199426ca275cfb90401f79382935)\r\nThis commit implements `final_fee = min(block policy estimator, mempool fee estimator)` i.e use the mempool only to lower the Block Policy Estimator fee. It acheive this through `FeeRateEstimatorManager::GetFeeRateEstimate()` by looping through `std::unordered_map<FeeRateEstimatorType, std::unique_ptr<FeeRateEstimator>> estimators;`and picking the min between `selected_estimate = std::min(selected_estimate, current_estimate)` which is equivalent to `min(block policy estimator, mempool fee estimator)` since there are only two fee rate estimator now. The logic is future proof i.e it can accommodate more fee rate estimators without causing breaking changes as long as it's picking and using one fee rate estimator (minimum between the selected and current fee estimator). But I think the current logic may fail for hybrid fee estimation.\r\n\r\n\r\n- [X] [rpc:fees: update estimatesmartfee to return errors whether it succeeds or not (a105a89)](https://github.com/bitcoin/bitcoin/pull/34075/changes/a105a89059a7cbfee77f8e2887eec04c6e5a23ee)\r\nAdds an error response to `estimatesmartfee` also removes unnecessary `else` clause, so that `estimatesmartfee` will always return an error field whether error is empty or not.\r\n\r\n\r\n- [X] [test: ensure estimatesmartfee returns mempool fee rate estimate (68c7338)](https://github.com/bitcoin/bitcoin/pull/34075/changes/68c7338b653c62b3dc1475782ead7487dcce55a3)\r\nAdd's test to ensure `estmatessmartfee` fee rpc returns mempool fee rate estimates. As a small suggestion, this test currently generates transactions at a single fixed feerate, which creates a very clean signal for the estimator. From my understanding, the estimator typically operates over a distribution of feerates rather than one value. It might be possible to improve coverage (while keeping the test deterministic) by broadcasting transactions across a few fixed feerate buckets with different counts before mining blocks. This could help exercise estimator behavior under mixed but controlled conditions, without changing the intent of the test or introducing additional complexity. Also left some few code suggestions below.\r\n\r\n\r\n- [X] [validation: add block transactions to `MempoolTransactionsRemovedForBlock` (43b66e)](https://github.com/bitcoin/bitcoin/pull/34075/changes/43b66e1e9dc7abe487d59e8a5c88b6b0bbdb5c5b)\r\nAdds adds block transaction which will be used in a later commit where `block_txs` is used to compute the actual non-coinbase weight of the mined block, so the fee estimator can understand real block fullness independently of which transactions happened to be removed from the local mempool\r\n\r\n\r\n- [X] [miner: remove unused node/context.h import (4ff35c)](https://github.com/bitcoin/bitcoin/pull/34075/changes/4ff35c189bfdd4c2a626ff8b7ea13efef661c73f)\r\nRemoves  unused `node/context.h` import in in `src/node/miner.cpp`\r\n\r\n\r\n- [X] [fees: only return mempool fee rate estimate when mempool is healthy (b2e711f)](https://github.com/bitcoin/bitcoin/pull/34075/changes/b2e711f88595ec920b697e0950dcd875b19ab8ce)\r\nThis commit ensures that the users mempool has seen at least 75% of the last 6 blocks transactions by using `MempoolTxsRemovedForBlock()` to keep track of the last N blocks and calculates the total weight of transactions mined in the block and total weight of mempool transactions that were removed This information is later used in `IsMempoolHealthy()` to check if the mempool is “healthy.” `IsMempoolHealthy()` gets the  current chain tip then calls `isMempoolHealthy()` to determine health. This function is what external code would call to ask: “Is the mempool healthy right now?”. `isMempoolHealthy()` is where the core logic resides: it calculates total weights over last N blocks and returns true/false based on the fraction of mempool txs that were mined.\r\n\r\n\r\n- [X] [fees: return mempool health stats from feerate estimator manager (68ae3af)](https://github.com/bitcoin/bitcoin/pull/34075/changes/68ae3afb10eee11fb60040e659bca34bfa767881)\r\nReturns health stats through `GetPrevBlockData()` which returns previous block data stats i.e `BlockData` struct which contains `m_height` `m_removed_block_txs_weight` `m_block_weight`.\r\n\r\n\r\n- [X] [fees: rename and move fee_estimates.dat to fees/block_policy_estimates.dat (3227dc)](https://github.com/bitcoin/bitcoin/pull/34075/changes/3227dc57cc21e49f97d9fdf0a6c37c1d65c5ebd8)\r\nCommit message is self explained.\r\n\r\n\r\n- [X] [fees: add EncodedBlockDataFormatter struct (5c0ec49)](https://github.com/bitcoin/bitcoin/pull/34075/changes/5c0ec49b44caf279579135b64e70bd6f9ebb8bb5)\r\nAdds a helper `EncodedBlockDataFormatter` that converts a BlockData object to a stream of bytes for storage or transmission (serialization) and reads it back from a stream to restore the object (deserialization), handling doubles safely with encoding/decoding.\r\n\r\n\r\n- [X] [fees: persist mempool estimator statistics (42dfb54)](https://github.com/bitcoin/bitcoin/pull/34075/changes/42dfb54900b18c23578cbd9702021f4fb95077be)\r\nPersist mempool estimator statistics. The commit also enables `estimatesmartfee` to return the stats when verbosity level is greater than 1. E.G\r\n\r\n\r\n```\r\nbitcoin-cli estimatesmartfee 1 \"conservative\" 2\r\n{\r\n \"feerate\": 0.00002133,\r\n \"errors\": [],\r\n \"blocks\": 2,\r\n \"mempool_health_statistics\": [\r\n   {\r\n     \"block_height\": 927953,\r\n     \"block_weight\": 3991729,\r\n     \"mempool_txs_weight\": 3942409,\r\n     \"ratio\": 0.987644451815241\r\n   },\r\n   ...\r\n ]\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n- [X] [fees: persist mempool estimator statistics (42dfb54)](https://github.com/bitcoin/bitcoin/pull/34075/changes/42dfb54900b18c23578cbd9702021f4fb95077be)\r\nI don't know much about fuzzing so I did not review this commit. But I will come back to it later.\r\n\r\n",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3683292797",
      "submitted_at": "2026-01-20T17:07:11Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3683568092,
      "node_id": "PRR_kwDOABII587bjsnc",
      "url": null,
      "actor": null,
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-20T18:00:20Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3683568092",
      "submitted_at": "2026-01-20T18:00:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3693922067,
      "node_id": "PRR_kwDOABII587cLMcT",
      "url": null,
      "actor": null,
      "commit_id": "dfdc26ee1dc3ba415627b8e4c5be095050ad9b1c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-22T18:27:52Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3693922067",
      "submitted_at": "2026-01-22T18:27:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3693927829,
      "node_id": "PRR_kwDOABII587cLN2V",
      "url": null,
      "actor": null,
      "commit_id": "2b30932ca6c22ad8aa090c81bb498a934b2f79d5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-22T18:29:32Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3693927829",
      "submitted_at": "2026-01-22T18:29:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3693941755,
      "node_id": "PRR_kwDOABII587cLRP7",
      "url": null,
      "actor": null,
      "commit_id": "2b30932ca6c22ad8aa090c81bb498a934b2f79d5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-22T18:33:37Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3693941755",
      "submitted_at": "2026-01-22T18:33:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3693952040,
      "node_id": "PRR_kwDOABII587cLTwo",
      "url": null,
      "actor": null,
      "commit_id": "bf69cd122da8ef7f7ae03f67e6c0e26f759aed61",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-22T18:36:47Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3693952040",
      "submitted_at": "2026-01-22T18:36:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "commented",
      "id": 3786077032,
      "node_id": "IC_kwDOABII587hqvNo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3786077032",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T18:41:04Z",
      "updated_at": "2026-01-22T18:41:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks @ismaelsadeeq  for clarifying this: \r\n\r\n> I don't think that is an accurate claim; when there are high-fee transactions available in the mempool, that would directly affect the outcome.\r\n> There are two scenarios and can think of in that case:\r\n> \r\n> They publish low-fee transactions, and there are high-fee transactions present. In this case, the estimate would be higher than the miners' low-fee transactions, and the final result would be min(mempool, block policy).\r\n> They publish low-fee transactions that result in the mempool being lower than the block policy, then you use the mempool, but that's not under-bidding; the mempool is empty anyway, and you would have bid higher with the block policy.\r\n\r\nI will get back to you on this: \r\n\r\n> On suggestions for more debug information, let me know whether you have explicit code suggestions inline on where more info is needed.\r\n\r\nOnce am done reviewing the rest of the commits \r\n\r\n",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3786077032",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "mentioned",
      "id": 22223909569,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAUspfLB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22223909569",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T18:41:05Z"
    },
    {
      "event": "subscribed",
      "id": 22223909592,
      "node_id": "SE_lADOABII587eVGWDzwAAAAUspfLY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22223909592",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T18:41:06Z"
    },
    {
      "event": "reviewed",
      "id": 3711804085,
      "node_id": "PRR_kwDOABII587dPaK1",
      "url": null,
      "actor": null,
      "commit_id": "6597083f9dad2fc93e48366f4d4425c16d037021",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-27T15:16:59Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3711804085",
      "submitted_at": "2026-01-27T15:16:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3715710862,
      "node_id": "PRR_kwDOABII587deT-O",
      "url": null,
      "actor": null,
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T09:52:38Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3715710862",
      "submitted_at": "2026-01-28T09:52:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3715928857,
      "node_id": "PRR_kwDOABII587dfJMZ",
      "url": null,
      "actor": null,
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T10:31:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "In [test: ensure estimatesmartfee returns mempool fee rate estimate (68c7338)](https://github.com/bitcoin/bitcoin/pull/34075/changes/68c7338b653c62b3dc1475782ead7487dcce55a3)\n\nI think we can make `mempool_estimator_error`  a global variable `MEMPOOL_ESTIMATOR_ERROR` similar to `BLOCK_POLICY_ESTIMATOR_ERROR`. Also add the fee rate estimator type to `BLOCK_POLICY_ESTIMATOR_ERROR`\n\nSee below suggestion: \n\n```suggestion\nMAX_FILE_AGE = 60\nSECONDS_PER_HOUR = 60 * 60\nMEMPOOL_FEE_ESTIMATOR_CACHE_LIFE = 7 # Seconds\nBLOCK_POLICY_ESTIMATOR_ERROR = \"Block Policy Estimator: Insufficient data or no feerate found\"\nMEMPOOL_ESTIMATOR_ERROR = \"Mempool Fee Rate Estimator: Unable to provide a fee rate due to insufficient data\"\nBLOCK_POLICY_ESTIMATOR_FILE_PATH = \"fees/block_policy_estimates.dat\"\n\n...\n\nhigh_feerate, tx_count = Decimal(\"0.004\"), 24\nself.broadcast_and_mine_blocks(high_feerate, blocks=6, txs=tx_count)\nestimate_from_block_policy = node0.estimatesmartfee(1)\nverify_estimate_response(estimate_from_block_policy, high_feerate, [MEMPOOL_ESTIMATOR_ERROR])\n```",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3715928857",
      "submitted_at": "2026-01-28T10:31:11Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3715956835,
      "node_id": "PRR_kwDOABII587dfQBj",
      "url": null,
      "actor": null,
      "commit_id": "43b66e1e9dc7abe487d59e8a5c88b6b0bbdb5c5b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T10:36:57Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3715956835",
      "submitted_at": "2026-01-28T10:36:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3716014507,
      "node_id": "PRR_kwDOABII587dfeGr",
      "url": null,
      "actor": null,
      "commit_id": "b2e711f88595ec920b697e0950dcd875b19ab8ce",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T10:49:05Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3716014507",
      "submitted_at": "2026-01-28T10:49:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "reviewed",
      "id": 3716088530,
      "node_id": "PRR_kwDOABII587dfwLS",
      "url": null,
      "actor": null,
      "commit_id": "b2e711f88595ec920b697e0950dcd875b19ab8ce",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T11:06:39Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3716088530",
      "submitted_at": "2026-01-28T11:06:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBkMmNhMzk1OGNmNjA1N2I3ZjA5NzEyODhkNDY4MGRmYmIwYjRjOTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d2ca3958cf6057b7f0971288d4680dfbb0b4c90",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0d2ca3958cf6057b7f0971288d4680dfbb0b4c90",
      "tree": {
        "sha": "0fa0eec5caf8c542811072a1ffd82bb1dc699f45",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0fa0eec5caf8c542811072a1ffd82bb1dc699f45"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0fa0eec5caf8c542811072a1ffd82bb1dc699f45\nparent aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1764002912 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614502 +0000\n\nrefactor: miner: remove unused node/context.h import\n\n- This will prevents \"node/context -> policy/fees/estimator_man -> policy/fees/mempool_estimator -> node/miner -> node/context\"\n  circular dependency\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXosyAAKCRAOOQjzZJiY\niDubAP9yjdToX9QmMM/VzuceZvBzxdNFMZxfC04Su07AkDqscgD/QEIvgy4D8rW7\nruxblrSOHjVNPP/pwfQMTOjdBx4bvws=\n=2W03\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9",
          "sha": "aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9"
        }
      ],
      "message": "refactor: miner: remove unused node/context.h import\n\n- This will prevents \"node/context -> policy/fees/estimator_man -> policy/fees/mempool_estimator -> node/miner -> node/context\"\n  circular dependency",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:02Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-24T16:48:32Z"
      },
      "sha": "0d2ca3958cf6057b7f0971288d4680dfbb0b4c90"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFlZjc3ZGM0OTVhZjYzNmFmMTQ1MTI4MWNhMGM4MjMyNTA5NDlmMmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aef77dc495af636af1451281ca0c823250949f2b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/aef77dc495af636af1451281ca0c823250949f2b",
      "tree": {
        "sha": "38b29220902c98ad3c01032008441b00fae1afbe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/38b29220902c98ad3c01032008441b00fae1afbe"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 38b29220902c98ad3c01032008441b00fae1afbe\nparent 0d2ca3958cf6057b7f0971288d4680dfbb0b4c90\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763374869 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614536 +0000\n\nrefactor: fees: separate feerate format from fee estimate mode\n\n    - This commit introduces a separate enumerator for feerate format.\n      This makes feerate format independent of the fee estimation mode enum.\n      Feerate format is logically independent, hence should be separated.\n      Additionally, the fee estimation mode enum is also moved to a fees\n      util file.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXosyQAKCRAOOQjzZJiY\niJ9mAPoDEg0yE4AWxYgQ/grSxPLz/e/bTkqLG5SUwQiYi2xPYwEApYXnhFe2Lded\nMqO/6djuQ4LrcdKJ0NpEgeqeTn2KvwA=\n=YsPR\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d2ca3958cf6057b7f0971288d4680dfbb0b4c90",
          "sha": "0d2ca3958cf6057b7f0971288d4680dfbb0b4c90",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0d2ca3958cf6057b7f0971288d4680dfbb0b4c90"
        }
      ],
      "message": "refactor: fees: separate feerate format from fee estimate mode\n\n    - This commit introduces a separate enumerator for feerate format.\n      This makes feerate format independent of the fee estimation mode enum.\n      Feerate format is logically independent, hence should be separated.\n      Additionally, the fee estimation mode enum is also moved to a fees\n      util file.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:36Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T10:21:09Z"
      },
      "sha": "aef77dc495af636af1451281ca0c823250949f2b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBkNzFkMTBhYWQwMTM3Y2VjZmQ0MzQ0YzEzZDBiYWEyYTM0MmI5MjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d71d10aad0137cecfd4344c13d0baa2a342b926",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0d71d10aad0137cecfd4344c13d0baa2a342b926",
      "tree": {
        "sha": "0f370cef03875b645807363a159c210ac006cc33",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0f370cef03875b645807363a159c210ac006cc33"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0f370cef03875b645807363a159c210ac006cc33\nparent aef77dc495af636af1451281ca0c823250949f2b\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763990551 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614537 +0000\n\nfees: make estimateSmartFee log internal\n\n- Since the FeeCalc argument can be a nullptr and we\n  want to log values of the FeeCalc in estimateSmartFee.\n  This commit updates estimateSmartFee to create a FeeCalc local\n  variable which is used for the log and then copied into the\n  user passed FeeCalc argument if it is not a nullptr.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXosygAKCRAOOQjzZJiY\niGoEAP0XQ8jg4ktafsAqo19gfDmp2S8fT0dx/+PUsdFkPTVH8QEAy+nQ++lIPfF2\nuFFNiVT+Bpe4odNYJp4/nGWtCi9CFgo=\n=7plc\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aef77dc495af636af1451281ca0c823250949f2b",
          "sha": "aef77dc495af636af1451281ca0c823250949f2b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aef77dc495af636af1451281ca0c823250949f2b"
        }
      ],
      "message": "fees: make estimateSmartFee log internal\n\n- Since the FeeCalc argument can be a nullptr and we\n  want to log values of the FeeCalc in estimateSmartFee.\n  This commit updates estimateSmartFee to create a FeeCalc local\n  variable which is used for the log and then copied into the\n  user passed FeeCalc argument if it is not a nullptr.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:37Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-24T13:22:31Z"
      },
      "sha": "0d71d10aad0137cecfd4344c13d0baa2a342b926"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDExMmI1Y2U1MzcyY2ExOTgwYmU4YTRjNmE0NDY3MjZhNzhiMWUwM2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/112b5ce5372ca1980be8a4c6a446726a78b1e03e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/112b5ce5372ca1980be8a4c6a446726a78b1e03e",
      "tree": {
        "sha": "d9180c13cb5f4d2902afb3bd6cf67e99c5eb7c81",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d9180c13cb5f4d2902afb3bd6cf67e99c5eb7c81"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d9180c13cb5f4d2902afb3bd6cf67e99c5eb7c81\nparent 0d71d10aad0137cecfd4344c13d0baa2a342b926\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763384635 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614538 +0000\n\nrefactor: fees: separate fee estimate mode from fee source\n\nFee estimation mode and fee estimate source are semantically different,\nso each should have an independent enum.\n\nThis commit makes the following changes:\n\n- Updates the wallet method getMinimumFee parameter from FeeReason to\n  FeeSource.\n\n- Replaces the FeeCalculation out parameter pointer in GetMinimumFee\n  and GetMinimumFeeRate wallet functions with FeeSource and\n  returned_target out parameter pointers.\n\n- Updates CreateTransactionResult struct to hold FeeSource instead of\n  FeeCalculation.\n\n- Adds a fuzz test for the new FeeSource enum.\n\n- Changes the output of some wallet sending RPCs from fee_reason to\n  fee_source, which is the semantically correct response.\n\n  Note: This is a breaking change, but it is unlikely that clients\n  match on this output value since it's informational.\n\nThese changes:\n  i)   Eliminate the tight coupling between the wallet and\n       estimateSmartFee.\n  ii)  Make it possible to eliminate the leakage of estimateSmartFee\n       internals to its users.\n  iii) Make it possible to plug in other fee rate estimators with\n       different internals to the wallet.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXosywAKCRAOOQjzZJiY\niFTVAQChsWtmMhjAHS9WwA5NqDusd3zwc2Z7ROdaS28QWDYkDgD+IyPExJg2+CT4\nnZ3ay0/ICL+MPOWzr3S4YQZlfO8IFAA=\n=+ivJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d71d10aad0137cecfd4344c13d0baa2a342b926",
          "sha": "0d71d10aad0137cecfd4344c13d0baa2a342b926",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0d71d10aad0137cecfd4344c13d0baa2a342b926"
        }
      ],
      "message": "refactor: fees: separate fee estimate mode from fee source\n\nFee estimation mode and fee estimate source are semantically different,\nso each should have an independent enum.\n\nThis commit makes the following changes:\n\n- Updates the wallet method getMinimumFee parameter from FeeReason to\n  FeeSource.\n\n- Replaces the FeeCalculation out parameter pointer in GetMinimumFee\n  and GetMinimumFeeRate wallet functions with FeeSource and\n  returned_target out parameter pointers.\n\n- Updates CreateTransactionResult struct to hold FeeSource instead of\n  FeeCalculation.\n\n- Adds a fuzz test for the new FeeSource enum.\n\n- Changes the output of some wallet sending RPCs from fee_reason to\n  fee_source, which is the semantically correct response.\n\n  Note: This is a breaking change, but it is unlikely that clients\n  match on this output value since it's informational.\n\nThese changes:\n  i)   Eliminate the tight coupling between the wallet and\n       estimateSmartFee.\n  ii)  Make it possible to eliminate the leakage of estimateSmartFee\n       internals to its users.\n  iii) Make it possible to plug in other fee rate estimators with\n       different internals to the wallet.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:38Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T13:03:55Z"
      },
      "sha": "112b5ce5372ca1980be8a4c6a446726a78b1e03e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNmYzUzYzRhZGEyMGNiZjMyYWNjYmM0OGJiNTU0NDk5NjY2NmFlOWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3fc53c4ada20cbf32accbc48bb5544996666ae9d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3fc53c4ada20cbf32accbc48bb5544996666ae9d",
      "tree": {
        "sha": "65c14e082d6d305801a7a12a26864ffe44cf1deb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65c14e082d6d305801a7a12a26864ffe44cf1deb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 65c14e082d6d305801a7a12a26864ffe44cf1deb\nparent 112b5ce5372ca1980be8a4c6a446726a78b1e03e\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763994326 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614539 +0000\n\nrefactor: fees: move StringForFeeReason to block policy estimator\n\n- This commit also added the fee reason to the final log\n  of estimateSmartFee method.\n\n- This commit changes the implementation of StringForFeeReason\n  to a simple switch statement.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXoszAAKCRAOOQjzZJiY\niMyIAPoDE4JkkYBfhA/NdIQRkxstzH1Yya6Zu/Hf0Z66CMLJkQD+LHNgrJnHcEhz\nHVA/R/p8QMqkI1+PRuVrWsFk9hzzfQ8=\n=KhdJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/112b5ce5372ca1980be8a4c6a446726a78b1e03e",
          "sha": "112b5ce5372ca1980be8a4c6a446726a78b1e03e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/112b5ce5372ca1980be8a4c6a446726a78b1e03e"
        }
      ],
      "message": "refactor: fees: move StringForFeeReason to block policy estimator\n\n- This commit also added the fee reason to the final log\n  of estimateSmartFee method.\n\n- This commit changes the implementation of StringForFeeReason\n  to a simple switch statement.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:39Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-24T14:25:26Z"
      },
      "sha": "3fc53c4ada20cbf32accbc48bb5544996666ae9d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJjOTc1ZDJjMDQ5NDFkNjA2YTk0NmM3ODhmNmU3M2U0OTg4YjAxYmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c975d2c04941d606a946c788f6e73e4988b01be",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2c975d2c04941d606a946c788f6e73e4988b01be",
      "tree": {
        "sha": "2c122dd3964871e040aac4c59f52755f12ce4c25",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2c122dd3964871e040aac4c59f52755f12ce4c25"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2c122dd3964871e040aac4c59f52755f12ce4c25\nparent 3fc53c4ada20cbf32accbc48bb5544996666ae9d\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763384926 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614540 +0000\n\nwallet: log transaction fee in `CreateTransactionInternal`\n\n- The transaction size in bytes and the transaction fee source\n  are also logged.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXoszQAKCRAOOQjzZJiY\niHZfAP9KIr0ZgX1ZfT/H3SqSTZzW2ytjgYjtm8wX2V8frxoU1AD/VIpHfiay5XaZ\neeTN6q5AJXzD++c6bv8+UX4YZXhJBwo=\n=3Hi4\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3fc53c4ada20cbf32accbc48bb5544996666ae9d",
          "sha": "3fc53c4ada20cbf32accbc48bb5544996666ae9d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3fc53c4ada20cbf32accbc48bb5544996666ae9d"
        }
      ],
      "message": "wallet: log transaction fee in `CreateTransactionInternal`\n\n- The transaction size in bytes and the transaction fee source\n  are also logged.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:40Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T13:08:46Z"
      },
      "sha": "2c975d2c04941d606a946c788f6e73e4988b01be"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVkN2Q5MmE4NjMxOGEwNTRlNTQzZGE4Y2JkMmY5ZTVjNDM4NjdkYTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed7d92a86318a054e543da8cbd2f9e5c43867da2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ed7d92a86318a054e543da8cbd2f9e5c43867da2",
      "tree": {
        "sha": "9fb3803a94a1eefeb557eb056e7a271190f11afa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9fb3803a94a1eefeb557eb056e7a271190f11afa"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9fb3803a94a1eefeb557eb056e7a271190f11afa\nparent 2c975d2c04941d606a946c788f6e73e4988b01be\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763390953 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614541 +0000\n\nrefactor: test: rename policyestimator_tests to blockpolicyestimator_tests\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXoszQAKCRAOOQjzZJiY\niP4BAP9RE9P9DU+To5r6WaENifzh+lnAlPR5YpDKyyChpSv/0gD/YLEYXJ+GcDYD\nB7HChwsp5Ptr0cBcY2AxHBkX476x8wg=\n=ow96\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c975d2c04941d606a946c788f6e73e4988b01be",
          "sha": "2c975d2c04941d606a946c788f6e73e4988b01be",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2c975d2c04941d606a946c788f6e73e4988b01be"
        }
      ],
      "message": "refactor: test: rename policyestimator_tests to blockpolicyestimator_tests",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:41Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T14:49:13Z"
      },
      "sha": "ed7d92a86318a054e543da8cbd2f9e5c43867da2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZjMTVkN2Q2ZTA1YzFjYTc3OGZhZTVhYzJiZWJkOTRmYzA4MDliY2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb",
      "tree": {
        "sha": "6b38ec45469b0dc9dd59c476fe1b635b6bc0657d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b38ec45469b0dc9dd59c476fe1b635b6bc0657d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6b38ec45469b0dc9dd59c476fe1b635b6bc0657d\nparent ed7d92a86318a054e543da8cbd2f9e5c43867da2\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768210709 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614542 +0000\n\nrefactor: test: rename policy estimator to block policy estimator\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXoszgAKCRAOOQjzZJiY\niGK8AP4ktPVVkhpUA6AvO0HMDbnF+dV22Oncfecqb/w069Op7AD/Ye7UGJKUbOCL\nqb2mXz1NaJvevtw1NxifyMozOlH7cQ0=\n=Finx\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed7d92a86318a054e543da8cbd2f9e5c43867da2",
          "sha": "ed7d92a86318a054e543da8cbd2f9e5c43867da2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ed7d92a86318a054e543da8cbd2f9e5c43867da2"
        }
      ],
      "message": "refactor: test: rename policy estimator to block policy estimator",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:42Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-12T09:38:29Z"
      },
      "sha": "fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNhMGY4ZTg4Yjc0Y2E4YTcwNGU3OTgwMmNkNTFhMjMwMjBmNjhmZjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a0f8e88b74ca8a704e79802cd51a23020f68ff8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3a0f8e88b74ca8a704e79802cd51a23020f68ff8",
      "tree": {
        "sha": "9f9c9743a8eb7177e14a8a9fa618316bb98d0ce3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f9c9743a8eb7177e14a8a9fa618316bb98d0ce3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9f9c9743a8eb7177e14a8a9fa618316bb98d0ce3\nparent fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768213159 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614543 +0000\n\nrefactor: test: make blockpolicyestimator_tests independent of mempool\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXoszwAKCRAOOQjzZJiY\niIdRAQCb6HAQKCgCHDG5e56OdQ24t+t9GpzdVIjg/q/+bc6CRgD9EynbfU1w58qz\nonVxr5lS+lQHZyifebfjjo8wTQSXkwY=\n=ukLu\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb",
          "sha": "fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fc15d7d6e05c1ca778fae5ac2bebd94fc0809bcb"
        }
      ],
      "message": "refactor: test: make blockpolicyestimator_tests independent of mempool",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:43Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-12T10:19:19Z"
      },
      "sha": "3a0f8e88b74ca8a704e79802cd51a23020f68ff8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA4ZjRjN2Q5YzQyYmJlNjgwMzQ4NTdhOWVjZmViZDE0MTEzN2RlOGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/08f4c7d9c42bbe68034857a9ecfebd141137de8e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/08f4c7d9c42bbe68034857a9ecfebd141137de8e",
      "tree": {
        "sha": "b588bf34e4c03c17c0f1440af92cd593c62f6344",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b588bf34e4c03c17c0f1440af92cd593c62f6344"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b588bf34e4c03c17c0f1440af92cd593c62f6344\nparent 3a0f8e88b74ca8a704e79802cd51a23020f68ff8\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763389197 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614544 +0000\n\nfees: add abstract fee estimator\n\ni  - FeeRateEstimator abstract class is the base class of fee rate estimators\n     Derived classes must provide concrete implementation\n     of the virtual methods.\n\nii - FeeRateEstimatorResult struct represent the response returned by\n     a fee rate estimator.\n\niii - FeeRateEstimatorType will be used to identify fee estimators.\n      Each time a new fee estimator is added, a corresponding\n      enum value should be added.\n\nCo-authored-by: willcl-ark <will@256k1.dev>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXos0AAKCRAOOQjzZJiY\niL1DAP4sH4I29NKd2/RuWkWzAIm92JsDn1nGfSkAnkZhX9LieQEAmkpsi/nwxUFY\nC66jr3csaNjxHODj3Itw/4Q/A9Xy8w8=\n=YW9S\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a0f8e88b74ca8a704e79802cd51a23020f68ff8",
          "sha": "3a0f8e88b74ca8a704e79802cd51a23020f68ff8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3a0f8e88b74ca8a704e79802cd51a23020f68ff8"
        }
      ],
      "message": "fees: add abstract fee estimator\n\ni  - FeeRateEstimator abstract class is the base class of fee rate estimators\n     Derived classes must provide concrete implementation\n     of the virtual methods.\n\nii - FeeRateEstimatorResult struct represent the response returned by\n     a fee rate estimator.\n\niii - FeeRateEstimatorType will be used to identify fee estimators.\n      Each time a new fee estimator is added, a corresponding\n      enum value should be added.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:44Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T14:19:57Z"
      },
      "sha": "08f4c7d9c42bbe68034857a9ecfebd141137de8e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIzNTY4YjlkMzRiZjBmOTQzYTAwNDg2N2VhOTE0YTRkMTYyNTk3YTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/23568b9d34bf0f943a004867ea914a4d162597a2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/23568b9d34bf0f943a004867ea914a4d162597a2",
      "tree": {
        "sha": "7a71084a69e5526e4dddcb395d39de0c009028b1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a71084a69e5526e4dddcb395d39de0c009028b1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7a71084a69e5526e4dddcb395d39de0c009028b1\nparent 08f4c7d9c42bbe68034857a9ecfebd141137de8e\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763392505 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614545 +0000\n\nfees: make block_policy_estimator a FeeRateEstimator\n\n- This commit updates CBlockPolicyEstimator class to implement\n  the FeeRateEstimator interface.\n\nCo-authored-by: willcl-ark <will@256k1.dev>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXos0QAKCRAOOQjzZJiY\niPFSAP0aUWdOpTqH5oJjHYVEbrKcDnMglMsDiiY/zlB7Y4G58wD9H9eWYRqRh7ke\n2dNHQHCLL7VJFNnjmK6swdNWpT6jDgg=\n=pFcv\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/08f4c7d9c42bbe68034857a9ecfebd141137de8e",
          "sha": "08f4c7d9c42bbe68034857a9ecfebd141137de8e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/08f4c7d9c42bbe68034857a9ecfebd141137de8e"
        }
      ],
      "message": "fees: make block_policy_estimator a FeeRateEstimator\n\n- This commit updates CBlockPolicyEstimator class to implement\n  the FeeRateEstimator interface.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:45Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T15:15:05Z"
      },
      "sha": "23568b9d34bf0f943a004867ea914a4d162597a2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ5YjUwZTdhOWI3ZTdkNjVmM2NlYTJkM2U0YTMwZjY4ZmFkNjA4NjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862",
      "tree": {
        "sha": "e61ca9c16511cc137abddd4ec382b03bbc56d055",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e61ca9c16511cc137abddd4ec382b03bbc56d055"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e61ca9c16511cc137abddd4ec382b03bbc56d055\nparent 23568b9d34bf0f943a004867ea914a4d162597a2\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763390515 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614546 +0000\n\nfees: add FeeRateEstimatorManager class\n\n- Introduce FeeRateEstimatorManager, a module for managing\n  multiple fee rate estimators. This manager allows registration\n  of multiple FeeRateEstimator instances, enabling having more fee rate\n  estimation strategies to be used in the bitcoin core node and wallet.\n\nCo-authored-by: willcl-ark <will@256k1.dev>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXos0gAKCRAOOQjzZJiY\niI6zAQCod/oXW2leQ+LqdBmAoUg7wSvbLpfuX4Kn/95mdIM0AwD/c/MR59zpCdWI\nCCLladyxA5J1lCt6tzueHv+NmMNQIwk=\n=tHVG\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/23568b9d34bf0f943a004867ea914a4d162597a2",
          "sha": "23568b9d34bf0f943a004867ea914a4d162597a2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/23568b9d34bf0f943a004867ea914a4d162597a2"
        }
      ],
      "message": "fees: add FeeRateEstimatorManager class\n\n- Introduce FeeRateEstimatorManager, a module for managing\n  multiple fee rate estimators. This manager allows registration\n  of multiple FeeRateEstimator instances, enabling having more fee rate\n  estimation strategies to be used in the bitcoin core node and wallet.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:46Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T14:41:55Z"
      },
      "sha": "49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU2MzI3NTE1YTBhZjQ1NWY1YTczOGU0MGY0OWYyNTJiMmM3MTFkM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56327515a0af455f5a738e40f49f252b2c711d3c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/56327515a0af455f5a738e40f49f252b2c711d3c",
      "tree": {
        "sha": "7bb5988a4c2ca9012fb29dfdf8a0ad774c422f1a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7bb5988a4c2ca9012fb29dfdf8a0ad774c422f1a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7bb5988a4c2ca9012fb29dfdf8a0ad774c422f1a\nparent 49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763393322 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614547 +0000\n\nfees: add typed accessor for FeeRateEstimator\n\n- Add GetFeeRateEstimator(), a templated method that returns a specific\n  estimator instance by type.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXos0wAKCRAOOQjzZJiY\niLAqAQDIvoL2PyqSZyQ8PcIrD7TlH+93T74pnIzU6e2hfaORhAEAx41JSHIXxRpT\nO5/IFnR1mAGI6ZBNglpUoPy1onbttAA=\n=8lPJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862",
          "sha": "49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/49b50e7a9b7e7d65f3cea2d3e4a30f68fad60862"
        }
      ],
      "message": "fees: add typed accessor for FeeRateEstimator\n\n- Add GetFeeRateEstimator(), a templated method that returns a specific\n  estimator instance by type.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T15:28:42Z"
      },
      "sha": "56327515a0af455f5a738e40f49f252b2c711d3c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDExNzE0NzEwYThiMGVjM2U3Y2RhNTQwNmE4ZGQ0MjIxM2Q3YTgyZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11714710a8b0ec3e7cda5406a8dd42213d7a82dd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/11714710a8b0ec3e7cda5406a8dd42213d7a82dd",
      "tree": {
        "sha": "dff026eb719f085392ff269513b0f7216dc9d477",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dff026eb719f085392ff269513b0f7216dc9d477"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree dff026eb719f085392ff269513b0f7216dc9d477\nparent 56327515a0af455f5a738e40f49f252b2c711d3c\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763402155 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1769614548 +0000\n\nfees: replace `CBlockPolicyEstimator` with `FeeEstimatorManager`\n\n- Initialize FeeEstimatorManager in node instead of BlockPolicyEstimator.\n- Forward fee rate estimation requests through FeeEstimatorManager.\n- Update Chain interface to return FeeRateEstimatorResult, removing the out parameter requirement.\n- Retain selected BlockPolicyEstimator methods for test-only estimaterawfee RPC compatibility.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaXos1AAKCRAOOQjzZJiY\niF4mAP0TpmWuNnNMad7AQBYOIyxOUwJS9RyivtkecBfSjgLoHAEAm2W6iMuuE5Qc\nTK1tQRTfSLpymcMI7bC1Z6VUr8UvBgc=\n=ZnYM\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56327515a0af455f5a738e40f49f252b2c711d3c",
          "sha": "56327515a0af455f5a738e40f49f252b2c711d3c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/56327515a0af455f5a738e40f49f252b2c711d3c"
        }
      ],
      "message": "fees: replace `CBlockPolicyEstimator` with `FeeEstimatorManager`\n\n- Initialize FeeEstimatorManager in node instead of BlockPolicyEstimator.\n- Forward fee rate estimation requests through FeeEstimatorManager.\n- Update Chain interface to return FeeRateEstimatorResult, removing the out parameter requirement.\n- Retain selected BlockPolicyEstimator methods for test-only estimaterawfee RPC compatibility.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-28T15:35:48Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-17T17:55:55Z"
      },
      "sha": "11714710a8b0ec3e7cda5406a8dd42213d7a82dd"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22349555018,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAU0IyVK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22349555018",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "761ce13e7c56867f2cf16b475dcc4c6fb67c5d47",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/761ce13e7c56867f2cf16b475dcc4c6fb67c5d47",
      "created_at": "2026-01-28T15:41:44Z"
    },
    {
      "event": "commented",
      "id": 3812202164,
      "node_id": "IC_kwDOABII587jOZa0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3812202164",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T16:06:54Z",
      "updated_at": "2026-01-28T16:12:44Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review @musaHaruna and @rustaceanrob I forced pushed from 76b36fe917ec61cd390734278f478b82c2409703 to 761ce13e7c56867f2cf16b475dcc4c6fb67c5d47  [compare diff](https://github.com/bitcoin/bitcoin/compare/76b36fe917ec61cd390734278f478b82c2409703..761ce13e7c56867f2cf16b475dcc4c6fb67c5d47)\r\n\r\nI did a few changes.\r\n\r\n<details>\r\n\r\n1. Pass chainstate manager to mempool estimator in case the active chainstate changes e.g due to assumeutxo.\r\n\r\n2. \r\n> I think the commit message can also benefit from adding the new changes of creating a temporary local copy \r\n> FeeCalculation temp_fee_calc; object that CBlockPolicyEstimator::estimateSmartFee function builds step by step, only at > the end (or on failure) does it copy it to *feeCalc, to avoid partially filled data inconsistent output (if that's the intent).\r\n\r\n> I also noticed commit is also returning the user input confirmation target in GetMinimumFeeRate(const CWallet& wallet, const CCoinControl& coin_control, FeeSource* fee_source, int* returned_target); and CAmount GetMinimumFee(const CWallet& wallet, unsigned int nTxBytes, const CCoinControl& coin_control, FeeSource* fee_source, int* returned_target); which was somehow not captured before the change in this commit. If that's the case, I think incorporating this change in the commit message could also make sense.\r\n\r\n> (I think it could also be good if this also captured in the commit message).\r\n\r\nI am not a huge fan of overly verbose commit messages that do not explain logic or rationale, just reinstating what is obvious in code, but they don't hurt, so I added as requested in some cases.\r\n\r\n3.\r\n> Question: Is there a specific reason for naming the files estimator_man.cpp/h instead of estimator_manager.cpp/h. I think the former is more elaborate and derives home the intent of the file more clearly.\r\n\r\nNo, I just follow the approach of the codebase, you can see with other managers, man suffix, is shorter and obvious.\r\n\r\n4. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2709486456 Non blocking: I think it can be rearranged like below\r\n\r\nDone\r\n\r\n5. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718099252 Nit, Non blocking suggestion: I think output param FeeCalculation *feeCalc should be at the end of function declaration and definination. Read it somewhere in [developer-notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md).\r\n\r\nRearranging the parameter is out of the scope imo.\r\nSo I leave as is.\r\n\r\n\r\n6. \r\n>  https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718104622 Is there a reason why you are not explicity doing interger arithmetic (const int32_t p25_weight = (total_weight * 25) / 100;)? Because I think doing integer arithmetic is more predictable because it produces the exact cutoff you expect and for clarity because someone reading the code immediately sees “25% of total” is done using integer math.\r\n\r\nYes, multiplication is faster than (dividing and multiplying), although in this case it is negligible. Moreover this values are fixed, and the block size is also a constant; there is no gain in using integer arithmetic here.\r\n\r\n7. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718117153 Nit Non blocking suggestion: I think Assume(std::is_sorted(chunk_feerates.begin(),chunk_feerates.end(),std::greater<FeePerVSize>())); can be added since the function assumes that the chunk fee rates in the input vector are sorted in descending order.\r\n\r\nGood suggestion, taken.\r\n\r\n8. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718126291 Is there a reason for not using brace initialization (node::BlockAssembler assembler{*m_chainstate, m_mempool, options}) here?\r\n\r\nNo reason, taken.\r\n\r\n9. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2732514545 Why not use a switch?\"\r\n\r\n`switch` language feature is better indeed, taken.\r\n\r\n10. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2735801546 I think we can return the estimator type here as well\r\n\r\nThis is a breaking change, and Bitcoin Core clients most likely match this, so I will leave it as is; in order not break them using this PR.\r\n\r\n11.\r\n> https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3715928857 I think we can make mempool_estimator_error a global variable MEMPOOL_ESTIMATOR_ERROR similar to BLOCK_POLICY_ESTIMATOR_ERROR. Also add the fee rate estimator type to BLOCK_POLICY_ESTIMATOR_ERROR\r\n\r\n\r\nNo, my rule of thumb is to define a global if the constant is used in multiple subtests. In this case, it is not. So, leaving as is.\r\n\r\n12.\r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2736009922 I removed #include <vector> and compiled \r\nsuccessful, not sure if it's neccessary?\r\n\r\nIt is not indeed, removed.\r\n\r\n13. \r\n> https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2736059444 Also removed the enum declarations:\r\n`enum class ChainStateRole;`\r\n`enum class MempoolRemovalReason;`\r\nand compiled successfully. Not sure if they are being used somewhere in a way am not aware of.\r\n\r\nThese are stale forward declarations from a previous version of the PR, you are right indeed; they are not needed. Removed.\r\n\r\n14. \r\n>  https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2736125112 Could add debug info here e.g ...\r\n\r\nTaken with some modifications.\r\n</details>\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3812202164",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "mentioned",
      "id": 22350242087,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAU0LaEn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22350242087",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T16:06:57Z"
    },
    {
      "event": "subscribed",
      "id": 22350242117,
      "node_id": "SE_lADOABII587eVGWDzwAAAAU0LaFF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22350242117",
      "actor": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T16:06:57Z"
    },
    {
      "event": "mentioned",
      "id": 22350242157,
      "node_id": "MEE_lADOABII587eVGWDzwAAAAU0LaFt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22350242157",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T16:06:57Z"
    },
    {
      "event": "subscribed",
      "id": 22350242201,
      "node_id": "SE_lADOABII587eVGWDzwAAAAU0LaGZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22350242201",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T16:06:57Z"
    },
    {
      "event": "labeled",
      "id": 22355256631,
      "node_id": "LE_lADOABII587eVGWDzwAAAAU0eiU3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22355256631",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T19:16:57Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3813375590,
      "node_id": "IC_kwDOABII587jS35m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3813375590",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T19:17:51Z",
      "updated_at": "2026-01-28T19:17:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/actions/runs/21444811601/job/61757678279</sub>\n<sub>LLM reason (✨ experimental): clang-tidy failure: const-qualification of a function parameter in a declaration (CalculatePercentiles) causing CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3813375590",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY4ZGZlMDEyZDkzZWQ0ZGM0ZjY4ZjVkMzBhOWNmZTk4NmZlMzYzODk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389",
      "tree": {
        "sha": "498241511febebd3769e000219a1daf5b7aad265",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/498241511febebd3769e000219a1daf5b7aad265"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 498241511febebd3769e000219a1daf5b7aad265\nparent 11714710a8b0ec3e7cda5406a8dd42213d7a82dd\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1770125422 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770129313 +0000\n\nfees: add `CalculatePercentiles` function\n\n- Given a vector of chunk feerates in the order they were added\n  to the block, CalculatePercentiles function will return the 25th,\n  50th, 75th and 95th percentile feerates.\n\n- This commit also add a unit test for the CalculatePercentile function.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIHpwAKCRAOOQjzZJiY\niK+9AQDe4i6QJP2cTRVfSqCS6IKo9oNP0dSMaaBRG0vI41GKFgD+LU8+HZSco/MD\nUFmhnya7IEI1fb7Y3UpRYziCGkTwIQE=\n=Q1TX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11714710a8b0ec3e7cda5406a8dd42213d7a82dd",
          "sha": "11714710a8b0ec3e7cda5406a8dd42213d7a82dd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/11714710a8b0ec3e7cda5406a8dd42213d7a82dd"
        }
      ],
      "message": "fees: add `CalculatePercentiles` function\n\n- Given a vector of chunk feerates in the order they were added\n  to the block, CalculatePercentiles function will return the 25th,\n  50th, 75th and 95th percentile feerates.\n\n- This commit also add a unit test for the CalculatePercentile function.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:35:13Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T13:30:22Z"
      },
      "sha": "f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRlNDRlMjJkYzQ2MDI5ODNlNzE2MjczM2M0NmNmM2YxMThlZjNmYTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/de44e22dc4602983e7162733c46cf3f118ef3fa1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/de44e22dc4602983e7162733c46cf3f118ef3fa1",
      "tree": {
        "sha": "1e0bcda6a8f9706d07bcf6d7df720db897d762e5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e0bcda6a8f9706d07bcf6d7df720db897d762e5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1e0bcda6a8f9706d07bcf6d7df720db897d762e5\nparent f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763459819 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770129890 +0000\n\nfees: add MemPoolFeeRateEstimator class\n\n- The mempool fee rate estimator uses the unconfirmed transactions in the mempool\n  to generate a fee rate that a package should have for it to confirm as soon as possible.\n\nCo-authored-by: willcl-ark <will@256k1.dev>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIJ5AAKCRAOOQjzZJiY\niLCtAPwOpfVjZCo8lhdC/kNp5AUvmET5Lpg+qlYkGd0AfYebIAEAjBUICPm+B9AV\n3gFBNzJM0V6gvGF88OJEqErX273+Egk=\n=OHir\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389",
          "sha": "f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f8dfe012d93ed4dc4f68f5d30a9cfe986fe36389"
        }
      ],
      "message": "fees: add MemPoolFeeRateEstimator class\n\n- The mempool fee rate estimator uses the unconfirmed transactions in the mempool\n  to generate a fee rate that a package should have for it to confirm as soon as possible.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:44:50Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-18T09:56:59Z"
      },
      "sha": "de44e22dc4602983e7162733c46cf3f118ef3fa1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI3NGFlNjRkNDU5YjJmZmU1MDcwZGU0YzQ5MjZiYjIwMWRiMjM2ZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/274ae64d459b2ffe5070de4c4926bb201db236df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/274ae64d459b2ffe5070de4c4926bb201db236df",
      "tree": {
        "sha": "32572baca380ed08bbbd229addb004f2f60059d9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/32572baca380ed08bbbd229addb004f2f60059d9"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 32572baca380ed08bbbd229addb004f2f60059d9\nparent de44e22dc4602983e7162733c46cf3f118ef3fa1\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768139700 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130242 +0000\n\nfees: add `FeeRateEstimatorTypeToString` method\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYILQgAKCRAOOQjzZJiY\niCbEAQC7FPZA32x/JhzzG0mjDnTPtt4sM5nRz7RARSgem3dTwwD9H8trIoont08o\nFWhu8v630Ia6pQrTz0NW5p47nrzUDg4=\n=xZ5n\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/de44e22dc4602983e7162733c46cf3f118ef3fa1",
          "sha": "de44e22dc4602983e7162733c46cf3f118ef3fa1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/de44e22dc4602983e7162733c46cf3f118ef3fa1"
        }
      ],
      "message": "fees: add `FeeRateEstimatorTypeToString` method",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:50:42Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-11T13:55:00Z"
      },
      "sha": "274ae64d459b2ffe5070de4c4926bb201db236df"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRjZmEzNGYwMzk5NWI4NDBkZDE2MTBhNmQ5ZDI0MmFiZmFkMDI3ODQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcfa34f03995b840dd1610a6d9d242abfad02784",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dcfa34f03995b840dd1610a6d9d242abfad02784",
      "tree": {
        "sha": "362b92d8632acde7053608da35c278bd74848916",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/362b92d8632acde7053608da35c278bd74848916"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 362b92d8632acde7053608da35c278bd74848916\nparent 274ae64d459b2ffe5070de4c4926bb201db236df\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768139726 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130243 +0000\n\ntest: add mempool fee estimator unit test\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYILQwAKCRAOOQjzZJiY\niPR9AP0Wl4x3QQL1RHy/2eQ2BxnQ9vfVJ2u2clxV3mnIjr7UZgD/aS/m8bU3f75c\nM20vO/B+gWrfaC/9QsNGJ6CaZSwCaAU=\n=xieJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/274ae64d459b2ffe5070de4c4926bb201db236df",
          "sha": "274ae64d459b2ffe5070de4c4926bb201db236df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/274ae64d459b2ffe5070de4c4926bb201db236df"
        }
      ],
      "message": "test: add mempool fee estimator unit test",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:50:43Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-11T13:55:26Z"
      },
      "sha": "dcfa34f03995b840dd1610a6d9d242abfad02784"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNmMmQwNjk5YTNmYTQ4ZTgzZjkxY2ZjNzBmMTA4Nzg0NjkwOTgyN2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf2d0699a3fa48e83f91cfc70f1087846909827a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cf2d0699a3fa48e83f91cfc70f1087846909827a",
      "tree": {
        "sha": "d06e398aa85e21916c7f344bf7f46caed4bc53c5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d06e398aa85e21916c7f344bf7f46caed4bc53c5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d06e398aa85e21916c7f344bf7f46caed4bc53c5\nparent dcfa34f03995b840dd1610a6d9d242abfad02784\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1764099944 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130416 +0000\n\nfees: add caching to MemPoolFeeRateEstimator\n\n- Only refresh the cached fee rate estimate if it is older\n      than 7 seconds.\n\n- This avoids generating block templates too often.\n\nCo-authored-by: willcl-ark <will@256k1.dev>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL9QAKCRAOOQjzZJiY\niL0nAPwP367N1e0XX8XyUWOmhnQiOz/Tt9S2PjL6Sukrol2hfwEA9mwtql/RH8ze\n8K1eRwWOw/h8/ihE540TcK/nT4catQI=\n=t3v3\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcfa34f03995b840dd1610a6d9d242abfad02784",
          "sha": "dcfa34f03995b840dd1610a6d9d242abfad02784",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dcfa34f03995b840dd1610a6d9d242abfad02784"
        }
      ],
      "message": "fees: add caching to MemPoolFeeRateEstimator\n\n- Only refresh the cached fee rate estimate if it is older\n      than 7 seconds.\n\n- This avoids generating block templates too often.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:36Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-25T19:45:44Z"
      },
      "sha": "cf2d0699a3fa48e83f91cfc70f1087846909827a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNlYzNiNTk4ZWEwNjkyNThlNTg0MGNiYzdhOTRmZDI5MjFhZmZkNTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cec3b598ea069258e5840cbc7a94fd2921affd50",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cec3b598ea069258e5840cbc7a94fd2921affd50",
      "tree": {
        "sha": "42bfae00659181c1a9788f0e9cc433091675a15b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/42bfae00659181c1a9788f0e9cc433091675a15b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 42bfae00659181c1a9788f0e9cc433091675a15b\nparent cf2d0699a3fa48e83f91cfc70f1087846909827a\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1764100013 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130421 +0000\n\nfees: return mempool estimates when it's lower than block policy\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL9gAKCRAOOQjzZJiY\niBoOAP9R1iQ0E3p+A2Axfe2XY4j43WIFIXrzuvG03R4CEzvifgEAvKmuKO0txz63\nt3MSTFCt18RVIl9EZThhBHr6pzcxGQg=\n=OKjs\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf2d0699a3fa48e83f91cfc70f1087846909827a",
          "sha": "cf2d0699a3fa48e83f91cfc70f1087846909827a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cf2d0699a3fa48e83f91cfc70f1087846909827a"
        }
      ],
      "message": "fees: return mempool estimates when it's lower than block policy",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:41Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-25T19:46:53Z"
      },
      "sha": "cec3b598ea069258e5840cbc7a94fd2921affd50"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNlODBmYjQxMjA1MjE0MmNhZmRiOWM1MWY1OWIwNWQxYmU2ZjA1MDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ce80fb412052142cafdb9c51f59b05d1be6f0504",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ce80fb412052142cafdb9c51f59b05d1be6f0504",
      "tree": {
        "sha": "ee2fd9d74a5719b0a0eda44fcce63df6ab83fb50",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee2fd9d74a5719b0a0eda44fcce63df6ab83fb50"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ee2fd9d74a5719b0a0eda44fcce63df6ab83fb50\nparent cec3b598ea069258e5840cbc7a94fd2921affd50\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763469412 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130422 +0000\n\nrpc:fees: update estimatesmartfee to return errors whether it succeeds or not\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL9wAKCRAOOQjzZJiY\niE4jAP9B2/g8v5N37TafQvfMRDmVTRuvrNd/sx5uvMo+np50mgD/RTAx1sq5QHed\nPNd+5BVv43IJGepP/d0F/vv2pKw5zAI=\n=I6kV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cec3b598ea069258e5840cbc7a94fd2921affd50",
          "sha": "cec3b598ea069258e5840cbc7a94fd2921affd50",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cec3b598ea069258e5840cbc7a94fd2921affd50"
        }
      ],
      "message": "rpc:fees: update estimatesmartfee to return errors whether it succeeds or not",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:42Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-18T12:36:52Z"
      },
      "sha": "ce80fb412052142cafdb9c51f59b05d1be6f0504"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQwYzY3MGEzNGRhMjc0OWYwNWIyMGFlODNkNTMyNGNjNTczMTYzM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0c670a34da2749f05b20ae83d5324cc5731633c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d0c670a34da2749f05b20ae83d5324cc5731633c",
      "tree": {
        "sha": "14a4d9ec03bbf10f0a82eeb2c61d1f396bb48113",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/14a4d9ec03bbf10f0a82eeb2c61d1f396bb48113"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 14a4d9ec03bbf10f0a82eeb2c61d1f396bb48113\nparent ce80fb412052142cafdb9c51f59b05d1be6f0504\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763469044 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130423 +0000\n\ntest: ensure estimatesmartfee returns mempool fee rate estimate\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL+AAKCRAOOQjzZJiY\niFY0AP9ThoVkN+Vv2yLoX06o+Y/nGsCQjbdbmfr1MLz/USjdMQEAyVNbZFeUbbaB\n/kiYD3B67H4Ec24CCAtag74gXGD2uAU=\n=1XCf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ce80fb412052142cafdb9c51f59b05d1be6f0504",
          "sha": "ce80fb412052142cafdb9c51f59b05d1be6f0504",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ce80fb412052142cafdb9c51f59b05d1be6f0504"
        }
      ],
      "message": "test: ensure estimatesmartfee returns mempool fee rate estimate",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:43Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-18T12:30:44Z"
      },
      "sha": "d0c670a34da2749f05b20ae83d5324cc5731633c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJiMGU3ODg3YjI0ZDZhNDQ1ZjM5YmE5ZTUxNTk5NWYzM2JhMGRjZDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bb0e7887b24d6a445f39ba9e515995f33ba0dcd9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bb0e7887b24d6a445f39ba9e515995f33ba0dcd9",
      "tree": {
        "sha": "3dbe87eb326c87c5247751c740fce2dd07a32536",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3dbe87eb326c87c5247751c740fce2dd07a32536"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3dbe87eb326c87c5247751c740fce2dd07a32536\nparent d0c670a34da2749f05b20ae83d5324cc5731633c\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763568325 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130424 +0000\n\nvalidation: add block transactions to `MempoolTransactionsRemovedForBlock`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL+AAKCRAOOQjzZJiY\niCW+APsG9wT+WKF6KwPW14MrHgRr/KpR73EUh9wQGZL8EQPRAAD/XoQcuMILaWms\nBB0Bm/0Gzmj1N/y8Psb9XCW8tubBJg4=\n=L34v\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0c670a34da2749f05b20ae83d5324cc5731633c",
          "sha": "d0c670a34da2749f05b20ae83d5324cc5731633c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d0c670a34da2749f05b20ae83d5324cc5731633c"
        }
      ],
      "message": "validation: add block transactions to `MempoolTransactionsRemovedForBlock`",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:44Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-19T16:05:25Z"
      },
      "sha": "bb0e7887b24d6a445f39ba9e515995f33ba0dcd9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxNDk3ZGZjODUzODJhODM1Y2Q5ZjQ5NTcxMTQzNTAzYTM3OWUyZmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71497dfc85382a835cd9f49571143503a379e2fa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/71497dfc85382a835cd9f49571143503a379e2fa",
      "tree": {
        "sha": "7a4db65b8479ee72a8f6bd784df1350f3f990659",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a4db65b8479ee72a8f6bd784df1350f3f990659"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7a4db65b8479ee72a8f6bd784df1350f3f990659\nparent bb0e7887b24d6a445f39ba9e515995f33ba0dcd9\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763568772 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130425 +0000\n\nfees: only return mempool fee rate estimate when mempool is healthy\n\n- This ensures that the users mempool has seen at least 75% of the\n  last 6 blocks transactions.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL+QAKCRAOOQjzZJiY\niGpZAP9zlPCgnshBwrd8uvORk1c2AQvWogNT52ICcxtOcvDnAgD+KX+jDLb9KnHq\n1FANdi1+57JYn/I5jDfkVVqIOnGTUwo=\n=y7MP\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bb0e7887b24d6a445f39ba9e515995f33ba0dcd9",
          "sha": "bb0e7887b24d6a445f39ba9e515995f33ba0dcd9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bb0e7887b24d6a445f39ba9e515995f33ba0dcd9"
        }
      ],
      "message": "fees: only return mempool fee rate estimate when mempool is healthy\n\n- This ensures that the users mempool has seen at least 75% of the\n  last 6 blocks transactions.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:45Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-19T16:12:52Z"
      },
      "sha": "71497dfc85382a835cd9f49571143503a379e2fa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY3OTUwOWJmOTkyY2I4MjJiMWQxMTUxYmM0NmJhNmFjNGZmZjAwNjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/679509bf992cb822b1d1151bc46ba6ac4fff0066",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/679509bf992cb822b1d1151bc46ba6ac4fff0066",
      "tree": {
        "sha": "d850794d2255bc4f705ebca33148b768db620c86",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d850794d2255bc4f705ebca33148b768db620c86"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d850794d2255bc4f705ebca33148b768db620c86\nparent 71497dfc85382a835cd9f49571143503a379e2fa\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763571151 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130426 +0000\n\nfees: return mempool health stats from feerate estimator manager\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL+gAKCRAOOQjzZJiY\niBDmAQDXR0fMsvLt7j02CtglAVTrTagGmurF5Sy1WdvJwJ72WQD6Aq2BkyE+YlzI\niRjFmFfPDAp2ayH2uvdINbiDy2+7dg4=\n=x+y7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71497dfc85382a835cd9f49571143503a379e2fa",
          "sha": "71497dfc85382a835cd9f49571143503a379e2fa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/71497dfc85382a835cd9f49571143503a379e2fa"
        }
      ],
      "message": "fees: return mempool health stats from feerate estimator manager",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:46Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-19T16:52:31Z"
      },
      "sha": "679509bf992cb822b1d1151bc46ba6ac4fff0066"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1MjM3YWZjMmE3YzRlMDZlM2NhOTQwYzU5YTE2YmRiMzQ3NTI0NTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5237afc2a7c4e06e3ca940c59a16bdb34752452",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5237afc2a7c4e06e3ca940c59a16bdb34752452",
      "tree": {
        "sha": "148fd1aae77d0127d35e4160d1879817c721c715",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/148fd1aae77d0127d35e4160d1879817c721c715"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 148fd1aae77d0127d35e4160d1879817c721c715\nparent 679509bf992cb822b1d1151bc46ba6ac4fff0066\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763736283 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130427 +0000\n\nfees: rename and move fee_estimates.dat to fees/block_policy_estimates.dat\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL+wAKCRAOOQjzZJiY\niBBPAQDda+Yx8IlDPFk0FuVNc6K3oml2vcz3XLYpQz71LgoKVgD9GrVvgaFEbeVl\niL5Tqbo7Bod88J/cTz/30tK2AJtxgg0=\n=2zl0\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/679509bf992cb822b1d1151bc46ba6ac4fff0066",
          "sha": "679509bf992cb822b1d1151bc46ba6ac4fff0066",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/679509bf992cb822b1d1151bc46ba6ac4fff0066"
        }
      ],
      "message": "fees: rename and move fee_estimates.dat to fees/block_policy_estimates.dat",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-21T14:44:43Z"
      },
      "sha": "d5237afc2a7c4e06e3ca940c59a16bdb34752452"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc1NThiZjlmN2U3NTk1ZTgzNmJmZThkZGQ4OTdhYjg4MjMyYmVhMzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7558bf9f7e7595e836bfe8ddd897ab88232bea39",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7558bf9f7e7595e836bfe8ddd897ab88232bea39",
      "tree": {
        "sha": "11f96772de50452e6b8607b6fbb0af0f20d48ea3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/11f96772de50452e6b8607b6fbb0af0f20d48ea3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 11f96772de50452e6b8607b6fbb0af0f20d48ea3\nparent d5237afc2a7c4e06e3ca940c59a16bdb34752452\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763736672 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130428 +0000\n\nfees: add EncodedBlockDataFormatter struct\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIL/AAKCRAOOQjzZJiY\niE1SAQCVtf4IWlFUfQAJPLWNy40qcLIHeBySDjvBpT87UehUgwEAlIJRPpUNy4pz\nIT1TmGZDzyQTNkGMcmly+B1gybA1qQw=\n=uQdN\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5237afc2a7c4e06e3ca940c59a16bdb34752452",
          "sha": "d5237afc2a7c4e06e3ca940c59a16bdb34752452",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d5237afc2a7c4e06e3ca940c59a16bdb34752452"
        }
      ],
      "message": "fees: add EncodedBlockDataFormatter struct",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:53:48Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-21T14:51:12Z"
      },
      "sha": "7558bf9f7e7595e836bfe8ddd897ab88232bea39"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcyZWM3MGE2M2FmNDllMDAyNDYwYzdhOTllOTkyNmZhMTk5ZWUyZmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/72ec70a63af49e002460c7a99e9926fa199ee2fc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/72ec70a63af49e002460c7a99e9926fa199ee2fc",
      "tree": {
        "sha": "e7cc3999d2a3bd73d12d79d2c2f153daf4fd5fb6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e7cc3999d2a3bd73d12d79d2c2f153daf4fd5fb6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e7cc3999d2a3bd73d12d79d2c2f153daf4fd5fb6\nparent 7558bf9f7e7595e836bfe8ddd897ab88232bea39\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1763738563 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130653 +0000\n\nfees: persist mempool estimator statistics\n\n- This commit also enable estimatesmartfee to return\n  the stats when verbosity level is greater than 1.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIM4AAKCRAOOQjzZJiY\niBGHAQDm2gAzA1n27/iKg0mRmN8XIwCVuC0qSCS+YnbJZpiwJwEAuW14jzGr2IRJ\n7dkAkyh+uBj+1AiJv52g22kKN1VTIwg=\n=TFGR\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7558bf9f7e7595e836bfe8ddd897ab88232bea39",
          "sha": "7558bf9f7e7595e836bfe8ddd897ab88232bea39",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7558bf9f7e7595e836bfe8ddd897ab88232bea39"
        }
      ],
      "message": "fees: persist mempool estimator statistics\n\n- This commit also enable estimatesmartfee to return\n  the stats when verbosity level is greater than 1.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:57:33Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-21T15:22:43Z"
      },
      "sha": "72ec70a63af49e002460c7a99e9926fa199ee2fc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUyMjQwNmNkZjU5M2MxOTU2NDAzYmY0YWE3Y2I1MWUxYTI1ZWEyNDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "tree": {
        "sha": "16502340156570c3ff65bfbffd7decb26d867294",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/16502340156570c3ff65bfbffd7decb26d867294"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 16502340156570c3ff65bfbffd7decb26d867294\nparent 72ec70a63af49e002460c7a99e9926fa199ee2fc\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768225974 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770130657 +0000\n\ntest: add mempool estimator i/o fuzz test\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYIM4QAKCRAOOQjzZJiY\niGEmAQCYfTqCrGvaPbJWxrxWGE5vZGQY1ZklIRIrqwKToCSvsQD9Go2eNRqJqnQB\nID92aVbbhb7MMTP1K5wdRaJ3QoBRkw0=\n=X5sf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/72ec70a63af49e002460c7a99e9926fa199ee2fc",
          "sha": "72ec70a63af49e002460c7a99e9926fa199ee2fc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/72ec70a63af49e002460c7a99e9926fa199ee2fc"
        }
      ],
      "message": "test: add mempool estimator i/o fuzz test",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T14:57:37Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-12T13:52:54Z"
      },
      "sha": "522406cdf593c1956403bf4aa7cb51e1a25ea241"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22500308314,
      "node_id": "HRFPE_lADOABII587eVGWDzwAAAAU9H3Va",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22500308314",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "created_at": "2026-02-03T15:08:04Z"
    },
    {
      "event": "commented",
      "id": 3841933253,
      "node_id": "IC_kwDOABII587k_z_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3841933253",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T15:13:58Z",
      "updated_at": "2026-02-03T16:23:34Z",
      "author_association": "MEMBER",
      "body": "Forced pushed from 761ce13e7c56867f2cf16b475dcc4c6fb67c5d47 to 522406cdf593c1956403bf4aa7cb51e1a25ea241 \r\n\r\n[c6fb67c5d47..522406cdf](https://github.com/bitcoin/bitcoin/compare/761ce13e7c56867f2cf16b475dcc4c6fb67c5d47..522406cdf593c1956403bf4aa7cb51e1a25ea241)\r\nThe `Assume` suggested in https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718117153 caught an edge case.\r\nRounding up when converting from weight to vsize may cause slight misorder. I fixed that by sorting before calling `CalculatePercentile`",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#issuecomment-3841933253",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34075"
    },
    {
      "event": "unlabeled",
      "id": 22502374181,
      "node_id": "UNLE_lADOABII587eVGWDzwAAAAU9Pvsl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22502374181",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T16:24:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2677698299",
      "pull_request_review_id": 3645650633,
      "id": 2677698299,
      "node_id": "PRRC_kwDOABII586fmm77",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\n+    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 165,
      "original_position": 147,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Unkilled mutant:\r\n\r\n```diff\r\ndiff --git a/src/policy/fees/mempool_estimator.cpp b/muts-pr-34075-mempool_estimator-cpp/mempool_estimator.mutant.51.cpp\r\nindex 7c41644103..c2c9dbd49c 100644\r\n--- a/src/policy/fees/mempool_estimator.cpp\r\n+++ b/muts-pr-34075-mempool_estimator-cpp/mempool_estimator.mutant.51.cpp\r\n@@ -144,7 +144,7 @@ bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\r\n     }\r\n     if (!total_block_txs_weight) return false;\r\n     auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\r\n-    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;\r\n+    return average_percentile > HEALTHY_BLOCK_PERCENTILE;\r\n }\r\n```",
      "created_at": "2026-01-09T21:42:14Z",
      "updated_at": "2026-01-09T21:45:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2677698299",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2677698299"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 165,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2677699677",
      "pull_request_review_id": 3645650633,
      "id": 2677699677,
      "node_id": "PRRC_kwDOABII586fmnRd",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 158,
      "original_position": 145,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Unkilled mutant:\r\n\r\n```diff\r\ndiff --git a/src/policy/fees/mempool_estimator.cpp b/muts-pr-34075-mempool_estimator-cpp/mempool_estimator.mutant.48.cpp\r\nindex 7c41644103..0b808bcb35 100644\r\n--- a/src/policy/fees/mempool_estimator.cpp\r\n+++ b/muts-pr-34075-mempool_estimator-cpp/mempool_estimator.mutant.48.cpp\r\n@@ -142,7 +142,7 @@ bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\r\n     if (prev_mined_blocks.back().m_height != current_height) {\r\n         LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\r\n     }\r\n-    if (!total_block_txs_weight) return false;\r\n+\r\n     auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\r\n     return average_percentile >= HEALTHY_BLOCK_PERCENTILE;\r\n }\r\n@@ -196,4 +196,4 @@ FeeRateEstimatorResult MemPoolFeeRateEstimator::EstimateFeeRate(int target, bool\r\n     result.feerate = conservative ? percentiles.p50 : percentiles.p75;\r\n     result.returned_target = MEMPOOL_FEE_ESTIMATOR_MAX_TARGET;\r\n     return result;\r\n```",
      "created_at": "2026-01-09T21:42:58Z",
      "updated_at": "2026-01-09T21:45:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2677699677",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2677699677"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 158,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2677704175",
      "pull_request_review_id": 3645650633,
      "id": 2677704175,
      "node_id": "PRRC_kwDOABII586fmoXv",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\n+    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;\n+}\n+\n+FeeRateEstimatorResult MemPoolFeeRateEstimator::EstimateFeeRate(int target, bool conservative) const\n+{\n+    LOCK(cs);\n+    FeeRateEstimatorResult result;\n+    result.feerate_estimator = GetFeeRateEstimatorType();\n+    auto activeTip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!activeTip) {",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 1,
      "original_position": 156,
      "commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Unkilled mutant (corecheck shows this verification has no test coverage at all): \r\n\r\n```diff\r\ndiff --git a/src/policy/fees/mempool_estimator.cpp b/muts-pr-34075-mempool_estimator-cpp/mempool_estimator.mutant.53.cpp\r\nindex 7c41644103..17a5c28093 100644\r\n--- a/src/policy/fees/mempool_estimator.cpp\r\n+++ b/muts-pr-34075-mempool_estimator-cpp/mempool_estimator.mutant.53.cpp\r\n@@ -153,7 +153,7 @@ FeeRateEstimatorResult MemPoolFeeRateEstimator::EstimateFeeRate(int target, bool\r\n     FeeRateEstimatorResult result;\r\n     result.feerate_estimator = GetFeeRateEstimatorType();\r\n     auto activeTip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\r\n-    if (!activeTip) {\r\n+    if (1==0) {\r\n         result.errors.emplace_back(strprintf(\"%s: No active chainstate available\", FeeRateEstimatorTypeToString(result.feerate_estimator)));\r\n         return result;\r\n     }\r\n```",
      "created_at": "2026-01-09T21:45:06Z",
      "updated_at": "2026-01-09T21:45:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2677704175",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2677704175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 156,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2679954624",
      "pull_request_review_id": 3648156056,
      "id": 2679954624,
      "node_id": "PRRC_kwDOABII586fvNzA",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\n+    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;\n+}\n+\n+FeeRateEstimatorResult MemPoolFeeRateEstimator::EstimateFeeRate(int target, bool conservative) const\n+{\n+    LOCK(cs);\n+    FeeRateEstimatorResult result;\n+    result.feerate_estimator = GetFeeRateEstimatorType();\n+    auto activeTip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!activeTip) {",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 1,
      "original_position": 156,
      "commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": 2677704175,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is gone now.\r\nThanks",
      "created_at": "2026-01-11T17:36:56Z",
      "updated_at": "2026-01-11T17:36:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2679954624",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2679954624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 156,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2679955356",
      "pull_request_review_id": 3648156848,
      "id": 2679955356,
      "node_id": "PRRC_kwDOABII586fvN-c",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 158,
      "original_position": 145,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": 2677699677,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Killed thanks",
      "created_at": "2026-01-11T17:37:22Z",
      "updated_at": "2026-01-11T17:37:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2679955356",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2679955356"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 158,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2679958112",
      "pull_request_review_id": 3648159538,
      "id": 2679958112,
      "node_id": "PRRC_kwDOABII586fvOpg",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\n+    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 165,
      "original_position": 147,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": 2677698299,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This requires making the `average_percentile` exactly .75; the current unit test is based on approximation, thats why this is un-killed.\r\n",
      "created_at": "2026-01-11T17:39:05Z",
      "updated_at": "2026-01-11T17:39:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2679958112",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2679958112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 165,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2682245849",
      "pull_request_review_id": 3650731788,
      "id": 2682245849,
      "node_id": "PRRC_kwDOABII586f39LZ",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\n+    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 165,
      "original_position": 147,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": 2677698299,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Good to know, thank you for the feedback.",
      "created_at": "2026-01-12T13:19:35Z",
      "updated_at": "2026-01-12T13:19:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2682245849",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2682245849"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 165,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2682422348",
      "pull_request_review_id": 3650936134,
      "id": 2682422348,
      "node_id": "PRRC_kwDOABII586f4oRM",
      "diff_hunk": "@@ -0,0 +1,199 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <util/fs.h>\n+#include <validation.h>\n+\n+constexpr int CURRENT_MEMPOOL_ESTIMATOR_VERSION{1};\n+\n+bool MemPoolFeeRateEstimatorCache::IsStale() const\n+{\n+    return (last_updated + CACHE_LIFE) < NodeClock::now();\n+}\n+\n+std::optional<Percentiles> MemPoolFeeRateEstimatorCache::GetCachedEstimate() const\n+{\n+    if (IsStale()) return std::nullopt;\n+    return estimates;\n+}\n+\n+uint256 MemPoolFeeRateEstimatorCache::GetChainTipHash() const\n+{\n+    return chain_tip_hash;\n+}\n+\n+void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, uint256 current_tip_hash)\n+{\n+    estimates = new_estimates;\n+    last_updated = NodeClock::now();\n+    chain_tip_hash = current_tip_hash;\n+}\n+\n+MemPoolFeeRateEstimator::MemPoolFeeRateEstimator(fs::path mempool_estimates_file_path, const CTxMemPool* mempool, Chainstate* chainstate)\n+    : FeeRateEstimator(FeeRateEstimatorType::MEMPOOL_POLICY),\n+      m_mempool(mempool),\n+      m_chainstate(chainstate),\n+      m_mempool_estimates_file_path(mempool_estimates_file_path)\n+{\n+    ReadStats();\n+};\n+\n+void MemPoolFeeRateEstimator::ReadStats()\n+{\n+    LOCK(cs);\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"rb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        return;\n+    }\n+    try {\n+        int version_required;\n+        file >> version_required;\n+        if (version_required != CURRENT_MEMPOOL_ESTIMATOR_VERSION) {\n+            LogWarning(\"%s: file version not supported; Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+            return;\n+        }\n+        file >> Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+    } catch (std::exception&) {\n+        LogWarning(\"%s: Unable to read data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+}\n+\n+void MemPoolFeeRateEstimator::Flush()\n+{\n+    WriteStats();\n+}\n+\n+void MemPoolFeeRateEstimator::WriteStats()\n+{\n+    LOCK(cs);\n+    if (!m_mempool_estimates_file_path.parent_path().empty()) {\n+        fs::create_directories(m_mempool_estimates_file_path.parent_path());\n+    }\n+\n+    AutoFile file{fsbridge::fopen(m_mempool_estimates_file_path, \"wb\")};\n+    if (file.IsNull()) {\n+        LogDebug(BCLog::ESTIMATEFEE, \" %s: %s does not exist. Continue anyway\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+        (void)file.fclose();\n+        return;\n+    }\n+    try {\n+        file << CURRENT_MEMPOOL_ESTIMATOR_VERSION;\n+        file << Using<VectorFormatter<EncodedBlockDataFormatter>>(prev_mined_blocks);\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: estimates flushed to %s.\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    } catch (const std::exception&) {\n+        LogWarning(\"%s: Unable to write data to %s (non-fatal)\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()), fs::PathToString(m_mempool_estimates_file_path));\n+    }\n+    if (file.fclose() != 0) {\n+        LogError(\"Failed to close mempool fee estimates file %s: %s. Continuing anyway.\", fs::PathToString(m_mempool_estimates_file_path), SysErrorString(errno));\n+        return;\n+    }\n+}\n+\n+\n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;\n+    return average_percentile >= HEALTHY_BLOCK_PERCENTILE;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 165,
      "original_position": 147,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "fee261249f87478b2d3f44a98a070a6a9fbd6a73",
      "in_reply_to_id": 2677698299,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I am considering adding a fuzz test which can easily provide such an arrangement, such that the percentile is exactly at .75, but this PR is currently quite large in terms of diff.\r\n\r\nI will leave that as an idea for a follow-up to avoid further expanding the scope.\r\n\r\nThanks for the mutants.",
      "created_at": "2026-01-12T14:04:39Z",
      "updated_at": "2026-01-12T14:04:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2682422348",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2682422348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 165,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2709486456",
      "pull_request_review_id": 3683568092,
      "id": 2709486456,
      "node_id": "PRRC_kwDOABII586hf3t4",
      "diff_hunk": "",
      "path": "src/wallet/fees.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "original_commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"fees: seperate fee estimate mode from fee source\" [659708](https://github.com/bitcoin/bitcoin/pull/34075/changes/6597083f9dad2fc93e48366f4d4425c16d037021)\r\nNon blocking: I think it can be rearranged like below\r\n\r\n```suggestion\r\n#include <wallet/coincontrol.h>\r\n#include <wallet/fees.h>\r\n#include <wallet/wallet.h>\r\n\r\nnamespace wallet {\r\nCAmount GetRequiredFee(const CWallet& wallet, unsigned int nTxBytes)\r\n```",
      "created_at": "2026-01-20T18:00:20Z",
      "updated_at": "2026-01-22T10:03:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2709486456",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2709486456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": 6,
      "original_start_line": 6,
      "start_side": "LEFT",
      "line": 13,
      "original_line": 13,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718099252",
      "pull_request_review_id": 3693922067,
      "id": 2718099252,
      "node_id": "PRRC_kwDOABII586iAuc0",
      "diff_hunk": "",
      "path": "src/policy/fees/block_policy_estimator.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "dfdc26ee1dc3ba415627b8e4c5be095050ad9b1c",
      "original_commit_id": "dfdc26ee1dc3ba415627b8e4c5be095050ad9b1c",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"[fees: make estimateSmartFee log internal (44f6548)](https://github.com/bitcoin/bitcoin/pull/34075/changes/dfdc26ee1dc3ba415627b8e4c5be095050ad9b1c)\"\n\nNit, Non blocking suggestion: I think output param `FeeCalculation *feeCalc` should be at the end of function declaration and definination. Read it somewhere in [developer-notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md).",
      "created_at": "2026-01-22T18:27:51Z",
      "updated_at": "2026-01-22T18:27:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718099252",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718099252"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 874,
      "original_line": 874,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718104622",
      "pull_request_review_id": 3693927829,
      "id": 2718104622,
      "node_id": "PRRC_kwDOABII586iAvwu",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <policy/policy.h>\n+#include <util/feefrac.h>\n+#include <util/fees.h>\n+\n+Percentiles CalculatePercentiles(const std::vector<FeePerVSize>& chunk_feerates, const int32_t total_weight)\n+{\n+    if (chunk_feerates.empty()) return Percentiles{};\n+    int32_t accumulated_weight{0};\n+    const int32_t p25_weight = 0.25 * total_weight;\n+    const int32_t p50_weight = 0.50 * total_weight;\n+    const int32_t p75_weight = 0.75 * total_weight;\n+    const int32_t p95_weight = 0.95 * total_weight;",
      "path": "src/util/fees.cpp",
      "position": 18,
      "original_position": 16,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "2b30932ca6c22ad8aa090c81bb498a934b2f79d5",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"[add CalculatePercentiles function (2b30932)](https://github.com/bitcoin/bitcoin/pull/34075/changes/2b30932ca6c22ad8aa090c81bb498a934b2f79d5)\"\n\nIs there a reason why you are not explicity doing interger arithmetic (`const int32_t p25_weight = (total_weight * 25) / 100;`)? Because I think doing integer arithmetic is more predictable because it produces the exact cutoff you expect and for clarity because someone reading the code immediately sees “25% of total” is done using integer math.",
      "created_at": "2026-01-22T18:29:32Z",
      "updated_at": "2026-01-22T18:29:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718104622",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718104622"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": 15,
      "original_start_line": 13,
      "start_side": "RIGHT",
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718117153",
      "pull_request_review_id": 3693941755,
      "id": 2718117153,
      "node_id": "PRRC_kwDOABII586iAy0h",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <policy/policy.h>\n+#include <util/feefrac.h>\n+#include <util/fees.h>\n+\n+Percentiles CalculatePercentiles(const std::vector<FeePerVSize>& chunk_feerates, const int32_t total_weight)\n+{\n+    if (chunk_feerates.empty()) return Percentiles{};\n+    int32_t accumulated_weight{0};\n+    const int32_t p25_weight = 0.25 * total_weight;\n+    const int32_t p50_weight = 0.50 * total_weight;\n+    const int32_t p75_weight = 0.75 * total_weight;\n+    const int32_t p95_weight = 0.95 * total_weight;\n+    Percentiles percentiles{};\n+",
      "path": "src/util/fees.cpp",
      "position": 1,
      "original_position": 18,
      "commit_id": "2b30932ca6c22ad8aa090c81bb498a934b2f79d5",
      "original_commit_id": "2b30932ca6c22ad8aa090c81bb498a934b2f79d5",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"[add CalculatePercentiles function (2b30932)](https://github.com/bitcoin/bitcoin/pull/34075/changes/2b30932ca6c22ad8aa090c81bb498a934b2f79d5)\"\n\nNit Non blocking suggestion: I think `Assume(std::is_sorted(chunk_feerates.begin(),chunk_feerates.end(),std::greater<FeePerVSize>()));` can be added since the function assumes that the chunk fee rates in the input vector are sorted in descending order.",
      "created_at": "2026-01-22T18:33:37Z",
      "updated_at": "2026-01-22T18:35:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718117153",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718117153"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718126291",
      "pull_request_review_id": 3693952040,
      "id": 2718126291,
      "node_id": "PRRC_kwDOABII586iA1DT",
      "diff_hunk": "@@ -0,0 +1,47 @@\n+// Copyright (c) 2025-present The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <node/miner.h>\n+#include <policy/fees/estimator.h>\n+#include <policy/fees/mempool_estimator.h>\n+#include <policy/policy.h>\n+#include <util/fees.h>\n+#include <validation.h>\n+\n+FeeRateEstimatorResult MemPoolFeeRateEstimator::EstimateFeeRate(int target, bool conservative) const\n+{\n+    LOCK(cs);\n+    Assume(m_mempool);\n+    Assume(m_chainstate);\n+    FeeRateEstimatorResult result;\n+    result.feerate_estimator = GetFeeRateEstimatorType();\n+    int current_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+    Assume(current_height > -1);\n+    result.current_block_height = static_cast<unsigned int>(current_height);\n+    node::BlockAssembler::Options options;\n+    options.test_block_validity = false;\n+    node::BlockAssembler assembler(*m_chainstate, m_mempool, options);",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 1,
      "original_position": 25,
      "commit_id": "bf69cd122da8ef7f7ae03f67e6c0e26f759aed61",
      "original_commit_id": "bf69cd122da8ef7f7ae03f67e6c0e26f759aed61",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In \"[fees: add MemPoolFeeRateEstimator class (bf69cd1)](https://github.com/bitcoin/bitcoin/pull/34075/changes/bf69cd122da8ef7f7ae03f67e6c0e26f759aed61)\"\n\nIs there a reason for not using brace initialization `(node::BlockAssembler assembler{*m_chainstate, m_mempool, options})` here?",
      "created_at": "2026-01-22T18:36:47Z",
      "updated_at": "2026-01-22T18:36:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2718126291",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2718126291"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732514545",
      "pull_request_review_id": 3711804085,
      "id": 2732514545,
      "node_id": "PRRC_kwDOABII586i3tzx",
      "diff_hunk": "@@ -45,6 +41,22 @@ std::string StringForFeeReason(FeeReason reason)\n     return reason_string->second;\n }\n \n+std::string StringForFeeSource(FeeSource source)",
      "path": "src/common/messages.cpp",
      "position": 36,
      "original_position": 15,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "6597083f9dad2fc93e48366f4d4425c16d037021",
      "in_reply_to_id": null,
      "user": {
        "login": "rustaceanrob",
        "id": 102320249,
        "node_id": "U_kgDOBhlIeQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/102320249?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustaceanrob",
        "html_url": "https://github.com/rustaceanrob",
        "followers_url": "https://api.github.com/users/rustaceanrob/followers",
        "following_url": "https://api.github.com/users/rustaceanrob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustaceanrob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustaceanrob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustaceanrob/subscriptions",
        "organizations_url": "https://api.github.com/users/rustaceanrob/orgs",
        "repos_url": "https://api.github.com/users/rustaceanrob/repos",
        "events_url": "https://api.github.com/users/rustaceanrob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustaceanrob/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why not use a `switch`?\"\r\n\r\n```cpp\r\nswitch (source) {\r\ncase FeeSource::FEE_RATE_ESTIMATOR: return \"Fee Rate Estimator\";\r\ncase FeeSource::MEMPOOL_MIN: return \"Mempool Min Fee\";\r\ncase FeeSource::PAYTXFEE: return \"PayTx Fee\";\r\ncase FeeSource::FALLBACK: return \"Fallback Fee\";\r\ncase FeeSource::REQUIRED: return \"Minimum Required Fee\";\r\ndefault: return \"Unknown fee source\";\r\n}\r\n```",
      "created_at": "2026-01-27T15:16:59Z",
      "updated_at": "2026-01-27T15:17:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2732514545",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732514545"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2735801546",
      "pull_request_review_id": 3715710862,
      "id": 2735801546,
      "node_id": "PRRC_kwDOABII586jEQTK",
      "diff_hunk": "@@ -917,51 +922,85 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n      * See: https://github.com/bitcoin/bitcoin/issues/11800#issuecomment-349697807\n      */\n     double halfEst = estimateCombinedFee(confTarget/2, HALF_SUCCESS_PCT, true, &tempResult);\n-    if (feeCalc) {\n-        feeCalc->est = tempResult;\n-        feeCalc->reason = FeeReason::HALF_ESTIMATE;\n-    }\n+    temp_fee_calc.est = tempResult;\n+    temp_fee_calc.reason = FeeReason::HALF_ESTIMATE;\n+\n     median = halfEst;\n     double actualEst = estimateCombinedFee(confTarget, SUCCESS_PCT, true, &tempResult);\n     if (actualEst > median) {\n         median = actualEst;\n-        if (feeCalc) {\n-            feeCalc->est = tempResult;\n-            feeCalc->reason = FeeReason::FULL_ESTIMATE;\n-        }\n+        temp_fee_calc.est = tempResult;\n+        temp_fee_calc.reason = FeeReason::FULL_ESTIMATE;\n     }\n     double doubleEst = estimateCombinedFee(2 * confTarget, DOUBLE_SUCCESS_PCT, !conservative, &tempResult);\n     if (doubleEst > median) {\n         median = doubleEst;\n-        if (feeCalc) {\n-            feeCalc->est = tempResult;\n-            feeCalc->reason = FeeReason::DOUBLE_ESTIMATE;\n-        }\n+        temp_fee_calc.est = tempResult;\n+        temp_fee_calc.reason = FeeReason::DOUBLE_ESTIMATE;\n     }\n \n     if (conservative || median == -1) {\n         double consEst =  estimateConservativeFee(2 * confTarget, &tempResult);\n         if (consEst > median) {\n             median = consEst;\n-            if (feeCalc) {\n-                feeCalc->est = tempResult;\n-                feeCalc->reason = FeeReason::CONSERVATIVE;\n-            }\n+            temp_fee_calc.est = tempResult;\n+            temp_fee_calc.reason = FeeReason::CONSERVATIVE;\n         }\n     }\n \n+    if (feeCalc) *feeCalc = temp_fee_calc;\n     if (median < 0) return CFeeRate(0); // error condition\n \n+    LogDebug(BCLog::ESTIMATEFEE, \"%s: estimateSmartFee Selected feerate :%g Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+             FeeRateEstimatorTypeToString(FeeRateEstimatorType::BLOCK_POLICY), median, temp_fee_calc.returnedTarget, temp_fee_calc.desiredTarget, StringForFeeReason(temp_fee_calc.reason), temp_fee_calc.est.decay,\n+             temp_fee_calc.est.pass.start, temp_fee_calc.est.pass.end,\n+             (temp_fee_calc.est.pass.totalConfirmed + temp_fee_calc.est.pass.inMempool + temp_fee_calc.est.pass.leftMempool) > 0.0 ? 100 * temp_fee_calc.est.pass.withinTarget / (temp_fee_calc.est.pass.totalConfirmed + temp_fee_calc.est.pass.inMempool + temp_fee_calc.est.pass.leftMempool) : 0.0,\n+             temp_fee_calc.est.pass.withinTarget, temp_fee_calc.est.pass.totalConfirmed, temp_fee_calc.est.pass.inMempool, temp_fee_calc.est.pass.leftMempool,\n+             temp_fee_calc.est.fail.start, temp_fee_calc.est.fail.end,\n+             (temp_fee_calc.est.fail.totalConfirmed + temp_fee_calc.est.fail.inMempool + temp_fee_calc.est.fail.leftMempool) > 0.0 ? 100 * temp_fee_calc.est.fail.withinTarget / (temp_fee_calc.est.fail.totalConfirmed + temp_fee_calc.est.fail.inMempool + temp_fee_calc.est.fail.leftMempool) : 0.0,\n+             temp_fee_calc.est.fail.withinTarget, temp_fee_calc.est.fail.totalConfirmed, temp_fee_calc.est.fail.inMempool, temp_fee_calc.est.fail.leftMempool);\n+\n     return CFeeRate(llround(median));\n }\n \n-void CBlockPolicyEstimator::Flush() {\n+FeeRateEstimatorResult CBlockPolicyEstimator::EstimateFeeRate(int target, bool conservative) const\n+{\n+    FeeRateEstimatorResult result;\n+    result.feerate_estimator = GetFeeRateEstimatorType();\n+\n+    FeeCalculation fee_calc;\n+    CFeeRate feerate{estimateSmartFee(target, &fee_calc, conservative)};\n+\n+    result.current_block_height = fee_calc.best_height;\n+    result.returned_target = fee_calc.returnedTarget;\n+\n+    if (feerate == CFeeRate(0)) {\n+        result.errors.emplace_back(\"Insufficient data or no feerate found\");",
      "path": "src/policy/fees/block_policy_estimator.cpp",
      "position": 179,
      "original_position": 169,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "76b36fe917ec61cd390734278f478b82c2409703",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think we can return the estimator type here as well\n```suggestion\n        result.errors.emplace_back(strprintf(\"%s: Insufficient data or no feerate found\", FeeRateEstimatorTypeToString(result.feerate_estimator)));\n```",
      "created_at": "2026-01-28T09:52:38Z",
      "updated_at": "2026-01-28T09:53:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2735801546",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2735801546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 979,
      "original_line": 979,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736009922",
      "pull_request_review_id": 3715956835,
      "id": 2736009922,
      "node_id": "PRRC_kwDOABII586jFDLC",
      "diff_hunk": "@@ -13,6 +13,7 @@\n #include <chrono>\n #include <memory>\n #include <unordered_map>\n+#include <vector>",
      "path": "src/policy/fees/estimator_man.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "43b66e1e9dc7abe487d59e8a5c88b6b0bbdb5c5b",
      "original_commit_id": "43b66e1e9dc7abe487d59e8a5c88b6b0bbdb5c5b",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In [validation: add block transactions to `MempoolTransactionsRemovedForBlock` (43b66e)](https://github.com/bitcoin/bitcoin/pull/34075/changes/43b66e1e9dc7abe487d59e8a5c88b6b0bbdb5c5b)\nI removed `#include <vector>` and compiled successful, not sure if it's neccessary?\n",
      "created_at": "2026-01-28T10:36:57Z",
      "updated_at": "2026-01-28T10:36:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2736009922",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736009922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 16,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736059444",
      "pull_request_review_id": 3716014507,
      "id": 2736059444,
      "node_id": "PRRC_kwDOABII586jFPQ0",
      "diff_hunk": "@@ -6,22 +6,35 @@\n #define BITCOIN_POLICY_FEES_MEMPOOL_ESTIMATOR_H\n \n #include <policy/fees/estimator.h>\n+#include <primitives/transaction.h>\n #include <sync.h>\n #include <threadsafety.h>\n #include <uint256.h>\n #include <util/time.h>\n \n #include <chrono>\n+#include <memory>\n+#include <vector>\n \n class Chainstate;\n class CTxMemPool;\n \n+struct BlockData;\n+struct RemovedMempoolTransactionInfo;\n+\n+enum class ChainStateRole;\n+enum class MempoolRemovalReason;",
      "path": "src/policy/fees/mempool_estimator.h",
      "position": 1,
      "original_position": 21,
      "commit_id": "b2e711f88595ec920b697e0950dcd875b19ab8ce",
      "original_commit_id": "b2e711f88595ec920b697e0950dcd875b19ab8ce",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In [fees: only return mempool fee rate estimate when mempool is healthy (b2e711f)](https://github.com/bitcoin/bitcoin/pull/34075/changes/b2e711f88595ec920b697e0950dcd875b19ab8ce)\n\nAlso removed the enum declarations:\n```\nenum class ChainStateRole;\nenum class MempoolRemovalReason;\n``` \nand compiled successfully. Not sure if they are being used somewhere in a way am not aware of. ",
      "created_at": "2026-01-28T10:49:05Z",
      "updated_at": "2026-01-28T10:49:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2736059444",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736059444"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736125112",
      "pull_request_review_id": 3716088530,
      "id": 2736125112,
      "node_id": "PRRC_kwDOABII586jFfS4",
      "diff_hunk": "@@ -33,6 +33,55 @@ void MemPoolFeeRateEstimatorCache::Update(const Percentiles& new_estimates, cons\n     chain_tip_hash = current_tip_hash;\n }\n \n+void MemPoolFeeRateEstimator::MempoolTxsRemovedForBlock(const std::vector<CTransactionRef>& block_txs, const std::vector<RemovedMempoolTransactionInfo>& txs_removed_for_block, unsigned int nBlockHeight)\n+{\n+    LOCK(cs);\n+    BlockData new_block_data;\n+    new_block_data.m_height = nBlockHeight;\n+    // Calculates total block weight excluding the coinbase transaction\n+    Assume(block_txs.size() > 0);\n+    new_block_data.m_block_weight = std::accumulate(block_txs.begin() + 1, block_txs.end(), 0u, [](size_t acc, const CTransactionRef& tx) {\n+        return acc + static_cast<double>(GetTransactionWeight(*tx));\n+    });\n+    new_block_data.m_removed_block_txs_weight = std::accumulate(txs_removed_for_block.begin(), txs_removed_for_block.end(), 0u,\n+                                                                [](size_t acc, const RemovedMempoolTransactionInfo& tx) { return acc + static_cast<double>(GetTransactionWeight(*(tx.info.m_tx))); });\n+    if (prev_mined_blocks.size() == NUMBER_OF_BLOCKS) {\n+        prev_mined_blocks.erase(prev_mined_blocks.begin());\n+    }\n+    prev_mined_blocks.emplace_back(new_block_data);\n+}\n+\n+\n+bool MemPoolFeeRateEstimator::IsMempoolHealthy() const\n+{\n+    LOCK(cs);\n+    auto chain_tip = WITH_LOCK(cs_main, return m_chainstate->m_chainman.ActiveTip());\n+    if (!chain_tip) return false;\n+    return isMempoolHealthy(static_cast<size_t>(chain_tip->nHeight));\n+}\n+\n+bool MemPoolFeeRateEstimator::isMempoolHealthy(size_t current_height) const\n+{\n+    AssertLockHeld(cs);\n+    if (prev_mined_blocks.size() < NUMBER_OF_BLOCKS) return false;\n+    auto total_block_txs_weight = prev_mined_blocks[0].m_block_weight;\n+    auto total_removed_txs_weight = prev_mined_blocks[0].m_removed_block_txs_weight;\n+    for (size_t i = 1; i < prev_mined_blocks.size(); ++i) {\n+        const auto& current = prev_mined_blocks[i];\n+        const auto& previous = prev_mined_blocks[i - 1];\n+        // Handle reorg by returning false (Dont clear as blocks are added it will stabilize).\n+        if (current.m_height != previous.m_height + 1) return false;\n+        total_block_txs_weight += current.m_block_weight;\n+        total_removed_txs_weight += current.m_removed_block_txs_weight;\n+    }\n+    if (prev_mined_blocks.back().m_height != current_height) {\n+        LogDebug(BCLog::ESTIMATEFEE, \"%s: Most Recent BlockData is not the chain tip\", FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()));\n+    }\n+    if (!total_block_txs_weight) return false;\n+    auto average_percentile = total_removed_txs_weight / total_block_txs_weight;",
      "path": "src/policy/fees/mempool_estimator.cpp",
      "position": 159,
      "original_position": 49,
      "commit_id": "522406cdf593c1956403bf4aa7cb51e1a25ea241",
      "original_commit_id": "b2e711f88595ec920b697e0950dcd875b19ab8ce",
      "in_reply_to_id": null,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> On suggestions for more debug information, let me know whether you have explicit code suggestions inline on where more info is needed\r\n\r\nCould add debug info here e.g \r\n```\r\nLogDebug(BCLog::ESTIMATEFEE,\r\n         \"%s: mempool health avg=%.2f threshold=%.2f (%s)\",\r\n     FeeRateEstimatorTypeToString(GetFeeRateEstimatorType()),\r\n         average_percentile,\r\n         HEALTHY_BLOCK_PERCENTILE,\r\n      average_percentile >= HEALTHY_BLOCK_PERCENTILE ? \"healthy\" : \"unhealthy, falls back to block policy estimator\");\r\n```\r\n\r\nAlso updated my review [list](https://github.com/bitcoin/bitcoin/pull/34075#pullrequestreview-3683292797)",
      "created_at": "2026-01-28T11:06:39Z",
      "updated_at": "2026-01-28T11:08:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34075#discussion_r2736125112",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2736125112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34075"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 159,
      "original_line": 159,
      "side": "RIGHT"
    }
  ]
}