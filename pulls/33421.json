{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421",
    "id": 2837615883,
    "node_id": "PR_kwDOABII586pIpUL",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33421",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33421.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33421.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
    "number": 33421,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "node: add  `BlockTemplateCache`",
    "user": {
      "login": "ismaelsadeeq",
      "id": 48946461,
      "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ismaelsadeeq",
      "html_url": "https://github.com/ismaelsadeeq",
      "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
      "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
      "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
      "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
      "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This PR implements the first step of #33758 by adding a cache layer for node block templates.\r\n\r\nThe cache stores newly created block templates along with their configuration options. When clients request a block template, they specify an optional template age limit in `MillisecondsDouble`:\r\n\r\n- If template age limit is `nullopt`, we create a new template and return it without adding it to the cache.\r\n- If a matching template (block template with identical block creation options) exists in the cache and hasn't exceeded the age limit, the cached version is returned.\r\n- If no matching template exists or the age limit has been exceeded, a new template is generated, cached, and returned. When evicting stale templates, we assume no duplicates exist since templates are evicted as soon as their age limit is reached or exceeded.\r\n\r\nThe cache maintains a configurable maximum size (default: 10 templates). When this limit is exceeded, the oldest template is evicted after each insertion.\r\n\r\n\r\nCache lookup requires an exact match on ALL `BlockAssembler::Options` fields. While some fields (e.g., `test_block_validity`, `print_modified_fee`, `coinbase_output_script`) could be ignored for cache reuse, they mainly differ in tests and benchmarks. We keep the logic simple and accept cache misses in those cases.\r\n\r\n\r\nThe cache enforces at most one template per set of options. When searching for a match in `getCachedTemplate()`, if a template with matching options is found but has exceeded the age limit, it's immediately evicted before returning `nullptr`. This ensures no duplicate options exist in the cache. A `SanityCheck()` method verifies this invariant in tests by checking all cached entries for duplicates.\r\n\r\n\r\nThe cache subscribes to the validation interface and clears itself when blocks are connected (to non-historical chainstate to avoid clearing during assumeutxo background validation) or disconnected from the active chain (during reorgs), preventing stale or invalid templates from being served.\r\n\r\n`GetBlockTemplate()` uses double-checked locking: it first checks the cache with only `m_mutex` held, then if there's a miss, acquires both `cs_main` and `m_mutex` to create the template. Before creating, it checks again since another thread might have added a template while locks were released. \r\n\r\nThis PR removes an unused `node/context.h` import from miner to prevent a circular dependency when exposing the block template cache to the node context.",
    "labels": [],
    "created_at": "2025-09-17T18:47:09Z",
    "updated_at": "2026-02-05T16:28:03Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "13e6dc3158f1918a4750d49c7483a9bb7d26c900",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ismaelsadeeq:09-2025-minerman",
      "ref": "09-2025-minerman",
      "sha": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 577730599,
        "node_id": "R_kgDOIm94Jw",
        "name": "bitcoin",
        "full_name": "ismaelsadeeq/bitcoin",
        "owner": {
          "login": "ismaelsadeeq",
          "id": 48946461,
          "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
          "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ismaelsadeeq",
          "html_url": "https://github.com/ismaelsadeeq",
          "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
          "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
          "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
          "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
          "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ismaelsadeeq/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ismaelsadeeq/bitcoin",
        "archive_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ismaelsadeeq/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ismaelsadeeq/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ismaelsadeeq/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/hooks",
        "svn_url": "https://github.com/ismaelsadeeq/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 296737,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-05T16:24:32Z",
        "created_at": "2022-12-13T11:54:34Z",
        "updated_at": "2023-03-10T09:46:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "eb97250421d35f8c172d43b69965af6273025702",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38845,
        "stargazers_count": 87949,
        "watchers_count": 87949,
        "size": 303081,
        "default_branch": "master",
        "open_issues_count": 748,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-05T12:19:13Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-05T16:20:50Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 531,
    "deletions": 45,
    "changed_files": 16,
    "commits": 7,
    "review_comments": 88,
    "comments": 30
  },
  "events": [
    {
      "event": "renamed",
      "id": 19757369361,
      "node_id": "RTE_lADOABII587MSilzzwAAAASZoYgR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19757369361",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T18:47:12Z",
      "rename": {
        "from": "node: add `BlockTemplateCache` ",
        "to": "node: add `BlockTemplateCache`"
      }
    },
    {
      "event": "commented",
      "id": 3304174608,
      "node_id": "IC_kwDOABII587E8bQQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3304174608",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T18:47:14Z",
      "updated_at": "2026-02-05T16:25:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33421.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3791329144) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3711244801) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34075](https://github.com/bitcoin/bitcoin/pull/34075) (fees: Introduce Mempool Based Fee Estimation to reduce overestimation by ismaelsadeeq)\n* [#33966](https://github.com/bitcoin/bitcoin/pull/33966) (refactor: disentangle miner startup defaults from runtime options by Sjors)\n* [#33922](https://github.com/bitcoin/bitcoin/pull/33922) (mining: add getMemoryLoad() and track template non-mempool memory footprint by Sjors)\n* [#32420](https://github.com/bitcoin/bitcoin/pull/32420) (mining, ipc: omit dummy extraNonce from coinbase by Sjors)\n* [#31382](https://github.com/bitcoin/bitcoin/pull/31382) (kernel: Flush in ChainstateManager destructor by sedited)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- BlockConnected({true, false}, nullptr, nullptr) in src/test/fuzz/blocktemplatecache.cpp\n- BlockConnected(background_role, nullptr, nullptr) in src/test/fuzz/blocktemplatecache.cpp\n\n\n\n<sup>2026-02-05 16:25:11</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3304174608",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19757403800,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASZog6Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19757403800",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9682ea7dddf0715021b549f2c19c650ce1111b11",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/9682ea7dddf0715021b549f2c19c650ce1111b11",
      "created_at": "2025-09-17T18:48:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19757416817,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASZokFx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19757416817",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "dca8200c71bb568ffe4821c68209e07a305db80d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/dca8200c71bb568ffe4821c68209e07a305db80d",
      "created_at": "2025-09-17T18:49:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19868476470,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASgQOQ2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19868476470",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "16d55585aa2d26e9177734927b8446faa72570e7",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/16d55585aa2d26e9177734927b8446faa72570e7",
      "created_at": "2025-09-23T14:46:52Z"
    },
    {
      "event": "commented",
      "id": 3324812123,
      "node_id": "IC_kwDOABII587GLJtb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3324812123",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-23T16:45:54Z",
      "updated_at": "2025-09-23T16:45:54Z",
      "author_association": "MEMBER",
      "body": "Forced pushed from dca8200c71bb568ffe4821c68209e07a305db80d to 16d55585aa2d26e9177734927b8446faa72570e7 [5db80d..16d5558](https://github.com/bitcoin/bitcoin/compare/dca8200c71bb568ffe4821c68209e07a305db80d..16d55585aa2d26e9177734927b8446faa72570e7)\r\n\r\nMain Changes are\r\n1. Moved the `BlockTemplateCache` to `src/node/miner.cpp` to fix the circular dependency issue\r\n2. The response now return the block template creation time\r\n3. We search for match from right to left to return the fresh hit first\r\n4. Added a fuzz test that test various cache condition and add more coverage to the BlockAssembler Code.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3324812123",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3324859282,
      "node_id": "IC_kwDOABII587GLVOS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3324859282",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-23T17:01:06Z",
      "updated_at": "2025-09-23T17:05:03Z",
      "author_association": "MEMBER",
      "body": "It seems the new fuzz test in [16d5558](https://github.com/bitcoin/bitcoin/pull/33421/commits/16d55585aa2d26e9177734927b8446faa72570e7)\r\ncaught a minor UndefinedBehaviorSanitizer: unsigned-integer-overflow  issue on master.\r\n\r\n\r\n```\r\n/home/admin/actions-runner/_work/_temp/src/node/miner.cpp:414:47: runtime error: unsigned integer overflow: 2000 - 4000 cannot be represented in type 'size_t' (aka 'unsigned long')\r\n    #0 0x5b2b2753aee0 in node::BlockAssembler::addPackageTxs(int&, int&) /home/admin/actions-runner/_work/_temp/build/src/./node/miner.cpp:414:47\r\n\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /home/admin/actions-runner/_work/_temp/src/node/miner.cpp:414:47 \r\nMS: 5 PersAutoDict-PersAutoDict-EraseBytes-CopyPart-InsertRepeatedBytes- DE: \"\\000\\000\\000\\000\"-\"\\001\\000\\000\\000\\000\\000\\000\\000\"-; base unit: 05fe405753166f125559e7c9ac558654f107c7e9\r\n0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x27,0x27,0x27,0x27,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,\r\n\\001\\000\\000\\000\\000\\000\\000\\000''''\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\r\nartifact_prefix='./'; Test unit written to ./crash-52e81f820b02d40ce3132a4d8e27726deb8eb132\r\nBase64: AQAAAAAAAAAnJycnAAAAAAAAAAAAAAAAAA==\r\n```\r\n\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/17949962995/job/51047356983?pr=33421\r\n\r\nThis is possible on master when node is started with `-blockmaxweight=2000` , `-blockreservedweight=2000` or just `blockmaxweight=2000`  and mining interface `createNewBlock` pass blockReservedWeight as `2000`.\r\n\r\nThis undefined behaviour is possible after #32355 because it introduced a fixed `BLOCK_FULL_ENOUGH_WEIGHT_DELTA` with value `4000`.\r\nBefore #32355 the delta was tied to the `options.blockreservedweight` so will just be `2000 - 2000` which will result in a valid `size_t` value.\r\n\r\nI'll push a commit with a fix soon.\r\n ",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3324859282",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19894590336,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAShz1uA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19894590336",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2dffe160fb056742346c756d40018e0b2402294e",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/2dffe160fb056742346c756d40018e0b2402294e",
      "created_at": "2025-09-24T14:33:08Z"
    },
    {
      "event": "labeled",
      "id": 19898348337,
      "node_id": "LE_lADOABII587MSilzzwAAAASiCLMx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898348337",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:39:29Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 19898348349,
      "node_id": "LE_lADOABII587MSilzzwAAAASiCLM9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898348349",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:39:29Z",
      "label": {
        "name": "Needs backport (29.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "labeled",
      "id": 19898348355,
      "node_id": "LE_lADOABII587MSilzzwAAAASiCLND",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898348355",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:39:29Z",
      "label": {
        "name": "Needs backport (30.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "unlabeled",
      "id": 19898637647,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASiDR1P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898637647",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:54:29Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "unlabeled",
      "id": 19898637657,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASiDR1Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898637657",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:54:29Z",
      "label": {
        "name": "Needs backport (29.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "unlabeled",
      "id": 19898637666,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASiDR1i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898637666",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:54:29Z",
      "label": {
        "name": "Needs backport (30.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "commented",
      "id": 3330050997,
      "node_id": "IC_kwDOABII587GfIu1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3330050997",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:55:33Z",
      "updated_at": "2025-09-24T17:55:33Z",
      "author_association": "MEMBER",
      "body": "> It seems the new fuzz test in [16d5558](https://github.com/bitcoin/bitcoin/pull/33421/commits/16d55585aa2d26e9177734927b8446faa72570e7)\r\ncaught a minor UndefinedBehaviorSanitizer: unsigned-integer-overflow issue on master.\r\n\r\nNice! Sorry for the labeling noise, I meant to label #33475",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3330050997",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "referenced",
      "id": 19918132563,
      "node_id": "REFE_lADOABII587MSilzzwAAAASjNpVT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19918132563",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "05d984b1a4fb6402d93a436203e986cde60fd99f",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/05d984b1a4fb6402d93a436203e986cde60fd99f",
      "created_at": "2025-09-25T12:18:24Z"
    },
    {
      "event": "labeled",
      "id": 19920540404,
      "node_id": "LE_lADOABII587MSilzzwAAAASjW1L0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19920540404",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T13:51:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19924504544,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASjl8_g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19924504544",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ed482dedb510e7b05ae267b7f3c8aa599540a211",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/ed482dedb510e7b05ae267b7f3c8aa599540a211",
      "created_at": "2025-09-25T16:33:21Z"
    },
    {
      "event": "unlabeled",
      "id": 19926582453,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASjt4S1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19926582453",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T18:25:54Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 20450223272,
      "node_id": "LE_lADOABII587MSilzzwAAAATC7aSo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20450223272",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-23T10:04:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20451840060,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATDBlA8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20451840060",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0480018a63723b51d445db18da2f59ee9be55313",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/0480018a63723b51d445db18da2f59ee9be55313",
      "created_at": "2025-10-23T11:28:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20520075418,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATHF4Ca",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20520075418",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "created_at": "2025-10-27T09:33:11Z"
    },
    {
      "event": "unlabeled",
      "id": 20521286142,
      "node_id": "UNLE_lADOABII587MSilzzwAAAATHKfn-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20521286142",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-27T10:23:34Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3268268351,
      "node_id": "PRR_kwDOABII587CzdE_",
      "url": null,
      "actor": null,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-29T16:21:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 5f798b4a3b1a978b8ac954db54e9e8dfc7da6319, though I didn't look closely at the fuzz test. Sorry for the delay in reviewing this, I've been meaning to get to it for some time. I think all the changes seem good and look correct, but I did suggest a number of possible updates below, mostly simplifications that should make the PR smaller.\n\nI do think while the code changes seem good, it would be good to have more clarity about the cases where cache hits are expected and this cache is most likely to be useful. This seems like something that could be mentioned in the BlockTemplateCache documentation. I know the issue #33389 mentioned a number of cases but it's unclear if these would be helped by the caching implemented here or if more changes like sharing templates with different options would be required.\n\nIf you have more changes building on this, or planned changes, it would be helpful to have a pointer or description. I don't know if #31664 would benefit from the caching implemented here, for example.\n\nI tend to think even if this PR is only used to improve `getblocktemplate` and remove global state [[1]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L776), [[2]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L859-L861), [[3]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/node/miner.h#L186-L189), the changes might be worth it but I'm not sure if you implemented or are planning that.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3268268351",
      "submitted_at": "2025-10-29T16:21:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3463610029,
      "node_id": "IC_kwDOABII587Ocn6t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3463610029",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T19:53:20Z",
      "updated_at": "2025-10-29T19:53:20Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review @ryanofsky I will address the comments soon.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3463610029",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20589907571,
      "node_id": "MEE_lADOABII587MSilzzwAAAATLQQ5z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20589907571",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T19:53:22Z"
    },
    {
      "event": "subscribed",
      "id": 20589907592,
      "node_id": "SE_lADOABII587MSilzzwAAAATLQQ6I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20589907592",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T19:53:22Z"
    },
    {
      "event": "renamed",
      "id": 20603265371,
      "node_id": "RTE_lADOABII587MSilzzwAAAATMDOFb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20603265371",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T09:43:35Z",
      "rename": {
        "from": "node: add `BlockTemplateCache`",
        "to": "node: add  `BlockTemplate{Cache, Manager}`"
      }
    },
    {
      "event": "commented",
      "id": 3466996399,
      "node_id": "IC_kwDOABII587Opiqv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3466996399",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T09:45:12Z",
      "updated_at": "2025-10-30T09:45:12Z",
      "author_association": "MEMBER",
      "body": " > I do think while the code changes seem good, it would be good to have more clarity about the cases where cache hits are expected and this cache is most likely to be useful. This seems like something that could be mentioned in the BlockTemplateCache documentation. I know the issue #33389 mentioned a number of cases but it's unclear if these would be helped by the caching implemented here or if more changes like sharing templates with different options would be required.\r\n> \r\n> If you have more changes building on this, or planned changes, it would be helpful to have a pointer or description. I don't know if #31664 would benefit from the caching implemented here, for example. \r\n\r\nI've expanded the PR description to be detailed as much as possible  as such IMHO this component will do more than caching, it should be called the **Block Template Manager** instead.\r\n\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3466996399",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3467320432,
      "node_id": "IC_kwDOABII587Oqxxw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3467320432",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T10:49:15Z",
      "updated_at": "2025-10-30T10:49:15Z",
      "author_association": "MEMBER",
      "body": "> I tend to think even if this PR is only used to improve getblocktemplate and remove global state [[1]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L776), [[2]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L859-L861), [[3]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/node/miner.h#L186-L189), the changes might be worth it but I'm not sure if you implemented or are planning that.\r\n\r\n\r\nWith the block template manager, we should get rid of these globals  especially `nTransactionsUpdated`\r\nCurrently, we donâ€™t actually know whether the updated transactions affect the top block template or not, so itâ€™s not a strictly the correct approach.\r\n\r\nWe should update `getblocktemplate` to also provide a fee threshold like the mining interface instead of these state and because we already have previously built block templates cached  we can easily compute the fee difference and reuse the block template managerâ€™s `GetNext` method (see the PR description).\r\n\r\nClients wonâ€™t need to track the previous state; the block template manager will handle that. This allows us to remove `GetTransactionsUpdated` from the mempool as well, and with that `getblocktemplate` logic will be simpler I think.\r\n\r\nRemoving `m_last_block_num_txs` and `m_last_block_weight` from the block assembler will also be possible, since that information can easily be retrieved from the block template manager.\r\nIâ€™ll add this to the OP thanks for highlighting these global state.\r\n\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3467320432",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3472829721,
      "node_id": "IC_kwDOABII587O_y0Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3472829721",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T12:16:24Z",
      "updated_at": "2025-10-31T12:16:24Z",
      "author_association": "MEMBER",
      "body": "> Plan\r\n\r\nIs this the plan for the current PR? Otherwise maybe it makes more sense to move that to the tracking issue.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3472829721",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3473398583,
      "node_id": "IC_kwDOABII587PB9s3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3473398583",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T14:42:08Z",
      "updated_at": "2025-10-31T14:42:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the updated description. This all seems reasonable and is helpful. I do agree with Sjors though it could be good to move the information about next steps into #33389 which could become a tracking issue. Or you could close #33389 and make a new tracking issue (if things have changed since #33389 was opened). Also the current description ends abruptly with \"It would be nice to also\" so looks like some text is missing.\r\n\r\nOther thoughts and suggestions:\r\n\r\n- As long as caching is implemented here, it would seem make sense to expose it to IPC and RPC clients so if there are multiple clients they could take advantage of the cached templates. Implementing this could be as simple as adding `max_age` options to `BlockCreateOption` and `getblocktemplate`.\r\n\r\n- It would be nice to add a basic c++ unit test using `BlockTemplateCache` so if there are changes or bugfixes to this code it is easy to write tests covering them them. The fuzz test is good too, but fuzz tests are more awkward to run. Also, if there any are parts of the fuzz test that don't really benefit from random inputs, it could make sense to make them unit tests instead.\r\n\r\n- No strong opinion, but I'm not really sure this code needs to have both BlockTemplateCache and BlockTemplateManager classes. I'm hoping the PR will stick to only introducing a BlockTemplateCache now, and not add extra layers to the implementation until they are justified. I think it's fine for example if BlockTemplateCache holds a cache and a few stats and counters without needing a separate BlockTemplateManager to hold the counters, unless BlockTemplateManager is going to implement more significant functionality.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3473398583",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20639584137,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATONw-J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20639584137",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/084bfbc1ec7f8f64f54d231bb641285622311b59",
      "created_at": "2025-10-31T17:24:38Z"
    },
    {
      "event": "commented",
      "id": 3474113647,
      "node_id": "IC_kwDOABII587PEsRv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474113647",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T17:27:29Z",
      "updated_at": "2025-10-31T17:27:29Z",
      "author_association": "MEMBER",
      "body": "Forced pushed from 5f798b4a3b1a978b8ac954db54e9e8dfc7da6319 to 084bfbc1ec7f8f64f54d231bb641285622311b59 Compare diff [dfc7da6319..084bfbc1](https://github.com/bitcoin/bitcoin/compare/5f798b4a3b1a978b8ac954db54e9e8dfc7da6319..084bfbc1ec7f8f64f54d231bb641285622311b59)\r\n\r\nThanks for your thorough review. I've made significant changes following your feedback:\r\n\r\n* Removed the first commit, as it is out of scope for now. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2379497293](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2379497293)\r\n* Changed the `block_template_cache` instance in node interfaces to `unique_ptr` and properly unregistered it from the validation interface. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472926339](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472926339) [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472932269](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472932269)\r\n* Simplified the implementation of the `BlockTemplateCache` class as suggested. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473041954](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473041954)\r\n* Clarified why I donâ€™t check that the coinbase script must match, and why we donâ€™t check that block validity must also match. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366)\r\n* Implemented a comparison operator for block creation options. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473223014](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473223014)\r\n* Removed the template. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473250518](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473250518)\r\n* Removed the incorrect `BlockTemplateCache` forward declaration in miner. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473275740](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473275740)\r\n* Renamed the generic cache size variable to be more specific. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473282308](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473282308)\r\n* Invalidated the cache after block disconnection and handled background validation block connection. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473298969](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473298969)\r\n* Made `IntervalElapsed` an inline and standalone function. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473412280](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473412280)\r\n* Added a clarifying comment that we always create a new template when the maximum age is 0. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473491581](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473491581)\r\n* Fixed grammar nits. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473499003](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473499003)\r\n* Made the block template cache own the chainstate instead of the chainman. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473636918](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473636918)\r\n* Moved the `max_age` variable to block creation options. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473664992](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473664992)\r\n* Made `GetBlockTemplate` return a shared pointer. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473682869](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473682869)\r\n* Defined a `BlocktemplateRef` type alias. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473714111](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473714111)\r\n* Deduplicated code as suggested. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2474149528](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2474149528)\r\n\r\nOther update\r\n\r\n- The PR is now using the `block.nTime` for time comparison.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3474113647",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "renamed",
      "id": 20640258880,
      "node_id": "RTE_lADOABII587MSilzzwAAAATOQVtA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640258880",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:02:31Z",
      "rename": {
        "from": "node: add  `BlockTemplate{Cache, Manager}`",
        "to": "node: add  `BlockTemplateCache`"
      }
    },
    {
      "event": "commented",
      "id": 3474397434,
      "node_id": "IC_kwDOABII587PFxj6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474397434",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:43Z",
      "updated_at": "2025-10-31T18:38:43Z",
      "author_association": "MEMBER",
      "body": "Thanks for you recent comment @ryanofsky @Sjors \r\n\r\n> Is this the plan for the current PR? Otherwise maybe it makes more sense to move that to the tracking issue.\r\n\r\n> This all seems reasonable and is helpful. I do agree with Sjors though it could be good to move the information about next steps into https://github.com/bitcoin/bitcoin/issues/33389 which could become a tracking issue. Or you could close https://github.com/bitcoin/bitcoin/issues/33389 and make a new tracking issue (if things have changed since https://github.com/bitcoin/bitcoin/issues/33389 was opened). Also the current description ends abruptly with \"It would be nice to also\" so looks like some text is missing.\r\n\r\nYes done, and also fixed the PR description.\r\n\r\n>  Implementing this could be as simple as adding max_age options to BlockCreateOption and getblocktemplate.\r\n\r\nYes good idea, with the current iteration it can easily be done, however I did not see a use case yet (I did not think hard). \r\n\r\n> It would be nice to add a basic c++ unit test using BlockTemplateCache so if there are changes or bugfixes to this code it is easy to write tests covering them them. The fuzz test is good too, but fuzz tests are more awkward to run. Also, if there any are parts of the fuzz test that don't really benefit from random inputs, it could make sense to make them unit tests instead.\r\n\r\nUnit test is nice to demonstrate usage and test some cases, but I really like the coverage fuzz test provide like catching some subtle bugs that could be missed in review.\r\n\r\n> No strong opinion, but I'm not really sure this code needs to have both BlockTemplateCache and BlockTemplateManager classes. I'm hoping the PR will stick to only introducing a BlockTemplateCache now, and not add extra layers to the implementation until they are justified. I think it's fine for example if BlockTemplateCache holds a cache and a few stats and counters without needing a separate BlockTemplateManager to hold the counters, unless BlockTemplateManager is going to implement more significant functionality.\r\n\r\nYou are right, i've limit this to just the cache, we can talk about the block template manager when their is code to review and debate on the best approach.\r\n\r\n\r\nI see some fuzz test are failing, I will work on fixing it and also will make commit atomic per some of @ryanofsky  suggestions",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3474397434",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20640977078,
      "node_id": "MEE_lADOABII587MSilzzwAAAATOTFC2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977078",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "subscribed",
      "id": 20640977114,
      "node_id": "SE_lADOABII587MSilzzwAAAATOTFDa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977114",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "mentioned",
      "id": 20640977139,
      "node_id": "MEE_lADOABII587MSilzzwAAAATOTFDz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977139",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "subscribed",
      "id": 20640977158,
      "node_id": "SE_lADOABII587MSilzzwAAAATOTFEG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977158",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "reviewed",
      "id": 3411154210,
      "node_id": "PRR_kwDOABII587LUhUi",
      "url": null,
      "actor": null,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-03T14:30:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 084bfbc1ec7f8f64f54d231bb641285622311b59 reviewing first commit in detail, but reviewed fuzz test in second commit pretty lightly. Changes here all seem very straightforward and implmenetation seems simpler than it was initially.\n\nI do still suspect specifying template age in seconds instead of using a more granular measure may be a mistake if this caching is supposed to be useful for mining, but others would know more about this than me. It would seem straightfoward to add another field and nice to move away from `uint32_t nTime` anyway to take advantage of better c++ types.\n\nAlso still think it could be good to have a least 1 or 2 unit tests and try simplify the fuzz test so all tests are easier to understand and run.\n\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3411154210",
      "submitted_at": "2025-11-03T14:30:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3486388292,
      "node_id": "IC_kwDOABII587PzhBE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3486388292",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T14:53:07Z",
      "updated_at": "2025-11-04T14:53:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "I left the `block_template_cache` fuzz target running overnight and generated a coverage report for it: https://brunoerg.xyz/bitcoin-core-coverage/33421/coverage_report/",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3486388292",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "reviewed",
      "id": 3416949149,
      "node_id": "PRR_kwDOABII587LqoGd",
      "url": null,
      "actor": null,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T15:02:45Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3416949149",
      "submitted_at": "2025-11-04T15:02:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3486744593,
      "node_id": "IC_kwDOABII587P04AR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3486744593",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:54Z",
      "updated_at": "2025-11-04T15:58:54Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review @ryanofsky and the coverage report @brunoerg\r\n\r\nI will update the PR shortly with the suggestions and study the report.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3486744593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20706780966,
      "node_id": "MEE_lADOABII587MSilzzwAAAATSOGcm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706780966",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "subscribed",
      "id": 20706781002,
      "node_id": "SE_lADOABII587MSilzzwAAAATSOGdK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706781002",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "mentioned",
      "id": 20706781047,
      "node_id": "MEE_lADOABII587MSilzzwAAAATSOGd3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706781047",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "subscribed",
      "id": 20706781067,
      "node_id": "SE_lADOABII587MSilzzwAAAATSOGeL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706781067",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "reviewed",
      "id": 3417441597,
      "node_id": "PRR_kwDOABII587LsgU9",
      "url": null,
      "actor": null,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T16:27:07Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3417441597",
      "submitted_at": "2025-11-04T16:27:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3487272706,
      "node_id": "IC_kwDOABII587P248C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3487272706",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T17:37:06Z",
      "updated_at": "2025-11-04T17:38:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Unit test is nice to demonstrate usage and test some cases, but I really like the coverage fuzz test provide like catching some subtle bugs that could be missed in review.\r\n\r\nI agree with @ryanofsky about having unit test - fuzzing doesn't exclude the need of having unit tests. Fuzzing depends on the provided inputs, unit tests are usually faster, great for regression, demonstrate usage (especially edge cases), etc. Also, the general goal of fuzzing is catching assertion failures, integer overflows, memory violations, etc - but we usually might leverage it by writing harnesses that can check some behavior things - e.g. we can put some metamorphic relations, round-trip assertions, and others (see [An empirical evaluation of fuzz targets using mutation testing](https://sol.sbc.org.br/index.php/sast/article/view/36885/36671)) - as you did here. However, we shouldn't sacrifice performance in favor of it - fuzzing is search. Your fuzz target is good but note that for every single iteration you call `GetBlockTemplate` several times as well as some `BlockConnected`/`BlockDisconnected` to test the cache for every scenario - on my server it barely got more than 50 exec/s.",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3487272706",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20709386040,
      "node_id": "MEE_lADOABII587MSilzzwAAAATSYCc4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20709386040",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T17:37:08Z"
    },
    {
      "event": "subscribed",
      "id": 20709386108,
      "node_id": "SE_lADOABII587MSilzzwAAAATSYCd8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20709386108",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T17:37:08Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20736543068,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATT_olc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736543068",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "16679e3c75f6dd8f696e144afda47d79f844849c",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/16679e3c75f6dd8f696e144afda47d79f844849c",
      "created_at": "2025-11-05T17:15:06Z"
    },
    {
      "event": "mentioned",
      "id": 20736570976,
      "node_id": "MEE_lADOABII587MSilzzwAAAATT_vZg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736570976",
      "actor": {
        "login": "return",
        "id": 7050293,
        "node_id": "MDQ6VXNlcjcwNTAyOTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7050293?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/return",
        "html_url": "https://github.com/return",
        "followers_url": "https://api.github.com/users/return/followers",
        "following_url": "https://api.github.com/users/return/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/return/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/return/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/return/subscriptions",
        "organizations_url": "https://api.github.com/users/return/orgs",
        "repos_url": "https://api.github.com/users/return/repos",
        "events_url": "https://api.github.com/users/return/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/return/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:16:23Z"
    },
    {
      "event": "subscribed",
      "id": 20736571012,
      "node_id": "SE_lADOABII587MSilzzwAAAATT_vaE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736571012",
      "actor": {
        "login": "return",
        "id": 7050293,
        "node_id": "MDQ6VXNlcjcwNTAyOTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7050293?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/return",
        "html_url": "https://github.com/return",
        "followers_url": "https://api.github.com/users/return/followers",
        "following_url": "https://api.github.com/users/return/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/return/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/return/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/return/subscriptions",
        "organizations_url": "https://api.github.com/users/return/orgs",
        "repos_url": "https://api.github.com/users/return/repos",
        "events_url": "https://api.github.com/users/return/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/return/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:16:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20736584811,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATT_yxr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736584811",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "da8554291cdee0371d27a1116a64d3a40ffc74d5",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/da8554291cdee0371d27a1116a64d3a40ffc74d5",
      "created_at": "2025-11-05T17:17:02Z"
    },
    {
      "event": "labeled",
      "id": 20736601172,
      "node_id": "LE_lADOABII587MSilzzwAAAATT_2xU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736601172",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:17:52Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20737031660,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATUBf3s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737031660",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a3f0010c2062fc88720e7eae33694f2491c32ebe",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/a3f0010c2062fc88720e7eae33694f2491c32ebe",
      "created_at": "2025-11-05T17:38:07Z"
    },
    {
      "event": "commented",
      "id": 3492547495,
      "node_id": "IC_kwDOABII587QLAun",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3492547495",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:43:08Z",
      "updated_at": "2025-11-05T17:43:08Z",
      "author_association": "MEMBER",
      "body": "I forced pushed from 084bfbc1ec7f8f64f54d231bb641285622311b59 to  a3f0010c2062fc88720e7eae33694f2491c32ebe [2311b59..a3f001](https://github.com/bitcoin/bitcoin/compare/084bfbc1ec7f8f64f54d231bb641285622311b59..a3f0010c2062fc88720e7eae33694f2491c32ebe)\r\n- We now avoid the second copy when submitting solution by moving the block by value when constructing the shared pointer https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486576551\r\n- Removed the `operator=` in block assembler options and instead introduce a `SimilarOptions` function, I think it's better this way because I plan to extend this logic later by indicating whenever options are similar but it's just the block max weight that differ, this is useful for enabling reusing a larger template in the cache when a smaller one is needed with same matching other options. https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486593971\r\n- Updated the mempool object in the cache to be stored by reference not pointer https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486606258\r\n- Make `TimeIntervalElapsed` parameter `time_interval` be copied by value. https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486621134\r\n- Update `maximum_template_age` to `max_template_age` https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486625191\r\n- Fix previous C.I failure by not having to deal with raw seconds value, we use `MillisecondsDouble` instead https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2490867264\r\n- Get rid of `num_iterations` variable https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2491199977\r\n- Fixed https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3487272706 and https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3411154210 comment that requested for a unit test.\r\n\r\n@brunoerg thanks the resource it's helpful.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3492547495",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20737129090,
      "node_id": "MEE_lADOABII587MSilzzwAAAATUB3qC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737129090",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:43:10Z"
    },
    {
      "event": "subscribed",
      "id": 20737129122,
      "node_id": "SE_lADOABII587MSilzzwAAAATUB3qi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737129122",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:43:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20737336078,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATUCqMO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737336078",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "48ddc09eaf13a0d6010df9c2506fe62ffcaf67f3",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/48ddc09eaf13a0d6010df9c2506fe62ffcaf67f3",
      "created_at": "2025-11-05T17:53:51Z"
    },
    {
      "event": "unlabeled",
      "id": 20740561790,
      "node_id": "UNLE_lADOABII587MSilzzwAAAATUO9t-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20740561790",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T20:30:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 20740998740,
      "node_id": "LE_lADOABII587MSilzzwAAAATUQoZU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20740998740",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T20:48:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3493347928,
      "node_id": "IC_kwDOABII587QOEJY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3493347928",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T20:48:28Z",
      "updated_at": "2025-11-05T20:48:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `macOS native, no depends, sqlite only, gui`: https://github.com/bitcoin/bitcoin/actions/runs/19111349459/job/54623138521</sub>\n<sub>LLM reason (âœ¨ experimental): miner_tests test suite failed (CTest reported 1 failure).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3493347928",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20759002418,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATVVT0y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20759002418",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "81e7c4e668e99581b96660952534f73e4b329936",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/81e7c4e668e99581b96660952534f73e4b329936",
      "created_at": "2025-11-06T12:36:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20760510841,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATVbEF5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20760510841",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ae6a41a62295ac434e37ff924bb3d89dc1decd26",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/ae6a41a62295ac434e37ff924bb3d89dc1decd26",
      "created_at": "2025-11-06T13:45:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20762339337,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATViCgJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20762339337",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "83aa83dc63f0cbbe726546bf1dbf751766bdbbea",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/83aa83dc63f0cbbe726546bf1dbf751766bdbbea",
      "created_at": "2025-11-06T15:00:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20763105162,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATVk9eK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20763105162",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cf05272bb70d100769432d3cfdfece652a8410ba",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/cf05272bb70d100769432d3cfdfece652a8410ba",
      "created_at": "2025-11-06T15:26:09Z"
    },
    {
      "event": "commented",
      "id": 3497856893,
      "node_id": "IC_kwDOABII587QfQ99",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3497856893",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-06T15:34:33Z",
      "updated_at": "2025-11-06T15:34:58Z",
      "author_association": "MEMBER",
      "body": "_Apologies for the force pushes, I am attempting to fix a C.I failure which happens only remotely due to `SetMockTime` not able to nudge the node clock in ms, I adjusted the time advances to be in seconds with a large buffer_",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3497856893",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "labeled",
      "id": 20832879764,
      "node_id": "LE_lADOABII587MSilzzwAAAATZvISU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20832879764",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-10T10:49:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20843062222,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATaV-PO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20843062222",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "created_at": "2025-11-10T17:46:21Z"
    },
    {
      "event": "unlabeled",
      "id": 20860771374,
      "node_id": "UNLE_lADOABII587MSilzzwAAAATbZhwu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20860771374",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T11:45:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3516832835,
      "node_id": "IC_kwDOABII587RnpxD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3516832835",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:02:05Z",
      "updated_at": "2025-11-11T13:02:05Z",
      "author_association": "MEMBER",
      "body": "The following in the PR description had me confused:\r\n\r\n> Client requests for block templates will specify the maximum age of the template in seconds; that is, how fresh they want the template to be:\r\n\r\nI thought it meant that templates have an expiration time, but from 8af9ede0608f5bb4fe3eddf7d3fe4fbb57a4649d it's clear that the caller specifies how old cached templates can be (via `max_template_age`).\r\n\r\nIf you're having trouble with mock time in the tests / fuzzer, it might help to add some direct tests to `TimeIntervalElapsed ` in 3ed16ab58f5773113efdd973d94911c93459637e.\r\n\r\nCommit ddbad03dddeba255b016622d4569aecbf74b9366 _miner: add block template cache_ introduces quite a lot stuff, without explanation. E.g. I was not expecting to see `validation_signals` as relevant for a cache. It would be good to expand the commit message. Maybe it's better to split this commit, and then introduce the unit tests from e45a195def5f8be0793ba585f49e4d5ff5c8b286 gradually to explain where the complexity comes from.\r\n\r\nI wonder if it makes sense to introduce and use `BlockTemplateRef` as a pure refactor in an earlier commit. That way 9500dca555f7394cd3e51821312309d5b9633539 _interfaces: create block template via block template cache_ just needs to change the type from `std::unique_ptr` to `std::shared_ptr` making that commit smaller.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3516832835",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "reviewed",
      "id": 3447844157,
      "node_id": "PRR_kwDOABII587Nge09",
      "url": null,
      "actor": null,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:02:29Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3447844157",
      "submitted_at": "2025-11-11T13:02:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "reviewed",
      "id": 3448014534,
      "node_id": "PRR_kwDOABII587NhIbG",
      "url": null,
      "actor": null,
      "commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:13:55Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3448014534",
      "submitted_at": "2025-11-11T13:13:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3518690143,
      "node_id": "IC_kwDOABII587RuvNf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3518690143",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:39Z",
      "updated_at": "2025-11-11T20:52:39Z",
      "author_association": "MEMBER",
      "body": "I really appreciate the feedback and reviews so far from @ryanofsky, @Sjors, and @brunoerg.\r\nGiven that Iâ€™ve opened #33758 with the overall plan and weâ€™ve had some recent discussions https://github.com/bitcoin/bitcoin/issues/33756#issuecomment-3502079264, Iâ€™ll work on fixing the C. I issue here hence marking as draft.\r\n\r\nI will also work on the e2e implementation separately.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3518690143",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20872045998,
      "node_id": "MEE_lADOABII587MSilzzwAAAATcEiWu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872045998",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:40Z"
    },
    {
      "event": "subscribed",
      "id": 20872046028,
      "node_id": "SE_lADOABII587MSilzzwAAAATcEiXM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046028",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:40Z"
    },
    {
      "event": "mentioned",
      "id": 20872046075,
      "node_id": "MEE_lADOABII587MSilzzwAAAATcEiX7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046075",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "subscribed",
      "id": 20872046106,
      "node_id": "SE_lADOABII587MSilzzwAAAATcEiYa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046106",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "mentioned",
      "id": 20872046138,
      "node_id": "MEE_lADOABII587MSilzzwAAAATcEiY6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046138",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "subscribed",
      "id": 20872046155,
      "node_id": "SE_lADOABII587MSilzzwAAAATcEiZL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046155",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "convert_to_draft",
      "id": 20872050105,
      "node_id": "CTDE_lADOABII587MSilzzwAAAATcEjW5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872050105",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:54Z"
    },
    {
      "event": "labeled",
      "id": 21163499074,
      "node_id": "LE_lADOABII587MSilzzwAAAATtcV5C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21163499074",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T12:25:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21791587216,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUS4TuQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21791587216",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/3dac7252ab383bcd682609c5159b67ab9327385d",
      "created_at": "2025-12-30T10:35:35Z"
    },
    {
      "event": "unlabeled",
      "id": 21792430861,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUS7hsN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21792430861",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T11:43:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21793790695,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUTAtrn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21793790695",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6bc1e3ff74b7a0f05189f2af2f3f0c9e3cf5c423",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/6bc1e3ff74b7a0f05189f2af2f3f0c9e3cf5c423",
      "created_at": "2025-12-30T13:18:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22013319633,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUgGJnR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22013319633",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "created_at": "2026-01-13T10:48:25Z"
    },
    {
      "event": "unlabeled",
      "id": 22015217639,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUgNY_n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22015217639",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T12:18:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 22016584019,
      "node_id": "LE_lADOABII587MSilzzwAAAAUgSmlT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22016584019",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T13:20:52Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22022342972,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUgokk8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022342972",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "84b67c7ba898323f19a5d51074521287699d825f",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/84b67c7ba898323f19a5d51074521287699d825f",
      "created_at": "2026-01-13T16:56:22Z"
    },
    {
      "event": "ready_for_review",
      "id": 22022619254,
      "node_id": "RFRE_lADOABII587MSilzzwAAAAUgpoB2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022619254",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:08:36Z"
    },
    {
      "event": "commented",
      "id": 3745476010,
      "node_id": "IC_kwDOABII587fP22q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3745476010",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:10Z",
      "updated_at": "2026-01-13T17:12:10Z",
      "author_association": "MEMBER",
      "body": "Thanks for your reviews @Sjors @ryanofsky, and @brunoerg. I have split the commits to be more atomic and added a description based on @Sjors suggestion and rebased.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3745476010",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22022701992,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUgp8Oo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022701992",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "subscribed",
      "id": 22022702065,
      "node_id": "SE_lADOABII587MSilzzwAAAAUgp8Px",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702065",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "mentioned",
      "id": 22022702134,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUgp8Q2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702134",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "subscribed",
      "id": 22022702162,
      "node_id": "SE_lADOABII587MSilzzwAAAAUgp8RS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702162",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "mentioned",
      "id": 22022702197,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUgp8R1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702197",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "subscribed",
      "id": 22022702222,
      "node_id": "SE_lADOABII587MSilzzwAAAAUgp8SO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702222",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22022774785,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUgqOAB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022774785",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d",
      "created_at": "2026-01-13T17:15:33Z"
    },
    {
      "event": "labeled",
      "id": 22022788822,
      "node_id": "LE_lADOABII587MSilzzwAAAAUgqRbW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022788822",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:16:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22023398004,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUgsmJ0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22023398004",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:46:09Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22024534847,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUgw7s_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22024534847",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T18:40:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3665634839,
      "node_id": "PRR_kwDOABII587afSYX",
      "url": null,
      "actor": null,
      "commit_id": "8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-15T13:44:41Z",
      "author_association": "MEMBER",
      "body": "I still need to review _miner: introduce `BlockTemplateCache` for reusing shareable block templates_ and later. Some notes so far:\r\n\r\nThe trivial commits 2099bdb903dfa042eb61f748b548d3c31121e335 and 522fcc5734062302dff19e9149aa4d011999d39f should probably be squashed into the first commit that needs the variable they introduce.\r\n\r\nI suggest making 7370591a9a116d3e4eb1e7a9b974e41ecf98af93 the first commit. Good chance some other PR takes it before this one.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3665634839",
      "submitted_at": "2026-01-15T13:44:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22097701011,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUlICiT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22097701011",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "created_at": "2026-01-16T14:44:48Z"
    },
    {
      "event": "commented",
      "id": 3760782910,
      "node_id": "IC_kwDOABII587gKP4-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3760782910",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-16T16:13:10Z",
      "updated_at": "2026-01-16T16:13:10Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review @Sjors\r\n\r\n> The trivial commits https://github.com/bitcoin/bitcoin/commit/2099bdb903dfa042eb61f748b548d3c31121e335 and https://github.com/bitcoin/bitcoin/commit/522fcc5734062302dff19e9149aa4d011999d39f should probably be squashed into the first commit that needs the variable they introduce.\r\n\r\n> I suggest making https://github.com/bitcoin/bitcoin/commit/7370591a9a116d3e4eb1e7a9b974e41ecf98af93 the first commit. Good chance some other PR takes it before this one.\r\n\r\nThis is fixed now. see diff [8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d..a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19](https://github.com/bitcoin/bitcoin/compare/8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d..a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19)\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3760782910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22099698748,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUlPqQ8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22099698748",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-16T16:13:11Z"
    },
    {
      "event": "subscribed",
      "id": 22099698781,
      "node_id": "SE_lADOABII587MSilzzwAAAAUlPqRd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22099698781",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-16T16:13:11Z"
    },
    {
      "event": "reviewed",
      "id": 3687194133,
      "node_id": "PRR_kwDOABII587bxh4V",
      "url": null,
      "actor": null,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-21T14:11:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19. This looks simpler than I remember it and thanks for addressing all previous comments, especially adding the new unit test which is easy to follow. The PR description and next steps listed in the tracking issue are also pretty clear. I might just clarify in the PR description where it says \"when clients request a block template, they specify the maximum age\" this is only referring to BlockTemplateCache clients, not IPC or RPC clients since they do not currently have a way to specify maximum age and followups will presumably add this.\n\nI need to review this in more detail and understand ShareableOptions better (I left another question about it below) but overall this seems like it should be useful and is a pretty straightforward change.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3687194133",
      "submitted_at": "2026-01-21T14:11:50Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3791190393,
      "node_id": "IC_kwDOABII587h-Pl5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791190393",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-23T16:44:18Z",
      "updated_at": "2026-01-23T16:44:47Z",
      "author_association": "MEMBER",
      "body": "I have light preference for making `max_template_age` an argument for `GetBlockTemplate()` (default 0) instead of adding it to `BlockAssembler::Options`. Especially because it's ignored by `ShareableOptions` and then checked separately in `GetBlockTemplate()`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3791190393",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "reviewed",
      "id": 3698569244,
      "node_id": "PRR_kwDOABII587cc7Ac",
      "url": null,
      "actor": null,
      "commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T16:52:35Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3698569244",
      "submitted_at": "2026-01-23T16:52:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "reviewed",
      "id": 3698584296,
      "node_id": "PRR_kwDOABII587cc-ro",
      "url": null,
      "actor": null,
      "commit_id": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T16:55:04Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3698584296",
      "submitted_at": "2026-01-23T16:55:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "reviewed",
      "id": 3698611202,
      "node_id": "PRR_kwDOABII587cdFQC",
      "url": null,
      "actor": null,
      "commit_id": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T17:00:30Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3698611202",
      "submitted_at": "2026-01-23T17:00:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "reviewed",
      "id": 3698632412,
      "node_id": "PRR_kwDOABII587cdKbc",
      "url": null,
      "actor": null,
      "commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T17:05:21Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3698632412",
      "submitted_at": "2026-01-23T17:05:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "reviewed",
      "id": 3698640445,
      "node_id": "PRR_kwDOABII587cdMY9",
      "url": null,
      "actor": null,
      "commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-23T17:07:09Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3698640445",
      "submitted_at": "2026-01-23T17:07:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3791329144,
      "node_id": "IC_kwDOABII587h-xd4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791329144",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-23T17:11:38Z",
      "updated_at": "2026-01-23T17:11:38Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3791329144",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22297441757,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUxB_Xd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22297441757",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7e71277af3093ea3c577e22303093070700ff78d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/7e71277af3093ea3c577e22303093070700ff78d",
      "created_at": "2026-01-26T19:05:16Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22298991322,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUxH5ra",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22298991322",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "af743fe0206d443a13671f056a26b816912d3676",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/af743fe0206d443a13671f056a26b816912d3676",
      "created_at": "2026-01-26T20:18:56Z"
    },
    {
      "event": "labeled",
      "id": 22299002898,
      "node_id": "LE_lADOABII587MSilzzwAAAAUxH8gS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22299002898",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:19:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3801578505,
      "node_id": "IC_kwDOABII587il3wJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3801578505",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:19:42Z",
      "updated_at": "2026-01-26T20:19:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `ASan + LSan + UBSan + integer`: https://github.com/bitcoin/bitcoin/actions/runs/21370322533/job/61512880460</sub>\n<sub>LLM reason (âœ¨ experimental):  miner_tests aborted due to a detected inconsistent lock order (potential deadlock) in miner.cpp.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3801578505",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3801652920,
      "node_id": "IC_kwDOABII587imJ64",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3801652920",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:39:46Z",
      "updated_at": "2026-01-26T20:41:18Z",
      "author_association": "MEMBER",
      "body": "Force-pushed after review by @Sjors and @ryanofsky.\r\n\r\nI made a couple of changes in this push. I got rid of `ShareableTemplates` completely and now only return from cache if there exists a template in the cache with identical block creation options to the request and the maximum age has not elapsed.\r\n\r\nUpdated block creation time to use `MockableSteadyClock` and improve the test accuracy.\r\n\r\n[8309c5de19..7e71277af](https://github.com/bitcoin/bitcoin/compare/a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19..7e71277af3093ea3c577e22303093070700ff78d)\r\n\r\nI attempted to have `BlockTemplateCache::GetBlockTemplate` only lock m_mutex and then lock cs_main when no cache hit occurs, but this resulted in potential double insertion and a potential deadlock:\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/21370322533/job/61512880491?pr=33421\r\n\r\nThere seems to be an unrelated failure in the package_eval fuzz test?\r\n\r\nI took the easy approach and just lock `cs_main` and `m_mutex` at the same time, because if there is a cache hit, the time between acquiring the locks is negligible, whereas if there is no cache hit, you will need to lock `cs_main` anyway. However, it would still be nice to not have to lock `cs_main` in scenarios where there is a cache hit.\r\n\r\n[070700ff78d..af743fe020](https://github.com/bitcoin/bitcoin/compare/7e71277af3093ea3c577e22303093070700ff78d..af743fe0206d443a13671f056a26b816912d3676)\r\n\r\nThe ephemeral_package_eval failure still occurs hereâ€”seems unrelated to me?",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3801652920",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22299401983,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUxJd7_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22299401983",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:39:48Z"
    },
    {
      "event": "subscribed",
      "id": 22299402009,
      "node_id": "SE_lADOABII587MSilzzwAAAAUxJd8Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22299402009",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:39:48Z"
    },
    {
      "event": "mentioned",
      "id": 22299402032,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUxJd8w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22299402032",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:39:48Z"
    },
    {
      "event": "subscribed",
      "id": 22299402051,
      "node_id": "SE_lADOABII587MSilzzwAAAAUxJd9D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22299402051",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-26T20:39:48Z"
    },
    {
      "event": "reviewed",
      "id": 3710501549,
      "node_id": "PRR_kwDOABII587dKcKt",
      "url": null,
      "actor": null,
      "commit_id": "b948e78d2332d1cd03e8ccd76f93b0efc8233a45",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-27T10:55:14Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3710501549",
      "submitted_at": "2026-01-27T10:55:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22315832622,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUyIJUu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22315832622",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/a943e749c65f2279363e18dc5fec820f7ed43f01",
      "created_at": "2026-01-27T12:05:22Z"
    },
    {
      "event": "commented",
      "id": 3805152362,
      "node_id": "IC_kwDOABII587izgRq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3805152362",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T13:12:30Z",
      "updated_at": "2026-01-27T13:12:30Z",
      "author_association": "MEMBER",
      "body": "The C.I failure is related, since we now have an instance of `MockableSteadyClock` in miner.h, most test uses the miner, so the fuzz was complaining that I need to `SetMockTime` at the beginning of those fuzz targets.\r\nI fix it by generalising and adding SetMockTime to the `BasicTestingSetup` constructor, and in the destructor, we clear the mocktime.\r\n\r\nI also rebased added a clarifying comment requested by @Sjors here https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2731435803\r\n\r\n[16912d3676..a943e74](https://github.com/bitcoin/bitcoin/compare/af743fe0206d443a13671f056a26b816912d3676..a943e749c65f2279363e18dc5fec820f7ed43f01)\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3805152362",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22317435851,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUyOQvL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22317435851",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T13:12:32Z"
    },
    {
      "event": "subscribed",
      "id": 22317435937,
      "node_id": "SE_lADOABII587MSilzzwAAAAUyOQwh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22317435937",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T13:12:32Z"
    },
    {
      "event": "unlabeled",
      "id": 22318138145,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUyQ8Mh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22318138145",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T13:37:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3711244801,
      "node_id": "PRR_kwDOABII587dNRoB",
      "url": null,
      "actor": null,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-27T17:50:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK a943e749c65f2279363e18dc5fec820f7ed43f01. That code looks good and seems like it should be useful to implement the followups in #33758 like exposing the caching feature externally and eliminating global variables in the RPC implementation.\n\nI left a number of suggestions below but none are critical. I think maybe biggest concern here would be that by default this seems to add templates to the cache but never use them. Also going forward it doesn't provide IPC callers an escape hatch to let them them request a new template without adding it to the cache. So I think making max template age std::optional and using nullopt to fully bypass the cache could be a good improvement here.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3711244801",
      "submitted_at": "2026-01-27T17:50:50Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "review_requested",
      "id": 22324678932,
      "node_id": "RRE_lADOABII587MSilzzwAAAAUyp5EU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22324678932",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-27T17:50:56Z",
      "requested_reviewer": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3811510881,
      "node_id": "IC_kwDOABII587jLwph",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3811510881",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T14:05:17Z",
      "updated_at": "2026-01-28T14:05:17Z",
      "author_association": "MEMBER",
      "body": "All these suggestions and comments are great.\r\nThanks @ryanofsky, I am planning a force push with the comments addressed.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3811510881",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22347011089,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUz_FQR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22347011089",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T14:05:19Z"
    },
    {
      "event": "subscribed",
      "id": 22347011125,
      "node_id": "SE_lADOABII587MSilzzwAAAAUz_FQ1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22347011125",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-28T14:05:19Z"
    },
    {
      "event": "reviewed",
      "id": 3717543669,
      "node_id": "PRR_kwDOABII587dlTb1",
      "url": null,
      "actor": null,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-28T15:58:06Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3717543669",
      "submitted_at": "2026-01-28T15:58:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22388109356,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAU2b3As",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22388109356",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/e876ca111856a5afcccaba93c3f79f79e24fa490",
      "created_at": "2026-01-29T20:58:00Z"
    },
    {
      "event": "commented",
      "id": 3820425993,
      "node_id": "IC_kwDOABII587jtxMJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3820425993",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T21:22:58Z",
      "updated_at": "2026-02-04T11:57:45Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review @ryanofsky \r\nI forced pushed from a943e749c65f2279363e18dc5fec820f7ed43f01 to e876ca111856a5afcccaba93c3f79f79e24fa490 [compare diff](https://github.com/bitcoin/bitcoin/compare/a943e749c65f2279363e18dc5fec820f7ed43f01..e876ca111856a5afcccaba93c3f79f79e24fa490)\r\n\r\n<details>\r\n- https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3711244801\r\nYes, since there is no cache hit, I agree with your suggestion and added an option to make the template age limit optional. When no value is provided, we simply return a new block template without storing it in the cache.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732044124\r\nIndeed, there is no need to lock `cs_main` here. Iâ€™ve taken the suggestion.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732088045\r\nThis is now gone. Iâ€™ve taken your suggestion, with some modifications.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732248478\r\nI took your suggestion to merge the two commits. Iâ€™ve also removed the verbose commit messages since the commits already have descriptions.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732292911\r\nI removed the reference to the fee increase in the comment.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732512830\r\nI updated the parameter name to `template_age_limit`.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732692048\r\nI took the comment suggestion.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732733532\r\nFor the optimistic case, there is no need to lock `cs_main`, but there is a scenario where, after searching and finding no cache hit, the mutex is released and another thread acquires the lock and inserts a new template, possibly with matching options. In that case, we need to check again to avoid double insertion. I added this logic, although I think it is negligible given the cache size.\r\n`createBlockTemplateInternal` is now used in multiple places, so I kept it. I also made the cache store only one instance per template creation option.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732775121\r\nThat version of the code is now gone.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732855229\r\nI took your suggestion and changed the parameter to `const CBlockTemplate&`.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732970421\r\nI took your suggestionâ€”thanks. It reduces the diff quite a bit. I also applied the same idea in the fuzz test.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2737333696\r\nGood point. I updated the test setup to avoid globally setting mocktime for all tests and instead set it only for the required tests.\r\n</details>\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3820425993",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22388666727,
      "node_id": "MEE_lADOABII587MSilzzwAAAAU2d_Fn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22388666727",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T21:23:00Z"
    },
    {
      "event": "subscribed",
      "id": 22388666757,
      "node_id": "SE_lADOABII587MSilzzwAAAAU2d_GF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22388666757",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T21:23:00Z"
    },
    {
      "event": "labeled",
      "id": 22390161696,
      "node_id": "LE_lADOABII587MSilzzwAAAAU2jsEg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22390161696",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T22:38:15Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3820785758,
      "node_id": "IC_kwDOABII587jvJBe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3820785758",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-29T22:38:19Z",
      "updated_at": "2026-01-29T22:38:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `macOS native, fuzz`: https://github.com/bitcoin/bitcoin/actions/runs/21494475650/job/61925506730</sub>\n<sub>LLM reason (âœ¨ experimental): Fuzz test crash: TestBlockValidity failed due to unexpected witness data (CheckWitnessMalleation) in tx_pool.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3820785758",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "reviewed",
      "id": 3738584537,
      "node_id": "PRR_kwDOABII587e1kXZ",
      "url": null,
      "actor": null,
      "commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-02T10:33:25Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3738584537",
      "submitted_at": "2026-02-02T10:33:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "labeled",
      "id": 22479563921,
      "node_id": "LE_lADOABII587MSilzzwAAAAU74uyR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22479563921",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-02T23:56:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiMjI5MTExZjRhN2JmM2ZhNDFjM2M1NjBiM2VmOTZjZTk4M2IwZDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1",
      "tree": {
        "sha": "00c51e2e87056f7cbb786f817d4aefae7fd81c9c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/00c51e2e87056f7cbb786f817d4aefae7fd81c9c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 00c51e2e87056f7cbb786f817d4aefae7fd81c9c\nparent b58eebf1520f503bd4c7c5693546a6859064ce51\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768322310 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770138924 +0000\n\nminer: remove unused `node/context.h` import\n\n- This prevents circular dependecy when we introduce\n  BlockTemplateCache in miner and want to expose it\n  via the node context.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYItLQAKCRAOOQjzZJiY\niPYVAQDd9GZiSxAPe3RuxtC5+pz0DqWUMpghl7OoXUIBmJlEqQEA+BwPFr5Iqspb\ncL++fD/UrhJBPSIrlY1MgQcglhiI7gY=\n=iCxB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b58eebf1520f503bd4c7c5693546a6859064ce51",
          "sha": "b58eebf1520f503bd4c7c5693546a6859064ce51",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b58eebf1520f503bd4c7c5693546a6859064ce51"
        }
      ],
      "message": "miner: remove unused `node/context.h` import\n\n- This prevents circular dependecy when we introduce\n  BlockTemplateCache in miner and want to expose it\n  via the node context.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-03T17:15:24Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-13T16:38:30Z"
      },
      "sha": "4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22527827560,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAU-w15o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22527827560",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "66f32444237f762d0d864db76feafe687a1f1e98",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/66f32444237f762d0d864db76feafe687a1f1e98",
      "created_at": "2026-02-04T12:51:57Z"
    },
    {
      "event": "commented",
      "id": 3847286340,
      "node_id": "IC_kwDOABII587lUO5E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3847286340",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T12:55:05Z",
      "updated_at": "2026-02-04T12:55:05Z",
      "author_association": "MEMBER",
      "body": "Rebased to resolve a merge conflict, address @maflcko's comment https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2753656173, and attempt to fix CI failure.  \r\n\r\ndiff [e24fa490..66f324](https://github.com/bitcoin/bitcoin/compare/e876ca111856a5afcccaba93c3f79f79e24fa490..66f32444237f762d0d864db76feafe687a1f1e98)",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3847286340",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22527911769,
      "node_id": "MEE_lADOABII587MSilzzwAAAAU-xKdZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22527911769",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T12:55:07Z"
    },
    {
      "event": "subscribed",
      "id": 22527911803,
      "node_id": "SE_lADOABII587MSilzzwAAAAU-xKd7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22527911803",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T12:55:07Z"
    },
    {
      "event": "unlabeled",
      "id": 22528957575,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAU-1JyH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22528957575",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T13:33:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3751288684,
      "node_id": "PRR_kwDOABII587fmB9s",
      "url": null,
      "actor": null,
      "commit_id": "66f32444237f762d0d864db76feafe687a1f1e98",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-04T14:11:16Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3751288684",
      "submitted_at": "2026-02-04T14:11:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "unlabeled",
      "id": 22530253778,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAU-6GPS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22530253778",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-04T14:22:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM5NDc5NmYzNWNmYzY1M2QxMTEwOTA2MDVmNjhhMjRhNTk1NTQ0NjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/394796f35cfc653d111090605f68a24a59554460",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/394796f35cfc653d111090605f68a24a59554460",
      "tree": {
        "sha": "df024c53ae62620e5f214821277638f90cf73f60",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/df024c53ae62620e5f214821277638f90cf73f60"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree df024c53ae62620e5f214821277638f90cf73f60\nparent 4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1770203827 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770303450 +0000\n\nminer: add block creation time point to `CBlockTemplate`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYSv3QAKCRAOOQjzZJiY\niLzZAP9sdLt0AcKcS5MtVFoKaq8NhhHz7AO3RlnGLm0aEWHQRAEApTmIFWr22O9q\ntFPDw62PMO8zUdVHF5KWgqZdcEr18wg=\n=2rZP\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1",
          "sha": "4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4b229111f4a7bf3fa41c3c560b3ef96ce983b0d1"
        }
      ],
      "message": "miner: add block creation time point to `CBlockTemplate`",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-05T14:57:30Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-04T11:17:07Z"
      },
      "sha": "394796f35cfc653d111090605f68a24a59554460"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ2MTk3NTlkZTUxMTEyMjNhODdiZGRiMmQzOWZmMDIwYTg0OGM1NDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4619759de5111223a87bddb2d39ff020a848c547",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4619759de5111223a87bddb2d39ff020a848c547",
      "tree": {
        "sha": "c512fb9d1ce264192d8b7bf6bf90853dd6c21214",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c512fb9d1ce264192d8b7bf6bf90853dd6c21214"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c512fb9d1ce264192d8b7bf6bf90853dd6c21214\nparent 394796f35cfc653d111090605f68a24a59554460\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1762357837 +0100\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770307284 +0000\n\nminer: introduce `BlockTemplateCache` for reusing block templates\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYS+1QAKCRAOOQjzZJiY\niLSUAQDwGfkd+v6sanccFS3tJdOrK7vC+u3nnE0y0Ttebe/zOAD/cwCyBT9n933O\nFDcDHawn3oNwbhbdD8jNwYq5x8Qgzwo=\n=urvF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/394796f35cfc653d111090605f68a24a59554460",
          "sha": "394796f35cfc653d111090605f68a24a59554460",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/394796f35cfc653d111090605f68a24a59554460"
        }
      ],
      "message": "miner: introduce `BlockTemplateCache` for reusing block templates",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-05T16:01:24Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-05T15:50:37Z"
      },
      "sha": "4619759de5111223a87bddb2d39ff020a848c547"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY3MjYxMjJiNGQ3NGQ1ZmViM2E5YzQ0ZmEwNmY3OWE0ZDI0OGM0NmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f726122b4d74d5feb3a9c44fa06f79a4d248c46a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f726122b4d74d5feb3a9c44fa06f79a4d248c46a",
      "tree": {
        "sha": "02c654e948eb6766be8d7217f87588a18acb4650",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/02c654e948eb6766be8d7217f87588a18acb4650"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 02c654e948eb6766be8d7217f87588a18acb4650\nparent 4619759de5111223a87bddb2d39ff020a848c547\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768316645 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770307286 +0000\n\nminer: clear block template after block connection/disconnection\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYS+1gAKCRAOOQjzZJiY\niMCHAP0U+o5RhSTu/7o8LyIYKUPF3CxP7u3WMtPhnau6EDyu7wEAgt/iDmAM81zk\nRKQlzkUWNbJuH33Diz4NCpxaeGe7mgI=\n=gXK1\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4619759de5111223a87bddb2d39ff020a848c547",
          "sha": "4619759de5111223a87bddb2d39ff020a848c547",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4619759de5111223a87bddb2d39ff020a848c547"
        }
      ],
      "message": "miner: clear block template after block connection/disconnection",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-05T16:01:26Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-13T15:04:05Z"
      },
      "sha": "f726122b4d74d5feb3a9c44fa06f79a4d248c46a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxODYwYmFkYmIyZjg3MzIxYmYzZmRjMGM2YmRlYWU5Y2I5NmJjY2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71860badbb2f87321bf3fdc0c6bdeae9cb96bcce",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/71860badbb2f87321bf3fdc0c6bdeae9cb96bcce",
      "tree": {
        "sha": "0f128281bd35a6efa4532e44a8ac27a549181433",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0f128281bd35a6efa4532e44a8ac27a549181433"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0f128281bd35a6efa4532e44a8ac27a549181433\nparent f726122b4d74d5feb3a9c44fa06f79a4d248c46a\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1762355187 +0100\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770307940 +0000\n\ntest: add unit test to `BlockTemplateCache`\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYTBZwAKCRAOOQjzZJiY\niEm2AQCNi4cPWBu66WvEnmCdKM8uulEHml8ZHILQRrEAEgN9iAEAyBqYHIJLO1Zo\naNbopn6HHdW8jA1oT6aFhGtyilk0YQQ=\n=OhXe\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f726122b4d74d5feb3a9c44fa06f79a4d248c46a",
          "sha": "f726122b4d74d5feb3a9c44fa06f79a4d248c46a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f726122b4d74d5feb3a9c44fa06f79a4d248c46a"
        }
      ],
      "message": "test: add unit test to `BlockTemplateCache`\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-05T16:12:20Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-05T15:06:27Z"
      },
      "sha": "71860badbb2f87321bf3fdc0c6bdeae9cb96bcce"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiOWFjNjBlMmVjYTk2NGQ3NWMwZTFjMTY2N2IzNTA0ZDZjZjU2NzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b9ac60e2eca964d75c0e1c1667b3504d6cf5676",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4b9ac60e2eca964d75c0e1c1667b3504d6cf5676",
      "tree": {
        "sha": "6fe17382113af36a9303ee226ebfb61d1674b2ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6fe17382113af36a9303ee226ebfb61d1674b2ba"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6fe17382113af36a9303ee226ebfb61d1674b2ba\nparent 71860badbb2f87321bf3fdc0c6bdeae9cb96bcce\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1767025084 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770307944 +0000\n\ninterfaces: create block template via block template cache\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYTBaAAKCRAOOQjzZJiY\niPJeAP4vJoWR9BRzt9h9sZr/rL44UGgQWVEe4ZMmFuE+fWbOdAEA+qYJqzabH/hN\nWuWZbQaMeGbZTJvPZpVUhj7O/IpMcQY=\n=9WyX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71860badbb2f87321bf3fdc0c6bdeae9cb96bcce",
          "sha": "71860badbb2f87321bf3fdc0c6bdeae9cb96bcce",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/71860badbb2f87321bf3fdc0c6bdeae9cb96bcce"
        }
      ],
      "message": "interfaces: create block template via block template cache",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-05T16:12:24Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-12-29T16:18:04Z"
      },
      "sha": "4b9ac60e2eca964d75c0e1c1667b3504d6cf5676"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkwZWFmNjRjYWYzYTZkMmUxMjMwZGVhNjI0MzZkZDZiY2IyMWExYzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "tree": {
        "sha": "ac672e36974818728801829b8a03641ad870c6c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ac672e36974818728801829b8a03641ad870c6c9"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ac672e36974818728801829b8a03641ad870c6c9\nparent 4b9ac60e2eca964d75c0e1c1667b3504d6cf5676\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1758632035 +0200\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1770307945 +0000\n\ntest: add blocktemplatecache fuzz test\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaYTBaQAKCRAOOQjzZJiY\niApFAP4wUY+29wc6uIffn4kz19iaXEMb+trgNJ+tJuQ2oybpnwD/T5xlFLhUiv4X\n4nRGgms8Fs6kssl+KIYTbv7hNHpvFQk=\n=yGQy\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b9ac60e2eca964d75c0e1c1667b3504d6cf5676",
          "sha": "4b9ac60e2eca964d75c0e1c1667b3504d6cf5676",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4b9ac60e2eca964d75c0e1c1667b3504d6cf5676"
        }
      ],
      "message": "test: add blocktemplatecache fuzz test",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-02-05T16:12:25Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-09-23T12:53:55Z"
      },
      "sha": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22564000381,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAVA61J9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22564000381",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "created_at": "2026-02-05T16:24:34Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379497293",
      "pull_request_review_id": 3268268351,
      "id": 2379497293,
      "node_id": "PRRC_kwDOABII586N1D9N",
      "diff_hunk": "@@ -93,6 +93,14 @@ BlockAssembler::BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool\n {\n }\n \n+BlockAssembler::BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool, const Options& options, AllowOversizedBlocks_tag)",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "9ad0c9cc15e2132b0b1c9eb1734060448ccac67f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node/miner: allow generation of oversized templates\" (bd9bed462e251a5d3bd6e376f25060aeba9539d4)\r\n\r\nThis ALLOW_OVERSIZED_BLOCKS tag approach seems reasonable, but not ideal because:\r\n\r\n- It doesn't only allow larger blocks. It also stops enforcing coinbase sigops limits and stops enforcing minimum clamp values.\r\n- It duplicates code between `BlockAssembler::BlockAssembler` constructors.\r\n\r\nI think adding a new `BlockAssembler::Options` `bool allow_oversized_blocks{false}` option instead would be a more direct and extensible approach.\r\n\r\nSeparately (doesn't need to be part of this PR) I also think it would be good to reverse 7392b8b084be14b75536887b7ff216152d0a3307 (#33222), and throw exceptions when values are out of range instead of clamping them. Clamping values seems likely to hide configuration errors that should be fixed and lead to unintended behavior.",
      "created_at": "2025-09-25T15:09:40Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2379497293",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379497293"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472926339",
      "pull_request_review_id": 3268268351,
      "id": 2472926339,
      "node_id": "PRRC_kwDOABII586TZdyD",
      "diff_hunk": "@@ -1825,6 +1826,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     ChainstateManager& chainman = *Assert(node.chainman);\n     auto& kernel_notifications{*Assert(node.notifications)};\n \n+    node.block_template_cache = node::MakeBlockTemplateCache(node.mempool.get(), chainman);\n+    validation_signals.RegisterSharedValidationInterface(node.block_template_cache);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 13,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nNot very important, but would be good to call UnregisterValidationInterface in Shutdown to unregister this. Otherwise, in theory if Init/Shutdown were called multiple times (e.g. in unit tests) there would be a memory leak. `node.block_template_cache` can be handled the same way as `node.fee_estimator` in `Shutdown`.",
      "created_at": "2025-10-29T12:59:05Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472926339",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472926339"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1830,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472932269",
      "pull_request_review_id": 3268268351,
      "id": 2472932269,
      "node_id": "PRRC_kwDOABII586TZfOt",
      "diff_hunk": "@@ -70,6 +71,7 @@ struct NodeContext {\n     std::unique_ptr<CBlockPolicyEstimator> fee_estimator;\n     std::unique_ptr<PeerManager> peerman;\n     std::unique_ptr<ChainstateManager> chainman;\n+    std::shared_ptr<BlockTemplateCache> block_template_cache;",
      "path": "src/node/context.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI think it would probably be better for this to use unique_ptr instead shared_ptr (like fee_estimator and other members), so lifetime of the BlockTemplateCache is more explicit and predictable.",
      "created_at": "2025-10-29T13:01:06Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472932269",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472932269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473041954",
      "pull_request_review_id": 3268268351,
      "id": 2473041954,
      "node_id": "PRRC_kwDOABII586TZ6Ai",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 65,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nIt seems like there are a number of things here making this code more rigid and complicated than it needs to be which aren't explained. It seems like it would be more straightforward to:\r\n\r\n- Make `BlockTemplateCache::GetBlockTemplate` method non-virtual\r\n- Drop `MakeBlockTemplateCache` function, and just give `GetBlockTemplate` class a constructor.\r\n- Drop `BlockTemplateCacheImpl` class and just implement functionality in `BlockTemplateCache` class.\r\n- Drop requirement that users of `BlockTemplateCache` need to deal with `shared_ptr`. Let them use cache objects with more predictable lifetimes.\r\n\r\nI think these changes would make code simpler, PR more straightforward to review and the `BlockTemplateCache` class easier to use and test.\r\n\r\nIf there really is a need for the shared_ptr / virtual requirements, that would be also be ok, but they should be explained somewhere.\r\n\r\n---\r\n\r\nEDIT: I see PR description does provide a rationale: \"`MakeBlockTemplateCache` returns a shared pointer so it can be registered with the validation interface using `RegisterSharedValidationInterface` hence not requiring explicit unregistration.\"\r\n\r\nI think this rationale doesn't really hold though, because unregistration is still needed to prevent memory leaks. Also `RegisterSharedValidationInterface` was really intended for use by the wallet, because wallets can be unloaded at any time and need a way to unregister from events while events are still being sent and avoid race conditions. For the block template cache, it makes more sense to use `RegisterValidationInterface` instead and avoid `shared_ptr` virality and unpredictability.",
      "created_at": "2025-10-29T13:25:44Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473041954",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473041954"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 264,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473203366",
      "pull_request_review_id": 3268268351,
      "id": 2473203366,
      "node_id": "PRRC_kwDOABII586Taham",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const\n+{\n+    auto now = NodeClock::now();\n+    auto elapsed = std::chrono::duration_cast<std::chrono::seconds>(now - m_time_generated);\n+    if (elapsed < std::chrono::seconds::zero()) {\n+        // m_time_generated is in the future; node clock is bumped to the past\n+        // hence no way to check the elapsed time just assume interval elapsed.\n+        return true;\n+    }\n+    return elapsed >= interval;\n+}\n+\n+bool BlockTemplateCacheImpl::Template::OptionsEqual(const BlockAssembler::Options& other) const\n+{\n+    return m_options.use_mempool == other.use_mempool &&",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 90,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould be good to have a comment saying this is intentionally not comparing the `coinbase_output_script` field and why that is safe (assuming it is safe).\r\n\r\nAlso would be good to point out this is intentionally skipping `test_block_validity`.",
      "created_at": "2025-10-29T13:51:22Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473203366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473223014",
      "pull_request_review_id": 3268268351,
      "id": 2473223014,
      "node_id": "PRRC_kwDOABII586TamNm",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const\n+{\n+    auto now = NodeClock::now();\n+    auto elapsed = std::chrono::duration_cast<std::chrono::seconds>(now - m_time_generated);\n+    if (elapsed < std::chrono::seconds::zero()) {\n+        // m_time_generated is in the future; node clock is bumped to the past\n+        // hence no way to check the elapsed time just assume interval elapsed.\n+        return true;\n+    }\n+    return elapsed >= interval;\n+}\n+\n+bool BlockTemplateCacheImpl::Template::OptionsEqual(const BlockAssembler::Options& other) const",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 88,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould seem nice to implement these comparisons in `operator==` helpers or other functions directly attached to BlockCreateOptions and `BlockAssembler::Options` structs. This way if new members are added to the structs, the comparison functions should not get out of date.\r\n\r\nOtherwise it would be good to have comments in the two structs pointing out that this function may need to be updated if new fields are added.\r\n\r\nI think it could also be nice to introduce options-comparing functionality in a separate commit to make this commit simpler.\r\n\r\n\r\n",
      "created_at": "2025-10-29T13:54:23Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473223014",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473223014"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473250518",
      "pull_request_review_id": 3268268351,
      "id": 2473250518,
      "node_id": "PRRC_kwDOABII586Tas7W",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\n`Template` name doesn't seem very descriptive. I'd consider calling it `CachedBlockTemplate` to be unambiguous, and also making it a top level struct instead of an inner struct so it is less entwined with the `BlockTemplateCacheImpl` class, and could be forward declared, accessed from tests, etc.",
      "created_at": "2025-10-29T13:57:51Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473250518",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473250518"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 470,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473275740",
      "pull_request_review_id": 3268268351,
      "id": 2473275740,
      "node_id": "PRRC_kwDOABII586TazFc",
      "diff_hunk": "@@ -24,6 +27,7 @@\n #include <boost/multi_index_container.hpp>\n \n class ArgsManager;\n+class BlockTemplateCache;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 18,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nThis doesn't seem to be right because it is forward declaring a global `::BlockTemplateCache` class not in the `::node` namespace. Probably this should just be dropped.",
      "created_at": "2025-10-29T14:01:38Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473275740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473275740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473282308",
      "pull_request_review_id": 3268268351,
      "id": 2473282308,
      "node_id": "PRRC_kwDOABII586Ta0sE",
      "diff_hunk": "@@ -38,6 +42,8 @@ namespace node {\n class KernelNotifications;\n \n static const bool DEFAULT_PRINT_MODIFIED_FEE = false;\n+static constexpr size_t DEFAULT_CACHE_SIZE{10};",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 26,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\n`DEFAULT_CACHE_SIZE` is a very generic name for a global, maybe `DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE` would be better.",
      "created_at": "2025-10-29T14:02:51Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473282308",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473282308"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473298969",
      "pull_request_review_id": 3268268351,
      "id": 2473298969,
      "node_id": "PRRC_kwDOABII586Ta4wZ",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI'd think cache should be cleared when blocks are disconnected as well as when they are connected. Should there be a `BlockDisconnected` method that also clears the cache?\r\n\r\nAlso this should probably have `if (role == ChainstateRole::BACKGROUND) return;` to work properly when an assumeutxo snapshot is loaded.",
      "created_at": "2025-10-29T14:05:42Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473298969",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473298969"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 461,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473412280",
      "pull_request_review_id": 3268268351,
      "id": 2473412280,
      "node_id": "PRRC_kwDOABII586TbUa4",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 76,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nNothing about this function is really specific to caching templates. I think the both the caching code and the time code could be easier to understand if this was made into a helper function like:\r\n\r\n```c++\r\n// Return true if current time is greater or equal to `time + interval`, or if\r\n// `time` is greater than the current time (indicating clock moved backward).\r\nstatic inline bool IntervalElapsed(NodeClock::time_point time, std::chrono::seconds interval)\r\n{\r\n    const NodeClock::time_point now = NodeClock::now();\r\n    return now < time || (now - time) >= interval;\r\n}\r\n```",
      "created_at": "2025-10-29T14:22:21Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473412280",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473412280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 503,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473491581",
      "pull_request_review_id": 3268268351,
      "id": 2473491581,
      "node_id": "PRRC_kwDOABII586Tbnx9",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 59,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nMight be good to say if that if interval is 0 a new template is always created.",
      "created_at": "2025-10-29T14:35:01Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473491581",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473491581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 184,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473499003",
      "pull_request_review_id": 3268268351,
      "id": 2473499003,
      "node_id": "PRRC_kwDOABII586Tbpl7",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 58,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI think s/does not exceed/is less than/",
      "created_at": "2025-10-29T14:36:13Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473499003",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473499003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 256,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 257,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473636918",
      "pull_request_review_id": 3268268351,
      "id": 2473636918,
      "node_id": "PRRC_kwDOABII586TcLQ2",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 54,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nIt probably makes more sense for this to contain a `Chainstate` reference than a `ChainstateManager` reference, since code here is only calling `m_chainman.ActiveChainstate` on it anyway. Also logically, it makes more sense to have a per-chainstate cache, instead of a cache over multiple chainstates.",
      "created_at": "2025-10-29T14:59:26Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473636918",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473636918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473664992",
      "pull_request_review_id": 3268268351,
      "id": 2473664992,
      "node_id": "PRRC_kwDOABII586TcSHg",
      "diff_hunk": "@@ -520,14 +623,9 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\n          * We'll also create a new template if the tip changed during this iteration.\n          */\n         if (options.fee_threshold < MAX_MONEY || tip_changed) {\n-            auto new_tmpl{BlockAssembler{\n-                chainman.ActiveChainstate(),\n-                mempool,\n-                assemble_options}\n-                              .CreateNewBlock()};\n-\n+            auto new_tmpl{block_template_cache->GetBlockTemplate(assemble_options, std::chrono::seconds{0}).first};",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 153,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould be good to note that `0` interval means this will always generate a new template, not use a cached one.\r\n\r\nIt could make sense to add a `max_age` or similar option to BlockCreateOptions so this is configurable by the caller.",
      "created_at": "2025-10-29T15:04:10Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473664992",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473664992"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 626,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473682869",
      "pull_request_review_id": 3268268351,
      "id": 2473682869,
      "node_id": "PRRC_kwDOABII586TcWe1",
      "diff_hunk": "@@ -520,14 +623,9 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\n          * We'll also create a new template if the tip changed during this iteration.\n          */\n         if (options.fee_threshold < MAX_MONEY || tip_changed) {\n-            auto new_tmpl{BlockAssembler{\n-                chainman.ActiveChainstate(),\n-                mempool,\n-                assemble_options}\n-                              .CreateNewBlock()};\n-\n+            auto new_tmpl{block_template_cache->GetBlockTemplate(assemble_options, std::chrono::seconds{0}).first};\n             // If the tip changed, return the new template regardless of its fees.\n-            if (tip_changed) return new_tmpl;\n+            if (tip_changed) return std::make_unique<CBlockTemplate>(*new_tmpl);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 156,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nIs this temporary? Since `GetBlockTemplate` returns a `shared_ptr`, I think it would make sense for `WaitAndCreateNewBlock` to return a `shared_ptr` as well to avoid these copies.",
      "created_at": "2025-10-29T15:07:12Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473682869",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473682869"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 628,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473714111",
      "pull_request_review_id": 3268268351,
      "id": 2473714111,
      "node_id": "PRRC_kwDOABII586TceG_",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI think this type should be `std::shared_ptr<const CBlockTemplate>` (adding const) here and other places to avoid outside callers mutating the template and potentially messing up the cache. Or if adding const isn't possible for some reason, it would be good to have a comment here explaining that.\r\n\r\nIt might also be handy to define a type alias like `using BlockTemplateRef = std::shared_ptr<const CBlockTemplate>` similar to `CTransactionRef`.\r\n\r\n",
      "created_at": "2025-10-29T15:12:11Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473714111",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473714111"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 473,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473809097",
      "pull_request_review_id": 3268268351,
      "id": 2473809097,
      "node_id": "PRRC_kwDOABII586Tc1TJ",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(\n+        const BlockAssembler::Options& options,\n+        std::chrono::seconds interval",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 67,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould it make sense for this to use milliseconds or another unit instead of seconds so callers could have more granularity?\r\n\r\nAlso as suggested elsewhere I think it could make sense for interval to be a `BlockCreateOptions` field (called `max_age` or similar) so existing interfaces would not need to be modified to start taking advantage of template caching.",
      "created_at": "2025-10-29T15:27:55Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473809097",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473809097"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2474149528",
      "pull_request_review_id": 3268268351,
      "id": 2474149528,
      "node_id": "PRRC_kwDOABII586TeIaY",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const\n+{\n+    auto now = NodeClock::now();\n+    auto elapsed = std::chrono::duration_cast<std::chrono::seconds>(now - m_time_generated);\n+    if (elapsed < std::chrono::seconds::zero()) {\n+        // m_time_generated is in the future; node clock is bumped to the past\n+        // hence no way to check the elapsed time just assume interval elapsed.\n+        return true;\n+    }\n+    return elapsed >= interval;\n+}\n+\n+bool BlockTemplateCacheImpl::Template::OptionsEqual(const BlockAssembler::Options& other) const\n+{\n+    return m_options.use_mempool == other.use_mempool &&\n+           m_options.block_reserved_weight == other.block_reserved_weight &&\n+           m_options.coinbase_output_max_additional_sigops == other.coinbase_output_max_additional_sigops &&\n+           m_options.nBlockMaxWeight == other.nBlockMaxWeight &&\n+           m_options.blockMinFeeRate == other.blockMinFeeRate;\n+}\n+\n+std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> BlockTemplateCacheImpl::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    BlockAssembler assembler{m_chainman.ActiveChainstate(), m_mempool, options, BlockAssembler::ALLOW_OVERSIZED_BLOCKS};\n+    Template t;\n+    t.m_block_template = assembler.CreateNewBlock();\n+    t.m_options = options;\n+    t.m_time_generated = NodeClock::now();\n+    Assume(m_block_templates.size() <= m_cache_size);\n+    m_block_templates.emplace_back(t);\n+    if (m_block_templates.size() > m_cache_size) m_block_templates.pop_front();\n+    return std::make_pair(t.m_block_template, t.m_time_generated);\n+}\n+\n+std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> BlockTemplateCacheImpl::GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++){\n+        if (it->OptionsEqual(options) && !it->IntervalElapsed(interval)) {\n+            if (options.test_block_validity && !it->m_options.test_block_validity) {\n+                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->m_block_template->block,\n+                                    /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\n+                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n+                }\n+                it->m_options.test_block_validity = true;\n+            }",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 121,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nCould be nice to dedup this part of the code with CreateNewBlock\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -38,6 +38,16 @@\r\n \r\n namespace node {\r\n \r\n+static void EnforceValidity(Chainstate& chainstate, const BlockAssembler::Options& options, const CBlock& block) EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\r\n+{\r\n+    AssertLockHeld(::cs_main);\r\n+    if (options.test_block_validity) {\r\n+       if (BlockValidationState state{TestBlockValidity(chainstate, block, /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\r\n+           throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\r\n+       }\r\n+    }\r\n+}\r\n+\r\n int64_t GetMinimumTime(const CBlockIndex* pindexPrev, const int64_t difficulty_adjustment_interval)\r\n {\r\n     int64_t min_time{pindexPrev->GetMedianTimePast() + 1};\r\n@@ -191,12 +201,8 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\r\n     UpdateTime(pblock, chainparams.GetConsensus(), pindexPrev);\r\n     pblock->nBits          = GetNextWorkRequired(pindexPrev, pblock, chainparams.GetConsensus());\r\n     pblock->nNonce         = 0;\r\n+    EnforceValidity(m_chainstate, m_options, *pblock);\r\n \r\n-    if (m_options.test_block_validity) {\r\n-        if (BlockValidationState state{TestBlockValidity(m_chainstate, *pblock, /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\r\n-            throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\r\n-        }\r\n-    }\r\n     const auto time_2{SteadyClock::now()};\r\n \r\n     LogDebug(BCLog::BENCH, \"CreateNewBlock() packages: %.2fms (%d packages, %d updated descendants), validity: %.2fms (total %.2fms)\\n\",\r\n@@ -540,11 +546,8 @@ std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> BlockTemplateC\r\n     for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++){\r\n         if (it->OptionsEqual(options) && !it->IntervalElapsed(interval)) {\r\n             if (options.test_block_validity && !it->m_options.test_block_validity) {\r\n-                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->m_block_template->block,\r\n-                                    /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\r\n-                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\r\n-                }\r\n                 it->m_options.test_block_validity = true;\r\n+                EnforceValidity(m_chainman.ActiveChainstate(), it->m_options, it->m_block_template->block);\r\n             }\r\n             return std::make_pair(it->m_block_template, it->m_time_generated);\r\n         }\r\n```\r\n</p>\r\n</details>",
      "created_at": "2025-10-29T16:20:34Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2474149528",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2474149528"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 542,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 548,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482188424",
      "pull_request_review_id": 3405331910,
      "id": 2482188424,
      "node_id": "PRRC_kwDOABII586T8zCI",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": 2473250518,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is gone now.",
      "created_at": "2025-10-31T17:25:21Z",
      "updated_at": "2025-10-31T17:25:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2482188424",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482188424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 470,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482211458",
      "pull_request_review_id": 3405365359,
      "id": 2482211458,
      "node_id": "PRRC_kwDOABII586T84qC",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(\n+        const BlockAssembler::Options& options,\n+        std::chrono::seconds interval",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 67,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": 2473809097,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes this will be good for precision but In the current iteration of the PR I switched to using the exact block assembly time as save in the block `nTime` which is in seconds.\r\n\r\nHowever I took the other suggestion of changing the name to maximum age.",
      "created_at": "2025-10-31T17:35:59Z",
      "updated_at": "2025-10-31T17:35:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2482211458",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482211458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486576551",
      "pull_request_review_id": 3411154210,
      "id": 2486576551,
      "node_id": "PRRC_kwDOABII586UNiWn",
      "diff_hunk": "@@ -912,20 +911,21 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nMaybe use `auto block_copy = std::make_shared<const CBlock>(m_block_template->block);` here to avoid needing to make a shared_ptr and a second copy of the block below. ",
      "created_at": "2025-11-03T13:56:18Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486576551",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486576551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486593971",
      "pull_request_review_id": 3411154210,
      "id": 2486593971,
      "node_id": "PRRC_kwDOABII586UNmmz",
      "diff_hunk": "@@ -176,6 +186,27 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        // By default always return a fresh template.\n+        std::chrono::seconds maximum_template_age{0};\n+        // Checks whether block assembler options are similar.\n+        //\n+        // Note: We intentionally do not compare the coinbase output script.\n+        // Itâ€™s acceptable for them to differ because, as long as the reserved\n+        // weight and additional sigops for the coinbase match, we can assume\n+        // that the cumulative weight and sigops (even if the coinbase output script differs)\n+        // remain within acceptable limits.\n+        //\n+        // We also donâ€™t compare whether block validity has been checked,\n+        // since validity can always be tested again.\n+        bool operator==(const Options& other) const",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 51,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nI know I suggested `operator==` previously but since this is not checking direct equality maybe it is better to call this method something like `CanReuse` or `ReusableTemplate`. Just an idea. Keeping operator== or using any method name seems ok.\r\n\r\nWould also suggest moving detailed comments about specific fields inisde the method implementation. Could just have a general comment like \"intentionally omits some fields from comparison\" in function documentation.",
      "created_at": "2025-11-03T14:01:54Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486593971",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486593971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486606258",
      "pull_request_review_id": 3411154210,
      "id": 2486606258,
      "node_id": "PRRC_kwDOABII586UNpmy",
      "diff_hunk": "@@ -220,6 +251,62 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+// Return true if current time is greater or equal to `prev_time + interval`, or if\n+// `prev_time` is greater than the current time (indicating clock moved backward).\n+static inline bool IntervalElapsed(const uint32_t& prev_time, const uint32_t& interval)\n+{\n+    const uint32_t now = TicksSinceEpoch<std::chrono::seconds>(NodeClock::now());\n+    return now < prev_time || (now - prev_time) >= interval;\n+}\n+\n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - If the interval is 0 we always create a new template and insert to the cache.\n+ * - After an insertion to the cache, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected and disconnected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+private:\n+    std::deque<std::pair<BlockAssembler::Options, BlockTemplateRef>> m_block_templates;\n+    CTxMemPool* m_mempool;\n+    Chainstate& m_chainstate;\n+    size_t m_block_template_cache_size;\n+    mutable Mutex m_mutex;\n+\n+    BlockTemplateRef CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+public:\n+    BlockTemplateCache(CTxMemPool* mempool, Chainstate& chainstate, size_t block_template_block_template_cache_size = DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 103,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nShould mempool be a reference rather if this class can't really function when it is null?",
      "created_at": "2025-11-03T14:06:13Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486606258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486606258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 290,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486621134",
      "pull_request_review_id": 3411154210,
      "id": 2486621134,
      "node_id": "PRRC_kwDOABII586UNtPO",
      "diff_hunk": "@@ -220,6 +251,62 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+// Return true if current time is greater or equal to `prev_time + interval`, or if\n+// `prev_time` is greater than the current time (indicating clock moved backward).\n+static inline bool IntervalElapsed(const uint32_t& prev_time, const uint32_t& interval)",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 69,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nProbably should use `uint32_t` instead of `const uint32_t&`. Const reference parameter are usually only preferred when parameter types are much bigger.",
      "created_at": "2025-11-03T14:10:59Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486621134",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486621134"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486625191",
      "pull_request_review_id": 3411154210,
      "id": 2486625191,
      "node_id": "PRRC_kwDOABII586UNuOn",
      "diff_hunk": "@@ -176,6 +186,27 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        // By default always return a fresh template.\n+        std::chrono::seconds maximum_template_age{0};",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nMaybe s/maximum_/max_/",
      "created_at": "2025-11-03T14:12:22Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486625191",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486625191"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 190,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490867264",
      "pull_request_review_id": 3416949149,
      "id": 2490867264,
      "node_id": "PRRC_kwDOABII586Ud55A",
      "diff_hunk": "@@ -0,0 +1,135 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <consensus/amount.h>\n+#include <kernel/chain.h>\n+#include <node/miner.h>\n+#include <policy/policy.h>\n+#include <policy/feerate.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/random.h>\n+#include <test/util/txmempool.h>\n+#include <test/fuzz/util/mempool.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validationinterface.h>\n+\n+#include <optional>\n+\n+namespace {\n+const ChainTestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_block_template_cache()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+}\n+\n+void PopulateRandTransactionsToMempool(FuzzedDataProvider& fuzzed_data_provider, CTxMemPool* mempool, int total_weight)\n+{\n+    // Populate mempool with varying transaction load to test cache under different conditions\n+    while (total_weight > 0 && fuzzed_data_provider.remaining_bytes() > 0) {\n+        const std::optional<CMutableTransaction> mutable_tx = ConsumeDeserializable<CMutableTransaction>(fuzzed_data_provider, TX_WITH_WITNESS);\n+        if (!mutable_tx) break;\n+        auto tx = MakeTransactionRef(*mutable_tx);\n+        CTxMemPoolEntry mempool_entry{ConsumeTxMemPoolEntry(fuzzed_data_provider, *tx)};\n+        const Txid txid = tx->GetHash();\n+        if (mempool->exists(txid)) continue;\n+        AddToMempool(*mempool, mempool_entry);\n+        const int32_t tx_weight = mempool_entry.GetTxWeight();\n+        if (tx_weight > total_weight) break;\n+        total_weight -= tx_weight;\n+    }\n+}\n+\n+FUZZ_TARGET(block_template_cache, .init = initialize_block_template_cache)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    const auto& node = g_setup->m_node;\n+    auto& template_cache = node.block_template_cache;\n+    SeedRandomStateForTest(SeedRand::ZEROS);\n+    SetMockTime(WITH_LOCK(g_setup->m_node.chainman->GetMutex(),\n+                          return g_setup->m_node.chainman->ActiveTip()->Time()));\n+\n+    int32_t max_mempool_weight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(0, DEFAULT_BLOCK_MAX_WEIGHT * 10);\n+    PopulateRandTransactionsToMempool(fuzzed_data_provider, node.mempool.get(), max_mempool_weight);\n+    auto num_iterations = fuzzed_data_provider.ConsumeIntegralInRange<unsigned int>(1, 10);\n+    LIMITED_WHILE (fuzzed_data_provider.remaining_bytes(), num_iterations) {\n+        // Test cache hit/miss behavior based on time intervals\n+        node::BlockAssembler::Options base_options;\n+        base_options.test_block_validity = false;\n+        auto first_template = template_cache->GetBlockTemplate(base_options);\n+        auto time_advance = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(1, 1000);\n+        auto cache_interval = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(1, 1000);\n+        if (cache_interval == time_advance) { // Nudge the mock time slightly to prevent truncation failures\n+            SetMockTime(GetMockTime() + std::chrono::seconds{time_advance + 1});\n+        } else {\n+            SetMockTime(GetMockTime() + std::chrono::seconds{time_advance});\n+        }\n+\n+        base_options.maximum_template_age = std::chrono::seconds{cache_interval};\n+        auto second_template = template_cache->GetBlockTemplate(base_options);\n+\n+        // Cache should return same template if cache interval strictly exceeds elapsed time\n+        if (cache_interval > time_advance) { // account for possible truncation.\n+            assert(second_template->block.nTime == first_template->block.nTime);\n+        } else { // Cache should create a new template when cache interval is less than or equal to elapsed time\n+            assert(second_template->block.nTime > first_template->block.nTime);\n+        }\n+\n+        // Test cache differentiation with modified block assembly options\n+        node::BlockAssembler::Options modified_options;\n+        modified_options.test_block_validity = false;\n+        auto max_reserved_weight = DEFAULT_BLOCK_RESERVED_WEIGHT - 1;\n+        modified_options.block_reserved_weight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(\n+            MINIMUM_BLOCK_RESERVED_WEIGHT, max_reserved_weight);\n+\n+        CAmount fee_paid = fuzzed_data_provider.ConsumeIntegralInRange<CAmount>(0, COIN);\n+        int32_t tx_size = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(1, MAX_STANDARD_TX_WEIGHT / WITNESS_SCALE_FACTOR);\n+        modified_options.blockMinFeeRate = CFeeRate(fee_paid, tx_size);\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            modified_options.nBlockMaxWeight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(\n+                modified_options.block_reserved_weight, DEFAULT_BLOCK_MAX_WEIGHT);\n+        }\n+\n+        auto additional_time_advance = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(10, 100);\n+        SetMockTime(GetMockTime() + std::chrono::seconds{additional_time_advance});\n+\n+        // Different options should produce newer template despite long cache interval\n+        modified_options.maximum_template_age = std::chrono::seconds::max();\n+        auto third_template = template_cache->GetBlockTemplate(modified_options);\n+        assert(third_template->block.nTime > second_template->block.nTime);\n+\n+        // Same original options must hit the second template in the cache\n+        base_options.maximum_template_age = std::chrono::seconds::max();",
      "path": "src/test/fuzz/blocktemplatecache.cpp",
      "position": 1,
      "original_position": 110,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "084bfbc1ec7f8f64f54d231bb641285622311b59: I think the CI failure is related to this `std::chrono::seconds::max()` (long long) because the `maximum_template_age` is used in `IntervalElapsed`as the interval which is a `uint32_t`.",
      "created_at": "2025-11-04T15:02:45Z",
      "updated_at": "2025-11-04T15:02:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2490867264",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490867264"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2491199977",
      "pull_request_review_id": 3417441597,
      "id": 2491199977,
      "node_id": "PRRC_kwDOABII586UfLHp",
      "diff_hunk": "@@ -0,0 +1,135 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <consensus/amount.h>\n+#include <kernel/chain.h>\n+#include <node/miner.h>\n+#include <policy/policy.h>\n+#include <policy/feerate.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/random.h>\n+#include <test/util/txmempool.h>\n+#include <test/fuzz/util/mempool.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validationinterface.h>\n+\n+#include <optional>\n+\n+namespace {\n+const ChainTestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_block_template_cache()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+}\n+\n+void PopulateRandTransactionsToMempool(FuzzedDataProvider& fuzzed_data_provider, CTxMemPool* mempool, int total_weight)\n+{\n+    // Populate mempool with varying transaction load to test cache under different conditions\n+    while (total_weight > 0 && fuzzed_data_provider.remaining_bytes() > 0) {\n+        const std::optional<CMutableTransaction> mutable_tx = ConsumeDeserializable<CMutableTransaction>(fuzzed_data_provider, TX_WITH_WITNESS);\n+        if (!mutable_tx) break;\n+        auto tx = MakeTransactionRef(*mutable_tx);\n+        CTxMemPoolEntry mempool_entry{ConsumeTxMemPoolEntry(fuzzed_data_provider, *tx)};\n+        const Txid txid = tx->GetHash();\n+        if (mempool->exists(txid)) continue;\n+        AddToMempool(*mempool, mempool_entry);\n+        const int32_t tx_weight = mempool_entry.GetTxWeight();\n+        if (tx_weight > total_weight) break;\n+        total_weight -= tx_weight;\n+    }\n+}\n+\n+FUZZ_TARGET(block_template_cache, .init = initialize_block_template_cache)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    const auto& node = g_setup->m_node;\n+    auto& template_cache = node.block_template_cache;\n+    SeedRandomStateForTest(SeedRand::ZEROS);\n+    SetMockTime(WITH_LOCK(g_setup->m_node.chainman->GetMutex(),\n+                          return g_setup->m_node.chainman->ActiveTip()->Time()));\n+\n+    int32_t max_mempool_weight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(0, DEFAULT_BLOCK_MAX_WEIGHT * 10);\n+    PopulateRandTransactionsToMempool(fuzzed_data_provider, node.mempool.get(), max_mempool_weight);\n+    auto num_iterations = fuzzed_data_provider.ConsumeIntegralInRange<unsigned int>(1, 10);\n+    LIMITED_WHILE (fuzzed_data_provider.remaining_bytes(), num_iterations) {",
      "path": "src/test/fuzz/blocktemplatecache.cpp",
      "position": 1,
      "original_position": 63,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "084bfbc1ec7f8f64f54d231bb641285622311b59: nit: you can get rid of `num_iterations`.\r\n```suggestion\r\n    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10) {\r\n```",
      "created_at": "2025-11-04T16:27:06Z",
      "updated_at": "2025-11-04T16:27:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2491199977",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2491199977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495460002",
      "pull_request_review_id": 3423430033,
      "id": 2495460002,
      "node_id": "PRRC_kwDOABII586UvbKi",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(\n+        const BlockAssembler::Options& options,\n+        std::chrono::seconds interval",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 67,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": 2473809097,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is fixed now",
      "created_at": "2025-11-05T17:18:26Z",
      "updated_at": "2025-11-05T17:18:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2495460002",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495460002"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495465245",
      "pull_request_review_id": 3423437618,
      "id": 2495465245,
      "node_id": "PRRC_kwDOABII586Uvccd",
      "diff_hunk": "@@ -912,20 +911,21 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": 2486576551,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is not possible I think because we need to pass a non const block further down.\r\nI instead avoid the second copy by moving.\r\nLet me know what you think",
      "created_at": "2025-11-05T17:19:52Z",
      "updated_at": "2025-11-05T17:19:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2495465245",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495465245"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514061828",
      "pull_request_review_id": 3447844157,
      "id": 2514061828,
      "node_id": "PRRC_kwDOABII586V2YoE",
      "diff_hunk": "@@ -184,6 +184,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n             throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n         }\n     }\n+    pblocktemplate->m_creation_time = NodeClock::now();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "2ef43703998f679fc752a77727dd5c0824f6a90b",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 2ef43703998f679fc752a77727dd5c0824f6a90b _miner: add block creation time point to `CBlockTemplate`_: the most relevant anchor for creation time is what was in the mempool at that moment. So I would suggest moving this above `addPackageTxs`.\r\n\r\nSince `cs_main` is locked throughout this function, this currently doesn't make a difference, but if we ever make locks more granular I could imagine taking a lock on just the mempool and setting the template timestamp at that exact moment.\r\n\r\n(Something like `TestBlockValidity` shouldn't have to block `cs_main`, although we _do_ need to block tip updates between the moment we start adding transactions to the template and when we finish verification. Although even then, block validation could abort with failure if the tip updates during this.)\r\n\r\n\r\nNit: could drop \"block\" from commit message, so it's not confused with `nTime`.",
      "created_at": "2025-11-11T12:29:56Z",
      "updated_at": "2025-11-11T13:02:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514061828",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514061828"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 219,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514084547",
      "pull_request_review_id": 3447844157,
      "id": 2514084547,
      "node_id": "PRRC_kwDOABII586V2eLD",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf _miner: add `SimilarOptions` function_: both these comments should be in the header, as they explain both what this function does and why it's useful.\r\n\r\nMaybe call it `ShareableOptions`, described as:\r\n\r\n> Limit comparison to assembly options that impact the final block (without dummy coinbase scriptPubKey, with solution). Ignore options that can safely be shared between different callers.",
      "created_at": "2025-11-11T12:36:32Z",
      "updated_at": "2025-11-11T13:02:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514084547",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514084547"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514110184",
      "pull_request_review_id": 3447844157,
      "id": 2514110184,
      "node_id": "PRRC_kwDOABII586V2kbo",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.\n+    return a.use_mempool == b.use_mempool &&\n+            a.block_reserved_weight == b.block_reserved_weight &&\n+            a.blockMinFeeRate == b.blockMinFeeRate &&\n+            a.coinbase_output_max_additional_sigops == b.coinbase_output_max_additional_sigops &&\n+            a.nBlockMaxWeight == b.nBlockMaxWeight;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf _miner: add `SimilarOptions` function_: this seems brittle when we add options later.\r\n\r\nPerhaps you can copy `a`, then set the shareable properties of `a_copy` to that of `b` and then do a regular comparison.",
      "created_at": "2025-11-11T12:44:49Z",
      "updated_at": "2025-11-11T13:02:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514110184",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514110184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514193806",
      "pull_request_review_id": 3448014534,
      "id": 2514193806,
      "node_id": "PRRC_kwDOABII586V242O",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 9500dca555f7394cd3e51821312309d5b9633539 _interfaces: create block template via block template cache_: how does this interact with #33745? The third commit there adds a comment and test that `submitSolution()` intentionally modifies the block in place, so that the client can call `getBlock()` afterwards.\r\n\r\nI don't mind changing that behavior, but then I'll need to revive #33374 or change `submitSolution()` to optionally return the full block.",
      "created_at": "2025-11-11T13:13:54Z",
      "updated_at": "2025-11-11T13:13:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514193806",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514193806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514393534",
      "pull_request_review_id": 3448268496,
      "id": 2514393534,
      "node_id": "PRRC_kwDOABII586V3pm-",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": 2514193806,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "No need to revive https://github.com/bitcoin/bitcoin/pull/33374. I saw it yesterday and will push an update here soon.\r\nWe already made a copy of the block here; we should copy the whole template after WaitAndCreateNewBlock returns and allow modifications as mentioned in #33374. It is a cheap copy.\r\n",
      "created_at": "2025-11-11T14:12:26Z",
      "updated_at": "2025-11-11T14:16:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514393534",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514393534"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514589535",
      "pull_request_review_id": 3448522732,
      "id": 2514589535,
      "node_id": "PRRC_kwDOABII586V4Zdf",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": 2514193806,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In other words, each newly requested temple is _copied_ from the cache? Sounds good.",
      "created_at": "2025-11-11T15:06:51Z",
      "updated_at": "2025-11-11T15:06:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514589535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514589535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514611258",
      "pull_request_review_id": 3448554651,
      "id": 2514611258,
      "node_id": "PRRC_kwDOABII586V4ew6",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": 2514193806,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If you want to modify the template, yes. But for things like sendtemplate, fee estimation, that just want to retrieve data from the template they don't need a copy.",
      "created_at": "2025-11-11T15:13:19Z",
      "updated_at": "2025-11-11T15:13:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514611258",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514611258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687274989",
      "pull_request_review_id": 3656864117,
      "id": 2687274989,
      "node_id": "PRRC_kwDOABII586gLI_t",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": 2514084547,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken, thanks",
      "created_at": "2026-01-13T16:56:48Z",
      "updated_at": "2026-01-13T16:56:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2687274989",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687274989"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687278950",
      "pull_request_review_id": 3656868729,
      "id": 2687278950,
      "node_id": "PRRC_kwDOABII586gLJ9m",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.\n+    return a.use_mempool == b.use_mempool &&\n+            a.block_reserved_weight == b.block_reserved_weight &&\n+            a.blockMinFeeRate == b.blockMinFeeRate &&\n+            a.coinbase_output_max_additional_sigops == b.coinbase_output_max_additional_sigops &&\n+            a.nBlockMaxWeight == b.nBlockMaxWeight;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": 2514110184,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I did not take this because there is no regular comparison operator defined, and I prefer to be explicit here.",
      "created_at": "2026-01-13T16:57:50Z",
      "updated_at": "2026-01-13T16:57:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2687278950",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687278950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687316542",
      "pull_request_review_id": 3656915413,
      "id": 2687316542,
      "node_id": "PRRC_kwDOABII586gLTI-",
      "diff_hunk": "@@ -184,6 +184,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n             throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n         }\n     }\n+    pblocktemplate->m_creation_time = NodeClock::now();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "2ef43703998f679fc752a77727dd5c0824f6a90b",
      "in_reply_to_id": 2514061828,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I've been thinking about this for a bit; and would advocate for more granular and `TestBlockValidity` no longer requires holding the lock.\r\nIt's going to be beneficial  not just here https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2627860099\r\n\r\nThis seems to me outside the scope of this PR, since the current locking guarantees equivalence even after the suggestion. leaving as is for now thanks.",
      "created_at": "2026-01-13T17:08:04Z",
      "updated_at": "2026-01-13T17:08:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2687316542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687316542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 219,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694390889",
      "pull_request_review_id": 3665634839,
      "id": 2694390889,
      "node_id": "PRRC_kwDOABII586gmSRp",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 7,
      "commit_id": "107283802e77bb75a621943fb05729914628681c",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 107283802e77bb75a621943fb05729914628681c _miner: add `ShareableOptions` function_: what do you mean by \"with solution\"?",
      "created_at": "2026-01-15T13:28:23Z",
      "updated_at": "2026-01-15T13:44:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2694390889",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694390889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694410392",
      "pull_request_review_id": 3665634839,
      "id": 2694410392,
      "node_id": "PRRC_kwDOABII586gmXCY",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.\n+ */\n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 9,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 107283802e77bb75a621943fb05729914628681c _miner: add `ShareableOptions` function_: the current same suggests that it's taking both options and returning the shareable ones, but it only returns a bool.\n\nSome other names that might make the intention more clear:\n- `AreOptionsEquivalent()`\n- `HasDifferentOption()` (reversing the check)\n- `HasEquivalentTemplateOptions()`\n\n(none of these are great though)",
      "created_at": "2026-01-15T13:33:39Z",
      "updated_at": "2026-01-15T13:44:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2694410392",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694410392"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694422460",
      "pull_request_review_id": 3665634839,
      "id": 2694422460,
      "node_id": "PRRC_kwDOABII586gmZ-8",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 107283802e77bb75a621943fb05729914628681c _miner: add `ShareableOptions` function_: I think you can replace the above with just:\n\n```cpp\n// The dummy coinbase output script is not compared.\n```",
      "created_at": "2026-01-15T13:36:59Z",
      "updated_at": "2026-01-15T13:44:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2694422460",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694422460"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698797899",
      "pull_request_review_id": 3671218954,
      "id": 2698797899,
      "node_id": "PRRC_kwDOABII586g3GNL",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 7,
      "commit_id": "107283802e77bb75a621943fb05729914628681c",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694390889,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You are right, what does solution mean here?\r\n\r\nfwiw this is taken from your suggestion https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514084547, reverted.",
      "created_at": "2026-01-16T14:46:10Z",
      "updated_at": "2026-01-16T14:46:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2698797899",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698797899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698813665",
      "pull_request_review_id": 3671237122,
      "id": 2698813665,
      "node_id": "PRRC_kwDOABII586g3KDh",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.\n+ */\n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 9,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694410392,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think this is getting bikesheddy because this is also your suggestion that i take here https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514084547\r\n\r\nI opt for `shareableOptions` because any block template generated by the two block creation options can be shared between clients who want a block template with either of the options.\r\nI will leave it as is and take a better suggestion.\r\nI added a comment to be clearer.",
      "created_at": "2026-01-16T14:50:39Z",
      "updated_at": "2026-01-16T14:50:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2698813665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698813665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2699119184",
      "pull_request_review_id": 3671631700,
      "id": 2699119184,
      "node_id": "PRRC_kwDOABII586g4UpQ",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694422460,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why should we delete it?\r\nIâ€™d rather be explicit here and explain why we are skipping some options; I consider this type of comment to be very useful, as it explains the rationale for some logic.\r\nA better solution, as we discussed IRL, is to categorise the options into those that are safe to ignore during comparison and those that are consequential, as a struct that `BlockAssembler::Options` will derive from, see https://github.com/ismaelsadeeq/bitcoin/commit/650e9cf85d6680c37f3805bdfb4291ea9517226d for an attempt . This would be less brittle; however, it would increase the scope of the PR a bit.\r\nLet me know what you think",
      "created_at": "2026-01-16T16:11:38Z",
      "updated_at": "2026-01-16T16:11:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2699119184",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2699119184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2712527147",
      "pull_request_review_id": 3687194133,
      "id": 2712527147,
      "node_id": "PRRC_kwDOABII586hreEr",
      "diff_hunk": "@@ -55,6 +55,7 @@ struct CBlockTemplate\n      * miner code.\n      */\n     CoinbaseTx m_coinbase_tx;\n+    NodeClock::time_point m_creation_time;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "original_commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: add block creation time point to `CBlockTemplate`\" (e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09)\n\nWould be helpful to have a code comment saying what this variable is used for. Also wondering if it should use steady_clock instead of system_clock. E.g. it might be bad if a clock change caused code to prefer older templates.",
      "created_at": "2026-01-21T13:14:16Z",
      "updated_at": "2026-01-21T14:11:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2712527147",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2712527147"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2712634231",
      "pull_request_review_id": 3687194133,
      "id": 2712634231,
      "node_id": "PRRC_kwDOABII586hr4N3",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694422460,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2699119184\r\n\r\n> Why should we delete it?\r\n\r\nApparently I asked for this comment previously https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366, and I do think some comment here is useful because to me it's not obvious which options make templates shareable or unshareable.\r\n\r\nLike I'm still not sure why it's ok for GetBlockTemplate to return a template with a different coinbase output script than was requested. The current GetBlockTemplate documentation says a \"cached template exists with identical options\" is returned, but this is only checking similar options not identical options. It would be good to understand more and hopefully make this clearer",
      "created_at": "2026-01-21T13:42:34Z",
      "updated_at": "2026-01-21T14:11:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2712634231",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2712634231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721026334",
      "pull_request_review_id": 3697287614,
      "id": 2721026334,
      "node_id": "PRRC_kwDOABII586iL5Ee",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694422460,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> why it's ok for GetBlockTemplate to return a template with a different coinbase output script than was requested\r\n\r\nOnly (some) tests actually use the coinbase output script. Actual miners don't use it:\r\n\r\n1. the `getblocktemplate` RPC doesn't return it\r\n2. the new `getCoinbase()` since #33819 also doesn't return it (and previously `sv2-tp` would ignore it and not pass it downstream)\r\n\r\nThe tests that do use it can probably be modified to stop doing that, if the new caching mechanism breaks them. That might involve re-generating test blocks, which is tedious, so hopefully we don't need to for now.",
      "created_at": "2026-01-23T12:34:49Z",
      "updated_at": "2026-01-23T12:39:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2721026334",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721026334"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721117304",
      "pull_request_review_id": 3697383725,
      "id": 2721117304,
      "node_id": "PRRC_kwDOABII586iMPR4",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694422460,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe add:\r\n\r\n```diff\r\ndiff --git a/src/test/miner_tests.cpp b/src/test/miner_tests.cpp\r\nindex 6e384efa05..2152ee4ebd 100644\r\n--- a/src/test/miner_tests.cpp\r\n+++ b/src/test/miner_tests.cpp\r\n@@ -120,6 +120,9 @@ void MinerTestingSetup::TestPackageSelection(const CScript& scriptPubKey, const\r\n     auto mining{MakeMining()};\r\n     BlockAssembler::Options options;\r\n     options.coinbase_output_script = scriptPubKey;\r\n+    // BlockTemplateCache does not key on coinbase_output_script, so\r\n+    // explicitly opt-out\r\n+    options.max_template_age = MillisecondsDouble{0};\r\n\r\n     LOCK(tx_mempool.cs);\r\n     BOOST_CHECK(tx_mempool.size() == 0);\r\n@@ -338,6 +341,7 @@ void MinerTestingSetup::TestBasicMining(const CScript& scriptPubKey, const std::\r\n\r\n     BlockAssembler::Options options;\r\n     options.coinbase_output_script = scriptPubKey;\r\n+    options.max_template_age = MillisecondsDouble{0};\r\n\r\n     {\r\n         CTxMemPool& tx_mempool{MakeMempool()};\r\n@@ -664,6 +668,7 @@ void MinerTestingSetup::TestPrioritisedMining(const CScript& scriptPubKey, const\r\n\r\n     BlockAssembler::Options options;\r\n     options.coinbase_output_script = scriptPubKey;\r\n+    options.max_template_age = MillisecondsDouble{0};\r\n\r\n     CTxMemPool& tx_mempool{MakeMempool()};\r\n     LOCK(tx_mempool.cs);\r\n@@ -753,6 +758,7 @@ BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\r\n     CScript scriptPubKey = CScript() << \"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5f\"_hex << OP_CHECKSIG;\r\n     BlockAssembler::Options options;\r\n     options.coinbase_output_script = scriptPubKey;\r\n+    options.max_template_age = MillisecondsDouble{0};\r\n\r\n     // Create and check a simple template\r\n     std::unique_ptr<BlockTemplate> block_template = mining->createNewBlock(options);\r\n```",
      "created_at": "2026-01-23T13:04:02Z",
      "updated_at": "2026-01-23T13:04:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2721117304",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721117304"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721157675",
      "pull_request_review_id": 3697431304,
      "id": 2721157675,
      "node_id": "PRRC_kwDOABII586iMZIr",
      "diff_hunk": "@@ -55,6 +55,7 @@ struct CBlockTemplate\n      * miner code.\n      */\n     CoinbaseTx m_coinbase_tx;\n+    NodeClock::time_point m_creation_time;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "original_commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "in_reply_to_id": 2712527147,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "As long as the cache is wiped when the tip changes, I don't think we need to worry about this.\n\nI assume clock adjustments are rare and typically tiny. If we end up mining the previous template, we'll lose a few sats, but we'll quickly generate a fresh one as fees rise.",
      "created_at": "2026-01-23T13:16:49Z",
      "updated_at": "2026-01-23T13:18:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2721157675",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721157675"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721183842",
      "pull_request_review_id": 3697463888,
      "id": 2721183842,
      "node_id": "PRRC_kwDOABII586iMfhi",
      "diff_hunk": "@@ -55,6 +55,7 @@ struct CBlockTemplate\n      * miner code.\n      */\n     CoinbaseTx m_coinbase_tx;\n+    NodeClock::time_point m_creation_time;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "original_commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "in_reply_to_id": 2712527147,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Using NodeClock is also consistent with validation:\n\n```cpp\n// Check timestamp\nif (block.Time() > NodeClock::now() + std::chrono::seconds{MAX_FUTURE_BLOCK_TIME}) {\n    return state.Invalid(BlockValidationResult::BLOCK_TIME_FUTURE, \"time-too-new\", \"block timestamp too far in the future\");\n}\n```",
      "created_at": "2026-01-23T13:24:33Z",
      "updated_at": "2026-01-23T13:24:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2721183842",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721183842"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721459577",
      "pull_request_review_id": 3697828278,
      "id": 2721459577,
      "node_id": "PRRC_kwDOABII586iNi15",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.\n+ */\n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 9,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694410392,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "An AI overlord suggested `CanReuseBlockTemplate()`, which looks good:\n\n```cpp\nfor (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++) {\n    if (CanReuseBlockTemplate(it->first, options) && !TimeIntervalElapsed(it->second->m_creation_time, options.max_template_age)) {\n```\n\n(not super important of course)",
      "created_at": "2026-01-23T14:35:12Z",
      "updated_at": "2026-01-23T14:35:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2721459577",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2721459577"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722058127",
      "pull_request_review_id": 3698569244,
      "id": 2722058127,
      "node_id": "PRRC_kwDOABII586iP0-P",
      "diff_hunk": "@@ -341,6 +341,39 @@ bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Op\n            a.nBlockMaxWeight == b.nBlockMaxWeight;\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    BlockAssembler assembler{m_chainman.ActiveChainstate(), &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++) {\n+        if (ShareableOptions(it->first, options) && !TimeIntervalElapsed(it->second->m_creation_time, options.max_template_age)) {\n+            if (options.test_block_validity && !it->first.test_block_validity) {\n+                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->second->block,\n+                                                                 /*check_pow=*/false, /*check_merkle_root=*/false)};\n+                    !state.IsValid()) {\n+                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n+                }\n+                it->first.test_block_validity = true;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "original_commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553: I don't think we should be tracking block check status in an options variable like this. We should probably put `it->first` in a const variable to prevent even the temptation.\n\nThis should be tracked in `CBlock`, which already takes care of resetting its cache when things are mutated, e.g. see `AddMerkleRootAndCoinbase`.\n",
      "created_at": "2026-01-23T16:52:35Z",
      "updated_at": "2026-01-23T16:53:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2722058127",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722058127"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 369,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722070507",
      "pull_request_review_id": 3698584296,
      "id": 2722070507,
      "node_id": "PRRC_kwDOABII586iP3_r",
      "diff_hunk": "@@ -345,6 +346,29 @@ BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& c\n     : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n {\n }\n+\n+void BlockTemplateCache::BlockConnected(\n+    const ChainstateRole& role,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    // Clear the cached blocks when the newly connected block\n+    // is not connecting to a historical chain that is used to validate\n+    // the current active chain.\n+    if (!role.historical) {\n+        m_block_templates.clear();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 38,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "original_commit_id": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238: remind me, this only clears the _cache_ right? Previous callers are not impacted if they hold another shared pointer. Might be worth expanding the comment, especially in the context of IPC clients.",
      "created_at": "2026-01-23T16:55:04Z",
      "updated_at": "2026-01-23T16:56:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2722070507",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722070507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 342,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722091394",
      "pull_request_review_id": 3698611202,
      "id": 2722091394,
      "node_id": "PRRC_kwDOABII586iP9GC",
      "diff_hunk": "@@ -345,6 +346,29 @@ BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& c\n     : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n {\n }\n+\n+void BlockTemplateCache::BlockConnected(\n+    const ChainstateRole& role,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    // Clear the cached blocks when the newly connected block\n+    // is not connecting to a historical chain that is used to validate\n+    // the current active chain.\n+    if (!role.historical) {\n+        m_block_templates.clear();\n+    }\n+}\n+\n+void BlockTemplateCache::BlockDisconnected(\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();",
      "path": "src/node/miner.cpp",
      "position": 67,
      "original_position": 47,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238: what happens if two blocks are received on an alternate heavier chain, and it turns out they're invalid (but with valid headers)? Do we disconnect in order to evaluate the alternative chain, and then reconnect the same tip once we discover the other chain is invalid? Or do we never disconnect in such a scenario?\n\nIf we disconnect and then reconnect the same block, we lose the cache even though it was perfectly valid. I don't think that's a problem, but it's worth a note if that can actually happen.",
      "created_at": "2026-01-23T17:00:30Z",
      "updated_at": "2026-01-23T17:01:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2722091394",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722091394"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 355,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722106985",
      "pull_request_review_id": 3698632412,
      "id": 2722106985,
      "node_id": "PRRC_kwDOABII586iQA5p",
      "diff_hunk": "@@ -486,11 +486,8 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\n          * We'll also create a new template if the tip changed during this iteration.\n          */\n         if (options.fee_threshold < MAX_MONEY || tip_changed) {\n-            auto new_tmpl{BlockAssembler{\n-                chainman.ActiveChainstate(),\n-                mempool,\n-                assemble_options}\n-                              .CreateNewBlock()};\n+            auto new_tmpl{block_template_cache->GetBlockTemplate(assemble_options)};\n+            ;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 31,
      "commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "original_commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e: spurious semicolon?",
      "created_at": "2026-01-23T17:05:21Z",
      "updated_at": "2026-01-23T17:05:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2722106985",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722106985"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722112586",
      "pull_request_review_id": 3698640445,
      "id": 2722112586,
      "node_id": "PRRC_kwDOABII586iQCRK",
      "diff_hunk": "@@ -423,13 +423,13 @@ void InterruptWait(KernelNotifications& kernel_notifications, bool& interrupt_wa\n     kernel_notifications.m_tip_block_cv.notify_all();\n }\n \n-std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\n-                                                      KernelNotifications& kernel_notifications,\n-                                                      CTxMemPool* mempool,",
      "path": "src/node/miner.cpp",
      "position": 152,
      "original_position": 6,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e: nice side-effect that we longer need to pass the mempool in.\n\nMaybe we can avoid passing `ChainstateManager` and `KernelNotifications` as well? (although this function needs both of those for other reasons anyway)",
      "created_at": "2026-01-23T17:07:09Z",
      "updated_at": "2026-01-23T17:10:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2722112586",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722112586"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 360,
      "original_line": 360,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722177615",
      "pull_request_review_id": 3698727131,
      "id": 2722177615,
      "node_id": "PRRC_kwDOABII586iQSJP",
      "diff_hunk": "@@ -341,6 +341,39 @@ bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Op\n            a.nBlockMaxWeight == b.nBlockMaxWeight;\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    BlockAssembler assembler{m_chainman.ActiveChainstate(), &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++) {\n+        if (ShareableOptions(it->first, options) && !TimeIntervalElapsed(it->second->m_creation_time, options.max_template_age)) {\n+            if (options.test_block_validity && !it->first.test_block_validity) {\n+                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->second->block,\n+                                                                 /*check_pow=*/false, /*check_merkle_root=*/false)};\n+                    !state.IsValid()) {\n+                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n+                }\n+                it->first.test_block_validity = true;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "original_commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "in_reply_to_id": 2722058127,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Since `test_block_validity` is only set to `false` in tests / bench, I think we should make our lives easier and never add templates to the cache if `test_block_validity` is false.\r\n\r\n(it is however to take a template _from_ the cache)",
      "created_at": "2026-01-23T17:28:53Z",
      "updated_at": "2026-01-23T17:29:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2722177615",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2722177615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 369,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728867624",
      "pull_request_review_id": 3707544446,
      "id": 2728867624,
      "node_id": "PRRC_kwDOABII586ipzco",
      "diff_hunk": "@@ -55,6 +55,7 @@ struct CBlockTemplate\n      * miner code.\n      */\n     CoinbaseTx m_coinbase_tx;\n+    NodeClock::time_point m_creation_time;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "original_commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "in_reply_to_id": 2712527147,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2721183842\r\n\r\nI agree those things make using `system_clock` less bad than it would otherwise seem, but they don't seem like reasons to prefer `system_clock` over `steady_clock`.\r\n\r\nValidation code is doing something pretty different and needs to consider network wide effects. But this code just needs to look at templates it created itself and accurately return how long ago it created them, and which ones it created first. It seems like using `steady_clock` would allow it to do this predictably and reliably and with the least amount of complexity and using `system_clock` only brings downsides. Possible I might be missing something though.",
      "created_at": "2026-01-26T19:02:52Z",
      "updated_at": "2026-01-26T19:02:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728867624",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728867624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728879338",
      "pull_request_review_id": 3707560206,
      "id": 2728879338,
      "node_id": "PRRC_kwDOABII586ip2Tq",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.\n+ */\n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 9,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694410392,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is gone in the latest push.",
      "created_at": "2026-01-26T19:06:22Z",
      "updated_at": "2026-01-26T19:06:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728879338",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728879338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728884279",
      "pull_request_review_id": 3707566736,
      "id": 2728884279,
      "node_id": "PRRC_kwDOABII586ip3g3",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694422460,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I simplify this and just reuse when they are completely identical.",
      "created_at": "2026-01-26T19:08:01Z",
      "updated_at": "2026-01-26T19:08:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728884279",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728884279"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728888251",
      "pull_request_review_id": 3707571792,
      "id": 2728888251,
      "node_id": "PRRC_kwDOABII586ip4e7",
      "diff_hunk": "@@ -55,6 +55,7 @@ struct CBlockTemplate\n      * miner code.\n      */\n     CoinbaseTx m_coinbase_tx;\n+    NodeClock::time_point m_creation_time;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "original_commit_id": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "in_reply_to_id": 2712527147,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is a good idea, but it would still not be nice to lose a few sats.\r\nSo I updated to a mockable steady clock and added the requested comment.",
      "created_at": "2026-01-26T19:09:28Z",
      "updated_at": "2026-01-26T19:09:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728888251",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728888251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728890877",
      "pull_request_review_id": 3707574466,
      "id": 2728890877,
      "node_id": "PRRC_kwDOABII586ip5H9",
      "diff_hunk": "@@ -341,6 +341,39 @@ bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Op\n            a.nBlockMaxWeight == b.nBlockMaxWeight;\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    BlockAssembler assembler{m_chainman.ActiveChainstate(), &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++) {\n+        if (ShareableOptions(it->first, options) && !TimeIntervalElapsed(it->second->m_creation_time, options.max_template_age)) {\n+            if (options.test_block_validity && !it->first.test_block_validity) {\n+                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->second->block,\n+                                                                 /*check_pow=*/false, /*check_merkle_root=*/false)};\n+                    !state.IsValid()) {\n+                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n+                }\n+                it->first.test_block_validity = true;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 60,
      "commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "original_commit_id": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "in_reply_to_id": 2722058127,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You are right, this is more of my motivation for just reusing when it's completely identical.\r\nThis simplifies a lot in the PR.",
      "created_at": "2026-01-26T19:10:19Z",
      "updated_at": "2026-01-26T19:10:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728890877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728890877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 369,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728897497",
      "pull_request_review_id": 3707582293,
      "id": 2728897497,
      "node_id": "PRRC_kwDOABII586ip6vZ",
      "diff_hunk": "@@ -486,11 +486,8 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\n          * We'll also create a new template if the tip changed during this iteration.\n          */\n         if (options.fee_threshold < MAX_MONEY || tip_changed) {\n-            auto new_tmpl{BlockAssembler{\n-                chainman.ActiveChainstate(),\n-                mempool,\n-                assemble_options}\n-                              .CreateNewBlock()};\n+            auto new_tmpl{block_template_cache->GetBlockTemplate(assemble_options)};\n+            ;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 31,
      "commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "original_commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "in_reply_to_id": 2722106985,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yep, deleted.\r\nI was curious to know why this compile.\r\nIt turns out empty statements are valid statements and can have a potential use case. see https://stackoverflow.com/questions/36408249/why-putting-2-semicolon-is-not-an-error",
      "created_at": "2026-01-26T19:12:47Z",
      "updated_at": "2026-01-26T19:12:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728897497",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728897497"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728903364",
      "pull_request_review_id": 3707589253,
      "id": 2728903364,
      "node_id": "PRRC_kwDOABII586ip8LE",
      "diff_hunk": "@@ -423,13 +423,13 @@ void InterruptWait(KernelNotifications& kernel_notifications, bool& interrupt_wa\n     kernel_notifications.m_tip_block_cv.notify_all();\n }\n \n-std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\n-                                                      KernelNotifications& kernel_notifications,\n-                                                      CTxMemPool* mempool,",
      "path": "src/node/miner.cpp",
      "position": 152,
      "original_position": 6,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "in_reply_to_id": 2722112586,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes, they are needed indeed.\r\nThe idea is to get rid of them as planned in #33758.",
      "created_at": "2026-01-26T19:14:56Z",
      "updated_at": "2026-01-26T19:14:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2728903364",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2728903364"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 360,
      "original_line": 360,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729122498",
      "pull_request_review_id": 3707845045,
      "id": 2729122498,
      "node_id": "PRRC_kwDOABII586iqxrC",
      "diff_hunk": "@@ -345,6 +346,29 @@ BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& c\n     : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n {\n }\n+\n+void BlockTemplateCache::BlockConnected(\n+    const ChainstateRole& role,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    // Clear the cached blocks when the newly connected block\n+    // is not connecting to a historical chain that is used to validate\n+    // the current active chain.\n+    if (!role.historical) {\n+        m_block_templates.clear();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 38,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "original_commit_id": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "in_reply_to_id": 2722070507,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You are right, it will still be there.\r\nI think this is obvious with shared_ptr; once you make a copy, your version exists even if the original version of the shared_ptr is deleted.\r\n\r\nFor the IPC, it is safe because the client copies the whole object, not just the shared_ptr. see [63cfe6f](https://github.com/bitcoin/bitcoin/pull/33421/commits/63cfe6f4e6fd3b08d7749aa34fa76d8380e00ddb)\r\n",
      "created_at": "2026-01-26T20:23:06Z",
      "updated_at": "2026-01-26T20:23:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2729122498",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729122498"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 342,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729137127",
      "pull_request_review_id": 3707861832,
      "id": 2729137127,
      "node_id": "PRRC_kwDOABII586iq1Pn",
      "diff_hunk": "@@ -345,6 +346,29 @@ BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& c\n     : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n {\n }\n+\n+void BlockTemplateCache::BlockConnected(\n+    const ChainstateRole& role,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    // Clear the cached blocks when the newly connected block\n+    // is not connecting to a historical chain that is used to validate\n+    // the current active chain.\n+    if (!role.historical) {\n+        m_block_templates.clear();\n+    }\n+}\n+\n+void BlockTemplateCache::BlockDisconnected(\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();",
      "path": "src/node/miner.cpp",
      "position": 67,
      "original_position": 47,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "in_reply_to_id": 2722091394,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm, I think this is not affected by this scenario. IIUC, the block connected notification is only emitted after the block has been fully validated and connected. At that point, we just clear the cache and assume the tip has changed. When blocks are disconnected for whatever reason, we also clear the cache again because a reorg has happened.",
      "created_at": "2026-01-26T20:28:10Z",
      "updated_at": "2026-01-26T20:28:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2729137127",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2729137127"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 355,
      "original_line": 355,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731435803",
      "pull_request_review_id": 3710501549,
      "id": 2731435803,
      "node_id": "PRRC_kwDOABII586izmcb",
      "diff_hunk": "@@ -323,6 +323,32 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    Chainstate& current_chainstate = m_chainman.CurrentChainstate();\n+    BlockAssembler assembler{current_chainstate, &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options, MillisecondsDouble max_template_age)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++) {\n+        if (it->first == options && !TimeIntervalElapsed(it->second->m_creation_time, max_template_age)) {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 54,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "original_commit_id": "b948e78d2332d1cd03e8ccd76f93b0efc8233a45",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "b948e78d2332d1cd03e8ccd76f93b0efc8233a45: the new approach of comparing all options seems fine, but let's add a comment to point out that differences in `test_block_validity`, `print_modified_fee` and `coinbase_output_script` only impact test cases and benchmarks.\n\nIn particular the latter might confuse readers at first glance, so maybe elaborate and say that the `getblocktemplate` RPC omits the coinbase transaction entirely and `getCoinbaseTx()` IPC omits the output script. ",
      "created_at": "2026-01-27T10:55:14Z",
      "updated_at": "2026-01-27T10:57:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2731435803",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731435803"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 375,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731691927",
      "pull_request_review_id": 3710803440,
      "id": 2731691927,
      "node_id": "PRRC_kwDOABII586i0k-X",
      "diff_hunk": "@@ -323,6 +323,32 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    Chainstate& current_chainstate = m_chainman.CurrentChainstate();\n+    BlockAssembler assembler{current_chainstate, &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options, MillisecondsDouble max_template_age)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++) {\n+        if (it->first == options && !TimeIntervalElapsed(it->second->m_creation_time, max_template_age)) {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 54,
      "commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "original_commit_id": "b948e78d2332d1cd03e8ccd76f93b0efc8233a45",
      "in_reply_to_id": 2731435803,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks fixed.",
      "created_at": "2026-01-27T12:04:06Z",
      "updated_at": "2026-01-27T12:04:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2731691927",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2731691927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 375,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732044124",
      "pull_request_review_id": 3711244801,
      "id": 2732044124,
      "node_id": "PRRC_kwDOABII586i169c",
      "diff_hunk": "@@ -327,6 +328,29 @@ BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& c\n     : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n {\n }\n+\n+void BlockTemplateCache::BlockConnected(\n+    const ChainstateRole& role,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);",
      "path": "src/node/miner.cpp",
      "position": 58,
      "original_position": 33,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "dfee492df46270784193b6cca9f50c5648d9acd9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: clear block template after block connection/disconnection\" (dfee492df46270784193b6cca9f50c5648d9acd9)\n\nNo need to lock mutex when notification is being ignored. Would suggest simplifying to something like.\n\n```c++\n// Ignore block being connected to historical chain, not current chain.\nif (role.historical) return;\n\nLOCK(m_mutex);\nm_block_templates.clear();\n```\n",
      "created_at": "2026-01-27T13:34:20Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732044124",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732044124"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 346,
      "original_line": 346,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732088045",
      "pull_request_review_id": 3711244801,
      "id": 2732088045,
      "node_id": "PRRC_kwDOABII586i2Frt",
      "diff_hunk": "@@ -867,4 +868,133 @@ BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n     TestPrioritisedMining(scriptPubKey, txFirst);\n }\n \n+BOOST_AUTO_TEST_CASE(blocktemplate_cache)\n+{\n+    auto& template_cache = m_node.block_template_cache;\n+    {\n+        SeedRandomStateForTest(SeedRand::ZEROS);\n+        SetMockTime(WITH_LOCK(m_node.chainman->GetMutex(),\n+                              return m_node.chainman->ActiveTip()->Time()));\n+        m_node.validation_signals->SyncWithValidationInterfaceQueue();\n+    }\n+\n+    auto current_time = MockableSteadyClock::INITIAL_MOCK_TIME; // In milliseconds\n+    BlockAssembler::Options base_options;\n+    auto block_template = template_cache->GetBlockTemplate(base_options, MillisecondsDouble{0});\n+    auto prev_time = block_template->m_creation_time;\n+\n+    {\n+        // max_template_age of 0 will always create a new block template\n+        MockableSteadyClock::SetMockTime(current_time += std::chrono::milliseconds{1});\n+        block_template = template_cache->GetBlockTemplate(base_options, MillisecondsDouble{0});\n+        BOOST_CHECK(block_template->m_creation_time > prev_time);\n+        prev_time = block_template->m_creation_time;\n+    }\n+\n+    auto max_template_age = MillisecondsDouble{2};\n+    {\n+        // Return recent cached block template when time interval has not elapsed\n+        MockableSteadyClock::SetMockTime(current_time += std::chrono::milliseconds{1});\n+        BOOST_CHECK(!node::TimeIntervalElapsed(prev_time, max_template_age));\n+        BOOST_CHECK(template_cache->GetBlockTemplate(base_options, max_template_age)->m_creation_time == prev_time);\n+    }\n+\n+    {\n+        // Return a new template when time interval has elapsed\n+        max_template_age = max_template_age - MillisecondsDouble{1}; // Subtract 1 millisecond",
      "path": "src/test/miner_tests.cpp",
      "position": 1,
      "original_position": 68,
      "commit_id": "d4a9ad990ad8abc1350701230551c49d86a8a1d9",
      "original_commit_id": "d4a9ad990ad8abc1350701230551c49d86a8a1d9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"test: add unit test to `BlockTemplateCache`\" (d4a9ad990ad8abc1350701230551c49d86a8a1d9)\r\n\r\nThis seems like a complicated way of setting max age to 2ms instead of 1ms. Could you write `max_template_age = 1ms;` instead to be more explicit? It would also seem nice other places to avoid `MillisecondsDouble` and use literal time values.",
      "created_at": "2026-01-27T13:44:43Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732088045",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732088045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 904,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732248478",
      "pull_request_review_id": 3711244801,
      "id": 2732248478,
      "node_id": "PRRC_kwDOABII586i2s2e",
      "diff_hunk": "@@ -40,6 +41,14 @@ class KernelNotifications;\n \n static const bool DEFAULT_PRINT_MODIFIED_FEE = false;\n \n+// Return true if current time is greater or equal to `prev_time + time_interval`, or if\n+// `prev_time` is greater than the current time (indicating clock moved backward; only possible in test).\n+static inline bool TimeIntervalElapsed(const MockableSteadyClock::time_point& prev_time, MillisecondsDouble time_interval)",
      "path": "src/node/miner.h",
      "position": 51,
      "original_position": 14,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "8888f1373559fdf9ee2cad4a3a3023261595ef62",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: add `TimeIntervalElapsed` function\" (8888f1373559fdf9ee2cad4a3a3023261595ef62)\r\n\r\nWould suggest merging this commit into the next commit \"miner: introduce `BlockTemplateCache` for reusing block templates\" (1d14726469f021570bff2811570a5e54a08df72a) because this commit is very small and it's not possible to understand the next commit without seeing this function. (For example the parameter name `max_template_age` doesn't seem appropriate given currrent definition of this function, see my other review comment.)\r\n\r\nAlso, about commit messages in this PR, I notice some of them are duplicating documentation that appears in the code, which I would suggest not doing. Using code comments in commit messages provides more detail than is helpful for understanding purpose of the changes, and creates an extra burden for reviewers to check correctness two places instead of one. Better IMO if commit messages provide a higher level summary of behavior than code comments, or focus on providing information not appropriate for code comments, like motivations behind the change or comparisons with previous code.\r\n\r\n\r\n\r\n",
      "created_at": "2026-01-27T14:21:47Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732248478",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732248478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 51,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732292911",
      "pull_request_review_id": 3711244801,
      "id": 2732292911,
      "node_id": "PRRC_kwDOABII586i23sv",
      "diff_hunk": "@@ -55,6 +56,11 @@ struct CBlockTemplate\n      * miner code.\n      */\n     CoinbaseTx m_coinbase_tx;\n+\n+    /* Uses steady clock because it is monotonic and unaffected by rare system clock changes.\n+     * Intended for checking template staleness with respect to fee increases.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 14,
      "commit_id": "2915bb21dd64ba98f5e1fb93c11f618030a0235f",
      "original_commit_id": "2915bb21dd64ba98f5e1fb93c11f618030a0235f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: add block creation time point to `CBlockTemplate`\" (2915bb21dd64ba98f5e1fb93c11f618030a0235f)\r\n\r\nReference to fee increases is confusing because fees are only indirectly related to how this field is used. Would suggest something more direct like \"Used to decide whether a cached template is eligible for reuse based on its age.\"",
      "created_at": "2026-01-27T14:29:55Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732292911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732292911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732410162",
      "pull_request_review_id": 3711244801,
      "id": 2732410162,
      "node_id": "PRRC_kwDOABII586i3UUy",
      "diff_hunk": "@@ -138,6 +143,46 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/*\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores block templates along with their respective block creation options.\n+ * When a block template is requested with a specific block creation option and a desired maximum age:\n+ * - Return the most recent cached template whose block creation option matches the request block creation option\n+ *   and age (the time elapsed since its creation) does not exceed the specified maximum.\n+ * - If no such cached template exists, create a new block template, store it in the cache along with\n+ *   its block creation option, and return it.\n+ * - When the cache exceeds the configured maximum cache size after an insertion, the oldest template\n+ *   is evicted.\n+ */\n+class BlockTemplateCache\n+{\n+private:\n+    std::deque<std::pair<BlockAssembler::Options, BlockTemplateRef>> m_block_templates;\n+    CTxMemPool& m_mempool;\n+    ChainstateManager& m_chainman;\n+    size_t m_block_template_cache_size;\n+    mutable Mutex m_mutex;\n+\n+    BlockTemplateRef CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(::cs_main, m_mutex);\n+\n+public:\n+    BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size = DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE);\n+    ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age is less than\n+     * the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param max_template_age This indicate the maximum age of the desired block template in milliseconds (Default 0).\n+     * @return a BlockTemplateRef.\n+     */\n+    BlockTemplateRef GetBlockTemplate(const BlockAssembler::Options& options, MillisecondsDouble max_template_age = MillisecondsDouble{0}) EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 102,
      "commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "original_commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: sjors https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3791190393\r\n\r\n> I have light preference for making `max_template_age` an argument for `GetBlockTemplate()` (default 0) instead of adding it to `BlockAssembler::Options`. Especially because it's ignored by `ShareableOptions` and then checked separately in `GetBlockTemplate()`.\r\n\r\n@Sjors I wonder if you could explain this preference a little more? It seems inconsistent to make this one option a separate parameter when there isn't a clear difference between it and the other options semantically.\r\n\r\nIf the description of upcoming changes in https://github.com/bitcoin/bitcoin/issues/33758 is accurate, it sounds we will want to add this field to BlockCreateOptions to provide caching functionality over IPC?\r\n\r\nI guess my question is whether you think template age should be specified as a separate parameter permanently and never added to `BlockCreateOptions`, or if you are just saying it should not be added to `BlockCreateOptions` now but should be added later, and then the separate parameter can go away?\r\n\r\n\r\n\r\n\r\n",
      "created_at": "2026-01-27T14:53:24Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732410162",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732410162"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 174,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732512830",
      "pull_request_review_id": 3711244801,
      "id": 2732512830,
      "node_id": "PRRC_kwDOABII586i3tY-",
      "diff_hunk": "@@ -138,6 +143,46 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/*\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores block templates along with their respective block creation options.\n+ * When a block template is requested with a specific block creation option and a desired maximum age:\n+ * - Return the most recent cached template whose block creation option matches the request block creation option\n+ *   and age (the time elapsed since its creation) does not exceed the specified maximum.\n+ * - If no such cached template exists, create a new block template, store it in the cache along with\n+ *   its block creation option, and return it.\n+ * - When the cache exceeds the configured maximum cache size after an insertion, the oldest template\n+ *   is evicted.\n+ */\n+class BlockTemplateCache\n+{\n+private:\n+    std::deque<std::pair<BlockAssembler::Options, BlockTemplateRef>> m_block_templates;\n+    CTxMemPool& m_mempool;\n+    ChainstateManager& m_chainman;\n+    size_t m_block_template_cache_size;\n+    mutable Mutex m_mutex;\n+\n+    BlockTemplateRef CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(::cs_main, m_mutex);\n+\n+public:\n+    BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size = DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE);\n+    ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age is less than\n+     * the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param max_template_age This indicate the maximum age of the desired block template in milliseconds (Default 0).\n+     * @return a BlockTemplateRef.\n+     */\n+    BlockTemplateRef GetBlockTemplate(const BlockAssembler::Options& options, MillisecondsDouble max_template_age = MillisecondsDouble{0}) EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 102,
      "commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "original_commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: introduce `BlockTemplateCache` for reusing block templates\" (1d14726469f021570bff2811570a5e54a08df72a)\r\n\r\nI think the option name `max_template_age` is misleading because of its boundary behavior. With the current logic, a cached template is only returned if its age is strictly less than this value. For example, if max_template_age = 30 seconds and a template was created exactly 30 seconds ago, it won't be returned. That isn't what the name implies because \"maximum age\" means \"highest age that's not too old\", not \"lowest age that is too old\".\r\n\r\nThe actual behavior seems ok (especially with 0 meaning â€œdonâ€™t use the cacheâ€), just using the word \"maximum\" to describe it doesn't seem right. A name like `template_age_limit`, `cache_age_limit`, or `reuse_age_limit` would seem better.\r\n\r\nAlternately the name `max_template_age` could be kept and `TimeIntervalElapsed` could be changed to return true if current time is `>` instead of `>=` the max time. But in that case we would need a different value like `-1` or `nullopt` instead of `0` to mean don't use the cache. So it would seem simplest just to change the name of the option.\r\n\r\n---\r\n\r\nEDIT: On the other hand, although the idea of using `0` to generate a new template instead of using the cache seems appealing, there are problems if you think about it. The `0` behavior does not seem like a good default because if used it means callers will add new templates to the cache and evict other templates, but probably never use the cached templates they are adding.\r\n\r\nFor example if caller A sets a nonzero age limit, and caller B uses a the default 0 value, caller B could fill up the cache with its own templates even though they are never used, in the meantime evicting templates from caller A.\r\n\r\nSo I think we will want to have a separate value for calls which shouldn't use the read from the cache or add to it. Using `std::optional<MillisecondsDouble> max_template_age` and `nullopt` would seem to make sense for that, and at that point we could normalize the max boundary behavior and not need to treat 0 specially.\r\n\r\n\r\n",
      "created_at": "2026-01-27T15:16:39Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732512830",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732512830"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 174,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732564926",
      "pull_request_review_id": 3711244801,
      "id": 2732564926,
      "node_id": "PRRC_kwDOABII586i36G-",
      "diff_hunk": "@@ -138,6 +143,46 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/*\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores block templates along with their respective block creation options.\n+ * When a block template is requested with a specific block creation option and a desired maximum age:\n+ * - Return the most recent cached template whose block creation option matches the request block creation option\n+ *   and age (the time elapsed since its creation) does not exceed the specified maximum.\n+ * - If no such cached template exists, create a new block template, store it in the cache along with\n+ *   its block creation option, and return it.\n+ * - When the cache exceeds the configured maximum cache size after an insertion, the oldest template\n+ *   is evicted.\n+ */\n+class BlockTemplateCache\n+{\n+private:\n+    std::deque<std::pair<BlockAssembler::Options, BlockTemplateRef>> m_block_templates;\n+    CTxMemPool& m_mempool;\n+    ChainstateManager& m_chainman;\n+    size_t m_block_template_cache_size;\n+    mutable Mutex m_mutex;\n+\n+    BlockTemplateRef CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(::cs_main, m_mutex);\n+\n+public:\n+    BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size = DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE);\n+    ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age is less than\n+     * the specified interval, the cached template is returned.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 95,
      "commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "original_commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: introduce `BlockTemplateCache` for reusing block templates\" (1d14726469f021570bff2811570a5e54a08df72a)\r\n\r\nMinor: maybe replace \"interval\" with \"limit\" or \"amount\". Right now this little off because age is more of a duration than an interval",
      "created_at": "2026-01-27T15:26:48Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732564926",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732564926"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 176,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732692048",
      "pull_request_review_id": 3711244801,
      "id": 2732692048,
      "node_id": "PRRC_kwDOABII586i4ZJQ",
      "diff_hunk": "@@ -323,6 +323,38 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    Chainstate& current_chainstate = m_chainman.CurrentChainstate();\n+    BlockAssembler assembler{current_chainstate, &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options, MillisecondsDouble max_template_age)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    // Cache lookup compares all block creation option fields for an exact match. Note that differences\n+    // in test_block_validity, print_modified_fee, and coinbase_output_script only affect\n+    // tests and benchmarks, not production usage.\n+    // This implies that these fields can differ in test scenarios without impacting real-world block template\n+    // functionality. Discrepancies in the above fields will still cause cache misses, but since they are fixed\n+    // in non-test and benchmark environments, it is okay to compare for an exact match.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 58,
      "commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "original_commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: introduce `BlockTemplateCache` for reusing block templates\" (1d14726469f021570bff2811570a5e54a08df72a)\n\nSaying that certain fields \"only affect tests and benchmarks\" is confusing because it sounds like it is saying these fields don't affect caching behavior even though they do. Something like the following would seem clearer:\n\n```\n// Cache lookup requires an exact match on all block creation options.\n// While some fields (e.g. test_block_validity, print_modified_fee, coinbase_output_script)\n// could be ignored for cache reuse, differences in these fields mainly occur in\n// tests and benchmarks. To keep the logic simple, we treat all fields as part of\n// the cache key and accept cache misses in those cases.\n```",
      "created_at": "2026-01-27T15:53:05Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732692048",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732692048"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 344,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732733532",
      "pull_request_review_id": 3711244801,
      "id": 2732733532,
      "node_id": "PRRC_kwDOABII586i4jRc",
      "diff_hunk": "@@ -323,6 +323,38 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    Chainstate& current_chainstate = m_chainman.CurrentChainstate();\n+    BlockAssembler assembler{current_chainstate, &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());\n+    Assume(m_block_templates.size() <= m_block_template_cache_size);\n+    m_block_templates.emplace_back(options, block_template);\n+    if (m_block_templates.size() > m_block_template_cache_size) m_block_templates.pop_front();\n+    return block_template;\n+}\n+\n+BlockTemplateRef BlockTemplateCache::GetBlockTemplate(const BlockAssembler::Options& options, MillisecondsDouble max_template_age)\n+{\n+    LOCK2(cs_main, m_mutex);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "original_commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: introduce `BlockTemplateCache` for reusing block templates\" (1d14726469f021570bff2811570a5e54a08df72a)\r\n\r\nIt seems wasteful to lock `cs_main` here when iterating over `m_block_templates`, since if there is a matching template, `cs_main` shouldn't be required. Code could just lock `m_mutex` when searching the cache. Then if nothing is found it could release `m_mutex` and lock `cs_main` and `m_mutex` to add to the cache.\r\n\r\nI'm also not sure about purpose of having a separate `CreateBlockTemplateInternal` method. It seems like it is only called one place and would be simpler to inline.",
      "created_at": "2026-01-27T16:01:33Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732733532",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732733532"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 343,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732775121",
      "pull_request_review_id": 3711244801,
      "id": 2732775121,
      "node_id": "PRRC_kwDOABII586i4tbR",
      "diff_hunk": "@@ -323,6 +323,38 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+BlockTemplateCache::BlockTemplateCache(CTxMemPool& mempool, ChainstateManager& chainman, size_t block_template_cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_block_template_cache_size(block_template_cache_size)\n+{\n+}\n+BlockTemplateRef BlockTemplateCache::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    Chainstate& current_chainstate = m_chainman.CurrentChainstate();\n+    BlockAssembler assembler{current_chainstate, &m_mempool, options};\n+    auto block_template = std::make_shared<const CBlockTemplate>(*assembler.CreateNewBlock());",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "original_commit_id": "1d14726469f021570bff2811570a5e54a08df72a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"miner: introduce `BlockTemplateCache` for reusing block templates\" (1d14726469f021570bff2811570a5e54a08df72a)\n\nShould be able to avoid copying here with:\n\n```c++\nstd::shared_ptr<const CBlockTemplate> block_template{assembler.CreateNewBlock()};\n```",
      "created_at": "2026-01-27T16:11:33Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732775121",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732775121"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 334,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732855229",
      "pull_request_review_id": 3711244801,
      "id": 2732855229,
      "node_id": "PRRC_kwDOABII586i5A-9",
      "diff_hunk": "@@ -221,13 +221,13 @@ void InterruptWait(KernelNotifications& kernel_notifications, bool& interrupt_wa\n  * Return a new block template when fees rise to a certain threshold or after a\n  * new tip; return nullopt if timeout is reached.\n  */\n-std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\n-                                                      KernelNotifications& kernel_notifications,\n-                                                      CTxMemPool* mempool,\n-                                                      const std::unique_ptr<CBlockTemplate>& block_template,\n-                                                      const BlockWaitOptions& options,\n-                                                      const BlockAssembler::Options& assemble_options,\n-                                                      bool& interrupt_wait);\n+BlockTemplateRef WaitAndCreateNewBlock(BlockTemplateCache* block_template_cache,\n+                                       ChainstateManager& chainman,\n+                                       KernelNotifications& kernel_notifications,\n+                                       std::unique_ptr<CBlockTemplate>& block_template,",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 14,
      "commit_id": "e3b559c098f84d0b291889342a1bf0c30863fa84",
      "original_commit_id": "e3b559c098f84d0b291889342a1bf0c30863fa84",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"interfaces: create block template via block template cache\" (e3b559c098f84d0b291889342a1bf0c30863fa84)\n\nThis commit seems to have dropped `const` from this parameter by accident, so `const` could be added back here.\n\nHowever, the previous type `const std::unique_ptr<CBlockTemplate>& block_template` also did not make much sense because:\n\n- The function doesn't change the template so a mutable template shouldn't be passed.\n- The function doesn't check for null so a nullable template shouldn't be passed.\n- The function doesn't use any unique_ptr functionality so unique_ptr shouldn't be used.\n\nWould make more sense to change parameter type `const BlockTemplate& block_template`",
      "created_at": "2026-01-27T16:30:23Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732855229",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732855229"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732970421",
      "pull_request_review_id": 3711244801,
      "id": 2732970421,
      "node_id": "PRRC_kwDOABII586i5dG1",
      "diff_hunk": "@@ -867,4 +868,133 @@ BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n     TestPrioritisedMining(scriptPubKey, txFirst);\n }\n \n+BOOST_AUTO_TEST_CASE(blocktemplate_cache)",
      "path": "src/test/miner_tests.cpp",
      "position": 55,
      "original_position": 35,
      "commit_id": "90eaf64caf3a6d2e1230dea62436dd6bcb21a1c9",
      "original_commit_id": "d4a9ad990ad8abc1350701230551c49d86a8a1d9",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"test: add unit test to `BlockTemplateCache`\" (d4a9ad990ad8abc1350701230551c49d86a8a1d9)\n\nMight be nice if this test had a helper to reduce boilerplate when checking for cache hits/misses. Chatgpt suggested:\n\n```c++\nauto tmpl = template_cache->GetBlockTemplate({}, MillisecondsDouble{0ms});\nauto prev_time = tmpl->m_creation_time;\nauto now = MockableSteadyClock::INITIAL_MOCK_TIME;\nauto check_cache = [&](bool expect_hit,\n                       const BlockAssembler::Options& opts,\n                       std::chrono::milliseconds max_age,\n                       std::chrono::milliseconds advance = 1ms) {\n    MockableSteadyClock::SetMockTime(now += advance);\n    const auto tmpl = template_cache->GetBlockTemplate(opts, MillisecondsDouble{max_age});\n    if (expect_hit) {\n        BOOST_CHECK_EQUAL(tmpl->m_creation_time, prev_time);\n    } else {\n        BOOST_CHECK(tmpl->m_creation_time > prev_time);\n        prev_time = tmpl->m_creation_time;\n    }\n};\n```\n\nWhich could be used like:\n\n```c++\ncheck_cache(/*expect_hit=*/false, {}, 0ms); // max_age=0 disables caching => always miss\ncheck_cache(/*expect_hit=*/true,  {}, 2ms); // Hit if age < limit\ncheck_cache(/*expect_hit=*/false, {}, 1ms); // Boundary: age == limit => miss (strict)\n```\n\nThis seems like it would be more readable and a similar pattern could be used in the fuzz test.\n\nNot too important, but wanted to raise the idea.\n\n\n\n\n\n\n\n",
      "created_at": "2026-01-27T16:57:48Z",
      "updated_at": "2026-01-27T17:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2732970421",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2732970421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 878,
      "original_line": 878,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2737333696",
      "pull_request_review_id": 3717543669,
      "id": 2737333696,
      "node_id": "PRRC_kwDOABII586jKGXA",
      "diff_hunk": "@@ -116,6 +116,7 @@ BasicTestingSetup::BasicTestingSetup(const ChainType chainType, TestOpts opts)\n     if (!EnableFuzzDeterminism()) {\n         SeedRandomForTest(SeedRand::FIXED_SEED);\n     }\n+    MockableSteadyClock::SetMockTime(MockableSteadyClock::INITIAL_MOCK_TIME);\n ",
      "path": "src/test/util/setup_common.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "original_commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "not sure about this. Yeah, sure, it is going to silence the fuzz error. However, this will globally set the steady clock to a hard-coded constant for all tests. \n\nMaybe this is fine for the steady clock and all tests. However, if a test is using the clock, it seems better to locally document that the clock is used. Otherwise, code paths that rely on the clock advancing will silently never be covered.\n\nSo I guess i am -0 on this. It would be better to set to a constant in each test. Ideal would be to actually advance the clock in each test, so that all code paths are reachable and testable.",
      "created_at": "2026-01-28T15:57:55Z",
      "updated_at": "2026-01-28T15:58:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2737333696",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2737333696"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 119,
      "original_line": 119,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2737891484",
      "pull_request_review_id": 3718238604,
      "id": 2737891484,
      "node_id": "PRRC_kwDOABII586jMOic",
      "diff_hunk": "@@ -116,6 +116,7 @@ BasicTestingSetup::BasicTestingSetup(const ChainType chainType, TestOpts opts)\n     if (!EnableFuzzDeterminism()) {\n         SeedRandomForTest(SeedRand::FIXED_SEED);\n     }\n+    MockableSteadyClock::SetMockTime(MockableSteadyClock::INITIAL_MOCK_TIME);\n ",
      "path": "src/test/util/setup_common.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "original_commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "in_reply_to_id": 2737333696,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See https://github.com/bitcoin/bitcoin/pull/34432 for a helper context that could help make this easier to implement.",
      "created_at": "2026-01-28T18:11:13Z",
      "updated_at": "2026-01-29T19:57:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2737891484",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2737891484"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 119,
      "original_line": 119,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743618808",
      "pull_request_review_id": 3725131968,
      "id": 2743618808,
      "node_id": "PRRC_kwDOABII586jiEz4",
      "diff_hunk": "@@ -116,6 +116,7 @@ BasicTestingSetup::BasicTestingSetup(const ChainType chainType, TestOpts opts)\n     if (!EnableFuzzDeterminism()) {\n         SeedRandomForTest(SeedRand::FIXED_SEED);\n     }\n+    MockableSteadyClock::SetMockTime(MockableSteadyClock::INITIAL_MOCK_TIME);\n ",
      "path": "src/test/util/setup_common.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "original_commit_id": "a943e749c65f2279363e18dc5fec820f7ed43f01",
      "in_reply_to_id": 2737333696,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in https://github.com/bitcoin/bitcoin/pull/33421/commits/ff20b90b72a54a073a08773b53387cb6431c0669",
      "created_at": "2026-01-29T21:24:53Z",
      "updated_at": "2026-01-29T21:24:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2743618808",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2743618808"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 119,
      "original_line": 119,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2753656173",
      "pull_request_review_id": 3738584537,
      "id": 2753656173,
      "node_id": "PRRC_kwDOABII586kIXVt",
      "diff_hunk": "@@ -123,6 +146,91 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/*\n+ * BlockTemplateCache provides a thread-safe cache for block templates.\n+ *\n+ * Each cached entry is identified by its BlockAssembler::Options. At most one\n+ * template is stored per set of options, and the cache has a fixed maximum size.\n+ *\n+ * When requesting a block template:\n+ * - If template_age_limit is std::nullopt, a new block template is always\n+ *   created and returned, and nothing is cached.\n+ *\n+ * - Otherwise, the cache is checked for a template with matching options.\n+ *   If a cached template exists and its age (elapsed time since creation) is strictly\n+ *   less than template_age_limit, it is reused.\n+ *\n+ * - If a matching template exists but its age has reached or exceeded the\n+ *   limit, it is removed and replaced with a newly created template.\n+ *\n+ * - If no matching template exists, a new template is created and cached.\n+ *\n+ * When adding a new entry causes the cache to exceed its size limit, the\n+ * oldest cached template (by insertion order) is evicted.\n+is evicted.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 108,
      "commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "original_commit_id": "e876ca111856a5afcccaba93c3f79f79e24fa490",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "+is evicted. -> (remove duplicate \"is evicted.\") [Duplicate sentence fragment; the phrase \"is evicted.\" is repeated, making the sentence redundant/confusing.]",
      "created_at": "2026-02-02T10:33:25Z",
      "updated_at": "2026-02-02T10:33:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2753656173",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2753656173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 169,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764212409",
      "pull_request_review_id": 3751288684,
      "id": 2764212409,
      "node_id": "PRRC_kwDOABII586kwoi5",
      "diff_hunk": "@@ -61,6 +63,7 @@ void initialize_process_message()\n             /*chain_type=*/ChainType::REGTEST,\n             {}),\n     };\n+    mock_steady += MockableSteadyClock::INITIAL_MOCK_TIME;",
      "path": "src/test/fuzz/process_message.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "66f32444237f762d0d864db76feafe687a1f1e98",
      "original_commit_id": "66f32444237f762d0d864db76feafe687a1f1e98",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "this looks a bit wrong, because `INITIAL_MOCK_TIME` represents a time point, but the argument to operator+= is a duration. I guess it would be good if someone changed `INITIAL_MOCK_TIME` to be a time point type. Also, the += here doesn't seem to be doing anything and can be removed? If not, it could make sense to add a short comment?",
      "created_at": "2026-02-04T14:11:16Z",
      "updated_at": "2026-02-04T14:11:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2764212409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2764212409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770065479",
      "pull_request_review_id": 3758168465,
      "id": 2770065479,
      "node_id": "PRRC_kwDOABII586lG9hH",
      "diff_hunk": "@@ -61,6 +63,7 @@ void initialize_process_message()\n             /*chain_type=*/ChainType::REGTEST,\n             {}),\n     };\n+    mock_steady += MockableSteadyClock::INITIAL_MOCK_TIME;",
      "path": "src/test/fuzz/process_message.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "66f32444237f762d0d864db76feafe687a1f1e98",
      "original_commit_id": "66f32444237f762d0d864db76feafe687a1f1e98",
      "in_reply_to_id": 2764212409,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> this looks a bit wrong, because INITIAL_MOCK_TIME represents a time point, but the argument to operator+= is a duration. \r\nAlso, the += here doesn't seem to be doing anything and can be removed? If not, it could make sense to add a short comment?\r\n\r\nYeah, there is no need for the bump after constructing the `SteadyClockContext`.\r\nI attempted to fix it in https://github.com/bitcoin/bitcoin/pull/33421/changes/394796f35cfc653d111090605f68a24a59554460\r\n\r\n> I guess it would be good if someone changed INITIAL_MOCK_TIME to be a time point type.\r\n\r\nGood idea, but that is beyond the scope of this PR.",
      "created_at": "2026-02-05T16:28:03Z",
      "updated_at": "2026-02-05T16:28:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2770065479",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2770065479"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    }
  ]
}