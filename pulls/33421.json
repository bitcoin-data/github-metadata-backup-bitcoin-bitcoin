{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421",
    "id": 2837615883,
    "node_id": "PR_kwDOABII586pIpUL",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33421",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33421.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33421.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
    "number": 33421,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "node: add  `BlockTemplateCache`",
    "user": {
      "login": "ismaelsadeeq",
      "id": 48946461,
      "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ismaelsadeeq",
      "html_url": "https://github.com/ismaelsadeeq",
      "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
      "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
      "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
      "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
      "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This PR implements the first step of #33758 by adding a cache layer for node block templates.\r\n\r\nThe cache stores newly created block templates along with their configuration options. When clients request a block template, they specify the maximum age in `MillisecondsDouble`:\r\n- If a matching template exists in the cache and hasn't exceeded the age limit, the cached version is returned (if multiple exist, the most recent one is returned).\r\n- If no matching template exists or the age limit has been exceeded, a new template is generated, cached, and returned.\r\n\r\nThe cache maintains a configurable maximum size (default: 10 templates). When this limit is exceeded, the oldest template is evicted. This is usually checked after each insertion.\r\n\r\nThe cache subscribes to the validation interface and clears itself when blocks are connected (to non-historical chainstate to avoid clearing during assumeutxo background validation) or disconnected from the active chain (during reorgs), preventing stale or invalid templates from being served.\r\n\r\nWhen `test_block_validity` is set to `true` in the block creation options, any cached template that hasn't been validated will be checked before being returned. We also then update the cached block validity to indicate it has been checked.\r\n\r\nThis PR also removes an unused `node/context.h` import from miner to prevent a potential circular dependency during exposing the block template cache to the node context.\r\n",
    "labels": [],
    "created_at": "2025-09-17T18:47:09Z",
    "updated_at": "2026-01-16T14:50:39Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "5adf8ce943572ceda724d21cc03667e3466ac607",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ismaelsadeeq:09-2025-minerman",
      "ref": "09-2025-minerman",
      "sha": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 577730599,
        "node_id": "R_kgDOIm94Jw",
        "name": "bitcoin",
        "full_name": "ismaelsadeeq/bitcoin",
        "owner": {
          "login": "ismaelsadeeq",
          "id": 48946461,
          "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
          "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ismaelsadeeq",
          "html_url": "https://github.com/ismaelsadeeq",
          "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
          "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
          "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
          "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
          "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ismaelsadeeq/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ismaelsadeeq/bitcoin",
        "archive_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ismaelsadeeq/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ismaelsadeeq/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ismaelsadeeq/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/hooks",
        "svn_url": "https://github.com/ismaelsadeeq/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 295373,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-16T14:44:47Z",
        "created_at": "2022-12-13T11:54:34Z",
        "updated_at": "2023-03-10T09:46:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38735,
        "stargazers_count": 87673,
        "watchers_count": 87673,
        "size": 301918,
        "default_branch": "master",
        "open_issues_count": 747,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-15T15:12:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-16T13:30:01Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 505,
    "deletions": 42,
    "changed_files": 10,
    "commits": 9,
    "review_comments": 45,
    "comments": 20
  },
  "events": [
    {
      "event": "renamed",
      "id": 19757369361,
      "node_id": "RTE_lADOABII587MSilzzwAAAASZoYgR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19757369361",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T18:47:12Z",
      "rename": {
        "from": "node: add `BlockTemplateCache` ",
        "to": "node: add `BlockTemplateCache`"
      }
    },
    {
      "event": "commented",
      "id": 3304174608,
      "node_id": "IC_kwDOABII587E8bQQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3304174608",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T18:47:14Z",
      "updated_at": "2026-01-16T14:45:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33421.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3411154210) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34075](https://github.com/bitcoin/bitcoin/pull/34075) (fees: Introduce Mempool Based Fee Estimation to reduce overestimation by ismaelsadeeq)\n* [#33966](https://github.com/bitcoin/bitcoin/pull/33966) (refactor: disentangle miner startup defaults from runtime options by Sjors)\n* [#33922](https://github.com/bitcoin/bitcoin/pull/33922) (mining: add getMemoryLoad() and track template non-mempool memory footprint by Sjors)\n* [#31382](https://github.com/bitcoin/bitcoin/pull/31382) (kernel: Flush in ChainstateManager destructor by sedited)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- \"and block template built with either option can be safely shared between one another.\" -> \"and a block template built with either option can be safely shared between one another.\" [Missing article \"a\" before \"block template\" makes the phrase grammatically incorrect and slightly harder to parse.]\n\n\n\n<sup>2026-01-16</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3304174608",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19757403800,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASZog6Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19757403800",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9682ea7dddf0715021b549f2c19c650ce1111b11",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/9682ea7dddf0715021b549f2c19c650ce1111b11",
      "created_at": "2025-09-17T18:48:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19757416817,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASZokFx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19757416817",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "dca8200c71bb568ffe4821c68209e07a305db80d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/dca8200c71bb568ffe4821c68209e07a305db80d",
      "created_at": "2025-09-17T18:49:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19868476470,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASgQOQ2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19868476470",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "16d55585aa2d26e9177734927b8446faa72570e7",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/16d55585aa2d26e9177734927b8446faa72570e7",
      "created_at": "2025-09-23T14:46:52Z"
    },
    {
      "event": "commented",
      "id": 3324812123,
      "node_id": "IC_kwDOABII587GLJtb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3324812123",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-23T16:45:54Z",
      "updated_at": "2025-09-23T16:45:54Z",
      "author_association": "MEMBER",
      "body": "Forced pushed from dca8200c71bb568ffe4821c68209e07a305db80d to 16d55585aa2d26e9177734927b8446faa72570e7 [5db80d..16d5558](https://github.com/bitcoin/bitcoin/compare/dca8200c71bb568ffe4821c68209e07a305db80d..16d55585aa2d26e9177734927b8446faa72570e7)\r\n\r\nMain Changes are\r\n1. Moved the `BlockTemplateCache` to `src/node/miner.cpp` to fix the circular dependency issue\r\n2. The response now return the block template creation time\r\n3. We search for match from right to left to return the fresh hit first\r\n4. Added a fuzz test that test various cache condition and add more coverage to the BlockAssembler Code.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3324812123",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3324859282,
      "node_id": "IC_kwDOABII587GLVOS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3324859282",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-23T17:01:06Z",
      "updated_at": "2025-09-23T17:05:03Z",
      "author_association": "MEMBER",
      "body": "It seems the new fuzz test in [16d5558](https://github.com/bitcoin/bitcoin/pull/33421/commits/16d55585aa2d26e9177734927b8446faa72570e7)\r\ncaught a minor UndefinedBehaviorSanitizer: unsigned-integer-overflow  issue on master.\r\n\r\n\r\n```\r\n/home/admin/actions-runner/_work/_temp/src/node/miner.cpp:414:47: runtime error: unsigned integer overflow: 2000 - 4000 cannot be represented in type 'size_t' (aka 'unsigned long')\r\n    #0 0x5b2b2753aee0 in node::BlockAssembler::addPackageTxs(int&, int&) /home/admin/actions-runner/_work/_temp/build/src/./node/miner.cpp:414:47\r\n\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /home/admin/actions-runner/_work/_temp/src/node/miner.cpp:414:47 \r\nMS: 5 PersAutoDict-PersAutoDict-EraseBytes-CopyPart-InsertRepeatedBytes- DE: \"\\000\\000\\000\\000\"-\"\\001\\000\\000\\000\\000\\000\\000\\000\"-; base unit: 05fe405753166f125559e7c9ac558654f107c7e9\r\n0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x27,0x27,0x27,0x27,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,\r\n\\001\\000\\000\\000\\000\\000\\000\\000''''\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\r\nartifact_prefix='./'; Test unit written to ./crash-52e81f820b02d40ce3132a4d8e27726deb8eb132\r\nBase64: AQAAAAAAAAAnJycnAAAAAAAAAAAAAAAAAA==\r\n```\r\n\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/17949962995/job/51047356983?pr=33421\r\n\r\nThis is possible on master when node is started with `-blockmaxweight=2000` , `-blockreservedweight=2000` or just `blockmaxweight=2000`  and mining interface `createNewBlock` pass blockReservedWeight as `2000`.\r\n\r\nThis undefined behaviour is possible after #32355 because it introduced a fixed `BLOCK_FULL_ENOUGH_WEIGHT_DELTA` with value `4000`.\r\nBefore #32355 the delta was tied to the `options.blockreservedweight` so will just be `2000 - 2000` which will result in a valid `size_t` value.\r\n\r\nI'll push a commit with a fix soon.\r\n ",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3324859282",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19894590336,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAShz1uA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19894590336",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2dffe160fb056742346c756d40018e0b2402294e",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/2dffe160fb056742346c756d40018e0b2402294e",
      "created_at": "2025-09-24T14:33:08Z"
    },
    {
      "event": "labeled",
      "id": 19898348337,
      "node_id": "LE_lADOABII587MSilzzwAAAASiCLMx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898348337",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:39:29Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 19898348349,
      "node_id": "LE_lADOABII587MSilzzwAAAASiCLM9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898348349",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:39:29Z",
      "label": {
        "name": "Needs backport (29.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "labeled",
      "id": 19898348355,
      "node_id": "LE_lADOABII587MSilzzwAAAASiCLND",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898348355",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:39:29Z",
      "label": {
        "name": "Needs backport (30.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "unlabeled",
      "id": 19898637647,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASiDR1P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898637647",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:54:29Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "unlabeled",
      "id": 19898637657,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASiDR1Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898637657",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:54:29Z",
      "label": {
        "name": "Needs backport (29.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "unlabeled",
      "id": 19898637666,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASiDR1i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19898637666",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:54:29Z",
      "label": {
        "name": "Needs backport (30.x)",
        "color": "dd7200"
      }
    },
    {
      "event": "commented",
      "id": 3330050997,
      "node_id": "IC_kwDOABII587GfIu1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3330050997",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-24T17:55:33Z",
      "updated_at": "2025-09-24T17:55:33Z",
      "author_association": "MEMBER",
      "body": "> It seems the new fuzz test in [16d5558](https://github.com/bitcoin/bitcoin/pull/33421/commits/16d55585aa2d26e9177734927b8446faa72570e7)\r\ncaught a minor UndefinedBehaviorSanitizer: unsigned-integer-overflow issue on master.\r\n\r\nNice! Sorry for the labeling noise, I meant to label #33475",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3330050997",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "referenced",
      "id": 19918132563,
      "node_id": "REFE_lADOABII587MSilzzwAAAASjNpVT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19918132563",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "05d984b1a4fb6402d93a436203e986cde60fd99f",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/05d984b1a4fb6402d93a436203e986cde60fd99f",
      "created_at": "2025-09-25T12:18:24Z"
    },
    {
      "event": "labeled",
      "id": 19920540404,
      "node_id": "LE_lADOABII587MSilzzwAAAASjW1L0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19920540404",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T13:51:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19924504544,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAASjl8_g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19924504544",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ed482dedb510e7b05ae267b7f3c8aa599540a211",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/ed482dedb510e7b05ae267b7f3c8aa599540a211",
      "created_at": "2025-09-25T16:33:21Z"
    },
    {
      "event": "unlabeled",
      "id": 19926582453,
      "node_id": "UNLE_lADOABII587MSilzzwAAAASjt4S1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19926582453",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T18:25:54Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 20450223272,
      "node_id": "LE_lADOABII587MSilzzwAAAATC7aSo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20450223272",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-23T10:04:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20451840060,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATDBlA8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20451840060",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0480018a63723b51d445db18da2f59ee9be55313",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/0480018a63723b51d445db18da2f59ee9be55313",
      "created_at": "2025-10-23T11:28:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20520075418,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATHF4Ca",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20520075418",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "created_at": "2025-10-27T09:33:11Z"
    },
    {
      "event": "unlabeled",
      "id": 20521286142,
      "node_id": "UNLE_lADOABII587MSilzzwAAAATHKfn-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20521286142",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-27T10:23:34Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3268268351,
      "node_id": "PRR_kwDOABII587CzdE_",
      "url": null,
      "actor": null,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-29T16:21:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 5f798b4a3b1a978b8ac954db54e9e8dfc7da6319, though I didn't look closely at the fuzz test. Sorry for the delay in reviewing this, I've been meaning to get to it for some time. I think all the changes seem good and look correct, but I did suggest a number of possible updates below, mostly simplifications that should make the PR smaller.\n\nI do think while the code changes seem good, it would be good to have more clarity about the cases where cache hits are expected and this cache is most likely to be useful. This seems like something that could be mentioned in the BlockTemplateCache documentation. I know the issue #33389 mentioned a number of cases but it's unclear if these would be helped by the caching implemented here or if more changes like sharing templates with different options would be required.\n\nIf you have more changes building on this, or planned changes, it would be helpful to have a pointer or description. I don't know if #31664 would benefit from the caching implemented here, for example.\n\nI tend to think even if this PR is only used to improve `getblocktemplate` and remove global state [[1]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L776), [[2]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L859-L861), [[3]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/node/miner.h#L186-L189), the changes might be worth it but I'm not sure if you implemented or are planning that.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3268268351",
      "submitted_at": "2025-10-29T16:21:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3463610029,
      "node_id": "IC_kwDOABII587Ocn6t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3463610029",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T19:53:20Z",
      "updated_at": "2025-10-29T19:53:20Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review @ryanofsky I will address the comments soon.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3463610029",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20589907571,
      "node_id": "MEE_lADOABII587MSilzzwAAAATLQQ5z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20589907571",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T19:53:22Z"
    },
    {
      "event": "subscribed",
      "id": 20589907592,
      "node_id": "SE_lADOABII587MSilzzwAAAATLQQ6I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20589907592",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-29T19:53:22Z"
    },
    {
      "event": "renamed",
      "id": 20603265371,
      "node_id": "RTE_lADOABII587MSilzzwAAAATMDOFb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20603265371",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T09:43:35Z",
      "rename": {
        "from": "node: add `BlockTemplateCache`",
        "to": "node: add  `BlockTemplate{Cache, Manager}`"
      }
    },
    {
      "event": "commented",
      "id": 3466996399,
      "node_id": "IC_kwDOABII587Opiqv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3466996399",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T09:45:12Z",
      "updated_at": "2025-10-30T09:45:12Z",
      "author_association": "MEMBER",
      "body": " > I do think while the code changes seem good, it would be good to have more clarity about the cases where cache hits are expected and this cache is most likely to be useful. This seems like something that could be mentioned in the BlockTemplateCache documentation. I know the issue #33389 mentioned a number of cases but it's unclear if these would be helped by the caching implemented here or if more changes like sharing templates with different options would be required.\r\n> \r\n> If you have more changes building on this, or planned changes, it would be helpful to have a pointer or description. I don't know if #31664 would benefit from the caching implemented here, for example. \r\n\r\nI've expanded the PR description to be detailed as much as possible  as such IMHO this component will do more than caching, it should be called the **Block Template Manager** instead.\r\n\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3466996399",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3467320432,
      "node_id": "IC_kwDOABII587Oqxxw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3467320432",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T10:49:15Z",
      "updated_at": "2025-10-30T10:49:15Z",
      "author_association": "MEMBER",
      "body": "> I tend to think even if this PR is only used to improve getblocktemplate and remove global state [[1]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L776), [[2]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L859-L861), [[3]](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/node/miner.h#L186-L189), the changes might be worth it but I'm not sure if you implemented or are planning that.\r\n\r\n\r\nWith the block template manager, we should get rid of these globals  especially `nTransactionsUpdated`\r\nCurrently, we donâ€™t actually know whether the updated transactions affect the top block template or not, so itâ€™s not a strictly the correct approach.\r\n\r\nWe should update `getblocktemplate` to also provide a fee threshold like the mining interface instead of these state and because we already have previously built block templates cached  we can easily compute the fee difference and reuse the block template managerâ€™s `GetNext` method (see the PR description).\r\n\r\nClients wonâ€™t need to track the previous state; the block template manager will handle that. This allows us to remove `GetTransactionsUpdated` from the mempool as well, and with that `getblocktemplate` logic will be simpler I think.\r\n\r\nRemoving `m_last_block_num_txs` and `m_last_block_weight` from the block assembler will also be possible, since that information can easily be retrieved from the block template manager.\r\nIâ€™ll add this to the OP thanks for highlighting these global state.\r\n\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3467320432",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3472829721,
      "node_id": "IC_kwDOABII587O_y0Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3472829721",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T12:16:24Z",
      "updated_at": "2025-10-31T12:16:24Z",
      "author_association": "MEMBER",
      "body": "> Plan\r\n\r\nIs this the plan for the current PR? Otherwise maybe it makes more sense to move that to the tracking issue.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3472829721",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "commented",
      "id": 3473398583,
      "node_id": "IC_kwDOABII587PB9s3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3473398583",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T14:42:08Z",
      "updated_at": "2025-10-31T14:42:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the updated description. This all seems reasonable and is helpful. I do agree with Sjors though it could be good to move the information about next steps into #33389 which could become a tracking issue. Or you could close #33389 and make a new tracking issue (if things have changed since #33389 was opened). Also the current description ends abruptly with \"It would be nice to also\" so looks like some text is missing.\r\n\r\nOther thoughts and suggestions:\r\n\r\n- As long as caching is implemented here, it would seem make sense to expose it to IPC and RPC clients so if there are multiple clients they could take advantage of the cached templates. Implementing this could be as simple as adding `max_age` options to `BlockCreateOption` and `getblocktemplate`.\r\n\r\n- It would be nice to add a basic c++ unit test using `BlockTemplateCache` so if there are changes or bugfixes to this code it is easy to write tests covering them them. The fuzz test is good too, but fuzz tests are more awkward to run. Also, if there any are parts of the fuzz test that don't really benefit from random inputs, it could make sense to make them unit tests instead.\r\n\r\n- No strong opinion, but I'm not really sure this code needs to have both BlockTemplateCache and BlockTemplateManager classes. I'm hoping the PR will stick to only introducing a BlockTemplateCache now, and not add extra layers to the implementation until they are justified. I think it's fine for example if BlockTemplateCache holds a cache and a few stats and counters without needing a separate BlockTemplateManager to hold the counters, unless BlockTemplateManager is going to implement more significant functionality.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3473398583",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20639584137,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATONw-J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20639584137",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/084bfbc1ec7f8f64f54d231bb641285622311b59",
      "created_at": "2025-10-31T17:24:38Z"
    },
    {
      "event": "commented",
      "id": 3474113647,
      "node_id": "IC_kwDOABII587PEsRv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474113647",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T17:27:29Z",
      "updated_at": "2025-10-31T17:27:29Z",
      "author_association": "MEMBER",
      "body": "Forced pushed from 5f798b4a3b1a978b8ac954db54e9e8dfc7da6319 to 084bfbc1ec7f8f64f54d231bb641285622311b59 Compare diff [dfc7da6319..084bfbc1](https://github.com/bitcoin/bitcoin/compare/5f798b4a3b1a978b8ac954db54e9e8dfc7da6319..084bfbc1ec7f8f64f54d231bb641285622311b59)\r\n\r\nThanks for your thorough review. I've made significant changes following your feedback:\r\n\r\n* Removed the first commit, as it is out of scope for now. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2379497293](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2379497293)\r\n* Changed the `block_template_cache` instance in node interfaces to `unique_ptr` and properly unregistered it from the validation interface. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472926339](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472926339) [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472932269](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472932269)\r\n* Simplified the implementation of the `BlockTemplateCache` class as suggested. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473041954](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473041954)\r\n* Clarified why I donâ€™t check that the coinbase script must match, and why we donâ€™t check that block validity must also match. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366)\r\n* Implemented a comparison operator for block creation options. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473223014](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473223014)\r\n* Removed the template. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473250518](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473250518)\r\n* Removed the incorrect `BlockTemplateCache` forward declaration in miner. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473275740](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473275740)\r\n* Renamed the generic cache size variable to be more specific. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473282308](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473282308)\r\n* Invalidated the cache after block disconnection and handled background validation block connection. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473298969](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473298969)\r\n* Made `IntervalElapsed` an inline and standalone function. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473412280](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473412280)\r\n* Added a clarifying comment that we always create a new template when the maximum age is 0. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473491581](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473491581)\r\n* Fixed grammar nits. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473499003](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473499003)\r\n* Made the block template cache own the chainstate instead of the chainman. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473636918](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473636918)\r\n* Moved the `max_age` variable to block creation options. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473664992](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473664992)\r\n* Made `GetBlockTemplate` return a shared pointer. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473682869](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473682869)\r\n* Defined a `BlocktemplateRef` type alias. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473714111](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473714111)\r\n* Deduplicated code as suggested. [https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2474149528](https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2474149528)\r\n\r\nOther update\r\n\r\n- The PR is now using the `block.nTime` for time comparison.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3474113647",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "renamed",
      "id": 20640258880,
      "node_id": "RTE_lADOABII587MSilzzwAAAATOQVtA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640258880",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:02:31Z",
      "rename": {
        "from": "node: add  `BlockTemplate{Cache, Manager}`",
        "to": "node: add  `BlockTemplateCache`"
      }
    },
    {
      "event": "commented",
      "id": 3474397434,
      "node_id": "IC_kwDOABII587PFxj6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474397434",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:43Z",
      "updated_at": "2025-10-31T18:38:43Z",
      "author_association": "MEMBER",
      "body": "Thanks for you recent comment @ryanofsky @Sjors \r\n\r\n> Is this the plan for the current PR? Otherwise maybe it makes more sense to move that to the tracking issue.\r\n\r\n> This all seems reasonable and is helpful. I do agree with Sjors though it could be good to move the information about next steps into https://github.com/bitcoin/bitcoin/issues/33389 which could become a tracking issue. Or you could close https://github.com/bitcoin/bitcoin/issues/33389 and make a new tracking issue (if things have changed since https://github.com/bitcoin/bitcoin/issues/33389 was opened). Also the current description ends abruptly with \"It would be nice to also\" so looks like some text is missing.\r\n\r\nYes done, and also fixed the PR description.\r\n\r\n>  Implementing this could be as simple as adding max_age options to BlockCreateOption and getblocktemplate.\r\n\r\nYes good idea, with the current iteration it can easily be done, however I did not see a use case yet (I did not think hard). \r\n\r\n> It would be nice to add a basic c++ unit test using BlockTemplateCache so if there are changes or bugfixes to this code it is easy to write tests covering them them. The fuzz test is good too, but fuzz tests are more awkward to run. Also, if there any are parts of the fuzz test that don't really benefit from random inputs, it could make sense to make them unit tests instead.\r\n\r\nUnit test is nice to demonstrate usage and test some cases, but I really like the coverage fuzz test provide like catching some subtle bugs that could be missed in review.\r\n\r\n> No strong opinion, but I'm not really sure this code needs to have both BlockTemplateCache and BlockTemplateManager classes. I'm hoping the PR will stick to only introducing a BlockTemplateCache now, and not add extra layers to the implementation until they are justified. I think it's fine for example if BlockTemplateCache holds a cache and a few stats and counters without needing a separate BlockTemplateManager to hold the counters, unless BlockTemplateManager is going to implement more significant functionality.\r\n\r\nYou are right, i've limit this to just the cache, we can talk about the block template manager when their is code to review and debate on the best approach.\r\n\r\n\r\nI see some fuzz test are failing, I will work on fixing it and also will make commit atomic per some of @ryanofsky  suggestions",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3474397434",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20640977078,
      "node_id": "MEE_lADOABII587MSilzzwAAAATOTFC2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977078",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "subscribed",
      "id": 20640977114,
      "node_id": "SE_lADOABII587MSilzzwAAAATOTFDa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977114",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "mentioned",
      "id": 20640977139,
      "node_id": "MEE_lADOABII587MSilzzwAAAATOTFDz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977139",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "subscribed",
      "id": 20640977158,
      "node_id": "SE_lADOABII587MSilzzwAAAATOTFEG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640977158",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:38:45Z"
    },
    {
      "event": "reviewed",
      "id": 3411154210,
      "node_id": "PRR_kwDOABII587LUhUi",
      "url": null,
      "actor": null,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-03T14:30:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 084bfbc1ec7f8f64f54d231bb641285622311b59 reviewing first commit in detail, but reviewed fuzz test in second commit pretty lightly. Changes here all seem very straightforward and implmenetation seems simpler than it was initially.\n\nI do still suspect specifying template age in seconds instead of using a more granular measure may be a mistake if this caching is supposed to be useful for mining, but others would know more about this than me. It would seem straightfoward to add another field and nice to move away from `uint32_t nTime` anyway to take advantage of better c++ types.\n\nAlso still think it could be good to have a least 1 or 2 unit tests and try simplify the fuzz test so all tests are easier to understand and run.\n\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3411154210",
      "submitted_at": "2025-11-03T14:30:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3486388292,
      "node_id": "IC_kwDOABII587PzhBE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3486388292",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T14:53:07Z",
      "updated_at": "2025-11-04T14:53:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "I left the `block_template_cache` fuzz target running overnight and generated a coverage report for it: https://brunoerg.xyz/bitcoin-core-coverage/33421/coverage_report/",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3486388292",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "reviewed",
      "id": 3416949149,
      "node_id": "PRR_kwDOABII587LqoGd",
      "url": null,
      "actor": null,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T15:02:45Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3416949149",
      "submitted_at": "2025-11-04T15:02:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3486744593,
      "node_id": "IC_kwDOABII587P04AR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3486744593",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:54Z",
      "updated_at": "2025-11-04T15:58:54Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review @ryanofsky and the coverage report @brunoerg\r\n\r\nI will update the PR shortly with the suggestions and study the report.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3486744593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20706780966,
      "node_id": "MEE_lADOABII587MSilzzwAAAATSOGcm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706780966",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "subscribed",
      "id": 20706781002,
      "node_id": "SE_lADOABII587MSilzzwAAAATSOGdK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706781002",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "mentioned",
      "id": 20706781047,
      "node_id": "MEE_lADOABII587MSilzzwAAAATSOGd3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706781047",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "subscribed",
      "id": 20706781067,
      "node_id": "SE_lADOABII587MSilzzwAAAATSOGeL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20706781067",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T15:58:56Z"
    },
    {
      "event": "reviewed",
      "id": 3417441597,
      "node_id": "PRR_kwDOABII587LsgU9",
      "url": null,
      "actor": null,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-04T16:27:07Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3417441597",
      "submitted_at": "2025-11-04T16:27:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3487272706,
      "node_id": "IC_kwDOABII587P248C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3487272706",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T17:37:06Z",
      "updated_at": "2025-11-04T17:38:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Unit test is nice to demonstrate usage and test some cases, but I really like the coverage fuzz test provide like catching some subtle bugs that could be missed in review.\r\n\r\nI agree with @ryanofsky about having unit test - fuzzing doesn't exclude the need of having unit tests. Fuzzing depends on the provided inputs, unit tests are usually faster, great for regression, demonstrate usage (especially edge cases), etc. Also, the general goal of fuzzing is catching assertion failures, integer overflows, memory violations, etc - but we usually might leverage it by writing harnesses that can check some behavior things - e.g. we can put some metamorphic relations, round-trip assertions, and others (see [An empirical evaluation of fuzz targets using mutation testing](https://sol.sbc.org.br/index.php/sast/article/view/36885/36671)) - as you did here. However, we shouldn't sacrifice performance in favor of it - fuzzing is search. Your fuzz target is good but note that for every single iteration you call `GetBlockTemplate` several times as well as some `BlockConnected`/`BlockDisconnected` to test the cache for every scenario - on my server it barely got more than 50 exec/s.",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3487272706",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20709386040,
      "node_id": "MEE_lADOABII587MSilzzwAAAATSYCc4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20709386040",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T17:37:08Z"
    },
    {
      "event": "subscribed",
      "id": 20709386108,
      "node_id": "SE_lADOABII587MSilzzwAAAATSYCd8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20709386108",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T17:37:08Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20736543068,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATT_olc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736543068",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "16679e3c75f6dd8f696e144afda47d79f844849c",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/16679e3c75f6dd8f696e144afda47d79f844849c",
      "created_at": "2025-11-05T17:15:06Z"
    },
    {
      "event": "mentioned",
      "id": 20736570976,
      "node_id": "MEE_lADOABII587MSilzzwAAAATT_vZg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736570976",
      "actor": {
        "login": "return",
        "id": 7050293,
        "node_id": "MDQ6VXNlcjcwNTAyOTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7050293?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/return",
        "html_url": "https://github.com/return",
        "followers_url": "https://api.github.com/users/return/followers",
        "following_url": "https://api.github.com/users/return/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/return/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/return/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/return/subscriptions",
        "organizations_url": "https://api.github.com/users/return/orgs",
        "repos_url": "https://api.github.com/users/return/repos",
        "events_url": "https://api.github.com/users/return/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/return/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:16:23Z"
    },
    {
      "event": "subscribed",
      "id": 20736571012,
      "node_id": "SE_lADOABII587MSilzzwAAAATT_vaE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736571012",
      "actor": {
        "login": "return",
        "id": 7050293,
        "node_id": "MDQ6VXNlcjcwNTAyOTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7050293?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/return",
        "html_url": "https://github.com/return",
        "followers_url": "https://api.github.com/users/return/followers",
        "following_url": "https://api.github.com/users/return/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/return/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/return/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/return/subscriptions",
        "organizations_url": "https://api.github.com/users/return/orgs",
        "repos_url": "https://api.github.com/users/return/repos",
        "events_url": "https://api.github.com/users/return/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/return/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:16:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20736584811,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATT_yxr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736584811",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "da8554291cdee0371d27a1116a64d3a40ffc74d5",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/da8554291cdee0371d27a1116a64d3a40ffc74d5",
      "created_at": "2025-11-05T17:17:02Z"
    },
    {
      "event": "labeled",
      "id": 20736601172,
      "node_id": "LE_lADOABII587MSilzzwAAAATT_2xU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20736601172",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:17:52Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20737031660,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATUBf3s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737031660",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a3f0010c2062fc88720e7eae33694f2491c32ebe",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/a3f0010c2062fc88720e7eae33694f2491c32ebe",
      "created_at": "2025-11-05T17:38:07Z"
    },
    {
      "event": "commented",
      "id": 3492547495,
      "node_id": "IC_kwDOABII587QLAun",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3492547495",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:43:08Z",
      "updated_at": "2025-11-05T17:43:08Z",
      "author_association": "MEMBER",
      "body": "I forced pushed from 084bfbc1ec7f8f64f54d231bb641285622311b59 to  a3f0010c2062fc88720e7eae33694f2491c32ebe [2311b59..a3f001](https://github.com/bitcoin/bitcoin/compare/084bfbc1ec7f8f64f54d231bb641285622311b59..a3f0010c2062fc88720e7eae33694f2491c32ebe)\r\n- We now avoid the second copy when submitting solution by moving the block by value when constructing the shared pointer https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486576551\r\n- Removed the `operator=` in block assembler options and instead introduce a `SimilarOptions` function, I think it's better this way because I plan to extend this logic later by indicating whenever options are similar but it's just the block max weight that differ, this is useful for enabling reusing a larger template in the cache when a smaller one is needed with same matching other options. https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486593971\r\n- Updated the mempool object in the cache to be stored by reference not pointer https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486606258\r\n- Make `TimeIntervalElapsed` parameter `time_interval` be copied by value. https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486621134\r\n- Update `maximum_template_age` to `max_template_age` https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486625191\r\n- Fix previous C.I failure by not having to deal with raw seconds value, we use `MillisecondsDouble` instead https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2490867264\r\n- Get rid of `num_iterations` variable https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2491199977\r\n- Fixed https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3487272706 and https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3411154210 comment that requested for a unit test.\r\n\r\n@brunoerg thanks the resource it's helpful.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3492547495",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20737129090,
      "node_id": "MEE_lADOABII587MSilzzwAAAATUB3qC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737129090",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:43:10Z"
    },
    {
      "event": "subscribed",
      "id": 20737129122,
      "node_id": "SE_lADOABII587MSilzzwAAAATUB3qi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737129122",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T17:43:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20737336078,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATUCqMO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20737336078",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "48ddc09eaf13a0d6010df9c2506fe62ffcaf67f3",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/48ddc09eaf13a0d6010df9c2506fe62ffcaf67f3",
      "created_at": "2025-11-05T17:53:51Z"
    },
    {
      "event": "unlabeled",
      "id": 20740561790,
      "node_id": "UNLE_lADOABII587MSilzzwAAAATUO9t-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20740561790",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T20:30:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 20740998740,
      "node_id": "LE_lADOABII587MSilzzwAAAATUQoZU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20740998740",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T20:48:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3493347928,
      "node_id": "IC_kwDOABII587QOEJY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3493347928",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-05T20:48:28Z",
      "updated_at": "2025-11-05T20:48:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `macOS native, no depends, sqlite only, gui`: https://github.com/bitcoin/bitcoin/actions/runs/19111349459/job/54623138521</sub>\n<sub>LLM reason (âœ¨ experimental): miner_tests test suite failed (CTest reported 1 failure).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3493347928",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20759002418,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATVVT0y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20759002418",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "81e7c4e668e99581b96660952534f73e4b329936",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/81e7c4e668e99581b96660952534f73e4b329936",
      "created_at": "2025-11-06T12:36:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20760510841,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATVbEF5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20760510841",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ae6a41a62295ac434e37ff924bb3d89dc1decd26",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/ae6a41a62295ac434e37ff924bb3d89dc1decd26",
      "created_at": "2025-11-06T13:45:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20762339337,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATViCgJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20762339337",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "83aa83dc63f0cbbe726546bf1dbf751766bdbbea",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/83aa83dc63f0cbbe726546bf1dbf751766bdbbea",
      "created_at": "2025-11-06T15:00:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20763105162,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATVk9eK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20763105162",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "cf05272bb70d100769432d3cfdfece652a8410ba",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/cf05272bb70d100769432d3cfdfece652a8410ba",
      "created_at": "2025-11-06T15:26:09Z"
    },
    {
      "event": "commented",
      "id": 3497856893,
      "node_id": "IC_kwDOABII587QfQ99",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3497856893",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-06T15:34:33Z",
      "updated_at": "2025-11-06T15:34:58Z",
      "author_association": "MEMBER",
      "body": "_Apologies for the force pushes, I am attempting to fix a C.I failure which happens only remotely due to `SetMockTime` not able to nudge the node clock in ms, I adjusted the time advances to be in seconds with a large buffer_",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3497856893",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "labeled",
      "id": 20832879764,
      "node_id": "LE_lADOABII587MSilzzwAAAATZvISU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20832879764",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-10T10:49:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20843062222,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAATaV-PO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20843062222",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "created_at": "2025-11-10T17:46:21Z"
    },
    {
      "event": "unlabeled",
      "id": 20860771374,
      "node_id": "UNLE_lADOABII587MSilzzwAAAATbZhwu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20860771374",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T11:45:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3516832835,
      "node_id": "IC_kwDOABII587RnpxD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3516832835",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:02:05Z",
      "updated_at": "2025-11-11T13:02:05Z",
      "author_association": "MEMBER",
      "body": "The following in the PR description had me confused:\r\n\r\n> Client requests for block templates will specify the maximum age of the template in seconds; that is, how fresh they want the template to be:\r\n\r\nI thought it meant that templates have an expiration time, but from 8af9ede0608f5bb4fe3eddf7d3fe4fbb57a4649d it's clear that the caller specifies how old cached templates can be (via `max_template_age`).\r\n\r\nIf you're having trouble with mock time in the tests / fuzzer, it might help to add some direct tests to `TimeIntervalElapsed ` in 3ed16ab58f5773113efdd973d94911c93459637e.\r\n\r\nCommit ddbad03dddeba255b016622d4569aecbf74b9366 _miner: add block template cache_ introduces quite a lot stuff, without explanation. E.g. I was not expecting to see `validation_signals` as relevant for a cache. It would be good to expand the commit message. Maybe it's better to split this commit, and then introduce the unit tests from e45a195def5f8be0793ba585f49e4d5ff5c8b286 gradually to explain where the complexity comes from.\r\n\r\nI wonder if it makes sense to introduce and use `BlockTemplateRef` as a pure refactor in an earlier commit. That way 9500dca555f7394cd3e51821312309d5b9633539 _interfaces: create block template via block template cache_ just needs to change the type from `std::unique_ptr` to `std::shared_ptr` making that commit smaller.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3516832835",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "reviewed",
      "id": 3447844157,
      "node_id": "PRR_kwDOABII587Nge09",
      "url": null,
      "actor": null,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:02:29Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3447844157",
      "submitted_at": "2025-11-11T13:02:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "reviewed",
      "id": 3448014534,
      "node_id": "PRR_kwDOABII587NhIbG",
      "url": null,
      "actor": null,
      "commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T13:13:55Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3448014534",
      "submitted_at": "2025-11-11T13:13:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "commented",
      "id": 3518690143,
      "node_id": "IC_kwDOABII587RuvNf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3518690143",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:39Z",
      "updated_at": "2025-11-11T20:52:39Z",
      "author_association": "MEMBER",
      "body": "I really appreciate the feedback and reviews so far from @ryanofsky, @Sjors, and @brunoerg.\r\nGiven that Iâ€™ve opened #33758 with the overall plan and weâ€™ve had some recent discussions https://github.com/bitcoin/bitcoin/issues/33756#issuecomment-3502079264, Iâ€™ll work on fixing the C. I issue here hence marking as draft.\r\n\r\nI will also work on the e2e implementation separately.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3518690143",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 20872045998,
      "node_id": "MEE_lADOABII587MSilzzwAAAATcEiWu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872045998",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:40Z"
    },
    {
      "event": "subscribed",
      "id": 20872046028,
      "node_id": "SE_lADOABII587MSilzzwAAAATcEiXM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046028",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:40Z"
    },
    {
      "event": "mentioned",
      "id": 20872046075,
      "node_id": "MEE_lADOABII587MSilzzwAAAATcEiX7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046075",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "subscribed",
      "id": 20872046106,
      "node_id": "SE_lADOABII587MSilzzwAAAATcEiYa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046106",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "mentioned",
      "id": 20872046138,
      "node_id": "MEE_lADOABII587MSilzzwAAAATcEiY6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046138",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "subscribed",
      "id": 20872046155,
      "node_id": "SE_lADOABII587MSilzzwAAAATcEiZL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872046155",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:41Z"
    },
    {
      "event": "convert_to_draft",
      "id": 20872050105,
      "node_id": "CTDE_lADOABII587MSilzzwAAAATcEjW5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20872050105",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T20:52:54Z"
    },
    {
      "event": "labeled",
      "id": 21163499074,
      "node_id": "LE_lADOABII587MSilzzwAAAATtcV5C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21163499074",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T12:25:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21791587216,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUS4TuQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21791587216",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/3dac7252ab383bcd682609c5159b67ab9327385d",
      "created_at": "2025-12-30T10:35:35Z"
    },
    {
      "event": "unlabeled",
      "id": 21792430861,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUS7hsN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21792430861",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T11:43:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21793790695,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUTAtrn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21793790695",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6bc1e3ff74b7a0f05189f2af2f3f0c9e3cf5c423",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/6bc1e3ff74b7a0f05189f2af2f3f0c9e3cf5c423",
      "created_at": "2025-12-30T13:18:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22013319633,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUgGJnR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22013319633",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "created_at": "2026-01-13T10:48:25Z"
    },
    {
      "event": "unlabeled",
      "id": 22015217639,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUgNY_n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22015217639",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T12:18:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 22016584019,
      "node_id": "LE_lADOABII587MSilzzwAAAAUgSmlT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22016584019",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T13:20:52Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22022342972,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUgokk8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022342972",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "84b67c7ba898323f19a5d51074521287699d825f",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/84b67c7ba898323f19a5d51074521287699d825f",
      "created_at": "2026-01-13T16:56:22Z"
    },
    {
      "event": "ready_for_review",
      "id": 22022619254,
      "node_id": "RFRE_lADOABII587MSilzzwAAAAUgpoB2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022619254",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:08:36Z"
    },
    {
      "event": "commented",
      "id": 3745476010,
      "node_id": "IC_kwDOABII587fP22q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3745476010",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:10Z",
      "updated_at": "2026-01-13T17:12:10Z",
      "author_association": "MEMBER",
      "body": "Thanks for your reviews @Sjors @ryanofsky, and @brunoerg. I have split the commits to be more atomic and added a description based on @Sjors suggestion and rebased.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3745476010",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33421"
    },
    {
      "event": "mentioned",
      "id": 22022701992,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUgp8Oo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022701992",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "subscribed",
      "id": 22022702065,
      "node_id": "SE_lADOABII587MSilzzwAAAAUgp8Px",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702065",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "mentioned",
      "id": 22022702134,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUgp8Q2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702134",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "subscribed",
      "id": 22022702162,
      "node_id": "SE_lADOABII587MSilzzwAAAAUgp8RS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702162",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "mentioned",
      "id": 22022702197,
      "node_id": "MEE_lADOABII587MSilzzwAAAAUgp8R1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702197",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "subscribed",
      "id": 22022702222,
      "node_id": "SE_lADOABII587MSilzzwAAAAUgp8SO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022702222",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:12:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22022774785,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUgqOAB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022774785",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d",
      "created_at": "2026-01-13T17:15:33Z"
    },
    {
      "event": "labeled",
      "id": 22022788822,
      "node_id": "LE_lADOABII587MSilzzwAAAAUgqRbW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22022788822",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:16:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22023398004,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUgsmJ0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22023398004",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T17:46:09Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 22024534847,
      "node_id": "UNLE_lADOABII587MSilzzwAAAAUgw7s_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22024534847",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-13T18:40:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3665634839,
      "node_id": "PRR_kwDOABII587afSYX",
      "url": null,
      "actor": null,
      "commit_id": "8b8f2c2211e6f751994f446ba1fdeea2b0d4f22d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-15T13:44:41Z",
      "author_association": "MEMBER",
      "body": "I still need to review _miner: introduce `BlockTemplateCache` for reusing shareable block templates_ and later. Some notes so far:\r\n\r\nThe trivial commits 2099bdb903dfa042eb61f748b548d3c31121e335 and 522fcc5734062302dff19e9149aa4d011999d39f should probably be squashed into the first commit that needs the variable they introduce.\r\n\r\nI suggest making 7370591a9a116d3e4eb1e7a9b974e41ecf98af93 the first commit. Good chance some other PR takes it before this one.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3665634839",
      "submitted_at": "2026-01-15T13:44:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ5MTEyYTUzYzgzN2YwZmIwMDdmNGYxZGE4MmJlNzlmNmYwYmQzYzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49112a53c837f0fb007f4f1da82be79f6f0bd3c4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/49112a53c837f0fb007f4f1da82be79f6f0bd3c4",
      "tree": {
        "sha": "508385018e945277e3375f0d292f7fab8f040497",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/508385018e945277e3375f0d292f7fab8f040497"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 508385018e945277e3375f0d292f7fab8f040497\nparent 62557c95298d88be8920c1b3b952d07d0aedb1af\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768322310 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768572859 +0000\n\nminer: remove unused `node/context.h` import\n\n- This prevents circular dependecy when we introduce\n  BlockTemplateCache in miner and want to expose it\n  via the node context.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHQEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpHuwAKCRAOOQjzZJiY\niD1XAPY/F+QX0FXXnJ8GKeLBJk2sa+3RLFAdZXd5gy/e52dAAQC1aQhv7Ze5fvpv\nJXRPj9kg5e5DSF/C3rsTbfLHKMeFDg==\n=Hwd8\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/62557c95298d88be8920c1b3b952d07d0aedb1af",
          "sha": "62557c95298d88be8920c1b3b952d07d0aedb1af",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/62557c95298d88be8920c1b3b952d07d0aedb1af"
        }
      ],
      "message": "miner: remove unused `node/context.h` import\n\n- This prevents circular dependecy when we introduce\n  BlockTemplateCache in miner and want to expose it\n  via the node context.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:14:19Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-13T16:38:30Z"
      },
      "sha": "49112a53c837f0fb007f4f1da82be79f6f0bd3c4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4MDY0YTBjMjRhNTVhYTMyMDJhZDVmMGVhNDNiM2ZiY2M3YmFkMDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
      "tree": {
        "sha": "4695a39712e99aa053a0a6902a1100b2b264f20e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4695a39712e99aa053a0a6902a1100b2b264f20e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4695a39712e99aa053a0a6902a1100b2b264f20e\nparent 49112a53c837f0fb007f4f1da82be79f6f0bd3c4\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1762358480 +0100\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768572860 +0000\n\nminer: add block creation time point to `CBlockTemplate`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpHvQAKCRAOOQjzZJiY\niHmrAQDgh4Ujc5YcOmKHopj/HaxhWYIM0EkWD5K4QHLyVK8IzQEA75o38ccLs+Zw\nyNdLtY3V4nQcRjo7Wcj74cv1eOvjUgk=\n=ThrE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49112a53c837f0fb007f4f1da82be79f6f0bd3c4",
          "sha": "49112a53c837f0fb007f4f1da82be79f6f0bd3c4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/49112a53c837f0fb007f4f1da82be79f6f0bd3c4"
        }
      ],
      "message": "miner: add block creation time point to `CBlockTemplate`",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:14:20Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-05T16:01:20Z"
      },
      "sha": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjMGYxNjVkMGI4NjA3ZGU3OGE4OTQ1ZWMwMWQ5MTY4OGVlY2UzMTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac0f165d0b8607de78a8945ec01d91688eece317",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ac0f165d0b8607de78a8945ec01d91688eece317",
      "tree": {
        "sha": "b601ee67e881114b2aab12bf9721ecc656852ac4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b601ee67e881114b2aab12bf9721ecc656852ac4"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b601ee67e881114b2aab12bf9721ecc656852ac4\nparent e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1762357837 +0100\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768572861 +0000\n\nminer: add `TimeIntervalElapsed` function\n\n- This function returns true if current time is greater or equal to `prev_time + time_interval`\n  or if `prev_time` is greater than the current time (indicating clock moved backward).\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpHvgAKCRAOOQjzZJiY\niHzkAQCr8KTW3DdWcO9Ne+1jacD+GgVIC0hl2V41G0JEzgSYOgD9GwsDhev/NbGb\n/+HlA/w+JDXau/1KPx7pKk25UJiT9wo=\n=gV66\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
          "sha": "e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e8064a0c24a55aa3202ad5f0ea43b3fbcc7bad09"
        }
      ],
      "message": "miner: add `TimeIntervalElapsed` function\n\n- This function returns true if current time is greater or equal to `prev_time + time_interval`\n  or if `prev_time` is greater than the current time (indicating clock moved backward).",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:14:21Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-05T15:50:37Z"
      },
      "sha": "ac0f165d0b8607de78a8945ec01d91688eece317"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhlNjMzNjg4NzM1MTdlZjE1YjhlMmRmY2U2Y2MzNzMyOGEzOTUzNWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8e63368873517ef15b8e2dfce6cc37328a39535b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8e63368873517ef15b8e2dfce6cc37328a39535b",
      "tree": {
        "sha": "c1c9fbcf001cf0f1cdd88ea5b2c6c2be01cf812b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1c9fbcf001cf0f1cdd88ea5b2c6c2be01cf812b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c1c9fbcf001cf0f1cdd88ea5b2c6c2be01cf812b\nparent ac0f165d0b8607de78a8945ec01d91688eece317\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1762358770 +0100\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768574209 +0000\n\nminer: add `ShareableOptions` function\n\n- This function checks whether two block assembler options\n  a and b have mostly the same values; such that block a can be used\n  in place of block b without an issue.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpNDwAKCRAOOQjzZJiY\niGSNAQC3yFIpQExE8qWh1WG+7QcAWU6gt6765k32dx8ul1J1lwEAhSFKZYicTHgN\niwwrDknihJTiVGaj0vr9D50be292kgk=\n=+wYt\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac0f165d0b8607de78a8945ec01d91688eece317",
          "sha": "ac0f165d0b8607de78a8945ec01d91688eece317",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ac0f165d0b8607de78a8945ec01d91688eece317"
        }
      ],
      "message": "miner: add `ShareableOptions` function\n\n- This function checks whether two block assembler options\n  a and b have mostly the same values; such that block a can be used\n  in place of block b without an issue.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:36:49Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-05T16:06:10Z"
      },
      "sha": "8e63368873517ef15b8e2dfce6cc37328a39535b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJmMjAyZWMwNDM4ZGZjMTg5NjlmZjliZjZlYTMyMGU0YTNiNmE1NTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
      "tree": {
        "sha": "596ddc09787333bcdcdd0b6c2fac2c28cee29ed5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/596ddc09787333bcdcdd0b6c2fac2c28cee29ed5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 596ddc09787333bcdcdd0b6c2fac2c28cee29ed5\nparent 8e63368873517ef15b8e2dfce6cc37328a39535b\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768315345 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768574228 +0000\n\nminer: introduce `BlockTemplateCache` for reusing block templates\n\n- This commit introduces `BlockTemplateRef` type alias and\n  added a new `max_template_age` value to `BlockAssember::Options`.\n\n- The commit then introduces a BlockTemplateCache which saves all newly\n  created block templates to a certain configurable cache limit.\n\n- Whenever the cache limit is reached, the oldest block template is\n  evicted.\n\n- When a client request for a template from the BlockTemplateCache,\n  the client provides block creation option and maximum interval;\n  The maximum interval indicates how fresh the client wants the template\n  to be. The BlockTemplateCache checks for a cached template that have\n  a shareable block creation option and the time delta since creation\n  does not exceed the client maximum interval; the most-recent match is\n  returned else a new template is generated and added to the cache.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpNFQAKCRAOOQjzZJiY\niFINAQCVV0kc/Jxo9msfDpsPvrYLsvMg+4MFoSt1F3yXkjn0xwD/RKAjtqVzjmME\n+x2lgSX8DgPMl0qCBomdkCnOV/mT7Qg=\n=VOCL\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8e63368873517ef15b8e2dfce6cc37328a39535b",
          "sha": "8e63368873517ef15b8e2dfce6cc37328a39535b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8e63368873517ef15b8e2dfce6cc37328a39535b"
        }
      ],
      "message": "miner: introduce `BlockTemplateCache` for reusing block templates\n\n- This commit introduces `BlockTemplateRef` type alias and\n  added a new `max_template_age` value to `BlockAssember::Options`.\n\n- The commit then introduces a BlockTemplateCache which saves all newly\n  created block templates to a certain configurable cache limit.\n\n- Whenever the cache limit is reached, the oldest block template is\n  evicted.\n\n- When a client request for a template from the BlockTemplateCache,\n  the client provides block creation option and maximum interval;\n  The maximum interval indicates how fresh the client wants the template\n  to be. The BlockTemplateCache checks for a cached template that have\n  a shareable block creation option and the time delta since creation\n  does not exceed the client maximum interval; the most-recent match is\n  returned else a new template is generated and added to the cache.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:37:08Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-13T14:42:25Z"
      },
      "sha": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcyMTQ0ZmRhZmVhYTc1NzZjYzdhZWRlYjRkNTlkODRjMjlmZjAyMzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
      "tree": {
        "sha": "2bb3530575a44e831f98b29339078a4c2e391c87",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2bb3530575a44e831f98b29339078a4c2e391c87"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2bb3530575a44e831f98b29339078a4c2e391c87\nparent bf202ec0438dfc18969ff9bf6ea320e4a3b6a553\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1768316645 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768574229 +0000\n\nminer: clear block template after block connection/disconnection\n\n- This commit makes the blocktemplatecache subscribe to validation\n  interface for all block connection and block disconnection\n  notifications.\n  Whenever such notification is emitted the block template cache is\n  cleared.\n\n- For block connection notification we onlu clear for non historical\n  block connection to avoid clearing during assumeutxo background\n  validation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpNFgAKCRAOOQjzZJiY\niFJ7AQCz5BHd/807+mxk3XNcjsFbQo4x8KXzbKK75wfnsCxP1gEAxKGeThAkIiR7\ncA0dpD/uzln4ZDnpcWDChMkIFsEGbwc=\n=7m0w\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
          "sha": "bf202ec0438dfc18969ff9bf6ea320e4a3b6a553",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bf202ec0438dfc18969ff9bf6ea320e4a3b6a553"
        }
      ],
      "message": "miner: clear block template after block connection/disconnection\n\n- This commit makes the blocktemplatecache subscribe to validation\n  interface for all block connection and block disconnection\n  notifications.\n  Whenever such notification is emitted the block template cache is\n  cleared.\n\n- For block connection notification we onlu clear for non historical\n  block connection to avoid clearing during assumeutxo background\n  validation.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:37:09Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-13T15:04:05Z"
      },
      "sha": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDljNDA3OGNkZDgzMWM0ZWNmODMzOTViZWIwYjU0MGVkNjc1ZmM0YTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c4078cdd831c4ecf83395beb0b540ed675fc4a5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9c4078cdd831c4ecf83395beb0b540ed675fc4a5",
      "tree": {
        "sha": "5a34f01f9bc96456b97889c5627f06bcf2a260cb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5a34f01f9bc96456b97889c5627f06bcf2a260cb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5a34f01f9bc96456b97889c5627f06bcf2a260cb\nparent 72144fdafeaa7576cc7aedeb4d59d84c29ff0238\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1762355187 +0100\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768574230 +0000\n\ntest: add unit test to `BlockTemplateCache`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpNFwAKCRAOOQjzZJiY\niFyZAQC5Scdh5D9Ea/KIfNiaen/rCIyfP2z2nYa8hMcct59uYwD/YHRXxJG+cs2H\nX8m3QQto8+/mSZ1TteBcQ1g0jovCCQE=\n=yRCo\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
          "sha": "72144fdafeaa7576cc7aedeb4d59d84c29ff0238",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/72144fdafeaa7576cc7aedeb4d59d84c29ff0238"
        }
      ],
      "message": "test: add unit test to `BlockTemplateCache`",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:37:10Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-11-05T15:06:27Z"
      },
      "sha": "9c4078cdd831c4ecf83395beb0b540ed675fc4a5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA0ZDQxYWMzY2VkN2Q4NjliNjQyMTBjZjc4NjJhYzJlMmU5MGQwM2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
      "tree": {
        "sha": "5716c8e4faf59d0bd541c43dc1e581c4832b20ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5716c8e4faf59d0bd541c43dc1e581c4832b20ea"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5716c8e4faf59d0bd541c43dc1e581c4832b20ea\nparent 9c4078cdd831c4ecf83395beb0b540ed675fc4a5\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1767025084 +0000\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768574231 +0000\n\ninterfaces: create block template via block template cache\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpNGAAKCRAOOQjzZJiY\niD1uAP9tbfKA+TAl2ggbVOy5qdzxG1Ftg1n7OoI84R9XEnJA+AD+PUJ5kHE/DArx\nLdsE7ta1wRG2c/ecLQIwjp9ASWyKqw8=\n=UK3n\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c4078cdd831c4ecf83395beb0b540ed675fc4a5",
          "sha": "9c4078cdd831c4ecf83395beb0b540ed675fc4a5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9c4078cdd831c4ecf83395beb0b540ed675fc4a5"
        }
      ],
      "message": "interfaces: create block template via block template cache",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:37:11Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-12-29T16:18:04Z"
      },
      "sha": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE0ZGFiM2Y2ZTA5MmMwZjZiN2Y4ZDkyZjMwYTRlMzgzMDljNWRlMTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "tree": {
        "sha": "dda1764f74453fc5dd041e978fa437925d17be8f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dda1764f74453fc5dd041e978fa437925d17be8f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree dda1764f74453fc5dd041e978fa437925d17be8f\nparent 04d41ac3ced7d869b64210cf7862ac2e2e90d03e\nauthor ismaelsadeeq <abubakarsadiqismail@proton.me> 1758632035 +0200\ncommitter ismaelsadeeq <abubakarsadiqismail@proton.me> 1768574232 +0000\n\ntest: add blocktemplatecache fuzz test\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCaWpNGQAKCRAOOQjzZJiY\niAwnAP9g0kx4pcOL0bxdT4+E1CQzcXkIkA5alnCPZwc0QMe93gD/QxhArpHyG6PW\nI8ljdHa9ywaDAcdD5BiHTPxPKMUdLQg=\n=MZMK\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
          "sha": "04d41ac3ced7d869b64210cf7862ac2e2e90d03e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/04d41ac3ced7d869b64210cf7862ac2e2e90d03e"
        }
      ],
      "message": "test: add blocktemplatecache fuzz test",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2026-01-16T14:37:12Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "abubakarsadiqismail@proton.me",
        "date": "2025-09-23T12:53:55Z"
      },
      "sha": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22097701011,
      "node_id": "HRFPE_lADOABII587MSilzzwAAAAUlICiT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22097701011",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "created_at": "2026-01-16T14:44:48Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379497293",
      "pull_request_review_id": 3268268351,
      "id": 2379497293,
      "node_id": "PRRC_kwDOABII586N1D9N",
      "diff_hunk": "@@ -93,6 +93,14 @@ BlockAssembler::BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool\n {\n }\n \n+BlockAssembler::BlockAssembler(Chainstate& chainstate, const CTxMemPool* mempool, const Options& options, AllowOversizedBlocks_tag)",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "9ad0c9cc15e2132b0b1c9eb1734060448ccac67f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node/miner: allow generation of oversized templates\" (bd9bed462e251a5d3bd6e376f25060aeba9539d4)\r\n\r\nThis ALLOW_OVERSIZED_BLOCKS tag approach seems reasonable, but not ideal because:\r\n\r\n- It doesn't only allow larger blocks. It also stops enforcing coinbase sigops limits and stops enforcing minimum clamp values.\r\n- It duplicates code between `BlockAssembler::BlockAssembler` constructors.\r\n\r\nI think adding a new `BlockAssembler::Options` `bool allow_oversized_blocks{false}` option instead would be a more direct and extensible approach.\r\n\r\nSeparately (doesn't need to be part of this PR) I also think it would be good to reverse 7392b8b084be14b75536887b7ff216152d0a3307 (#33222), and throw exceptions when values are out of range instead of clamping them. Clamping values seems likely to hide configuration errors that should be fixed and lead to unintended behavior.",
      "created_at": "2025-09-25T15:09:40Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2379497293",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2379497293"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472926339",
      "pull_request_review_id": 3268268351,
      "id": 2472926339,
      "node_id": "PRRC_kwDOABII586TZdyD",
      "diff_hunk": "@@ -1825,6 +1826,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     ChainstateManager& chainman = *Assert(node.chainman);\n     auto& kernel_notifications{*Assert(node.notifications)};\n \n+    node.block_template_cache = node::MakeBlockTemplateCache(node.mempool.get(), chainman);\n+    validation_signals.RegisterSharedValidationInterface(node.block_template_cache);",
      "path": "src/init.cpp",
      "position": 1,
      "original_position": 13,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nNot very important, but would be good to call UnregisterValidationInterface in Shutdown to unregister this. Otherwise, in theory if Init/Shutdown were called multiple times (e.g. in unit tests) there would be a memory leak. `node.block_template_cache` can be handled the same way as `node.fee_estimator` in `Shutdown`.",
      "created_at": "2025-10-29T12:59:05Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472926339",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472926339"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1830,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472932269",
      "pull_request_review_id": 3268268351,
      "id": 2472932269,
      "node_id": "PRRC_kwDOABII586TZfOt",
      "diff_hunk": "@@ -70,6 +71,7 @@ struct NodeContext {\n     std::unique_ptr<CBlockPolicyEstimator> fee_estimator;\n     std::unique_ptr<PeerManager> peerman;\n     std::unique_ptr<ChainstateManager> chainman;\n+    std::shared_ptr<BlockTemplateCache> block_template_cache;",
      "path": "src/node/context.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI think it would probably be better for this to use unique_ptr instead shared_ptr (like fee_estimator and other members), so lifetime of the BlockTemplateCache is more explicit and predictable.",
      "created_at": "2025-10-29T13:01:06Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2472932269",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2472932269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473041954",
      "pull_request_review_id": 3268268351,
      "id": 2473041954,
      "node_id": "PRRC_kwDOABII586TZ6Ai",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 65,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nIt seems like there are a number of things here making this code more rigid and complicated than it needs to be which aren't explained. It seems like it would be more straightforward to:\r\n\r\n- Make `BlockTemplateCache::GetBlockTemplate` method non-virtual\r\n- Drop `MakeBlockTemplateCache` function, and just give `GetBlockTemplate` class a constructor.\r\n- Drop `BlockTemplateCacheImpl` class and just implement functionality in `BlockTemplateCache` class.\r\n- Drop requirement that users of `BlockTemplateCache` need to deal with `shared_ptr`. Let them use cache objects with more predictable lifetimes.\r\n\r\nI think these changes would make code simpler, PR more straightforward to review and the `BlockTemplateCache` class easier to use and test.\r\n\r\nIf there really is a need for the shared_ptr / virtual requirements, that would be also be ok, but they should be explained somewhere.\r\n\r\n---\r\n\r\nEDIT: I see PR description does provide a rationale: \"`MakeBlockTemplateCache` returns a shared pointer so it can be registered with the validation interface using `RegisterSharedValidationInterface` hence not requiring explicit unregistration.\"\r\n\r\nI think this rationale doesn't really hold though, because unregistration is still needed to prevent memory leaks. Also `RegisterSharedValidationInterface` was really intended for use by the wallet, because wallets can be unloaded at any time and need a way to unregister from events while events are still being sent and avoid race conditions. For the block template cache, it makes more sense to use `RegisterValidationInterface` instead and avoid `shared_ptr` virality and unpredictability.",
      "created_at": "2025-10-29T13:25:44Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473041954",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473041954"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 264,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473203366",
      "pull_request_review_id": 3268268351,
      "id": 2473203366,
      "node_id": "PRRC_kwDOABII586Taham",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const\n+{\n+    auto now = NodeClock::now();\n+    auto elapsed = std::chrono::duration_cast<std::chrono::seconds>(now - m_time_generated);\n+    if (elapsed < std::chrono::seconds::zero()) {\n+        // m_time_generated is in the future; node clock is bumped to the past\n+        // hence no way to check the elapsed time just assume interval elapsed.\n+        return true;\n+    }\n+    return elapsed >= interval;\n+}\n+\n+bool BlockTemplateCacheImpl::Template::OptionsEqual(const BlockAssembler::Options& other) const\n+{\n+    return m_options.use_mempool == other.use_mempool &&",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 90,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould be good to have a comment saying this is intentionally not comparing the `coinbase_output_script` field and why that is safe (assuming it is safe).\r\n\r\nAlso would be good to point out this is intentionally skipping `test_block_validity`.",
      "created_at": "2025-10-29T13:51:22Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473203366",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473203366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473223014",
      "pull_request_review_id": 3268268351,
      "id": 2473223014,
      "node_id": "PRRC_kwDOABII586TamNm",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const\n+{\n+    auto now = NodeClock::now();\n+    auto elapsed = std::chrono::duration_cast<std::chrono::seconds>(now - m_time_generated);\n+    if (elapsed < std::chrono::seconds::zero()) {\n+        // m_time_generated is in the future; node clock is bumped to the past\n+        // hence no way to check the elapsed time just assume interval elapsed.\n+        return true;\n+    }\n+    return elapsed >= interval;\n+}\n+\n+bool BlockTemplateCacheImpl::Template::OptionsEqual(const BlockAssembler::Options& other) const",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 88,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould seem nice to implement these comparisons in `operator==` helpers or other functions directly attached to BlockCreateOptions and `BlockAssembler::Options` structs. This way if new members are added to the structs, the comparison functions should not get out of date.\r\n\r\nOtherwise it would be good to have comments in the two structs pointing out that this function may need to be updated if new fields are added.\r\n\r\nI think it could also be nice to introduce options-comparing functionality in a separate commit to make this commit simpler.\r\n\r\n\r\n",
      "created_at": "2025-10-29T13:54:23Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473223014",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473223014"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473250518",
      "pull_request_review_id": 3268268351,
      "id": 2473250518,
      "node_id": "PRRC_kwDOABII586Tas7W",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\n`Template` name doesn't seem very descriptive. I'd consider calling it `CachedBlockTemplate` to be unambiguous, and also making it a top level struct instead of an inner struct so it is less entwined with the `BlockTemplateCacheImpl` class, and could be forward declared, accessed from tests, etc.",
      "created_at": "2025-10-29T13:57:51Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473250518",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473250518"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 470,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473275740",
      "pull_request_review_id": 3268268351,
      "id": 2473275740,
      "node_id": "PRRC_kwDOABII586TazFc",
      "diff_hunk": "@@ -24,6 +27,7 @@\n #include <boost/multi_index_container.hpp>\n \n class ArgsManager;\n+class BlockTemplateCache;",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 18,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nThis doesn't seem to be right because it is forward declaring a global `::BlockTemplateCache` class not in the `::node` namespace. Probably this should just be dropped.",
      "created_at": "2025-10-29T14:01:38Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473275740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473275740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473282308",
      "pull_request_review_id": 3268268351,
      "id": 2473282308,
      "node_id": "PRRC_kwDOABII586Ta0sE",
      "diff_hunk": "@@ -38,6 +42,8 @@ namespace node {\n class KernelNotifications;\n \n static const bool DEFAULT_PRINT_MODIFIED_FEE = false;\n+static constexpr size_t DEFAULT_CACHE_SIZE{10};",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 26,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\n`DEFAULT_CACHE_SIZE` is a very generic name for a global, maybe `DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE` would be better.",
      "created_at": "2025-10-29T14:02:51Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473282308",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473282308"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473298969",
      "pull_request_review_id": 3268268351,
      "id": 2473298969,
      "node_id": "PRRC_kwDOABII586Ta4wZ",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI'd think cache should be cleared when blocks are disconnected as well as when they are connected. Should there be a `BlockDisconnected` method that also clears the cache?\r\n\r\nAlso this should probably have `if (role == ChainstateRole::BACKGROUND) return;` to work properly when an assumeutxo snapshot is loaded.",
      "created_at": "2025-10-29T14:05:42Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473298969",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473298969"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 461,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473412280",
      "pull_request_review_id": 3268268351,
      "id": 2473412280,
      "node_id": "PRRC_kwDOABII586TbUa4",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 76,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nNothing about this function is really specific to caching templates. I think the both the caching code and the time code could be easier to understand if this was made into a helper function like:\r\n\r\n```c++\r\n// Return true if current time is greater or equal to `time + interval`, or if\r\n// `time` is greater than the current time (indicating clock moved backward).\r\nstatic inline bool IntervalElapsed(NodeClock::time_point time, std::chrono::seconds interval)\r\n{\r\n    const NodeClock::time_point now = NodeClock::now();\r\n    return now < time || (now - time) >= interval;\r\n}\r\n```",
      "created_at": "2025-10-29T14:22:21Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473412280",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473412280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 503,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473491581",
      "pull_request_review_id": 3268268351,
      "id": 2473491581,
      "node_id": "PRRC_kwDOABII586Tbnx9",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.",
      "path": "src/node/miner.h",
      "position": 127,
      "original_position": 59,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nMight be good to say if that if interval is 0 a new template is always created.",
      "created_at": "2025-10-29T14:35:01Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473491581",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473491581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 189,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473499003",
      "pull_request_review_id": 3268268351,
      "id": 2473499003,
      "node_id": "PRRC_kwDOABII586Tbpl7",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 58,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI think s/does not exceed/is less than/",
      "created_at": "2025-10-29T14:36:13Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473499003",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473499003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 256,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 257,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473636918",
      "pull_request_review_id": 3268268351,
      "id": 2473636918,
      "node_id": "PRRC_kwDOABII586TcLQ2",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 54,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nIt probably makes more sense for this to contain a `Chainstate` reference than a `ChainstateManager` reference, since code here is only calling `m_chainman.ActiveChainstate` on it anyway. Also logically, it makes more sense to have a per-chainstate cache, instead of a cache over multiple chainstates.",
      "created_at": "2025-10-29T14:59:26Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473636918",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473636918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473664992",
      "pull_request_review_id": 3268268351,
      "id": 2473664992,
      "node_id": "PRRC_kwDOABII586TcSHg",
      "diff_hunk": "@@ -520,14 +623,9 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\n          * We'll also create a new template if the tip changed during this iteration.\n          */\n         if (options.fee_threshold < MAX_MONEY || tip_changed) {\n-            auto new_tmpl{BlockAssembler{\n-                chainman.ActiveChainstate(),\n-                mempool,\n-                assemble_options}\n-                              .CreateNewBlock()};\n-\n+            auto new_tmpl{block_template_cache->GetBlockTemplate(assemble_options, std::chrono::seconds{0}).first};",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 153,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould be good to note that `0` interval means this will always generate a new template, not use a cached one.\r\n\r\nIt could make sense to add a `max_age` or similar option to BlockCreateOptions so this is configurable by the caller.",
      "created_at": "2025-10-29T15:04:10Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473664992",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473664992"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 626,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473682869",
      "pull_request_review_id": 3268268351,
      "id": 2473682869,
      "node_id": "PRRC_kwDOABII586TcWe1",
      "diff_hunk": "@@ -520,14 +623,9 @@ std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainma\n          * We'll also create a new template if the tip changed during this iteration.\n          */\n         if (options.fee_threshold < MAX_MONEY || tip_changed) {\n-            auto new_tmpl{BlockAssembler{\n-                chainman.ActiveChainstate(),\n-                mempool,\n-                assemble_options}\n-                              .CreateNewBlock()};\n-\n+            auto new_tmpl{block_template_cache->GetBlockTemplate(assemble_options, std::chrono::seconds{0}).first};\n             // If the tip changed, return the new template regardless of its fees.\n-            if (tip_changed) return new_tmpl;\n+            if (tip_changed) return std::make_unique<CBlockTemplate>(*new_tmpl);",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 156,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nIs this temporary? Since `GetBlockTemplate` returns a `shared_ptr`, I think it would make sense for `WaitAndCreateNewBlock` to return a `shared_ptr` as well to avoid these copies.",
      "created_at": "2025-10-29T15:07:12Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473682869",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473682869"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 628,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473714111",
      "pull_request_review_id": 3268268351,
      "id": 2473714111,
      "node_id": "PRRC_kwDOABII586TceG_",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nI think this type should be `std::shared_ptr<const CBlockTemplate>` (adding const) here and other places to avoid outside callers mutating the template and potentially messing up the cache. Or if adding const isn't possible for some reason, it would be good to have a comment here explaining that.\r\n\r\nIt might also be handy to define a type alias like `using BlockTemplateRef = std::shared_ptr<const CBlockTemplate>` similar to `CTransactionRef`.\r\n\r\n",
      "created_at": "2025-10-29T15:12:11Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473714111",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473714111"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 473,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473809097",
      "pull_request_review_id": 3268268351,
      "id": 2473809097,
      "node_id": "PRRC_kwDOABII586Tc1TJ",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(\n+        const BlockAssembler::Options& options,\n+        std::chrono::seconds interval",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 67,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nWould it make sense for this to use milliseconds or another unit instead of seconds so callers could have more granularity?\r\n\r\nAlso as suggested elsewhere I think it could make sense for interval to be a `BlockCreateOptions` field (called `max_age` or similar) so existing interfaces would not need to be modified to start taking advantage of template caching.",
      "created_at": "2025-10-29T15:27:55Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2473809097",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2473809097"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2474149528",
      "pull_request_review_id": 3268268351,
      "id": 2474149528,
      "node_id": "PRRC_kwDOABII586TeIaY",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {\n+        BlockAssembler::Options m_options;\n+        NodeClock::time_point m_time_generated;\n+        std::shared_ptr<CBlockTemplate> m_block_template;\n+\n+        bool IntervalElapsed(const std::chrono::seconds& interval) const;\n+        bool OptionsEqual(const BlockAssembler::Options& options) const;\n+    };\n+\n+    std::deque<Template> m_block_templates;\n+    CTxMemPool* m_mempool{nullptr};\n+    ChainstateManager& m_chainman;\n+    size_t m_cache_size;\n+    mutable Mutex m_mutex;\n+};\n+\n+BlockTemplateCacheImpl::BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+    : m_mempool(mempool), m_chainman(chainman), m_cache_size(cache_size) {}\n+\n+std::shared_ptr<BlockTemplateCache> MakeBlockTemplateCache(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size)\n+{\n+    return std::make_shared<BlockTemplateCacheImpl>(mempool, chainman, cache_size);\n+}\n+\n+void BlockTemplateCacheImpl::BlockConnected(\n+    ChainstateRole /*unused*/,\n+    const std::shared_ptr<const CBlock>& /*unused*/,\n+    const CBlockIndex* /*unused*/)\n+{\n+    LOCK(m_mutex);\n+    m_block_templates.clear();\n+}\n+\n+bool BlockTemplateCacheImpl::Template::IntervalElapsed(const std::chrono::seconds& interval) const\n+{\n+    auto now = NodeClock::now();\n+    auto elapsed = std::chrono::duration_cast<std::chrono::seconds>(now - m_time_generated);\n+    if (elapsed < std::chrono::seconds::zero()) {\n+        // m_time_generated is in the future; node clock is bumped to the past\n+        // hence no way to check the elapsed time just assume interval elapsed.\n+        return true;\n+    }\n+    return elapsed >= interval;\n+}\n+\n+bool BlockTemplateCacheImpl::Template::OptionsEqual(const BlockAssembler::Options& other) const\n+{\n+    return m_options.use_mempool == other.use_mempool &&\n+           m_options.block_reserved_weight == other.block_reserved_weight &&\n+           m_options.coinbase_output_max_additional_sigops == other.coinbase_output_max_additional_sigops &&\n+           m_options.nBlockMaxWeight == other.nBlockMaxWeight &&\n+           m_options.blockMinFeeRate == other.blockMinFeeRate;\n+}\n+\n+std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> BlockTemplateCacheImpl::CreateBlockTemplateInternal(const BlockAssembler::Options& options)\n+{\n+    BlockAssembler assembler{m_chainman.ActiveChainstate(), m_mempool, options, BlockAssembler::ALLOW_OVERSIZED_BLOCKS};\n+    Template t;\n+    t.m_block_template = assembler.CreateNewBlock();\n+    t.m_options = options;\n+    t.m_time_generated = NodeClock::now();\n+    Assume(m_block_templates.size() <= m_cache_size);\n+    m_block_templates.emplace_back(t);\n+    if (m_block_templates.size() > m_cache_size) m_block_templates.pop_front();\n+    return std::make_pair(t.m_block_template, t.m_time_generated);\n+}\n+\n+std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> BlockTemplateCacheImpl::GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+{\n+    LOCK2(cs_main, m_mutex);\n+    for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++){\n+        if (it->OptionsEqual(options) && !it->IntervalElapsed(interval)) {\n+            if (options.test_block_validity && !it->m_options.test_block_validity) {\n+                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->m_block_template->block,\n+                                    /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\n+                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n+                }\n+                it->m_options.test_block_validity = true;\n+            }",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 121,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (4de7887ca47197654f480471db04750d44e405de)\r\n\r\nCould be nice to dedup this part of the code with CreateNewBlock\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -38,6 +38,16 @@\r\n \r\n namespace node {\r\n \r\n+static void EnforceValidity(Chainstate& chainstate, const BlockAssembler::Options& options, const CBlock& block) EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\r\n+{\r\n+    AssertLockHeld(::cs_main);\r\n+    if (options.test_block_validity) {\r\n+       if (BlockValidationState state{TestBlockValidity(chainstate, block, /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\r\n+           throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\r\n+       }\r\n+    }\r\n+}\r\n+\r\n int64_t GetMinimumTime(const CBlockIndex* pindexPrev, const int64_t difficulty_adjustment_interval)\r\n {\r\n     int64_t min_time{pindexPrev->GetMedianTimePast() + 1};\r\n@@ -191,12 +201,8 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\r\n     UpdateTime(pblock, chainparams.GetConsensus(), pindexPrev);\r\n     pblock->nBits          = GetNextWorkRequired(pindexPrev, pblock, chainparams.GetConsensus());\r\n     pblock->nNonce         = 0;\r\n+    EnforceValidity(m_chainstate, m_options, *pblock);\r\n \r\n-    if (m_options.test_block_validity) {\r\n-        if (BlockValidationState state{TestBlockValidity(m_chainstate, *pblock, /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\r\n-            throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\r\n-        }\r\n-    }\r\n     const auto time_2{SteadyClock::now()};\r\n \r\n     LogDebug(BCLog::BENCH, \"CreateNewBlock() packages: %.2fms (%d packages, %d updated descendants), validity: %.2fms (total %.2fms)\\n\",\r\n@@ -540,11 +546,8 @@ std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> BlockTemplateC\r\n     for (auto it = m_block_templates.rbegin(); it != m_block_templates.rend(); it++){\r\n         if (it->OptionsEqual(options) && !it->IntervalElapsed(interval)) {\r\n             if (options.test_block_validity && !it->m_options.test_block_validity) {\r\n-                if (BlockValidationState state{TestBlockValidity(m_chainman.ActiveChainstate(), it->m_block_template->block,\r\n-                                    /*check_pow=*/false, /*check_merkle_root=*/false)}; !state.IsValid()) {\r\n-                    throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\r\n-                }\r\n                 it->m_options.test_block_validity = true;\r\n+                EnforceValidity(m_chainman.ActiveChainstate(), it->m_options, it->m_block_template->block);\r\n             }\r\n             return std::make_pair(it->m_block_template, it->m_time_generated);\r\n         }\r\n```\r\n</p>\r\n</details>",
      "created_at": "2025-10-29T16:20:34Z",
      "updated_at": "2025-10-29T16:21:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2474149528",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2474149528"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": 542,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 548,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482188424",
      "pull_request_review_id": 3405331910,
      "id": 2482188424,
      "node_id": "PRRC_kwDOABII586T8zCI",
      "diff_hunk": "@@ -449,6 +454,104 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+class BlockTemplateCacheImpl final: public BlockTemplateCache\n+{\n+public:\n+    BlockTemplateCacheImpl(CTxMemPool* mempool, ChainstateManager& chainman, size_t cache_size);\n+    std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(const BlockAssembler::Options& options, std::chrono::seconds interval)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+\n+    /** Overridden from CValidationInterface. */\n+    void BlockConnected(ChainstateRole /*unused*/, const std::shared_ptr<const CBlock>& /*unused*/, const CBlockIndex * /*unused*/)\n+        override EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n+private:\n+     std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+\n+    struct Template {",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 43,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": 2473250518,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is gone now.",
      "created_at": "2025-10-31T17:25:21Z",
      "updated_at": "2025-10-31T17:25:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2482188424",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482188424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 470,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482211458",
      "pull_request_review_id": 3405365359,
      "id": 2482211458,
      "node_id": "PRRC_kwDOABII586T84qC",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(\n+        const BlockAssembler::Options& options,\n+        std::chrono::seconds interval",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 67,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": 2473809097,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yes this will be good for precision but In the current iteration of the PR I switched to using the exact block assembly time as save in the block `nTime` which is in seconds.\r\n\r\nHowever I took the other suggestion of changing the name to maximum age.",
      "created_at": "2025-10-31T17:35:59Z",
      "updated_at": "2025-10-31T17:35:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2482211458",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2482211458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486576551",
      "pull_request_review_id": 3411154210,
      "id": 2486576551,
      "node_id": "PRRC_kwDOABII586UNiWn",
      "diff_hunk": "@@ -912,20 +911,21 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nMaybe use `auto block_copy = std::make_shared<const CBlock>(m_block_template->block);` here to avoid needing to make a shared_ptr and a second copy of the block below. ",
      "created_at": "2025-11-03T13:56:18Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486576551",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486576551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486593971",
      "pull_request_review_id": 3411154210,
      "id": 2486593971,
      "node_id": "PRRC_kwDOABII586UNmmz",
      "diff_hunk": "@@ -176,6 +186,27 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        // By default always return a fresh template.\n+        std::chrono::seconds maximum_template_age{0};\n+        // Checks whether block assembler options are similar.\n+        //\n+        // Note: We intentionally do not compare the coinbase output script.\n+        // Itâ€™s acceptable for them to differ because, as long as the reserved\n+        // weight and additional sigops for the coinbase match, we can assume\n+        // that the cumulative weight and sigops (even if the coinbase output script differs)\n+        // remain within acceptable limits.\n+        //\n+        // We also donâ€™t compare whether block validity has been checked,\n+        // since validity can always be tested again.\n+        bool operator==(const Options& other) const",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 51,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nI know I suggested `operator==` previously but since this is not checking direct equality maybe it is better to call this method something like `CanReuse` or `ReusableTemplate`. Just an idea. Keeping operator== or using any method name seems ok.\r\n\r\nWould also suggest moving detailed comments about specific fields inisde the method implementation. Could just have a general comment like \"intentionally omits some fields from comparison\" in function documentation.",
      "created_at": "2025-11-03T14:01:54Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486593971",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486593971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486606258",
      "pull_request_review_id": 3411154210,
      "id": 2486606258,
      "node_id": "PRRC_kwDOABII586UNpmy",
      "diff_hunk": "@@ -220,6 +251,62 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+// Return true if current time is greater or equal to `prev_time + interval`, or if\n+// `prev_time` is greater than the current time (indicating clock moved backward).\n+static inline bool IntervalElapsed(const uint32_t& prev_time, const uint32_t& interval)\n+{\n+    const uint32_t now = TicksSinceEpoch<std::chrono::seconds>(NodeClock::now());\n+    return now < prev_time || (now - prev_time) >= interval;\n+}\n+\n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - If the interval is 0 we always create a new template and insert to the cache.\n+ * - After an insertion to the cache, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected and disconnected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+private:\n+    std::deque<std::pair<BlockAssembler::Options, BlockTemplateRef>> m_block_templates;\n+    CTxMemPool* m_mempool;\n+    Chainstate& m_chainstate;\n+    size_t m_block_template_cache_size;\n+    mutable Mutex m_mutex;\n+\n+    BlockTemplateRef CreateBlockTemplateInternal(const BlockAssembler::Options& options) EXCLUSIVE_LOCKS_REQUIRED(m_mutex);\n+public:\n+    BlockTemplateCache(CTxMemPool* mempool, Chainstate& chainstate, size_t block_template_block_template_cache_size = DEFAULT_BLOCK_TEMPLATE_CACHE_SIZE);",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 103,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nShould mempool be a reference rather if this class can't really function when it is null?",
      "created_at": "2025-11-03T14:06:13Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486606258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486606258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 290,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486621134",
      "pull_request_review_id": 3411154210,
      "id": 2486621134,
      "node_id": "PRRC_kwDOABII586UNtPO",
      "diff_hunk": "@@ -220,6 +251,62 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+// Return true if current time is greater or equal to `prev_time + interval`, or if\n+// `prev_time` is greater than the current time (indicating clock moved backward).\n+static inline bool IntervalElapsed(const uint32_t& prev_time, const uint32_t& interval)",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 69,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nProbably should use `uint32_t` instead of `const uint32_t&`. Const reference parameter are usually only preferred when parameter types are much bigger.",
      "created_at": "2025-11-03T14:10:59Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486621134",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486621134"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486625191",
      "pull_request_review_id": 3411154210,
      "id": 2486625191,
      "node_id": "PRRC_kwDOABII586UNuOn",
      "diff_hunk": "@@ -176,6 +186,27 @@ class BlockAssembler\n         // Whether to call TestBlockValidity() at the end of CreateNewBlock().\n         bool test_block_validity{true};\n         bool print_modified_fee{DEFAULT_PRINT_MODIFIED_FEE};\n+        // By default always return a fresh template.\n+        std::chrono::seconds maximum_template_age{0};",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"node: add block template cache to miner\" (cd2e843907a6810c8f1acf2b7d80bbf8273a5a00)\r\n\r\nMaybe s/maximum_/max_/",
      "created_at": "2025-11-03T14:12:22Z",
      "updated_at": "2025-11-03T14:30:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2486625191",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2486625191"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 190,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490867264",
      "pull_request_review_id": 3416949149,
      "id": 2490867264,
      "node_id": "PRRC_kwDOABII586Ud55A",
      "diff_hunk": "@@ -0,0 +1,135 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <consensus/amount.h>\n+#include <kernel/chain.h>\n+#include <node/miner.h>\n+#include <policy/policy.h>\n+#include <policy/feerate.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/random.h>\n+#include <test/util/txmempool.h>\n+#include <test/fuzz/util/mempool.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validationinterface.h>\n+\n+#include <optional>\n+\n+namespace {\n+const ChainTestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_block_template_cache()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+}\n+\n+void PopulateRandTransactionsToMempool(FuzzedDataProvider& fuzzed_data_provider, CTxMemPool* mempool, int total_weight)\n+{\n+    // Populate mempool with varying transaction load to test cache under different conditions\n+    while (total_weight > 0 && fuzzed_data_provider.remaining_bytes() > 0) {\n+        const std::optional<CMutableTransaction> mutable_tx = ConsumeDeserializable<CMutableTransaction>(fuzzed_data_provider, TX_WITH_WITNESS);\n+        if (!mutable_tx) break;\n+        auto tx = MakeTransactionRef(*mutable_tx);\n+        CTxMemPoolEntry mempool_entry{ConsumeTxMemPoolEntry(fuzzed_data_provider, *tx)};\n+        const Txid txid = tx->GetHash();\n+        if (mempool->exists(txid)) continue;\n+        AddToMempool(*mempool, mempool_entry);\n+        const int32_t tx_weight = mempool_entry.GetTxWeight();\n+        if (tx_weight > total_weight) break;\n+        total_weight -= tx_weight;\n+    }\n+}\n+\n+FUZZ_TARGET(block_template_cache, .init = initialize_block_template_cache)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    const auto& node = g_setup->m_node;\n+    auto& template_cache = node.block_template_cache;\n+    SeedRandomStateForTest(SeedRand::ZEROS);\n+    SetMockTime(WITH_LOCK(g_setup->m_node.chainman->GetMutex(),\n+                          return g_setup->m_node.chainman->ActiveTip()->Time()));\n+\n+    int32_t max_mempool_weight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(0, DEFAULT_BLOCK_MAX_WEIGHT * 10);\n+    PopulateRandTransactionsToMempool(fuzzed_data_provider, node.mempool.get(), max_mempool_weight);\n+    auto num_iterations = fuzzed_data_provider.ConsumeIntegralInRange<unsigned int>(1, 10);\n+    LIMITED_WHILE (fuzzed_data_provider.remaining_bytes(), num_iterations) {\n+        // Test cache hit/miss behavior based on time intervals\n+        node::BlockAssembler::Options base_options;\n+        base_options.test_block_validity = false;\n+        auto first_template = template_cache->GetBlockTemplate(base_options);\n+        auto time_advance = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(1, 1000);\n+        auto cache_interval = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(1, 1000);\n+        if (cache_interval == time_advance) { // Nudge the mock time slightly to prevent truncation failures\n+            SetMockTime(GetMockTime() + std::chrono::seconds{time_advance + 1});\n+        } else {\n+            SetMockTime(GetMockTime() + std::chrono::seconds{time_advance});\n+        }\n+\n+        base_options.maximum_template_age = std::chrono::seconds{cache_interval};\n+        auto second_template = template_cache->GetBlockTemplate(base_options);\n+\n+        // Cache should return same template if cache interval strictly exceeds elapsed time\n+        if (cache_interval > time_advance) { // account for possible truncation.\n+            assert(second_template->block.nTime == first_template->block.nTime);\n+        } else { // Cache should create a new template when cache interval is less than or equal to elapsed time\n+            assert(second_template->block.nTime > first_template->block.nTime);\n+        }\n+\n+        // Test cache differentiation with modified block assembly options\n+        node::BlockAssembler::Options modified_options;\n+        modified_options.test_block_validity = false;\n+        auto max_reserved_weight = DEFAULT_BLOCK_RESERVED_WEIGHT - 1;\n+        modified_options.block_reserved_weight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(\n+            MINIMUM_BLOCK_RESERVED_WEIGHT, max_reserved_weight);\n+\n+        CAmount fee_paid = fuzzed_data_provider.ConsumeIntegralInRange<CAmount>(0, COIN);\n+        int32_t tx_size = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(1, MAX_STANDARD_TX_WEIGHT / WITNESS_SCALE_FACTOR);\n+        modified_options.blockMinFeeRate = CFeeRate(fee_paid, tx_size);\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            modified_options.nBlockMaxWeight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(\n+                modified_options.block_reserved_weight, DEFAULT_BLOCK_MAX_WEIGHT);\n+        }\n+\n+        auto additional_time_advance = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(10, 100);\n+        SetMockTime(GetMockTime() + std::chrono::seconds{additional_time_advance});\n+\n+        // Different options should produce newer template despite long cache interval\n+        modified_options.maximum_template_age = std::chrono::seconds::max();\n+        auto third_template = template_cache->GetBlockTemplate(modified_options);\n+        assert(third_template->block.nTime > second_template->block.nTime);\n+\n+        // Same original options must hit the second template in the cache\n+        base_options.maximum_template_age = std::chrono::seconds::max();",
      "path": "src/test/fuzz/blocktemplatecache.cpp",
      "position": 1,
      "original_position": 110,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "084bfbc1ec7f8f64f54d231bb641285622311b59: I think the CI failure is related to this `std::chrono::seconds::max()` (long long) because the `maximum_template_age` is used in `IntervalElapsed`as the interval which is a `uint32_t`.",
      "created_at": "2025-11-04T15:02:45Z",
      "updated_at": "2025-11-04T15:02:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2490867264",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2490867264"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 110,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2491199977",
      "pull_request_review_id": 3417441597,
      "id": 2491199977,
      "node_id": "PRRC_kwDOABII586UfLHp",
      "diff_hunk": "@@ -0,0 +1,135 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <consensus/amount.h>\n+#include <kernel/chain.h>\n+#include <node/miner.h>\n+#include <policy/policy.h>\n+#include <policy/feerate.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/random.h>\n+#include <test/util/txmempool.h>\n+#include <test/fuzz/util/mempool.h>\n+#include <test/util/setup_common.h>\n+#include <txmempool.h>\n+#include <util/time.h>\n+#include <validationinterface.h>\n+\n+#include <optional>\n+\n+namespace {\n+const ChainTestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_block_template_cache()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+}\n+\n+void PopulateRandTransactionsToMempool(FuzzedDataProvider& fuzzed_data_provider, CTxMemPool* mempool, int total_weight)\n+{\n+    // Populate mempool with varying transaction load to test cache under different conditions\n+    while (total_weight > 0 && fuzzed_data_provider.remaining_bytes() > 0) {\n+        const std::optional<CMutableTransaction> mutable_tx = ConsumeDeserializable<CMutableTransaction>(fuzzed_data_provider, TX_WITH_WITNESS);\n+        if (!mutable_tx) break;\n+        auto tx = MakeTransactionRef(*mutable_tx);\n+        CTxMemPoolEntry mempool_entry{ConsumeTxMemPoolEntry(fuzzed_data_provider, *tx)};\n+        const Txid txid = tx->GetHash();\n+        if (mempool->exists(txid)) continue;\n+        AddToMempool(*mempool, mempool_entry);\n+        const int32_t tx_weight = mempool_entry.GetTxWeight();\n+        if (tx_weight > total_weight) break;\n+        total_weight -= tx_weight;\n+    }\n+}\n+\n+FUZZ_TARGET(block_template_cache, .init = initialize_block_template_cache)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+    const auto& node = g_setup->m_node;\n+    auto& template_cache = node.block_template_cache;\n+    SeedRandomStateForTest(SeedRand::ZEROS);\n+    SetMockTime(WITH_LOCK(g_setup->m_node.chainman->GetMutex(),\n+                          return g_setup->m_node.chainman->ActiveTip()->Time()));\n+\n+    int32_t max_mempool_weight = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(0, DEFAULT_BLOCK_MAX_WEIGHT * 10);\n+    PopulateRandTransactionsToMempool(fuzzed_data_provider, node.mempool.get(), max_mempool_weight);\n+    auto num_iterations = fuzzed_data_provider.ConsumeIntegralInRange<unsigned int>(1, 10);\n+    LIMITED_WHILE (fuzzed_data_provider.remaining_bytes(), num_iterations) {",
      "path": "src/test/fuzz/blocktemplatecache.cpp",
      "position": 1,
      "original_position": 63,
      "commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "original_commit_id": "084bfbc1ec7f8f64f54d231bb641285622311b59",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "084bfbc1ec7f8f64f54d231bb641285622311b59: nit: you can get rid of `num_iterations`.\r\n```suggestion\r\n    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10) {\r\n```",
      "created_at": "2025-11-04T16:27:06Z",
      "updated_at": "2025-11-04T16:27:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2491199977",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2491199977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495460002",
      "pull_request_review_id": 3423430033,
      "id": 2495460002,
      "node_id": "PRRC_kwDOABII586UvbKi",
      "diff_hunk": "@@ -225,6 +231,49 @@ class BlockAssembler\n     void SortForBlock(const CTxMemPool::setEntries& package, std::vector<CTxMemPool::txiter>& sortedEntries);\n };\n \n+/**\n+ * BlockTemplateCache provides a thread-safe interface for creating and reusing\n+ * block templates with configurable cache size.\n+ *\n+ * The cache stores templates with their respective config options.\n+ * When a block template is requested:\n+ * - If a template with matching options exists and the interval\n+ *   has not elapsed, the cached template is returned.\n+ * - If no template exists or the interval has elapsed, a new template is generated,\n+ *   stored in the cache, and returned.\n+ * - After insertion, we evict the oldest template if the cache overflows.\n+ *\n+ * The cache inherits from CValidationInterface to receive notifications\n+ * about connected blocks, which triggers cache invalidation,\n+ * ensuring stale templates are not returned.\n+ */\n+class BlockTemplateCache : public CValidationInterface\n+{\n+public:\n+    virtual ~BlockTemplateCache() = default;\n+\n+    /**\n+     * If a cached template exists with identical options and its age does not\n+     * exceed the specified interval, the cached template is returned.\n+     * Otherwise, a new template is created and stored in the cache.\n+     *\n+     * @param options The block assembly options to use.\n+     * @param interval Maximum age of a cached template to be considered fresh.\n+     * @return std::shared_ptr<CBlockTemplate> Shared pointer to the block template.\n+     */\n+    virtual std::pair<std::shared_ptr<CBlockTemplate>, NodeClock::time_point> GetBlockTemplate(\n+        const BlockAssembler::Options& options,\n+        std::chrono::seconds interval",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 67,
      "commit_id": "5f798b4a3b1a978b8ac954db54e9e8dfc7da6319",
      "original_commit_id": "4de7887ca47197654f480471db04750d44e405de",
      "in_reply_to_id": 2473809097,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is fixed now",
      "created_at": "2025-11-05T17:18:26Z",
      "updated_at": "2025-11-05T17:18:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2495460002",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495460002"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 266,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495465245",
      "pull_request_review_id": 3423437618,
      "id": 2495465245,
      "node_id": "PRRC_kwDOABII586Uvccd",
      "diff_hunk": "@@ -912,20 +911,21 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "cd2e843907a6810c8f1acf2b7d80bbf8273a5a00",
      "in_reply_to_id": 2486576551,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is not possible I think because we need to pass a non const block further down.\r\nI instead avoid the second copy by moving.\r\nLet me know what you think",
      "created_at": "2025-11-05T17:19:52Z",
      "updated_at": "2025-11-05T17:19:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2495465245",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2495465245"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514061828",
      "pull_request_review_id": 3447844157,
      "id": 2514061828,
      "node_id": "PRRC_kwDOABII586V2YoE",
      "diff_hunk": "@@ -184,6 +184,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n             throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n         }\n     }\n+    pblocktemplate->m_creation_time = NodeClock::now();",
      "path": "src/node/miner.cpp",
      "position": 38,
      "original_position": 4,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "2ef43703998f679fc752a77727dd5c0824f6a90b",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 2ef43703998f679fc752a77727dd5c0824f6a90b _miner: add block creation time point to `CBlockTemplate`_: the most relevant anchor for creation time is what was in the mempool at that moment. So I would suggest moving this above `addPackageTxs`.\r\n\r\nSince `cs_main` is locked throughout this function, this currently doesn't make a difference, but if we ever make locks more granular I could imagine taking a lock on just the mempool and setting the template timestamp at that exact moment.\r\n\r\n(Something like `TestBlockValidity` shouldn't have to block `cs_main`, although we _do_ need to block tip updates between the moment we start adding transactions to the template and when we finish verification. Although even then, block validation could abort with failure if the tip updates during this.)\r\n\r\n\r\nNit: could drop \"block\" from commit message, so it's not confused with `nTime`.",
      "created_at": "2025-11-11T12:29:56Z",
      "updated_at": "2025-11-11T13:02:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514061828",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514061828"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 219,
      "original_line": 219,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514084547",
      "pull_request_review_id": 3447844157,
      "id": 2514084547,
      "node_id": "PRRC_kwDOABII586V2eLD",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf _miner: add `SimilarOptions` function_: both these comments should be in the header, as they explain both what this function does and why it's useful.\r\n\r\nMaybe call it `ShareableOptions`, described as:\r\n\r\n> Limit comparison to assembly options that impact the final block (without dummy coinbase scriptPubKey, with solution). Ignore options that can safely be shared between different callers.",
      "created_at": "2025-11-11T12:36:32Z",
      "updated_at": "2025-11-11T13:02:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514084547",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514084547"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 337,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514110184",
      "pull_request_review_id": 3447844157,
      "id": 2514110184,
      "node_id": "PRRC_kwDOABII586V2kbo",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.\n+    return a.use_mempool == b.use_mempool &&\n+            a.block_reserved_weight == b.block_reserved_weight &&\n+            a.blockMinFeeRate == b.blockMinFeeRate &&\n+            a.coinbase_output_max_additional_sigops == b.coinbase_output_max_additional_sigops &&\n+            a.nBlockMaxWeight == b.nBlockMaxWeight;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf _miner: add `SimilarOptions` function_: this seems brittle when we add options later.\r\n\r\nPerhaps you can copy `a`, then set the shareable properties of `a_copy` to that of `b` and then do a regular comparison.",
      "created_at": "2025-11-11T12:44:49Z",
      "updated_at": "2025-11-11T13:02:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514110184",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514110184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514193806",
      "pull_request_review_id": 3448014534,
      "id": 2514193806,
      "node_id": "PRRC_kwDOABII586V242O",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 9500dca555f7394cd3e51821312309d5b9633539 _interfaces: create block template via block template cache_: how does this interact with #33745? The third commit there adds a comment and test that `submitSolution()` intentionally modifies the block in place, so that the client can call `getBlock()` afterwards.\r\n\r\nI don't mind changing that behavior, but then I'll need to revive #33374 or change `submitSolution()` to optionally return the full block.",
      "created_at": "2025-11-11T13:13:54Z",
      "updated_at": "2025-11-11T13:13:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514193806",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514193806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514393534",
      "pull_request_review_id": 3448268496,
      "id": 2514393534,
      "node_id": "PRRC_kwDOABII586V3pm-",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": 2514193806,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "No need to revive https://github.com/bitcoin/bitcoin/pull/33374. I saw it yesterday and will push an update here soon.\r\nWe already made a copy of the block here; we should copy the whole template after WaitAndCreateNewBlock returns and allow modifications as mentioned in #33374. It is a cheap copy.\r\n",
      "created_at": "2025-11-11T14:12:26Z",
      "updated_at": "2025-11-11T14:16:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514393534",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514393534"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514589535",
      "pull_request_review_id": 3448522732,
      "id": 2514589535,
      "node_id": "PRRC_kwDOABII586V4Zdf",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": 2514193806,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In other words, each newly requested temple is _copied_ from the cache? Sounds good.",
      "created_at": "2025-11-11T15:06:51Z",
      "updated_at": "2025-11-11T15:06:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514589535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514589535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514611258",
      "pull_request_review_id": 3448554651,
      "id": 2514611258,
      "node_id": "PRRC_kwDOABII586V4ew6",
      "diff_hunk": "@@ -917,14 +916,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n-        return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);\n+        auto block_copy = m_block_template->block;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "3dac7252ab383bcd682609c5159b67ab9327385d",
      "original_commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "in_reply_to_id": 2514193806,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If you want to modify the template, yes. But for things like sendtemplate, fee estimation, that just want to retrieve data from the template they don't need a copy.",
      "created_at": "2025-11-11T15:13:19Z",
      "updated_at": "2025-11-11T15:13:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514611258",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514611258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 913,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687274989",
      "pull_request_review_id": 3656864117,
      "id": 2687274989,
      "node_id": "PRRC_kwDOABII586gLI_t",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "af6c90b5b421ee46c02d244bd92a105e8643ca07",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": 2514084547,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken, thanks",
      "created_at": "2026-01-13T16:56:48Z",
      "updated_at": "2026-01-13T16:56:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2687274989",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687274989"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 337,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687278950",
      "pull_request_review_id": 3656868729,
      "id": 2687278950,
      "node_id": "PRRC_kwDOABII586gLJ9m",
      "diff_hunk": "@@ -442,6 +442,24 @@ void BlockAssembler::addPackageTxs(int& nPackagesSelected, int& nDescendantsUpda\n     }\n }\n \n+bool SimilarOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.\n+    //\n+    // We also donâ€™t compare whether block validity has been checked,\n+    // since validity can always be tested again.\n+    // Note: we should update this helper when the constraint changes.\n+    return a.use_mempool == b.use_mempool &&\n+            a.block_reserved_weight == b.block_reserved_weight &&\n+            a.blockMinFeeRate == b.blockMinFeeRate &&\n+            a.coinbase_output_max_additional_sigops == b.coinbase_output_max_additional_sigops &&\n+            a.nBlockMaxWeight == b.nBlockMaxWeight;",
      "path": "src/node/miner.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "1d232d79ba6c10285652b53ba70d4ab7425d0b20",
      "original_commit_id": "a620c0a69e6d2b0d29f0714f2c6c0bff33e2b4bf",
      "in_reply_to_id": 2514110184,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I did not take this because there is no regular comparison operator defined, and I prefer to be explicit here.",
      "created_at": "2026-01-13T16:57:50Z",
      "updated_at": "2026-01-13T16:57:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2687278950",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687278950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687316542",
      "pull_request_review_id": 3656915413,
      "id": 2687316542,
      "node_id": "PRRC_kwDOABII586gLTI-",
      "diff_hunk": "@@ -184,6 +184,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n             throw std::runtime_error(strprintf(\"TestBlockValidity failed: %s\", state.ToString()));\n         }\n     }\n+    pblocktemplate->m_creation_time = NodeClock::now();",
      "path": "src/node/miner.cpp",
      "position": 38,
      "original_position": 4,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "2ef43703998f679fc752a77727dd5c0824f6a90b",
      "in_reply_to_id": 2514061828,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I've been thinking about this for a bit; and would advocate for more granular and `TestBlockValidity` no longer requires holding the lock.\r\nIt's going to be beneficial  not just here https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2627860099\r\n\r\nThis seems to me outside the scope of this PR, since the current locking guarantees equivalence even after the suggestion. leaving as is for now thanks.",
      "created_at": "2026-01-13T17:08:04Z",
      "updated_at": "2026-01-13T17:08:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2687316542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2687316542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 219,
      "original_line": 219,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694390889",
      "pull_request_review_id": 3665634839,
      "id": 2694390889,
      "node_id": "PRRC_kwDOABII586gmSRp",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 7,
      "commit_id": "107283802e77bb75a621943fb05729914628681c",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 107283802e77bb75a621943fb05729914628681c _miner: add `ShareableOptions` function_: what do you mean by \"with solution\"?",
      "created_at": "2026-01-15T13:28:23Z",
      "updated_at": "2026-01-15T13:44:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2694390889",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694390889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694410392",
      "pull_request_review_id": 3665634839,
      "id": 2694410392,
      "node_id": "PRRC_kwDOABII586gmXCY",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.\n+ */\n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b);",
      "path": "src/node/miner.h",
      "position": 90,
      "original_position": 9,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 107283802e77bb75a621943fb05729914628681c _miner: add `ShareableOptions` function_: the current same suggests that it's taking both options and returning the shareable ones, but it only returns a bool.\n\nSome other names that might make the intention more clear:\n- `AreOptionsEquivalent()`\n- `HasDifferentOption()` (reversing the check)\n- `HasEquivalentTemplateOptions()`\n\n(none of these are great though)",
      "created_at": "2026-01-15T13:33:39Z",
      "updated_at": "2026-01-15T13:44:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2694410392",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694410392"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 152,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694422460",
      "pull_request_review_id": 3665634839,
      "id": 2694422460,
      "node_id": "PRRC_kwDOABII586gmZ-8",
      "diff_hunk": "@@ -324,6 +324,24 @@ void BlockAssembler::addChunks()\n     }\n }\n \n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b)\n+{\n+    // We intentionally do not compare the coinbase output script.\n+    // Itâ€™s acceptable for them to differ because, as long as the reserved\n+    // weight and additional sigops for the coinbase match, we can assume\n+    // that the cumulative weight and sigops (even if the coinbase output script differs)\n+    // remain within acceptable limits.",
      "path": "src/node/miner.cpp",
      "position": 52,
      "original_position": 10,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 107283802e77bb75a621943fb05729914628681c _miner: add `ShareableOptions` function_: I think you can replace the above with just:\n\n```cpp\n// The dummy coinbase output script is not compared.\n```",
      "created_at": "2026-01-15T13:36:59Z",
      "updated_at": "2026-01-15T13:44:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2694422460",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2694422460"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 333,
      "original_line": 333,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698797899",
      "pull_request_review_id": 3671218954,
      "id": 2698797899,
      "node_id": "PRRC_kwDOABII586g3GNL",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.",
      "path": "src/node/miner.h",
      "position": 1,
      "original_position": 7,
      "commit_id": "107283802e77bb75a621943fb05729914628681c",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694390889,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You are right, what does solution mean here?\r\n\r\nfwiw this is taken from your suggestion https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514084547, reverted.",
      "created_at": "2026-01-16T14:46:10Z",
      "updated_at": "2026-01-16T14:46:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2698797899",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698797899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698813665",
      "pull_request_review_id": 3671237122,
      "id": 2698813665,
      "node_id": "PRRC_kwDOABII586g3KDh",
      "diff_hunk": "@@ -134,6 +134,13 @@ class BlockAssembler\n     bool TestChunkTransactions(const std::vector<CTxMemPoolEntryRef>& txs) const;\n };\n \n+/**\n+ * Helper to check whether two block assembler options are similar.\n+ * Limit comparison to assembly options that impact the final block (without dummy coinbase\n+ * scriptPubKey, with solution). Ignore options that can safely be shared between different callers.\n+ */\n+bool ShareableOptions(const BlockAssembler::Options& a, const BlockAssembler::Options& b);",
      "path": "src/node/miner.h",
      "position": 90,
      "original_position": 9,
      "commit_id": "a4dab3f6e092c0f6b7f8d92f30a4e38309c5de19",
      "original_commit_id": "107283802e77bb75a621943fb05729914628681c",
      "in_reply_to_id": 2694410392,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think this is getting bikesheddy because this is also your suggestion that i take here https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514084547\r\n\r\nI opt for `shareableOptions` because any block template generated by the two block creation options can be shared between clients who want a block template with either of the options.\r\nI will leave it as is and take a better suggestion.\r\nI added a comment to be clearer.",
      "created_at": "2026-01-16T14:50:39Z",
      "updated_at": "2026-01-16T14:50:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2698813665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2698813665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33421"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 152,
      "original_line": 152,
      "side": "RIGHT"
    }
  ]
}