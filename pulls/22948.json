{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
    "id": 731815927,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxODE1OTI3",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22948",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/22948.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/22948.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/d185f36ede51723edf63eb7ae72add70dfd1e4ae",
    "number": 22948,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[Tests] Compute the Power Set of all flags instead of one by one exclusion",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Currently, at the end of a test vector (valid or invalid) we iterate the flags one by one and unset them and check that it makes the transaction succeed or fail. \r\n\r\nThis is called 'minimality' in that we want to check that each flag is sufficient on it's own. However, I think we should be instead doing the 2**(specified) combinations of flag, to ensure that for all combinations of flags only the one we have specified is either valid or invalid.\r\n\r\nOtherwise, we might have e.g. subsets of flags that have interactions we're not detecting here.\r\n\r\nInterestingly, the asymptotic runtime here should be better on average (since we don't usually set that many flags, v.s. 32 iterations on the one by one checker), but the worst case is 2**32 flag combos. It's up to the test writers to not abuse this check.\r\n\r\nContrived example demonstrating the problem:\r\n\r\n```c++\r\nconst auto sum = flag_a_set + flag_b_set +flag_c_set ;\r\n// check parity is even\r\nif (sum & 1) throw \"Oops\";\r\n```\r\n\r\nhaving set \"a,b,c\", the one-by-one checker for \"a,b,c,\" expects failure would check [\"a,b\", \"a,c\", \"b,c\"] and see no failures since the parity of each is 2. However, [\"a\", \"b\", \"c\"] would fail since the parity is 1. \r\n\r\nI'm not aware of any code that is written in this specific manner, but similar circumstance might arise naturally in the code.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      },
      {
        "id": 749416508,
        "node_id": "MDU6TGFiZWw3NDk0MTY1MDg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Up%20for%20grabs",
        "name": "Up for grabs",
        "color": "99a810",
        "default": false
      }
    ],
    "created_at": "2021-09-10T23:19:00Z",
    "updated_at": "2022-10-30T19:09:02Z",
    "closed_at": "2021-10-22T18:45:45Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "524faee1cf6f9d6f513c979ccb2415db90484247",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "JeremyRubin:flag-powerset",
      "ref": "flag-powerset",
      "sha": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 53111803,
        "node_id": "MDEwOlJlcG9zaXRvcnk1MzExMTgwMw==",
        "name": "bitcoin",
        "full_name": "JeremyRubin/bitcoin",
        "owner": {
          "login": "JeremyRubin",
          "id": 886523,
          "node_id": "MDQ6VXNlcjg4NjUyMw==",
          "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/JeremyRubin",
          "html_url": "https://github.com/JeremyRubin",
          "followers_url": "https://api.github.com/users/JeremyRubin/followers",
          "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
          "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
          "repos_url": "https://api.github.com/users/JeremyRubin/repos",
          "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/JeremyRubin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/JeremyRubin/bitcoin",
        "archive_url": "https://api.github.com/repos/JeremyRubin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/JeremyRubin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/JeremyRubin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/JeremyRubin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/JeremyRubin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/JeremyRubin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/JeremyRubin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/JeremyRubin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/JeremyRubin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/JeremyRubin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/JeremyRubin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/JeremyRubin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/JeremyRubin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/JeremyRubin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/JeremyRubin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/JeremyRubin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/JeremyRubin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/JeremyRubin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/JeremyRubin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/JeremyRubin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/JeremyRubin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/JeremyRubin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/JeremyRubin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/JeremyRubin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/JeremyRubin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:JeremyRubin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/JeremyRubin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/JeremyRubin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/JeremyRubin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/JeremyRubin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/JeremyRubin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/JeremyRubin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/JeremyRubin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/JeremyRubin/bitcoin/hooks",
        "svn_url": "https://github.com/JeremyRubin/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 7,
        "stargazers_count": 10,
        "watchers_count": 10,
        "size": 203232,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-01-04T19:39:36Z",
        "created_at": "2016-03-04T06:06:13Z",
        "updated_at": "2023-01-05T18:14:42Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5c0f46ca46e23a161649b5150baa01020dc85e48",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T20:20:41Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 19,
    "deletions": 14,
    "changed_files": 1,
    "commits": 2,
    "review_comments": 16,
    "comments": 5
  },
  "events": [
    {
      "event": "reviewed",
      "id": 751852066,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUxODUyMDY2",
      "url": null,
      "actor": null,
      "commit_id": "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#pullrequestreview-751852066",
      "submitted_at": "2021-09-10T23:21:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5286901952,
      "node_id": "HRFPE_lADOABII5847Oi75zwAAAAE7H7jA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5286901952",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-10T23:30:09Z"
    },
    {
      "event": "renamed",
      "id": 5286919391,
      "node_id": "RTE_lADOABII5847Oi75zwAAAAE7H_zf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5286919391",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-10T23:41:49Z",
      "rename": {
        "from": "[Tests] Computer the Power Set of all flags instead of one by one exclusion",
        "to": "[Tests] Compute the Power Set of all flags instead of one by one exclusion"
      }
    },
    {
      "event": "labeled",
      "id": 5286942638,
      "node_id": "LE_lADOABII5847Oi75zwAAAAE7IFeu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5286942638",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-10T23:58:36Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 917420245,
      "node_id": "IC_kwDOABII5842rrjV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917420245",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-11T14:53:11Z",
      "updated_at": "2021-09-11T14:53:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "If anyone doesn't like the submask code, I could swap it for this algorithm (which is more efficient but not-obvious)  https://cp-algorithms.com/algebra/all-submasks.html#toc-tgt-0",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-917420245",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-11T23:14:06Z",
      "updated_at": "2021-09-11T23:14:06Z",
      "source": {
        "issue": {
          "id": 993975591,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NzMyMDI4ODEx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22954",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22954/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22954/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22954/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22954",
          "number": 22954,
          "state": "closed",
          "state_reason": null,
          "title": "[TESTS] Allow tx_invalid.json tests to include flag rules for if_unset: [A,B,C] then_unset: [D]",
          "body": "This allows an optional tx_invalid.json parameter at position 3 with the format:\r\n```json\r\n[{\"if_unset\": [\"A\", \"D\"], \"then_unset\": [\"B\", \"C\"]}]\r\n```\r\n\r\nDuring the one-by-one flag mutation (patched in https://github.com/bitcoin/bitcoin/pull/22948 to be all combinations, hence the support of multiple) which checks that if disable required flags `[\"A\", \"D\"]` are all unset then the flags `[\"B\", \"C\"]` should become unset as well. The unsetting logic loops until the flags are unset (so rules like if_unset A then_unset B and if_unset B then_unset D end up with B and D unset if A is unset and B is set initially).\r\n\r\nThe current use case of this modification is:\r\n\r\n```json\r\n[{\"if_unset\": [\"DEFAULT_CHECK_TEMPLATE_VERIFY_HASH\"], \"then_unset\": [\"DISCOURAGE_UPGRADABLE_NOPS\"]}]\r\n```\r\n\r\nThis allows us to write use cases wherein we expect DEFAULT_CHECK_TEMPLATE_VERIFY_HASH to be enabled for the tx to be invalid, but desire for it to be valid (and not discouraged) when it is off. After activation of such a soft fork, we can remove such a rule.\r\n\r\nWe do not want to do this via a TrimFlags rule as it should not happen across all transactions, only the ones we specify.\r\n\r\nIt would also be possible to have a list of allowed unsettable flags (e.g., just DISCOURAGE_UPGRADABLE_NOPS and other standardness rules), but it is not required. While the allowing of multiple rules is perhaps extra, this keeps the format flexible for future needs.",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22954",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22954",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22954.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22954.patch"
          },
          "closed_at": "2022-12-16T15:49:12Z",
          "created_at": "2021-09-11T23:14:06Z",
          "updated_at": "2022-12-16T15:49:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 752061278,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMDYxMjc4",
      "url": null,
      "actor": null,
      "commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#pullrequestreview-752061278",
      "submitted_at": "2021-09-12T02:41:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ODViZjQxNTgwYzdhNzA0M2NjMzQ0NTE3OWM3NmFlYzNkY2EzOGM2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/885bf41580c7a7043cc3445179c76aec3dca38c6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/885bf41580c7a7043cc3445179c76aec3dca38c6",
      "tree": {
        "sha": "9412120134437d3ba2a96b292a880655cbb2fc9f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9412120134437d3ba2a96b292a880655cbb2fc9f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77e77e8544c7df5981da9795cda5f1aaa99f73af",
          "sha": "77e77e8544c7df5981da9795cda5f1aaa99f73af",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/77e77e8544c7df5981da9795cda5f1aaa99f73af"
        }
      ],
      "message": "[Tests] Compute the Power Set of all flags instead of one by one exclusion in transaction_tests.cpp",
      "committer": {
        "name": "Jeremy Rubin",
        "email": "j@rubin.io",
        "date": "2021-09-12T06:33:07Z"
      },
      "author": {
        "name": "Jeremy Rubin",
        "email": "j@rubin.io",
        "date": "2021-09-10T23:11:06Z"
      },
      "sha": "885bf41580c7a7043cc3445179c76aec3dca38c6"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5288727716,
      "node_id": "HRFPE_lADOABII5847Oi75zwAAAAE7O5Sk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5288727716",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-12T06:33:34Z"
    },
    {
      "event": "reviewed",
      "id": 752167645,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMTY3NjQ1",
      "url": null,
      "actor": null,
      "commit_id": "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. Here are the results for me before/after. It might be interesting to see the result with https://cp-algorithms.com/algebra/all-submasks.html if you're motivated to try it.\r\n\r\nEDIT: added the results for both tests (tx_valid and tx_invalid).\r\n\r\n<details><summary><code>ExcludeIndividualFlags</code></summary><p>\r\n\r\n```\r\ntest/transaction_tests.cpp(187): Entering test suite \"transaction_tests\"\r\ntest/transaction_tests.cpp(189): Entering test case \"tx_valid\"\r\n6\r\n10\r\n12\r\n6\r\n10\r\n12\r\n14\r\n22\r\n26\r\n28\r\n14\r\n22\r\n26\r\n28\r\n14\r\n22\r\n26\r\n28\r\n2\r\n8\r\n0\r\n65536\r\n6\r\n10\r\n12\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n2\r\n16384\r\n0\r\n0\r\n0\r\n8\r\n65536\r\n8\r\n65536\r\n8\r\n65536\r\n8\r\n65536\r\n8\r\n65536\r\n0\r\n40\r\n65544\r\n65568\r\n65576\r\n40\r\n65544\r\n65568\r\n65576\r\n32\r\n65536\r\n65568\r\n40\r\n65544\r\n65568\r\n65576\r\n8\r\n65536\r\n8\r\n65536\r\n0\r\n0\r\n0\r\n0\r\n64\r\n0\r\n32\r\n6\r\n10\r\n12\r\n0\r\n0\r\n0\r\n64\r\n0\r\n32\r\n0\r\n0\r\n0\r\n64\r\n0\r\n0\r\n64\r\n0\r\n64\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\ntest/transaction_tests.cpp(189): Leaving test case \"tx_valid\"; testing time: 918607us\r\ntest/transaction_tests.cpp(280): Entering test case \"tx_invalid\"\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n512\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n1024\r\n0\r\n0\r\n2049\r\n4096\r\n4097\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n2049\r\n4096\r\n4097\r\n0\r\n0\r\n1\r\n0\r\n0\r\n1\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n65536\r\n0\r\ntest/transaction_tests.cpp(280): Leaving test case \"tx_invalid\"; testing time: 270583us\r\n```\r\n</p></details>\r\n\r\n<details><summary><code>GenerateAllSubMasks</code></summary><p>\r\n\r\n```\r\ntest/transaction_tests.cpp(204): Entering test suite \"transaction_tests\"\r\ntest/transaction_tests.cpp(206): Entering test case \"tx_valid\"\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n16\r\n18\r\n20\r\n22\r\n24\r\n26\r\n28\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n16\r\n18\r\n20\r\n22\r\n24\r\n26\r\n28\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n16\r\n18\r\n20\r\n22\r\n24\r\n26\r\n28\r\n0\r\n2\r\n8\r\n0\r\n65536\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n2\r\n16384\r\n0\r\n0\r\n0\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n0\r\n8\r\n32\r\n40\r\n65536\r\n65544\r\n65568\r\n65576\r\n0\r\n8\r\n32\r\n40\r\n65536\r\n65544\r\n65568\r\n65576\r\n0\r\n32\r\n65536\r\n65568\r\n0\r\n8\r\n32\r\n40\r\n65536\r\n65544\r\n65568\r\n65576\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n0\r\n0\r\n0\r\n64\r\n0\r\n32\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n0\r\n0\r\n64\r\n0\r\n32\r\n0\r\n0\r\n0\r\n64\r\n0\r\n0\r\n64\r\n0\r\n64\r\n0\r\n8\r\n65536\r\n0\r\n0\r\n8\r\n65536\r\n0\r\ntest/transaction_tests.cpp(206): Leaving test case \"tx_valid\"; testing time: 1159591us\r\ntest/transaction_tests.cpp(297): Entering test case \"tx_invalid\"\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n512\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n1024\r\n0\r\n0\r\n0\r\n1\r\n2049\r\n4096\r\n4097\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n2049\r\n4096\r\n4097\r\n0\r\n0\r\n1\r\n0\r\n0\r\n1\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n65536\r\n0\r\ntest/transaction_tests.cpp(297): Leaving test case \"tx_invalid\"; testing time: 539616us\r\n```\r\n</p></details>\r\n",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#pullrequestreview-752167645",
      "submitted_at": "2021-09-12T15:32:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
    },
    {
      "event": "commented",
      "id": 917659491,
      "node_id": "IC_kwDOABII5842sl9j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917659491",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-12T15:40:06Z",
      "updated_at": "2021-09-12T15:40:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22954](https://github.com/bitcoin/bitcoin/pull/22954) ([TESTS] Allow tx_invalid.json tests to include flag rules for if_unset: [A,B,C] then_unset: [D] by JeremyRubin)\n* [#22876](https://github.com/bitcoin/bitcoin/pull/22876) ([TESTS] Update Transaction Tests to permit setting a flag as always on and disabling the exhaustive failure test by JeremyRubin)\n* [#21702](https://github.com/bitcoin/bitcoin/pull/21702) (Implement BIP-119 Validation (CheckTemplateVerify) by JeremyRubin)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-917659491",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-12T16:33:51Z",
      "updated_at": "2021-09-12T16:33:51Z",
      "source": {
        "issue": {
          "id": 987545745,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NzI2NjE2MzQx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22876",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22876/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22876/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22876/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22876",
          "number": 22876,
          "state": "closed",
          "state_reason": null,
          "title": "[TESTS] Update Transaction Tests to permit setting a flag as always on and disabling the exhaustive failure test",
          "body": "Fixes https://github.com/bitcoin/bitcoin/issues/22865. Required for https://github.com/bitcoin/bitcoin/pull/21702 tests.\r\n\r\nThe basic issue is that that the current exclude flag doesn't play nicely with flags like DISCOURAGE_UPGRADABLE_NOPS + SOME_OPCODE_VERIFY.\r\n\r\nWhen you have a valid TX under SOME_OPCODE_VERIFY, then the tests will try disabling that flag and it will trip over DISCOURAGE_UPGRADABLE_NOPS.\r\n\r\nWhen you exclude DISCOURAGE_UPGRADABLE_NOPS, then it gets re-included when the test checks all cominations of the excluded flags being re-enabled to show failure, but then it doesn't fail when SOME_OPCODE_VERIFY is set.\r\n\r\nTo address this, we add two optional fields: 1, a list of flags to *always enable*; 2, a bool of if to disable the one-by-one checker.\r\n\r\nBy then testing the same vector with:\r\n```\r\n...'DISCOURAGE_UPGRADABLE_NOPS', 'NONE', true]\r\n...'NONE', 'SOME_OPCODE_VERIFY']\r\n```\r\n\r\nwe get around the one flag at a time checker.\r\n\r\n\r\nAn alternative approach, that would provide better testing coverage, would allow a more abritrary relationship checker that can be specificed by the test writer (e.g., a map of flag to implied flag) to be used during the one-by-one checker.\r\n\r\nWe cannot simply apply these rules in FillFlags/TrimFlags because if we have a transaction that *should* fail normally with VERIFY_SOME_OPCODE and DISCOURAGE_UPGRADABLE_OPCODES we can't support both cases.\r\n\r\nThis gap arose when implementing test vectors for BIP-119. Along the way I also discovered that, e.g., CHECKSEQUENCEVERIFY's Upgradable NOP treatment is improperly asserted as per:\r\n\r\n```\r\n                   // To provide for future soft-fork extensibility, if the\r\n                    // operand has the disabled lock-time flag set,\r\n                    // CHECKSEQUENCEVERIFY behaves as a NOP.\r\n                    if ((nSequence & CTxIn::SEQUENCE_LOCKTIME_DISABLE_FLAG) != 0)\r\n                        break\r\n```\r\n\r\nwhich does not assert the proper DISCOURAGE_UPGRADABLE_NOP behavior. I beleive that lack of discouragement to be mildly worrying but not a major security concern. Fixing the testing harnesses would allow us to properly implement DISCOURAGE_UPGRADABLE_NOPS for CSV and add the corresponding test cases.",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22876",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22876",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22876.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22876.patch"
          },
          "closed_at": "2022-12-16T15:49:17Z",
          "created_at": "2021-09-03T08:37:51Z",
          "updated_at": "2022-12-16T15:49:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMTg1ZjM2ZWRlNTE3MjNlZGY2M2ViN2FlNzJhZGQ3MGRmZDFlNGFl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "tree": {
        "sha": "f1437dfaf93d4fa55b57d48acafe9983ad71af9e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f1437dfaf93d4fa55b57d48acafe9983ad71af9e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/885bf41580c7a7043cc3445179c76aec3dca38c6",
          "sha": "885bf41580c7a7043cc3445179c76aec3dca38c6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/885bf41580c7a7043cc3445179c76aec3dca38c6"
        }
      ],
      "message": "Squash: Use FancyPants Bit Twiddling Algorithm to Generate Submasks",
      "committer": {
        "name": "Jeremy Rubin",
        "email": "j@rubin.io",
        "date": "2021-09-12T17:34:59Z"
      },
      "author": {
        "name": "Jeremy Rubin",
        "email": "j@rubin.io",
        "date": "2021-09-12T17:34:59Z"
      },
      "sha": "d185f36ede51723edf63eb7ae72add70dfd1e4ae"
    },
    {
      "event": "commented",
      "id": 917692386,
      "node_id": "IC_kwDOABII5842st_i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917692386",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-12T19:06:20Z",
      "updated_at": "2021-09-12T19:06:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "I added the textbook algorithm for this: feel free to test that the output is the same then I can squash.",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-917692386",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-12T20:59:17Z",
      "updated_at": "2021-09-12T20:59:17Z",
      "source": {
        "issue": {
          "id": 859102448,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjE2MjM3MjM2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21702",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21702/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21702/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21702/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21702",
          "number": 21702,
          "state": "closed",
          "state_reason": null,
          "title": "Implement BIP-119 Validation (CheckTemplateVerify)",
          "body": "This is an implementation of  [BIP-119 OP_CHECKTEMPLATEVERIFY](https://github.com/bitcoin/bips/blob/master/bip-0119.mediawiki).  It has been rebased on top of Taproot / ST. The specification has been otherwise unrevised since publication nearly a year and half ago.\r\n\r\nMinus tests and deployment, it's about 180 LOC.\r\n\r\nThis branch activates against regtest so you can test on your local node.\r\n\r\nThis PR includes standardness rules for a bare single CTV Hash script, which has applications for congestion control. Other than that there is limited support for bare scripts using CTV, although the patches to #16766 lay the groundwork for better wallet support with proper IsTrusted parents scanning, which can be amended later to handle chains of irrefutable transactions.\r\n\r\n----\r\n\r\nYou can learn more about the design of BIP-119 at https://utxos.org/. In particular I recommend the workshop transcript and slides https://utxos.org/workshops/ for a thorough review of how CTV works.\r\n\r\nYou can stress test CTV for complex examples by trying out the Sapio compiler: learn.sapio-lang.org. There is also some support for CTV in miniscript via the [Sapio Rust Miniscript Fork](https://github.com/sapio-lang/rust-miniscript). \r\n\r\nDiscussion welcome at ##ctv-bip-review in Libera.\r\n\r\n\r\n----\r\n\r\n\r\nIf you would like to connect to a signet, I operate one you can connect to with the parameters below.\r\n\r\n```\r\n[signet]\r\nsignetchallenge=512102946e8ba8eca597194e7ed90377d9bbebc5d17a9609ab3e35e706612ee882759351ae \r\naddnode=50.18.75.225\r\n```\r\nYou may also wish to have the below parameters for things to work nicely:\r\n```\r\nserver = 1\r\ntxindex=1\r\nrpcport=18332\r\nrpcworkqueue=1000\r\nfallbackfee=0.0002\r\nminrelaytxfee=0\r\n```",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 192202000,
              "node_id": "MDU6TGFiZWwxOTIyMDIwMDA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Consensus",
              "name": "Consensus",
              "color": "009800",
              "default": false
            },
            {
              "id": 749416508,
              "node_id": "MDU6TGFiZWw3NDk0MTY1MDg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Up%20for%20grabs",
              "name": "Up for grabs",
              "color": "99a810",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 77,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21702",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21702",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21702.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21702.patch"
          },
          "closed_at": "2022-12-17T04:06:25Z",
          "created_at": "2021-04-15T17:36:54Z",
          "updated_at": "2022-12-17T04:06:26Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 918126894,
      "node_id": "IC_kwDOABII5842uYEu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/918126894",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-13T12:08:43Z",
      "updated_at": "2021-09-13T12:17:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "@JeremyRubin Nice. The textbook algorithm produces the same values in the tx_invalid test but fewer values in the tx_valid test. Among the values that it does not return compared to your algo, only 2 or 3 of them are unique. WDYT?\r\n\r\n\r\n<details><summary>FancyPants version</summary><p>\r\n\r\n```\r\ntest/transaction_tests.cpp(194): Entering test case \"tx_valid\"\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n16\r\n18\r\n20\r\n22\r\n24\r\n26\r\n28\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n16\r\n18\r\n20\r\n22\r\n24\r\n26\r\n28\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n16\r\n18\r\n20\r\n22\r\n24\r\n26\r\n28\r\n0\r\n2\r\n8\r\n0\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n2\r\n16384\r\n0\r\n0\r\n0\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n0\r\n8\r\n32\r\n40\r\n65536\r\n65544\r\n65568\r\n0\r\n8\r\n32\r\n40\r\n65536\r\n65544\r\n65568\r\n0\r\n32\r\n65536\r\n0\r\n8\r\n32\r\n40\r\n65536\r\n65544\r\n65568\r\n0\r\n8\r\n65536\r\n0\r\n8\r\n65536\r\n0\r\n0\r\n0\r\n2\r\n4\r\n6\r\n8\r\n10\r\n12\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n8\r\n65536\r\n0\r\n0\r\n8\r\n65536\r\n0\r\ntest/transaction_tests.cpp(194): Leaving test case \"tx_valid\"; testing time: 597522us\r\ntest/transaction_tests.cpp(284): Entering test case \"tx_invalid\"\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n512\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n1024\r\n0\r\n0\r\n0\r\n1\r\n2049\r\n4096\r\n4097\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n0\r\n1\r\n2049\r\n4096\r\n4097\r\n0\r\n0\r\n1\r\n0\r\n0\r\n1\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\n1\r\n65536\r\n0\r\ntest/transaction_tests.cpp(284): Leaving test case \"tx_invalid\"; testing time: 170187us\r\n```\r\n</p></details>\r\n",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-918126894",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948"
    },
    {
      "event": "mentioned",
      "id": 5292473679,
      "node_id": "MEE_lADOABII5847Oi75zwAAAAE7dL1P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5292473679",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-13T12:08:43Z"
    },
    {
      "event": "subscribed",
      "id": 5292473683,
      "node_id": "SE_lADOABII5847Oi75zwAAAAE7dL1T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5292473683",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-13T12:08:43Z"
    },
    {
      "event": "reviewed",
      "id": 753468165,
      "node_id": "PRR_kwDOABII584s6QMF",
      "url": null,
      "actor": null,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#pullrequestreview-753468165",
      "submitted_at": "2021-09-14T04:48:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
    },
    {
      "event": "commented",
      "id": 949881158,
      "node_id": "IC_kwDOABII5844nglG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/949881158",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-22T18:45:45Z",
      "updated_at": "2021-10-22T18:45:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Closing this for now -- needs more research/discussion on how to accomplish actually using the powerset properly, see https://github.com/bitcoin/bitcoin/pull/22948#discussion_r708517078",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-949881158",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22948"
    },
    {
      "event": "closed",
      "id": 5506587658,
      "node_id": "CE_lADOABII5847Oi75zwAAAAFIN9wK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5506587658",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-22T18:45:45Z"
    },
    {
      "event": "labeled",
      "id": 5506588384,
      "node_id": "LE_lADOABII5847Oi75zwAAAAFIN97g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5506588384",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-22T18:45:55Z",
      "label": {
        "name": "Up for grabs",
        "color": "99a810"
      }
    },
    {
      "event": "locked",
      "id": 7699630613,
      "node_id": "LOE_lADOABII5847Oi75zwAAAAHK7woV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7699630613",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-30T19:09:02Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706516144",
      "pull_request_review_id": 751852066,
      "id": 706516144,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUxNjE0NA==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        auto flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const auto combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const auto& excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "this check is actually probably superfluous with the iteration not including combos -1 (the all bits set).",
      "created_at": "2021-09-10T23:21:03Z",
      "updated_at": "2021-09-10T23:21:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706516144",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706516144"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 200,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706518296",
      "pull_request_review_id": 751854312,
      "id": 706518296,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUxODI5Ng==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        auto flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const auto combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const auto& excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "in_reply_to_id": 706516144,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "update: it's not, because of the TrimFlags",
      "created_at": "2021-09-10T23:30:25Z",
      "updated_at": "2021-09-10T23:30:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706518296",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706518296"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 200,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706728574",
      "pull_request_review_id": 752061278,
      "id": 706728574,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyODU3NA==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": null,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you might be missing a `* 8` here",
      "created_at": "2021-09-12T01:59:39Z",
      "updated_at": "2021-09-12T02:41:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706728574",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706728574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706729262",
      "pull_request_review_id": 752061278,
      "id": 706729262,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyOTI2Mg==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.",
      "path": "src/test/transaction_tests.cpp",
      "position": 9,
      "original_position": 1,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": null,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The doc is out of date now",
      "created_at": "2021-09-12T02:08:10Z",
      "updated_at": "2021-09-12T02:41:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706729262",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706729262"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706730907",
      "pull_request_review_id": 752061278,
      "id": 706730907,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjczMDkwNw==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        auto flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const auto combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const auto& excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "in_reply_to_id": 706516144,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Notice that `TrimFlags` only removes flags, so it is, indeed, superfluous:\r\n`flags_excluding_one  excluded_flags  flags`\r\n\r\nHaving said that, there's no harm in leaving it here.",
      "created_at": "2021-09-12T02:28:46Z",
      "updated_at": "2021-09-12T02:41:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706730907",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706730907"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 200,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706731875",
      "pull_request_review_id": 752061278,
      "id": 706731875,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjczMTg3NQ==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const unsigned int excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {\n             flags_combos.insert(flags_excluding_one);\n         }",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": null,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not sure if this is a problem, but notice that `TrimFlags` might cause the resulting `flag_combos` to have duplicate elements.\r\n\r\nEg, if `SCRIPT_VERIFY_P2SH` and `SCRIPT_VERIFY_WITNESS` are set in `flags`, the mapping done by `TrimFlags` will make 25% of the resulting elements duplicates.",
      "created_at": "2021-09-12T02:40:41Z",
      "updated_at": "2021-09-12T02:41:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706731875",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706731875"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 202,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706767923",
      "pull_request_review_id": 752095910,
      "id": 706767923,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc2NzkyMw==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": 706728574,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": " --> will fix",
      "created_at": "2021-09-12T06:06:59Z",
      "updated_at": "2021-09-12T06:06:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706767923",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706767923"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768096",
      "pull_request_review_id": 752096007,
      "id": 706768096,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc2ODA5Ng==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const unsigned int excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {\n             flags_combos.insert(flags_excluding_one);\n         }",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": 706731875,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "yeah I could do a de-dup pass with TrimFlags. It makes more sense IMO to keep TrimFlags even if superfluos with the above as TrimFlags is a separate validity of flag combo check v.s. the dumb subset generator.",
      "created_at": "2021-09-12T06:08:35Z",
      "updated_at": "2021-09-12T06:08:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706768096",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768096"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 202,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768676",
      "pull_request_review_id": 752096376,
      "id": 706768676,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc2ODY3Ng==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.",
      "path": "src/test/transaction_tests.cpp",
      "position": 9,
      "original_position": 1,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": 706729262,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "i can't tell what line you are commenting on",
      "created_at": "2021-09-12T06:13:53Z",
      "updated_at": "2021-09-12T06:13:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706768676",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768676"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706770414",
      "pull_request_review_id": 752097399,
      "id": 706770414,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc3MDQxNA==",
      "diff_hunk": "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.",
      "path": "src/test/transaction_tests.cpp",
      "position": 9,
      "original_position": 1,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "in_reply_to_id": 706729262,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right, sorry about that.\r\n```c\r\n// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\r\n// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\r\n// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\r\n```",
      "created_at": "2021-09-12T06:30:55Z",
      "updated_at": "2021-09-12T06:30:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706770414",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706770414"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706849538",
      "pull_request_review_id": 752167645,
      "id": 706849538,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg0OTUzOA==",
      "diff_hunk": "@@ -168,19 +168,36 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n-// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n-// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Exclude each possible script verify flag from flags. Returns a set of all\n+// submasks.\n // Assumes that mapFlagNames contains all script verify flags.\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\n {\n-    std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n-        if (flags != flags_excluding_one) {\n-            flags_combos.insert(flags_excluding_one);\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int)*8;\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n         }\n     }\n+\n+    std::set<unsigned int> flags_combos;\n+    for (const unsigned int submask : all_flag_combos) {\n+        flags_combos.insert(TrimFlags(submask));\n+    }\n+    flags_combos.erase(flags);",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, clang-format\r\n```diff\r\n@@ -174,7 +174,7 @@ unsigned int FillFlags(unsigned int flags)\r\n std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\r\n {\r\n     std::vector<unsigned int> set_flags;\r\n-    const size_t n_flags = sizeof(unsigned int)*8;\r\n+    const size_t n_flags = sizeof(unsigned int) * 8;\r\n     set_flags.reserve(n_flags);\r\n@@ -184,10 +184,10 @@ std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\r\n     }\r\n     const size_t combos = 1 << set_flags.size();\r\n     // skip last all set flags\r\n-    std::vector<unsigned int> all_flag_combos(combos-1);\r\n-    for (size_t i = 0; i < combos-1; ++i){\r\n-        for(size_t j = 0; j < set_flags.size(); ++j) {\r\n-            if (i & (1<<j)) {\r\n+    std::vector<unsigned int> all_flag_combos(combos - 1);\r\n+    for (size_t i = 0; i < combos - 1; ++i) {\r\n+        for (size_t j = 0; j < set_flags.size(); ++j) {\r\n+            if (i & (1 << j)) {\r\n                 all_flag_combos[i] |= set_flags[j];\r\n```\r\n",
      "created_at": "2021-09-12T14:53:17Z",
      "updated_at": "2021-09-12T15:32:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706849538",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706849538"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 200,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850182",
      "pull_request_review_id": 752167645,
      "id": 706850182,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg1MDE4Mg==",
      "diff_hunk": "@@ -168,19 +168,36 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n-// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n-// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Exclude each possible script verify flag from flags. Returns a set of all\n+// submasks.\n // Assumes that mapFlagNames contains all script verify flags.\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\n {\n-    std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n-        if (flags != flags_excluding_one) {\n-            flags_combos.insert(flags_excluding_one);\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int)*8;\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 22,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, can use braced initialization on these for type safety\r\n```diff\r\n-    const size_t n_flags = sizeof(unsigned int)*8;\r\n+    const size_t n_flags{sizeof(unsigned int) * 8};\r\n     set_flags.reserve(n_flags);\r\n     for (size_t i = 0; i < n_flags; ++i) {\r\n-        const unsigned int flag = flags & (1 << i);\r\n+        const unsigned int flag{flags & (1 << i)};\r\n```\r\n",
      "created_at": "2021-09-12T14:58:26Z",
      "updated_at": "2021-09-12T15:32:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706850182",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850182"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 180,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850718",
      "pull_request_review_id": 752167645,
      "id": 706850718,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg1MDcxOA==",
      "diff_hunk": "@@ -168,19 +168,36 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n-// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n-// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Exclude each possible script verify flag from flags. Returns a set of all\n+// submasks.\n // Assumes that mapFlagNames contains all script verify flags.\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\n {\n-    std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n-        if (flags != flags_excluding_one) {\n-            flags_combos.insert(flags_excluding_one);\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int)*8;\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){",
      "path": "src/test/transaction_tests.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "maybe hoist subtracting one to the declaration of `combos`\r\n```diff\r\n-    const size_t combos = 1 << set_flags.size();\r\n+    const size_t combos = (1 << set_flags.size()) - 1;\r\n     // skip last all set flags\r\n-    std::vector<unsigned int> all_flag_combos(combos-1);\r\n-    for (size_t i = 0; i < combos-1; ++i){\r\n+    std::vector<unsigned int> all_flag_combos(combos);\r\n+    for (size_t i = 0; i < combos; ++i) {\r\n```\r\n",
      "created_at": "2021-09-12T15:02:30Z",
      "updated_at": "2021-09-12T15:32:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706850718",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850718"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 188,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/707906373",
      "pull_request_review_id": 753468165,
      "id": 707906373,
      "node_id": "PRRC_kwDOABII584qMctF",
      "diff_hunk": "@@ -266,8 +271,8 @@ BOOST_AUTO_TEST_CASE(tx_valid)\n             }\n \n             // Check that flags are maximal: transaction should fail if any unset flags are set.\n-            for (auto flags_excluding_one : ExcludeIndividualFlags(verify_flags)) {\n-                if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~flags_excluding_one, txdata, strTest, /* expect_valid */ false)) {\n+            for (auto submask_flags : GenerateAllSubMasks(verify_flags)) {\n+                if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~submask_flags, txdata, strTest, /* expect_valid */ false)) {\n                     BOOST_ERROR(\"Too many flags unset: \" << strTest);\n                 }\n             }",
      "path": "src/test/transaction_tests.cpp",
      "position": 45,
      "original_position": 45,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "in_reply_to_id": null,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I understand the intent of this code correctly, the idea is that given a set of chosen flags, we want to check that every possible superset of flags doesn't succeed. If that's so, I believe there's a problem with the current `FlipAll( GenerateAllSubMasks( flags ) )` logic for computing all possible supersets.\r\n\r\nEg, assuming 3-bit words, for `flags = 100`, we'll generate all `flags` sub masks `{000}`, and then flip them `{111}`. However, what we really want is to generate all the `~flags = 011` sub masks `{010, 001, 000}`, and then flip them `{101, 110, 111}`.\r\n\r\nIn short, there's a missing bit flip before computing all the sub masks. Ie. it should be\r\n```\r\nFlipAll( GenerateAllSubMasks( ~flags ) )\r\n```\r\n\r\nWith that said, there's still the issue that flipping flag bits doesn't interact well with the `TrimFlags` operation done inside `GenerateAllSubMasks`.\r\n\r\nEg. if the only flag bits were`VERIFY_P2SH` and `VERIFY_WITNESS` (in that order), for `flags = 00` we'd generate all the `~flags = 11` sub masks `{10, 01, 00}`, trim them `{10, 00, 00}` (`01` is mapped to `00`), remove duplicates `{10, 00}`, and finally flip them `{01, 11}`. However, we ended up with an invalid combination (`01`) when the correct result would have been `{10, 11}`.\r\n\r\nMore generally, after fixing the initial missing flip, the code would look something like\r\n```\r\nFlipAll( Unique( TrimFlags( GenerateAllSubMasksWithoutTrimming( ~flags ) ) ) )\r\n```\r\nwhen what we really want is something like:\r\n```\r\nfor flag_superset in FlipAll( GenerateAllSubMasksWithoutTrimming( ~flags ) ) ) ):\r\n    if flag_superset == TrimFlags( flag_superset ):\r\n        # use flag_superset\r\n```",
      "created_at": "2021-09-14T04:48:09Z",
      "updated_at": "2021-09-14T04:48:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r707906373",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/707906373"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": 273,
      "original_start_line": 273,
      "start_side": "RIGHT",
      "line": 278,
      "original_line": 278,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708517078",
      "pull_request_review_id": 754277242,
      "id": 708517078,
      "node_id": "PRRC_kwDOABII584qOxzW",
      "diff_hunk": "@@ -266,8 +271,8 @@ BOOST_AUTO_TEST_CASE(tx_valid)\n             }\n \n             // Check that flags are maximal: transaction should fail if any unset flags are set.\n-            for (auto flags_excluding_one : ExcludeIndividualFlags(verify_flags)) {\n-                if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~flags_excluding_one, txdata, strTest, /* expect_valid */ false)) {\n+            for (auto submask_flags : GenerateAllSubMasks(verify_flags)) {\n+                if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~submask_flags, txdata, strTest, /* expect_valid */ false)) {\n                     BOOST_ERROR(\"Too many flags unset: \" << strTest);\n                 }\n             }",
      "path": "src/test/transaction_tests.cpp",
      "position": 45,
      "original_position": 45,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "in_reply_to_id": 707906373,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "yeah you're totally right; i've been playing with it a bit as well and noticed that it seems to not be quite right (thanks @jonatack for pointing it out).\r\n\r\nThe logic is definitely off, and I think it may be intractible in this case since GenerateAllSubMasksWithoutTrimming(~flags) ends up being pretty big... with 20 it might be ok, but eventually there would be too many flags.",
      "created_at": "2021-09-14T18:13:51Z",
      "updated_at": "2021-09-14T18:13:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r708517078",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708517078"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": 273,
      "original_start_line": 273,
      "start_side": "RIGHT",
      "line": 278,
      "original_line": 278,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708841974",
      "pull_request_review_id": 754667579,
      "id": 708841974,
      "node_id": "PRRC_kwDOABII584qQBH2",
      "diff_hunk": "@@ -266,8 +271,8 @@ BOOST_AUTO_TEST_CASE(tx_valid)\n             }\n \n             // Check that flags are maximal: transaction should fail if any unset flags are set.\n-            for (auto flags_excluding_one : ExcludeIndividualFlags(verify_flags)) {\n-                if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~flags_excluding_one, txdata, strTest, /* expect_valid */ false)) {\n+            for (auto submask_flags : GenerateAllSubMasks(verify_flags)) {\n+                if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~submask_flags, txdata, strTest, /* expect_valid */ false)) {\n                     BOOST_ERROR(\"Too many flags unset: \" << strTest);\n                 }\n             }",
      "path": "src/test/transaction_tests.cpp",
      "position": 45,
      "original_position": 45,
      "commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "original_commit_id": "d185f36ede51723edf63eb7ae72add70dfd1e4ae",
      "in_reply_to_id": 707906373,
      "user": {
        "login": "esneider",
        "id": 667132,
        "node_id": "MDQ6VXNlcjY2NzEzMg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/667132?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/esneider",
        "html_url": "https://github.com/esneider",
        "followers_url": "https://api.github.com/users/esneider/followers",
        "following_url": "https://api.github.com/users/esneider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/esneider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/esneider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/esneider/subscriptions",
        "organizations_url": "https://api.github.com/users/esneider/orgs",
        "repos_url": "https://api.github.com/users/esneider/repos",
        "events_url": "https://api.github.com/users/esneider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/esneider/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Makes sense. Maybe bound the amount of flipped bits? That way you can test some flag interactions, but bound the exponential growth. The bounding capability would also help to put a safeguard against exponential explosion in the tx_invalid test if there are too many set bits in the initial mask.",
      "created_at": "2021-09-15T05:08:59Z",
      "updated_at": "2021-09-15T05:12:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r708841974",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708841974"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
        }
      },
      "start_line": 273,
      "original_start_line": 273,
      "start_side": "RIGHT",
      "line": 278,
      "original_line": 278,
      "side": "RIGHT"
    }
  ]
}