{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600",
    "id": 402262445,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDAyMjYyNDQ1",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18600",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/18600.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/18600.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
    "number": 18600,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[wallet] Track conflicted transactions removed from mempool and fix UI notifications",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "UI notifications and the -walletnotify process should be triggered for wallet transactions that are conflicted out of the mempool by a newly connected block.\r\n\r\nUnfortunately, it has been broken by 7e89994 by removing the call to `SyncTransaction()` for block-conflicted transactions in `CWallet::BlockConnected`. This PR restores conflict tracking but instead relies on `TransactionRemovedFromMempool`. \r\n\r\nDoing so allows for wider conflict detection, i.e non-connected wallet transactions. Transaction A may not involves wallet but may be spent by a transaction B paying back to a wallet address. Double-spend of transaction A won't trigger a conflict for transaction B as A isn't tracked by wallet (`mapTxSpends`).\r\n\r\nThis PR also extends conflicts detection to mempool replacement (`MemPoolRemovalReason::REPLACED`), as for an end-user, consequences are likely to be interpreted the same, conflicted funds aren't available. Distinction of reasons (block-connected or mempool-replacement) should stay clear for us.\r\n\r\nConflicts detection stays a best-effort, as a mempool replacement may happen while wallet is shutdown, and mempool isn't replayed at wallet rescan, conflict can't be see.\r\n\r\nFixes #18325 ",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2020-04-11T23:44:07Z",
    "updated_at": "2023-04-11T09:55:42Z",
    "closed_at": "2021-01-11T14:27:25Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "e7a120a58494123bc0613dea10fce283f3be4680",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "ariard:2020-03-wallet-track-conflicts",
      "ref": "2020-03-wallet-track-conflicts",
      "sha": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 109855489,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMDk4NTU0ODk=",
        "name": "bitcoin",
        "full_name": "ariard/bitcoin",
        "owner": {
          "login": "ariard",
          "id": 23310655,
          "node_id": "MDQ6VXNlcjIzMzEwNjU1",
          "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ariard",
          "html_url": "https://github.com/ariard",
          "followers_url": "https://api.github.com/users/ariard/followers",
          "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
          "organizations_url": "https://api.github.com/users/ariard/orgs",
          "repos_url": "https://api.github.com/users/ariard/repos",
          "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ariard/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ariard/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ariard/bitcoin",
        "archive_url": "https://api.github.com/repos/ariard/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ariard/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ariard/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ariard/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ariard/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ariard/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ariard/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ariard/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ariard/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ariard/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ariard/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ariard/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ariard/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ariard/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ariard/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ariard/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ariard/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ariard/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ariard/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ariard/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ariard/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ariard/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ariard/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ariard/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ariard/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ariard/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ariard/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ariard/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ariard/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ariard/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ariard/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ariard/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ariard/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ariard/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ariard/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ariard/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ariard/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ariard/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ariard/bitcoin/hooks",
        "svn_url": "https://github.com/ariard/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 204684,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-18T20:02:59Z",
        "created_at": "2017-11-07T15:39:59Z",
        "updated_at": "2023-03-13T00:08:19Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T20:20:41Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 85,
    "deletions": 16,
    "changed_files": 9,
    "commits": 4,
    "review_comments": 21,
    "comments": 13
  },
  "events": [
    {
      "event": "labeled",
      "id": 3224611748,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMyMjQ2MTE3NDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3224611748",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-11T23:44:57Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 3224611934,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMyMjQ2MTE5MzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3224611934",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-11T23:45:12Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3224615585,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzIyNDYxNTU4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3224615585",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-11T23:50:47Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-11T23:52:32Z",
      "updated_at": "2020-04-11T23:52:32Z",
      "source": {
        "issue": {
          "id": 579587385,
          "node_id": "MDU6SXNzdWU1Nzk1ODczODU=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18325",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18325/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18325/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18325/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/18325",
          "number": 18325,
          "state": "closed",
          "state_reason": "completed",
          "title": "Restore UI notifications and -walletnotify behavior for block conflicted transactions",
          "body": "UI notifications and the `-walletnotify` process should be triggered for wallet transactions that are conflicted out of the mempool by a newly connected block.\r\n\r\nWe broke this in #9240, reported it in #9479 and fixed it in #9371.\r\n\r\nWe inadvertently broke it again in  #16624 (Sep 2019 commit 7e89994) by removing the call to `SyncTransaction()` for transactions that are conflicted out of the mempool when a block is connected.\r\n\r\nI think the fix is just to restore the call to `SyncTransaction()` for transactions that are conflicted out of the mempool. Could we also call `SyncTransaction()` for _any_ transaction that is removed from the mempool (and fires `TransactionRemovedFromMempool`)?\r\n\r\nh/t to @ryanofsky for spotting this.\r\n@ariard - any thoughts about just reverting 7e89994?",
          "user": {
            "login": "jnewbery",
            "id": 1063656,
            "node_id": "MDQ6VXNlcjEwNjM2NTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jnewbery",
            "html_url": "https://github.com/jnewbery",
            "followers_url": "https://api.github.com/users/jnewbery/followers",
            "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
            "organizations_url": "https://api.github.com/users/jnewbery/orgs",
            "repos_url": "https://api.github.com/users/jnewbery/repos",
            "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jnewbery/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/48",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/48",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/48/labels",
            "id": 5405834,
            "node_id": "MDk6TWlsZXN0b25lNTQwNTgzNA==",
            "number": 48,
            "state": "closed",
            "title": "0.20.1",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 11,
            "created_at": "2020-05-11T12:15:10Z",
            "updated_at": "2020-08-22T08:57:15Z",
            "closed_at": "2020-08-17T01:42:02Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 13,
          "closed_at": "2020-06-02T22:12:51Z",
          "created_at": "2020-03-11T22:46:24Z",
          "updated_at": "2022-02-15T11:16:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "unlabeled",
      "id": 3224616962,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MzIyNDYxNjk2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3224616962",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-11T23:52:52Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 3224617165,
      "node_id": "MDIwOlJldmlld1JlcXVlc3RlZEV2ZW50MzIyNDYxNzE2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3224617165",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-11T23:53:12Z",
      "requested_reviewer": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 612561562,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxMjU2MTU2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612561562",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-12T04:13:24Z",
      "updated_at": "2020-06-02T06:42:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18982 (wallet: Minimal fix to restore conflicted transaction notifications by ryanofsky)\n* #18354 (Use shared pointers only in validation interface by bvbfan)\n* #17443 (Drop checkFinalTx and use Median Time Past to check finality of wallet transactions by ariard)\n* #15719 (Wallet passive startup by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-612561562",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-12T07:09:07Z",
      "updated_at": "2020-04-12T07:09:07Z",
      "source": {
        "issue": {
          "id": 551601723,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzY0Mjk0MjQ5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17954",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17954/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17954/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17954/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/17954",
          "number": 17954,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Remove calls to Chain::Lock methods",
          "body": "This is a set of changes updating wallet code to make fewer calls to `Chain::Lock` methods, so the `Chain::Lock` class will be easier to remove in #16426 with fewer code changes and small changes to behavior.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 1648013533,
              "node_id": "MDU6TGFiZWwxNjQ4MDEzNTMz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club",
              "name": "Review club",
              "description": "",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 37,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17954",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/17954",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/17954.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/17954.patch"
          },
          "closed_at": "2020-04-14T11:20:30Z",
          "created_at": "2020-01-17T19:51:04Z",
          "updated_at": "2022-02-15T10:44:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 392185125,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMTg1MTI1",
      "url": null,
      "actor": null,
      "commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Nice to see progress on this!\r\n\r\nStarted review (will update list below with progress).\r\n- [X] 9eb9af6c56f52628cca4cc5241c0f88adb9f689d [validationinterface] Extend TransactionRemovedFromMempool with fIsConflicted (1/4)\r\n- [X] 497c50205534aa32931a048d02a3a2004460fe64 [wallet] Track transactions removed from mempool due to conflicts (2/4)\r\n- [X] 1af561a8f2bc93ac029b7304fb6da12e6094b860 [rpcwallet] Add `conflicted` as transaction description field (3/4)\r\n- [ ] b34318d4cc27d61d2b9cc6a97c9584eb0dada6e4 [functional] Test conflict on non-connected wallet transactions (4/4)\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#pullrequestreview-392185125",
      "submitted_at": "2020-04-13T15:45:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
    },
    {
      "event": "reviewed",
      "id": 392239037,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMjM5MDM3",
      "url": null,
      "actor": null,
      "commit_id": "b34318d4cc27d61d2b9cc6a97c9584eb0dada6e4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#pullrequestreview-392239037",
      "submitted_at": "2020-04-13T15:59:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3230050190,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzIzMDA1MDE5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3230050190",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-14T08:30:35Z"
    },
    {
      "event": "labeled",
      "id": 3230844022,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMyMzA4NDQwMjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3230844022",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-14T12:10:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "milestoned",
      "id": 3241410954,
      "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDMyNDE0MTA5NTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3241410954",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-16T19:14:27Z",
      "milestone": {
        "title": "0.20.0"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3258404995,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzI1ODQwNDk5NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3258404995",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T00:54:40Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NTM1NDYwMDAwYWI1MDE3MGM3ODFjZWU5YTBkMWRjYTFmZDYzMjJm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8535460000ab50170c781cee9a0d1dca1fd6322f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8535460000ab50170c781cee9a0d1dca1fd6322f",
      "tree": {
        "sha": "15fb2d02752d2d22b4b8d9ae4c2cd58e4ae8835d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/15fb2d02752d2d22b4b8d9ae4c2cd58e4ae8835d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e",
          "sha": "b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e"
        }
      ],
      "message": "[validationinterface] Extend TransactionRemovedFromMempool with fIsConflicted\n\nClient may be interested in updating status of notified transaction\nwithout tracking a whole chain of anterior transactions conflicted,\nindependently of the reason (mempool or block).\n\nThis is only used in next commit.",
      "committer": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-22T00:54:50Z"
      },
      "author": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-11T07:05:00Z"
      },
      "sha": "8535460000ab50170c781cee9a0d1dca1fd6322f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3258407099,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzI1ODQwNzA5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3258407099",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T00:55:56Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZGY0MGYzM2VhNTFiNmIwOWQ0NTkxMTU0OTM2MWI0OWM2Y2VlZTg3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdf40f33ea51b6b09d45911549361b49c6ceee87",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bdf40f33ea51b6b09d45911549361b49c6ceee87",
      "tree": {
        "sha": "02f7b435bf8a3f690eb735ca85a6e51e811672ce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/02f7b435bf8a3f690eb735ca85a6e51e811672ce"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8535460000ab50170c781cee9a0d1dca1fd6322f",
          "sha": "8535460000ab50170c781cee9a0d1dca1fd6322f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8535460000ab50170c781cee9a0d1dca1fd6322f"
        }
      ],
      "message": "[wallet] Track transactions removed from mempool due to conflicts\n\nExtend conflict tracking for transaction of interest (either spending\nfrom us or paying to us) not directly connected to a previous wallet\ntransaction and as such not covered under blockConnected.\n\nRestore UI notifications for block conflicted transactions broke\ninadvertently by 7e89994.\n\nBlock conflicted transactions may see their CWalletTx::Confirmation\nstatus updated twice, once by BlockConnected and transactionRemovedFromMempool,\noverlap is necessary as first trigger may be due to the conflicting transaction\nincluded in a block at AddToWalletIfInvolvingMe and second one to\nmempool removal on its own sake.",
      "committer": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-22T01:03:31Z"
      },
      "author": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-11T21:50:07Z"
      },
      "sha": "bdf40f33ea51b6b09d45911549361b49c6ceee87"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZTVmN2MwNjU4MDI4N2YwYjhkOTE5YWExZWExMWNlZTI1MDk1NTQ1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e5f7c06580287f0b8d919aa1ea11cee25095545",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0e5f7c06580287f0b8d919aa1ea11cee25095545",
      "tree": {
        "sha": "ed52cff17e300944ee96c1b45b7c3c4fea90cef5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed52cff17e300944ee96c1b45b7c3c4fea90cef5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdf40f33ea51b6b09d45911549361b49c6ceee87",
          "sha": "bdf40f33ea51b6b09d45911549361b49c6ceee87",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bdf40f33ea51b6b09d45911549361b49c6ceee87"
        }
      ],
      "message": "[rpcwallet] Add `conflicted` as transaction description field\n\nPrevious commit was extending conflicts tracking to ones triggered\nfrom mempool. These do not informed about txid of conflicting\ntransaction, so we need a way to learn about conflict status of\na wallet transaction.\n\nNew field is fulfilled for listtransactions, listsinceblock,\ngettransaction.",
      "committer": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-22T01:03:44Z"
      },
      "author": {
        "name": "Antoine Riard",
        "email": "antoine.riard@gmail.com",
        "date": "2020-04-11T22:24:11Z"
      },
      "sha": "0e5f7c06580287f0b8d919aa1ea11cee25095545"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzplOWZmY2VkOGJlYmU3NDUxZDVlOGQ5N2I1ZTg4ZmJlZGI3Njc1Y2M2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "tree": {
        "sha": "46e193ca9c00df565cba1df539180e8194bc24c0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/46e193ca9c00df565cba1df539180e8194bc24c0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e5f7c06580287f0b8d919aa1ea11cee25095545",
          "sha": "0e5f7c06580287f0b8d919aa1ea11cee25095545",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0e5f7c06580287f0b8d919aa1ea11cee25095545"
        }
      ],
      "message": "[functional] Test conflict on non-connected wallet transactions\n\nNon-connected is defined as a transactions for which parent or anterior\ntransactions are not tracked by wallet.\n\nThis test extension covers non-connected wallet transaction conflicted\nby a block connection.",
      "committer": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-22T01:03:44Z"
      },
      "author": {
        "name": "Antoine Riard",
        "email": "ariard@student.42.fr",
        "date": "2020-04-01T19:32:43Z"
      },
      "sha": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3258423135,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzI1ODQyMzEzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3258423135",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T01:05:29Z"
    },
    {
      "event": "commented",
      "id": 617487831,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxNzQ4NzgzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617487831",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T01:05:44Z",
      "updated_at": "2020-04-22T01:05:44Z",
      "author_association": "MEMBER",
      "body": "Rebased with few comments addressed.\r\n\r\nI hear you on this https://github.com/bitcoin/bitcoin/pull/18600#discussion_r412587833 @ryanofsky, I may have to pass down block height/hash through mempool code but at least that would make reasoning the same than it is today for `CONFLICTED` state.\r\n\r\nI also know you're not a great fan of these states, IMO I find pretty nice to have well-defined states for wallet transactions and grepp'ing for `is*`/`set*` to know state transitions, but I agree too we may refine them to only `UNCONFIRMED/CONFIRMED`, conflicting is a per-input problem stricto sensu but I think that's outside PR scope ?\r\n\r\nI also dropped mempool replacement considered as conflict in wallet code as it was controversial.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-617487831",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "mentioned",
      "id": 3258423536,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzI1ODQyMzUzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3258423536",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T01:05:45Z"
    },
    {
      "event": "subscribed",
      "id": 3258423537,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMyNTg0MjM1Mzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3258423537",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T01:05:45Z"
    },
    {
      "event": "unlabeled",
      "id": 3258472851,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MzI1ODQ3Mjg1MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3258472851",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T01:35:40Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 617536160,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxNzUzNjE2MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617536160",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T04:04:22Z",
      "updated_at": "2020-04-22T04:04:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I also know you're not a great fan of these states, IMO I find pretty nice to have well-defined states for wallet transactions and grepp'ing for `is*`/`set*` to know state transitions, but I agree too we may refine them to only `UNCONFIRMED/CONFIRMED`, conflicting is a per-input problem stricto sensu but I think that's outside PR scope ?\r\n\r\nI need to catch up on the newest comments and changes, but I think it'd be great to improve state tracking in the ways you're suggesting, and I think #16624 was a big code improvement. I was just expecting this PR to be smaller and to just restore previous notification behavior, fixing the regression instead of doing bigger things in ways that looked like they could affect backwards compatibility.\r\n\r\nIn the end since the wallet has incomplete information, there probably isn't going to be an obviously ideal way to track states, and we'll need to consider a lot of individual use cases. I think the main goal should be eliminating cases where the wallet displays misleading information or forces users into workarounds like calling `abandontransaction`. Seeing specific test cases and examples that are improved will really help motivate future changes.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-617536160",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T16:06:22Z",
      "updated_at": "2020-04-22T16:06:22Z",
      "source": {
        "issue": {
          "id": 427922984,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjY2NDExMzEx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15719",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15719/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15719/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15719/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/15719",
          "number": 15719,
          "state": "closed",
          "state_reason": null,
          "title": "Wallet passive startup",
          "body": "Move wallet startup code closer to a simple model where the wallet attaches to the chain with a single chain.handleNotifications() call, and just starts passively receiving blocks and mempool notifications from the last update point, instead having to actively rescan blocks and request a mempool snapshot, and deal with the tip changing, and deal with early or stale notifications.\r\n\r\nAlso, stop locking the cs_wallet mutex and registering for validationinterface notifications before the rescan. This was new behavior since 6a72f26968cf931c985d8d4797b6264274cabd06 https://github.com/bitcoin/bitcoin/pull/16426 and is not ideal because it stops other wallets and rpcs and the gui from receiving new notifications until after the scan completes.\r\n\r\nThis change is a half-step towards implementing multiwallet scans (https://github.com/bitcoin/bitcoin/issues/11756), since it provides needed locator and birthday timestamp information to the Chain interface, and it rationalizes locking and event ordering in the startup code. The second half of implementing parallel rescans requires moving the ScanForWalletTransactions implementation (which this PR does not touch) from the wallet to the node.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 26,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15719",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/15719",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/15719.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/15719.patch"
          },
          "closed_at": "2022-10-12T17:59:26Z",
          "created_at": "2019-04-01T21:35:48Z",
          "updated_at": "2022-10-12T17:59:26Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-28T09:46:16Z",
      "updated_at": "2020-04-28T09:46:16Z",
      "source": {
        "issue": {
          "id": 581753448,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg4NzY5NzUw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18354",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18354/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18354/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18354/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18354",
          "number": 18354,
          "state": "closed",
          "state_reason": null,
          "title": "Use shared pointers only in validation interface",
          "body": "This pull request fully replace #18279 it fix 3 issues with wallet\r\n1. Crash in wallet destructor while it tries to delete mutex while it's hold by notification thread\r\n2. Crash in notification disconnect due to notification callback is set to nullptr before unregister interface is done\r\n3. Ensure unregister interface has no more background callbacks before returning to notification disconnect",
          "user": {
            "login": "bvbfan",
            "id": 8323581,
            "node_id": "MDQ6VXNlcjgzMjM1ODE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8323581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bvbfan",
            "html_url": "https://github.com/bvbfan",
            "followers_url": "https://api.github.com/users/bvbfan/followers",
            "following_url": "https://api.github.com/users/bvbfan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/bvbfan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/bvbfan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/bvbfan/subscriptions",
            "organizations_url": "https://api.github.com/users/bvbfan/orgs",
            "repos_url": "https://api.github.com/users/bvbfan/repos",
            "events_url": "https://api.github.com/users/bvbfan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/bvbfan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 20,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18354",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18354",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18354.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18354.patch"
          },
          "closed_at": "2022-02-22T10:56:18Z",
          "created_at": "2020-03-15T17:27:23Z",
          "updated_at": "2023-02-22T10:14:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 621512219,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTUxMjIxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621512219",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-29T22:59:32Z",
      "updated_at": "2020-04-29T22:59:32Z",
      "author_association": "MEMBER",
      "body": "Tests fail",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-621512219",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "referenced",
      "id": 3302447147,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzMDI0NDcxNDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3302447147",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2c1c162cd5f60e649d9d55f6c99301c4985d5bab",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/2c1c162cd5f60e649d9d55f6c99301c4985d5bab",
      "created_at": "2020-05-05T03:18:55Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T03:20:48Z",
      "updated_at": "2020-05-05T03:20:48Z",
      "source": {
        "issue": {
          "id": 612297262,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDEzMjg1NjI0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18878",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18878/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18878/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18878/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18878",
          "number": 18878,
          "state": "closed",
          "state_reason": null,
          "title": "test: Add test for conflicted wallet tx notifications",
          "body": "Add test coverage for conflicted wallet transaction notifications so we can improve current behavior and avoid future regressions\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/9240 - accidental break\r\nhttps://github.com/bitcoin/bitcoin/issues/9479 - bug report\r\nhttps://github.com/bitcoin/bitcoin/pull/9371 - fix\r\nhttps://github.com/bitcoin/bitcoin/pull/16624 - accidental break\r\nhttps://github.com/bitcoin/bitcoin/issues/18325 - bug report\r\nhttps://github.com/bitcoin/bitcoin/pull/18600 - potential fix",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/42",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/42",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/42/labels",
            "id": 4116761,
            "node_id": "MDk6TWlsZXN0b25lNDExNjc2MQ==",
            "number": 42,
            "state": "closed",
            "title": "0.20.0",
            "description": "",
            "creator": {
              "login": "MarcoFalke",
              "id": 6399679,
              "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/MarcoFalke",
              "html_url": "https://github.com/MarcoFalke",
              "followers_url": "https://api.github.com/users/MarcoFalke/followers",
              "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
              "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
              "repos_url": "https://api.github.com/users/MarcoFalke/repos",
              "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 91,
            "created_at": "2019-03-06T20:02:40Z",
            "updated_at": "2020-06-02T07:55:47Z",
            "closed_at": "2020-06-02T07:55:47Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18878",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18878",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18878.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18878.patch"
          },
          "closed_at": "2020-05-13T13:53:31Z",
          "created_at": "2020-05-05T03:20:48Z",
          "updated_at": "2022-02-15T11:03:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 405898189,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODk4MTg5",
      "url": null,
      "actor": null,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for your patience ariard! I like the direction you're taking this code even though it's lot of work to think through and even though it runs against my bias for smaller more incremental changes.\r\n\r\nAs of e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6, this PR seems to be doing a few different things:\r\n\r\n1. Sending notifications for wallet transactions removed from the mempool due to conflicts with a new block. These were previously sent before #16624 but accidentally broken.\r\n2. Sending notifications for wallet transactions removed from the mempool due to conflicts with new mempool transactions. These weren't sent before but were considered in #9371.\r\n3. Marking wallet transactions removed from the mempool due to conflicts with a new block as conflicted, without recording the conflicting block hash. These transactions were not previously marked conflicted even before 16624, only [marked as unconfirmed](https://github.com/bitcoin/bitcoin/blob/5667b0d758f119dadc5b41e0bf24e45da1132e54/src/wallet/wallet.cpp#L1419-L1420).\r\n4. Adding a new \"conflicted\" field in `WalletTxToJSON`.\r\n\r\nChanges (1) and (2) above both seem great and I think it'd be great to have them implemented in this PR without complications of (3) and (4). Or alternately (3) and (4) could be pursued here in this PR and (1) and (2) could be done separately. I wrote some new tests in #18878 that add previously missing test coverage for wallet conflict notifications so (1) and (2) can be implemented without needing (3) and (4) for test coverage.\r\n\r\nMy main concern about (3) is backwards compatibility with previous releases, and potential bugs in current wallet code that can't handle the conflicted with 0-blockhash state. I am not very concerned about (4), but I think it adds complications without being directly related to the other changes here. I am a little concerned though that the new \"conflicted\" field in (4) might be misinterpreted externally to be a reliable indicator of whether a wallet transaction is conflicted instead of just a heuristic",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#pullrequestreview-405898189",
      "submitted_at": "2020-05-05T15:31:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-11T23:14:58Z",
      "updated_at": "2020-05-11T23:14:58Z",
      "source": {
        "issue": {
          "id": 521121143,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzM5NTYzNjgy",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17443",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17443/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17443/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17443/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/17443",
          "number": 17443,
          "state": "closed",
          "state_reason": null,
          "title": "Drop checkFinalTx and use Median Time Past to check finality of wallet transactions",
          "body": "Replace `Chain::checkFinalTx` by `CheckFinalWalletTx` by caching best block median time past which is following BIP113 rule than time-locked transactions have nLockTime set to less than the median time of the previous block they're contained in.\r\n\r\nFix misuage of CheckFinalTx, which was called with default flags\r\nargument by implementation of Chain::checkFinal, triggering\r\nfinality evaluation based on GetAdjustedTime instead of consensus\r\nand standard rules of BIP 113.\r\n\r\nI think it should have been set at same time than d1c3762, to align wallet checks on the mempool ones.",
          "user": {
            "login": "ariard",
            "id": 23310655,
            "node_id": "MDQ6VXNlcjIzMzEwNjU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ariard",
            "html_url": "https://github.com/ariard",
            "followers_url": "https://api.github.com/users/ariard/followers",
            "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
            "organizations_url": "https://api.github.com/users/ariard/orgs",
            "repos_url": "https://api.github.com/users/ariard/repos",
            "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ariard/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17443",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/17443",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/17443.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/17443.patch"
          },
          "closed_at": "2022-03-21T13:22:33Z",
          "created_at": "2019-11-11T18:37:52Z",
          "updated_at": "2023-04-03T14:41:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 3329959835,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzMjk5NTk4MzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3329959835",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f963a680515eda66429b3d1537a7baf281ab9283",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/f963a680515eda66429b3d1537a7baf281ab9283",
      "created_at": "2020-05-13T01:41:46Z"
    },
    {
      "event": "referenced",
      "id": 3332187944,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzMzIxODc5NDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3332187944",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "99c03728c07ce8d51b971ae7a508d428b4c24ea4",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/99c03728c07ce8d51b971ae7a508d428b4c24ea4",
      "created_at": "2020-05-13T13:53:20Z"
    },
    {
      "event": "commented",
      "id": 628029131,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyODAyOTEzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628029131",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-13T14:31:22Z",
      "updated_at": "2020-05-13T14:31:22Z",
      "author_association": "MEMBER",
      "body": "Needs rebase due to conflict with #18878",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-628029131",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "commented",
      "id": 628196235,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyODE5NjIzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628196235",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-13T19:23:45Z",
      "updated_at": "2020-05-13T19:23:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Needs rebase due to conflict with #18878\r\n\r\nChanges should be minor. Should just need to update lines like [`expect_wallet_notify([bump2])`](https://github.com/bitcoin/bitcoin/blob/51825aea7fa068877ea77e3121def58005df3510/test/functional/feature_notifications.py#L141) to `expect_wallet_notify([bump2, tx2])` for new transaction notifications",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-628196235",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "referenced",
      "id": 3334483172,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzMzQ0ODMxNzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3334483172",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a84dd1fa2e7b60ff6d4d362c3c455602558084ea",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/a84dd1fa2e7b60ff6d4d362c3c455602558084ea",
      "created_at": "2020-05-14T01:27:55Z"
    },
    {
      "event": "referenced",
      "id": 3334770841,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzMzQ3NzA4NDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3334770841",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9c193e4d0aed3cbcdf9169390410e597132c1372",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/9c193e4d0aed3cbcdf9169390410e597132c1372",
      "created_at": "2020-05-14T04:13:30Z"
    },
    {
      "event": "labeled",
      "id": 3336890139,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMzY4OTAxMzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3336890139",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-14T14:28:56Z",
      "label": {
        "name": "Waiting for author",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 3336894480,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMzY4OTQ0ODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3336894480",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-14T14:29:51Z",
      "label": {
        "name": "Needs backport (0.20)",
        "color": "ff8200"
      }
    },
    {
      "event": "referenced",
      "id": 3338865157,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzMzg4NjUxNTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3338865157",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ed0afe8c1ff37926cc5bdcb0e8e4983e194e6d61",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/ed0afe8c1ff37926cc5bdcb0e8e4983e194e6d61",
      "created_at": "2020-05-15T00:11:49Z"
    },
    {
      "event": "demilestoned",
      "id": 3340621881,
      "node_id": "MDE3OkRlbWlsZXN0b25lZEV2ZW50MzM0MDYyMTg4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3340621881",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-15T12:03:49Z",
      "milestone": {
        "title": "0.20.0"
      }
    },
    {
      "event": "milestoned",
      "id": 3340621883,
      "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDMzNDA2MjE4ODM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3340621883",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-15T12:03:49Z",
      "milestone": {
        "title": "0.20.1"
      }
    },
    {
      "event": "commented",
      "id": 629196900,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyOTE5NjkwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629196900",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-15T12:04:14Z",
      "updated_at": "2020-05-15T12:04:14Z",
      "author_association": "MEMBER",
      "body": "Moved milestone as per https://github.com/bitcoin/bitcoin/issues/18325#issuecomment-629196468",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-629196900",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "referenced",
      "id": 3340970532,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzNDA5NzA1MzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3340970532",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "261ccf730c6bb84b5b16f665c4debca5b345feb1",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/261ccf730c6bb84b5b16f665c4debca5b345feb1",
      "created_at": "2020-05-15T13:40:09Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-15T13:41:43Z",
      "updated_at": "2020-05-15T13:41:43Z",
      "source": {
        "issue": {
          "id": 618976662,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDE4NjAwMTk3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18982",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18982/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18982/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18982/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18982",
          "number": 18982,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Minimal fix to restore conflicted transaction notifications",
          "body": "This fix is a based on the fix by Antoine Riard (ariard) in https://github.com/bitcoin/bitcoin/pull/18600.\r\n\r\nUnlike that PR, which implements some new behavior, this just restores previous wallet notification and status behavior for transactions removed from the mempool because they conflict with transactions in a block. The behavior was accidentally changed in two `CWallet::BlockConnected` updates: a31be09bfd77eed497a8e251d31358e16e2f2eb1 and 7e89994133725125dddbfa8d45484e3b9ed51c6e from https://github.com/bitcoin/bitcoin/pull/16624, causing issue https://github.com/bitcoin/bitcoin/issues/18325.\r\n\r\nThe change here could be improved and replaced with a more comprehensive cleanup, so it includes a detailed comment explaining future considerations.\r\n\r\nFixes #18325\r\n\r\nCo-authored-by: Antoine Riard (ariard)",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18982",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18982",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18982.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18982.patch"
          },
          "closed_at": "2020-06-02T22:13:14Z",
          "created_at": "2020-05-15T13:41:43Z",
          "updated_at": "2022-08-18T18:19:42Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 3341072943,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzNDEwNzI5NDM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3341072943",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "58ec22284e8ca60e9bd65927c283834a01a18d6b",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/58ec22284e8ca60e9bd65927c283834a01a18d6b",
      "created_at": "2020-05-15T14:05:45Z"
    },
    {
      "event": "referenced",
      "id": 3341094559,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzNDEwOTQ1NTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3341094559",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "90118ec54f6921ed102ef45bb4f4d3a0ac8782b8",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/90118ec54f6921ed102ef45bb4f4d3a0ac8782b8",
      "created_at": "2020-05-15T14:11:10Z"
    },
    {
      "event": "commented",
      "id": 631279640,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMTI3OTY0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631279640",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-20T07:04:37Z",
      "updated_at": "2020-05-20T07:04:37Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky Finally getting back to this, \r\n\r\nAs of e9ffced, I think I removed 2) after this discussion https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408516146.\r\n\r\nWith regards to (4) it's a direct dependency on (3), and used only to signal a 0-blockhash conflict to user. So dropping (3) would also drop (4). \r\n\r\nLooking on #18982 ",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-631279640",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "mentioned",
      "id": 3355003472,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzM1NTAwMzQ3Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3355003472",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-20T07:04:37Z"
    },
    {
      "event": "subscribed",
      "id": 3355003489,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzNTUwMDM0ODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3355003489",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-20T07:04:37Z"
    },
    {
      "event": "commented",
      "id": 631786344,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMTc4NjM0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631786344",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-20T23:14:51Z",
      "updated_at": "2020-05-20T23:14:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "re: ariard https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-631279640\r\nre: ryanofsky https://github.com/bitcoin/bitcoin/pull/18600#pullrequestreview-405898189\r\n\r\n> As of [e9ffced](https://github.com/bitcoin/bitcoin/commit/e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6), I think I removed 2) after this discussion [#18600 (comment)](https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408516146).\r\n\r\nYes, good point. I didn't really internalize the changed definition of the conflicted bool (one reason I prefer the enum to the bool!) and I missed this.\r\n\r\nI actually think it'd be good to bring back behavior (2). We already have an [existing test for this case](https://github.com/bitcoin/bitcoin/blob/3eda7ea9ba724bfa53ad6f4f63af85fccb46da00/test/functional/feature_notifications.py#L104-L111) and I think after #18982 it should be safe and very easy to do as a followup.\r\n\r\nI also like your idea in https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-617487831 of passing down the block hash/height so it is safe to mark transactions that conflict with a specific block as conflicted instead of unconfirmed.\r\n\r\nI think changes (3) and (4) are good too, my concerns there were just about compatibility and bugs.\r\n\r\n> Looking on #18982\r\n\r\nThanks for reviewing that! I starting implementing your suggestions there.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-631786344",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "referenced",
      "id": 3360352493,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzNjAzNTI0OTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3360352493",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8242b093d3db52b7e443d650bafd307a03527639",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/8242b093d3db52b7e443d650bafd307a03527639",
      "created_at": "2020-05-21T11:43:46Z"
    },
    {
      "event": "commented",
      "id": 632794516,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjc5NDUxNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632794516",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-22T16:43:50Z",
      "updated_at": "2020-05-22T16:49:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I actually think it'd be good to bring back behavior (2). We already have an [existing test for this case](https://github.com/bitcoin/bitcoin/blob/3eda7ea9ba724bfa53ad6f4f63af85fccb46da00/test/functional/feature_notifications.py#L104-L111) and I think after #18982 it should be safe and very easy to do as a followup.\r\n> \r\n> I also like your idea in [#18600 (comment)](https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-617487831) of passing down the block hash/height so it is safe to mark transactions that conflict with a specific block as conflicted instead of unconfirmed.\r\n> \r\n> I think changes (3) and (4) are good too, my concerns there were just about compatibility and bugs.\r\n\r\nConcept ACK. I'll try to review this when it's updated. Edit: I second the preference for an enum over a bool in many cases; it's often clearer and generally more extensible for handling state.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-632794516",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "referenced",
      "id": 3366129484,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzNjYxMjk0ODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3366129484",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b604c5c8b5892842f13dee89ae31812a28ab25d1",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/b604c5c8b5892842f13dee89ae31812a28ab25d1",
      "created_at": "2020-05-22T20:40:34Z"
    },
    {
      "event": "referenced",
      "id": 3399673389,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMzOTk2NzMzODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3399673389",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3657aee2d25ce1ffefc6817af3eead7120b1d755",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3657aee2d25ce1ffefc6817af3eead7120b1d755",
      "created_at": "2020-06-02T22:12:52Z"
    },
    {
      "event": "labeled",
      "id": 3399715377,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzOTk3MTUzNzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3399715377",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-02T22:30:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 637842067,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzg0MjA2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637842067",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-02T22:30:42Z",
      "updated_at": "2020-06-02T22:30:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-637842067",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "unlabeled",
      "id": 3399726047,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MzM5OTcyNjA0Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3399726047",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-02T22:35:35Z",
      "label": {
        "name": "Needs backport (0.20)",
        "color": "ff8200"
      }
    },
    {
      "event": "unlabeled",
      "id": 3399726049,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MzM5OTcyNjA0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3399726049",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-02T22:35:35Z",
      "label": {
        "name": "Waiting for author",
        "color": "cccccc"
      }
    },
    {
      "event": "demilestoned",
      "id": 3399726449,
      "node_id": "MDE3OkRlbWlsZXN0b25lZEV2ZW50MzM5OTcyNjQ0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3399726449",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-02T22:35:47Z",
      "milestone": {
        "title": "0.20.1"
      }
    },
    {
      "event": "referenced",
      "id": 3400250397,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MDAyNTAzOTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3400250397",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6007f5d86523bf4c4ba424e2b4882efd9e08482e",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/6007f5d86523bf4c4ba424e2b4882efd9e08482e",
      "created_at": "2020-06-03T03:24:05Z"
    },
    {
      "event": "referenced",
      "id": 3409810757,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MDk4MTA3NTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3409810757",
      "actor": {
        "login": "ComputerCraftr",
        "id": 27882076,
        "node_id": "MDQ6VXNlcjI3ODgyMDc2",
        "avatar_url": "https://avatars.githubusercontent.com/u/27882076?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ComputerCraftr",
        "html_url": "https://github.com/ComputerCraftr",
        "followers_url": "https://api.github.com/users/ComputerCraftr/followers",
        "following_url": "https://api.github.com/users/ComputerCraftr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ComputerCraftr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ComputerCraftr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ComputerCraftr/subscriptions",
        "organizations_url": "https://api.github.com/users/ComputerCraftr/orgs",
        "repos_url": "https://api.github.com/users/ComputerCraftr/repos",
        "events_url": "https://api.github.com/users/ComputerCraftr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ComputerCraftr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6178216494f8d4de7f000b34f2863e30f6485491",
      "commit_url": "https://api.github.com/repos/ComputerCraftr/bitcoin/commits/6178216494f8d4de7f000b34f2863e30f6485491",
      "created_at": "2020-06-05T06:04:15Z"
    },
    {
      "event": "referenced",
      "id": 3425164093,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MjUxNjQwOTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3425164093",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "654420d6dfb455ca4030055881db4e3aa9ec6e8b",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/654420d6dfb455ca4030055881db4e3aa9ec6e8b",
      "created_at": "2020-06-09T14:22:27Z"
    },
    {
      "event": "referenced",
      "id": 3426654604,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MjY2NTQ2MDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3426654604",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "32d773bfc15243b9055144fd87203562ff178e45",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/32d773bfc15243b9055144fd87203562ff178e45",
      "created_at": "2020-06-09T20:13:01Z"
    },
    {
      "event": "referenced",
      "id": 3428717524,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0Mjg3MTc1MjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3428717524",
      "actor": {
        "login": "ComputerCraftr",
        "id": 27882076,
        "node_id": "MDQ6VXNlcjI3ODgyMDc2",
        "avatar_url": "https://avatars.githubusercontent.com/u/27882076?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ComputerCraftr",
        "html_url": "https://github.com/ComputerCraftr",
        "followers_url": "https://api.github.com/users/ComputerCraftr/followers",
        "following_url": "https://api.github.com/users/ComputerCraftr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ComputerCraftr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ComputerCraftr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ComputerCraftr/subscriptions",
        "organizations_url": "https://api.github.com/users/ComputerCraftr/orgs",
        "repos_url": "https://api.github.com/users/ComputerCraftr/repos",
        "events_url": "https://api.github.com/users/ComputerCraftr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ComputerCraftr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "48245eb56642b9b342dd08ec38457881c7320b80",
      "commit_url": "https://api.github.com/repos/ComputerCraftr/bitcoin/commits/48245eb56642b9b342dd08ec38457881c7320b80",
      "created_at": "2020-06-10T09:23:40Z"
    },
    {
      "event": "referenced",
      "id": 3428984528,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0Mjg5ODQ1Mjg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3428984528",
      "actor": {
        "login": "ComputerCraftr",
        "id": 27882076,
        "node_id": "MDQ6VXNlcjI3ODgyMDc2",
        "avatar_url": "https://avatars.githubusercontent.com/u/27882076?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ComputerCraftr",
        "html_url": "https://github.com/ComputerCraftr",
        "followers_url": "https://api.github.com/users/ComputerCraftr/followers",
        "following_url": "https://api.github.com/users/ComputerCraftr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ComputerCraftr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ComputerCraftr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ComputerCraftr/subscriptions",
        "organizations_url": "https://api.github.com/users/ComputerCraftr/orgs",
        "repos_url": "https://api.github.com/users/ComputerCraftr/repos",
        "events_url": "https://api.github.com/users/ComputerCraftr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ComputerCraftr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "077eb62f7fe7c4e6522e76c3db0a123e6b757bff",
      "commit_url": "https://api.github.com/repos/ComputerCraftr/bitcoin/commits/077eb62f7fe7c4e6522e76c3db0a123e6b757bff",
      "created_at": "2020-06-10T10:31:16Z"
    },
    {
      "event": "referenced",
      "id": 3488265765,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0ODgyNjU3NjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3488265765",
      "actor": {
        "login": "stackman27",
        "id": 26356227,
        "node_id": "MDQ6VXNlcjI2MzU2MjI3",
        "avatar_url": "https://avatars.githubusercontent.com/u/26356227?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stackman27",
        "html_url": "https://github.com/stackman27",
        "followers_url": "https://api.github.com/users/stackman27/followers",
        "following_url": "https://api.github.com/users/stackman27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stackman27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stackman27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stackman27/subscriptions",
        "organizations_url": "https://api.github.com/users/stackman27/orgs",
        "repos_url": "https://api.github.com/users/stackman27/repos",
        "events_url": "https://api.github.com/users/stackman27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stackman27/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "447f03616143c9ef8d385a31d2d37ba2101c5663",
      "commit_url": "https://api.github.com/repos/stackman27/bitcoin/commits/447f03616143c9ef8d385a31d2d37ba2101c5663",
      "created_at": "2020-06-26T22:00:17Z"
    },
    {
      "event": "referenced",
      "id": 3623108963,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM2MjMxMDg5NjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3623108963",
      "actor": {
        "login": "metalicjames",
        "id": 4153717,
        "node_id": "MDQ6VXNlcjQxNTM3MTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4153717?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/metalicjames",
        "html_url": "https://github.com/metalicjames",
        "followers_url": "https://api.github.com/users/metalicjames/followers",
        "following_url": "https://api.github.com/users/metalicjames/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/metalicjames/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/metalicjames/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/metalicjames/subscriptions",
        "organizations_url": "https://api.github.com/users/metalicjames/orgs",
        "repos_url": "https://api.github.com/users/metalicjames/repos",
        "events_url": "https://api.github.com/users/metalicjames/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/metalicjames/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "09af10dec524a32cb8da9314fba9fce8376a0436",
      "commit_url": "https://api.github.com/repos/vertcoin-project/vertcoin-core/commits/09af10dec524a32cb8da9314fba9fce8376a0436",
      "created_at": "2020-08-05T05:51:47Z"
    },
    {
      "event": "referenced",
      "id": 3742488962,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM3NDI0ODg5NjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3742488962",
      "actor": {
        "login": "backpacker69",
        "id": 19201340,
        "node_id": "MDQ6VXNlcjE5MjAxMzQw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19201340?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/backpacker69",
        "html_url": "https://github.com/backpacker69",
        "followers_url": "https://api.github.com/users/backpacker69/followers",
        "following_url": "https://api.github.com/users/backpacker69/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/backpacker69/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/backpacker69/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/backpacker69/subscriptions",
        "organizations_url": "https://api.github.com/users/backpacker69/orgs",
        "repos_url": "https://api.github.com/users/backpacker69/repos",
        "events_url": "https://api.github.com/users/backpacker69/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/backpacker69/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2463b02ccf55ab902c5da2908abd4c5427130f22",
      "commit_url": "https://api.github.com/repos/peercoin/peercoin/commits/2463b02ccf55ab902c5da2908abd4c5427130f22",
      "created_at": "2020-09-08T19:28:37Z"
    },
    {
      "event": "referenced",
      "id": 3903353723,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM5MDMzNTM3MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3903353723",
      "actor": {
        "login": "Bushstar",
        "id": 5293433,
        "node_id": "MDQ6VXNlcjUyOTM0MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Bushstar",
        "html_url": "https://github.com/Bushstar",
        "followers_url": "https://api.github.com/users/Bushstar/followers",
        "following_url": "https://api.github.com/users/Bushstar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Bushstar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Bushstar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
        "organizations_url": "https://api.github.com/users/Bushstar/orgs",
        "repos_url": "https://api.github.com/users/Bushstar/repos",
        "events_url": "https://api.github.com/users/Bushstar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Bushstar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4770dc9d56eb1d502d83da69318ef29420ba7c71",
      "commit_url": "https://api.github.com/repos/Bushstar/omnicore/commits/4770dc9d56eb1d502d83da69318ef29420ba7c71",
      "created_at": "2020-10-21T11:31:41Z"
    },
    {
      "event": "referenced",
      "id": 3997946879,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM5OTc5NDY4Nzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3997946879",
      "actor": {
        "login": "janus",
        "id": 6726,
        "node_id": "MDQ6VXNlcjY3MjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6726?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/janus",
        "html_url": "https://github.com/janus",
        "followers_url": "https://api.github.com/users/janus/followers",
        "following_url": "https://api.github.com/users/janus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/janus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/janus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/janus/subscriptions",
        "organizations_url": "https://api.github.com/users/janus/orgs",
        "repos_url": "https://api.github.com/users/janus/repos",
        "events_url": "https://api.github.com/users/janus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/janus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f690d20f655b4685759ef7dd37e8f72791b608e8",
      "commit_url": "https://api.github.com/repos/janus/bitgesell/commits/f690d20f655b4685759ef7dd37e8f72791b608e8",
      "created_at": "2020-11-15T23:45:09Z"
    },
    {
      "event": "referenced",
      "id": 3997946887,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM5OTc5NDY4ODc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3997946887",
      "actor": {
        "login": "janus",
        "id": 6726,
        "node_id": "MDQ6VXNlcjY3MjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6726?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/janus",
        "html_url": "https://github.com/janus",
        "followers_url": "https://api.github.com/users/janus/followers",
        "following_url": "https://api.github.com/users/janus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/janus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/janus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/janus/subscriptions",
        "organizations_url": "https://api.github.com/users/janus/orgs",
        "repos_url": "https://api.github.com/users/janus/repos",
        "events_url": "https://api.github.com/users/janus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/janus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6fc95ef8920087c97b523d41c22ffbec4afb4b05",
      "commit_url": "https://api.github.com/repos/janus/bitgesell/commits/6fc95ef8920087c97b523d41c22ffbec4afb4b05",
      "created_at": "2020-11-15T23:45:09Z"
    },
    {
      "event": "labeled",
      "id": 4191033565,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQxOTEwMzM1NjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4191033565",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-11T14:23:34Z",
      "label": {
        "name": "Up for grabs",
        "color": "99a810"
      }
    },
    {
      "event": "commented",
      "id": 757985581,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc1Nzk4NTU4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757985581",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-11T14:27:24Z",
      "updated_at": "2021-01-11T14:28:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "Since this PR has merge conflicts and the underlying code has changed a lot, I'm marking it closed and up for grabs. This way if it's updated it can be a new PR with less comment history, and the comments in this PR can stay in line with diffs.\r\n\r\nThe main change implemented by this PR is treating wallet transactions that conflict with newly connected blocks as conflicted. There is more information about this idea in [*idea-more-conflicts*](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Transaction-Conflict-Tracking#idea-more-conflicts), and it requires some more work to implement correctly. To avoid the state representation problems described https://github.com/bitcoin/bitcoin/pull/18600#discussion_r420195993, it needs some updates to node code to pass along the conflicting block hash with conflicted removal notifications. It also needs extra wallet code to undo conflicts during reorgs.\r\n\r\nA related idea [*idea-mempool-conflicted*](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Transaction-Conflict-Tracking#idea-mempool-conflicted) could be a way of treating conflicts similarly but requiring fewer changes. The PR's current approach of pretending block-connected conflicts are mempool conflicts instead of block conflicts could be kept, with serialization tweaks to just treat the mempool-conflicted state as temporary and not write it to the database.\r\n\r\nThe other changes in this PR like adding a \"conflicted\" RPC field and new test coverage (see https://github.com/bitcoin/bitcoin/pull/18600#pullrequestreview-405898189) could probably also be made into standalone PRs that could be merged pretty quickly.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-757985581",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    },
    {
      "event": "closed",
      "id": 4191053591,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDE5MTA1MzU5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4191053591",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-11T14:27:25Z"
    },
    {
      "event": "referenced",
      "id": 4518457045,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTg0NTcwNDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518457045",
      "actor": {
        "login": "backpacker69",
        "id": 19201340,
        "node_id": "MDQ6VXNlcjE5MjAxMzQw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19201340?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/backpacker69",
        "html_url": "https://github.com/backpacker69",
        "followers_url": "https://api.github.com/users/backpacker69/followers",
        "following_url": "https://api.github.com/users/backpacker69/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/backpacker69/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/backpacker69/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/backpacker69/subscriptions",
        "organizations_url": "https://api.github.com/users/backpacker69/orgs",
        "repos_url": "https://api.github.com/users/backpacker69/repos",
        "events_url": "https://api.github.com/users/backpacker69/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/backpacker69/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "364a2d33ddeaf806e397def92f38c6879598f0aa",
      "commit_url": "https://api.github.com/repos/peercoin/peercoin/commits/364a2d33ddeaf806e397def92f38c6879598f0aa",
      "created_at": "2021-03-28T19:23:29Z"
    },
    {
      "event": "referenced",
      "id": 5227397562,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUyMjczOTc1NjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5227397562",
      "actor": {
        "login": "deadalnix",
        "id": 854121,
        "node_id": "MDQ6VXNlcjg1NDEyMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/854121?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/deadalnix",
        "html_url": "https://github.com/deadalnix",
        "followers_url": "https://api.github.com/users/deadalnix/followers",
        "following_url": "https://api.github.com/users/deadalnix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/deadalnix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/deadalnix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/deadalnix/subscriptions",
        "organizations_url": "https://api.github.com/users/deadalnix/orgs",
        "repos_url": "https://api.github.com/users/deadalnix/repos",
        "events_url": "https://api.github.com/users/deadalnix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/deadalnix/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "250a0d5b25690aebc2303fce73e50181668e3f09",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/250a0d5b25690aebc2303fce73e50181668e3f09",
      "created_at": "2021-08-30T16:35:05Z"
    },
    {
      "event": "referenced",
      "id": 6189769196,
      "node_id": "REFE_lADOABII584jqndAzwAAAAFw8GHs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6189769196",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "83dd5bfee24a16cda22085a00f27732a447568bd",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/83dd5bfee24a16cda22085a00f27732a447568bd",
      "created_at": "2022-03-05T19:04:44Z"
    },
    {
      "event": "referenced",
      "id": 6189777025,
      "node_id": "REFE_lADOABII584jqndAzwAAAAFw8ICB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6189777025",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2c6e85966eb728b58c9ccfdc684b8a77192e8e30",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/2c6e85966eb728b58c9ccfdc684b8a77192e8e30",
      "created_at": "2022-03-05T19:13:47Z"
    },
    {
      "event": "locked",
      "id": 7199062888,
      "node_id": "LOE_lADOABII584jqndAzwAAAAGtGPto",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7199062888",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-16T17:11:29Z",
      "lock_reason": "resolved"
    },
    {
      "event": "unlabeled",
      "id": 8971621226,
      "node_id": "UNLE_lADOABII584jqndAzwAAAAIWwBNq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971621226",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:55:28Z",
      "label": {
        "name": "Up for grabs",
        "color": "99a810"
      }
    },
    {
      "event": "unlabeled",
      "id": 8971621236,
      "node_id": "UNLE_lADOABII584jqndAzwAAAAIWwBN0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971621236",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:55:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1503022715,
      "node_id": "IC_kwDOABII585Zlk57",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1503022715",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:55:42Z",
      "updated_at": "2023-04-11T09:55:42Z",
      "author_association": "MEMBER",
      "body": "Dropped up for grabs here, see #27307.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#issuecomment-1503022715",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18600"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407511482",
      "pull_request_review_id": 392185125,
      "id": 407511482,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzUxMTQ4Mg==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[validationinterface] Extend TransactionRemovedFromMempool with fIsConflicted\" (9eb9af6c56f52628cca4cc5241c0f88adb9f689d)\r\n\r\nShould just call this argument `conflicted` or `is_conflicted`",
      "created_at": "2020-04-13T14:37:42Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407511482",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407511482"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407516183",
      "pull_request_review_id": 392185125,
      "id": 407516183,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzUxNjE4Mw==",
      "diff_hunk": "@@ -410,7 +410,8 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n         // for any reason except being included in a block. Clients interested\n         // in transactions included in blocks can subscribe to the BlockConnected\n         // notification.\n-        GetMainSignals().TransactionRemovedFromMempool(it->GetSharedTx());\n+        GetMainSignals().TransactionRemovedFromMempool(it->GetSharedTx(), reason == MemPoolRemovalReason::CONFLICT",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[validationinterface] Extend TransactionRemovedFromMempool with fIsConflicted\" (9eb9af6c56f52628cca4cc5241c0f88adb9f689d)\r\n\r\nI'd think it'd be more straightforward to just pass along the reason instead of having the mempool interpret it on behalf of the wallet. But this is just a guess, and I think since @jnewbery proposed this, you both probably know the tradeoffs between `bool conflicted` and `MemPoolRemovalReason reason` better than me and this is probably fine",
      "created_at": "2020-04-13T14:46:53Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407516183",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407516183"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 413,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407544261",
      "pull_request_review_id": 392185125,
      "id": 407544261,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzU0NDI2MQ==",
      "diff_hunk": "@@ -1105,12 +1105,16 @@ void CWallet::transactionAddedToMempool(const CTransactionRef& ptx) {\n     }\n }\n \n-void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx) {\n+void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx, bool fIsConflicted) {\n     LOCK(cs_wallet);\n     auto it = mapWallet.find(ptx->GetHash());\n     if (it != mapWallet.end()) {\n         it->second.fInMempool = false;\n     }\n+    if (fIsConflicted) {\n+        CWalletTx::Confirmation confirm(CWalletTx::Status::CONFLICTED, /* block_height */ 0, /* block_hash */ {}, /* nIndex */ 0);",
      "path": "src/wallet/wallet.cpp",
      "position": 21,
      "original_position": 12,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "497c50205534aa32931a048d02a3a2004460fe64",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[rpcwallet] Add `conflicted` as transaction description field\" (1af561a8f2bc93ac029b7304fb6da12e6094b860)\r\n\r\nI think this should probably be Status::UNCONFIRMED rather than Status::CONFLICTED. That should restore the original behavior before #16624 (a31be09bfd77eed497a8e251d31358e16e2f2eb1 +   7e89994133725125dddbfa8d45484e3b9ed51c6e) and avoid introducing an entirely new transaction state that wallet code has never had to deal with, where a transaction is conflicting with something not in a specific block. This should also allow reverting `GetDepthInMainChain` below and leaving it unchanged.\r\n\r\nAt a high level I think it makes sense to mark these transactions unconfirmed instead of conflicted because we know there are cases the wallet can't detect unconfirmed transactions becoming conflicted, and cases where it can't detect a conflicting transactions becoming unconfirmed, and unconfirmed is the more conservative choice than conflicted for balances, etc\r\n\r\nI haven't looked at your `wallet_txn_doublespend.py` test yet, so I'm not sure how changing this would interact that. Another way of testing this code which might be better from the point of view of #18600 is to add a regression test to `feature_notifications.py` to ensure that this commit restores the `-walletnotify` notifications that were lost in #16624",
      "created_at": "2020-04-13T15:39:10Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407544261",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407544261"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1118,
      "original_line": 1118,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407550301",
      "pull_request_review_id": 392232926,
      "id": 407550301,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzU1MDMwMQ==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe even just pass the original removal reason to the sink? Compressing `REPLACED` into a boolean called `conflicted` is not wrong, but maybe not the most straightforward either.",
      "created_at": "2020-04-13T15:50:34Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407550301",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407550301"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407555257",
      "pull_request_review_id": 392239037,
      "id": 407555257,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzU1NTI1Nw==",
      "diff_hunk": "@@ -139,5 +140,99 @@ def run_test(self):\n         # Node1's balance should be its initial balance (1250 for 25 block rewards) plus the doublespend:\n         assert_equal(self.nodes[1].getbalance(), 1250 + 1240)\n \n+        # Following test limb check that if a transaction of concern conflicted due to its parent\n+        # or anterior transaction being conflicted, wallet is able to detect it, independently of\n+        # reason (either block or mempool)\n+\n+        # Get a \"blind\" address from node0\n+        connect_nodes(self.nodes[0], 1)\n+        node0_address_blind = self.nodes[0].getnewaddress()\n+        txid_origin = self.nodes[1].sendtoaddress(self.nodes[1].getnewaddress(), Decimal(\"10\"))\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Build parent conflicted tx from node1 to node1\n+        nA = next(tx_out[\"vout\"] for tx_out in self.nodes[1].gettransaction(txid_origin)[\"details\"] if tx_out[\"amount\"] == Decimal(\"10\"))\n+        inputs_parent_conflicted_tx = []\n+        inputs_parent_conflicted_tx.append({\"txid\": txid_origin, \"vout\": nA, \"sequence\": BIP125_SEQUENCE_NUMBER})\n+        outputs_parent_conflicted_tx = {}\n+        outputs_parent_conflicted_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99998\")\n+\n+        # Broadcast parent conflicted tx\n+        parent_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_parent_conflicted_tx, outputs_parent_conflicted_tx))\n+        parent_conflicted_txid = self.nodes[1].sendrawtransaction(parent_conflicted_tx[\"hex\"])\n+\n+        # Build children conflicted tx\n+        inputs_children_conflicted_tx = []\n+        inputs_children_conflicted_tx.append({\"txid\": parent_conflicted_txid, \"vout\": 0})\n+        outputs_children_conflicted_tx = {}\n+        outputs_children_conflicted_tx[node0_address_blind] = Decimal(\"9.99996\")\n+\n+        #Broadcast children conflicted tx\n+        node1s_children_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_children_conflicted_tx, outputs_children_conflicted_tx))\n+        children_conflicted_txid = self.nodes[1].sendrawtransaction(node1s_children_conflicted_tx[\"hex\"])\n+        self.sync_mempools([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees conflicted paying back\n+        node0s_children_conflicted_tx = self.nodes[0].gettransaction(children_conflicted_txid)\n+\n+        assert_equal(node0s_children_conflicted_tx[\"confirmations\"], 0)\n+        assert_equal(node0s_children_conflicted_tx[\"details\"][0][\"category\"], \"receive\")\n+\n+        # Build conflicting tx, double-spending parent conflicted\n+        inputs_conflicting_tx = []\n+        inputs_conflicting_tx.append({\"txid\": txid_origin, \"vout\": nA})\n+        outputs_conflicting_tx = {}\n+        outputs_conflicting_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99980\")\n+\n+        # Broadcast conflicting tx to node1 mempool and generate a block\n+        conflicting_tx= self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_conflicting_tx, outputs_conflicting_tx))\n+        conflicting_txid = self.nodes[1].sendrawtransaction(conflicting_tx[\"hex\"])\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees children as conflicted",
      "path": "test/functional/wallet_txn_doublespend.py",
      "position": 64,
      "original_position": 63,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "b34318d4cc27d61d2b9cc6a97c9584eb0dada6e4",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Some comments might be better as log statements, to aid debugability. See https://github.com/bitcoin/bitcoin/tree/master/test/functional#general-test-writing-advice\r\n```suggestion\r\n        self.log.info('Verify node0 sees children as conflicted')\r\n```",
      "created_at": "2020-04-13T15:59:29Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407555257",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407555257"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 195,
      "original_line": 195,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407937260",
      "pull_request_review_id": 392685713,
      "id": 407937260,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzkzNzI2MA==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes I hesitated at first to call it is_conflicted but it's still an implementation of a `CValidationInterface`  method so `fIsConflicted` is more reasonable so `is_ibd` should be `fInitialDownload` ?\r\n\r\n@MarcoFalke, you suggest doing the filtering in `NotificationsProxy` ? Shouldn't this be as lean as possible and just call notifications handler ? My motivation was avoiding linking mempool code in wallet but didn't think specifically about this point.",
      "created_at": "2020-04-14T07:55:20Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407937260",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407937260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407944782",
      "pull_request_review_id": 392694942,
      "id": 407944782,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk0NDc4Mg==",
      "diff_hunk": "@@ -410,7 +410,8 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n         // for any reason except being included in a block. Clients interested\n         // in transactions included in blocks can subscribe to the BlockConnected\n         // notification.\n-        GetMainSignals().TransactionRemovedFromMempool(it->GetSharedTx());\n+        GetMainSignals().TransactionRemovedFromMempool(it->GetSharedTx(), reason == MemPoolRemovalReason::CONFLICT",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407516183,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See above, on the practical-side I wanted to avoid linking mempool code in wallet. But we can overcome this, so real question, above fixing behavior, is if we pass `EXPIRY` or `SIZELIMIT` to the wallet, does it going to adapt its broadcast on this or take any other action ?\r\n\r\nRight now I think the wallet doesn't have any code to do this, so I think the discussion is worthwhile but beyond this PR ?\r\n\r\nActually, digging into this,  `MemPoolRemovalReason` purpose seems weak right now because we only use it in `removeUnchecked` to decide if we should trigger `TransactionsRemovedFromMempool` ?",
      "created_at": "2020-04-14T08:07:56Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407944782",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407944782"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 413,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407954092",
      "pull_request_review_id": 392706560,
      "id": 407954092,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk1NDA5Mg==",
      "diff_hunk": "@@ -1105,12 +1105,16 @@ void CWallet::transactionAddedToMempool(const CTransactionRef& ptx) {\n     }\n }\n \n-void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx) {\n+void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx, bool fIsConflicted) {\n     LOCK(cs_wallet);\n     auto it = mapWallet.find(ptx->GetHash());\n     if (it != mapWallet.end()) {\n         it->second.fInMempool = false;\n     }\n+    if (fIsConflicted) {\n+        CWalletTx::Confirmation confirm(CWalletTx::Status::CONFLICTED, /* block_height */ 0, /* block_hash */ {}, /* nIndex */ 0);",
      "path": "src/wallet/wallet.cpp",
      "position": 21,
      "original_position": 12,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "497c50205534aa32931a048d02a3a2004460fe64",
      "in_reply_to_id": 407544261,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks for your comment, I didn't reverse to the previous behavior starting from the user viewpoint. Unconfirmed funds allow you to spend from then or consider likely-yours as part of your balance, but here we know, as of mempool state, they are conflicted and likely-but-not-certain not going to confirm. We don't want the user to take decisions based on funds he has not. You can spend from unconfirmed, right ? \r\n\r\nKnowing there are cases the wallet can't detect unconfirmed transactions becoming conflicted doesn't mean that when we have the information available we shouldn't act on this.\r\n\r\nThanks for `feature_notifications.py`, we will modify to test notifications, didn't know its existence.",
      "created_at": "2020-04-14T08:23:21Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407954092",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407954092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1118,
      "original_line": 1118,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407959639",
      "pull_request_review_id": 392713214,
      "id": 407959639,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk1OTYzOQ==",
      "diff_hunk": "@@ -139,5 +140,99 @@ def run_test(self):\n         # Node1's balance should be its initial balance (1250 for 25 block rewards) plus the doublespend:\n         assert_equal(self.nodes[1].getbalance(), 1250 + 1240)\n \n+        # Following test limb check that if a transaction of concern conflicted due to its parent\n+        # or anterior transaction being conflicted, wallet is able to detect it, independently of\n+        # reason (either block or mempool)\n+\n+        # Get a \"blind\" address from node0\n+        connect_nodes(self.nodes[0], 1)\n+        node0_address_blind = self.nodes[0].getnewaddress()\n+        txid_origin = self.nodes[1].sendtoaddress(self.nodes[1].getnewaddress(), Decimal(\"10\"))\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Build parent conflicted tx from node1 to node1\n+        nA = next(tx_out[\"vout\"] for tx_out in self.nodes[1].gettransaction(txid_origin)[\"details\"] if tx_out[\"amount\"] == Decimal(\"10\"))\n+        inputs_parent_conflicted_tx = []\n+        inputs_parent_conflicted_tx.append({\"txid\": txid_origin, \"vout\": nA, \"sequence\": BIP125_SEQUENCE_NUMBER})\n+        outputs_parent_conflicted_tx = {}\n+        outputs_parent_conflicted_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99998\")\n+\n+        # Broadcast parent conflicted tx\n+        parent_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_parent_conflicted_tx, outputs_parent_conflicted_tx))\n+        parent_conflicted_txid = self.nodes[1].sendrawtransaction(parent_conflicted_tx[\"hex\"])\n+\n+        # Build children conflicted tx\n+        inputs_children_conflicted_tx = []\n+        inputs_children_conflicted_tx.append({\"txid\": parent_conflicted_txid, \"vout\": 0})\n+        outputs_children_conflicted_tx = {}\n+        outputs_children_conflicted_tx[node0_address_blind] = Decimal(\"9.99996\")\n+\n+        #Broadcast children conflicted tx\n+        node1s_children_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_children_conflicted_tx, outputs_children_conflicted_tx))\n+        children_conflicted_txid = self.nodes[1].sendrawtransaction(node1s_children_conflicted_tx[\"hex\"])\n+        self.sync_mempools([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees conflicted paying back\n+        node0s_children_conflicted_tx = self.nodes[0].gettransaction(children_conflicted_txid)\n+\n+        assert_equal(node0s_children_conflicted_tx[\"confirmations\"], 0)\n+        assert_equal(node0s_children_conflicted_tx[\"details\"][0][\"category\"], \"receive\")\n+\n+        # Build conflicting tx, double-spending parent conflicted\n+        inputs_conflicting_tx = []\n+        inputs_conflicting_tx.append({\"txid\": txid_origin, \"vout\": nA})\n+        outputs_conflicting_tx = {}\n+        outputs_conflicting_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99980\")\n+\n+        # Broadcast conflicting tx to node1 mempool and generate a block\n+        conflicting_tx= self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_conflicting_tx, outputs_conflicting_tx))\n+        conflicting_txid = self.nodes[1].sendrawtransaction(conflicting_tx[\"hex\"])\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees children as conflicted",
      "path": "test/functional/wallet_txn_doublespend.py",
      "position": 64,
      "original_position": 63,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "b34318d4cc27d61d2b9cc6a97c9584eb0dada6e4",
      "in_reply_to_id": 407555257,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can I turn every new comment as a log ? That would my personal flavor but that's hard to judge if it suits everyone. In practice, this advice maybe a bit loosely, I expect anyone to tweak tests as wish for debugging, that's easy and you may not want to observe same thing for everyone. ",
      "created_at": "2020-04-14T08:32:18Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407959639",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407959639"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 195,
      "original_line": 195,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408063282",
      "pull_request_review_id": 392836910,
      "id": 408063282,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA2MzI4Mg==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think you need to link any mempool code when you want access to the enum RemovalReason in the wallet.\r\n\r\nRight? cc @ryanofsky ",
      "created_at": "2020-04-14T11:27:06Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408063282",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408063282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408064561",
      "pull_request_review_id": 392838450,
      "id": 408064561,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA2NDU2MQ==",
      "diff_hunk": "@@ -139,5 +140,99 @@ def run_test(self):\n         # Node1's balance should be its initial balance (1250 for 25 block rewards) plus the doublespend:\n         assert_equal(self.nodes[1].getbalance(), 1250 + 1240)\n \n+        # Following test limb check that if a transaction of concern conflicted due to its parent\n+        # or anterior transaction being conflicted, wallet is able to detect it, independently of\n+        # reason (either block or mempool)\n+\n+        # Get a \"blind\" address from node0\n+        connect_nodes(self.nodes[0], 1)\n+        node0_address_blind = self.nodes[0].getnewaddress()\n+        txid_origin = self.nodes[1].sendtoaddress(self.nodes[1].getnewaddress(), Decimal(\"10\"))\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Build parent conflicted tx from node1 to node1\n+        nA = next(tx_out[\"vout\"] for tx_out in self.nodes[1].gettransaction(txid_origin)[\"details\"] if tx_out[\"amount\"] == Decimal(\"10\"))\n+        inputs_parent_conflicted_tx = []\n+        inputs_parent_conflicted_tx.append({\"txid\": txid_origin, \"vout\": nA, \"sequence\": BIP125_SEQUENCE_NUMBER})\n+        outputs_parent_conflicted_tx = {}\n+        outputs_parent_conflicted_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99998\")\n+\n+        # Broadcast parent conflicted tx\n+        parent_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_parent_conflicted_tx, outputs_parent_conflicted_tx))\n+        parent_conflicted_txid = self.nodes[1].sendrawtransaction(parent_conflicted_tx[\"hex\"])\n+\n+        # Build children conflicted tx\n+        inputs_children_conflicted_tx = []\n+        inputs_children_conflicted_tx.append({\"txid\": parent_conflicted_txid, \"vout\": 0})\n+        outputs_children_conflicted_tx = {}\n+        outputs_children_conflicted_tx[node0_address_blind] = Decimal(\"9.99996\")\n+\n+        #Broadcast children conflicted tx\n+        node1s_children_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_children_conflicted_tx, outputs_children_conflicted_tx))\n+        children_conflicted_txid = self.nodes[1].sendrawtransaction(node1s_children_conflicted_tx[\"hex\"])\n+        self.sync_mempools([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees conflicted paying back\n+        node0s_children_conflicted_tx = self.nodes[0].gettransaction(children_conflicted_txid)\n+\n+        assert_equal(node0s_children_conflicted_tx[\"confirmations\"], 0)\n+        assert_equal(node0s_children_conflicted_tx[\"details\"][0][\"category\"], \"receive\")\n+\n+        # Build conflicting tx, double-spending parent conflicted\n+        inputs_conflicting_tx = []\n+        inputs_conflicting_tx.append({\"txid\": txid_origin, \"vout\": nA})\n+        outputs_conflicting_tx = {}\n+        outputs_conflicting_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99980\")\n+\n+        # Broadcast conflicting tx to node1 mempool and generate a block\n+        conflicting_tx= self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_conflicting_tx, outputs_conflicting_tx))\n+        conflicting_txid = self.nodes[1].sendrawtransaction(conflicting_tx[\"hex\"])\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees children as conflicted",
      "path": "test/functional/wallet_txn_doublespend.py",
      "position": 64,
      "original_position": 63,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "b34318d4cc27d61d2b9cc6a97c9584eb0dada6e4",
      "in_reply_to_id": 407555257,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I mean mostly for the comments that start a new \"section\" or \"paragraph\" or subtest/test case. In the failing logs you could then easily identify when the new test section begins.",
      "created_at": "2020-04-14T11:29:34Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408064561",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408064561"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 195,
      "original_line": 195,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408516146",
      "pull_request_review_id": 393386277,
      "id": 408516146,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUxNjE0Ng==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407937260\r\n\r\n> Yes I hesitated at first to call it is_conflicted but it's still an implementation of a `CValidationInterface` method so `fIsConflicted` is more reasonable so `is_ibd` should be `fInitialDownload` ?\r\n\r\nJust following the naming conventions is \"[preferred in new code](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md)\". We try to take a long term view. Eventually things will be updated to follow the conventions, and following them when it's possible and the cost is low helps get there quicker.\r\n\r\n> @MarcoFalke, you suggest doing the filtering in `NotificationsProxy` ? Shouldn't this be as lean as possible and just call notifications handler ? My motivation was avoiding linking mempool code in wallet but didn't think specifically about this point.\r\n\r\nWould worry more about semantics than linking here. Link errors are easy to detect and fix. An ambiguous API can lead to confusion and bugs and workarounds that never fix the original problem. If it makes semantic sense for the mempool to have different definitions of \"conflicted\" internally and externally and to translate reason == CONFLICT or reason == REPLACED to conflicted == true, then this is API is fine. If it makes more sense to use consistent reason codes everywhere, this should just pass the codes.\r\n\r\nIn terms of building and linking, it's fine for wallet code to include txmempool.h and share the enum data type. Linker will only complain if the wallet is calling mempool functions. `src/interfaces` code could forward declare `enum class MemPoolRemovalReason;` for now, and longer term if the interface stabilizes the actual enum definition could move there.",
      "created_at": "2020-04-15T00:42:58Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408516146",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408516146"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408516222",
      "pull_request_review_id": 393386277,
      "id": 408516222,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUxNjIyMg==",
      "diff_hunk": "@@ -1105,12 +1105,16 @@ void CWallet::transactionAddedToMempool(const CTransactionRef& ptx) {\n     }\n }\n \n-void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx) {\n+void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx, bool fIsConflicted) {\n     LOCK(cs_wallet);\n     auto it = mapWallet.find(ptx->GetHash());\n     if (it != mapWallet.end()) {\n         it->second.fInMempool = false;\n     }\n+    if (fIsConflicted) {\n+        CWalletTx::Confirmation confirm(CWalletTx::Status::CONFLICTED, /* block_height */ 0, /* block_hash */ {}, /* nIndex */ 0);",
      "path": "src/wallet/wallet.cpp",
      "position": 21,
      "original_position": 12,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "497c50205534aa32931a048d02a3a2004460fe64",
      "in_reply_to_id": 407544261,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407954092\r\n\r\n> Thanks for your comment, I didn't reverse to the previous behavior starting from the user viewpoint. Unconfirmed funds allow you to spend from then or consider likely-yours as part of your balance, but here we know, as of mempool state, they are conflicted and likely-but-not-certain not going to confirm. We don't want the user to take decisions based on funds he has not. You can spend from unconfirmed, right ?\r\n> \r\n> Knowing there are cases the wallet can't detect unconfirmed transactions becoming conflicted doesn't mean that when we have the information available we shouldn't act on this.\r\n> \r\n> Thanks for `feature_notifications.py`, we will modify to test notifications, didn't know its existence.\r\n\r\nI think you can't generally spend from unconfirmed transactions unless the transaction is \"trusted\" (coming from you), in which case the normal wallet conflict detection should work. So I don't think there's a strong rationale for introducing new behavior and a new transaction state instead of just fixing the bug more simply and restoring previous behavior.\r\n\r\nI'm also not sure the change to `GetDepthInMainChain` is sufficient to handle the new conflicted state. For example in `LoadToWallet` I see\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/4d793bcfe81479d1bf34805c3960c4611eb8fc9b/src/wallet/wallet.cpp#L907-L909\r\n\r\nIs this going to work correctly when `m_confirm.hashBlock` is null, or does it need to be updated too? If `GetDepthInMainChain` and `LoadToWallet` have to be updated to deal with the new state, and these transactions are serialized to wallet files, what happens if the wallets are loaded by older wallet software? Will 0.20 and 0.19 `GetDepthInMainChain` and `LoadToWallet` implementations handle the new state correctly without bugs and crashes?",
      "created_at": "2020-04-15T00:43:14Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408516222",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/408516222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1118,
      "original_line": 1118,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/412587833",
      "pull_request_review_id": 397768492,
      "id": 412587833,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU4NzgzMw==",
      "diff_hunk": "@@ -1105,12 +1105,16 @@ void CWallet::transactionAddedToMempool(const CTransactionRef& ptx) {\n     }\n }\n \n-void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx) {\n+void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx, bool fIsConflicted) {\n     LOCK(cs_wallet);\n     auto it = mapWallet.find(ptx->GetHash());\n     if (it != mapWallet.end()) {\n         it->second.fInMempool = false;\n     }\n+    if (fIsConflicted) {\n+        CWalletTx::Confirmation confirm(CWalletTx::Status::CONFLICTED, /* block_height */ 0, /* block_hash */ {}, /* nIndex */ 0);",
      "path": "src/wallet/wallet.cpp",
      "position": 21,
      "original_position": 12,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "497c50205534aa32931a048d02a3a2004460fe64",
      "in_reply_to_id": 407544261,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": " > avoid introducing an entirely new transaction state that wallet code has never had to deal with, where a transaction is conflicting with something not in a specific block.\r\n\r\nAh sorry reading this again, in fact in `transactionRemovedFromMempool` you may have case of transaction block conflicted but not covered by `BlockConnected` due to the conflicting transaction not involving us. \r\n\r\nLike unconfirmed txA spent by unconfirmed txB, txB paying a wallet address. txA is conflicted by txA' in a block, we won't see it in BlockConnected right now.\r\n\r\nSo this PR restores UI notifications and _extend_ scope of block conflicted transactions in the lightweight way I think. Detecting them at block connection is not possible without tracking whole chain of unconfirmed transactions AFAICT.\r\n\r\n> Is this going to work correctly when m_confirm.hashBlock is null, or does it need to be updated too?\r\n\r\nChild conflicted transactions is going to inherit `m_confirm.hashBlock` null from parent.\r\n\r\n>  If GetDepthInMainChain and LoadToWallet have to be updated to deal with the new state, and these transactions are serialized to wallet files, what happens if the wallets are loaded by older wallet software?\r\n\r\nIt's not a new state, as `Confirmation::Status::CONFLICTED\" is already there. I think what matters is among `CONFLICTED` transactions is there any code path relying on `hashBlock` or `block_height`, beyond display code, there is `MarkConflicted` to keep track of the most conflicting code and `GetDepthInMainChain` ofc. \r\n\r\n> Will 0.20 and 0.19 GetDepthInMainChain and LoadToWallet implementations handle the new state correctly without bugs and crashes?\r\n\r\nAs said previously, it's not a new state, and you already have of course `UNCONFIRMED` with null hash and zero-height on which current serialization/deserialization logic relies on : https://github.com/bitcoin/bitcoin/blob/b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e/src/wallet/wallet.h#L434\r\n\r\nTrying to go forward, I think best would be to pass block height and hash in `transactionsRemovedFromMempool` even if it  seems counter-intuitive, for block conflicting transaction we do have a block height/hash. \r\n\r\nWhat do you think ? ",
      "created_at": "2020-04-22T00:44:23Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r412587833",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/412587833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1118,
      "original_line": 1118,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/412589720",
      "pull_request_review_id": 397770164,
      "id": 412589720,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU4OTcyMA==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I restrained conflict to block only, not including anymore mempool replacement which means API is far-more straightforward as wallet conflict == mempool conflict.\r\n\r\nIf we really  want to use consistent reason codes among clients, we may pull them out of txmempool.h in some node/*.h ?",
      "created_at": "2020-04-22T00:50:12Z",
      "updated_at": "2020-04-22T01:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r412589720",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/412589720"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420194547",
      "pull_request_review_id": 405896365,
      "id": 420194547,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE5NDU0Nw==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/18600#discussion_r412589720\r\n\r\n> I restrained conflict to block only\r\n\r\nThanks, this seems ok now that the definition of conflicted here matches up with the MemPoolRemovalReason definition. I do think the API would be more useful and clear if it just passed the existing MemPoolRemovalReason value instead introducing a new way to communicate the same information. But thanks for resolving the original concern!\r\n\r\n> If we really want to use consistent reason codes among clients, we may pull them out of txmempool.h in some node/*.h ?\r\n\r\nI suggested moving it to `src/interfaces/` in https://github.com/bitcoin/bitcoin/pull/18600#discussion_r408516146 because `src/interfaces/` is meant to be a home for types used at the node/wallet boundary. But `src/node/` would be also ok, and leaving it in `txmempool.h` is perfectly fine. I would leave it in `txmempool.h` if using it in this PR, because this PR is already doing a lot of things. The current source code organization is not ideal and is gradually being improved, so design of the `interfaces::Chain::Notifications::transactionRemovedFromMempool` API shouldn't be decided based on what source file an enum definition is located in. The design should try to be useful and consistent and clear, and source code organization should follow the design instead of the other way around\r\n",
      "created_at": "2020-05-05T15:22:29Z",
      "updated_at": "2020-05-05T15:22:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r420194547",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420194547"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420195260",
      "pull_request_review_id": 405897274,
      "id": 420195260,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE5NTI2MA==",
      "diff_hunk": "@@ -410,7 +410,8 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n         // for any reason except being included in a block. Clients interested\n         // in transactions included in blocks can subscribe to the BlockConnected\n         // notification.\n-        GetMainSignals().TransactionRemovedFromMempool(it->GetSharedTx());\n+        GetMainSignals().TransactionRemovedFromMempool(it->GetSharedTx(), reason == MemPoolRemovalReason::CONFLICT",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407516183,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407944782\r\n\r\n> Actually, digging into this, `MemPoolRemovalReason` purpose seems weak right now because we only use it in `removeUnchecked` to decide if we should trigger `TransactionsRemovedFromMempool` ?\r\n\r\nThis thread was continued https://github.com/bitcoin/bitcoin/pull/18600#discussion_r407550301 where Marco made a similar suggestion. But to respond to \"purpose seems weak\", the suggestion wasn't based on what wallet conflict tracking code is currently doing. Wallet conflict tracking has changed before and will likely change in the future. The suggestion to use the existing reason code was avoid to being inconsistent and confusing and avoid implementing wallet behavior outside of the wallet\r\n",
      "created_at": "2020-05-05T15:23:29Z",
      "updated_at": "2020-05-05T15:23:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r420195260",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420195260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 413,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420195993",
      "pull_request_review_id": 405898189,
      "id": 420195993,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE5NTk5Mw==",
      "diff_hunk": "@@ -1105,12 +1105,16 @@ void CWallet::transactionAddedToMempool(const CTransactionRef& ptx) {\n     }\n }\n \n-void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx) {\n+void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx, bool fIsConflicted) {\n     LOCK(cs_wallet);\n     auto it = mapWallet.find(ptx->GetHash());\n     if (it != mapWallet.end()) {\n         it->second.fInMempool = false;\n     }\n+    if (fIsConflicted) {\n+        CWalletTx::Confirmation confirm(CWalletTx::Status::CONFLICTED, /* block_height */ 0, /* block_hash */ {}, /* nIndex */ 0);",
      "path": "src/wallet/wallet.cpp",
      "position": 21,
      "original_position": 12,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "497c50205534aa32931a048d02a3a2004460fe64",
      "in_reply_to_id": 407544261,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/18600#discussion_r412587833\r\n\r\n> It's not a new state\r\n\r\nThe new state which this writes is:\r\n\r\n| `uint256 hashBlock` | `int nIndex` | interpretation                             |\r\n|---------------------|--------------|--------------------------------------------|\r\n| 0                   | -1           | conflicted since #16624, unconfirmed prior |\r\n\r\nThe existing states written are:\r\n\r\n| `uint256 hashBlock` | `int nIndex` | interpretation                             |\r\n|---------------------|--------------|--------------------------------------------|\r\n| 0                   | 0            | unconfirmed                                |\r\n| >1                  | >=0          | confirmed                                  |\r\n| >1                  | -1           | conflicted since #7105, unconfirmed prior  |\r\n| 1                   | -1           | abandoned since #7312, unconfirmed prior   |\r\n\r\nNever written and still unused states are:\r\n\r\n| `uint256 hashBlock` | `int nIndex` | interpretation                             |\r\n|---------------------|--------------|--------------------------------------------|\r\n| 0                   | not 0 or -1  | unconfirmed                                |\r\n| 1                   | not -1       | abandoned between #7312 and #16624, unconfirmed before and after |\r\n| >1                  | <-1          | confirmed                                  |\r\n\r\nMaybe it's good to add a new state, or maybe it's bad, but it doesn't seem like enough thought has gone into it the decision so far. Looking at `CWalletTx::GetDepthInMainChain`, `CWallet::ComputeTimeSmart`, `CWallet::MarkConflicted` all of these methods seem broken by the new state. If I am reading correctly, GetDepthInMainChain will return large bogus negative height values, MarkConflicted 'more conflicted' check will start overwriting valid conflicted blocks with null conflict blocks, ComputeTimeSmart will logging spurious found in block not in index errors. Am I misreading the code in seeing these behaviors? Or do you see the same behaviors, but think side effects are minimal? Do you think existing 0.17, 0.18, 0.19 wallet code handles transactions in the new state safely?\r\n\r\n> Trying to go forward, I think best would be to pass block height and hash in `transactionsRemovedFromMempool`\r\n\r\nThis does seem like a safer way forward, and probably a good approach. Only caveat is the usual caveat with changing the wallet conflicted transaction heuristic: that if we start marking transactions conflicted instead of unconfirmed, the wallet can fail to notice them becoming unconfirmed again if they become unconflicted later. This should be less likely when the conflict is coming from a block transaction instead of a mempool transaction, but not certain. I think if we are going to change the heuristic, we can't just think about it abstractly. We should be looking at specific cases and trying to figure out if users are helped or hurt by the change in each case.",
      "created_at": "2020-05-05T15:24:30Z",
      "updated_at": "2020-05-05T18:20:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r420195993",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420195993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1118,
      "original_line": 1118,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427776758",
      "pull_request_review_id": 415035617,
      "id": 427776758,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc3Njc1OA==",
      "diff_hunk": "@@ -158,7 +158,7 @@ class NotificationsProxy : public CValidationInterface\n     {\n         m_notifications->transactionAddedToMempool(tx);\n     }\n-    void TransactionRemovedFromMempool(const CTransactionRef& tx) override\n+    void TransactionRemovedFromMempool(const CTransactionRef& tx, bool fIsConflicted) override",
      "path": "src/interfaces/chain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "9eb9af6c56f52628cca4cc5241c0f88adb9f689d",
      "in_reply_to_id": 407511482,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes I agree on source code organization following the design. I think `MemPoolRemovalReason` may be dry-ed up in itself, IIRC it's not used beyond `::CONFLICTED`. But outside PR scope.",
      "created_at": "2020-05-20T06:46:49Z",
      "updated_at": "2020-05-20T06:46:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r427776758",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427776758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427784304",
      "pull_request_review_id": 415045231,
      "id": 427784304,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc4NDMwNA==",
      "diff_hunk": "@@ -1105,12 +1105,16 @@ void CWallet::transactionAddedToMempool(const CTransactionRef& ptx) {\n     }\n }\n \n-void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx) {\n+void CWallet::transactionRemovedFromMempool(const CTransactionRef &ptx, bool fIsConflicted) {\n     LOCK(cs_wallet);\n     auto it = mapWallet.find(ptx->GetHash());\n     if (it != mapWallet.end()) {\n         it->second.fInMempool = false;\n     }\n+    if (fIsConflicted) {\n+        CWalletTx::Confirmation confirm(CWalletTx::Status::CONFLICTED, /* block_height */ 0, /* block_hash */ {}, /* nIndex */ 0);",
      "path": "src/wallet/wallet.cpp",
      "position": 21,
      "original_position": 12,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "497c50205534aa32931a048d02a3a2004460fe64",
      "in_reply_to_id": 407544261,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You're right this approach by introducing a new state is broken. I think I've been confused by trying to solve #18325 and at same time try to harden conflict detection on non-connected wallet transaction.\r\n\r\nI think the safe approach is to pass block height and hash in `transactionsRemovedFromMempool` but in another PR to reason on its own.\r\n\r\nNote: IIRC we don't have undo conflict logic, that was the whole intent of https://github.com/bitcoin/bitcoin/pull/17543.",
      "created_at": "2020-05-20T07:03:24Z",
      "updated_at": "2020-05-20T07:03:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r427784304",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427784304"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1118,
      "original_line": 1118,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429347629",
      "pull_request_review_id": 417046016,
      "id": 429347629,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM0NzYyOQ==",
      "diff_hunk": "@@ -139,5 +140,99 @@ def run_test(self):\n         # Node1's balance should be its initial balance (1250 for 25 block rewards) plus the doublespend:\n         assert_equal(self.nodes[1].getbalance(), 1250 + 1240)\n \n+        # Following test limb check that if a transaction of concern conflicted due to its parent\n+        # or anterior transaction being conflicted, wallet is able to detect it, independently of\n+        # reason (either block or mempool)\n+\n+        # Get a \"blind\" address from node0\n+        connect_nodes(self.nodes[0], 1)\n+        node0_address_blind = self.nodes[0].getnewaddress()\n+        txid_origin = self.nodes[1].sendtoaddress(self.nodes[1].getnewaddress(), Decimal(\"10\"))\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Build parent conflicted tx from node1 to node1\n+        nA = next(tx_out[\"vout\"] for tx_out in self.nodes[1].gettransaction(txid_origin)[\"details\"] if tx_out[\"amount\"] == Decimal(\"10\"))\n+        inputs_parent_conflicted_tx = []\n+        inputs_parent_conflicted_tx.append({\"txid\": txid_origin, \"vout\": nA, \"sequence\": BIP125_SEQUENCE_NUMBER})\n+        outputs_parent_conflicted_tx = {}\n+        outputs_parent_conflicted_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99998\")\n+\n+        # Broadcast parent conflicted tx\n+        parent_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_parent_conflicted_tx, outputs_parent_conflicted_tx))\n+        parent_conflicted_txid = self.nodes[1].sendrawtransaction(parent_conflicted_tx[\"hex\"])\n+\n+        # Build children conflicted tx\n+        inputs_children_conflicted_tx = []\n+        inputs_children_conflicted_tx.append({\"txid\": parent_conflicted_txid, \"vout\": 0})\n+        outputs_children_conflicted_tx = {}\n+        outputs_children_conflicted_tx[node0_address_blind] = Decimal(\"9.99996\")\n+\n+        #Broadcast children conflicted tx\n+        node1s_children_conflicted_tx = self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_children_conflicted_tx, outputs_children_conflicted_tx))\n+        children_conflicted_txid = self.nodes[1].sendrawtransaction(node1s_children_conflicted_tx[\"hex\"])\n+        self.sync_mempools([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees conflicted paying back\n+        node0s_children_conflicted_tx = self.nodes[0].gettransaction(children_conflicted_txid)\n+\n+        assert_equal(node0s_children_conflicted_tx[\"confirmations\"], 0)\n+        assert_equal(node0s_children_conflicted_tx[\"details\"][0][\"category\"], \"receive\")\n+\n+        # Build conflicting tx, double-spending parent conflicted\n+        inputs_conflicting_tx = []\n+        inputs_conflicting_tx.append({\"txid\": txid_origin, \"vout\": nA})\n+        outputs_conflicting_tx = {}\n+        outputs_conflicting_tx[self.nodes[1].getnewaddress()] = Decimal(\"9.99980\")\n+\n+        # Broadcast conflicting tx to node1 mempool and generate a block\n+        conflicting_tx= self.nodes[1].signrawtransactionwithwallet(self.nodes[1].createrawtransaction(inputs_conflicting_tx, outputs_conflicting_tx))\n+        conflicting_txid = self.nodes[1].sendrawtransaction(conflicting_tx[\"hex\"])\n+        self.nodes[1].generate(1)\n+        self.sync_blocks([self.nodes[0], self.nodes[1]])\n+\n+        # Verify node0 sees children as conflicted",
      "path": "test/functional/wallet_txn_doublespend.py",
      "position": 64,
      "original_position": 63,
      "commit_id": "e9ffced8bebe7451d5e8d97b5e88fbedb7675cc6",
      "original_commit_id": "b34318d4cc27d61d2b9cc6a97c9584eb0dada6e4",
      "in_reply_to_id": 407555257,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I mean mostly for the comments that start a new \"section\" or \"paragraph\" or subtest/test case. In the failing logs you could then easily identify when the new test section begins.\r\n\r\nYes! and logging like this also makes it clear where the slower tests are to possibly speed them up.",
      "created_at": "2020-05-22T16:40:56Z",
      "updated_at": "2020-05-22T16:40:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18600#discussion_r429347629",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429347629"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18600"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 195,
      "original_line": 195,
      "side": "RIGHT"
    }
  ]
}