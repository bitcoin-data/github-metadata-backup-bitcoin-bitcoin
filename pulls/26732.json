{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732",
    "id": 1172779825,
    "node_id": "PR_kwDOABII585F5zMx",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/26732",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/26732.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/26732.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/34df3c790fa2b0cf2ee5064713d15ae9ed63eeb9",
    "number": 26732,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "[WIP] wallet: tx creation, don't select outputs from txes that are being replaced",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Depends on #27601.\r\n\r\nAdding test coverage and the needed checks for two scenarios\r\nwhere the wallet create invalid transactions.\r\n\r\n\r\n#### First Scenario, Do Not Use Outputs From the Tx Being Replaced\r\n\r\nWhen the wallet creates/fund a replacement transaction, it should\r\nnot fund the new transaction with outputs belonging to the tx\r\nbeing replaced.\r\n\r\nReason:\r\nOnce replaced, those outputs are no longer going to exist, there\r\nby the created/funded transaction will be invalid.\r\n\r\n#### Second Scenario, Do Not Create BIP125 Rule 2 Invalid Txes\r\n\r\nPrevent adding new unconfirmed outputs to the transaction being\r\ncreated/funded If any preset input was already spent by a mempool\r\ntransaction.\r\n\r\nNote:\r\nBoth scenarios can can be verified cherry-picking the tests commits\r\non master. They will fail.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2022-12-20T20:51:17Z",
    "updated_at": "2024-08-30T04:56:47Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "b19dc52ab1511b0066143a4d722e8c8a659cb7e4",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2022_wallet_do_not_select_utxo_from_the_tx_being_replaced",
      "ref": "2022_wallet_do_not_select_utxo_from_the_tx_being_replaced",
      "sha": "34df3c790fa2b0cf2ee5064713d15ae9ed63eeb9",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 4,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 411910,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-08-29T22:21:31Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2024-08-28T13:32:33Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "61de64df6790077857faba84796bb874b59c5d15",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35796,
        "stargazers_count": 77744,
        "watchers_count": 77744,
        "size": 266978,
        "default_branch": "master",
        "open_issues_count": 660,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-08-29T16:34:39Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-08-30T04:58:07Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 145,
    "deletions": 24,
    "changed_files": 6,
    "commits": 5,
    "review_comments": 2,
    "comments": 8
  },
  "events": [
    {
      "event": "commented",
      "id": 1360216493,
      "node_id": "IC_kwDOABII585RE0Gt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1360216493",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-20T20:51:20Z",
      "updated_at": "2024-08-30T04:56:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/26732).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/26732#pullrequestreview-1408042454), [murchandamus](https://github.com/bitcoin/bitcoin/pull/26732#pullrequestreview-1477680060) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/807](https://github.com/bitcoin-core/gui/pull/807) (refactor: interfaces, make 'createTransaction' less error-prone by furszy)\n* [#27865](https://github.com/bitcoin/bitcoin/pull/27865) (wallet: Track no-longer-spendable TXOs separately by achow101)\n* [#27286](https://github.com/bitcoin/bitcoin/pull/27286) (wallet: Keep track of the wallet's own transaction outputs in memory by achow101)\n* [#25269](https://github.com/bitcoin/bitcoin/pull/25269) (wallet: re-activate  \"AmountWithFeeExceedsBalance\" error by furszy)\n* [#21283](https://github.com/bitcoin/bitcoin/pull/21283) (Implement BIP 370 PSBTv2 by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1360216493",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "labeled",
      "id": 8081742671,
      "node_id": "LE_lADOABII585ZuGGUzwAAAAHhtZtP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8081742671",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-20T20:51:21Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "subscribed",
      "id": 8082217052,
      "node_id": "SE_lADOABII585ZuGGUzwAAAAHhvNhc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8082217052",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-20T22:15:02Z"
    },
    {
      "event": "commented",
      "id": 1360409588,
      "node_id": "IC_kwDOABII585RFjP0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1360409588",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-20T22:44:14Z",
      "updated_at": "2022-12-20T22:44:14Z",
      "author_association": "MEMBER",
      "body": "To be clear, this is if you make a replacement manually, not with `bumpfee`. `bumpfee` avoids this problem by setting a minimum confirmations in the coin control object. IIRC BIP 125 disallows adding new unconfirmed inputs too.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1360409588",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "commented",
      "id": 1361375464,
      "node_id": "IC_kwDOABII585RJPDo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1361375464",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-21T14:23:22Z",
      "updated_at": "2022-12-21T14:24:04Z",
      "author_association": "MEMBER",
      "body": "> To be clear, this is if you make a replacement manually, not with `bumpfee`. `bumpfee` avoids this problem by setting a minimum confirmations in the coin control object.\r\n\r\nYes, could happen if you manually pre-select an input from an unconfirmed transaction and provides it to any RPC command that creates or fund a transaction (e.g. `send()`). Not an issue for `bumpfee` as it skips unconfirmed UTXOs.\r\n\r\n> IIRC BIP 125 disallows adding new unconfirmed inputs too.\r\n\r\nYou mean, grouping inputs from different unconfirmed transactions into a single replacement tx?\r\n(in other words, a single tx that replaces many unconfirmed txes).\r\n\r\nSo far, what the test proves is that the wallet, during the transaction creation process, can automatically select outputs from the unconfirmed transaction that is being replaced to use them as inputs. Which shouldn't happen as those coins will no longer exist once the tx gets replaced.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1361375464",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "commented",
      "id": 1361581365,
      "node_id": "IC_kwDOABII585RKBU1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1361581365",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-21T16:06:48Z",
      "updated_at": "2022-12-21T16:06:48Z",
      "author_association": "MEMBER",
      "body": "> You mean, grouping inputs from different unconfirmed transactions into a single replacement tx?\r\n> (in other words, a single tx that replaces many unconfirmed txes).\r\n\r\nUnconfirmed inputs that were in the original transactions being replaced are fine. It's adding new unconfirmed inputs that is not allowed.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1361581365",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8091042036,
      "node_id": "HRFPE_lADOABII585ZuGGUzwAAAAHiQ4D0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8091042036",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-21T22:42:36Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8096064788,
      "node_id": "HRFPE_lADOABII585ZuGGUzwAAAAHikCUU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8096064788",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-22T13:58:10Z"
    },
    {
      "event": "commented",
      "id": 1362890022,
      "node_id": "IC_kwDOABII585RPA0m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1362890022",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-22T14:15:33Z",
      "updated_at": "2022-12-22T14:23:42Z",
      "author_association": "MEMBER",
      "body": "> > You mean, grouping inputs from different unconfirmed transactions into a single replacement tx?\r\n> > (in other words, a single tx that replaces many unconfirmed txes).\r\n> \r\n> Unconfirmed inputs that were in the original transactions being replaced are fine. It's adding new unconfirmed inputs that is not allowed.\r\n\r\nGood to know. Thanks, it's BIP125 rule 2.\r\n\r\nThe wallet can create invalid transactions due not be contemplating that neither.\r\nSame as with the other case, could happen on any of the \"send*\" and \"fund*\" RPC commands, when the user preselects an output that is being used as input for another unconfirmed transaction.\r\n\r\nSo, added test coverage and internal checks for it as well.\r\n\r\nSummary:\r\nNow this PR adds support and test coverage for two different scenarios where the wallet creates invalid transactions.\r\n\r\n1) If is creating a replacement tx; in the available coins fetching process, the wallet need to skip the outputs that corresponds to the transaction being replaced (those coins are no longer going to exist once it's replaced, there by they are not \"available\").\r\n\r\n2) Prevent adding new unconfirmed outputs to the transaction being created/funded If any preset input was already spent by a mempool transaction. (BIP125 rule 2).",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1362890022",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8098671985,
      "node_id": "HRFPE_lADOABII585ZuGGUzwAAAAHit-1x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8098671985",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-22T19:47:53Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8098716099,
      "node_id": "HRFPE_lADOABII585ZuGGUzwAAAAHiuJnD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8098716099",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-22T19:54:52Z"
    },
    {
      "event": "reviewed",
      "id": 1228977316,
      "node_id": "PRR_kwDOABII585JQLSk",
      "url": null,
      "actor": null,
      "commit_id": "d7e41b63cdb612946266ec570465824b3b81491a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> So far, what the test proves is that the wallet, during the transaction creation process, can automatically select outputs from the unconfirmed transaction that is being replaced to use them as inputs. Which shouldn't happen as those coins will no longer exist once the tx gets replaced.\r\n\r\nIndeed this sounds like a bug that should be fixed.\r\nWould it be better to stop + warn the user that they have selected an input that is already spent by something in this mempool, and, if this is intentional, they should use `bumpfee` RPC instead? Otherwise you end up implementing RBF checks in 2 places?",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#pullrequestreview-1228977316",
      "submitted_at": "2022-12-23T13:46:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732"
    },
    {
      "event": "commented",
      "id": 1365455854,
      "node_id": "IC_kwDOABII585RYzPu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1365455854",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-26T21:01:26Z",
      "updated_at": "2022-12-30T12:30:47Z",
      "author_association": "MEMBER",
      "body": "> > So far, what the test proves is that the wallet, during the transaction creation process, can automatically select outputs from the unconfirmed transaction that is being replaced to use them as inputs. Which shouldn't happen as those coins will no longer exist once the tx gets replaced.\r\n> \r\n> Indeed this sounds like a bug that should be fixed. Would it be better to stop + warn the user that they have selected an input that is already spent by something in this mempool, and, if this is intentional, they should use `bumpfee` RPC instead? Otherwise you end up implementing RBF checks in 2 places?\r\n\r\nThat is a good point and topic.\r\n\r\nAnother point of view would be to understand `bumpfee` as the `sendtoaddress` of the replacement transaction creation commands: the simplest and most straightforward way to create a replacement transaction, where regular users provide few inputs and the command just work. Without almost any possible customization etc.\r\n\r\nThen, under this rationale, instead of blocking replacement txes from happening in lower level commands like `fundrawtransaction`, `walletcreatefundedpsbt` etc, it might be good to unify code (not duplicate the checks, which would be ugly for sure) and enable the same RBF validations on other processes too.\r\nOnly performing RBF checks if the crafted/funded transaction has at least one already spent input somewhere else (which only could happens if the user manually preset the input/s).\r\n\r\nWhich, based on a brief walk-through the bumpfee process, might not be that bad as we are duplicating some code that is already inside the general fundtransaction function.\r\n\r\nThen, for advanced users, this view might be more adequate as otherwise we would need to add more customization options inside `bumpfee` so it provides almost the same functionality as the other lower level commands (e.g. be able to bump a tx that have at least one input that does not belong to the wallet, be able to add new confirmed inputs manually, modify an output value, provide an input weight manually, among other \"not standard for bump txes\" flows that advanced users might want to do).\r\n\r\n---------\r\n\r\nStill.. have to say that this comes from an out loud thinking.. atm, I don't have a strong preference over any approach:\r\n The blocking approach is reasonable as it would make our life easier for the time being but then, if users start requesting tx customizations, we will end up adding lot of stuff into `bumpfee` that is already somewhere else. Which will force us to unify code anyway.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1365455854",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "labeled",
      "id": 8240659313,
      "node_id": "LE_lADOABII585ZuGGUzwAAAAHrLntx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8240659313",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-16T23:35:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 9093989132,
      "node_id": "RRE_lADOABII585ZuGGUzwAAAAIeC0MM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9093989132",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-25T15:45:14Z",
      "requested_reviewer": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 9093990840,
      "node_id": "RRE_lADOABII585ZuGGUzwAAAAIeC0m4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9093990840",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-25T15:45:24Z",
      "requested_reviewer": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "convert_to_draft",
      "id": 9093991863,
      "node_id": "CTDE_lADOABII585ZuGGUzwAAAAIeC023",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9093991863",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-25T15:45:30Z"
    },
    {
      "event": "reviewed",
      "id": 1408042454,
      "node_id": "PRR_kwDOABII585T7QXW",
      "url": null,
      "actor": null,
      "commit_id": "d7e41b63cdb612946266ec570465824b3b81491a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, apologies for the late re-review\r\n\r\nJust to recap the whiteboarding session we had offline, I think what we want is to add a `SanitizeCoinControl` function that can be used early on across both bumpfee and fundraw RPCs:\r\n\r\n1. If any of the selected inputs is already spent in mempool, `is_replacement=true` and keep track of which inputs are being spent again.\r\n2. If the selected inputs includes UTXOs spent and created by the same transaction (i.e. selected output from a tx that is being replaced), return error \"invalid input selection\"\r\n3. If `is_replacement=true`, automatically set `min_depth=1`\r\n4. If `is_replacement` and any of the selected inputs is `<min_depth` but not part of the replaced tx, return error \"invalid input selection\" (i.e. selected an additional unconfirmed output in an RBF)\r\n\r\nThe transactions should fail regardless, but this gives the user a helpful \"invalid input selection\" to let them know that they have manually selected some inputs that don't make sense.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#pullrequestreview-1408042454",
      "submitted_at": "2023-05-01T19:56:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732"
    },
    {
      "event": "reviewed",
      "id": 1477680060,
      "node_id": "PRR_kwDOABII585YE5u8",
      "url": null,
      "actor": null,
      "commit_id": "d7e41b63cdb612946266ec570465824b3b81491a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#pullrequestreview-1477680060",
      "submitted_at": "2023-06-13T17:03:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732"
    },
    {
      "event": "unsubscribed",
      "id": 9518992933,
      "node_id": "UE_lADOABII585ZuGGUzwAAAAI3YE4l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9518992933",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-13T17:10:16Z"
    },
    {
      "event": "reviewed",
      "id": 1622222712,
      "node_id": "PRR_kwDOABII585gsSd4",
      "url": null,
      "actor": null,
      "commit_id": "d7e41b63cdb612946266ec570465824b3b81491a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> There hasn't been much activity lately and the patch still needs rebase. What is the status here?\r\n> \r\n> * Is it still relevant? âž¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\r\n\r\nIt is still relevant. I'm waiting for #27601 outcome to rebase it. This work depends on it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#pullrequestreview-1622222712",
      "submitted_at": "2023-09-12T13:12:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732"
    },
    {
      "event": "commented",
      "id": 1850358358,
      "node_id": "IC_kwDOABII585uSjpW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1850358358",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-11T15:53:05Z",
      "updated_at": "2023-12-11T15:53:05Z",
      "author_association": "MEMBER",
      "body": "> > There hasn't been much activity lately and the patch still needs rebase. What is the status here?\r\n> > \r\n> > * Is it still relevant? âž¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\r\n> \r\n> It is still relevant. I'm waiting for #27601 outcome to rebase it. This work depends on it.\r\n\r\nIs there an outcome? Seems like nothing has happened on  the pull since, other than it needing rebase.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1850358358",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "commented",
      "id": 1852094839,
      "node_id": "IC_kwDOABII585uZLl3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1852094839",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-12T14:01:03Z",
      "updated_at": "2023-12-12T14:01:03Z",
      "author_association": "MEMBER",
      "body": "> Is there an outcome? Seems like nothing has happened on the pull since, other than it needing rebase.\r\n\r\nNot yet. Still need to rework #27601 first. Other wallet works have gotten more priority than this working path. This two PRs are still bugs within the wallet but they could wait a bit in favor of other PRs.\r\nI don't have a fixed time to get back to this work, but will try to do it after new year. We should be able to merge few of the ongoing big PRs by then.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#issuecomment-1852094839",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26732"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5N2I1ODAxYTEyNjlkNjU5ZGQyNjQ1ODM1ZTVmZjkwOTUxOTE2Mzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a97b5801a1269d659dd2645835e5ff9095191638",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a97b5801a1269d659dd2645835e5ff9095191638",
      "tree": {
        "sha": "327b4828f34dc6b74d0637cd3a89d2636d12890c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/327b4828f34dc6b74d0637cd3a89d2636d12890c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 327b4828f34dc6b74d0637cd3a89d2636d12890c\nparent 61de64df6790077857faba84796bb874b59c5d15\nauthor furszy <matiasfurszyfer@protonmail.com> 1671545832 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1711842041 -0300\n\nwallet: don't select outputs from txes that are being replaced\n\nWhen the wallet creates/fund a replacement transaction (spending\none or more inputs of one or many existent transactions), it should\nnot fund the new transaction with outputs belonging to the txes\nbeing replaced.\n\nReason:\nOnce replaced, those outputs are no longer going to exist, there\nby the created/funded transaction will be invalid.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmYIovkACgkQXdI8zGhq\npiO5Vw/9EhPJHTZ3rUSMvbOFhsecWGrMD9CjxBA6fDCd6E2ffHWCHrHoZS8tDebx\notQD4/JW7uWFixznGpgj9dbZfP74FfWQ7CQMm3neSG3QWLSLADWia6fQXBBHH5EK\nYI8nwuv+rAsMcYVq1ZLAEdu8manT2+JAsGH/nc3rAlNvGXLb1uVG8WHLHUhdFoqY\nyx3SB5z69D4JCWIuza7hzDHAHiJ7vVqBkPbh8daXt0T2/IvLkBVFF7xQlbxXU3jW\nDfuwmqkMaPGeQwZlX4YiLmEvfVCQ++vrJLsZfpKS6v+a9weeu2nrkGdYoM3nBKBY\nxfyCyFTD6nnKGXgtP7uXJHCAZy6sgN5xGjhn7C+cnDc+34CDOew4VA7fEeWc/icF\nBvYQzlJk+qKSiSg8Q4S4bQJBLYAYmBQizNTqKWuH2lss3Oqn/JfBosdaWwGrFyDL\n2ISIZGNlyzFYmW06rKW6Qpbo2gDg9OuIIr80RfXXJsu5ixBYT/P4DrRX8b48i2uE\nkRipSA97mpGhCnIzDCzd6DKlzLz+uiPWyN3QM32luBmdZzF6VT0/qKLei/p8xPW3\nTGoawAgaQXg+8wxqSBRZQKhV67XmnNH6OLiAODJtaa9CgRarkksLRbkmrJvKwtuX\n7y4EnQcZAeXctdsrX8yyqrQcvhC8/IvTfhniy1LEINFJdXhFtKk=\n=SOMv\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/61de64df6790077857faba84796bb874b59c5d15",
          "sha": "61de64df6790077857faba84796bb874b59c5d15",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/61de64df6790077857faba84796bb874b59c5d15"
        }
      ],
      "message": "wallet: don't select outputs from txes that are being replaced\n\nWhen the wallet creates/fund a replacement transaction (spending\none or more inputs of one or many existent transactions), it should\nnot fund the new transaction with outputs belonging to the txes\nbeing replaced.\n\nReason:\nOnce replaced, those outputs are no longer going to exist, there\nby the created/funded transaction will be invalid.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-03-30T23:40:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-12-20T14:17:12Z"
      },
      "sha": "a97b5801a1269d659dd2645835e5ff9095191638"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIwNTQyMjIyOTMyZTNiZWJkY2I0NjU2MmZkOTVkYjhiZTg2OWUyZjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b0542222932e3bebdcb46562fd95db8be869e2f3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b0542222932e3bebdcb46562fd95db8be869e2f3",
      "tree": {
        "sha": "903d35e2f4562b827f7da13643105a398c68def5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/903d35e2f4562b827f7da13643105a398c68def5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 903d35e2f4562b827f7da13643105a398c68def5\nparent a97b5801a1269d659dd2645835e5ff9095191638\nauthor furszy <matiasfurszyfer@protonmail.com> 1671565786 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1711842041 -0300\n\ntest: wallet, add coverage for replacement tx coin selection\n\nThe wallet tx creation process should not select any output\nbelonging to the transaction that is being replaced.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmYIovkACgkQXdI8zGhq\npiPB3g//apgKrG+D61qLeKyRr/DHR30Dtkxa8CH3/FSb3GjiQyjNqsgz016Xd/SC\nN76azwKDGj0MxJn/eJCxNoBAsvWBs1SK5RJMzOsAYDaethcCS7UlbxmcTmA4WpnW\nLGkh9gXg4r4AmeR/+H/SgVxriBgI9KLbI2asHL3uCdqbkXvcdErtEqCyOi++Jm+Z\nJof7RK/k/yMgT7sbAnpHaB5BXTtpgIEOlba4HRI/qyV6HdF1Y1V4gV+a9hGfCmQv\nKy9qGOXlpCGi3Kh1PQeOtpxzvURj9UAo54z9MDJCTZ4ZkHWM1Y16YcVh9uDaFwdj\nSWoQjBw/g4PiV9/LVSkoiK5HvcfDhX81nlBrnNwB1jaDYZSXguu41Rnuc3A3QnFW\nwvGeINhXb48x1uv+tds80Qmn41bPcojSu+XWqcYgjvg3GR2qfeBadXWfjWh0nbbV\n6w2AcoG22nImQYiOmpPvHwvWc7a2ACwOv2k+1q8sdgb0GlYO8udqBWw+rZqQU01b\nH2ZcRIoAHfhzs2+EUUxDV9l/qbQBb8TeDNRBCJwihmb0OYAyYJrzLr3Er5suVnP8\nPESPo7hSLmH2OI935yrOKgbUf2x2bXTTZiFISmlVCbto2n/hiaKmgOgTpnnE6PvY\nsz/CSIbq4EnBI/Aq9pi7oaKK+fsXjoDHGHKbrDtNJkQ0P1bWWNo=\n=MVXT\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a97b5801a1269d659dd2645835e5ff9095191638",
          "sha": "a97b5801a1269d659dd2645835e5ff9095191638",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a97b5801a1269d659dd2645835e5ff9095191638"
        }
      ],
      "message": "test: wallet, add coverage for replacement tx coin selection\n\nThe wallet tx creation process should not select any output\nbelonging to the transaction that is being replaced.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-03-30T23:40:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-12-20T19:49:46Z"
      },
      "sha": "b0542222932e3bebdcb46562fd95db8be869e2f3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIyNDRjMDkxMTkxZjVhYjE0MWU1MjY3Yzc3MDAwNjNhNmJjZDNlOWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b244c091191f5ab141e5267c7700063a6bcd3e9b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b244c091191f5ab141e5267c7700063a6bcd3e9b",
      "tree": {
        "sha": "3f7b7494a3467a2935e82cb6a9d584b794e71db5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f7b7494a3467a2935e82cb6a9d584b794e71db5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3f7b7494a3467a2935e82cb6a9d584b794e71db5\nparent b0542222932e3bebdcb46562fd95db8be869e2f3\nauthor furszy <matiasfurszyfer@protonmail.com> 1671737817 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1711842041 -0300\n\ninterfaces: add isSpentInMempool method\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmYIovkACgkQXdI8zGhq\npiMVFhAArC0nb2fQGgLg8ix9qRhP3ciigOwMIdgr/V2h2IcnfZSEProJShwOovEM\n3FXqK0xYt4OAMWRiqY0RCeE4O7lzFtGQTWO+qUE3BE5zaMvI3aif+v7UvYDm4J83\nZItSPTDIkYHeXCy3lOmpaof2WiYxkEoI9onsyRXTR7dI5EbWasSYu8laqTSfFxZa\n/6h87sArG/fSyQ5PD1jCkTupW4Gspc/PJBynmMulRewjdI/AiWaYF+nRH9XXfE4i\n6aCQsWLzMIriJ8zU++azxBWN9TirrbjQW6/DsJL/3QVms7Gy8XHzTx26jDh80ZoF\n5kDcGpH2VUtQFF+vQEEh5DhTOZxfV4cOzV6iVelO5/825jXLjsmceadmOUO/Xklo\nlpvlKyL8sYzzYD0Gilx86wDHGACunoCXohVSzR9abbGziM2N3uDqRO+VbJ1aO0ki\naLsC7zl6HT5l5yV9blmq6ozVuig0k6zoSoqwN/JS7hNG5G6YtfCulNPj2dT3fHXU\nFGrvfZAuw/dP5ONIrrQg/YzNO1Q8yfmdOpMdBZpiqHzuh9dRafIdUNWg15ZPiOTF\nOf8yILhLsMhq2Bnj954CKJpfBVIgVEh4AnIqIb5AGqLQvLNkpM+3LeqM2qwBncRf\nF0VePRb0/QjfLnBX5q4inGt68mY9fOvyrx2qGQkV97TqD1oD1LM=\n=CPUB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b0542222932e3bebdcb46562fd95db8be869e2f3",
          "sha": "b0542222932e3bebdcb46562fd95db8be869e2f3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b0542222932e3bebdcb46562fd95db8be869e2f3"
        }
      ],
      "message": "interfaces: add isSpentInMempool method",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-03-30T23:40:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-12-22T19:36:57Z"
      },
      "sha": "b244c091191f5ab141e5267c7700063a6bcd3e9b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhhOTQxNzFlOTk0YmM1YWJlYzFiMzMwY2E3MjgzZGQzNzVkYjliMjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a94171e994bc5abec1b330ca7283dd375db9b22",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8a94171e994bc5abec1b330ca7283dd375db9b22",
      "tree": {
        "sha": "7db76b36f9e4228a06c737b124bdfed6c115faec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7db76b36f9e4228a06c737b124bdfed6c115faec"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7db76b36f9e4228a06c737b124bdfed6c115faec\nparent b244c091191f5ab141e5267c7700063a6bcd3e9b\nauthor furszy <matiasfurszyfer@protonmail.com> 1671661133 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1711842041 -0300\n\nwallet: create/fund replacement tx, disallow unconfirmed UTXOs selection\n\nEnsuring that we don't add any new unconfirmed UTXOs to the replacement\ntransaction (satisfying BIP125 rule 2).\n\nnote:\nneeded to slightly adapt the 'test_add_inputs_default_value' functional\ntest case because it was creating a replacement tx and adding new\nunconfirmed inputs without noticing it (we are testing a totally\ndifferent things there).\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmYIovkACgkQXdI8zGhq\npiPHsw/+IhGpM2/LB3T0M3JJMl3Mx9yuDK4/Mta60NsqYLr9wq1fNRPF++IWMApc\nGTKAHnjDgLb7tn1yPi+hjw0526/NF4ROF6/iGfOntlHdFHjiudgRD7ASuDGU7y+N\nnOGJ9cZyajqydal2NE5/R9wbHajkzWf5MREXLY835N8fOhYSRUa4P7sgp+omLtol\ntS4xO7GeX9Xthar6b37DgSbQ2289iMaEXPeknc+hX3cgHAZGchRYTxAXdt2Ct4yC\nKLLKOed67xJkX9+PxhzqJg6ezMFRNBxSO1VxybTiyCuEaOW3FL5VmAxIv5WQF5RT\nW/4aGr5nWJLSHuLxQmTQDmFOnKPXy6EfUx/2Nli8ZL2culQwApz8NpmrbA+SQjno\n+whph8/h3JFh55u0nck78/G2XX/aewPiZFBSOWZej8YKRORc9qlsOpPkpEiMwvTd\nKX/6OGYwcGtVMG15VO128sAQlVFOif92+dHMCASxw8iOxuO6M4kC9KUoA8yIQU+d\naBZIHLzd6z3OtQZxNJfkkNVP232hJD+OPgsnEhEQ2bRPE79kDUJ6dh10dJzAT7Z8\nJvkcO8elis/cwkgQgoL3WwibBQ0BK/6TPVH1oh+ZoVgoZRv1j9uUryGCqEA9KUkz\nMhtA+fE/Qdm1JypvwSVMLKy72tn/bnaOyO1SP0LbCFnc6vho0QY=\n=Q4lZ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b244c091191f5ab141e5267c7700063a6bcd3e9b",
          "sha": "b244c091191f5ab141e5267c7700063a6bcd3e9b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b244c091191f5ab141e5267c7700063a6bcd3e9b"
        }
      ],
      "message": "wallet: create/fund replacement tx, disallow unconfirmed UTXOs selection\n\nEnsuring that we don't add any new unconfirmed UTXOs to the replacement\ntransaction (satisfying BIP125 rule 2).\n\nnote:\nneeded to slightly adapt the 'test_add_inputs_default_value' functional\ntest case because it was creating a replacement tx and adding new\nunconfirmed inputs without noticing it (we are testing a totally\ndifferent things there).",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-03-30T23:40:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-12-21T22:18:53Z"
      },
      "sha": "8a94171e994bc5abec1b330ca7283dd375db9b22"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0ZGYzYzc5MGZhMmIwY2YyZWU1MDY0NzEzZDE1YWU5ZWQ2M2VlYjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34df3c790fa2b0cf2ee5064713d15ae9ed63eeb9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/34df3c790fa2b0cf2ee5064713d15ae9ed63eeb9",
      "tree": {
        "sha": "17fa9463f9539379e70b9607ae6e09908adf6626",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/17fa9463f9539379e70b9607ae6e09908adf6626"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 17fa9463f9539379e70b9607ae6e09908adf6626\nparent 8a94171e994bc5abec1b330ca7283dd375db9b22\nauthor furszy <matiasfurszyfer@protonmail.com> 1671659729 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1711842041 -0300\n\ntest: verify wallet not creating, BIP125 rule 2 wise, invalid txes\n\nthe wallet should skip unconfirmed outputs when it is\ncreating/funding a replacement tx\n\nPer BIP125 rule 2, the replacement tx must only have unconfirmed\ninputs from the original transaction that is being replaced.\nCannot contain new unconfirmed inputs.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmYIovkACgkQXdI8zGhq\npiPdKg/5AbWvhfmHLkubd0KHr7JHjqcytAgcipo/SJKuQ41eaUZrv/Rastwcum7j\nYAu/6Cuj4DZI9ujU8EZ3814fYGbEVgR/AfqtApG//mQM4OkEwAcfmwX9iwWSOLOj\nNFK9tRjeEa0tce9vWN9+NxHozyvUEBKC2Mu6eKT2azi+ynZKE1w94UrX0OIEiOdu\nSYtS6lF47p/MOd7DfibIvUinOeoCA1Ki2JSAgjRSAdd4W+dwd6VU2KKm669xitkj\nkmxcXrvXF3T0VbP/4a2Z2gTcy7/pGWrKqdUA5pJ6NJ9W6Qez1djW4mZGUVm1NqR7\nw8DVWrT1Z9bY+me7UZtDUBfpr2aTCHz5taxo+8NB4wutGg3oDtHJTLk2SvURj1Z+\nI652zrFtxJaS1kURGCuvduXXVrqhSeyJ10s1QHpVvfeSTxYniy91H1m93Rd2975A\nOjwg33HE+VATu7UU/pduwhhkO+RnQ1Utgfr2mrXmm42NjH6/eyURG1oBiklyeR8b\nkQdQ8oUI9BdY+gNFl8GBYJPHeD8dP5V0jlmst25ExXhlSLKC9e1+4yd/M8pRRV4Q\nR0q3iPMnEUZBJ3VlfbMtv0wvG2VxUujTD/uKqXVt/c2FXdYfTmfFENnj9j5w3Wj4\nufaai5UmazWAWarH0Qe4zck1w8tB2wiMxuIGN9YI3swQCWrdviI=\n=Zsib\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a94171e994bc5abec1b330ca7283dd375db9b22",
          "sha": "8a94171e994bc5abec1b330ca7283dd375db9b22",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8a94171e994bc5abec1b330ca7283dd375db9b22"
        }
      ],
      "message": "test: verify wallet not creating, BIP125 rule 2 wise, invalid txes\n\nthe wallet should skip unconfirmed outputs when it is\ncreating/funding a replacement tx\n\nPer BIP125 rule 2, the replacement tx must only have unconfirmed\ninputs from the original transaction that is being replaced.\nCannot contain new unconfirmed inputs.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-03-30T23:40:41Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2022-12-21T21:55:29Z"
      },
      "sha": "34df3c790fa2b0cf2ee5064713d15ae9ed63eeb9"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12301966239,
      "node_id": "HRFPE_lADOABII585ZuGGUzwAAAALdQRuf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12301966239",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-30T23:41:00Z"
    },
    {
      "event": "renamed",
      "id": 12301966431,
      "node_id": "RTE_lADOABII585ZuGGUzwAAAALdQRxf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12301966431",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-30T23:41:07Z",
      "rename": {
        "from": "wallet: tx creation, don't select outputs from txes that are being replaced",
        "to": "[WIP] wallet: tx creation, don't select outputs from txes that are being replaced"
      }
    },
    {
      "event": "unlabeled",
      "id": 12302038158,
      "node_id": "UNLE_lADOABII585ZuGGUzwAAAALdQjSO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12302038158",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-31T00:31:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12302042874,
      "node_id": "LE_lADOABII585ZuGGUzwAAAALdQkb6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12302042874",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-31T00:35:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056348436",
      "pull_request_review_id": 1228977316,
      "id": 1056348436,
      "node_id": "PRRC_kwDOABII584-9pkU",
      "diff_hunk": "@@ -1134,20 +1143,34 @@ bool FundTransaction(CWallet& wallet, CMutableTransaction& tx, CAmount& nFeeRet,\n     }\n     wallet.chain().findCoins(coins);\n \n+    // Check if any input was already spent by another tx in the mempool\n+    bool is_replacement = false;\n     for (const CTxIn& txin : tx.vin) {\n         const auto& outPoint = txin.prevout;\n         if (wallet.IsMine(outPoint)) {\n             // The input was found in the wallet, so select as internal\n             coinControl.Select(outPoint);\n+            // Check if was spent\n+            bool in_mempool = false;\n+            if (wallet.IsSpent(outPoint, &in_mempool)) is_replacement = in_mempool;\n         } else if (coins[outPoint].out.IsNull()) {\n             error = _(\"Unable to find UTXO for external input\");\n             return false;\n         } else {\n             // The input was not in the wallet, but is in the UTXO set, so select as external\n             coinControl.SelectExternal(outPoint, coins[outPoint].out);\n+            // Check if was spent in any mempool tx\n+            if (!is_replacement) is_replacement = wallet.chain().isSpentInMempool(outPoint);\n         }\n     }\n \n+    // If this tx is a replacement, disallow unconfirmed UTXO selection by rising the\n+    // coin control min depth param. Ensuring that we don't add any new unconfirmed UTXOs\n+    // to replacement transactions (satisfying BIP125 rule 2).",
      "path": "src/wallet/spend.cpp",
      "position": 42,
      "original_position": 43,
      "commit_id": "34df3c790fa2b0cf2ee5064713d15ae9ed63eeb9",
      "original_commit_id": "d7e41b63cdb612946266ec570465824b3b81491a",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "please do not add new mentions of BIP125 that aren't signaling-related, see https://github.com/bitcoin/bitcoin/pull/25775",
      "created_at": "2022-12-23T13:36:38Z",
      "updated_at": "2022-12-23T13:46:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26732#discussion_r1056348436",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056348436"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26732"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1447,
      "original_line": 1447,
      "side": "RIGHT"
    }
  ]
}