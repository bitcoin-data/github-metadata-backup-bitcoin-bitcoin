{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436",
    "id": 1726268388,
    "node_id": "PR_kwDOABII585m5MPk",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29436",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29436.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29436.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
    "number": 29436,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "net: call `Select` with reachable networks in `ThreadOpenConnections`",
    "user": {
      "login": "brunoerg",
      "id": 19480819,
      "node_id": "MDQ6VXNlcjE5NDgwODE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brunoerg",
      "html_url": "https://github.com/brunoerg",
      "followers_url": "https://api.github.com/users/brunoerg/followers",
      "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
      "organizations_url": "https://api.github.com/users/brunoerg/orgs",
      "repos_url": "https://api.github.com/users/brunoerg/repos",
      "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/brunoerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR changes addrman's `Select` to support multiple networks and change `ThreadOpenConnections` to call it with reachable networks. It can avoid unnecessary `Select` calls and avoid exceeding the max number of tries (100), especially when turning a clearnet + Tor/I2P/CJDNS node to Tor/I2P/CJDNS. Compared to #29330, this approach is \"less aggresive\". It does not add a new init flag and does not impact address relay.\r\n\r\nI did an experiment of calling `Select` without passing a network until it finds an address from a network that compose 20% ~ 25% of the addrman (limited to 100 tries).\r\n\r\n![Screenshot 2024-02-14 at 14 37 58](https://github.com/bitcoin/bitcoin/assets/19480819/7b6863a5-d7a6-40b6-87d5-01667c2de66a)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n ",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-02-14T18:49:23Z",
    "updated_at": "2024-07-15T15:06:15Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "62ca4c6d957a905275f8beccee48bb8780778728",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "brunoerg:2024-02-addrman-select-networks",
      "ref": "2024-02-addrman-select-networks",
      "sha": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 267841305,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNjc4NDEzMDU=",
        "name": "bitcoin",
        "full_name": "brunoerg/bitcoin",
        "owner": {
          "login": "brunoerg",
          "id": 19480819,
          "node_id": "MDQ6VXNlcjE5NDgwODE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/brunoerg",
          "html_url": "https://github.com/brunoerg",
          "followers_url": "https://api.github.com/users/brunoerg/followers",
          "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
          "organizations_url": "https://api.github.com/users/brunoerg/orgs",
          "repos_url": "https://api.github.com/users/brunoerg/repos",
          "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/brunoerg/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/brunoerg/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/brunoerg/bitcoin",
        "archive_url": "https://api.github.com/repos/brunoerg/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/brunoerg/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/brunoerg/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/brunoerg/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/brunoerg/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/brunoerg/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/brunoerg/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/brunoerg/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/brunoerg/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/brunoerg/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/brunoerg/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/brunoerg/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/brunoerg/bitcoin/events",
        "forks_url": "https://api.github.com/repos/brunoerg/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/brunoerg/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/brunoerg/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/brunoerg/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/brunoerg/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/brunoerg/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/brunoerg/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/brunoerg/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/brunoerg/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/brunoerg/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/brunoerg/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/brunoerg/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/brunoerg/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/brunoerg/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/brunoerg/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/brunoerg/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:brunoerg/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/brunoerg/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/brunoerg/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/brunoerg/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/brunoerg/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/brunoerg/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/brunoerg/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/brunoerg/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/brunoerg/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/brunoerg/bitcoin/hooks",
        "svn_url": "https://github.com/brunoerg/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 246016,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-15T14:29:23Z",
        "created_at": "2020-05-29T11:30:10Z",
        "updated_at": "2024-07-15T15:20:41Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "262260ce1e919613ba60194a5861b0b0a51dfe01",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35644,
        "stargazers_count": 77208,
        "watchers_count": 77208,
        "size": 263055,
        "default_branch": "master",
        "open_issues_count": 680,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-15T15:53:02Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-07-15T15:01:40Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 73,
    "deletions": 43,
    "changed_files": 8,
    "commits": 3,
    "review_comments": 43,
    "comments": 15
  },
  "events": [
    {
      "event": "commented",
      "id": 1944404918,
      "node_id": "IC_kwDOABII585z5UO2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1944404918",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:49:26Z",
      "updated_at": "2024-07-15T13:58:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29436).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [naumenkogs](https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1953718864), [Empact](https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1904808402), [vasild](https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1919749261) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29043](https://github.com/bitcoin/bitcoin/pull/29043) (fuzz: make FuzzedDataProvider usage deterministic by martinus)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1944404918",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "labeled",
      "id": 11805735998,
      "node_id": "LE_lADOABII585_QSIJzwAAAAK_rTw-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805735998",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:49:28Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "commented",
      "id": 1944409727,
      "node_id": "IC_kwDOABII585z5VZ_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1944409727",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:39Z",
      "updated_at": "2024-02-14T18:52:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "cc: @vasild @naumenkogs @amitiuttarwar @mzumsande ",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1944409727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "mentioned",
      "id": 11805769797,
      "node_id": "MEE_lADOABII585_QSIJzwAAAAK_rcBF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769797",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:41Z"
    },
    {
      "event": "subscribed",
      "id": 11805769810,
      "node_id": "SE_lADOABII585_QSIJzwAAAAK_rcBS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769810",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:41Z"
    },
    {
      "event": "mentioned",
      "id": 11805769829,
      "node_id": "MEE_lADOABII585_QSIJzwAAAAK_rcBl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769829",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:41Z"
    },
    {
      "event": "subscribed",
      "id": 11805769840,
      "node_id": "SE_lADOABII585_QSIJzwAAAAK_rcBw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769840",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:42Z"
    },
    {
      "event": "mentioned",
      "id": 11805769856,
      "node_id": "MEE_lADOABII585_QSIJzwAAAAK_rcCA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769856",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:42Z"
    },
    {
      "event": "subscribed",
      "id": 11805769869,
      "node_id": "SE_lADOABII585_QSIJzwAAAAK_rcCN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769869",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:42Z"
    },
    {
      "event": "mentioned",
      "id": 11805769886,
      "node_id": "MEE_lADOABII585_QSIJzwAAAAK_rcCe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769886",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:42Z"
    },
    {
      "event": "subscribed",
      "id": 11805769896,
      "node_id": "SE_lADOABII585_QSIJzwAAAAK_rcCo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11805769896",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:52:42Z"
    },
    {
      "event": "reviewed",
      "id": 1881775768,
      "node_id": "PRR_kwDOABII585wKZ6Y",
      "url": null,
      "actor": null,
      "commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1881775768",
      "submitted_at": "2024-02-15T05:04:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1882354205,
      "node_id": "PRR_kwDOABII585wMnId",
      "url": null,
      "actor": null,
      "commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 2096aeabec288bd2852593f0c965a2a9d22ad0c8\r\n\r\nSome non-blockers below (feel free to ignore them) plus one `return` vs `continue` that probably needs to be addressed.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1882354205",
      "submitted_at": "2024-02-15T10:52:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11815651562,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAALARIjq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11815651562",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T13:41:31Z"
    },
    {
      "event": "commented",
      "id": 1946127103,
      "node_id": "IC_kwDOABII585z_4r_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946127103",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T13:45:46Z",
      "updated_at": "2024-02-15T13:45:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "Force-pushed addressing:\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490381331\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490757436\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490780583\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490807334\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490770478\r\n\r\nThanks @vasild and @amitiuttarwar for reviewing!\r\n",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1946127103",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "mentioned",
      "id": 11815702969,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALARVG5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11815702969",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T13:45:47Z"
    },
    {
      "event": "subscribed",
      "id": 11815702991,
      "node_id": "SE_lADOABII585_QSIJzwAAAALARVHP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11815702991",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T13:45:47Z"
    },
    {
      "event": "mentioned",
      "id": 11815703017,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALARVHp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11815703017",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T13:45:47Z"
    },
    {
      "event": "subscribed",
      "id": 11815703032,
      "node_id": "SE_lADOABII585_QSIJzwAAAALARVH4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11815703032",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T13:45:47Z"
    },
    {
      "event": "reviewed",
      "id": 1885261790,
      "node_id": "PRR_kwDOABII585wXs_e",
      "url": null,
      "actor": null,
      "commit_id": "7edb07ca800991f7c88d582b880a392efe17f31d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 7edb07ca800991f7c88d582b880a392efe17f31d\r\n\r\nAbout the graph in the OP: \"... until it finds an address from a network that compose 20% ...\". The chance of not getting the result after `N` tries is `(8/10)^N`. For example for `N=25` that is less than `0.004`. What is the explanation of having so many dots so high? Uneven distribution within addrman?\r\n",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1885261790",
      "submitted_at": "2024-02-16T14:17:16Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "commented",
      "id": 1949222350,
      "node_id": "IC_kwDOABII5850LsXO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1949222350",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-16T19:45:53Z",
      "updated_at": "2024-02-16T19:45:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "> About the graph in the OP: \"... until it finds an address from a network that compose 20% ...\". The chance of not getting the result after N tries is (8/10)^N. For example for N=25 that is less than 0.004. What is the explanation of having so many dots so high? Uneven distribution within addrman?\r\n\r\nThat was what I was expecting too. I'll investigate but yes I think it might be an uneven distribution. Btw, this is not deterministic.",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1949222350",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "reviewed",
      "id": 1887888527,
      "node_id": "PRR_kwDOABII585whuSP",
      "url": null,
      "actor": null,
      "commit_id": "7edb07ca800991f7c88d582b880a392efe17f31d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1887888527",
      "submitted_at": "2024-02-19T10:32:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "commented",
      "id": 1953718864,
      "node_id": "IC_kwDOABII5850c2JQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1953718864",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-20T08:39:29Z",
      "updated_at": "2024-02-20T08:39:29Z",
      "author_association": "MEMBER",
      "body": "ACK 7edb07ca800991f7c88d582b880a392efe17f31d",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1953718864",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "reviewed",
      "id": 1891096814,
      "node_id": "PRR_kwDOABII585wt9ju",
      "url": null,
      "actor": null,
      "commit_id": "7edb07ca800991f7c88d582b880a392efe17f31d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "I tried to test the performance impact on the \"normal\" case of an addrman that only has addrs for reachable nets:\r\nIf I change the `AddrManSelect` benchmark to use `addrman.Select(false, g_reachable_nets.All()); ` the performance goes down by a factor of ~5 for me (from `~160ns/op` to `~770 ns/op`). Do you see a similar effect? ",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1891096814",
      "submitted_at": "2024-02-20T17:48:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1891133220,
      "node_id": "PRR_kwDOABII585wuGck",
      "url": null,
      "actor": null,
      "commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1891133220",
      "submitted_at": "2024-02-20T18:07:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1893454940,
      "node_id": "PRR_kwDOABII585w29Rc",
      "url": null,
      "actor": null,
      "commit_id": "7edb07ca800991f7c88d582b880a392efe17f31d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1893454940",
      "submitted_at": "2024-02-21T15:02:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "commented",
      "id": 1959775549,
      "node_id": "IC_kwDOABII5850z809",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959775549",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-22T16:09:08Z",
      "updated_at": "2024-02-22T16:09:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "> the performance goes down by a factor of ~5 for me\r\n\r\nIf this is correct and can be reproduced by others, I think that something should be done about it. If this PR would increase performance for a  rare and transient case (right after the users switched their onlynet parameters) but decrease performance for each `Select()` call in the typical scenario (addrman has mostly addrs from reachable networks), the overall impact on performance of this PR would be clearly negative.\r\nOne possibility might be to track the percentage of non-reachable addrs while loading AddrMan (we can't get more unreachable addrs afterwards) and only execute the slower logic if that is larger than some threshold (for example, 50%).",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1959775549",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "commented",
      "id": 1959849246,
      "node_id": "IC_kwDOABII58500O0e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959849246",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-22T16:46:53Z",
      "updated_at": "2024-02-22T16:46:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "> If this is correct and can be reproduced by others, I think that something should be done about it. If this PR would increase performance for a rare and transient case (right after the users switched their onlynet parameters) but decrease performance for each Select() call in the typical scenario (addrman has mostly addrs from reachable networks), the overall impact on performance of this PR would be clearly negative.\r\nOne possibility might be to track the percentage of non-reachable addrs while loading AddrMan (we can't get more unreachable addrs afterwards) and only execute the slower logic if that is larger than some threshold (for example, 50%).\r\n\r\nI'm reproducing it to check it.",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1959849246",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11919504158,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAALGdTMe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919504158",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T10:57:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11919568731,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAALGdi9b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919568731",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:02:45Z"
    },
    {
      "event": "commented",
      "id": 1963866552,
      "node_id": "IC_kwDOABII5851Djm4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1963866552",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:02:51Z",
      "updated_at": "2024-02-26T11:02:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\nðŸš§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/21977629586</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1963866552",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "labeled",
      "id": 11919569691,
      "node_id": "LE_lADOABII585_QSIJzwAAAALGdjMb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919569691",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:02:51Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1963873765,
      "node_id": "IC_kwDOABII5851DlXl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1963873765",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:48Z",
      "updated_at": "2024-02-26T11:06:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "@mzumsande you're right! \r\n\r\nI checked the performance goes down when calling `Select` when addrman only has addrs for reachable nets. So, I changed the approach to call `Select` with networks only whether the number of addresses from reachable networks in the addrman is less than 50%. This should be enough to cover the cases where this is an issue.\r\n\r\nSo, when initializing `CConnman`, we check whether the number of addresses from reachable networks in the addrman is less than 50%, if so, we call `Select` passing the networks.\r\n\r\ncc: @vasild @naumenkogs (due previous ACK)",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1963873765",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "mentioned",
      "id": 11919618156,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALGdvBs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919618156",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:49Z"
    },
    {
      "event": "subscribed",
      "id": 11919618187,
      "node_id": "SE_lADOABII585_QSIJzwAAAALGdvCL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919618187",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:49Z"
    },
    {
      "event": "mentioned",
      "id": 11919618223,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALGdvCv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919618223",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:49Z"
    },
    {
      "event": "subscribed",
      "id": 11919618243,
      "node_id": "SE_lADOABII585_QSIJzwAAAALGdvDD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919618243",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:49Z"
    },
    {
      "event": "mentioned",
      "id": 11919618266,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALGdvDa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919618266",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:49Z"
    },
    {
      "event": "subscribed",
      "id": 11919618288,
      "node_id": "SE_lADOABII585_QSIJzwAAAALGdvDw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11919618288",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T11:06:49Z"
    },
    {
      "event": "unlabeled",
      "id": 11921338926,
      "node_id": "UNLE_lADOABII585_QSIJzwAAAALGkTIu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11921338926",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T13:18:57Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1902554269,
      "node_id": "PRR_kwDOABII585xZqyd",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1902554269",
      "submitted_at": "2024-02-27T05:31:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1902566839,
      "node_id": "PRR_kwDOABII585xZt23",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1902566839",
      "submitted_at": "2024-02-27T05:45:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1902572174,
      "node_id": "PRR_kwDOABII585xZvKO",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1902572174",
      "submitted_at": "2024-02-27T05:50:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1902578690,
      "node_id": "PRR_kwDOABII585xZwwC",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1902578690",
      "submitted_at": "2024-02-27T05:56:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1902590359,
      "node_id": "PRR_kwDOABII585xZzmX",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1902590359",
      "submitted_at": "2024-02-27T06:06:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1902627837,
      "node_id": "PRR_kwDOABII585xZ8v9",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1902627837",
      "submitted_at": "2024-02-27T06:32:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1903087340,
      "node_id": "PRR_kwDOABII585xbs7s",
      "url": null,
      "actor": null,
      "commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1903087340",
      "submitted_at": "2024-02-27T10:15:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11940765833,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAALHuaCJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11940765833",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T17:27:32Z"
    },
    {
      "event": "commented",
      "id": 1967260020,
      "node_id": "IC_kwDOABII5851QgF0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1967260020",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T17:31:06Z",
      "updated_at": "2024-02-27T17:31:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Force-pushed addressing:\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503982139\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503704858\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503683117\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503675942\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503672316\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503668606\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503659916\r\n\r\nI changed the approach to know verify new and tried table isolated, so if there is less than 50% of reachable addresses than we filter the selection (selecting from new table will consider data from new table only, for example).\r\n\r\nThanks, @empact and @naumenkogs.\r\n",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1967260020",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "mentioned",
      "id": 11940807927,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALHukT3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11940807927",
      "actor": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T17:31:08Z"
    },
    {
      "event": "subscribed",
      "id": 11940807954,
      "node_id": "SE_lADOABII585_QSIJzwAAAALHukUS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11940807954",
      "actor": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T17:31:08Z"
    },
    {
      "event": "mentioned",
      "id": 11940807972,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALHukUk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11940807972",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T17:31:08Z"
    },
    {
      "event": "subscribed",
      "id": 11940807995,
      "node_id": "SE_lADOABII585_QSIJzwAAAALHukU7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11940807995",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T17:31:08Z"
    },
    {
      "event": "reviewed",
      "id": 1904420269,
      "node_id": "PRR_kwDOABII585xgyWt",
      "url": null,
      "actor": null,
      "commit_id": "ef1cd394bbee37e3674a68378245f56dcba154d1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1904420269",
      "submitted_at": "2024-02-27T18:08:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11941430971,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAALHw8a7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11941430971",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T18:25:20Z"
    },
    {
      "event": "commented",
      "id": 1967349101,
      "node_id": "IC_kwDOABII5851Q11t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1967349101",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T18:25:50Z",
      "updated_at": "2024-02-27T18:25:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Force-pushed addressing https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504723525.",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1967349101",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "reviewed",
      "id": 1904808402,
      "node_id": "PRR_kwDOABII585xiRHS",
      "url": null,
      "actor": null,
      "commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK https://github.com/bitcoin/bitcoin/pull/29436/commits/b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1904808402",
      "submitted_at": "2024-02-27T21:07:54Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "review_requested",
      "id": 11943150619,
      "node_id": "RRE_lADOABII585_QSIJzwAAAALH3gQb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11943150619",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T21:07:59Z",
      "requested_reviewer": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 11943150731,
      "node_id": "RRE_lADOABII585_QSIJzwAAAALH3gSL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11943150731",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-27T21:07:59Z",
      "requested_reviewer": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1907816563,
      "node_id": "PRR_kwDOABII585xtvhz",
      "url": null,
      "actor": null,
      "commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1907816563",
      "submitted_at": "2024-02-29T02:32:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "reviewed",
      "id": 1913404137,
      "node_id": "PRR_kwDOABII585yDDrp",
      "url": null,
      "actor": null,
      "commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1913404137",
      "submitted_at": "2024-03-04T10:09:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "review_requested",
      "id": 11996511641,
      "node_id": "RRE_lADOABII585_QSIJzwAAAALLDD2Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11996511641",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-04T10:09:36Z",
      "requested_reviewer": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12010986808,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAALL6R04",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12010986808",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T09:36:49Z"
    },
    {
      "event": "commented",
      "id": 1978342064,
      "node_id": "IC_kwDOABII58516xqw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1978342064",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T09:42:36Z",
      "updated_at": "2024-03-05T09:42:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "Force-pushed simplifying the approach. I changed the last argument of Select() to be a `const` ref and now we just call `Select` with reachable networks since it does not significantly impact the performance (see https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1510609846).\r\n\r\nThanks @vasild for the benchmarking and review. ",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-1978342064",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "mentioned",
      "id": 12011072296,
      "node_id": "MEE_lADOABII585_QSIJzwAAAALL6mso",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12011072296",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T09:42:38Z"
    },
    {
      "event": "subscribed",
      "id": 12011072318,
      "node_id": "SE_lADOABII585_QSIJzwAAAALL6ms-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12011072318",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T09:42:38Z"
    },
    {
      "event": "reviewed",
      "id": 1919749261,
      "node_id": "PRR_kwDOABII585ybQyN",
      "url": null,
      "actor": null,
      "commit_id": "e66b32b2f49b71b37f48191afb761538a52e8f08",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK e66b32b2f49b71b37f48191afb761538a52e8f08",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1919749261",
      "submitted_at": "2024-03-06T13:21:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
    },
    {
      "event": "review_requested",
      "id": 12027868437,
      "node_id": "RRE_lADOABII585_QSIJzwAAAALM6rUV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12027868437",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-06T13:21:29Z",
      "requested_reviewer": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 2227149554,
      "node_id": "IC_kwDOABII586Ev5ry",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2227149554",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-14T00:30:36Z",
      "updated_at": "2024-07-14T00:30:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/22286694905</sub>\n\n<details><summary>Hints</summary>\n\nMake sure to run all tests locally, according to the documentation.\n\nThe failure may happen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-2227149554",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "labeled",
      "id": 13496715405,
      "node_id": "LE_lADOABII585_QSIJzwAAAAMkd4iN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13496715405",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-14T00:30:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM0ZDJjZjNjZTUzYTdjMjAzY2MzNmZjNWYxMzZlYWUyNjFiY2ZiZTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4d2cf3ce53a7c203cc36fc5f136eae261bcfbe4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c4d2cf3ce53a7c203cc36fc5f136eae261bcfbe4",
      "tree": {
        "sha": "d5f8e4f5f851df327a4a5f4608d64e7414bed38e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d5f8e4f5f851df327a4a5f4608d64e7414bed38e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/262260ce1e919613ba60194a5861b0b0a51dfe01",
          "sha": "262260ce1e919613ba60194a5861b0b0a51dfe01",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/262260ce1e919613ba60194a5861b0b0a51dfe01"
        }
      ],
      "message": "net: add `All()` in `ReachableNets`\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "brunoerg",
        "email": "brunoely.gc@gmail.com",
        "date": "2024-07-15T13:46:58Z"
      },
      "author": {
        "name": "brunoerg",
        "email": "brunoely.gc@gmail.com",
        "date": "2024-02-15T12:33:24Z"
      },
      "sha": "c4d2cf3ce53a7c203cc36fc5f136eae261bcfbe4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1YjhhNGZmMDI0ZjljNzdlNzk3ZjUwMDM3NjAxYjhiMThjYTllNDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5b8a4ff024f9c77e797f50037601b8b18ca9e49",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c5b8a4ff024f9c77e797f50037601b8b18ca9e49",
      "tree": {
        "sha": "ebfc7d55ca56a10f5c53803115214b8b31e4ce1e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ebfc7d55ca56a10f5c53803115214b8b31e4ce1e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4d2cf3ce53a7c203cc36fc5f136eae261bcfbe4",
          "sha": "c4d2cf3ce53a7c203cc36fc5f136eae261bcfbe4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c4d2cf3ce53a7c203cc36fc5f136eae261bcfbe4"
        }
      ],
      "message": "addrman: change `Select` to support multiple networks",
      "committer": {
        "name": "brunoerg",
        "email": "brunoely.gc@gmail.com",
        "date": "2024-07-15T13:58:13Z"
      },
      "author": {
        "name": "brunoerg",
        "email": "brunoely.gc@gmail.com",
        "date": "2024-02-12T21:10:33Z"
      },
      "sha": "c5b8a4ff024f9c77e797f50037601b8b18ca9e49"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY2N2E4Y2Y4MzY1MjI1ZmQ1YzdiYzJkZjA3NTM5YTMwZDUxOTZmZTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "tree": {
        "sha": "d3f7e774e461dcfd65c9ce3de8cfa99ee7dbec37",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3f7e774e461dcfd65c9ce3de8cfa99ee7dbec37"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5b8a4ff024f9c77e797f50037601b8b18ca9e49",
          "sha": "c5b8a4ff024f9c77e797f50037601b8b18ca9e49",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c5b8a4ff024f9c77e797f50037601b8b18ca9e49"
        }
      ],
      "message": "net: call `Select` with reachable networks in `ThreadOpenConnections`\n\nCalling `Select` with reachable networks can avoid unecessary\ncalls and avoid exceed the max number of tries.",
      "committer": {
        "name": "brunoerg",
        "email": "brunoely.gc@gmail.com",
        "date": "2024-07-15T13:58:17Z"
      },
      "author": {
        "name": "brunoerg",
        "email": "brunoely.gc@gmail.com",
        "date": "2024-02-13T13:40:00Z"
      },
      "sha": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13506084508,
      "node_id": "HRFPE_lADOABII585_QSIJzwAAAAMlBn6c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13506084508",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T13:58:37Z"
    },
    {
      "event": "commented",
      "id": 2228574679,
      "node_id": "IC_kwDOABII586E1VnX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2228574679",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T13:58:45Z",
      "updated_at": "2024-07-15T13:58:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-2228574679",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    },
    {
      "event": "commented",
      "id": 2228726277,
      "node_id": "IC_kwDOABII586E16oF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2228726277",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T15:06:14Z",
      "updated_at": "2024-07-15T15:06:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "CI failure is unrelated.",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#issuecomment-2228726277",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29436"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490381331",
      "pull_request_review_id": 1881775768,
      "id": 1490381331,
      "node_id": "PRRC_kwDOABII585Y1WoT",
      "diff_hunk": "@@ -154,12 +154,12 @@ class AddrMan\n      *                     an address from the new table or an empty pair. Passing `false` will return an\n      *                     empty pair or an address from either the new or tried table (it does not\n      *                     guarantee a tried entry).\n-     * @param[in] network  Select only addresses of this network (nullopt = all). Passing a network may\n+     * @param[in] networks Select only addresses of these networks (nullopt = all). Passing networks may\n      *                     slow down the search.\n      * @return    CAddress The record for the selected peer.\n      *            seconds  The last time we attempted to connect to that peer.\n      */\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<Network> network = std::nullopt) const;\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<std::vector<Network>> networks = std::nullopt) const;",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 11,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "instead of an optional of a vector, you could have the default value explicitly be all networks, or an empty vector be interpreted as all networks. probably the first one is clearer. ",
      "created_at": "2024-02-15T05:04:26Z",
      "updated_at": "2024-02-15T05:04:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490381331",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490381331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490757436",
      "pull_request_review_id": 1882354205,
      "id": 1490757436,
      "node_id": "PRRC_kwDOABII585Y2yc8",
      "diff_hunk": "@@ -717,13 +717,17 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n+    if (networks.has_value()) {\n+        new_count = 0;\n+        tried_count = 0;\n+        for (auto& network : *networks) {\n+            auto it = m_network_counts.find(network);\n+            if (it == m_network_counts.end()) return {};",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This should be `continue;`? If addrman has 0 addresses from some of the requested networks, it can still return an address from another requested network.\r\n\r\n```suggestion\r\n            if (it == m_network_counts.end()) {\r\n                continue;\r\n            }\r\n```",
      "created_at": "2024-02-15T10:11:26Z",
      "updated_at": "2024-02-15T10:52:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490757436",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490757436"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 725,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490766626",
      "pull_request_review_id": 1882354205,
      "id": 1490766626,
      "node_id": "PRRC_kwDOABII585Y20si",
      "diff_hunk": "@@ -756,9 +760,10 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n             position = (initial_position + i) % ADDRMAN_BUCKET_SIZE;\n             node_id = GetEntry(search_tried, bucket, position);\n             if (node_id != -1) {\n-                if (network.has_value()) {\n+                if (networks.has_value()) {\n                     const auto it{mapInfo.find(node_id)};\n-                    if (Assume(it != mapInfo.end()) && it->second.GetNetwork() == *network) break;\n+                    auto& nets = *networks;\n+                    if (Assume(it != mapInfo.end()) && std::find(nets.begin(), nets.end(), it->second.GetNetwork()) != nets.end()) break;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This code is correct, but is doing linear search in the list of networks. For values of up to 6 that is irrelevant, but if it is changed from `vector` to `unordered_set` then lookup is also shorter to write, in addition to being `O(1)`:\r\n\r\n```suggestion\r\n                    if (Assume(it != mapInfo.end()) && networks->contains(it->second.GetNetwork())) break;\r\n```",
      "created_at": "2024-02-15T10:18:41Z",
      "updated_at": "2024-02-15T10:52:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490766626",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490766626"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 765,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 766,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490770478",
      "pull_request_review_id": 1882354205,
      "id": 1490770478,
      "node_id": "PRRC_kwDOABII585Y21ou",
      "diff_hunk": "@@ -126,8 +126,10 @@ static void AddrManSelectByNetwork(benchmark::Bench& bench)\n \n     FillAddrMan(addrman);\n \n+    std::vector<Network> net_i2p = {NET_I2P};\n+\n     bench.run([&] {\n-        (void)addrman.Select(/*new_only=*/false, NET_I2P);\n+        (void)addrman.Select(/*new_only=*/false, net_i2p);",
      "path": "src/bench/addrman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This should work as well (untested):\r\n\r\n```cpp\r\n(void)addrman.Select(/*new_only=*/false, {NET_I2P});\r\n```\r\n\r\nSame in `src/test/addrman_tests.cpp`.",
      "created_at": "2024-02-15T10:21:32Z",
      "updated_at": "2024-02-15T10:52:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490770478",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490770478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 129,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 132,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490780583",
      "pull_request_review_id": 1882354205,
      "id": 1490780583,
      "node_id": "PRRC_kwDOABII585Y24Gn",
      "diff_hunk": "@@ -2672,14 +2680,17 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                     // a currently-connected peer.\n                     addrman.Good(addr);\n                     // Select a new table address for our feeler instead.\n-                    std::tie(addr, addr_last_try) = addrman.Select(true);\n+                    std::tie(addr, addr_last_try) = addrman.Select(true, networks);\n                 }\n             } else {\n                 // Not a feeler\n                 // If preferred_net has a value set, pick an extra outbound\n                 // peer from that network. The eviction logic in net_processing\n                 // ensures that a peer from another network will be evicted.\n-                std::tie(addr, addr_last_try) = addrman.Select(false, preferred_net);\n+                if (preferred_net.has_value()) {\n+                    networks = {*preferred_net};\n+                }\n+                std::tie(addr, addr_last_try) = addrman.Select(false, networks);",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This could be shorter (untested):\r\n\r\n```cpp\r\nstd::tie(addr, addr_last_try) = preferred_net.has_value()\r\n    ? addrman.Select(false, {*preferred_net})\r\n    : addrman.Select(false, g_reachable_nets.All());\r\n```",
      "created_at": "2024-02-15T10:29:15Z",
      "updated_at": "2024-02-15T10:52:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490780583",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490780583"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 2682,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490794321",
      "pull_request_review_id": 1882354205,
      "id": 1490794321,
      "node_id": "PRRC_kwDOABII585Y27dR",
      "diff_hunk": "@@ -275,7 +275,16 @@ FUZZ_TARGET(addrman, .init = initialize_addrman)\n         /*max_pct=*/fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, 4096),\n         network,\n         /*filtered=*/fuzzed_data_provider.ConsumeBool());\n-    (void)const_addr_man.Select(fuzzed_data_provider.ConsumeBool(), network);\n+\n+    auto all_networks = ALL_NETWORKS;\n+    FastRandomContext fast_random_context{ConsumeUInt256(fuzzed_data_provider)};\n+    Shuffle(all_networks.begin(), all_networks.end(), fast_random_context);\n+    std::vector<Network> nets;\n+    for (size_t i = 0; i < all_networks.size() && fuzzed_data_provider.ConsumeBool(); i++) {\n+        nets.push_back(all_networks[i]);\n+    }\n+    (void)const_addr_man.Select(fuzzed_data_provider.ConsumeBool(), nets);",
      "path": "src/test/fuzz/addrman.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This could end up passing an empty container (`vector` or `unordered_set` if you decide to change it). Maybe this:\r\n\r\n```cpp\r\nif (nets.empty()) {\r\n    (void)const_addr_man.Select(fuzzed_data_provider.ConsumeBool());\r\n} else {\r\n    (void)const_addr_man.Select(fuzzed_data_provider.ConsumeBool(), nets);\r\n}",
      "created_at": "2024-02-15T10:39:13Z",
      "updated_at": "2024-02-15T10:52:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490794321",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490794321"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 282,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490807334",
      "pull_request_review_id": 1882354205,
      "id": 1490807334,
      "node_id": "PRRC_kwDOABII585Y2-om",
      "diff_hunk": "@@ -2564,6 +2564,14 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         bool fFeeler = false;\n         std::optional<Network> preferred_net;\n \n+        std::vector<Network> networks;\n+        for (int i = 0; i != NET_MAX; i++) {\n+            Network net = static_cast<Network>(i);\n+            if (g_reachable_nets.Contains(net)) {\n+                networks.push_back(net);\n+            }\n+        }",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If you extend the `ReachableNets` class like this:\r\n\r\n```diff\r\n--- i/src/netbase.h\r\n+++ w/src/netbase.h\r\n@@ -102,12 +102,18 @@ public:\r\n     [[nodiscard]] bool Contains(const CNetAddr& addr) const EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\r\n     {   \r\n         AssertLockNotHeld(m_mutex);\r\n         return Contains(addr.GetNetwork());\r\n     }\r\n\r\n+    [[nodiscard]] std::unordered_set<Network> All() const EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\r\n+    {\r\n+        LOCK(m_mutex);\r\n+        return m_reachable;\r\n+    }\r\n+\r\n private:\r\n     mutable Mutex m_mutex;\r\n\r\n     std::unordered_set<Network> m_reachable GUARDED_BY(m_mutex){\r\n```\r\n\r\nThen you can pass directly `g_reachable_nets.All()` to `Select()` without an intermediate variable.",
      "created_at": "2024-02-15T10:46:54Z",
      "updated_at": "2024-02-15T10:52:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490807334",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490807334"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 2567,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2573,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490857252",
      "pull_request_review_id": 1882520607,
      "id": 1490857252,
      "node_id": "PRRC_kwDOABII585Y3K0k",
      "diff_hunk": "@@ -154,12 +154,12 @@ class AddrMan\n      *                     an address from the new table or an empty pair. Passing `false` will return an\n      *                     empty pair or an address from either the new or tried table (it does not\n      *                     guarantee a tried entry).\n-     * @param[in] network  Select only addresses of this network (nullopt = all). Passing a network may\n+     * @param[in] networks Select only addresses of these networks (nullopt = all). Passing networks may\n      *                     slow down the search.\n      * @return    CAddress The record for the selected peer.\n      *            seconds  The last time we attempted to connect to that peer.\n      */\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<Network> network = std::nullopt) const;\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<std::vector<Network>> networks = std::nullopt) const;",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 11,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490381331,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "With this PR all production code passes both arguments. No need anymore for defaults. This compiles:\r\n\r\n```diff\r\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<std::vector<Network>> networks = std::nullopt) const;\r\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only, std::vector<Network> networks) const;\r\n```\r\n\r\nSome tests use `Select()` and I adjusted them to do `Select(false, {})` just to check that the compilation will succeed. They can be adjusted to\r\n`Select(false, g_reachable_nets.All())`\r\nor\r\n`Select(false, {NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})`\r\nif you decide to drop the defaults.",
      "created_at": "2024-02-15T11:22:18Z",
      "updated_at": "2024-02-15T11:22:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490857252",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490857252"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 162,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490912711",
      "pull_request_review_id": 1882608433,
      "id": 1490912711,
      "node_id": "PRRC_kwDOABII585Y3YXH",
      "diff_hunk": "@@ -717,13 +717,17 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n+    if (networks.has_value()) {\n+        new_count = 0;\n+        tried_count = 0;\n+        for (auto& network : *networks) {\n+            auto it = m_network_counts.find(network);\n+            if (it == m_network_counts.end()) return {};",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490757436,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, nice catch. I'll address it.",
      "created_at": "2024-02-15T12:06:54Z",
      "updated_at": "2024-02-15T12:06:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490912711",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490912711"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 725,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490938595",
      "pull_request_review_id": 1882650103,
      "id": 1490938595,
      "node_id": "PRRC_kwDOABII585Y3erj",
      "diff_hunk": "@@ -126,8 +126,10 @@ static void AddrManSelectByNetwork(benchmark::Bench& bench)\n \n     FillAddrMan(addrman);\n \n+    std::vector<Network> net_i2p = {NET_I2P};\n+\n     bench.run([&] {\n-        (void)addrman.Select(/*new_only=*/false, NET_I2P);\n+        (void)addrman.Select(/*new_only=*/false, net_i2p);",
      "path": "src/bench/addrman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490770478,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It doesn't work with vector I guess. But since I'll change it to `unordered_set`, it will work.",
      "created_at": "2024-02-15T12:30:17Z",
      "updated_at": "2024-02-15T12:30:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1490938595",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490938595"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 129,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 132,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491007792",
      "pull_request_review_id": 1882761408,
      "id": 1491007792,
      "node_id": "PRRC_kwDOABII585Y3vkw",
      "diff_hunk": "@@ -275,7 +275,16 @@ FUZZ_TARGET(addrman, .init = initialize_addrman)\n         /*max_pct=*/fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, 4096),\n         network,\n         /*filtered=*/fuzzed_data_provider.ConsumeBool());\n-    (void)const_addr_man.Select(fuzzed_data_provider.ConsumeBool(), network);\n+\n+    auto all_networks = ALL_NETWORKS;\n+    FastRandomContext fast_random_context{ConsumeUInt256(fuzzed_data_provider)};\n+    Shuffle(all_networks.begin(), all_networks.end(), fast_random_context);\n+    std::vector<Network> nets;\n+    for (size_t i = 0; i < all_networks.size() && fuzzed_data_provider.ConsumeBool(); i++) {\n+        nets.push_back(all_networks[i]);\n+    }\n+    (void)const_addr_man.Select(fuzzed_data_provider.ConsumeBool(), nets);",
      "path": "src/test/fuzz/addrman.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490794321,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Empty container and nothing means the same, all networks.",
      "created_at": "2024-02-15T13:26:52Z",
      "updated_at": "2024-02-15T13:45:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1491007792",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491007792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 282,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 286,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491008021",
      "pull_request_review_id": 1882761728,
      "id": 1491008021,
      "node_id": "PRRC_kwDOABII585Y3voV",
      "diff_hunk": "@@ -2564,6 +2564,14 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         bool fFeeler = false;\n         std::optional<Network> preferred_net;\n \n+        std::vector<Network> networks;\n+        for (int i = 0; i != NET_MAX; i++) {\n+            Network net = static_cast<Network>(i);\n+            if (g_reachable_nets.Contains(net)) {\n+                networks.push_back(net);\n+            }\n+        }",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490807334,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice idea! I'll address it.",
      "created_at": "2024-02-15T13:27:02Z",
      "updated_at": "2024-02-15T13:27:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1491008021",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491008021"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 2567,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2573,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491008584",
      "pull_request_review_id": 1882762615,
      "id": 1491008584,
      "node_id": "PRRC_kwDOABII585Y3vxI",
      "diff_hunk": "@@ -756,9 +760,10 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n             position = (initial_position + i) % ADDRMAN_BUCKET_SIZE;\n             node_id = GetEntry(search_tried, bucket, position);\n             if (node_id != -1) {\n-                if (network.has_value()) {\n+                if (networks.has_value()) {\n                     const auto it{mapInfo.find(node_id)};\n-                    if (Assume(it != mapInfo.end()) && it->second.GetNetwork() == *network) break;\n+                    auto& nets = *networks;\n+                    if (Assume(it != mapInfo.end()) && std::find(nets.begin(), nets.end(), it->second.GetNetwork()) != nets.end()) break;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490766626,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice, I'll address it.",
      "created_at": "2024-02-15T13:27:28Z",
      "updated_at": "2024-02-15T13:27:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1491008584",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491008584"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 765,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 766,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492529744",
      "pull_request_review_id": 1885264596,
      "id": 1492529744,
      "node_id": "PRRC_kwDOABII585Y9jJQ",
      "diff_hunk": "@@ -126,8 +126,10 @@ static void AddrManSelectByNetwork(benchmark::Bench& bench)\n \n     FillAddrMan(addrman);\n \n+    std::vector<Network> net_i2p = {NET_I2P};\n+\n     bench.run([&] {\n-        (void)addrman.Select(/*new_only=*/false, NET_I2P);\n+        (void)addrman.Select(/*new_only=*/false, net_i2p);",
      "path": "src/bench/addrman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "2096aeabec288bd2852593f0c965a2a9d22ad0c8",
      "in_reply_to_id": 1490770478,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Does not matter now, but it should work with vector as well.",
      "created_at": "2024-02-16T14:18:45Z",
      "updated_at": "2024-02-16T14:18:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1492529744",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492529744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": 129,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 132,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494214557",
      "pull_request_review_id": 1887888527,
      "id": 1494214557,
      "node_id": "PRRC_kwDOABII585ZD-ed",
      "diff_hunk": "@@ -717,13 +717,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {\n+        new_count = 0;\n+        tried_count = 0;\n+        for (auto& network : networks) {\n+            auto it = m_network_counts.find(network);\n+            if (it == m_network_counts.end()) {\n+                continue;\n+            }\n+            auto counts = it->second;\n+            new_count += counts.n_new;",
      "path": "src/addrman.cpp",
      "position": 29,
      "original_position": 29,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "3f99f5a6e58fae4981228929045ed7be32463381\r\n\r\nMight be worth making this overflow-safe?",
      "created_at": "2024-02-19T09:02:54Z",
      "updated_at": "2024-02-19T10:32:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1494214557",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494214557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 731,
      "original_line": 731,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494332423",
      "pull_request_review_id": 1887888527,
      "id": 1494332423,
      "node_id": "PRRC_kwDOABII585ZEbQH",
      "diff_hunk": "@@ -717,13 +717,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {\n+        new_count = 0;\n+        tried_count = 0;\n+        for (auto& network : networks) {\n+            auto it = m_network_counts.find(network);\n+            if (it == m_network_counts.end()) {\n+                continue;\n+            }\n+            auto counts = it->second;\n+            new_count += counts.n_new;",
      "path": "src/addrman.cpp",
      "position": 29,
      "original_position": 29,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "in_reply_to_id": 1494214557,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Might as well fix `    if (new_count + tried_count == 0) return {};` above. While it seems like a bug in the existing code, it's really hard to trigger.... feeding addrman with that much garbage would be a failure probably before the size_t limit is hit :)",
      "created_at": "2024-02-19T10:25:14Z",
      "updated_at": "2024-02-19T10:32:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1494332423",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494332423"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 731,
      "original_line": 731,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494903447",
      "pull_request_review_id": 1888979988,
      "id": 1494903447,
      "node_id": "PRRC_kwDOABII585ZGmqX",
      "diff_hunk": "@@ -717,13 +717,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {\n+        new_count = 0;\n+        tried_count = 0;\n+        for (auto& network : networks) {\n+            auto it = m_network_counts.find(network);\n+            if (it == m_network_counts.end()) {\n+                continue;\n+            }\n+            auto counts = it->second;\n+            new_count += counts.n_new;",
      "path": "src/addrman.cpp",
      "position": 29,
      "original_position": 29,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "in_reply_to_id": 1494214557,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Might be worth making this overflow-safe?\r\n\r\nI don't know, I don't see a viable way of reaching that.\r\n\r\n> it's really hard to trigger.... feeding addrman with that much garbage would be a failure probably before the size_t limit is hit :)\r\n\r\nI believe that's impractical due to the limited size of addrman.\r\n",
      "created_at": "2024-02-19T18:10:34Z",
      "updated_at": "2024-02-19T18:10:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1494903447",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494903447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 731,
      "original_line": 731,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1495427464",
      "pull_request_review_id": 1889779417,
      "id": 1495427464,
      "node_id": "PRRC_kwDOABII585ZImmI",
      "diff_hunk": "@@ -717,13 +717,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {\n+        new_count = 0;\n+        tried_count = 0;\n+        for (auto& network : networks) {\n+            auto it = m_network_counts.find(network);\n+            if (it == m_network_counts.end()) {\n+                continue;\n+            }\n+            auto counts = it->second;\n+            new_count += counts.n_new;",
      "path": "src/addrman.cpp",
      "position": 29,
      "original_position": 29,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "in_reply_to_id": 1494214557,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": ">I believe that's impractical due to the limited size of addrman.\r\n\r\nRight, probably fine to keep it this way for both cases.",
      "created_at": "2024-02-20T08:38:55Z",
      "updated_at": "2024-02-20T08:38:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1495427464",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1495427464"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 731,
      "original_line": 731,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1496276836",
      "pull_request_review_id": 1891133220,
      "id": 1496276836,
      "node_id": "PRRC_kwDOABII585ZL19k",
      "diff_hunk": "@@ -154,12 +155,12 @@ class AddrMan\n      *                     an address from the new table or an empty pair. Passing `false` will return an\n      *                     empty pair or an address from either the new or tried table (it does not\n      *                     guarantee a tried entry).\n-     * @param[in] network  Select only addresses of this network (nullopt = all). Passing a network may\n+     * @param[in] networks Select only addresses of these networks (empty = all). Passing networks may\n      *                     slow down the search.\n      * @return    CAddress The record for the selected peer.\n      *            seconds  The last time we attempted to connect to that peer.\n      */\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<Network> network = std::nullopt) const;\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::unordered_set<Network> networks = {}) const;",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 19,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Looks like the case of empty networks is no longer used outside of tests after this PR. In that case, should we drop the default args and simplify the implementation?",
      "created_at": "2024-02-20T18:07:12Z",
      "updated_at": "2024-02-20T18:07:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1496276836",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1496276836"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1497744510",
      "pull_request_review_id": 1893454940,
      "id": 1497744510,
      "node_id": "PRRC_kwDOABII585ZRcR-",
      "diff_hunk": "@@ -275,7 +279,8 @@ BOOST_AUTO_TEST_CASE(addrman_select_special)\n     // since the only ipv4 address is on the new table, ensure that the new\n     // table gets selected even if new_only is false. if the table was being\n     // selected at random, this test will sporadically fail\n-    BOOST_CHECK(addrman->Select(/*new_only=*/false, NET_IPV4).first == addr1);\n+    std::unordered_set<Network> {NET_IPV4} = {NET_IPV4};",
      "path": "src/test/addrman_tests.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7edb07ca800991f7c88d582b880a392efe17f31d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What is this supposed to do? :/",
      "created_at": "2024-02-21T15:02:52Z",
      "updated_at": "2024-02-21T15:02:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1497744510",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1497744510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1499270150",
      "pull_request_review_id": 1895900755,
      "id": 1499270150,
      "node_id": "PRRC_kwDOABII585ZXQwG",
      "diff_hunk": "@@ -275,7 +279,8 @@ BOOST_AUTO_TEST_CASE(addrman_select_special)\n     // since the only ipv4 address is on the new table, ensure that the new\n     // table gets selected even if new_only is false. if the table was being\n     // selected at random, this test will sporadically fail\n-    BOOST_CHECK(addrman->Select(/*new_only=*/false, NET_IPV4).first == addr1);\n+    std::unordered_set<Network> {NET_IPV4} = {NET_IPV4};",
      "path": "src/test/addrman_tests.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7edb07ca800991f7c88d582b880a392efe17f31d",
      "in_reply_to_id": 1497744510,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Leftover from previous changes, thanks, I'll remove it.",
      "created_at": "2024-02-22T13:48:38Z",
      "updated_at": "2024-02-22T13:48:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1499270150",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1499270150"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1499286213",
      "pull_request_review_id": 1895926041,
      "id": 1499286213,
      "node_id": "PRRC_kwDOABII585ZXUrF",
      "diff_hunk": "@@ -154,12 +155,12 @@ class AddrMan\n      *                     an address from the new table or an empty pair. Passing `false` will return an\n      *                     empty pair or an address from either the new or tried table (it does not\n      *                     guarantee a tried entry).\n-     * @param[in] network  Select only addresses of this network (nullopt = all). Passing a network may\n+     * @param[in] networks Select only addresses of these networks (empty = all). Passing networks may\n      *                     slow down the search.\n      * @return    CAddress The record for the selected peer.\n      *            seconds  The last time we attempted to connect to that peer.\n      */\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::optional<Network> network = std::nullopt) const;\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::unordered_set<Network> networks = {}) const;",
      "path": "src/addrman.h",
      "position": null,
      "original_position": 19,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "3f99f5a6e58fae4981228929045ed7be32463381",
      "in_reply_to_id": 1496276836,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, sure! I'll address it.",
      "created_at": "2024-02-22T13:59:38Z",
      "updated_at": "2024-02-22T13:59:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1499286213",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1499286213"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503659916",
      "pull_request_review_id": 1902554269,
      "id": 1503659916,
      "node_id": "PRRC_kwDOABII585ZoAeM",
      "diff_hunk": "@@ -1016,6 +1021,35 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+bool AddrManImpl::HasFewReachableAddresses_(const std::unordered_set<Network>& networks)\n+{\n+    AssertLockHeld(cs);\n+\n+    if (m_network_counts.empty()) {\n+        return false;\n+    }\n+\n+    int total_size{0};\n+    int reachable_size{0};\n+\n+    for (const auto& item : m_network_counts) {\n+        const auto& net{item.first};\n+        const auto& count{item.second};\n+\n+        total_size += (count.n_new + count.n_tried);\n+\n+        if (networks.count(net)) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: [`contains`](https://en.cppreference.com/w/cpp/container/unordered_set/contains) is equivalent but more semantically correct here",
      "created_at": "2024-02-27T05:31:47Z",
      "updated_at": "2024-02-27T05:31:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503659916",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503659916"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1041,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503668606",
      "pull_request_review_id": 1902566839,
      "id": 1503668606,
      "node_id": "PRRC_kwDOABII585ZoCl-",
      "diff_hunk": "@@ -3285,6 +3288,12 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         scheduler.scheduleEvery([this] { ASMapHealthCheck(); }, ASMAP_HEALTH_CHECK_INTERVAL);\n     }\n \n+    auto reachable_nets{g_reachable_nets.All()};\n+    const bool has_few_addresses{addrman.HasFewReachableAddresses(reachable_nets)};\n+    if (has_few_addresses) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: could inline these",
      "created_at": "2024-02-27T05:45:09Z",
      "updated_at": "2024-02-27T05:45:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503668606",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503668606"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3293,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503672316",
      "pull_request_review_id": 1902572174,
      "id": 1503672316,
      "node_id": "PRRC_kwDOABII585ZoDf8",
      "diff_hunk": "@@ -1016,6 +1021,35 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+bool AddrManImpl::HasFewReachableAddresses_(const std::unordered_set<Network>& networks)\n+{\n+    AssertLockHeld(cs);\n+\n+    if (m_network_counts.empty()) {\n+        return false;\n+    }\n+\n+    int total_size{0};\n+    int reachable_size{0};\n+\n+    for (const auto& item : m_network_counts) {\n+        const auto& net{item.first};\n+        const auto& count{item.second};\n+\n+        total_size += (count.n_new + count.n_tried);\n+\n+        if (networks.count(net)) {\n+            reachable_size += (count.n_new + count.n_tried);\n+        }\n+    }\n+\n+    if (reachable_size < total_size / 2) {",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 73,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: could return this directly",
      "created_at": "2024-02-27T05:50:42Z",
      "updated_at": "2024-02-27T05:50:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503672316",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503672316"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1046,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503675942",
      "pull_request_review_id": 1902578690,
      "id": 1503675942,
      "node_id": "PRRC_kwDOABII585ZoEYm",
      "diff_hunk": "@@ -1396,6 +1396,9 @@ class CConnman\n     // P2P timeout in seconds\n     std::chrono::seconds m_peer_connect_timeout;\n \n+    // Reachable networks that have addresses in the addrman\n+    std::unordered_set<Network> networks_with_addrs;",
      "path": "src/net.h",
      "position": null,
      "original_position": 5,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should be [`m_networks_with_addrs`](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c)",
      "created_at": "2024-02-27T05:56:07Z",
      "updated_at": "2024-02-27T05:56:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503675942",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503675942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1400,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503683117",
      "pull_request_review_id": 1902590359,
      "id": 1503683117,
      "node_id": "PRRC_kwDOABII585ZoGIt",
      "diff_hunk": "@@ -712,7 +712,7 @@ void AddrManImpl::Attempt_(const CService& addr, bool fCountFailure, NodeSeconds\n     }\n }\n \n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::optional<Network> network) const\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::unordered_set<Network> networks) const",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`networks` could be a const reference throughout, no?",
      "created_at": "2024-02-27T06:06:02Z",
      "updated_at": "2024-02-27T06:06:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503683117",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503683117"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 715,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503704858",
      "pull_request_review_id": 1902627837,
      "id": 1503704858,
      "node_id": "PRRC_kwDOABII585ZoLca",
      "diff_hunk": "@@ -3285,6 +3288,12 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         scheduler.scheduleEvery([this] { ASMapHealthCheck(); }, ASMAP_HEALTH_CHECK_INTERVAL);\n     }\n \n+    auto reachable_nets{g_reachable_nets.All()};\n+    const bool has_few_addresses{addrman.HasFewReachableAddresses(reachable_nets)};\n+    if (has_few_addresses) {\n+        networks_with_addrs = reachable_nets;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "So, to be explicit, this uses `g_reachable_nets` if `reachable_size < total_size / 2` otherwise all nets. The switch is to avoid the cost of the filtering if the filtering doesn't much reduce the set size, yes?\r\n\r\nA comment to that effect might be helpful, as I had to puzzle out a bit why the value was set only in this case.",
      "created_at": "2024-02-27T06:32:14Z",
      "updated_at": "2024-02-27T06:33:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503704858",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503704858"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3294,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503979427",
      "pull_request_review_id": 1903087340,
      "id": 1503979427,
      "node_id": "PRRC_kwDOABII585ZpOej",
      "diff_hunk": "@@ -1016,6 +1016,35 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+bool AddrManImpl::HasFewReachableAddresses_(const std::unordered_set<Network>& networks)",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "44aba6cbff49c034703d79b86dc5995d6a7b6c1f",
      "in_reply_to_id": null,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "An outside node easily influences the outcome by feeding garbage, right? Then I'd suggest commenting along the following lines: \"Should not be used for anything critical since it's easily [...]\"",
      "created_at": "2024-02-27T10:13:01Z",
      "updated_at": "2024-02-27T10:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503979427",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503979427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503982139",
      "pull_request_review_id": 1903087340,
      "id": 1503982139,
      "node_id": "PRRC_kwDOABII585ZpPI7",
      "diff_hunk": "@@ -1016,6 +1016,35 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+bool AddrManImpl::HasFewReachableAddresses_(const std::unordered_set<Network>& networks)",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "44aba6cbff49c034703d79b86dc5995d6a7b6c1f",
      "in_reply_to_id": 1503979427,
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Another improvement could be differentiating new/tried here, since tried is harder to influence.",
      "created_at": "2024-02-27T10:14:45Z",
      "updated_at": "2024-02-27T10:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1503982139",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503982139"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504053273",
      "pull_request_review_id": 1903207043,
      "id": 1504053273,
      "node_id": "PRRC_kwDOABII585ZpggZ",
      "diff_hunk": "@@ -3285,6 +3288,12 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         scheduler.scheduleEvery([this] { ASMapHealthCheck(); }, ASMAP_HEALTH_CHECK_INTERVAL);\n     }\n \n+    auto reachable_nets{g_reachable_nets.All()};\n+    const bool has_few_addresses{addrman.HasFewReachableAddresses(reachable_nets)};\n+    if (has_few_addresses) {\n+        networks_with_addrs = reachable_nets;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": 1503704858,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> The switch is to avoid the cost of the filtering if the filtering doesn't much reduce the set size, yes?\r\n\r\nYes, I'll put a comment explaining that.",
      "created_at": "2024-02-27T11:07:47Z",
      "updated_at": "2024-02-27T11:07:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504053273",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504053273"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3294,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504084907",
      "pull_request_review_id": 1903258061,
      "id": 1504084907,
      "node_id": "PRRC_kwDOABII585ZpoOr",
      "diff_hunk": "@@ -1016,6 +1016,35 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+bool AddrManImpl::HasFewReachableAddresses_(const std::unordered_set<Network>& networks)",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "44aba6cbff49c034703d79b86dc5995d6a7b6c1f",
      "in_reply_to_id": 1503979427,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> An outside node easily influences the outcome by feeding garbage, right? \r\n\r\nI don't think so, since we're checking by network and we do not store addresses from unreachable networks.",
      "created_at": "2024-02-27T11:34:48Z",
      "updated_at": "2024-02-27T11:34:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504084907",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504084907"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504085425",
      "pull_request_review_id": 1903258973,
      "id": 1504085425,
      "node_id": "PRRC_kwDOABII585ZpoWx",
      "diff_hunk": "@@ -1016,6 +1016,35 @@ std::optional<AddressPosition> AddrManImpl::FindAddressEntry_(const CAddress& ad\n     }\n }\n \n+bool AddrManImpl::HasFewReachableAddresses_(const std::unordered_set<Network>& networks)",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "44aba6cbff49c034703d79b86dc5995d6a7b6c1f",
      "in_reply_to_id": 1503979427,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Another improvement could be differentiating new/tried here, since tried is harder to influence.\r\n\r\nSure! ",
      "created_at": "2024-02-27T11:35:19Z",
      "updated_at": "2024-02-27T11:35:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504085425",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504085425"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504125116",
      "pull_request_review_id": 1903326025,
      "id": 1504125116,
      "node_id": "PRRC_kwDOABII585ZpyC8",
      "diff_hunk": "@@ -712,7 +712,7 @@ void AddrManImpl::Attempt_(const CService& addr, bool fCountFailure, NodeSeconds\n     }\n }\n \n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::optional<Network> network) const\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::unordered_set<Network> networks) const",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "7b4b9535a7da91627eefc331b50d3b173af185fd",
      "in_reply_to_id": 1503683117,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I'll address it.",
      "created_at": "2024-02-27T12:09:59Z",
      "updated_at": "2024-02-27T12:09:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504125116",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504125116"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 715,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504723525",
      "pull_request_review_id": 1904420269,
      "id": 1504723525,
      "node_id": "PRRC_kwDOABII585ZsEJF",
      "diff_hunk": "@@ -1396,6 +1396,13 @@ class CConnman\n     // P2P timeout in seconds\n     std::chrono::seconds m_peer_connect_timeout;\n \n+    /**\n+     * Reachable networks that have addresses in the addrman (new, tried). It is filled when there\n+     * are few reachable addresses in addrman and used to filter the addrman's selection.\n+     * Otherwise, we avoid the cost of the filtering.\n+     */\n+    std::pair<std::unordered_set<Network>, std::unordered_set<Network>>  m_networks_with_addrs;",
      "path": "src/net.h",
      "position": null,
      "original_position": 9,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "ef1cd394bbee37e3674a68378245f56dcba154d1",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: IMO the code will be more self-documenting if you use 2 separate variables for new vs tried, rather than a pair here, because to make sense of the pair you have to refer back to the definition, while new vs tried in the variable name will be immediately apparent.\r\n\r\nCould still return a pair from `NetworksWithAddresses`, and unpack it for assignment.",
      "created_at": "2024-02-27T18:08:49Z",
      "updated_at": "2024-02-27T18:08:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504723525",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504723525"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1404,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504744682",
      "pull_request_review_id": 1904474929,
      "id": 1504744682,
      "node_id": "PRRC_kwDOABII585ZsJTq",
      "diff_hunk": "@@ -1396,6 +1396,13 @@ class CConnman\n     // P2P timeout in seconds\n     std::chrono::seconds m_peer_connect_timeout;\n \n+    /**\n+     * Reachable networks that have addresses in the addrman (new, tried). It is filled when there\n+     * are few reachable addresses in addrman and used to filter the addrman's selection.\n+     * Otherwise, we avoid the cost of the filtering.\n+     */\n+    std::pair<std::unordered_set<Network>, std::unordered_set<Network>>  m_networks_with_addrs;",
      "path": "src/net.h",
      "position": null,
      "original_position": 9,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "ef1cd394bbee37e3674a68378245f56dcba154d1",
      "in_reply_to_id": 1504723525,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sounds good, I'll address it.",
      "created_at": "2024-02-27T18:25:33Z",
      "updated_at": "2024-02-27T18:25:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1504744682",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1504744682"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1404,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506916729",
      "pull_request_review_id": 1907816563,
      "id": 1506916729,
      "node_id": "PRRC_kwDOABII585Z0bl5",
      "diff_hunk": "@@ -712,7 +712,7 @@ void AddrManImpl::Attempt_(const CService& addr, bool fCountFailure, NodeSeconds\n     }\n }\n \n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::optional<Network> network) const\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, const std::unordered_set<Network>& networks) const",
      "path": "src/addrman.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Having an `unordered_set` to choose a subset of 7 values from an enum seems a bit overkill. Doing:\r\n\r\n```c++\r\n    std::bitset<NET_MAX> network_bitset;\r\n    for (net : networks) { if (0 <= net && net < NET_MAX) network_bitset.set(net); }\r\n\r\n    ...\r\n\r\n    if (network_bitset.test(it->second.GetNetwork())) { /* this is one of the networks i wanted!! */ }\r\n```\r\n\r\nseems like it would be better. The `network_bitset` value could be set as part of initializing addrman, and the test should be fast enough to do it always, I think?",
      "created_at": "2024-02-29T02:26:02Z",
      "updated_at": "2024-02-29T02:32:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1506916729",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506916729"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 713,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507697656",
      "pull_request_review_id": 1909069268,
      "id": 1507697656,
      "node_id": "PRRC_kwDOABII585Z3aP4",
      "diff_hunk": "@@ -712,7 +712,7 @@ void AddrManImpl::Attempt_(const CService& addr, bool fCountFailure, NodeSeconds\n     }\n }\n \n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::optional<Network> network) const\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, const std::unordered_set<Network>& networks) const",
      "path": "src/addrman.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": 1506916729,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`unordered_set` is the most semantically sound container for this. It is also the most convenient and easy to use. For the same reasons we use `std::string` to store fixed strings or string literals. IMO a deviation from that with a more verbose alternative is justified only if it provides a noticeable performance improvement.",
      "created_at": "2024-02-29T14:41:40Z",
      "updated_at": "2024-02-29T14:41:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1507697656",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507697656"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 713,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510609846",
      "pull_request_review_id": 1913404137,
      "id": 1510609846,
      "node_id": "PRRC_kwDOABII585aChO2",
      "diff_hunk": "@@ -721,13 +721,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {",
      "path": "src/addrman.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I am trying to understand better the performance of this. Posting here to avoid cluttering the PR's main discussion thread.\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1891096814:\r\n> I tried to test the performance impact on the \"normal\" case of an addrman that only has addrs for reachable nets:\r\nIf I change the AddrManSelect benchmark to use addrman.Select(false, g_reachable_nets.All()); the performance goes down by a factor of ~5 for me\r\n\r\nOne thing to note here is that the benchmark fills addrman solely with IPv6 addresses. That's not representative. So I borrowed the `peers.dat` from my mainnet node and ran the tests below.\r\n\r\nAs a start I began from 7edb07ca80 (this PR before the performance related tweaks). My aim was to 1. confirm that there is indeed a performance issue and 2. to understand where exactly it comes from so it can be addressed in the best way. Then I compared with the PR and then I compared with the PR + a change to make the last argument of `Select()` const ref.\r\n\r\naddrman size:\r\n```\r\nIPV4: 49123\r\nIPV6: 11071\r\nONION:15096\r\nI2P:   1863\r\nCJDNS:    2\r\n```\r\n\r\nNumbers in ns/op (bigger number => slower).\r\n\r\n\\ | Baseline (master @ `7edb07ca80~3`) | PR (`7edb07ca80`) | PR (`7edb07ca80`) + const ref argument\r\n --- | ---: | ---: | ---:\r\nany (empty optional or empty map) | 130  | 140 <sup>A</sup> | 135\r\nIPV4 or {IPV4} | 190 | 320 | 200\r\nIPV6 or {IPV6} | 490 | 640 | 510\r\nONION or {ONION} | 1200 | 1370 | 1270\r\nI2P or {I2P} | 2500 | 2650 | 2550\r\nCJDNS or {CJDNS} | 1500000 | 1700000 | 1600000\r\n{IPV4, IPV6, ONION, I2P, CJDNS} | - | 550 <sup>B</sup> | 150 <sup>C</sup>\r\n\r\n<sup>A</sup> vs <sup>B</sup> is probably what @mzumsande observed in https://github.com/bitcoin/bitcoin/pull/29436#pullrequestreview-1891096814. But fixing the arg changes that to <sup>A</sup> vs <sup>C</sup>.\r\n\r\nBased on the above, I think that it is best to go back to `7edb07ca80` and only fix the `Select()` argument.\r\n\r\n<details>\r\n<summary>benchmark for Select() to read real peers.dat</summary>\r\n\r\n```diff\r\ndiff --git a/src/bench/addrman.cpp b/src/bench/addrman.cpp\r\nindex f044feebba..dd45b9e69b 100644\r\n--- a/src/bench/addrman.cpp\r\n+++ b/src/bench/addrman.cpp\r\n@@ -1,12 +1,15 @@\r\n // Copyright (c) 2020-2022 The Bitcoin Core developers\r\n // Distributed under the MIT software license, see the accompanying\r\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \r\n+#include <addrdb.h>\r\n #include <addrman.h>\r\n #include <bench/bench.h>\r\n+#include <chainparams.h>\r\n+#include <common/args.h>\r\n #include <netbase.h>\r\n #include <netgroup.h>\r\n #include <random.h>\r\n #include <util/check.h>\r\n #include <util/time.h>\r\n \r\n@@ -81,12 +84,37 @@ static void AddrManAdd(benchmark::Bench& bench)\r\n     bench.run([&] {\r\n         AddrMan addrman{EMPTY_NETGROUPMAN, /*deterministic=*/false, ADDRMAN_CONSISTENCY_CHECK_RATIO};\r\n         AddAddressesToAddrMan(addrman);\r\n     });\r\n }\r\n \r\n+static void AddrManSelectMain(benchmark::Bench& bench)\r\n+{\r\n+    SelectParams(ChainType::MAIN);\r\n+    gArgs.ForceSetArg(\"checkaddrman\", \"0\");\r\n+    gArgs.ForceSetArg(\"datadir\", \"/tmp\");\r\n+    auto result = LoadAddrman(EMPTY_NETGROUPMAN, gArgs);\r\n+    AddrMan& addrman = *(*result).get();\r\n+\r\n+    std::cout << \"addrman size:\\n\";\r\n+    std::cout << \"IPv4: \" << addrman.Size(NET_IPV4) << \"\\n\";\r\n+    std::cout << \"IPv6: \" << addrman.Size(NET_IPV6) << \"\\n\";\r\n+    std::cout << \"Tor:  \" << addrman.Size(NET_ONION) << \"\\n\";\r\n+    std::cout << \"I2P:  \" << addrman.Size(NET_I2P) << \"\\n\";\r\n+    std::cout << \"CJDNS:\" << addrman.Size(NET_CJDNS) << \"\\n\";\r\n+\r\n+    //const std::optional<Network> n{NET_CJDNS};\r\n+    //const std::unordered_set<Network> n{NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS};\r\n+    //const std::unordered_set<Network> n{};\r\n+    //const std::unordered_set<Network> n{g_reachable_nets.All()};\r\n+    bench.run([&] {\r\n+        const auto& address = addrman.Select(/*new_only=*/false, n);\r\n+        assert(address.first.IsValid());\r\n+    });\r\n+}\r\n+\r\n static void AddrManSelect(benchmark::Bench& bench)\r\n {\r\n     AddrMan addrman{EMPTY_NETGROUPMAN, /*deterministic=*/false, ADDRMAN_CONSISTENCY_CHECK_RATIO};\r\n \r\n     FillAddrMan(addrman);\r\n \r\n@@ -167,11 +195,12 @@ static void AddrManAddThenGood(benchmark::Bench& bench)\r\n \r\n         markSomeAsGood(addrman);\r\n     });\r\n }\r\n \r\n BENCHMARK(AddrManAdd, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(AddrManSelectMain, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManSelect, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManSelectFromAlmostEmpty, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManSelectByNetwork, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManGetAddr, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManAddThenGood, benchmark::PriorityLevel::HIGH);\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>Fix Select() argument</summary>\r\n\r\n```diff\r\ndiff --git i/src/addrman.cpp w/src/addrman.cpp\r\nindex 4e551e81c3..bde2d90ef2 100644\r\n--- i/src/addrman.cpp\r\n+++ w/src/addrman.cpp\r\n@@ -705,13 +705,13 @@ void AddrManImpl::Attempt_(const CService& addr, bool fCountFailure, NodeSeconds\r\n     if (fCountFailure && info.m_last_count_attempt < m_last_good) {\r\n         info.m_last_count_attempt = time;\r\n         info.nAttempts++;\r\n     }\r\n }\r\n \r\n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::unordered_set<Network> networks) const\r\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, const std::unordered_set<Network>& networks) const\r\n {\r\n     AssertLockHeld(cs);\r\n \r\n     if (vRandom.empty()) return {};\r\n \r\n     size_t new_count = nNew;\r\n@@ -1208,13 +1208,13 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::SelectTriedCollision()\r\n     Check();\r\n     auto ret = SelectTriedCollision_();\r\n     Check();\r\n     return ret;\r\n }\r\n \r\n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select(bool new_only, std::unordered_set<Network> networks) const\r\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select(bool new_only, const std::unordered_set<Network>& networks) const\r\n {\r\n     LOCK(cs);\r\n     Check();\r\n     auto addrRet = Select_(new_only, networks);\r\n     Check();\r\n     return addrRet;\r\n@@ -1315,13 +1315,13 @@ void AddrMan::ResolveCollisions()\r\n \r\n std::pair<CAddress, NodeSeconds> AddrMan::SelectTriedCollision()\r\n {\r\n     return m_impl->SelectTriedCollision();\r\n }\r\n \r\n-std::pair<CAddress, NodeSeconds> AddrMan::Select(bool new_only, std::unordered_set<Network> networks) const\r\n+std::pair<CAddress, NodeSeconds> AddrMan::Select(bool new_only, const std::unordered_set<Network>& networks) const\r\n {\r\n     return m_impl->Select(new_only, networks);\r\n }\r\n \r\n std::vector<CAddress> AddrMan::GetAddr(size_t max_addresses, size_t max_pct, std::optional<Network> network, const bool filtered) const\r\n {\r\ndiff --git i/src/addrman.h w/src/addrman.h\r\nindex 2d2846993a..b6fdb07f82 100644\r\n--- i/src/addrman.h\r\n+++ w/src/addrman.h\r\n@@ -157,13 +157,13 @@ public:\r\n      *                     guarantee a tried entry).\r\n      * @param[in] networks Select only addresses of these networks (empty = all). Passing networks may\r\n      *                     slow down the search.\r\n      * @return    CAddress The record for the selected peer.\r\n      *            seconds  The last time we attempted to connect to that peer.\r\n      */\r\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, std::unordered_set<Network> networks = {}) const;\r\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only = false, const std::unordered_set<Network>& networks = {}) const;\r\n \r\n     /**\r\n      * Return all or many randomly selected addresses, optionally by network.\r\n      *\r\n      * @param[in] max_addresses  Maximum number of addresses to return (0 = all).\r\n      * @param[in] max_pct        Maximum percentage of addresses to return (0 = all).\r\ndiff --git i/src/addrman_impl.h w/src/addrman_impl.h\r\nindex bb89213bb7..2a4596e81f 100644\r\n--- i/src/addrman_impl.h\r\n+++ w/src/addrman_impl.h\r\n@@ -123,13 +123,13 @@ public:\r\n         EXCLUSIVE_LOCKS_REQUIRED(!cs);\r\n \r\n     void ResolveCollisions() EXCLUSIVE_LOCKS_REQUIRED(!cs);\r\n \r\n     std::pair<CAddress, NodeSeconds> SelectTriedCollision() EXCLUSIVE_LOCKS_REQUIRED(!cs);\r\n \r\n-    std::pair<CAddress, NodeSeconds> Select(bool new_only, std::unordered_set<Network> networks) const\r\n+    std::pair<CAddress, NodeSeconds> Select(bool new_only, const std::unordered_set<Network>& networks) const\r\n         EXCLUSIVE_LOCKS_REQUIRED(!cs);\r\n \r\n     std::vector<CAddress> GetAddr(size_t max_addresses, size_t max_pct, std::optional<Network> network, const bool filtered = true) const\r\n         EXCLUSIVE_LOCKS_REQUIRED(!cs);\r\n \r\n     std::vector<std::pair<AddrInfo, AddressPosition>> GetEntries(bool from_tried) const\r\n@@ -250,13 +250,13 @@ private:\r\n     bool Good_(const CService& addr, bool test_before_evict, NodeSeconds time) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n \r\n     bool Add_(const std::vector<CAddress>& vAddr, const CNetAddr& source, std::chrono::seconds time_penalty) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n \r\n     void Attempt_(const CService& addr, bool fCountFailure, NodeSeconds time) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n \r\n-    std::pair<CAddress, NodeSeconds> Select_(bool new_only, std::unordered_set<Network> networks) const EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n+    std::pair<CAddress, NodeSeconds> Select_(bool new_only, const std::unordered_set<Network>& networks) const EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n \r\n     /** Helper to generalize looking up an addrman entry from either table.\r\n      *\r\n      *  @return  int The nid of the entry. If the addrman position is empty or not found, returns -1.\r\n      * */\r\n     int GetEntry(bool use_tried, size_t bucket, size_t position) const EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n```\r\n</details>",
      "created_at": "2024-03-04T05:36:32Z",
      "updated_at": "2024-03-04T10:09:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1510609846",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510609846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 722,
      "original_line": 722,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511064348",
      "pull_request_review_id": 1914158512,
      "id": 1511064348,
      "node_id": "PRRC_kwDOABII585aEQMc",
      "diff_hunk": "@@ -712,7 +712,7 @@ void AddrManImpl::Attempt_(const CService& addr, bool fCountFailure, NodeSeconds\n     }\n }\n \n-std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::optional<Network> network) const\n+std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, const std::unordered_set<Network>& networks) const",
      "path": "src/addrman.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": 1506916729,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'll leave as it for now, but free to change if other reviewers agree.",
      "created_at": "2024-03-04T12:13:42Z",
      "updated_at": "2024-03-04T12:13:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1511064348",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511064348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 713,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511246190",
      "pull_request_review_id": 1914449900,
      "id": 1511246190,
      "node_id": "PRRC_kwDOABII585aE8lu",
      "diff_hunk": "@@ -721,13 +721,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {",
      "path": "src/addrman.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": 1510609846,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks for it, @vasild ",
      "created_at": "2024-03-04T14:24:05Z",
      "updated_at": "2024-03-04T14:24:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1511246190",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511246190"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 722,
      "original_line": 722,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511246671",
      "pull_request_review_id": 1914450689,
      "id": 1511246671,
      "node_id": "PRRC_kwDOABII585aE8tP",
      "diff_hunk": "@@ -721,13 +721,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {",
      "path": "src/addrman.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": 1510609846,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "About:\r\n> I tried to test the performance impact on the \"normal\" case of an addrman that only has addrs for reachable nets:\r\nIf I change the AddrManSelect benchmark to use addrman.Select(false, g_reachable_nets.All());  the performance goes down by a factor of ~5 for me (from ~160ns/op to ~770 ns/op). Do you see a similar effect?\r\n\r\nIn fact, I just realized that the performance issue is related to `g_reachable_nets.All()`. With the following diff I realized the performance is not relevantly affected. cc: @mzumsande \r\n\r\n```diff\r\ndiff --git a/src/bench/addrman.cpp b/src/bench/addrman.cpp\r\nindex ee4070b07a..8760f134ca 100644\r\n--- a/src/bench/addrman.cpp\r\n+++ b/src/bench/addrman.cpp\r\n@@ -96,6 +96,31 @@ static void AddrManSelect(benchmark::Bench& bench)\r\n     });\r\n }\r\n \r\n+static void AddrManSelect1(benchmark::Bench& bench)\r\n+{\r\n+    AddrMan addrman{EMPTY_NETGROUPMAN, /*deterministic=*/false, ADDRMAN_CONSISTENCY_CHECK_RATIO};\r\n+\r\n+    FillAddrMan(addrman);\r\n+    const auto nets{g_reachable_nets.All()};\r\n+\r\n+    bench.run([&] {\r\n+        const auto& address = addrman.Select(false, nets);\r\n+        assert(address.first.GetPort() > 0);\r\n+    });\r\n+}\r\n+\r\n+static void AddrManSelect2(benchmark::Bench& bench)\r\n+{\r\n+    AddrMan addrman{EMPTY_NETGROUPMAN, /*deterministic=*/false, ADDRMAN_CONSISTENCY_CHECK_RATIO};\r\n+\r\n+    FillAddrMan(addrman);\r\n+\r\n+    bench.run([&] {\r\n+        const auto& address = addrman.Select(false, g_reachable_nets.All());\r\n+        assert(address.first.GetPort() > 0);\r\n+    });\r\n+}\r\n+\r\n // The worst case performance of the Select() function is when there is only\r\n // one address on the table, because it linearly searches every position of\r\n // several buckets before identifying the correct bucket\r\n@@ -171,6 +196,8 @@ static void AddrManAddThenGood(benchmark::Bench& bench)\r\n \r\n BENCHMARK(AddrManAdd, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManSelect, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(AddrManSelect1, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(AddrManSelect2, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManSelectFromAlmostEmpty, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManSelectByNetwork, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(AddrManGetAddr, benchmark::PriorityLevel::HIGH);\r\n```\r\n\r\n```\r\n|               84.73 |       11,801,666.44 |    5.2% |      0.01 | :wavy_dash: `AddrManSelect` (Unstable with ~11,349.7 iters. Increase `minEpochIterations` to e.g. 113497)\r\n|              110.53 |        9,047,580.50 |    3.0% |      0.01 | `AddrManSelect1`\r\n|              558.40 |        1,790,829.47 |    6.7% |      0.01 | :wavy_dash: `AddrManSelect2` (Unstable with ~1,690.3 iters. Increase `minEpochIterations` to e.g. 16903)\r\n```",
      "created_at": "2024-03-04T14:24:24Z",
      "updated_at": "2024-03-04T14:32:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1511246671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511246671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 722,
      "original_line": 722,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1512506563",
      "pull_request_review_id": 1916394513,
      "id": 1512506563,
      "node_id": "PRRC_kwDOABII585aJwTD",
      "diff_hunk": "@@ -721,13 +721,18 @@ std::pair<CAddress, NodeSeconds> AddrManImpl::Select_(bool new_only, std::option\n     size_t new_count = nNew;\n     size_t tried_count = nTried;\n \n-    if (network.has_value()) {\n-        auto it = m_network_counts.find(*network);\n-        if (it == m_network_counts.end()) return {};\n-\n-        auto counts = it->second;\n-        new_count = counts.n_new;\n-        tried_count = counts.n_tried;\n+    if (!networks.empty()) {",
      "path": "src/addrman.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "f67a8cf8365225fd5c7bc2df07539a30d5196fe2",
      "original_commit_id": "b85893ca02c9a7f872f2f0428e0f709a6d45906c",
      "in_reply_to_id": 1510609846,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Based on the above, I think that it is best to go back to 7edb07ca80 and only fix the Select() argument.\r\n\r\nSince it is simpler and does not impact the performance, I just addressed this suggestion. Thanks.",
      "created_at": "2024-03-05T09:43:19Z",
      "updated_at": "2024-03-05T09:43:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29436#discussion_r1512506563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1512506563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29436"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 722,
      "original_line": 722,
      "side": "RIGHT"
    }
  ]
}