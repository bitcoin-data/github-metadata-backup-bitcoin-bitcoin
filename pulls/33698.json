{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33698",
    "id": 2945067391,
    "node_id": "PR_kwDOABII586viil_",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33698",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33698.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33698.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33698/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33698/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/66667d6512294fd5dd02161b7c68c19af0865865",
    "number": 33698,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: Use same rpc timeout for authproxy and cli",
    "user": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "It seems odd to use different timeouts (and timeout factors) depending on whether the Python RPC proxy is used, or the bitcoin rpc command line interface.\r\n\r\nFix it by using the same timeout.\r\n\r\nThis can be tested by introducing a timeout error and checking it happens with and without `--usecli` after the exact same time.\r\n\r\nExample timeout error:\r\n\r\n```diff\r\ndiff --git a/test/functional/mining_template_verification.py b/test/functional/mining_template_verification.py\r\nindex de0833c596..e0f93a2b1e 100755\r\n--- a/test/functional/mining_template_verification.py\r\n+++ b/test/functional/mining_template_verification.py\r\n@@ -173,7 +173,7 @@ class MiningTemplateVerificationTest(BitcoinTestFramework):\r\n \r\n         self.log.info(\"Submitting this block should succeed\")\r\n         assert_equal(node.submitblock(block.serialize().hex()), None)\r\n-        node.waitforblockheight(2)\r\n+        node.waitforblockheight(200000)\r\n \r\n     def transaction_test(self, node, block_0_height, tx):\r\n         self.log.info(\"make block template with a transaction\")\r\n```\r\n\r\nExample cmd: `./bld-cmake/test/functional/mining_template_verification.py --timeout-factor=0.1 --usecli`.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-10-24T14:58:39Z",
    "updated_at": "2025-10-28T09:38:14Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "847e7367820dcdc8fd6513edbdbeb7b87dbc5f64",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "maflcko:2510-test-cli-timeout-same",
      "ref": "2510-test-cli-timeout-same",
      "sha": "66667d6512294fd5dd02161b7c68c19af0865865",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "bitcoin-core",
        "full_name": "maflcko/bitcoin-core",
        "owner": {
          "login": "maflcko",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/maflcko",
          "html_url": "https://github.com/maflcko",
          "followers_url": "https://api.github.com/users/maflcko/followers",
          "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
          "organizations_url": "https://api.github.com/users/maflcko/orgs",
          "repos_url": "https://api.github.com/users/maflcko/repos",
          "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/maflcko/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/maflcko/bitcoin-core",
        "fork": true,
        "url": "https://api.github.com/repos/maflcko/bitcoin-core",
        "archive_url": "https://api.github.com/repos/maflcko/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/maflcko/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/maflcko/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/maflcko/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/maflcko/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/maflcko/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/maflcko/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/maflcko/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/maflcko/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/maflcko/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/maflcko/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/maflcko/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/maflcko/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/maflcko/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/maflcko/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/maflcko/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/maflcko/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/maflcko/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/maflcko/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/maflcko/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/maflcko/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/maflcko/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:maflcko/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/maflcko/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/maflcko/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/maflcko/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/maflcko/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/maflcko/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/maflcko/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/maflcko/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/maflcko/bitcoin-core/hooks",
        "svn_url": "https://github.com/maflcko/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 25,
        "watchers_count": 25,
        "size": 261802,
        "default_branch": "master",
        "open_issues_count": 15,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-25T11:26:22Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2025-08-07T03:03:35Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f6ba97cea1d36683fa8c1ebde78af3772d00ec12",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38122,
        "stargazers_count": 86480,
        "watchers_count": 86480,
        "size": 295356,
        "default_branch": "master",
        "open_issues_count": 734,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-27T20:57:12Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-10-28T08:13:06Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33698"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 14,
    "deletions": 6,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 0,
    "comments": 5
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY2NjY3ZDY1MTIyOTRmZDVkZDAyMTYxYjdjNjhjMTlhZjA4NjU4NjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66667d6512294fd5dd02161b7c68c19af0865865",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/66667d6512294fd5dd02161b7c68c19af0865865",
      "tree": {
        "sha": "8d6988d86370eba14f7081ca725540db3b58e7f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8d6988d86370eba14f7081ca725540db3b58e7f2"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 8d6988d86370eba14f7081ca725540db3b58e7f2\nparent f6ba97cea1d36683fa8c1ebde78af3772d00ec12\nauthor MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1761316835 +0200\ncommitter MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz> 1761317709 +0200\n\ntest: Use same rpc timeout for authproxy and cli\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgqxY/aMPiuXoCFn6iAEyAhvUqFX\njanTudd31Jtt35ct0AAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQPYpzhDooc2qJ5U+vG9lepo5YSnL6ZlpU5yRj5Llrxr3B4jKUOJBNq+GdSmySqkte/\nfmDv9U1CKGK96lq30QsQ0=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f6ba97cea1d36683fa8c1ebde78af3772d00ec12",
          "sha": "f6ba97cea1d36683fa8c1ebde78af3772d00ec12",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f6ba97cea1d36683fa8c1ebde78af3772d00ec12"
        }
      ],
      "message": "test: Use same rpc timeout for authproxy and cli",
      "committer": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-10-24T14:55:09Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "*~=`'#}+{/-|&$^_@721217.xyz",
        "date": "2025-10-24T14:40:35Z"
      },
      "sha": "66667d6512294fd5dd02161b7c68c19af0865865"
    },
    {
      "event": "labeled",
      "id": 20486530023,
      "node_id": "LE_lADOABII587TlwYgzwAAAATFF6Pn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20486530023",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-24T14:58:42Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 3443612282,
      "node_id": "IC_kwDOABII587NQVp6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3443612282",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-24T14:58:44Z",
      "updated_at": "2025-10-27T15:54:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33698.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/33698#pullrequestreview-3384258159) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33698#issuecomment-3443612282",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698"
    },
    {
      "event": "commented",
      "id": 3445282493,
      "node_id": "IC_kwDOABII587NWta9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3445282493",
      "actor": {
        "login": "Sammie05",
        "id": 123121190,
        "node_id": "U_kgDOB1auJg",
        "avatar_url": "https://avatars.githubusercontent.com/u/123121190?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sammie05",
        "html_url": "https://github.com/Sammie05",
        "followers_url": "https://api.github.com/users/Sammie05/followers",
        "following_url": "https://api.github.com/users/Sammie05/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sammie05/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sammie05/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sammie05/subscriptions",
        "organizations_url": "https://api.github.com/users/Sammie05/orgs",
        "repos_url": "https://api.github.com/users/Sammie05/repos",
        "events_url": "https://api.github.com/users/Sammie05/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sammie05/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T00:04:46Z",
      "updated_at": "2025-10-25T00:04:46Z",
      "author_association": "NONE",
      "body": "Tested PR #33698\r\nI went through the new changes, built the code, ran the specific test p2p_headers_sync_with_minchainwork.py --timeout-factor=0.2 in both RPC and CLI modes and everything looks good . but why did we decide on half the timeout for CLI instead of using the same value? ",
      "user": {
        "login": "Sammie05",
        "id": 123121190,
        "node_id": "U_kgDOB1auJg",
        "avatar_url": "https://avatars.githubusercontent.com/u/123121190?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sammie05",
        "html_url": "https://github.com/Sammie05",
        "followers_url": "https://api.github.com/users/Sammie05/followers",
        "following_url": "https://api.github.com/users/Sammie05/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sammie05/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sammie05/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sammie05/subscriptions",
        "organizations_url": "https://api.github.com/users/Sammie05/orgs",
        "repos_url": "https://api.github.com/users/Sammie05/repos",
        "events_url": "https://api.github.com/users/Sammie05/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sammie05/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33698#issuecomment-3445282493",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698"
    },
    {
      "event": "commented",
      "id": 3446639814,
      "node_id": "IC_kwDOABII587Nb4zG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3446639814",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T12:22:04Z",
      "updated_at": "2025-10-25T12:22:04Z",
      "author_association": "MEMBER",
      "body": "> I went through the new changes, built the code, ran the specific test p2p_headers_sync_with_minchainwork.py --timeout-factor=0.2 in both RPC and CLI modes and everything looks good .\r\n\r\nIt shouldn't look \"good\". They should both timeout with the same timeout value.\r\n\r\n> but why did we decide on half the timeout for CLI instead of using the same value?\r\n\r\nThe goal of this pull is to use the exact same value, which is also what it does.\r\n\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33698#issuecomment-3446639814",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698"
    },
    {
      "event": "reviewed",
      "id": 3384258159,
      "node_id": "PRR_kwDOABII587Jt65v",
      "url": null,
      "actor": null,
      "commit_id": "66667d6512294fd5dd02161b7c68c19af0865865",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-27T15:54:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 66667d6512294fd5dd02161b7c68c19af0865865\r\n\r\n-----\r\n\r\n> This can be tested by introducing a timeout error and checking it happens with and without --usecli after the exact same time.\r\n\r\nI tested it with the provided timeout error example and worked as expected. With this PR, timeout is quite the same with and without --use-cli. With master, they're very different and I ended up by interrupting the run after some long seconds without `--usecli` just in case.\r\n\r\n\r\nThis PR:\r\n\r\n```sh\r\ntime ./build/test/functional/mining_template_verification.py --timeout-factor=0.1 --usecli\r\n2025-10-27T15:11:19.771212Z TestFramework (INFO): PRNG seed is: 5723465082132348369\r\n2025-10-27T15:11:19.771681Z TestFramework (INFO): Initializing test directory /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_pozrxv5c\r\n2025-10-27T15:11:20.123898Z TestFramework (INFO): Valid block\r\n2025-10-27T15:11:20.128439Z TestFramework (INFO): Bad input hash for coinbase transaction\r\n2025-10-27T15:11:20.137980Z TestFramework (INFO): Block with no transactions\r\n2025-10-27T15:11:20.147410Z TestFramework (INFO): Truncated final transaction\r\n2025-10-27T15:11:20.153225Z TestFramework (INFO): Duplicate transaction\r\n2025-10-27T15:11:20.162608Z TestFramework (INFO): Transaction that spends from thin air\r\n2025-10-27T15:11:20.171805Z TestFramework (INFO): Non-final transaction\r\n2025-10-27T15:11:20.181233Z TestFramework (INFO): Bad tx count\r\n2025-10-27T15:11:20.185630Z TestFramework (INFO): Extremely high nBits\r\n2025-10-27T15:11:20.194551Z TestFramework (INFO): Lowering nBits should make the block invalid\r\n2025-10-27T15:11:20.204060Z TestFramework (INFO): Bad merkle root\r\n2025-10-27T15:11:20.213258Z TestFramework (INFO): Bad timestamps\r\n2025-10-27T15:11:20.234411Z TestFramework (INFO): Block must build on the current tip\r\n2025-10-27T15:11:20.243550Z TestFramework (INFO): Generate a block\r\n2025-10-27T15:11:20.243745Z TestFramework (INFO): A block template doesn't need PoW\r\n2025-10-27T15:11:20.248469Z TestFramework (INFO): Add proof of work\r\n2025-10-27T15:11:20.252985Z TestFramework (INFO): getblocktemplate call in previous tests did not submit the block\r\n2025-10-27T15:11:20.257838Z TestFramework (INFO): Submitting this block should succeed\r\n2025-10-27T15:11:23.268741Z TestFramework (ERROR): Called Process failed with stdout='error: timeout on transient error: Could not connect to the server 127.0.0.1:18531 (error code 0 - \"timeout reached\")\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\nUse \"bitcoin-cli -help\" for more info.\r\n'; stderr='None';\r\nTraceback (most recent call last):\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_framework.py\", line 142, in main\r\n    self.run_test()\r\n    ~~~~~~~~~~~~~^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 312, in run_test\r\n    self.submit_test(node, block_0_height, block_2)\r\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 198, in submit_test\r\n    node.waitforblockheight(200000)\r\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_node.py\", line 907, in __call__\r\n    return self.cli.send_cli(self.command, *args, **kwargs)\r\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_node.py\", line 992, in send_cli\r\n    raise subprocess.CalledProcessError(returncode, p_args, output=cli_stderr)\r\nsubprocess.CalledProcessError: Command '['/Users/brunogarcia/projects/bitcoin-core-dev/build/bin/bitcoin-cli', '-nonamed', '-datadir=/var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_pozrxv5c/node0', '-rpcclienttimeout=3', 'waitforblockheight', '200000']' returned non-zero exit status 1.\r\n...\r\n./build/test/functional/mining_template_verification.py --timeout-factor=0.1   0.27s user 0.18s system 11% cpu 3.966 total\r\n```\r\n\r\n```sh\r\nâžœ  bitcoin-core-dev git:(33698) âœ— time ./build/test/functional/mining_template_verification.py --timeout-factor=0.1\r\n2025-10-27T15:12:02.776857Z TestFramework (INFO): PRNG seed is: 5466641224519577849\r\n2025-10-27T15:12:02.777325Z TestFramework (INFO): Initializing test directory /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_8hof5ivk\r\n2025-10-27T15:12:03.068521Z TestFramework (INFO): Valid block\r\n2025-10-27T15:12:03.069022Z TestFramework (INFO): Bad input hash for coinbase transaction\r\n2025-10-27T15:12:03.069738Z TestFramework (INFO): Block with no transactions\r\n2025-10-27T15:12:03.070405Z TestFramework (INFO): Truncated final transaction\r\n2025-10-27T15:12:03.071279Z TestFramework (INFO): Duplicate transaction\r\n2025-10-27T15:12:03.071856Z TestFramework (INFO): Transaction that spends from thin air\r\n2025-10-27T15:12:03.072801Z TestFramework (INFO): Non-final transaction\r\n2025-10-27T15:12:03.073370Z TestFramework (INFO): Bad tx count\r\n2025-10-27T15:12:03.073657Z TestFramework (INFO): Extremely high nBits\r\n2025-10-27T15:12:03.074199Z TestFramework (INFO): Lowering nBits should make the block invalid\r\n2025-10-27T15:12:03.074730Z TestFramework (INFO): Bad merkle root\r\n2025-10-27T15:12:03.075252Z TestFramework (INFO): Bad timestamps\r\n2025-10-27T15:12:03.076494Z TestFramework (INFO): Block must build on the current tip\r\n2025-10-27T15:12:03.077043Z TestFramework (INFO): Generate a block\r\n2025-10-27T15:12:03.077104Z TestFramework (INFO): A block template doesn't need PoW\r\n2025-10-27T15:12:03.077403Z TestFramework (INFO): Add proof of work\r\n2025-10-27T15:12:03.077684Z TestFramework (INFO): getblocktemplate call in previous tests did not submit the block\r\n2025-10-27T15:12:03.077887Z TestFramework (INFO): Submitting this block should succeed\r\n2025-10-27T15:12:06.080008Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 174, in _get_response\r\n    http_response = self.__conn.getresponse()\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py\", line 1430, in getresponse\r\n    response.begin()\r\n    ~~~~~~~~~~~~~~^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py\", line 331, in begin\r\n    version, status, reason = self._read_status()\r\n                              ~~~~~~~~~~~~~~~~~^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py\", line 292, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py\", line 719, in readinto\r\n    return self._sock.recv_into(b)\r\n           ~~~~~~~~~~~~~~~~~~~~^^^\r\nTimeoutError: timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_framework.py\", line 142, in main\r\n    self.run_test()\r\n    ~~~~~~~~~~~~~^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 312, in run_test\r\n    self.submit_test(node, block_0_height, block_2)\r\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 198, in submit_test\r\n    node.waitforblockheight(200000)\r\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 137, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 111, in _request\r\n    return self._get_response()\r\n           ~~~~~~~~~~~~~~~~~~^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 176, in _get_response\r\n    raise JSONRPCException({\r\n    ...<4 lines>...\r\n                                          self.__conn.timeout)})\r\ntest_framework.authproxy.JSONRPCException: 'waitforblockheight' RPC took longer than 3.000000 seconds. Consider using larger timeout for calls that take longer to return. (-344)\r\n2025-10-27T15:12:06.145763Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2025-10-27T15:12:06.145917Z TestFramework (WARNING): Not cleaning up dir /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_8hof5ivk\r\n2025-10-27T15:12:06.145966Z TestFramework (ERROR): Test failed. Test logging available at /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_8hof5ivk/test_framework.log\r\n2025-10-27T15:12:06.146096Z TestFramework (ERROR):\r\n2025-10-27T15:12:06.146248Z TestFramework (ERROR): Hint: Call /Users/brunogarcia/projects/bitcoin-core-dev/test/functional/combine_logs.py '/var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_8hof5ivk' to consolidate all logs\r\n2025-10-27T15:12:06.146294Z TestFramework (ERROR):\r\n2025-10-27T15:12:06.146334Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2025-10-27T15:12:06.146399Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2025-10-27T15:12:06.146433Z TestFramework (ERROR):\r\n[node 0] Cleaning up leftover process\r\n./build/test/functional/mining_template_verification.py --timeout-factor=0.1  0.22s user 0.07s system 7% cpu 3.756 total\r\n```\r\n\r\nmaster:\r\n\r\nI've interrupted after some time:\r\n ```sh\r\nâžœ  bitcoin-core-dev git:(master) âœ— time ./build/test/functional/mining_template_verification.py --timeout-factor=0.1 --usecli\r\n2025-10-27T15:22:32.880207Z TestFramework (INFO): PRNG seed is: 1092200578974713961\r\n2025-10-27T15:22:32.880732Z TestFramework (INFO): Initializing test directory /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_e_yi4rfx\r\n2025-10-27T15:22:33.230171Z TestFramework (INFO): Valid block\r\n2025-10-27T15:22:33.234641Z TestFramework (INFO): Bad input hash for coinbase transaction\r\n2025-10-27T15:22:33.243711Z TestFramework (INFO): Block with no transactions\r\n2025-10-27T15:22:33.252973Z TestFramework (INFO): Truncated final transaction\r\n2025-10-27T15:22:33.258165Z TestFramework (INFO): Duplicate transaction\r\n2025-10-27T15:22:33.267783Z TestFramework (INFO): Transaction that spends from thin air\r\n2025-10-27T15:22:33.277660Z TestFramework (INFO): Non-final transaction\r\n2025-10-27T15:22:33.286685Z TestFramework (INFO): Bad tx count\r\n2025-10-27T15:22:33.291488Z TestFramework (INFO): Extremely high nBits\r\n2025-10-27T15:22:33.300580Z TestFramework (INFO): Lowering nBits should make the block invalid\r\n2025-10-27T15:22:33.310047Z TestFramework (INFO): Bad merkle root\r\n2025-10-27T15:22:33.319441Z TestFramework (INFO): Bad timestamps\r\n2025-10-27T15:22:33.338122Z TestFramework (INFO): Block must build on the current tip\r\n2025-10-27T15:22:33.347130Z TestFramework (INFO): Generate a block\r\n2025-10-27T15:22:33.347295Z TestFramework (INFO): A block template doesn't need PoW\r\n2025-10-27T15:22:33.351339Z TestFramework (INFO): Add proof of work\r\n2025-10-27T15:22:33.355839Z TestFramework (INFO): getblocktemplate call in previous tests did not submit the block\r\n2025-10-27T15:22:33.360846Z TestFramework (INFO): Submitting this block should succeed\r\n^C2025-10-27T15:29:47.689592Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_framework.py\", line 142, in main\r\n    self.run_test()\r\n    ~~~~~~~~~~~~~^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 312, in run_test\r\n    self.submit_test(node, block_0_height, block_2)\r\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 198, in submit_test\r\n    node.waitforblockheight(200000)\r\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_node.py\", line 903, in __call__\r\n    return self.cli.send_cli(self.command, *args, **kwargs)\r\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_node.py\", line 976, in send_cli\r\n    cli_stdout, cli_stderr = process.communicate(input=stdin_data)\r\n                             ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/subprocess.py\", line 1221, in communicate\r\n    stdout, stderr = self._communicate(input, endtime, timeout)\r\n                     ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/subprocess.py\", line 2130, in _communicate\r\n    ready = selector.select(timeout)\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/selectors.py\", line 398, in select\r\n    fd_event_list = self._selector.poll(timeout)\r\nKeyboardInterrupt\r\n2025-10-27T15:29:47.751786Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2025-10-27T15:29:47.751941Z TestFramework (WARNING): Not cleaning up dir /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_e_yi4rfx\r\n2025-10-27T15:29:47.751983Z TestFramework (ERROR): Test failed. Test logging available at /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_e_yi4rfx/test_framework.log\r\n2025-10-27T15:29:47.752100Z TestFramework (ERROR):\r\n2025-10-27T15:29:47.752208Z TestFramework (ERROR): Hint: Call /Users/brunogarcia/projects/bitcoin-core-dev/test/functional/combine_logs.py '/var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_e_yi4rfx' to consolidate all logs\r\n2025-10-27T15:29:47.752233Z TestFramework (ERROR):\r\n2025-10-27T15:29:47.752261Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2025-10-27T15:29:47.752332Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2025-10-27T15:29:47.752358Z TestFramework (ERROR):\r\n[node 0] Cleaning up leftover process\r\n./build/test/functional/mining_template_verification.py --timeout-factor=0.1   0.55s user 0.42s system 0% cpu 7:15.28 total\r\n```\r\n\r\n```sh\r\nâžœ  bitcoin-core-dev git:(master) âœ— time ./build/test/functional/mining_template_verification.py --timeout-factor=0.1\r\n2025-10-27T15:21:42.197156Z TestFramework (INFO): PRNG seed is: 270036072508533590\r\n2025-10-27T15:21:42.197649Z TestFramework (INFO): Initializing test directory /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_ecyhnza6\r\n2025-10-27T15:21:42.499371Z TestFramework (INFO): Valid block\r\n2025-10-27T15:21:42.499752Z TestFramework (INFO): Bad input hash for coinbase transaction\r\n2025-10-27T15:21:42.500380Z TestFramework (INFO): Block with no transactions\r\n2025-10-27T15:21:42.500912Z TestFramework (INFO): Truncated final transaction\r\n2025-10-27T15:21:42.502666Z TestFramework (INFO): Duplicate transaction\r\n2025-10-27T15:21:42.503447Z TestFramework (INFO): Transaction that spends from thin air\r\n2025-10-27T15:21:42.504407Z TestFramework (INFO): Non-final transaction\r\n2025-10-27T15:21:42.504941Z TestFramework (INFO): Bad tx count\r\n2025-10-27T15:21:42.505222Z TestFramework (INFO): Extremely high nBits\r\n2025-10-27T15:21:42.505694Z TestFramework (INFO): Lowering nBits should make the block invalid\r\n2025-10-27T15:21:42.506203Z TestFramework (INFO): Bad merkle root\r\n2025-10-27T15:21:42.506635Z TestFramework (INFO): Bad timestamps\r\n2025-10-27T15:21:42.507951Z TestFramework (INFO): Block must build on the current tip\r\n2025-10-27T15:21:42.508765Z TestFramework (INFO): Generate a block\r\n2025-10-27T15:21:42.508838Z TestFramework (INFO): A block template doesn't need PoW\r\n2025-10-27T15:21:42.509287Z TestFramework (INFO): Add proof of work\r\n2025-10-27T15:21:42.509694Z TestFramework (INFO): getblocktemplate call in previous tests did not submit the block\r\n2025-10-27T15:21:42.510011Z TestFramework (INFO): Submitting this block should succeed\r\n2025-10-27T15:21:45.511799Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 174, in _get_response\r\n    http_response = self.__conn.getresponse()\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py\", line 1430, in getresponse\r\n    response.begin()\r\n    ~~~~~~~~~~~~~~^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py\", line 331, in begin\r\n    version, status, reason = self._read_status()\r\n                              ~~~~~~~~~~~~~~~~~^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/http/client.py\", line 292, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\r\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py\", line 719, in readinto\r\n    return self._sock.recv_into(b)\r\n           ~~~~~~~~~~~~~~~~~~~~^^^\r\nTimeoutError: timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_framework.py\", line 142, in main\r\n    self.run_test()\r\n    ~~~~~~~~~~~~~^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 312, in run_test\r\n    self.submit_test(node, block_0_height, block_2)\r\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build/test/functional/mining_template_verification.py\", line 198, in submit_test\r\n    node.waitforblockheight(200000)\r\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 137, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 111, in _request\r\n    return self._get_response()\r\n           ~~~~~~~~~~~~~~~~~~^^\r\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/authproxy.py\", line 176, in _get_response\r\n    raise JSONRPCException({\r\n    ...<4 lines>...\r\n                                          self.__conn.timeout)})\r\ntest_framework.authproxy.JSONRPCException: 'waitforblockheight' RPC took longer than 3.000000 seconds. Consider using larger timeout for calls that take longer to return. (-344)\r\n2025-10-27T15:21:45.567977Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2025-10-27T15:21:45.568097Z TestFramework (WARNING): Not cleaning up dir /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_ecyhnza6\r\n2025-10-27T15:21:45.568132Z TestFramework (ERROR): Test failed. Test logging available at /var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_ecyhnza6/test_framework.log\r\n2025-10-27T15:21:45.568213Z TestFramework (ERROR):\r\n2025-10-27T15:21:45.568320Z TestFramework (ERROR): Hint: Call /Users/brunogarcia/projects/bitcoin-core-dev/test/functional/combine_logs.py '/var/folders/7j/m0yjzmhj4ys9jgl353v2mqph0000gq/T/bitcoin_func_test_ecyhnza6' to consolidate all logs\r\n2025-10-27T15:21:45.568347Z TestFramework (ERROR):\r\n2025-10-27T15:21:45.568370Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2025-10-27T15:21:45.568419Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2025-10-27T15:21:45.568443Z TestFramework (ERROR):\r\n[node 0] Cleaning up leftover process\r\n./build/test/functional/mining_template_verification.py --timeout-factor=0.1  0.21s user 0.08s system 7% cpu 3.793 total\r\n```",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33698#pullrequestreview-3384258159",
      "submitted_at": "2025-10-27T15:54:29Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33698"
    },
    {
      "event": "commented",
      "id": 3455330037,
      "node_id": "IC_kwDOABII587N9Cb1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3455330037",
      "actor": {
        "login": "Sammie05",
        "id": 123121190,
        "node_id": "U_kgDOB1auJg",
        "avatar_url": "https://avatars.githubusercontent.com/u/123121190?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sammie05",
        "html_url": "https://github.com/Sammie05",
        "followers_url": "https://api.github.com/users/Sammie05/followers",
        "following_url": "https://api.github.com/users/Sammie05/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sammie05/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sammie05/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sammie05/subscriptions",
        "organizations_url": "https://api.github.com/users/Sammie05/orgs",
        "repos_url": "https://api.github.com/users/Sammie05/repos",
        "events_url": "https://api.github.com/users/Sammie05/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sammie05/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-28T09:08:09Z",
      "updated_at": "2025-10-28T09:09:31Z",
      "author_association": "NONE",
      "body": "> > I went through the new changes, built the code, ran the specific test p2p_headers_sync_with_minchainwork.py --timeout-factor=0.2 in both RPC and CLI modes and everything looks good .\r\n> \r\n> It shouldn't look \"good\". They should both timeout with the same timeout value.\r\n> \r\n> > but why did we decide on half the timeout for CLI instead of using the same value?\r\n> \r\n> The goal of this pull is to use the exact same value, which is also what it does.\r\n\r\n\r\n\r\n> > I went through the new changes, built the code, ran the specific test p2p_headers_sync_with_minchainwork.py --timeout-factor=0.2 in both RPC and CLI modes and everything looks good .\r\n> \r\n> It shouldn't look \"good\". They should both timeout with the same timeout value.\r\n> \r\n> > but why did we decide on half the timeout for CLI instead of using the same value?\r\n> \r\n> The goal of this pull is to use the exact same value, which is also what it does.\r\n\r\nThanks for clarifying! I understand  the goal now.\r\n\r\nBut looking at the code\r\n\r\nself.cli = TestNodeCLI(\r\n    binaries,\r\n    self.datadir_path,\r\n    self.rpc_timeout // 2\r\n)\r\n\r\nDoesn't the // 2 division mean CLI is actually getting half the RPC timeout instead of the same value?",
      "user": {
        "login": "Sammie05",
        "id": 123121190,
        "node_id": "U_kgDOB1auJg",
        "avatar_url": "https://avatars.githubusercontent.com/u/123121190?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sammie05",
        "html_url": "https://github.com/Sammie05",
        "followers_url": "https://api.github.com/users/Sammie05/followers",
        "following_url": "https://api.github.com/users/Sammie05/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sammie05/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sammie05/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sammie05/subscriptions",
        "organizations_url": "https://api.github.com/users/Sammie05/orgs",
        "repos_url": "https://api.github.com/users/Sammie05/repos",
        "events_url": "https://api.github.com/users/Sammie05/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sammie05/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33698#issuecomment-3455330037",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698"
    },
    {
      "event": "commented",
      "id": 3455485696,
      "node_id": "IC_kwDOABII587N9ocA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3455485696",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-28T09:38:14Z",
      "updated_at": "2025-10-28T09:38:14Z",
      "author_association": "MEMBER",
      "body": "> Doesn't the // 2 division mean CLI is actually getting half the RPC timeout instead of the same value?\r\n\r\nIt is explained in the trailing comment, which refers to https://github.com/bitcoin/bitcoin/blob/66667d6512294fd5dd02161b7c68c19af0865865/test/functional/test_framework/test_node.py#L322\r\n\r\nIf you have a question about a line of code, it is better to leave the question on the line of code, instead of in the general pull request thread.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33698#issuecomment-3455485696",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33698"
    }
  ],
  "comments": []
}