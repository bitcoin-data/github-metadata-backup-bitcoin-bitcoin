{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465",
    "id": 3228775708,
    "node_id": "PR_kwDOABII587AczUc",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34465",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34465.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34465.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
    "number": 34465,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: separate log generation from log handling",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This is a mostly move-only change. It's a small refactoring that allows logging macros to be used by including a simple `util/log.h` header instead of the full `logging.h` logging implementation.\r\n\r\nOriginal motivation for this change was to reduce the size and complexity of #34374 (kernel structured logging PR) and reduce the number of conflicts it causes with other PRs. But this should also make sense as a standalone change to have a clearer separation of concerns between log generation and log handling, and avoid needing to depend on the whole logging framework in call sites that only emit log messages.\r\n\r\nRecommended to review with `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2026-01-30T17:59:41Z",
    "updated_at": "2026-02-03T22:04:39Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "9db9c40f4201ed62d38a051962a005740c42b4d8",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ryanofsky:pr/mlog",
      "ref": "pr/mlog",
      "sha": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 13,
        "stargazers_count": 18,
        "watchers_count": 18,
        "size": 305831,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-03T21:35:11Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2025-10-26T17:47:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8799eb74406ec11f480a7cb51dd6b768440be3c7",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38848,
        "stargazers_count": 87911,
        "watchers_count": 87911,
        "size": 303044,
        "default_branch": "master",
        "open_issues_count": 746,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-03T20:09:05Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-03T22:23:59Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 233,
    "deletions": 164,
    "changed_files": 37,
    "commits": 6,
    "review_comments": 57,
    "comments": 3
  },
  "events": [
    {
      "event": "labeled",
      "id": 22414115475,
      "node_id": "LE_lADOABII587nEu9bzwAAAAU3_EKT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22414115475",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T17:59:45Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 3824962571,
      "node_id": "IC_kwDOABII587j_EwL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3824962571",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T18:00:26Z",
      "updated_at": "2026-02-03T13:20:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3744346374), [l0rinc](https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3745199978) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34448](https://github.com/bitcoin/bitcoin/pull/34448) (ci, iwyu: Fix warnings in `src/util` and treat them as errors by hebasto)\n* [#34435](https://github.com/bitcoin/bitcoin/pull/34435) (refactor: use `_MiB`/`_GiB` consistently for byte conversions by l0rinc)\n* [#34038](https://github.com/bitcoin/bitcoin/pull/34038) (logging: API improvements by ajtowns)\n* [#30343](https://github.com/bitcoin/bitcoin/pull/30343) (wallet, logging: Replace WalletLogPrintf() with LogInfo() by ryanofsky)\n* [#29256](https://github.com/bitcoin/bitcoin/pull/29256) (log, refactor: Allow log macros to accept context arguments by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#issuecomment-3824962571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465"
    },
    {
      "event": "reviewed",
      "id": 3732071588,
      "node_id": "PRR_kwDOABII587ecuSk",
      "url": null,
      "actor": null,
      "commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T09:08:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\n\ncode review f5b1dda3bda6327eef270d28bf961624feaae44f",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732071588",
      "submitted_at": "2026-01-31T09:08:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22429061407,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU44FEf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22429061407",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "created_at": "2026-01-31T14:06:55Z"
    },
    {
      "event": "reviewed",
      "id": 3732674393,
      "node_id": "PRR_kwDOABII587efBdZ",
      "url": null,
      "actor": null,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T14:20:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review!\n\nUpdated f5b1dda3bda6327eef270d28bf961624feaae44f -> 9569400e51aa04dbbb99f4ee9162bdacafa0a818 ([`pr/mlog.1`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.1) -> [`pr/mlog.2`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.1..pr/mlog.2))<!-- end --> with suggested changes",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732674393",
      "submitted_at": "2026-01-31T14:20:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3732819111,
      "node_id": "PRR_kwDOABII587efkyn",
      "url": null,
      "actor": null,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T15:20:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the quick update, went over it in more detail.\nThe moves are all correct, I only have a few concerns about the last commit.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732819111",
      "submitted_at": "2026-01-31T15:20:18Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22433487144,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU5I9ko",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433487144",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "created_at": "2026-01-31T20:59:08Z"
    },
    {
      "event": "reviewed",
      "id": 3733461323,
      "node_id": "PRR_kwDOABII587eiBlL",
      "url": null,
      "actor": null,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T21:08:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Appreciate the thorough review. I definitely rushed the last commit and missed some things. Addressed your comments below and made some simplifications.\n\nUpdated 9569400e51aa04dbbb99f4ee9162bdacafa0a818 -> 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d ([`pr/mlog.2`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.2) -> [`pr/mlog.3`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.2..pr/mlog.3))<!-- end --> fixing unintended change in behavior in last commit when DisableLogging() is used, cleaning up leftover LogAcceptCategory call, and dropping timestamp / thread name references the logging header that would make more sense in the followup PR.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3733461323",
      "submitted_at": "2026-01-31T21:08:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3733564211,
      "node_id": "PRR_kwDOABII587eiasz",
      "url": null,
      "actor": null,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T22:08:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "This seems mostly correct to me now, please see my remaining comments.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3733564211",
      "submitted_at": "2026-01-31T22:08:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3729796924,
      "node_id": "PRR_kwDOABII587eUC88",
      "url": null,
      "actor": null,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-02T14:31:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d\n\nI think it makes sense to cherry-pick d425d8dd0342e1879f5d6ad20cb01a3f43232150 here. It reduces unnecessary includes and probably helps avoid future merge conflicts, and can be cherry-picked with minimal changes.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3729796924",
      "submitted_at": "2026-02-02T14:31:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22472557495,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU7eAO3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22472557495",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c497eb216150c9f258fb134d38449fda8e270e2e",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/c497eb216150c9f258fb134d38449fda8e270e2e",
      "created_at": "2026-02-02T17:09:39Z"
    },
    {
      "event": "commented",
      "id": 3836570542,
      "node_id": "IC_kwDOABII587krWuu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3836570542",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-02T17:14:58Z",
      "updated_at": "2026-02-02T18:21:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the reviews!\n\n<!-- begin push-4 -->\nUpdated 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d -> c497eb216150c9f258fb134d38449fda8e270e2e ([`pr/mlog.3`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.3) -> [`pr/mlog.4`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.3..pr/mlog.4))<!-- end --> dropping unneeded `SourceLocation` moves as suggested, and cherry-picking change from https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3729796924 to update includes after the earlier changes. Also rewrote commit message 04c7dd5a1a4171bbfda078ff80a289f17f94d1ba to be clearer about how it is trying to not change behavior.\n<!-- begin push-5 -->\nUpdated c497eb216150c9f258fb134d38449fda8e270e2e -> 698a05427ed3bdd8255840ce963d7c8d6e7c3e92 ([`pr/mlog.4`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.4) -> [`pr/mlog.5`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.4..pr/mlog.5))<!-- end --> due to conflict with #34462\n<!-- begin push-6 -->\nRebased 698a05427ed3bdd8255840ce963d7c8d6e7c3e92 -> 03c929e10a4b3db22cc2a90da4ed69191bd8b771 ([`pr/mlog.5`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.5) -> [`pr/mlog.6`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.6), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.5-rebase..pr/mlog.6))<!-- end --> due to conflict with #33878\n<!-- begin push-7 -->\nUpdated 03c929e10a4b3db22cc2a90da4ed69191bd8b771 -> 24a1cd6b833df06da77eb0bcb0059a0999ce4fc5 ([`pr/mlog.6`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.6) -> [`pr/mlog.7`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.6..pr/mlog.7))<!-- end --> to fix IWYU errors https://github.com/bitcoin/bitcoin/actions/runs/21601163622/job/62247641249?pr=34465",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#issuecomment-3836570542",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY1MjMzZjdlOTgyN2Y4ZGQyMzQxNGM3ZmNmNDkyOTg0MjBmOWZjNDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5233f7e9827f8dd23414c7fcf49298420f9fc42",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f5233f7e9827f8dd23414c7fcf49298420f9fc42",
      "tree": {
        "sha": "68222989452af7e14a50f8c6c17c9c604e8ba76e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/68222989452af7e14a50f8c6c17c9c604e8ba76e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8799eb74406ec11f480a7cb51dd6b768440be3c7",
          "sha": "8799eb74406ec11f480a7cb51dd6b768440be3c7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8799eb74406ec11f480a7cb51dd6b768440be3c7"
        }
      ],
      "message": "move-only: Move SourceLocation to util/log.h\n\nIntroduce util/log.h as a lightweight header for code that only needs to emit\nlog messages. Move SourceLocation into this header so log-emitting code no\nlonger needs to include logging.h and depend on the full log management API.\n\nThis is a move-only change and the first change of several changes that\nseparate log generation from log handling. It also applies clang-format\nsuggestions to the moved code.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-02-02T17:22:31Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2025-12-16T15:37:21Z"
      },
      "sha": "f5233f7e9827f8dd23414c7fcf49298420f9fc42"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU2ZDExM2NhYjAzNDdhNzY4ZGFhYmNjZGZkNzY1ODNlNmIyNzJkYzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56d113cab0347a768daabccdfd76583e6b272dc4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/56d113cab0347a768daabccdfd76583e6b272dc4",
      "tree": {
        "sha": "18bb460baf36388cebf29d3a36cb48865710add1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/18bb460baf36388cebf29d3a36cb48865710add1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5233f7e9827f8dd23414c7fcf49298420f9fc42",
          "sha": "f5233f7e9827f8dd23414c7fcf49298420f9fc42",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f5233f7e9827f8dd23414c7fcf49298420f9fc42"
        }
      ],
      "message": "move-only: move logging categories to logging/categories.h\n\nLogging categories are currently shared between node and kernel. This\nseparation allows future commits to completely remove kernel's\ndependency on logging.h.\n\nAlso applies clang-format suggestions to the moved code.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-02-02T17:22:31Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-19T15:38:49Z"
      },
      "sha": "56d113cab0347a768daabccdfd76583e6b272dc4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk0YzBhZGY0ZTg1N2YzYzU4YTdhYjgxM2ViMzNiODM2MzUxMDFkNzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/94c0adf4e857f3c58a7ab813eb33b83635101d75",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/94c0adf4e857f3c58a7ab813eb33b83635101d75",
      "tree": {
        "sha": "d0dc5697ef325fcbbff2738ccc68703047cfeb0c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d0dc5697ef325fcbbff2738ccc68703047cfeb0c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56d113cab0347a768daabccdfd76583e6b272dc4",
          "sha": "56d113cab0347a768daabccdfd76583e6b272dc4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/56d113cab0347a768daabccdfd76583e6b272dc4"
        }
      ],
      "message": "move-onlyish: Move logging levels to util/log.h\n\nThis is not strictly move-only because BCLog::Level is now defined as a type\nalias for util::log::Level;\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-02-02T17:22:31Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-21T18:11:38Z"
      },
      "sha": "94c0adf4e857f3c58a7ab813eb33b83635101d75"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwMWYwYTQyOGUzYWEzZjQ2YWFkMzczNjg0YmViMzI4MmJmZmIyYzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/001f0a428e3aa3f46aad373684beb3282bffb2c0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/001f0a428e3aa3f46aad373684beb3282bffb2c0",
      "tree": {
        "sha": "0bb718af8b216e265d87388c924c44bb85052601",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0bb718af8b216e265d87388c924c44bb85052601"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/94c0adf4e857f3c58a7ab813eb33b83635101d75",
          "sha": "94c0adf4e857f3c58a7ab813eb33b83635101d75",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/94c0adf4e857f3c58a7ab813eb33b83635101d75"
        }
      ],
      "message": "move-only: Move logging macros to util/log.h\n\nMove logging macros to util/log.h so the entire codebase can use the same\nmacros.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-02-02T17:22:31Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-20T17:50:59Z"
      },
      "sha": "001f0a428e3aa3f46aad373684beb3282bffb2c0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBiZDQzNzVkNzdkNWFjYmQ1ZGE3ZDU3ZmIxNTBhMGEzZWUzYjEzYmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba",
      "tree": {
        "sha": "24003b99b98bdf97543ac6b711fcec170d4e8251",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/24003b99b98bdf97543ac6b711fcec170d4e8251"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/001f0a428e3aa3f46aad373684beb3282bffb2c0",
          "sha": "001f0a428e3aa3f46aad373684beb3282bffb2c0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/001f0a428e3aa3f46aad373684beb3282bffb2c0"
        }
      ],
      "message": "logging: Move message formatting to util/log.h\n\nWith this change, callers can use util/log.h to emit log messages and do not need to\ninclude the full logging implementation in logging.h.\n\nThere's a potential performance impact with this change for applications that\ncall `Logger::DisableLogging`. This currently affects only libbitcoinkernel and\nthe NAT-PCP fuzz test, not bitcoind. In log statements where\n`Logger::WillLogCategoryLevel` returns true but `Logger::Enabled` returns\nfalse, tinyformat's `strprintf` function will now be called even though nothing\nwill be logged, if the call is not optimized away.\n\nRationale: Log macro arguments are supposed to be evaluated when\n`Logger::WillLogCategoryLevel` returns true, even if log output is not enabled.\nChanging this behavior would be reasonable but needs consideration in a\nseparate PR since not evaluating arguments in log statements has the potential\nto change non-logging behavior.\n\nPotential performance impacts from this change could have been avoided by\nmaking the `ShouldLog()` function return a tri-state ENABLED / DISABLED /\nDISABLED_EVALUATE_ARGS value instead of a bool, but this complexity did not\nseem warranted.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-02-02T17:22:31Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2025-12-16T15:37:21Z"
      },
      "sha": "0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI0YTFjZDZiODMzZGYwNmRhNzdlYjBiY2IwMDU5YTA5OTljZTRmYzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "tree": {
        "sha": "f1a34d34865eb3a83f8be13354708159de5c6e44",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f1a34d34865eb3a83f8be13354708159de5c6e44"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba",
          "sha": "0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba"
        }
      ],
      "message": "logging: use util/log.h where possible\n\nPreparation for a future commit where kernel's dependency\non logging.cpp is removed completely.\n\nReplace usage of logging\\.h with util/log\\.h where it\nsuffices, and fix wrong includes according to iwyu.",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-02-02T17:22:31Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-26T18:48:08Z"
      },
      "sha": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22473004631,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU7ftZX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22473004631",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "created_at": "2026-02-02T17:26:47Z"
    },
    {
      "event": "reviewed",
      "id": 3740978759,
      "node_id": "PRR_kwDOABII587e-s5H",
      "url": null,
      "actor": null,
      "commit_id": "698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-02T17:42:14Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3740978759",
      "submitted_at": "2026-02-02T17:42:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22473601217,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU7h_DB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22473601217",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "03c929e10a4b3db22cc2a90da4ed69191bd8b771",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/03c929e10a4b3db22cc2a90da4ed69191bd8b771",
      "created_at": "2026-02-02T17:50:45Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22474348583,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU7k1gn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22474348583",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "created_at": "2026-02-02T18:21:11Z"
    },
    {
      "event": "labeled",
      "id": 22474363654,
      "node_id": "LE_lADOABII587nEu9bzwAAAAU7k5MG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22474363654",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-02T18:21:51Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3836910025,
      "node_id": "IC_kwDOABII587kspnJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3836910025",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-02T18:22:10Z",
      "updated_at": "2026-02-02T18:22:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `iwyu`: https://github.com/bitcoin/bitcoin/actions/runs/21601163622/job/62247641249</sub>\n<sub>LLM reason ( experimental): IWYU detected include issues and failed, causing the CI test script to exit non-zero.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#issuecomment-3836910025",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465"
    },
    {
      "event": "unlabeled",
      "id": 22476833511,
      "node_id": "UNLE_lADOABII587nEu9bzwAAAAU7uULn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22476833511",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-02T20:38:04Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3744346374,
      "node_id": "PRR_kwDOABII587fLjEG",
      "url": null,
      "actor": null,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-03T10:47:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 24a1cd6b833df06da77eb0bcb0059a0999ce4fc5\n\nThis PR improves the status quo by reducing unnecessary dependencies on our logging sink, and makes it easier to work on several future improvements for kernel logging by minimizing merge conflicts / rebase overhead through carving out these mostly move-only changes.\n\nA few outstanding comments that I'd prefer being addressed before merging, but nothing blocking if they turn out more controversial than I expect.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3744346374",
      "submitted_at": "2026-02-03T10:47:55Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "review_requested",
      "id": 22493404980,
      "node_id": "RRE_lADOABII587nEu9bzwAAAAU8th80",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22493404980",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-03T10:48:00Z",
      "requested_reviewer": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3745199978,
      "node_id": "PRR_kwDOABII587fOzdq",
      "url": null,
      "actor": null,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-03T13:20:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "lightly tested code review ACK 24a1cd6b833df06da77eb0bcb0059a0999ce4fc5\n\nGood refactor that cleanly reduces dependencies, and sets up kernel logging work without major behavior changes.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3745199978",
      "submitted_at": "2026-02-03T13:20:35Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3745931477,
      "node_id": "PRR_kwDOABII587fRmDV",
      "url": null,
      "actor": null,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-03T16:23:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the reviews. I just responded below without making changes, since the PR seems to be in a good state now. I think all the concerns mentioned should be addressed either here currently or in the already open followup PRs.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3745931477",
      "submitted_at": "2026-02-03T16:23:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2747482597",
      "pull_request_review_id": 3729796924,
      "id": 2747482597,
      "node_id": "PRRC_kwDOABII586jw0Hl",
      "diff_hunk": "@@ -0,0 +1,137 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+#include <util/threadnames.h>\n+\n+#include <cstdint>\n+#include <string_view>\n+#include <source_location>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                      .Write(s.line())\n+                      .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                      .Finalize());\n+    }\n+};\n+",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 56,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I intentionally left these two structs in `logging.h` because I think they're ratelimiting implementations rather than source location attributes. They're not part of the `std::source_location` interface, and e.g. it helps avoids pulling in the siphash dependency into `util/log.h`. I don't think it's unreasonable to move it, but just wanted to raise that.\n\n(nit note: in my latest branch, I also ended up moving this to `util/source.h` because it's not really opinionated on logging and fits well with it being a std-wrapper, but i'm very okay with either approach).",
      "created_at": "2026-01-30T18:31:49Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2747482597",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2747482597"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": 39,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749222629",
      "pull_request_review_id": 3732071588,
      "id": 2749222629,
      "node_id": "PRRC_kwDOABII586j3c7l",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "130df2ae9ecbef00bb094a016435c55ee78d5bd8\nsuper-nit: this isn't strictly a move, could be mentioned in the commit message - or just resolve the comment, just wanted to mention that I have checked it and looks fine",
      "created_at": "2026-01-31T08:51:01Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749222629",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749222629"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749224691",
      "pull_request_review_id": 3732071588,
      "id": 2749224691,
      "node_id": "PRRC_kwDOABII586j3dbz",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0\nnit: if we've reformatted `enum LogFlags` in the second commit, please consider it doing here as well, these things are awkward to maintain",
      "created_at": "2026-01-31T08:52:24Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749224691",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749224691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749227020",
      "pull_request_review_id": 3732071588,
      "id": 2749227020,
      "node_id": "PRRC_kwDOABII586j3eAM",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)",
      "path": "src/util/log.h",
      "position": 82,
      "original_position": 5,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "is this still needed? `./ci/lint.py` passes for me locally without it",
      "created_at": "2026-01-31T08:54:09Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749227020",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749227020"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 82,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749232109",
      "pull_request_review_id": 3732071588,
      "id": 2749232109,
      "node_id": "PRRC_kwDOABII586j3fPt",
      "diff_hunk": "@@ -37,44 +38,6 @@ extern const char * const DEFAULT_DEBUGLOGFILE;\n \n extern bool fLogIPs;\n \n-/// Like std::source_location, but allowing to override the function name.\n-class SourceLocation\n-{\n-public:\n-    /// The func argument must be constructed from the C++11 __func__ macro.\n-    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n-    /// Non-static string literals are not supported.\n-    SourceLocation(const char* func,\n-                   std::source_location loc = std::source_location::current())\n-        : m_func{func}, m_loc{loc} {}\n-\n-    std::string_view file_name() const { return m_loc.file_name(); }\n-    std::uint_least32_t line() const { return m_loc.line(); }\n-    std::string_view function_name_short() const { return m_func; }\n-\n-private:\n-    std::string_view m_func;\n-    std::source_location m_loc;\n-};\n-\n-struct SourceLocationEqual {\n-    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n-    {\n-        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n-    }\n-};\n-\n-struct SourceLocationHasher {\n-    size_t operator()(const SourceLocation& s) const noexcept\n-    {\n-        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n-        return size_t(CSipHasher(0, 0)",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 43,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "975ab0a60514943809f46c07e78125d80cd7a3e5",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "975ab0a60514943809f46c07e78125d80cd7a3e5\nwe shouldn't need `#include <crypto/siphash.h>` here after the move",
      "created_at": "2026-01-31T09:01:57Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749232109",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749232109"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 71,
      "original_line": 71,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749233735",
      "pull_request_review_id": 3732071588,
      "id": 2749233735,
      "node_id": "PRRC_kwDOABII586j3fpH",
      "diff_hunk": "@@ -155,7 +149,7 @@ namespace BCLog {\n         std::list<std::function<void(const std::string&)>> m_print_callbacks GUARDED_BY(m_cs) {};\n \n         /** Send a string to the log output (internal) */\n-        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit)\n+        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit, std::optional<util::log::Time> time = std::nullopt)",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 29,
      "commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The timestamp addition seems more than a refactor or a `Move message formatting to util/log.h` - can we do it in a separate commit?",
      "created_at": "2026-01-31T09:05:07Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749233735",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749233735"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749235409",
      "pull_request_review_id": 3732071588,
      "id": 2749235409,
      "node_id": "PRRC_kwDOABII586j3gDR",
      "diff_hunk": "@@ -287,18 +281,5 @@ static inline bool LogAcceptCategory(BCLog::LogFlags category, BCLog::Level leve\n /** Return true if str parses as a log category and set the flag */\n bool GetLogCategory(BCLog::LogFlags& flag, std::string_view str);\n \n-template <typename... Args>\n-inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/logging.h",
      "position": 109,
      "original_position": 47,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What's the reason for not moving `LogPrintFormatInternal` in a separate move-only commit? I can see that it comes with some baggage, but if it's possible, it would make the last commit easier to review",
      "created_at": "2026-01-31T09:08:11Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749235409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749235409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 371,
      "original_line": 371,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749598643",
      "pull_request_review_id": 3732674393,
      "id": 2749598643,
      "node_id": "PRRC_kwDOABII586j44uz",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": 2749222629,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749222629\r\n\r\n> [130df2a](https://github.com/bitcoin/bitcoin/commit/130df2ae9ecbef00bb094a016435c55ee78d5bd8) super-nit: this isn't strictly a move, could be mentioned in the commit message - or just resolve the comment, just wanted to mention that I have checked it and looks fine\r\n\r\nThanks, updated commit message to mention type alias\r\n",
      "created_at": "2026-01-31T14:08:16Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749598643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749598643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749599016",
      "pull_request_review_id": 3732674393,
      "id": 2749599016,
      "node_id": "PRRC_kwDOABII586j440o",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749224691\r\n\r\n> [616ba29](https://github.com/bitcoin/bitcoin/commit/616ba29fa2b824bbc3fe0233634e8d2e8b6216c0) nit: if we've reformatted `enum LogFlags` in the second commit, please consider it doing here as well, these things are awkward to maintain\r\n\r\nMakes sense, ran clang-format in this and other commits",
      "created_at": "2026-01-31T14:08:41Z",
      "updated_at": "2026-01-31T21:09:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749599016",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749599016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604166",
      "pull_request_review_id": 3732674393,
      "id": 2749604166,
      "node_id": "PRRC_kwDOABII586j46FG",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)",
      "path": "src/util/log.h",
      "position": 82,
      "original_position": 5,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749227020,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749227020\r\n\r\n> is this still needed? `./ci/lint.py` passes for me locally without it\r\n\r\nYes, you can see the error by running clang-tidy on a file that uses log macros in lambdas:\r\n\r\n```bash\r\ncmake -B build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON\r\nrun-clang-tidy -quiet -p build src/rpc/server.cpp\r\n```\r\n\r\nErrors look like `src/rpc/server.cpp:298:9: error: inside a lambda, '__func__' expands to the name of the function call operator; consider capturing the name of the enclosing function explicitly [bugprone-lambda-function-name,-warnings-as-errors]`\r\n\r\n\r\n\r\n",
      "created_at": "2026-01-31T14:12:06Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749604166",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604166"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 82,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604894",
      "pull_request_review_id": 3732674393,
      "id": 2749604894,
      "node_id": "PRRC_kwDOABII586j46Qe",
      "diff_hunk": "@@ -37,44 +38,6 @@ extern const char * const DEFAULT_DEBUGLOGFILE;\n \n extern bool fLogIPs;\n \n-/// Like std::source_location, but allowing to override the function name.\n-class SourceLocation\n-{\n-public:\n-    /// The func argument must be constructed from the C++11 __func__ macro.\n-    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n-    /// Non-static string literals are not supported.\n-    SourceLocation(const char* func,\n-                   std::source_location loc = std::source_location::current())\n-        : m_func{func}, m_loc{loc} {}\n-\n-    std::string_view file_name() const { return m_loc.file_name(); }\n-    std::uint_least32_t line() const { return m_loc.line(); }\n-    std::string_view function_name_short() const { return m_func; }\n-\n-private:\n-    std::string_view m_func;\n-    std::source_location m_loc;\n-};\n-\n-struct SourceLocationEqual {\n-    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n-    {\n-        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n-    }\n-};\n-\n-struct SourceLocationHasher {\n-    size_t operator()(const SourceLocation& s) const noexcept\n-    {\n-        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n-        return size_t(CSipHasher(0, 0)",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 43,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "975ab0a60514943809f46c07e78125d80cd7a3e5",
      "in_reply_to_id": 2749232109,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749232109\r\n\r\n> [975ab0a](https://github.com/bitcoin/bitcoin/commit/975ab0a60514943809f46c07e78125d80cd7a3e5) we shouldn't need `#include <crypto/siphash.h>` here after the move\r\n\r\nThanks, now removed in earlier commit",
      "created_at": "2026-01-31T14:12:34Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749604894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 71,
      "original_line": 71,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749606289",
      "pull_request_review_id": 3732674393,
      "id": 2749606289,
      "node_id": "PRRC_kwDOABII586j46mR",
      "diff_hunk": "@@ -155,7 +149,7 @@ namespace BCLog {\n         std::list<std::function<void(const std::string&)>> m_print_callbacks GUARDED_BY(m_cs) {};\n \n         /** Send a string to the log output (internal) */\n-        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit)\n+        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit, std::optional<util::log::Time> time = std::nullopt)",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 29,
      "commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": 2749233735,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749233735\r\n\r\n> The timestamp addition seems more than a refactor or a `Move message formatting to util/log.h` - can we do it in a separate commit?\r\n\r\nMakes sense, updated to use a separate commit and expand the change slightly.",
      "created_at": "2026-01-31T14:13:42Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749606289",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749606289"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749612305",
      "pull_request_review_id": 3732674393,
      "id": 2749612305,
      "node_id": "PRRC_kwDOABII586j48ER",
      "diff_hunk": "@@ -287,18 +281,5 @@ static inline bool LogAcceptCategory(BCLog::LogFlags category, BCLog::Level leve\n /** Return true if str parses as a log category and set the flag */\n bool GetLogCategory(BCLog::LogFlags& flag, std::string_view str);\n \n-template <typename... Args>\n-inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/logging.h",
      "position": 109,
      "original_position": 47,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": 2749235409,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749235409\r\n\r\n> What's the reason for not moving `LogPrintFormatInternal` in a separate move-only commit? I can see that it comes with some baggage, but if it's possible, it would make the last commit easier to review\r\n\r\nIt would be nice to move separately, but there isn't a practical way to do it without including most of the the other changes in this commit. The problem is that `LogPrintFormatInternal` calls 2 `Logger` methods so it depends on the definition of the logger class. This commit just replaces those 2 message calls with function calls so this no longer depends on `Logger`. But hopefully this is still easy to review with suggested `--color-moved` options. It's a 13 line function and 11 lines are moving unchanged.",
      "created_at": "2026-01-31T14:19:21Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749612305",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749612305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 371,
      "original_line": 371,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749635953",
      "pull_request_review_id": 3732781211,
      "id": 2749635953,
      "node_id": "PRRC_kwDOABII586j5B1x",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "move-onlyish :p",
      "created_at": "2026-01-31T14:42:50Z",
      "updated_at": "2026-01-31T14:42:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749635953",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749635953"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749636775",
      "pull_request_review_id": 3732782827,
      "id": 2749636775,
      "node_id": "PRRC_kwDOABII586j5CCn",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)",
      "path": "src/util/log.h",
      "position": 82,
      "original_position": 5,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749227020,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ah, ran the wrong linter, thanks",
      "created_at": "2026-01-31T14:43:25Z",
      "updated_at": "2026-01-31T14:43:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749636775",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749636775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 82,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749642209",
      "pull_request_review_id": 3732795304,
      "id": 2749642209,
      "node_id": "PRRC_kwDOABII586j5DXh",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "These lines didn't change, what I mean was to decide if this is a good opportunity to untangle these lines:\r\n```C++\r\n#define detail_LogIfCategoryAndLevelEnabled(category, level, ...) \\\r\n    do { \\\r\n        if (LogAcceptCategory((category), (level))) { \\\r\n            bool rate_limit{level >= BCLog::Level::Info}; \\\r\n            Assume(!rate_limit); /*Only called with the levels below*/ \\\r\n            LogPrintLevel_(category, level, rate_limit, __VA_ARGS__); \\\r\n        } \\\r\n    } while (0)\r\n```\r\n\r\nso that if I make one line longer or shorter we won't have to update every line break anymore, like we forgot to do in e.g. https://github.com/bitcoin/bitcoin/blob/5ad94cf6b7eb2aefaebf04184ba2c187a304a8c4/src/test/script_tests.cpp#L1175-L1180\r\nIt seems `clang-tidy` doesn't have an opinion on this.\r\n\r\nEdit: we aren't always aligning the backslashes, e.g. https://github.com/bitcoin/bitcoin/blob/6eb5ba569141b722a5e27ef36e04994886769c44/src/crypto/siphash.cpp#L13-L20",
      "created_at": "2026-01-31T14:48:04Z",
      "updated_at": "2026-01-31T14:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749642209",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749642209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749652500",
      "pull_request_review_id": 3732819111,
      "id": 2749652500,
      "node_id": "PRRC_kwDOABII586j5F4U",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n+{\n+    if (util::log::ShouldLog(flag, level)) {",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 51,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "9569400e51aa04dbbb99f4ee9162bdacafa0a818\nThis last commit is still more than a \"Move\".\n\nThe previous `LogInstance().Enabled()` https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/logging.h#L260-L265 was changed to `util::log::ShouldLog(flag, level)` https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/logging.cpp#L154-L158, which is always enabled for `LogInfo` (+ `Warn` & `Error`)  so `tfm::format` below will always be executed.\nSo calling https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/logging.cpp#L111-L121 would have gated it before, but not after.",
      "created_at": "2026-01-31T14:57:02Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749652500",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749652500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749662442",
      "pull_request_review_id": 3732819111,
      "id": 2749662442,
      "node_id": "PRRC_kwDOABII586j5ITq",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\"With this change, callers can use util/log.h to log messages and do not need to include the full logging implementation in logging.h\"\n\nWhat about debug logs that still need the `LogAcceptCategory`?\n\n```patch\ndiff --git a/src/hash.h b/src/hash.h\n--- a/src/hash.h\t(revision c96e11340eaad06b5c10b36ff040574f8fef9867)\n+++ b/src/hash.h\t(date 1769872030470)\n@@ -14,6 +14,7 @@\n #include <serialize.h>\n #include <span.h>\n #include <uint256.h>\n+#include <util/log.h>\n \n #include <string>\n #include <vector>\n@@ -28,6 +29,7 @@\n     static const size_t OUTPUT_SIZE = CSHA256::OUTPUT_SIZE;\n \n     void Finalize(std::span<unsigned char> output) {\n+        LogDebug(BCLog::NET, \"hello\\n\");\n         assert(output.size() == OUTPUT_SIZE);\n         unsigned char buf[CSHA256::OUTPUT_SIZE];\n         sha.Finalize(buf);\n```\nfails with:\n> /Users/lorinc/CLionProjects/bitcoin/src/hash.h:32:9: error: use of undeclared identifier 'LogAcceptCategory'\n   32 |         LogDebug(BCLog::NET, \"hello\\n\");",
      "created_at": "2026-01-31T15:09:01Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749662442",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749662442"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749664343",
      "pull_request_review_id": 3732819111,
      "id": 2749664343,
      "node_id": "PRRC_kwDOABII586j5IxX",
      "diff_hunk": "@@ -6,7 +6,11 @@\n #define BITCOIN_UTIL_LOG_H\n \n #include <crypto/siphash.h>",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 3,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "9569400e51aa04dbbb99f4ee9162bdacafa0a818\nWe should probably add string and chrono here:\n```C++\n#include <chrono>\n#include <crypto/siphash.h>\n#include <logging/categories.h> // IWYU pragma: export\n#include <span.h>\n#include <string>\n#include <tinyformat.h>\n#include <util/check.h>\n#include <util/threadnames.h>\n```",
      "created_at": "2026-01-31T15:10:59Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749664343",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749664343"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749666365",
      "pull_request_review_id": 3732819111,
      "id": 2749666365,
      "node_id": "PRRC_kwDOABII586j5JQ9",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 33,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`thread_name` seems unused - I assume it was used in the parent change. Can we either add it when it will be used or document why it's not?",
      "created_at": "2026-01-31T15:13:06Z",
      "updated_at": "2026-01-31T20:57:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749666365",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749666365"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670094",
      "pull_request_review_id": 3732819111,
      "id": 2749670094,
      "node_id": "PRRC_kwDOABII586j5KLO",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 49,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: we might as well remove the redundant `inline` while we're here",
      "created_at": "2026-01-31T15:17:21Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670094",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670619",
      "pull_request_review_id": 3732819111,
      "id": 2749670619,
      "node_id": "PRRC_kwDOABII586j5KTb",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 52,
      "original_position": 31,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "does this comment really help?",
      "created_at": "2026-01-31T15:17:54Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670619",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670619"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 52,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749991124",
      "pull_request_review_id": 3733461323,
      "id": 2749991124,
      "node_id": "PRRC_kwDOABII586j6YjU",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n+{\n+    if (util::log::ShouldLog(flag, level)) {",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 51,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749652500,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749652500\r\n\r\n> [9569400](https://github.com/bitcoin/bitcoin/commit/9569400e51aa04dbbb99f4ee9162bdacafa0a818) This last commit is still more than a \"Move\".\r\n> \r\n> The previous `LogInstance().Enabled()`\r\n> \r\n> was changed to `util::log::ShouldLog(flag, level)`\r\n\r\nNice catch. This code was just wrong. It didn't effect much in practice because `DisableLogging` is only used by the kernel library and by a fuzz test, but this was a mistake.",
      "created_at": "2026-01-31T20:41:02Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749991124",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749991124"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749992757",
      "pull_request_review_id": 3733461323,
      "id": 2749992757,
      "node_id": "PRRC_kwDOABII586j6Y81",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749662442,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749662442\r\n\r\n> \"With this change, callers can use util/log.h to log messages and do not need to include the full logging implementation in logging.h\"\r\n\r\nAgain nice catch. This is related to the mistake above. This commit should be replacing `LogAcceptCategory()` not `Enabled() `with `ShouldLog()` ",
      "created_at": "2026-01-31T20:43:02Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749992757",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749992757"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749994222",
      "pull_request_review_id": 3733461323,
      "id": 2749994222,
      "node_id": "PRRC_kwDOABII586j6ZTu",
      "diff_hunk": "@@ -6,7 +6,11 @@\n #define BITCOIN_UTIL_LOG_H\n \n #include <crypto/siphash.h>",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 3,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749664343,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749664343\r\n\r\n> [9569400](https://github.com/bitcoin/bitcoin/commit/9569400e51aa04dbbb99f4ee9162bdacafa0a818) We should probably add string and chrono here:\r\n\r\nGood catch, added string, but wound up simplifying and dropping the time type.",
      "created_at": "2026-01-31T20:44:30Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749994222",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749994222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749997284",
      "pull_request_review_id": 3733461323,
      "id": 2749997284,
      "node_id": "PRRC_kwDOABII586j6aDk",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 49,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670094,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670094\r\n\r\n> nit: we might as well remove the redundant `inline` while we're here\r\n\r\nKept for now to keep diff output more readable, since this line is move-only. I also don't mind the reminder that the function is inline, even though I wouldn't add it myself.\r\n",
      "created_at": "2026-01-31T20:48:14Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749997284",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749997284"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749999164",
      "pull_request_review_id": 3733461323,
      "id": 2749999164,
      "node_id": "PRRC_kwDOABII586j6ag8",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 52,
      "original_position": 31,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670619,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670619\r\n\r\n> does this comment really help?\r\n\r\nI'm not the author of this comment, but I would think it's probably helpful to know that this value is only a hint and setting it may not force rate limiting or prevent it. Maybe the field could have a better name or the comment could be clarified, but the name seems to match existing code and the comment seems like it adds more information.",
      "created_at": "2026-01-31T20:50:27Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749999164",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749999164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 52,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750005276",
      "pull_request_review_id": 3733461323,
      "id": 2750005276,
      "node_id": "PRRC_kwDOABII586j6cAc",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 33,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749666365,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749666365\r\n\r\n> `thread_name` seems unused - I assume it was used in the parent change. Can we either add it when it will be used or document why it's not?\r\n\r\nGood catch. I didn't realize it was unused. Dropped it here and also dropped timestamp to make this simpler. It will make sense for followup PR's to add these fields when they are actually needed.",
      "created_at": "2026-01-31T20:57:19Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750005276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750005276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750057927",
      "pull_request_review_id": 3733536634,
      "id": 2750057927,
      "node_id": "PRRC_kwDOABII586j6o3H",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 52,
      "original_position": 31,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670619,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> only a hint and setting it may not force rate limiting\r\n\r\nOh, that's not what I understood from it...",
      "created_at": "2026-01-31T21:36:11Z",
      "updated_at": "2026-01-31T21:36:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750057927",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750057927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 52,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750076448",
      "pull_request_review_id": 3733564211,
      "id": 2750076448,
      "node_id": "PRRC_kwDOABII586j6tYg",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d\n```patch\n-This change only effects tests which call DisableLogging so does not effect\n-bitcoind A simpler alternative would be to stop evaluating format arguments\n+This change only affects tests which call DisableLogging so does not affect\n+bitcoind. A simpler alternative would be to stop evaluating format arguments\n```",
      "created_at": "2026-01-31T21:45:59Z",
      "updated_at": "2026-01-31T22:08:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750076448",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750076448"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750095591",
      "pull_request_review_id": 3733564211,
      "id": 2750095591,
      "node_id": "PRRC_kwDOABII586j6yDn",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": 2749222629,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We don't need this in the last commit anymore, since `logging.h` includes `util/log.h`, right?",
      "created_at": "2026-01-31T22:02:56Z",
      "updated_at": "2026-01-31T22:08:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750095591",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750095591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754326309",
      "pull_request_review_id": 3729796924,
      "id": 2754326309,
      "node_id": "PRRC_kwDOABII586kK68l",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;",
      "path": "src/util/log.h",
      "position": 66,
      "original_position": 85,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is now defined here and in `logging.h`. Would remove this alias and just use `util::log::Level` in this file?\n\n<details>\n<summary>git diff on 737999e5a8</summary>\n\n```diff\ndiff --git a/src/util/log.h b/src/util/log.h\nindex 2e26b3eeec..c64bda82d1 100644\n--- a/src/util/log.h\n+++ b/src/util/log.h\n@@ -81,12 +81,8 @@ bool ShouldLog(Category category, Level level);\n void Log(Entry entry);\n } // namespace util::log\n \n-namespace BCLog {\n-using Level = util::log::Level;\n-} // namespace BCLog\n-\n template <typename... Args>\n-inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, util::log::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n {\n     std::string log_msg;\n     try {\n@@ -105,9 +101,9 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n // Be conservative when using functions that unconditionally log to debug.log!\n // It should not be the case that an inbound peer can fill up a user's storage\n // with debug.log entries.\n-#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n-#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n-#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, util::log::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, util::log::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, util::log::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n \n // Use a macro instead of a function for conditional logging to prevent\n // evaluating arguments when logging for the category is not enabled.\n@@ -118,14 +114,14 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n #define detail_LogIfCategoryAndLevelEnabled(category, level, ...)      \\\n     do {                                                               \\\n         if (util::log::ShouldLog((category), (level))) {               \\\n-            bool rate_limit{level >= BCLog::Level::Info};              \\\n+            bool rate_limit{level >= util::log::Level::Info};              \\\n             Assume(!rate_limit); /*Only called with the levels below*/ \\\n             LogPrintLevel_(category, level, rate_limit, __VA_ARGS__);  \\\n         }                                                              \\\n     } while (0)\n \n // Log conditionally, prefixing the output with the passed category name.\n-#define LogDebug(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Debug, __VA_ARGS__)\n-#define LogTrace(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Trace, __VA_ARGS__)\n+#define LogDebug(category, ...) detail_LogIfCategoryAndLevelEnabled(category, util::log::Level::Debug, __VA_ARGS__)\n+#define LogTrace(category, ...) detail_LogIfCategoryAndLevelEnabled(category, util::log::Level::Trace, __VA_ARGS__)\n \n #endif // BITCOIN_UTIL_LOG_H\n\n```\n</details>\n",
      "created_at": "2026-02-02T13:26:31Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754326309",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754326309"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754330399",
      "pull_request_review_id": 3729796924,
      "id": 2754330399,
      "node_id": "PRRC_kwDOABII586kK78f",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 89,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: this file has quite a few lines exceeding 100 characters",
      "created_at": "2026-02-02T13:27:34Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754330399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754330399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754450447",
      "pull_request_review_id": 3729796924,
      "id": 2754450447,
      "node_id": "PRRC_kwDOABII586kLZQP",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 89,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\ninline void LogPrintFormatInternal(SourceLocation&& source_loc, util::log::Category flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n```",
      "created_at": "2026-02-02T13:53:18Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754450447",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754450447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754586625",
      "pull_request_review_id": 3729796924,
      "id": 2754586625,
      "node_id": "PRRC_kwDOABII586kL6gB",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think it would be better if `ShouldLog` does all filtering, and `Log` does unconditional logging. (Hastily) adapting [my approach](https://github.com/bitcoin/bitcoin/pull/34374/changes#diff-c75b427ca21222164fa8e95d82f29fefa6b60044d0510fe85f4e06e57cdc154bR141-R149) to this PR, we could end up with something like:\n\n<details>\n<summary>git diff on 737999e5a8</summary>\n\n```diff\ndiff --git a/src/logging.cpp b/src/logging.cpp\nindex df6946d661..357a656946 100644\n--- a/src/logging.cpp\n+++ b/src/logging.cpp\n@@ -605,13 +605,11 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n \n bool util::log::ShouldLog(Category category, Level level)\n {\n-    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+    BCLog::Logger& logger{LogInstance()};\n+    return logger.WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level) && logger.Enabled();\n }\n \n void util::log::Log(util::log::Entry entry)\n {\n-    BCLog::Logger& logger{LogInstance()};\n-    if (logger.Enabled()) {\n-        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n-    }\n+    LogInstance().LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n }\ndiff --git a/src/util/log.h b/src/util/log.h\nindex 2e26b3eeec..26f1e7cb94 100644\n--- a/src/util/log.h\n+++ b/src/util/log.h\n@@ -97,9 +97,18 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n     util::log::Log(util::log::Entry{.category = flag, .level = level, .should_ratelimit = should_ratelimit, .source_loc = std::move(source_loc), .message = std::move(log_msg)});\n }\n \n-// Allow __func__ to be used in any context without warnings:\n-// NOLINTNEXTLINE(bugprone-lambda-function-name)\n-#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+// For Info levels and up, arguments are always evaluated. For Debug and lower,\n+// arguments are ONLY evaluated when the log is actually produced.\n+#define LogPrintLevel_(category, level, should_ratelimit, ...)                                                \\\n+    do {                                                                                                      \\\n+        if (util::log::ShouldLog(category, level)) {                                                          \\\n+            /* NOLINTNEXTLINE(bugprone-lambda-function-name) */                                               \\\n+            LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__); \\\n+        } else if ((level) >= util::log::Level::Info) {                                                       \\\n+            /* For Info levels and up, we guarantee that arguments are always evaluated. */                   \\\n+            [](auto&&...) {}(__VA_ARGS__);                                                                    \\\n+        }                                                                                                     \\\n+    } while (0)\n \n // Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n // Be conservative when using functions that unconditionally log to debug.log!\n@@ -109,23 +118,8 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n #define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n #define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n \n-// Use a macro instead of a function for conditional logging to prevent\n-// evaluating arguments when logging for the category is not enabled.\n-\n-// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n-// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n-// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n-#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)      \\\n-    do {                                                               \\\n-        if (util::log::ShouldLog((category), (level))) {               \\\n-            bool rate_limit{level >= BCLog::Level::Info};              \\\n-            Assume(!rate_limit); /*Only called with the levels below*/ \\\n-            LogPrintLevel_(category, level, rate_limit, __VA_ARGS__);  \\\n-        }                                                              \\\n-    } while (0)\n-\n // Log conditionally, prefixing the output with the passed category name.\n-#define LogDebug(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Debug, __VA_ARGS__)\n-#define LogTrace(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Trace, __VA_ARGS__)\n+#define LogDebug(category, ...) LogPrintLevel_(category, util::log::Level::Debug, /*should_ratelimit=*/false, __VA_ARGS__)\n+#define LogTrace(category, ...) LogPrintLevel_(category, util::log::Level::Trace, /*should_ratelimit=*/false, __VA_ARGS__)\n \n #endif // BITCOIN_UTIL_LOG_H\n\n```\n</details>\n\nThis better enables users (e.g. places where we conditionally calculate memusage) to avoid expensive and unnecessary operations, and is imo a more consistent implementation of the interface. I think it also addresses the \"This is a minor change in behavior for statements where Logger::WillLogCategoryLevel() returns true and Logger::Enabled() returns false...\" paragraphs in the 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d commit message.",
      "created_at": "2026-02-02T14:20:57Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754586625",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754586625"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754681201",
      "pull_request_review_id": 3739848992,
      "id": 2754681201,
      "node_id": "PRRC_kwDOABII586kMRlx",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;",
      "path": "src/util/log.h",
      "position": 66,
      "original_position": 85,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754326309,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Related to https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750095591",
      "created_at": "2026-02-02T14:41:11Z",
      "updated_at": "2026-02-02T14:41:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754681201",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754681201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755156442",
      "pull_request_review_id": 3740499162,
      "id": 2755156442,
      "node_id": "PRRC_kwDOABII586kOFna",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2750076448,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750076448\r\n\r\nThank you, wound up rewriting this whole commit message to be clearer.",
      "created_at": "2026-02-02T16:18:59Z",
      "updated_at": "2026-02-02T17:15:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755156442",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755156442"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755164391",
      "pull_request_review_id": 3740499162,
      "id": 2755164391,
      "node_id": "PRRC_kwDOABII586kOHjn",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": 2749222629,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750095591\r\n\r\n> We don't need this in the last commit anymore, since `logging.h` includes `util/log.h`, right?\r\n\r\nYes good catch, there's no reason to declare the same type both places.",
      "created_at": "2026-02-02T16:20:18Z",
      "updated_at": "2026-02-02T17:15:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755164391",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755164391"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755187200",
      "pull_request_review_id": 3740499162,
      "id": 2755187200,
      "node_id": "PRRC_kwDOABII586kONIA",
      "diff_hunk": "@@ -0,0 +1,137 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+#include <util/threadnames.h>\n+\n+#include <cstdint>\n+#include <string_view>\n+#include <source_location>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                      .Write(s.line())\n+                      .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                      .Finalize());\n+    }\n+};\n+",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 56,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": 2747482597,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2747482597\r\n\r\n> I intentionally left these two structs in `logging.h` because I think they're ratelimiting implementations rather than source location attributes.\r\n\r\nNice I didn't notice that, Leaving them in logging.h makes the PR smaller and logging interface simpler, and could be good for compile times, too. It seems like these functions also make sense to keep in logging.h since they are only comparing and hashing selected fields, so are fairly application-specific.",
      "created_at": "2026-02-02T16:25:00Z",
      "updated_at": "2026-02-02T17:15:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755187200",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755187200"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": 39,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755253294",
      "pull_request_review_id": 3740499162,
      "id": 2755253294,
      "node_id": "PRRC_kwDOABII586kOdQu",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;",
      "path": "src/util/log.h",
      "position": 66,
      "original_position": 85,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754326309,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754326309\r\n\r\nThanks, I deduplicated the alias but left the macros alone to avoid burden of maintaining unnecessary changes to them and requiring reviewers to review them. I have PR entirely rewriting the macros in #29256 and think as a group logging changes should be easier to understand if they are targeted and avoid expanding and changing the same lines of code repeatedly.",
      "created_at": "2026-02-02T16:38:51Z",
      "updated_at": "2026-02-02T17:15:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755253294",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755253294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755272694",
      "pull_request_review_id": 3740499162,
      "id": 2755272694,
      "node_id": "PRRC_kwDOABII586kOh_2",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 89,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754330399,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754330399\r\n\r\n> nit: this file has quite a few lines exceeding 100 characters\r\n\r\nThat's true and l0rinc also pointed out `static` is redundant. But this line is unchanged and I would probably prefer to keep it move-only if there isn't a stronger reason to change it.",
      "created_at": "2026-02-02T16:42:39Z",
      "updated_at": "2026-02-02T17:15:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755272694",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755272694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755279317",
      "pull_request_review_id": 3740499162,
      "id": 2755279317,
      "node_id": "PRRC_kwDOABII586kOjnV",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 89,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754450447,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754450447\r\n\r\nSimilar to last comments would like to avoid tweaking a line that's just move-only and conflicts with #29256",
      "created_at": "2026-02-02T16:44:03Z",
      "updated_at": "2026-02-02T17:15:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755279317",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755279317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755320002",
      "pull_request_review_id": 3740499162,
      "id": 2755320002,
      "node_id": "PRRC_kwDOABII586kOtjC",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754586625,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754586625\r\n\r\n> I think it would be better if `ShouldLog` does all filtering, and `Log` does unconditional logging.\r\n\r\nYes rewrote the commit message to be clearer about why it isn't taking this approach. I do think the approach makes sense, and it was actually the first thing I tried to fix the previous broken push. But I think that change would need to be done in a standalone PR since it would be an externally observable change in behavior that could potentially affect non-logging code, or potentially be controversial. I don't think it should be bundled into what is otherwise a mostly-moveonly refactoring PR.",
      "created_at": "2026-02-02T16:52:22Z",
      "updated_at": "2026-02-02T17:15:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755320002",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755320002"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755439604",
      "pull_request_review_id": 3740877082,
      "id": 2755439604,
      "node_id": "PRRC_kwDOABII586kPKv0",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749642209\r\n\r\n> These lines didn't change, what I mean was to decide if this is a good opportunity to untangle these lines:\r\n\r\nI think clang-format takes care of aligning backslashes, though not sure if you meant untangle in a different way. In general I am trying to avoid changes to the macros here to keep it targeted and simple to review, and because there are other PR's changing the macros in more substantive ways",
      "created_at": "2026-02-02T17:20:32Z",
      "updated_at": "2026-02-02T17:20:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755439604",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755439604"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755446164",
      "pull_request_review_id": 3740884846,
      "id": 2755446164,
      "node_id": "PRRC_kwDOABII586kPMWU",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754586625,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> But I think that change would need to be done in a standalone PR\r\n\r\nFair enough, I agree with your approach to keep this PR uncontroversial and easy to review and merge.",
      "created_at": "2026-02-02T17:21:56Z",
      "updated_at": "2026-02-02T17:21:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755446164",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755446164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755501843",
      "pull_request_review_id": 3740952169,
      "id": 2755501843,
      "node_id": "PRRC_kwDOABII586kPZ8T",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 52,
      "original_position": 31,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670619,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750057927\r\n\r\n> Oh, that's not what I understood from it...\r\n\r\nI guess I don't know much about the rate limiting implementation, but appreciate the comment indicating the field shouldn't be strongly relied upon. I'm sure there could be a better description of how it's intended to be used though.",
      "created_at": "2026-02-02T17:36:51Z",
      "updated_at": "2026-02-02T17:51:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755501843",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755501843"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 52,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755524800",
      "pull_request_review_id": 3740978759,
      "id": 2755524800,
      "node_id": "PRRC_kwDOABII586kPfjA",
      "diff_hunk": "",
      "path": "src/util/batchpriority.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "original_commit_id": "698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think your [latest force-push](https://github.com/bitcoin/bitcoin/compare/c497eb216150c9f258fb134d38449fda8e270e2e..698a05427ed3bdd8255840ce963d7c8d6e7c3e92) undid the logging include change here, not sure that was intentional?",
      "created_at": "2026-02-02T17:42:14Z",
      "updated_at": "2026-02-02T17:42:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755524800",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755524800"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755552420",
      "pull_request_review_id": 3740952169,
      "id": 2755552420,
      "node_id": "PRRC_kwDOABII586kPmSk",
      "diff_hunk": "",
      "path": "src/util/batchpriority.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "original_commit_id": "698a05427ed3bdd8255840ce963d7c8d6e7c3e92",
      "in_reply_to_id": 2755524800,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755524800\r\n\r\n> I think your latest force-push undid the logging include change here, not sure that was intentional?\r\n\r\nGood catch. i have a combined branch with this and other logging changes and didn't export from it correctly after rebasing. Should be fixed in new push",
      "created_at": "2026-02-02T17:48:57Z",
      "updated_at": "2026-02-02T17:56:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2755552420",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2755552420"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758247268",
      "pull_request_review_id": 3744288549,
      "id": 2758247268,
      "node_id": "PRRC_kwDOABII586kZ4Nk",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 89,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754330399,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: a couple of non-moveonly lines that would benefit from being shorter, if you have to retouch:\r\n\r\n<details>\r\n<summary>git diff on 0bd4375d77</summary>\r\n\r\n```diff\r\ndiff --git a/src/util/log.h b/src/util/log.h\r\nindex c895b204e0..aae23f0df1 100644\r\n--- a/src/util/log.h\r\n+++ b/src/util/log.h\r\n@@ -54,7 +54,8 @@ struct Entry {\r\n     std::string message;\r\n };\r\n \r\n-/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\r\n+/** Return whether messages with specified category and level should be logged. Applications using\r\n+ * the logging library need to provide this. */\r\n bool ShouldLog(Category category, Level level);\r\n \r\n /** Send message to be logged. Applications using the logging library need to provide this. */\r\n@@ -75,7 +76,12 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\r\n     } catch (tinyformat::format_error& fmterr) {\r\n         log_msg = \"Error \\\"\" + std::string{fmterr.what()} + \"\\\" while formatting log message: \" + fmt.fmt;\r\n     }\r\n-    util::log::Log(util::log::Entry{.category = flag, .level = level, .should_ratelimit = should_ratelimit, .source_loc = std::move(source_loc), .message = std::move(log_msg)});\r\n+    util::log::Log(util::log::Entry{\r\n+        .category = flag,\r\n+        .level = level,\r\n+        .should_ratelimit = should_ratelimit,\r\n+        .source_loc = std::move(source_loc),\r\n+        .message = std::move(log_msg)});\r\n }\r\n \r\n // Allow __func__ to be used in any context without warnings:\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2026-02-03T10:00:26Z",
      "updated_at": "2026-02-03T10:00:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2758247268",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758247268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758288530",
      "pull_request_review_id": 3744346374,
      "id": 2758288530,
      "node_id": "PRRC_kwDOABII586kaCSS",
      "diff_hunk": "@@ -4,13 +4,24 @@\n \n #include <dbwrapper.h>\n \n+#include <leveldb/cache.h>\n+#include <leveldb/db.h>\n+#include <leveldb/env.h>\n+#include <leveldb/filter_policy.h>\n+#include <leveldb/helpers/memenv/memenv.h>\n+#include <leveldb/iterator.h>\n+#include <leveldb/options.h>\n+#include <leveldb/slice.h>\n+#include <leveldb/status.h>\n+#include <leveldb/write_batch.h>\n #include <logging.h>",
      "path": "src/dbwrapper.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 24a1cd6b833df06da77eb0bcb0059a0999ce4fc5:\n\nAs per the commit goal of removing logging.cpp from kernel, this include should be removed, and `LogAcceptCategory` replaced with `ShouldLog`:\n\n<details>\n<summary>git diff on 24a1cd6b83</summary>\n\n```diff\ndiff --git a/src/dbwrapper.cpp b/src/dbwrapper.cpp\nindex eb222078b5..95faa0870c 100644\n--- a/src/dbwrapper.cpp\n+++ b/src/dbwrapper.cpp\n@@ -14,7 +14,6 @@\n #include <leveldb/slice.h>\n #include <leveldb/status.h>\n #include <leveldb/write_batch.h>\n-#include <logging.h>\n #include <random.h>\n #include <serialize.h>\n #include <span.h>\n@@ -58,7 +57,7 @@ public:\n     // This code is adapted from posix_logger.h, which is why it is using vsprintf.\n     // Please do not do this in normal code\n     void Logv(const char * format, va_list ap) override {\n-            if (!LogAcceptCategory(BCLog::LEVELDB, util::log::Level::Debug)) {\n+            if (!util::log::ShouldLog(BCLog::LEVELDB, util::log::Level::Debug)) {\n                 return;\n             }\n             char buffer[500];\n@@ -277,7 +276,7 @@ CDBWrapper::~CDBWrapper()\n \n void CDBWrapper::WriteBatch(CDBBatch& batch, bool fSync)\n {\n-    const bool log_memory = LogAcceptCategory(BCLog::LEVELDB, util::log::Level::Debug);\n+    const bool log_memory = util::log::ShouldLog(BCLog::LEVELDB, util::log::Level::Debug);\n     double mem_before = 0;\n     if (log_memory) {\n         mem_before = DynamicMemoryUsage() / 1024.0 / 1024;\n\n```\n</details>\n",
      "created_at": "2026-02-03T10:10:42Z",
      "updated_at": "2026-02-03T10:47:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2758288530",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758288530"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758406461",
      "pull_request_review_id": 3744346374,
      "id": 2758406461,
      "node_id": "PRRC_kwDOABII586kafE9",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754586625,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> But I think that change would need to be done in a standalone PR since it would be an externally observable change in behavior that could potentially affect non-logging code, or potentially be controversial.\r\n\r\nI want to clarify - my earlier [suggestion](https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754586625) should not introduce any observable behaviour change with master. Argument evaluation is unchanged:\r\n  - `Info` and higher: unconditionally evaluated\r\n  - `Debug` and lower: evaluated iff `WillLogCategoryLevel` returns `true`\r\n\r\nThe main change my diff introduces is that:\r\n- string formatting is skipped when `!LogInstance().Enabled()`, but afaict this cannot introduce behaviour in program flow\r\n- a new (early return `true`, trivially cheap) call to `WillLogCategoryLevel()` is made for `Info` and up\r\n\r\nI think it is reasonable to want to minimize code diffs/keep this move-only as much as possible, but I think it is inaccurate that my diff would increase observable behaviour change. 0bd4375d77d5acbd5da7d57fb150a0a3ee3b13ba introduces performance overhead (as you document in the commit message), whereas with my diff there would be more code change but no behaviour change and no performance overhead.\r\n\r\nI personally would prefer including this change in this PR, but am happy either way - it is not crucial and I agree keeping this easy to review is important. I find my diff easier to understand, but that is personal preference.",
      "created_at": "2026-02-03T10:37:20Z",
      "updated_at": "2026-02-03T10:47:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2758406461",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2758406461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759026349",
      "pull_request_review_id": 3745199978,
      "id": 2759026349,
      "node_id": "PRRC_kwDOABII586kc2at",
      "diff_hunk": "@@ -4,7 +4,7 @@\n \n #include <util/batchpriority.h>\n \n-#include <logging.h>\n+#include <util/log.h>",
      "path": "src/util/batchpriority.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: if `pthread.h` and `sched.h` are already guarded (since they're not always needed), shouldn't we guard this with\r\n```C++\r\n#ifdef SCHED_BATCH\r\n#include <util/log.h>\r\n#endif\r\n```\r\nso that it's not unused otherwise?",
      "created_at": "2026-02-03T13:14:33Z",
      "updated_at": "2026-02-03T13:20:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2759026349",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759026349"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759645121",
      "pull_request_review_id": 3745931477,
      "id": 2759645121,
      "node_id": "PRRC_kwDOABII586kfNfB",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 70,
      "original_position": 89,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754330399,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2758247268\r\n\r\n> nit: a couple of non-moveonly lines that would benefit from being shorter, if you have to retouch:\r\n\r\nSeems reasonable and I applied the change locally, so it will get included if there is another update\r\n\r\n\r\n",
      "created_at": "2026-02-03T15:26:22Z",
      "updated_at": "2026-02-03T16:23:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2759645121",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759645121"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759742372",
      "pull_request_review_id": 3745931477,
      "id": 2759742372,
      "node_id": "PRRC_kwDOABII586kflOk",
      "diff_hunk": "@@ -4,13 +4,24 @@\n \n #include <dbwrapper.h>\n \n+#include <leveldb/cache.h>\n+#include <leveldb/db.h>\n+#include <leveldb/env.h>\n+#include <leveldb/filter_policy.h>\n+#include <leveldb/helpers/memenv/memenv.h>\n+#include <leveldb/iterator.h>\n+#include <leveldb/options.h>\n+#include <leveldb/slice.h>\n+#include <leveldb/status.h>\n+#include <leveldb/write_batch.h>\n #include <logging.h>",
      "path": "src/dbwrapper.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "in_reply_to_id": 2758288530,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2758288530\r\n\r\n> As per the commit goal of removing logging.cpp from kernel, this include should be removed, and `LogAcceptCategory` replaced with `ShouldLog`\r\n\r\nI think the original goal of this commit and the goal of this PR might not line up exactly. This PR is just trying to in introduce the `util/log.h` header to expose a narrow log generation interface instead of the full log handling interface.\r\n\r\nI added this commit as a way of starting to include the header directly some places, but I'd resist expanding it to make extra changes to validation code. Specifically, I wouldn't want the suggested `ShouldLog` replacement because I'm expecting the `ShouldLog` signature to change, either taking a context pointer following the `g_dispatcher_should_log` path from https://github.com/bitcoin/bitcoin/pull/34374#issuecomment-3813719678, or taking a log source reference following https://github.com/bitcoin/bitcoin/pull/29256. Would like to try to keep this PR more focused and avoid churn where possible in cases like this.",
      "created_at": "2026-02-03T15:48:35Z",
      "updated_at": "2026-02-03T16:23:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2759742372",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759742372"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759756575",
      "pull_request_review_id": 3745931477,
      "id": 2759756575,
      "node_id": "PRRC_kwDOABII586kfosf",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754586625,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2758406461\r\n\r\n> I want to clarify - my earlier [suggestion](https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754586625) should not introduce any observable behaviour change with master. Argument evaluation is unchanged:\r\n\r\nYou're right. I just saw the `&& logger.Enabled()` part of the suggestion and remembered I tried that already and it wasn't equivalent. But the suggestion is also hardcoding `(level) >= util::log::Level::Info` in the macro to preserve current behavior.\r\n\r\nSo the suggestion would be a correct alternative to the current implementation, but I'd still resist applying it because it is rewriting the logging macros when this PR is just trying to move them. I think the macros do need to rewritten, but it would be better to do in an intentional way where their real limitations are addressed (hardcoding behavior instead of delgating to the logger, relying on global state and not supporting source logging) and they can be reviewed once in a PR with clear a goal instead changing multiple times\r\n\r\n",
      "created_at": "2026-02-03T15:51:57Z",
      "updated_at": "2026-02-03T16:23:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2759756575",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759756575"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759804918",
      "pull_request_review_id": 3745931477,
      "id": 2759804918,
      "node_id": "PRRC_kwDOABII586kf0f2",
      "diff_hunk": "@@ -4,7 +4,7 @@\n \n #include <util/batchpriority.h>\n \n-#include <logging.h>\n+#include <util/log.h>",
      "path": "src/util/batchpriority.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "in_reply_to_id": 2759026349,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2759026349\r\n\r\n> nit: if `pthread.h` and `sched.h` are already guarded (since they're not always needed), shouldn't we guard this with\r\n\r\nI think the reason `pthread.h` and `sched.h` are guarded isn't because they aren't always needed, but because they are posix headers that might not exist on all platforms. Guarding `util/log.h` the same way could be reasonable, but I could also imagine wanting to avoid conditional includes on our own headers since they could be a maintenance burden. But happy to make this change if there is another request for it.\r\n",
      "created_at": "2026-02-03T15:59:24Z",
      "updated_at": "2026-02-03T16:23:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2759804918",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2759804918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2761192832",
      "pull_request_review_id": 3747836484,
      "id": 2761192832,
      "node_id": "PRRC_kwDOABII586klHWA",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "24a1cd6b833df06da77eb0bcb0059a0999ce4fc5",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754586625,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Alright, sounds good. Thanks for looking into it.",
      "created_at": "2026-02-03T22:04:39Z",
      "updated_at": "2026-02-03T22:04:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2761192832",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2761192832"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    }
  ]
}