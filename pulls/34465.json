{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465",
    "id": 3228775708,
    "node_id": "PR_kwDOABII587AczUc",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34465",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34465.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34465.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
    "number": 34465,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: separate log generation from log handling",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This is a mostly move-only change. It's a small refactoring that allows logging macros to be used by including a simple `util/log.h` header instead of the full `logging.h` logging implementation.\r\n\r\nOriginal motivation for this change was to reduce the size and complexity of #34374 (kernel structured logging PR) and reduce the number of conflicts it causes with other PRs. But this should also make sense as a standalone change to have a clearer separation of concerns between log generation and log handling, and avoid needing to depend on the whole logging framework in call sites that only emit log messages.\r\n\r\nRecommended to review with `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2026-01-30T17:59:41Z",
    "updated_at": "2026-02-02T14:41:11Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "eb80470cad72848090521f108ebdb39f5b2dd027",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ryanofsky:pr/mlog",
      "ref": "pr/mlog",
      "sha": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 13,
        "stargazers_count": 18,
        "watchers_count": 18,
        "size": 305252,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-31T20:59:07Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2025-10-26T17:47:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38823,
        "stargazers_count": 87876,
        "watchers_count": 87876,
        "size": 302897,
        "default_branch": "master",
        "open_issues_count": 745,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-02T12:32:31Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-02T14:50:33Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 201,
    "deletions": 134,
    "changed_files": 4,
    "commits": 5,
    "review_comments": 36,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY2MDg4ZTEwZDU4NDIwOTY0OTVhZDVjNjkxMDAyYzllYzk2N2JiY2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66088e10d5842096495ad5c691002c9ec967bbcd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/66088e10d5842096495ad5c691002c9ec967bbcd",
      "tree": {
        "sha": "90d22bf102ee573b94b97b943f4655467ba524ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90d22bf102ee573b94b97b943f4655467ba524ea"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01651324f4e540f6b96cff31e89752c3f9417293",
          "sha": "01651324f4e540f6b96cff31e89752c3f9417293",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/01651324f4e540f6b96cff31e89752c3f9417293"
        }
      ],
      "message": "move-only: Move SourceLocation to util/log.h\n\nIntroduce util/log.h as a lightweight header for code that only needs to emit\nlog messages. Move SourceLocation into this header so log-emitting code no\nlonger needs to include logging.h and depend on the full log management API.\n\nThis is a move-only change and the first change of several changes that\nseparate log generation from log handling. It also applies clang-format\nsuggestions to the moved code.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-30T09:45:19Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2025-12-16T15:37:21Z"
      },
      "sha": "66088e10d5842096495ad5c691002c9ec967bbcd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZjNmQwNGFhMTk4ODM5Yzc3MWJhYzRmZDI1YWYwMGZhZWJkNGZiNmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fc6d04aa198839c771bac4fd25af00faebd4fb6d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fc6d04aa198839c771bac4fd25af00faebd4fb6d",
      "tree": {
        "sha": "c24fd74c815b5661deaec3fbc090ca95d380819b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c24fd74c815b5661deaec3fbc090ca95d380819b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66088e10d5842096495ad5c691002c9ec967bbcd",
          "sha": "66088e10d5842096495ad5c691002c9ec967bbcd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/66088e10d5842096495ad5c691002c9ec967bbcd"
        }
      ],
      "message": "move-only: move logging categories to logging/categories.h\n\nLogging categories are currently shared between node and kernel. This\nseparation allows future commits to completely remove kernel's\ndependency on logging.h.\n\nAlso applies clang-format suggestions to the moved code.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-30T09:45:19Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-19T15:38:49Z"
      },
      "sha": "fc6d04aa198839c771bac4fd25af00faebd4fb6d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNmNmFhYTkxYzE0YjI2YjdhMjk5OTA1ZWZhZjY2NWE0NDU2NzcyNWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf6aaa91c14b26b7a299905efaf665a44567725e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cf6aaa91c14b26b7a299905efaf665a44567725e",
      "tree": {
        "sha": "3d5b23d2b1c7394fb0be29bc69e67cdba3e1cb68",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3d5b23d2b1c7394fb0be29bc69e67cdba3e1cb68"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fc6d04aa198839c771bac4fd25af00faebd4fb6d",
          "sha": "fc6d04aa198839c771bac4fd25af00faebd4fb6d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fc6d04aa198839c771bac4fd25af00faebd4fb6d"
        }
      ],
      "message": "move-onlyish: Move logging levels to util/log.h\n\nThis is not strictly move-only because BCLog::Level is now defined as a type\nalias for util::log::Level;\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-30T09:45:19Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-21T18:11:38Z"
      },
      "sha": "cf6aaa91c14b26b7a299905efaf665a44567725e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAxZWE5YzE1MjBlM2Y4YjVjMzE2ZDdhMzIxNWI2ZTU2Y2QxOWY3NmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01ea9c1520e3f8b5c316d7a3215b6e56cd19f76a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/01ea9c1520e3f8b5c316d7a3215b6e56cd19f76a",
      "tree": {
        "sha": "f58b27cea79ef98332d710b077e5598aae4991d7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f58b27cea79ef98332d710b077e5598aae4991d7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf6aaa91c14b26b7a299905efaf665a44567725e",
          "sha": "cf6aaa91c14b26b7a299905efaf665a44567725e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cf6aaa91c14b26b7a299905efaf665a44567725e"
        }
      ],
      "message": "move-only: Move logging macros to util/log.h\n\nMove logging macros to util/log.h so the entire codebase can use the same\nmacros.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-30T09:45:19Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-20T17:50:59Z"
      },
      "sha": "01ea9c1520e3f8b5c316d7a3215b6e56cd19f76a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDczNzk5OWU1YThmM2EwYzdlYmQwMzg1YjBmMThjMTA5ZmNkOGM0OWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "tree": {
        "sha": "3514b2a659bba4d6a7ece984bd420e7be11d729d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3514b2a659bba4d6a7ece984bd420e7be11d729d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01ea9c1520e3f8b5c316d7a3215b6e56cd19f76a",
          "sha": "01ea9c1520e3f8b5c316d7a3215b6e56cd19f76a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/01ea9c1520e3f8b5c316d7a3215b6e56cd19f76a"
        }
      ],
      "message": "logging: Move message formatting to util/log.h\n\nWith this change, callers can use util/log.h to log messages and do not need to\ninclude the full logging implementation in logging.h.\n\nThis is a minor change in behavior for statements where\nLogger::WillLogCategoryLevel() returns true and Logger::Enabled() returns\nfalse. Previously in that case log format arguments would be evaluated, but\ntinyformat strprintf() and LogPrintStr() would not be called. Now log format\narguments are still evaluated, and LogPrintStr() is still not called, but\ntinyformat strprintf() is called, which could be less efficient but should not\nhave any externally visible side effects.\n\nThis change only effects tests which call DisableLogging so does not effect\nbitcoind A simpler alternative would be to stop evaluating format arguments\nwhen Logger::Enabled() returns false, but this could have externally visible\nside effects if log prints call functions which affect state. Another\nalternative would be to have ShouldLog() function return a tri-state\nenable/disabled/args-only value instead of returning a bool, but this would add\nunwanted complexity.\n\nReview with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2026-01-30T09:45:19Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2025-12-16T15:37:21Z"
      },
      "sha": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d"
    },
    {
      "event": "labeled",
      "id": 22414115475,
      "node_id": "LE_lADOABII587nEu9bzwAAAAU3_EKT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22414115475",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T17:59:45Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 3824962571,
      "node_id": "IC_kwDOABII587j_EwL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3824962571",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-30T18:00:26Z",
      "updated_at": "2026-02-02T14:31:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732071588) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3729796924) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34448](https://github.com/bitcoin/bitcoin/pull/34448) (ci, iwyu: Fix warnings in `src/util` and treat them as errors by hebasto)\n* [#34435](https://github.com/bitcoin/bitcoin/pull/34435) (refactor: use `_MiB`/`_GiB` consistently for byte conversions by l0rinc)\n* [#34038](https://github.com/bitcoin/bitcoin/pull/34038) (logging: API improvements by ajtowns)\n* [#30343](https://github.com/bitcoin/bitcoin/pull/30343) (wallet, logging: Replace WalletLogPrintf() with LogInfo() by ryanofsky)\n* [#29256](https://github.com/bitcoin/bitcoin/pull/29256) (log, refactor: Allow log macros to accept context arguments by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#issuecomment-3824962571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34465"
    },
    {
      "event": "reviewed",
      "id": 3732071588,
      "node_id": "PRR_kwDOABII587ecuSk",
      "url": null,
      "actor": null,
      "commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T09:08:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\n\ncode review f5b1dda3bda6327eef270d28bf961624feaae44f",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732071588",
      "submitted_at": "2026-01-31T09:08:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22429061407,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU44FEf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22429061407",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "created_at": "2026-01-31T14:06:55Z"
    },
    {
      "event": "reviewed",
      "id": 3732674393,
      "node_id": "PRR_kwDOABII587efBdZ",
      "url": null,
      "actor": null,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T14:20:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review!\n\nUpdated f5b1dda3bda6327eef270d28bf961624feaae44f -> 9569400e51aa04dbbb99f4ee9162bdacafa0a818 ([`pr/mlog.1`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.1) -> [`pr/mlog.2`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.1..pr/mlog.2))<!-- end --> with suggested changes",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732674393",
      "submitted_at": "2026-01-31T14:20:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3732819111,
      "node_id": "PRR_kwDOABII587efkyn",
      "url": null,
      "actor": null,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T15:20:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the quick update, went over it in more detail.\nThe moves are all correct, I only have a few concerns about the last commit.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3732819111",
      "submitted_at": "2026-01-31T15:20:18Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22433487144,
      "node_id": "HRFPE_lADOABII587nEu9bzwAAAAU5I9ko",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22433487144",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "created_at": "2026-01-31T20:59:08Z"
    },
    {
      "event": "reviewed",
      "id": 3733461323,
      "node_id": "PRR_kwDOABII587eiBlL",
      "url": null,
      "actor": null,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T21:08:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Appreciate the thorough review. I definitely rushed the last commit and missed some things. Addressed your comments below and made some simplifications.\n\nUpdated 9569400e51aa04dbbb99f4ee9162bdacafa0a818 -> 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d ([`pr/mlog.2`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.2) -> [`pr/mlog.3`](https://github.com/ryanofsky/bitcoin/commits/pr/mlog.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/mlog.2..pr/mlog.3))<!-- end --> fixing unintended change in behavior in last commit when DisableLogging() is used, cleaning up leftover LogAcceptCategory call, and dropping timestamp / thread name references the logging header that would make more sense in the followup PR.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3733461323",
      "submitted_at": "2026-01-31T21:08:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3733564211,
      "node_id": "PRR_kwDOABII587eiasz",
      "url": null,
      "actor": null,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-31T22:08:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "This seems mostly correct to me now, please see my remaining comments.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3733564211",
      "submitted_at": "2026-01-31T22:08:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    },
    {
      "event": "reviewed",
      "id": 3729796924,
      "node_id": "PRR_kwDOABII587eUC88",
      "url": null,
      "actor": null,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-02-02T14:31:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d\n\nI think it makes sense to cherry-pick d425d8dd0342e1879f5d6ad20cb01a3f43232150 here. It reduces unnecessary includes and probably helps avoid future merge conflicts, and can be cherry-picked with minimal changes.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#pullrequestreview-3729796924",
      "submitted_at": "2026-02-02T14:31:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2747482597",
      "pull_request_review_id": 3729796924,
      "id": 2747482597,
      "node_id": "PRRC_kwDOABII586jw0Hl",
      "diff_hunk": "@@ -0,0 +1,137 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+#include <util/threadnames.h>\n+\n+#include <cstdint>\n+#include <string_view>\n+#include <source_location>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                      .Write(s.line())\n+                      .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                      .Finalize());\n+    }\n+};\n+",
      "path": "src/util/log.h",
      "position": 56,
      "original_position": 56,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I intentionally left these two structs in `logging.h` because I think they're ratelimiting implementations rather than source location attributes. They're not part of the `std::source_location` interface, and e.g. it helps avoids pulling in the siphash dependency into `util/log.h`. I don't think it's unreasonable to move it, but just wanted to raise that.\n\n(nit note: in my latest branch, I also ended up moving this to `util/source.h` because it's not really opinionated on logging and fits well with it being a std-wrapper, but i'm very okay with either approach).",
      "created_at": "2026-01-30T18:31:49Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2747482597",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2747482597"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 39,
      "original_start_line": 39,
      "start_side": "RIGHT",
      "line": 56,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749222629",
      "pull_request_review_id": 3732071588,
      "id": 2749222629,
      "node_id": "PRRC_kwDOABII586j3c7l",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 119,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "130df2ae9ecbef00bb094a016435c55ee78d5bd8\nsuper-nit: this isn't strictly a move, could be mentioned in the commit message - or just resolve the comment, just wanted to mention that I have checked it and looks fine",
      "created_at": "2026-01-31T08:51:01Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749222629",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749222629"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749224691",
      "pull_request_review_id": 3732071588,
      "id": 2749224691,
      "node_id": "PRRC_kwDOABII586j3dbz",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0\nnit: if we've reformatted `enum LogFlags` in the second commit, please consider it doing here as well, these things are awkward to maintain",
      "created_at": "2026-01-31T08:52:24Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749224691",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749224691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749227020",
      "pull_request_review_id": 3732071588,
      "id": 2749227020,
      "node_id": "PRRC_kwDOABII586j3eAM",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)",
      "path": "src/util/log.h",
      "position": 101,
      "original_position": 5,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "is this still needed? `./ci/lint.py` passes for me locally without it",
      "created_at": "2026-01-31T08:54:09Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749227020",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749227020"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 101,
      "original_line": 101,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749232109",
      "pull_request_review_id": 3732071588,
      "id": 2749232109,
      "node_id": "PRRC_kwDOABII586j3fPt",
      "diff_hunk": "@@ -37,44 +38,6 @@ extern const char * const DEFAULT_DEBUGLOGFILE;\n \n extern bool fLogIPs;\n \n-/// Like std::source_location, but allowing to override the function name.\n-class SourceLocation\n-{\n-public:\n-    /// The func argument must be constructed from the C++11 __func__ macro.\n-    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n-    /// Non-static string literals are not supported.\n-    SourceLocation(const char* func,\n-                   std::source_location loc = std::source_location::current())\n-        : m_func{func}, m_loc{loc} {}\n-\n-    std::string_view file_name() const { return m_loc.file_name(); }\n-    std::uint_least32_t line() const { return m_loc.line(); }\n-    std::string_view function_name_short() const { return m_func; }\n-\n-private:\n-    std::string_view m_func;\n-    std::source_location m_loc;\n-};\n-\n-struct SourceLocationEqual {\n-    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n-    {\n-        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n-    }\n-};\n-\n-struct SourceLocationHasher {\n-    size_t operator()(const SourceLocation& s) const noexcept\n-    {\n-        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n-        return size_t(CSipHasher(0, 0)",
      "path": "src/logging.h",
      "position": 61,
      "original_position": 43,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "975ab0a60514943809f46c07e78125d80cd7a3e5",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "975ab0a60514943809f46c07e78125d80cd7a3e5\nwe shouldn't need `#include <crypto/siphash.h>` here after the move",
      "created_at": "2026-01-31T09:01:57Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749232109",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749232109"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 71,
      "original_line": 71,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749233735",
      "pull_request_review_id": 3732071588,
      "id": 2749233735,
      "node_id": "PRRC_kwDOABII586j3fpH",
      "diff_hunk": "@@ -155,7 +149,7 @@ namespace BCLog {\n         std::list<std::function<void(const std::string&)>> m_print_callbacks GUARDED_BY(m_cs) {};\n \n         /** Send a string to the log output (internal) */\n-        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit)\n+        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit, std::optional<util::log::Time> time = std::nullopt)",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 29,
      "commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The timestamp addition seems more than a refactor or a `Move message formatting to util/log.h` - can we do it in a separate commit?",
      "created_at": "2026-01-31T09:05:07Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749233735",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749233735"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749235409",
      "pull_request_review_id": 3732071588,
      "id": 2749235409,
      "node_id": "PRRC_kwDOABII586j3gDR",
      "diff_hunk": "@@ -287,18 +281,5 @@ static inline bool LogAcceptCategory(BCLog::LogFlags category, BCLog::Level leve\n /** Return true if str parses as a log category and set the flag */\n bool GetLogCategory(BCLog::LogFlags& flag, std::string_view str);\n \n-template <typename... Args>\n-inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/logging.h",
      "position": 128,
      "original_position": 47,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What's the reason for not moving `LogPrintFormatInternal` in a separate move-only commit? I can see that it comes with some baggage, but if it's possible, it would make the last commit easier to review",
      "created_at": "2026-01-31T09:08:11Z",
      "updated_at": "2026-01-31T09:08:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749235409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749235409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 371,
      "original_line": 371,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749598643",
      "pull_request_review_id": 3732674393,
      "id": 2749598643,
      "node_id": "PRRC_kwDOABII586j44uz",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 119,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": 2749222629,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749222629\r\n\r\n> [130df2a](https://github.com/bitcoin/bitcoin/commit/130df2ae9ecbef00bb094a016435c55ee78d5bd8) super-nit: this isn't strictly a move, could be mentioned in the commit message - or just resolve the comment, just wanted to mention that I have checked it and looks fine\r\n\r\nThanks, updated commit message to mention type alias\r\n",
      "created_at": "2026-01-31T14:08:16Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749598643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749598643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749599016",
      "pull_request_review_id": 3732674393,
      "id": 2749599016,
      "node_id": "PRRC_kwDOABII586j440o",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749224691\r\n\r\n> [616ba29](https://github.com/bitcoin/bitcoin/commit/616ba29fa2b824bbc3fe0233634e8d2e8b6216c0) nit: if we've reformatted `enum LogFlags` in the second commit, please consider it doing here as well, these things are awkward to maintain\r\n\r\nMakes sense, ran clang-format in this and other commits",
      "created_at": "2026-01-31T14:08:41Z",
      "updated_at": "2026-01-31T21:09:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749599016",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749599016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604166",
      "pull_request_review_id": 3732674393,
      "id": 2749604166,
      "node_id": "PRRC_kwDOABII586j46FG",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)",
      "path": "src/util/log.h",
      "position": 101,
      "original_position": 5,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749227020,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749227020\r\n\r\n> is this still needed? `./ci/lint.py` passes for me locally without it\r\n\r\nYes, you can see the error by running clang-tidy on a file that uses log macros in lambdas:\r\n\r\n```bash\r\ncmake -B build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON\r\nrun-clang-tidy -quiet -p build src/rpc/server.cpp\r\n```\r\n\r\nErrors look like `src/rpc/server.cpp:298:9: error: inside a lambda, '__func__' expands to the name of the function call operator; consider capturing the name of the enclosing function explicitly [bugprone-lambda-function-name,-warnings-as-errors]`\r\n\r\n\r\n\r\n",
      "created_at": "2026-01-31T14:12:06Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749604166",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604166"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 101,
      "original_line": 101,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604894",
      "pull_request_review_id": 3732674393,
      "id": 2749604894,
      "node_id": "PRRC_kwDOABII586j46Qe",
      "diff_hunk": "@@ -37,44 +38,6 @@ extern const char * const DEFAULT_DEBUGLOGFILE;\n \n extern bool fLogIPs;\n \n-/// Like std::source_location, but allowing to override the function name.\n-class SourceLocation\n-{\n-public:\n-    /// The func argument must be constructed from the C++11 __func__ macro.\n-    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n-    /// Non-static string literals are not supported.\n-    SourceLocation(const char* func,\n-                   std::source_location loc = std::source_location::current())\n-        : m_func{func}, m_loc{loc} {}\n-\n-    std::string_view file_name() const { return m_loc.file_name(); }\n-    std::uint_least32_t line() const { return m_loc.line(); }\n-    std::string_view function_name_short() const { return m_func; }\n-\n-private:\n-    std::string_view m_func;\n-    std::source_location m_loc;\n-};\n-\n-struct SourceLocationEqual {\n-    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n-    {\n-        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n-    }\n-};\n-\n-struct SourceLocationHasher {\n-    size_t operator()(const SourceLocation& s) const noexcept\n-    {\n-        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n-        return size_t(CSipHasher(0, 0)",
      "path": "src/logging.h",
      "position": 61,
      "original_position": 43,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "975ab0a60514943809f46c07e78125d80cd7a3e5",
      "in_reply_to_id": 2749232109,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749232109\r\n\r\n> [975ab0a](https://github.com/bitcoin/bitcoin/commit/975ab0a60514943809f46c07e78125d80cd7a3e5) we shouldn't need `#include <crypto/siphash.h>` here after the move\r\n\r\nThanks, now removed in earlier commit",
      "created_at": "2026-01-31T14:12:34Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749604894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749604894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 71,
      "original_line": 71,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749606289",
      "pull_request_review_id": 3732674393,
      "id": 2749606289,
      "node_id": "PRRC_kwDOABII586j46mR",
      "diff_hunk": "@@ -155,7 +149,7 @@ namespace BCLog {\n         std::list<std::function<void(const std::string&)>> m_print_callbacks GUARDED_BY(m_cs) {};\n \n         /** Send a string to the log output (internal) */\n-        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit)\n+        void LogPrintStr_(std::string_view str, SourceLocation&& source_loc, BCLog::LogFlags category, BCLog::Level level, bool should_ratelimit, std::optional<util::log::Time> time = std::nullopt)",
      "path": "src/logging.h",
      "position": 1,
      "original_position": 29,
      "commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": 2749233735,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749233735\r\n\r\n> The timestamp addition seems more than a refactor or a `Move message formatting to util/log.h` - can we do it in a separate commit?\r\n\r\nMakes sense, updated to use a separate commit and expand the change slightly.",
      "created_at": "2026-01-31T14:13:42Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749606289",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749606289"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749612305",
      "pull_request_review_id": 3732674393,
      "id": 2749612305,
      "node_id": "PRRC_kwDOABII586j48ER",
      "diff_hunk": "@@ -287,18 +281,5 @@ static inline bool LogAcceptCategory(BCLog::LogFlags category, BCLog::Level leve\n /** Return true if str parses as a log category and set the flag */\n bool GetLogCategory(BCLog::LogFlags& flag, std::string_view str);\n \n-template <typename... Args>\n-inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/logging.h",
      "position": 128,
      "original_position": 47,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "f5b1dda3bda6327eef270d28bf961624feaae44f",
      "in_reply_to_id": 2749235409,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749235409\r\n\r\n> What's the reason for not moving `LogPrintFormatInternal` in a separate move-only commit? I can see that it comes with some baggage, but if it's possible, it would make the last commit easier to review\r\n\r\nIt would be nice to move separately, but there isn't a practical way to do it without including most of the the other changes in this commit. The problem is that `LogPrintFormatInternal` calls 2 `Logger` methods so it depends on the definition of the logger class. This commit just replaces those 2 message calls with function calls so this no longer depends on `Logger`. But hopefully this is still easy to review with suggested `--color-moved` options. It's a 13 line function and 11 lines are moving unchanged.",
      "created_at": "2026-01-31T14:19:21Z",
      "updated_at": "2026-01-31T14:20:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749612305",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749612305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 371,
      "original_line": 371,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749635953",
      "pull_request_review_id": 3732781211,
      "id": 2749635953,
      "node_id": "PRRC_kwDOABII586j5B1x",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "move-onlyish :p",
      "created_at": "2026-01-31T14:42:50Z",
      "updated_at": "2026-01-31T14:42:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749635953",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749635953"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749636775",
      "pull_request_review_id": 3732782827,
      "id": 2749636775,
      "node_id": "PRRC_kwDOABII586j5CCn",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)",
      "path": "src/util/log.h",
      "position": 101,
      "original_position": 5,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749227020,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ah, ran the wrong linter, thanks",
      "created_at": "2026-01-31T14:43:25Z",
      "updated_at": "2026-01-31T14:43:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749636775",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749636775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 101,
      "original_line": 101,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749642209",
      "pull_request_review_id": 3732795304,
      "id": 2749642209,
      "node_id": "PRRC_kwDOABII586j5DXh",
      "diff_hunk": "@@ -60,4 +60,35 @@ enum class Level {\n };\n } // namespace util::log\n \n+// Allow __func__ to be used in any context without warnings:\n+// NOLINTNEXTLINE(bugprone-lambda-function-name)\n+#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+\n+// Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n+// Be conservative when using functions that unconditionally log to debug.log!\n+// It should not be the case that an inbound peer can fill up a user's storage\n+// with debug.log entries.\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+\n+// Use a macro instead of a function for conditional logging to prevent\n+// evaluating arguments when logging for the category is not enabled.\n+\n+// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n+// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n+// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n+#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)     \\",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 22,
      "commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "original_commit_id": "616ba29fa2b824bbc3fe0233634e8d2e8b6216c0",
      "in_reply_to_id": 2749224691,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "These lines didn't change, what I mean was to decide if this is a good opportunity to untangle these lines:\r\n```C++\r\n#define detail_LogIfCategoryAndLevelEnabled(category, level, ...) \\\r\n    do { \\\r\n        if (LogAcceptCategory((category), (level))) { \\\r\n            bool rate_limit{level >= BCLog::Level::Info}; \\\r\n            Assume(!rate_limit); /*Only called with the levels below*/ \\\r\n            LogPrintLevel_(category, level, rate_limit, __VA_ARGS__); \\\r\n        } \\\r\n    } while (0)\r\n```\r\n\r\nso that if I make one line longer or shorter we won't have to update every line break anymore, like we forgot to do in e.g. https://github.com/bitcoin/bitcoin/blob/5ad94cf6b7eb2aefaebf04184ba2c187a304a8c4/src/test/script_tests.cpp#L1175-L1180\r\nIt seems `clang-tidy` doesn't have an opinion on this.\r\n\r\nEdit: we aren't always aligning the backslashes, e.g. https://github.com/bitcoin/bitcoin/blob/6eb5ba569141b722a5e27ef36e04994886769c44/src/crypto/siphash.cpp#L13-L20",
      "created_at": "2026-01-31T14:48:04Z",
      "updated_at": "2026-01-31T14:50:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749642209",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749642209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749652500",
      "pull_request_review_id": 3732819111,
      "id": 2749652500,
      "node_id": "PRRC_kwDOABII586j5F4U",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n+{\n+    if (util::log::ShouldLog(flag, level)) {",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 51,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "9569400e51aa04dbbb99f4ee9162bdacafa0a818\nThis last commit is still more than a \"Move\".\n\nThe previous `LogInstance().Enabled()` https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/logging.h#L260-L265 was changed to `util::log::ShouldLog(flag, level)` https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/logging.cpp#L154-L158, which is always enabled for `LogInfo` (+ `Warn` & `Error`)  so `tfm::format` below will always be executed.\nSo calling https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/logging.cpp#L111-L121 would have gated it before, but not after.",
      "created_at": "2026-01-31T14:57:02Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749652500",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749652500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749662442",
      "pull_request_review_id": 3732819111,
      "id": 2749662442,
      "node_id": "PRRC_kwDOABII586j5ITq",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\"With this change, callers can use util/log.h to log messages and do not need to include the full logging implementation in logging.h\"\n\nWhat about debug logs that still need the `LogAcceptCategory`?\n\n```patch\ndiff --git a/src/hash.h b/src/hash.h\n--- a/src/hash.h\t(revision c96e11340eaad06b5c10b36ff040574f8fef9867)\n+++ b/src/hash.h\t(date 1769872030470)\n@@ -14,6 +14,7 @@\n #include <serialize.h>\n #include <span.h>\n #include <uint256.h>\n+#include <util/log.h>\n \n #include <string>\n #include <vector>\n@@ -28,6 +29,7 @@\n     static const size_t OUTPUT_SIZE = CSHA256::OUTPUT_SIZE;\n \n     void Finalize(std::span<unsigned char> output) {\n+        LogDebug(BCLog::NET, \"hello\\n\");\n         assert(output.size() == OUTPUT_SIZE);\n         unsigned char buf[CSHA256::OUTPUT_SIZE];\n         sha.Finalize(buf);\n```\nfails with:\n> /Users/lorinc/CLionProjects/bitcoin/src/hash.h:32:9: error: use of undeclared identifier 'LogAcceptCategory'\n   32 |         LogDebug(BCLog::NET, \"hello\\n\");",
      "created_at": "2026-01-31T15:09:01Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749662442",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749662442"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749664343",
      "pull_request_review_id": 3732819111,
      "id": 2749664343,
      "node_id": "PRRC_kwDOABII586j5IxX",
      "diff_hunk": "@@ -6,7 +6,11 @@\n #define BITCOIN_UTIL_LOG_H\n \n #include <crypto/siphash.h>",
      "path": "src/util/log.h",
      "position": 8,
      "original_position": 3,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "9569400e51aa04dbbb99f4ee9162bdacafa0a818\nWe should probably add string and chrono here:\n```C++\n#include <chrono>\n#include <crypto/siphash.h>\n#include <logging/categories.h> // IWYU pragma: export\n#include <span.h>\n#include <string>\n#include <tinyformat.h>\n#include <util/check.h>\n#include <util/threadnames.h>\n```",
      "created_at": "2026-01-31T15:10:59Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749664343",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749664343"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 8,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749666365",
      "pull_request_review_id": 3732819111,
      "id": 2749666365,
      "node_id": "PRRC_kwDOABII586j5JQ9",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 33,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`thread_name` seems unused - I assume it was used in the parent change. Can we either add it when it will be used or document why it's not?",
      "created_at": "2026-01-31T15:13:06Z",
      "updated_at": "2026-01-31T20:57:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749666365",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749666365"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670094",
      "pull_request_review_id": 3732819111,
      "id": 2749670094,
      "node_id": "PRRC_kwDOABII586j5KLO",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 89,
      "original_position": 49,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: we might as well remove the redundant `inline` while we're here",
      "created_at": "2026-01-31T15:17:21Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670094",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670619",
      "pull_request_review_id": 3732819111,
      "id": 2749670619,
      "node_id": "PRRC_kwDOABII586j5KTb",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 72,
      "original_position": 31,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "does this comment really help?",
      "created_at": "2026-01-31T15:17:54Z",
      "updated_at": "2026-01-31T15:20:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670619",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749670619"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749991124",
      "pull_request_review_id": 3733461323,
      "id": 2749991124,
      "node_id": "PRRC_kwDOABII586j6YjU",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n+{\n+    if (util::log::ShouldLog(flag, level)) {",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 51,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749652500,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749652500\r\n\r\n> [9569400](https://github.com/bitcoin/bitcoin/commit/9569400e51aa04dbbb99f4ee9162bdacafa0a818) This last commit is still more than a \"Move\".\r\n> \r\n> The previous `LogInstance().Enabled()`\r\n> \r\n> was changed to `util::log::ShouldLog(flag, level)`\r\n\r\nNice catch. This code was just wrong. It didn't effect much in practice because `DisableLogging` is only used by the kernel library and by a fuzz test, but this was a mistake.",
      "created_at": "2026-01-31T20:41:02Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749991124",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749991124"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749992757",
      "pull_request_review_id": 3733461323,
      "id": 2749992757,
      "node_id": "PRRC_kwDOABII586j6Y81",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749662442,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749662442\r\n\r\n> \"With this change, callers can use util/log.h to log messages and do not need to include the full logging implementation in logging.h\"\r\n\r\nAgain nice catch. This is related to the mistake above. This commit should be replacing `LogAcceptCategory()` not `Enabled() `with `ShouldLog()` ",
      "created_at": "2026-01-31T20:43:02Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749992757",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749992757"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749994222",
      "pull_request_review_id": 3733461323,
      "id": 2749994222,
      "node_id": "PRRC_kwDOABII586j6ZTu",
      "diff_hunk": "@@ -6,7 +6,11 @@\n #define BITCOIN_UTIL_LOG_H\n \n #include <crypto/siphash.h>",
      "path": "src/util/log.h",
      "position": 8,
      "original_position": 3,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749664343,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749664343\r\n\r\n> [9569400](https://github.com/bitcoin/bitcoin/commit/9569400e51aa04dbbb99f4ee9162bdacafa0a818) We should probably add string and chrono here:\r\n\r\nGood catch, added string, but wound up simplifying and dropping the time type.",
      "created_at": "2026-01-31T20:44:30Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749994222",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749994222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 8,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749997284",
      "pull_request_review_id": 3733461323,
      "id": 2749997284,
      "node_id": "PRRC_kwDOABII586j6aDk",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n } // namespace util::log\n \n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 89,
      "original_position": 49,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670094,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670094\r\n\r\n> nit: we might as well remove the redundant `inline` while we're here\r\n\r\nKept for now to keep diff output more readable, since this line is move-only. I also don't mind the reminder that the function is inline, even though I wouldn't add it myself.\r\n",
      "created_at": "2026-01-31T20:48:14Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749997284",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749997284"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749999164",
      "pull_request_review_id": 3733461323,
      "id": 2749999164,
      "node_id": "PRRC_kwDOABII586j6ag8",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 72,
      "original_position": 31,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670619,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749670619\r\n\r\n> does this comment really help?\r\n\r\nI'm not the author of this comment, but I would think it's probably helpful to know that this value is only a hint and setting it may not force rate limiting or prevent it. Maybe the field could have a better name or the comment could be clarified, but the name seems to match existing code and the comment seems like it adds more information.",
      "created_at": "2026-01-31T20:50:27Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749999164",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2749999164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750005276",
      "pull_request_review_id": 3733461323,
      "id": 2750005276,
      "node_id": "PRRC_kwDOABII586j6cAc",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string thread_name{util::ThreadGetInternalName()};",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 33,
      "commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749666365,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2749666365\r\n\r\n> `thread_name` seems unused - I assume it was used in the parent change. Can we either add it when it will be used or document why it's not?\r\n\r\nGood catch. I didn't realize it was unused. Dropped it here and also dropped timestamp to make this simpler. It will make sense for followup PR's to add these fields when they are actually needed.",
      "created_at": "2026-01-31T20:57:19Z",
      "updated_at": "2026-01-31T21:08:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750005276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750005276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750057927",
      "pull_request_review_id": 3733536634,
      "id": 2750057927,
      "node_id": "PRRC_kwDOABII586j6o3H",
      "diff_hunk": "@@ -51,15 +55,52 @@ struct SourceLocationHasher {\n };\n \n namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n enum class Level {\n     Trace = 0, // High-volume or detailed logging for development/debugging\n     Debug,     // Reasonably noisy logging, but still usable in production\n     Info,      // Default\n     Warning,\n     Error,\n };\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    std::chrono::system_clock::time_point timestamp{std::chrono::system_clock::now()};\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited",
      "path": "src/util/log.h",
      "position": 72,
      "original_position": 31,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "9569400e51aa04dbbb99f4ee9162bdacafa0a818",
      "in_reply_to_id": 2749670619,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> only a hint and setting it may not force rate limiting\r\n\r\nOh, that's not what I understood from it...",
      "created_at": "2026-01-31T21:36:11Z",
      "updated_at": "2026-01-31T21:36:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750057927",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750057927"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750076448",
      "pull_request_review_id": 3733564211,
      "id": 2750076448,
      "node_id": "PRRC_kwDOABII586j6tYg",
      "diff_hunk": "",
      "path": "src/util/log.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d\n```patch\n-This change only effects tests which call DisableLogging so does not effect\n-bitcoind A simpler alternative would be to stop evaluating format arguments\n+This change only affects tests which call DisableLogging so does not affect\n+bitcoind. A simpler alternative would be to stop evaluating format arguments\n```",
      "created_at": "2026-01-31T21:45:59Z",
      "updated_at": "2026-01-31T22:08:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750076448",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750076448"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750095591",
      "pull_request_review_id": 3733564211,
      "id": 2750095591,
      "node_id": "PRRC_kwDOABII586j6yDn",
      "diff_hunk": "@@ -45,13 +45,7 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum class Level {\n-        Trace = 0, // High-volume or detailed logging for development/debugging\n-        Debug,     // Reasonably noisy logging, but still usable in production\n-        Info,      // Default\n-        Warning,\n-        Error,\n-    };\n+    using Level = util::log::Level;",
      "path": "src/logging.h",
      "position": 119,
      "original_position": 11,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "130df2ae9ecbef00bb094a016435c55ee78d5bd8",
      "in_reply_to_id": 2749222629,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We don't need this in the last commit anymore, since `logging.h` includes `util/log.h`, right?",
      "created_at": "2026-01-31T22:02:56Z",
      "updated_at": "2026-01-31T22:08:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750095591",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2750095591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754326309",
      "pull_request_review_id": 3729796924,
      "id": 2754326309,
      "node_id": "PRRC_kwDOABII586kK68l",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;",
      "path": "src/util/log.h",
      "position": 85,
      "original_position": 85,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is now defined here and in `logging.h`. Would remove this alias and just use `util::log::Level` in this file?\n\n<details>\n<summary>git diff on 737999e5a8</summary>\n\n```diff\ndiff --git a/src/util/log.h b/src/util/log.h\nindex 2e26b3eeec..c64bda82d1 100644\n--- a/src/util/log.h\n+++ b/src/util/log.h\n@@ -81,12 +81,8 @@ bool ShouldLog(Category category, Level level);\n void Log(Entry entry);\n } // namespace util::log\n \n-namespace BCLog {\n-using Level = util::log::Level;\n-} // namespace BCLog\n-\n template <typename... Args>\n-inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, util::log::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n {\n     std::string log_msg;\n     try {\n@@ -105,9 +101,9 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n // Be conservative when using functions that unconditionally log to debug.log!\n // It should not be the case that an inbound peer can fill up a user's storage\n // with debug.log entries.\n-#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n-#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n-#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogInfo(...) LogPrintLevel_(BCLog::LogFlags::ALL, util::log::Level::Info, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, util::log::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n+#define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, util::log::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n \n // Use a macro instead of a function for conditional logging to prevent\n // evaluating arguments when logging for the category is not enabled.\n@@ -118,14 +114,14 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n #define detail_LogIfCategoryAndLevelEnabled(category, level, ...)      \\\n     do {                                                               \\\n         if (util::log::ShouldLog((category), (level))) {               \\\n-            bool rate_limit{level >= BCLog::Level::Info};              \\\n+            bool rate_limit{level >= util::log::Level::Info};              \\\n             Assume(!rate_limit); /*Only called with the levels below*/ \\\n             LogPrintLevel_(category, level, rate_limit, __VA_ARGS__);  \\\n         }                                                              \\\n     } while (0)\n \n // Log conditionally, prefixing the output with the passed category name.\n-#define LogDebug(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Debug, __VA_ARGS__)\n-#define LogTrace(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Trace, __VA_ARGS__)\n+#define LogDebug(category, ...) detail_LogIfCategoryAndLevelEnabled(category, util::log::Level::Debug, __VA_ARGS__)\n+#define LogTrace(category, ...) detail_LogIfCategoryAndLevelEnabled(category, util::log::Level::Trace, __VA_ARGS__)\n \n #endif // BITCOIN_UTIL_LOG_H\n\n```\n</details>\n",
      "created_at": "2026-02-02T13:26:31Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754326309",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754326309"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 85,
      "original_line": 85,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754330399",
      "pull_request_review_id": 3729796924,
      "id": 2754330399,
      "node_id": "PRRC_kwDOABII586kK78f",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 89,
      "original_position": 89,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: this file has quite a few lines exceeding 100 characters",
      "created_at": "2026-02-02T13:27:34Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754330399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754330399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754450447",
      "pull_request_review_id": 3729796924,
      "id": 2754450447,
      "node_id": "PRRC_kwDOABII586kLZQP",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;\n+} // namespace BCLog\n+\n+template <typename... Args>\n+inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)",
      "path": "src/util/log.h",
      "position": 89,
      "original_position": 89,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\ninline void LogPrintFormatInternal(SourceLocation&& source_loc, util::log::Category flag, BCLog::Level level, bool should_ratelimit, util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args)\n```",
      "created_at": "2026-02-02T13:53:18Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754450447",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754450447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 89,
      "original_line": 89,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754586625",
      "pull_request_review_id": 3729796924,
      "id": 2754586625,
      "node_id": "PRRC_kwDOABII586kL6gB",
      "diff_hunk": "@@ -602,3 +602,16 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n     m_category_log_levels[flag] = level.value();\n     return true;\n }\n+\n+bool util::log::ShouldLog(Category category, Level level)\n+{\n+    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+}\n+\n+void util::log::Log(util::log::Entry entry)\n+{\n+    BCLog::Logger& logger{LogInstance()};\n+    if (logger.Enabled()) {\n+        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n+    }",
      "path": "src/logging.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think it would be better if `ShouldLog` does all filtering, and `Log` does unconditional logging. (Hastily) adapting [my approach](https://github.com/bitcoin/bitcoin/pull/34374/changes#diff-c75b427ca21222164fa8e95d82f29fefa6b60044d0510fe85f4e06e57cdc154bR141-R149) to this PR, we could end up with something like:\n\n<details>\n<summary>git diff on 737999e5a8</summary>\n\n```diff\ndiff --git a/src/logging.cpp b/src/logging.cpp\nindex df6946d661..357a656946 100644\n--- a/src/logging.cpp\n+++ b/src/logging.cpp\n@@ -605,13 +605,11 @@ bool BCLog::Logger::SetCategoryLogLevel(std::string_view category_str, std::stri\n \n bool util::log::ShouldLog(Category category, Level level)\n {\n-    return LogInstance().WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level);\n+    BCLog::Logger& logger{LogInstance()};\n+    return logger.WillLogCategoryLevel(static_cast<BCLog::LogFlags>(category), level) && logger.Enabled();\n }\n \n void util::log::Log(util::log::Entry entry)\n {\n-    BCLog::Logger& logger{LogInstance()};\n-    if (logger.Enabled()) {\n-        logger.LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n-    }\n+    LogInstance().LogPrintStr(std::move(entry.message), std::move(entry.source_loc), static_cast<BCLog::LogFlags>(entry.category), entry.level, entry.should_ratelimit);\n }\ndiff --git a/src/util/log.h b/src/util/log.h\nindex 2e26b3eeec..26f1e7cb94 100644\n--- a/src/util/log.h\n+++ b/src/util/log.h\n@@ -97,9 +97,18 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n     util::log::Log(util::log::Entry{.category = flag, .level = level, .should_ratelimit = should_ratelimit, .source_loc = std::move(source_loc), .message = std::move(log_msg)});\n }\n \n-// Allow __func__ to be used in any context without warnings:\n-// NOLINTNEXTLINE(bugprone-lambda-function-name)\n-#define LogPrintLevel_(category, level, should_ratelimit, ...) LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__)\n+// For Info levels and up, arguments are always evaluated. For Debug and lower,\n+// arguments are ONLY evaluated when the log is actually produced.\n+#define LogPrintLevel_(category, level, should_ratelimit, ...)                                                \\\n+    do {                                                                                                      \\\n+        if (util::log::ShouldLog(category, level)) {                                                          \\\n+            /* NOLINTNEXTLINE(bugprone-lambda-function-name) */                                               \\\n+            LogPrintFormatInternal(SourceLocation{__func__}, category, level, should_ratelimit, __VA_ARGS__); \\\n+        } else if ((level) >= util::log::Level::Info) {                                                       \\\n+            /* For Info levels and up, we guarantee that arguments are always evaluated. */                   \\\n+            [](auto&&...) {}(__VA_ARGS__);                                                                    \\\n+        }                                                                                                     \\\n+    } while (0)\n \n // Log unconditionally. Uses basic rate limiting to mitigate disk filling attacks.\n // Be conservative when using functions that unconditionally log to debug.log!\n@@ -109,23 +118,8 @@ inline void LogPrintFormatInternal(SourceLocation&& source_loc, BCLog::LogFlags\n #define LogWarning(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Warning, /*should_ratelimit=*/true, __VA_ARGS__)\n #define LogError(...) LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Error, /*should_ratelimit=*/true, __VA_ARGS__)\n \n-// Use a macro instead of a function for conditional logging to prevent\n-// evaluating arguments when logging for the category is not enabled.\n-\n-// Log by prefixing the output with the passed category name and severity level. This logs conditionally if\n-// the category is allowed. No rate limiting is applied, because users specifying -debug are assumed to be\n-// developers or power users who are aware that -debug may cause excessive disk usage due to logging.\n-#define detail_LogIfCategoryAndLevelEnabled(category, level, ...)      \\\n-    do {                                                               \\\n-        if (util::log::ShouldLog((category), (level))) {               \\\n-            bool rate_limit{level >= BCLog::Level::Info};              \\\n-            Assume(!rate_limit); /*Only called with the levels below*/ \\\n-            LogPrintLevel_(category, level, rate_limit, __VA_ARGS__);  \\\n-        }                                                              \\\n-    } while (0)\n-\n // Log conditionally, prefixing the output with the passed category name.\n-#define LogDebug(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Debug, __VA_ARGS__)\n-#define LogTrace(category, ...) detail_LogIfCategoryAndLevelEnabled(category, BCLog::Level::Trace, __VA_ARGS__)\n+#define LogDebug(category, ...) LogPrintLevel_(category, util::log::Level::Debug, /*should_ratelimit=*/false, __VA_ARGS__)\n+#define LogTrace(category, ...) LogPrintLevel_(category, util::log::Level::Trace, /*should_ratelimit=*/false, __VA_ARGS__)\n \n #endif // BITCOIN_UTIL_LOG_H\n\n```\n</details>\n\nThis better enables users (e.g. places where we conditionally calculate memusage) to avoid expensive and unnecessary operations, and is imo a more consistent implementation of the interface. I think it also addresses the \"This is a minor change in behavior for statements where Logger::WillLogCategoryLevel() returns true and Logger::Enabled() returns false...\" paragraphs in the 737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d commit message.",
      "created_at": "2026-02-02T14:20:57Z",
      "updated_at": "2026-02-02T14:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754586625",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754586625"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": 606,
      "original_start_line": 606,
      "start_side": "RIGHT",
      "line": 616,
      "original_line": 616,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754681201",
      "pull_request_review_id": 3739848992,
      "id": 2754681201,
      "node_id": "PRRC_kwDOABII586kMRlx",
      "diff_hunk": "@@ -0,0 +1,131 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_LOG_H\n+#define BITCOIN_UTIL_LOG_H\n+\n+#include <crypto/siphash.h>\n+#include <logging/categories.h> // IWYU pragma: export\n+#include <span.h>\n+#include <tinyformat.h>\n+#include <util/check.h>\n+\n+#include <cstdint>\n+#include <source_location>\n+#include <string>\n+#include <string_view>\n+\n+/// Like std::source_location, but allowing to override the function name.\n+class SourceLocation\n+{\n+public:\n+    /// The func argument must be constructed from the C++11 __func__ macro.\n+    /// Ref: https://en.cppreference.com/w/cpp/language/function.html#func\n+    /// Non-static string literals are not supported.\n+    SourceLocation(const char* func,\n+                   std::source_location loc = std::source_location::current())\n+        : m_func{func}, m_loc{loc} {}\n+\n+    std::string_view file_name() const { return m_loc.file_name(); }\n+    std::uint_least32_t line() const { return m_loc.line(); }\n+    std::string_view function_name_short() const { return m_func; }\n+\n+private:\n+    std::string_view m_func;\n+    std::source_location m_loc;\n+};\n+\n+struct SourceLocationEqual {\n+    bool operator()(const SourceLocation& lhs, const SourceLocation& rhs) const noexcept\n+    {\n+        return lhs.line() == rhs.line() && std::string_view(lhs.file_name()) == std::string_view(rhs.file_name());\n+    }\n+};\n+\n+struct SourceLocationHasher {\n+    size_t operator()(const SourceLocation& s) const noexcept\n+    {\n+        // Use CSipHasher(0, 0) as a simple way to get uniform distribution.\n+        return size_t(CSipHasher(0, 0)\n+                          .Write(s.line())\n+                          .Write(MakeUCharSpan(std::string_view{s.file_name()}))\n+                          .Finalize());\n+    }\n+};\n+\n+namespace util::log {\n+/** Opaque to util::log; interpreted by consumers (e.g., BCLog::LogFlags). */\n+using Category = uint64_t;\n+\n+enum class Level {\n+    Trace = 0, // High-volume or detailed logging for development/debugging\n+    Debug,     // Reasonably noisy logging, but still usable in production\n+    Info,      // Default\n+    Warning,\n+    Error,\n+};\n+\n+struct Entry {\n+    Category category;\n+    Level level;\n+    bool should_ratelimit{false}; //!< Hint for consumers if this entry should be ratelimited\n+    SourceLocation source_loc;\n+    std::string message;\n+};\n+\n+/** Return whether messages with specified category and level should be logged. Applications using the logging library need to provide this. */\n+bool ShouldLog(Category category, Level level);\n+\n+/** Send message to be logged. Applications using the logging library need to provide this. */\n+void Log(Entry entry);\n+} // namespace util::log\n+\n+namespace BCLog {\n+using Level = util::log::Level;",
      "path": "src/util/log.h",
      "position": 85,
      "original_position": 85,
      "commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "original_commit_id": "737999e5a8f3a0c7ebd0385b0f18c109fcd8c49d",
      "in_reply_to_id": 2754326309,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Related to https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2750095591",
      "created_at": "2026-02-02T14:41:11Z",
      "updated_at": "2026-02-02T14:41:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34465#discussion_r2754681201",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2754681201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34465"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 85,
      "original_line": 85,
      "side": "RIGHT"
    }
  ]
}