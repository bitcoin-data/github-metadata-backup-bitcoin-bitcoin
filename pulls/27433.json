{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27433",
    "id": 1305116489,
    "node_id": "PR_kwDOABII585Nyn9J",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/27433",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/27433.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/27433.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27433",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27433/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27433/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27433/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/13d104d16e069e67bdff63ca68b91a32d66821c1",
    "number": 27433,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "getblocktemplate improvements for segwit and sigops",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "**Sigops**\r\n\r\nTwo recent F2Pool blocks violated the sigops limit. Both by 3.\r\n\r\nI suspect they were not using `getblocktemplate`. If you look at the [template](https://miningpool.observer/template-and-block/00000000000000000004e0ec4f27bd3347381e8e19ed98d7f918e8c1c292ae97) right before the valid block at the same height, which was produced two minutes later, you'll see that it matches the block with 3 small transactions difference. In other words, the valid block producer likely did use `getblocktemplate` around the same time and did not experience an issue.\r\n\r\nIt's also clear by looking at [Mempool.Space](https://mempool.space/block/00000000000000000004e0ec4f27bd3347381e8e19ed98d7f918e8c1c292ae97) that the valid block excluded many large bare multisig transactions. Those transactions paid more than enough in fees to be included, but we would have excluded them due to running out of sigops.\r\n\r\nAs can be seen in `BlockAssembler::addPackageTxs` and `TestPackage` we simply don't add a package to the block if it doesn't fit the remaining weight or sigops. Custom block construction software might not do that. I initially though they might have forgotten to check SegWit related sigops, but that seems unlikely given that they were only off by 3 in both blocks.\r\n\r\nI suspect their mistake was to not count the number of sigops in the coinbase: it pays to legacy P2PKH which uses 4 sigops. Our code reserves 400 sigops for the coinbase, so would not have caused this.\r\n\r\nAnyway, while checking our code I added a few extra fields to the block statistics of `getblocktemplate`:\r\n\r\n* `sigops`: total sigops for the block excluding the coinbase\r\n* `coinbase_reserved_sigops`: how many sigops we reserve for the coinbase (400)\r\n* `weightlimit`\r\n* `coinbase_reserved_weight`\r\n\r\nI added a belt and suspenders check for the sigops limit in the RPC code. Note that we already check it when adding packages to a block _and_ in `TestBlockValidity`.\r\n\r\n**Segwit**\r\n\r\nI also removed the need to set `{\"rules\": \"!segwit\"}`, the generation of pre-segwit blocks, and the test code that checks activation. These two commits can easily be dropped if people don't like them.",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2023-04-06T18:18:37Z",
    "updated_at": "2023-07-22T09:46:18Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "3f54938f540ebd3e268be0ba5e2cd14617c0ab20",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2023/04/gbt",
      "ref": "2023/04/gbt",
      "sha": "13d104d16e069e67bdff63ca68b91a32d66821c1",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 4,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 224196,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T16:21:28Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2023-03-31T09:52:58Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5a8bd4505687a7ec76d731b1a8249ee04d641990",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 673,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-03T00:03:27Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27433"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 40,
    "deletions": 63,
    "changed_files": 9,
    "commits": 7,
    "review_comments": 0,
    "comments": 3
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVkZDAwNjc3ZGJkZGQ1YjQwZmEzZDI5NTRlOGNiMDRmY2Q4MzU5ZjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/edd00677dbddd5b40fa3d2954e8cb04fcd8359f4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/edd00677dbddd5b40fa3d2954e8cb04fcd8359f4",
      "tree": {
        "sha": "954b58875d760e1f5a6aa65e61a345a0dbdc35cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/954b58875d760e1f5a6aa65e61a345a0dbdc35cd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 954b58875d760e1f5a6aa65e61a345a0dbdc35cd\nparent 5a8bd4505687a7ec76d731b1a8249ee04d641990\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680795370 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680795370 +0200\n\nminer: always treat SegWit as active\n\nThe getblocktemplate RPC would check if SegWit has activated yet at the tip. This has been the case for more than five years.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQu5usACgkQV/+b28ww\nEAl/Jw//Z2up6gayxoYzal0U3wVpHWWVXTyh8y1w/Sz2cL01YGUZnhhqKvuBLh0g\nWs02vsA/1lGQZhM8V+Ga4ib0ivxSDMe14KhvRrf9IkH7nD0B05j83/TUMQ1dEjnC\ntmr6cow4F2QB8/MppMBtxHRZBYD6WHDWdMYAMbe9IAcYX4Oku/QJb305cT+sUTST\nYS5Hv/jJRrU/7SL/hQmfK4+NwX/4BPdMPrOuptcH9az4X3lRH4yl+G2an9uSPW2H\nmN9qbrh4/PiNOf7xru2P16GNcC/iY3dja+Dyc0cCiXZGQG7BTmGc1XdP8QUJ5kC9\nmpg3+rS8lanX1vp7xv7At/6F2r7Jfo7GAO62yrAPW1LT1mnnWnJFnrMjzACn5Jf1\n6T/rCZC9J00vrC5f0cwL+v9JD/TvxMEh5jQuDksEc9w2sOQxm6OJjpXEXzEcLAyj\nRtIL90k0x0MsLZFzYMZVpOseqFphodVpBEtoYpFBsgGnTDAxT6skwMB4ZKqrn2uN\nbEPB/VHwPB7o34p6p+nlDyobcJrvK/HyOs0wsrGq3nUIXn+8guaDJK82RJwvQUf9\nOlXedO6V5aZgFvsz5jHEmnwaaPceYRDGou8kYTTNMkt4KC4kil15Z7CUyqs0zYu7\nI9oStkLy4uq49vK6vlAjNJoBzzsKbhKIGS+/jl3uytGx2HIbzas=\n=zbgf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a8bd4505687a7ec76d731b1a8249ee04d641990",
          "sha": "5a8bd4505687a7ec76d731b1a8249ee04d641990",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5a8bd4505687a7ec76d731b1a8249ee04d641990"
        }
      ],
      "message": "miner: always treat SegWit as active\n\nThe getblocktemplate RPC would check if SegWit has activated yet at the tip. This has been the case for more than five years.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T15:36:10Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T15:36:10Z"
      },
      "sha": "edd00677dbddd5b40fa3d2954e8cb04fcd8359f4"
    },
    {
      "event": "commented",
      "id": 1499447828,
      "node_id": "IC_kwDOABII585ZX8IU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1499447828",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T18:18:40Z",
      "updated_at": "2023-07-22T09:46:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/27433#pullrequestreview-1494088880) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28123](https://github.com/bitcoin/bitcoin/pull/28123) (Bugfix: RPC: Remove quotes from non-string oneline descriptions by luke-jr)\n* [#27101](https://github.com/bitcoin/bitcoin/pull/27101) (Support JSON-RPC 2.0 when requested by client by pinheadmz)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27433#issuecomment-1499447828",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27433"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8948694862,
      "node_id": "HRFPE_lADOABII585i0OWUzwAAAAIVYj9O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8948694862",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T18:29:28Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZhYjExOWQ0YzFjOGNmM2Q5YzA5OTRjMjJkNzVkMDE2YTMwY2RkNmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a",
      "tree": {
        "sha": "56ee76d14275916f9c0281d04acd13534070fa17",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/56ee76d14275916f9c0281d04acd13534070fa17"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 56ee76d14275916f9c0281d04acd13534070fa17\nparent edd00677dbddd5b40fa3d2954e8cb04fcd8359f4\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680796249 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680806783 +0200\n\nrpc: getblocktemplate assume !segwit rule\n\nUse the signet rule for the example in the documentation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQvE4IACgkQV/+b28ww\nEAl1+g//Vw7BZYqxgqe+84Hu4ybXUNIcj9L/76R3elEjRukY89qiyOkuyckMeRj8\nOpkocKeubGHh4ivihXgltTMqB+7ykwr4FNRlMKRXXMbDDiVT7r+VeEYyC4TvVTD6\ngG3byfd1ggd0z5q2fYDT25kjBdKzi+Tr5UzKAoMLpYMjDGF5t1XdDkOcrwJB490V\nQioHhHW/DpRrsH9dldJ8fg0LrUeDkqYHX5ZvmM44s//zcFqjH7pQ6eN2xS1D6nFM\neMz2TOwOtHimtDrfeyVPsBVtMZjy0bRjhWlX7qizycY2VWM14g9hLuno1YLiYQH8\nLaCnET44Jo79Y7InY/Jwxmq8Vvgfab+u5Ndq459WK+A/xqeypN/57+1a0tW51a8I\n1hywhI+PqHjeRmiD7rp78HMn7zl/DnP6lmPzvFtzMHz6tOQV4ReTKKM/7O2tieeI\npgq3Xmaj6uv3WqHEdqjoQKIezs0joUKYvLOsyjD4KQ3wxlv5uQq2z0G3lIus9zzv\nwYhwkaQetLTsu9VLOgj8NVX6/J9ZEsff97Z21UN4Wk0CRMGjjuLyGFZGL08q8WWh\nSnQno5QuyeJPMlCc6wn4MGavEi+l8UzttgXrbD7Y17EVHXfk3R8dVwc+R7TIgXGu\nphNwIIfdNSHOIsZA1+Kix6nsj33SBes4t9DLW1cMB/iSGKuom+4=\n=aUI8\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/edd00677dbddd5b40fa3d2954e8cb04fcd8359f4",
          "sha": "edd00677dbddd5b40fa3d2954e8cb04fcd8359f4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/edd00677dbddd5b40fa3d2954e8cb04fcd8359f4"
        }
      ],
      "message": "rpc: getblocktemplate assume !segwit rule\n\nUse the signet rule for the example in the documentation.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T18:46:23Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T15:50:49Z"
      },
      "sha": "6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFlMjg5YWJjZmFlZGFiYjE3MDExYzk0Y2I5NDcxMTRjZjg4ZDlhMDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae289abcfaedabb17011c94cb947114cf88d9a02",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ae289abcfaedabb17011c94cb947114cf88d9a02",
      "tree": {
        "sha": "7ae953cbc772fdae1d462a600f4b1acb2ac76d38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7ae953cbc772fdae1d462a600f4b1acb2ac76d38"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7ae953cbc772fdae1d462a600f4b1acb2ac76d38\nparent 6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680798081 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680806786 +0200\n\nrpc: getblocktemplate drop warning for missing sigops field\n\nThis field is always present.\n\nThe warning was added in a6099ef319a73e2255dca77065600abb22c4f5f8, but even then the field was always present.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQvE4MACgkQV/+b28ww\nEAkOBhAAio8O4w2AfPkraJBiUHfzKa2BkKNqZiRN74oE9qB5AHRy4iYZ2m0pgNhk\nhMPCvhptjsZcQTRf3XXj8YoGBH/yRJ/6jvWgAGQWic4AYY+YTYQnneLJAqvvY302\nMNuob/0OxPUSf8LBZ0HHQUzt2bYzkagdghD1lX2d6QrC5ZFqs2CgKhbtAivA/1Qt\n0U2FIqVPaltUtfpKANNKrx7lt+C56z5rSg62nwfIYcL4p6tNE3eRFn9mgWEKtOQw\nv2RiaXPt3LAP+Dgb+OQCZuDbw7NDZh9UQ56a6wzAs9liYUOqW6QnxOG8vSOee2u9\n8zwBb/phtyXlqQwFNNJW99XBVOr6deKMGR8mH/HVjoKYln069EiWGVytrMMI/m9i\ngIyezDahSXzq1db3x7YFZzSnRpHiAkXGx3YLC27bFqmLhnnlpQpQ34S7BIsJHe3o\nBp69lfSaL8nodiYmeKCdjc9+h18be0AlqXjcn9RJuiilN7Hja91jgVfB4ZDDs6+e\nwTjQLoJC/CNTFTp/rMv6QvO8gHiFp0yt0Ws63fxFNCX5Nw1JBd4S4A/QusewQ9Lh\no/d4nu7EU43ywZan2GRGsOw3nCjRpuCnf8GunOZ6lcRdyst851fkGG+M1uzzwQ6S\n0yMDKx9g6GkctDsbqW9GeJM9jox7hNR0le985IicqM51iWITmes=\n=jzO9\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a",
          "sha": "6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a"
        }
      ],
      "message": "rpc: getblocktemplate drop warning for missing sigops field\n\nThis field is always present.\n\nThe warning was added in a6099ef319a73e2255dca77065600abb22c4f5f8, but even then the field was always present.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T18:46:26Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T16:21:21Z"
      },
      "sha": "ae289abcfaedabb17011c94cb947114cf88d9a02"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ3NzEyMmRhMmQ0ZjNjZDkyZmIwNWNhMGVmYjY0MjgyMjYxNzZlMDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d77122da2d4f3cd92fb05ca0efb6428226176e00",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d77122da2d4f3cd92fb05ca0efb6428226176e00",
      "tree": {
        "sha": "79ede3bfcc5fffd9a0b0151ed3d4831f6b528937",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79ede3bfcc5fffd9a0b0151ed3d4831f6b528937"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 79ede3bfcc5fffd9a0b0151ed3d4831f6b528937\nparent ae289abcfaedabb17011c94cb947114cf88d9a02\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680797665 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680806787 +0200\n\nrpc: getblocktemplate check and show block sigops\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQvE4MACgkQV/+b28ww\nEAkjRQ//SL8Zp9MsI/Y7JhHDaMOH9XQDHiljybR4CRv0LWZgTaFeoqZiI9XlDRTv\nra9PjdmCJJ2dXfV/aW3f3F9DJG2eAuVVTlH5IT5IQifPiYIkYd6dbaiKfyxvw0+z\nIoAq/skXMwE8hX7AF7aVvongH6K+d9EvT7a32Vz4Un3c5qdG7SJP88G/34d+en0b\nGlJiFv9n2WShR05wydxZ3bK7eTgDRx1ISzy+zxYnyLGTIUvsfhiixxpGbwCcolnF\njEjT97Saz4KWsJCW031IeKrHMeLsODPPU5PLGypGVN/EdbD5UUjK+7dpu/mYouLU\nnOD0Hlfke1VjjH+IouRVSNK2Nfa3yLItmuk6y5ToD+2sh4lWCenHyFZ5jjeam5M3\nX+93IAD8KyJl6unMNpK78aB9s3oqnbfFV/cdrB1koIV/RD5bNTvx1jo0uDjvGF1c\nAS9kxshDVJXkePq6g943pqF0RkljKarn308o0JGk5e4Fq5vTyjWO8dtf8kwfmQEA\nCONHNiJR4S08wG0D9z10cvCzL01I5c8+iyWlwPBJhgRPqs4bGTtWSS/WGJwbiYzV\niT2H4EK/eagDGq2pTl7+RHkAFiAR1s33ylqu0Y/pU53AVyzVoyB5XLZNp2RfIqHY\n+aNuY7D5m2P8ipYj/JmMZTvNHk/RmliVs1bVmun0PoFeI2R0Ck4=\n=aHDn\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae289abcfaedabb17011c94cb947114cf88d9a02",
          "sha": "ae289abcfaedabb17011c94cb947114cf88d9a02",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ae289abcfaedabb17011c94cb947114cf88d9a02"
        }
      ],
      "message": "rpc: getblocktemplate check and show block sigops",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T18:46:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T16:14:25Z"
      },
      "sha": "d77122da2d4f3cd92fb05ca0efb6428226176e00"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAzYmRjNWM3ODExMjE2OTk4NmE4ZThjMjM2OTZjNmE2ZjUxOTIzNTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/03bdc5c78112169986a8e8c23696c6a6f5192359",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/03bdc5c78112169986a8e8c23696c6a6f5192359",
      "tree": {
        "sha": "094ee2271ff7404a595fd20b86b5c24e5199f09a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/094ee2271ff7404a595fd20b86b5c24e5199f09a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 094ee2271ff7404a595fd20b86b5c24e5199f09a\nparent d77122da2d4f3cd92fb05ca0efb6428226176e00\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680801670 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680806787 +0200\n\ndoc: warn that CheckBlock() underestimates sigops\n\nCounting sigops in the witness requires context that CheckBlock()  does not have, so it only counts sigops for non-segwit transactions.\n\nThis should not be a problem. There are 2 call sites:\n\n1. ConnectBlock(): this checks all sigops\n2. TestBlockValidity() used by getblocktemplate: this also calls ConnectBlock()\n3. AcceptBlock(): this performs limited checks before storing a block on disk\n4. ProcessNewBlock(): calls AcceptBlock()\n4. VerifyDB(): disconnects the block at level 3, which results in ConnectBlock()\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQvE4MACgkQV/+b28ww\nEAm28g//X+RJxEIdWF1zKtOWZfyRSfc4fFS3FOmpou+JFIJ0VJkCR1OYirgBECJH\noFngMdLbaxGCCxZ4LdTQSroLqQES6WBzCeyYX5VqEHyOtPJjP/BPZdXnu368Qcmt\nMqnONzeJJUFdqHlOzbz5ZPYJIXtc0fkI21KXffQ7dL1cfy0+Gwh01gHrMQh8aFnR\nC4QZ9XCdDxDk0KtamgOc1qIL9+lsEo77dDY6xm1shvOT6peZLHINabeYknWCmITa\ng+FtnDn5Lp4xjxgmbvQQeiLmwddmyMBR0h1j46nOCdoBnZ3FuEUatJzMoUsKpJ9S\n6vYtP1sDhsSQWb7EkQEq4xh6jyyqx6htYJd4USmCMNcPDnDAqm3dHyMZS0B00SAs\nBtPDuJeCKY3a+1YPYnQ/cdMoPRZ1Fakyf7M3cRn0k6TPDeJDu6C/j0/7ijZLZR0l\nls51N1H+L9YhHBjpnR0VKM7pS4LV4eU1pHztofh0rSzg5XaAcHF5yABjnEMQuYgw\nJQLS+V8rPYfRr2bvIGx7nGwD/JcG33TBXOuzxFkuv4mtFt75X0kuWt1nCJJD2m5N\nJnMo1LLKQj2AnHdcZ04mEwrHPIIDw+q7NoYQIFX8r2TYfvszylz6Cgc0Cqu/kSsM\nq2jFHjLfOgWBFBKReGAj2US5LEoG6usYR31wkiDQcde8iAd+/sg=\n=R23l\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d77122da2d4f3cd92fb05ca0efb6428226176e00",
          "sha": "d77122da2d4f3cd92fb05ca0efb6428226176e00",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d77122da2d4f3cd92fb05ca0efb6428226176e00"
        }
      ],
      "message": "doc: warn that CheckBlock() underestimates sigops\n\nCounting sigops in the witness requires context that CheckBlock()  does not have, so it only counts sigops for non-segwit transactions.\n\nThis should not be a problem. There are 2 call sites:\n\n1. ConnectBlock(): this checks all sigops\n2. TestBlockValidity() used by getblocktemplate: this also calls ConnectBlock()\n3. AcceptBlock(): this performs limited checks before storing a block on disk\n4. ProcessNewBlock(): calls AcceptBlock()\n4. VerifyDB(): disconnects the block at level 3, which results in ConnectBlock()",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T18:46:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T17:21:10Z"
      },
      "sha": "03bdc5c78112169986a8e8c23696c6a6f5192359"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQyZTVmNDk4OWQyNWM5MWU4MTFmN2NlOGYzY2VlY2NkZGI4YzhhNjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68",
      "tree": {
        "sha": "ec4e222f47f74ded0d825f6ae3ab870ac7d5e110",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ec4e222f47f74ded0d825f6ae3ab870ac7d5e110"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ec4e222f47f74ded0d825f6ae3ab870ac7d5e110\nparent 03bdc5c78112169986a8e8c23696c6a6f5192359\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680803657 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680806787 +0200\n\nrpc: show coinbase reservations in getblocktemplate\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQvE4MACgkQV/+b28ww\nEAmxzw//bcxm6wk2ntyTNj0hxCPRk+w8knSbdo9kx+k0hsHY+0qrzcIMqO1IHxmb\nN5RSjxDbPvwByftFlPTBfAiBzQgQ9x1uz7f54K/OI9hN8GcpgcwjmrIVjGC6qy8n\nGIi2ZaPkvO1gePHW9F7SDI91rWp8aHDs6KrVRcJVFS9GgQFiRhzrZIVcLw/jz1nz\n5cvbys37HMA3UJ4rKp4pszteN0hrz3/FjSrpQc8z2G6CqmWBS4krweUbUOVAk++e\n4lHmFKbKOCMgvcBbTVLc/k8ChOwdVhvXbwkT7G9Hlvm5q0Dflpu5yrYrgxS1Zf5E\nbJz8yv1nfqXBpOhlBa1qQ6po1pSE/o/RWZv92B8irVkmp3PCJDXfwS/98ksYIUaI\ntSfp/BhOyFTU0JSuBDJpGFvWVBiIHccPW0ekqLY37v+lQ0r6i6Cd6WUpjHhuGlmK\nfEGUlTIhIMi5Wny1gRm/rdE5P49kyuQIk6Q7AdEt9yUZ7c7v5hIGPKVVOVsvwdhw\n1PoJld16WFRf2Djz4xaQcMYExd+7BvnVSpagbqJOAN2YDd/FiAabBLdj5CBWfsmx\nSrbsL+woNcY2ju80fc8jVAqjpM1Bttm3czW4N30Ry3BHTcFhh/ElMr+QtZUk7dig\ndJ2jKHv57k3QtcGSxVfThYAn4316JBiKfCZmJY5rHDjuvhauCN8=\n=Q7x1\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/03bdc5c78112169986a8e8c23696c6a6f5192359",
          "sha": "03bdc5c78112169986a8e8c23696c6a6f5192359",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/03bdc5c78112169986a8e8c23696c6a6f5192359"
        }
      ],
      "message": "rpc: show coinbase reservations in getblocktemplate",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T18:46:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T17:54:17Z"
      },
      "sha": "42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8948811530,
      "node_id": "HRFPE_lADOABII585i0OWUzwAAAAIVZAcK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8948811530",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T18:47:01Z"
    },
    {
      "event": "commented",
      "id": 1499509064,
      "node_id": "IC_kwDOABII585ZYLFI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1499509064",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T19:18:39Z",
      "updated_at": "2023-04-06T19:32:00Z",
      "author_association": "MEMBER",
      "body": "The \"rules\" field was introduced in #7935. It's not specified in [BIP 22](https://github.com/bitcoin/bips/blob/master/bip-0022.mediawiki) and [BIP 23](https://github.com/bitcoin/bips/blob/master/bip-0023.mediawiki) which describe the expected behaviour of `getblocktemplate`. But then in [BIP 145](https://github.com/bitcoin/bips/blob/master/bip-0145.mediawiki) for segwit it's assumed to be there. I'm guessing something in between is documented in Stratum software?\r\n\r\nHere's [an example](https://bitbucket.org/ckolivas/ckpool/src/73f560cf3144f824823077c1b9e1663d89823ed7/src/bitcoin.c#lines-127:135) of how it's used by pool software. There's also some documentation through bug reports, e.g. #17946. My understanding is that `!` means that it's unsafe to mine without understanding the rule.\r\n\r\nIt's unclear to me how it is intented to be used, both as an argument and in the results. I'm also not sure how to interpret this wording in BIP 145:\r\n\r\n> The '!' rule prefix MUST be enabled on the \"segwit\" rule for templates including transactions with witness data.\r\n\r\nFor 6ab119d4c1c8cf3d9c0994c22d75d016a30cdd6a I have assumed that the consumer of this RPC may care about it, so we keep `!segwit` in the result. I've the read the above sentence as referring only to the result of the RPC. With this commit it doesn't matter if you set it or not.\r\n\r\n\r\n\r\ncc @luke-jr",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27433#issuecomment-1499509064",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27433"
    },
    {
      "event": "mentioned",
      "id": 8949023775,
      "node_id": "MEE_lADOABII585i0OWUzwAAAAIVZ0Qf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8949023775",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T19:18:39Z"
    },
    {
      "event": "subscribed",
      "id": 8949023786,
      "node_id": "SE_lADOABII585i0OWUzwAAAAIVZ0Qq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8949023786",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T19:18:39Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDEzZDEwNGQxNmUwNjllNjdiZGZmNjNjYTY4YjkxYTMyZDY2ODIxYzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/13d104d16e069e67bdff63ca68b91a32d66821c1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/13d104d16e069e67bdff63ca68b91a32d66821c1",
      "tree": {
        "sha": "53356e3123a4574b77e6e08824bd19454ab2581e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/53356e3123a4574b77e6e08824bd19454ab2581e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 53356e3123a4574b77e6e08824bd19454ab2581e\nparent 42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68\nauthor Sjors Provoost <sjors@sprovoost.nl> 1680810465 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1680810465 +0200\n\nrpc: default_witness_commitment is not optional\n\nAs of a806647d260132a00cd633160040625c7dd17803  the commitment is never empty.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmQvIeIACgkQV/+b28ww\nEAmQKRAAvOpD5bOG4+8Yc6oaKrfetfchHH+n7+ZZSnPIbGF0fQSuCGXCxpzsJSL2\nLR4og6sRfysvcKByw7tA6GyVL1lVNG/qM0b5JtJ3DtgrIMRQ/l3DNy0QadmgBaBE\nI59JGhM1gQ+nhJpHvqIexG7nsTVTsSl5hkxhHQgFayt8F8RiOLmJPNkdqTjCX/vg\nbbEB0rozW0RSbBpZkSjkSqAqETxYTNP/F1jDSKr/I7dZKEyDYOQ//irlyS1yVFW5\nu/CXHm3hqm2poZKj3IPfFIrWbHTBKMoO19VoKpFMcSAIY0HqKmjjyGaxWUvqurWE\nO5YldZNooTvA+snb5LhZr+5Yb7txTf/P7eh6hpHDbhmCcAIhXrax5tU4Wzx1qsHQ\ni3pPgJa3JmHbYX3AOZ/15SRlcxc2Ij2St8UGq2JFPMiCn+orajRPDEOjH2NmrdcF\nUefAxSDlOTamI/N91knA3UYEHbbm3EYvfrOHioKs7qu3a/Cy31QwETL5E0Q7n0E1\nBhsR4gdMZI01wqhvUiBySNj9D4Zcz4QV7GLQjK+4M5Kd/zjdLTN9LmYY3B8VXhdj\namWMDCv/wS7W8t6r6+J0jbNmoCrTVWP8cIaBvPywJssQvwxmq/52vuqTMJiCUx4I\n/iK2mJ+gEv6USrIqjFwzIpux5ocKvUi/qeSXP6ZrqyZuEf+C4lQ=\n=LtYT\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68",
          "sha": "42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/42e5f4989d25c91e811f7ce8f3ceeccddb8c8a68"
        }
      ],
      "message": "rpc: default_witness_commitment is not optional\n\nAs of a806647d260132a00cd633160040625c7dd17803  the commitment is never empty.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T19:47:45Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-04-06T19:47:45Z"
      },
      "sha": "13d104d16e069e67bdff63ca68b91a32d66821c1"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-06T22:30:07Z",
      "updated_at": "2023-04-06T22:30:07Z",
      "source": {
        "issue": {
          "id": 1584692334,
          "node_id": "PR_kwDOABII585J-QiA",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27101/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27101/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27101/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27101",
          "number": 27101,
          "state": "open",
          "state_reason": null,
          "title": "Support JSON-RPC 2.0 when requested by client",
          "body": "Closes https://github.com/bitcoin/bitcoin/issues/2960\r\n\r\nBitcoin Core's JSONRPC server behaves with a special blend of 1.0, 1.1 and 2.0 behaviors. This introduces compliance issues with more strict clients. There are the major misbehaviors that I found:\r\n- returning non-200 HTTP codes for RPC errors like \"Method not found\" (this is not a server error or an HTTP error)\r\n- returning both `\"error\"` and `\"result\"` fields together in a response object.\r\n- different behavior for single and batched RPC requests\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/15495 added regression tests after a discussion in https://github.com/bitcoin/bitcoin/pull/15381 to kinda lock in our RPC behavior to preserve backwards compatibility. \r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/12435 was an attempt to allow strict 2.0 compliance behind a flag, but was abandoned. \r\n\r\nThe approach in this PR is not strict and preserves backwards compatibility in a familiar bitcoin-y way: all old behavior is preserved, but new rules are applied to clients that opt in. One of the rules in the [JSON RPC 2.0 spec](https://www.jsonrpc.org/specification#request_object) is that the kv pair `\"jsonrpc\": \"2.0\"` must be present in the request. Well, let's just use that to trigger strict 2.0 behavior! When that kv pair is included in a request object, the [response will adhere to strict JSON-RPC 2.0 rules](https://www.jsonrpc.org/specification#response_object), essentially:\r\n\r\n- always return HTTP 200 \"OK\" unless there really is a server error or malformed request\r\n- either return `\"error\"` OR `\"result\"` but never both\r\n- same behavior for single and batch requests\r\n\r\nIf this is merged next steps can be:\r\n\r\n- Refactor bitcoin-cli to always use strict 2.0\r\n- Refactor the python test framework to always use strict 2.0 for everything\r\n- Begin deprecation process for 1.0/1.1 behavior (?)\r\n\r\nIf we can one day remove the old 1.0/1.1 behavior we can clean up the rpc code quite a bit.\r\n\r\nThis patch does NOT implement JSON RPC 2.0 [\"notifications\"](https://www.jsonrpc.org/specification#notification) which are requests that the server should not respond to.",
          "user": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27101",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27101.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27101.patch"
          },
          "created_at": "2023-02-14T19:13:42Z",
          "updated_at": "2023-07-27T21:02:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 8971711050,
      "node_id": "LE_lADOABII585i0OWUzwAAAAIWwXJK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971711050",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T10:04:15Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "reviewed",
      "id": 1494088880,
      "node_id": "PRR_kwDOABII585ZDfyw",
      "url": null,
      "actor": null,
      "commit_id": "13d104d16e069e67bdff63ca68b91a32d66821c1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept NACK\r\n\r\n>Two recent F2Pool blocks violated the sigops limit. Both by 3. I suspect they were not using getblocktemplate.\r\n\r\nThis PR is unlikely to have avoided it, then.\r\n\r\n>Anyway, while checking our code I added a few extra fields to the block statistics of getblocktemplate:\r\n\r\nThese are non-standard and don't provide anything beyond what we already do implicitly(?). Having them risks clients depending on non-standard behaviour.\r\n\r\n(weightlimit was already there)\r\n\r\n>I also removed the need to set {\"rules\": \"!segwit\"}, the generation of pre-segwit blocks, and the test code that checks activation. These two commits can easily be dropped if people don't like them.\r\n\r\nThis violates [the BIP 9 spec](https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki#user-content-getblocktemplate_changes), and changes the BIP 145 semantics of \"sigops\".",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27433#pullrequestreview-1494088880",
      "submitted_at": "2023-06-22T22:45:12Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27433"
    },
    {
      "event": "commented",
      "id": 1607709381,
      "node_id": "IC_kwDOABII585f07LF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1607709381",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-26T15:20:30Z",
      "updated_at": "2023-06-26T15:20:30Z",
      "author_association": "MEMBER",
      "body": "> changes the BIP 145 semantics of \"sigops\".\r\n\r\nHow so?\r\n\r\nFrom [BIP 145](https://github.com/bitcoin/bips/blob/master/bip-0145.mediawiki#user-content-Sigops):\r\n\r\n> Sigops\r\n\r\n> For templates with \"segwit\" enabled as a rule, the \"sigoplimit\" and \"sigops\" keys must use the new values as calculated in [BIP 141](https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#Sigops).\r\n\r\nThis PR leaves the \"segwit\" rule enabled. You just don't have to specify it: https://github.com/bitcoin/bitcoin/pull/27433/commits/edd00677dbddd5b40fa3d2954e8cb04fcd8359f4#diff-ccc24453c13307f815879738d3bf00eec351417537fbf10dde1468180cacd2f1R821-R822\r\n\r\nWe do the same thing with `csv`.\r\n\r\n>> Two recent F2Pool blocks violated the sigops limit. Both by 3. I suspect they were not using getblocktemplate.\r\n\r\n> This PR is unlikely to have avoided it, then.\r\n\r\nI've since learned that they do use it, but with patches.\r\n\r\n> These are non-standard\r\n\r\nDo you mean BIP 22/23? It says:\r\n\r\n> getblocktemplate MUST return a JSON Object containing the following keys\r\n\r\nIt doesn't say there can't be extra fields, though I can see how people can screw up by not implementing from the spec, but rather from the JSON RPC. I can add a comment to the help pointing out they're not BIP 22/23 fields. Or hide them behind a debug option. It's useful to know these totals with resorting to `jq` magic.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27433#issuecomment-1607709381",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27433"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-22T05:39:16Z",
      "updated_at": "2023-07-22T05:39:16Z",
      "source": {
        "issue": {
          "id": 1816521714,
          "node_id": "PR_kwDOABII585WItzV",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28123",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28123/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28123/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28123/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28123",
          "number": 28123,
          "state": "open",
          "state_reason": null,
          "title": "Bugfix: RPC: Remove quotes from non-string oneline descriptions",
          "body": "Various JSON Object parameters had a `oneline_description` with quote characters. Fix those, and extend `rpcdoccheck` to detect them.\r\n\r\nAlso, slightly improve GBT's oneline description for template_request.",
          "user": {
            "login": "luke-jr",
            "id": 1095675,
            "node_id": "MDQ6VXNlcjEwOTU2NzU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/luke-jr",
            "html_url": "https://github.com/luke-jr",
            "followers_url": "https://api.github.com/users/luke-jr/followers",
            "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
            "organizations_url": "https://api.github.com/users/luke-jr/orgs",
            "repos_url": "https://api.github.com/users/luke-jr/repos",
            "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/luke-jr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28123",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28123",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28123.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28123.patch"
          },
          "created_at": "2023-07-22T01:07:32Z",
          "updated_at": "2023-07-25T18:40:47Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": []
}