{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315",
    "id": 1930925459,
    "node_id": "PR_kwDOABII585zF5WT",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30315",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30315.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30315.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/31009f6b3aa49e6957e4993551e9e6776aa5015d",
    "number": 30315,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Stratum v2 Transport",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Based on #29346. Parent PR #29432.\r\n\r\nIntroduces `Sv2Transport::Transport` which is very similar to `V2Transport`.\r\n\r\nThis shoehorns `Sv2NetMsg` into a `CSerializedNetMsg` in `SetMessageToSend`, and into a `CNetMessage` in `GetReceivedMessage`.\r\n\r\nSee discussion in #30209.\r\n\r\nThe first few commits move some network related code from Node to Common. My goal is to make the Stratum v2 Template Provider independent of the Node so it can run in a separate process - so it doesn't take the whole node down if there's a bug (after #10102).\r\n\r\nThose refactor commits are orthogonal to the main work here though, I'll make a separate PR for them once people are happy with the overall direction.",
    "labels": [],
    "created_at": "2024-06-20T15:59:15Z",
    "updated_at": "2024-06-28T14:07:20Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "06ceb1f5c08de2bdda8682e35ecfb50f130475ca",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2024/06/sv2_transport",
      "ref": "2024/06/sv2_transport",
      "sha": "31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 240989,
        "default_branch": "sv2",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-28T14:35:50Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-06-28T06:54:04Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2f6dca4d1c01ee47275a4292f128d714736837a1",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35580,
        "stargazers_count": 77045,
        "watchers_count": 77045,
        "size": 262278,
        "default_branch": "master",
        "open_issues_count": 687,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-28T14:41:49Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-28T14:55:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 2672,
    "deletions": 184,
    "changed_files": 26,
    "commits": 8,
    "review_comments": 4,
    "comments": 7
  },
  "events": [
    {
      "event": "commented",
      "id": 2181044150,
      "node_id": "IC_kwDOABII586CABe2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2181044150",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T15:59:19Z",
      "updated_at": "2024-06-28T14:07:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30315).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#29346](https://github.com/bitcoin/bitcoin/pull/29346) (Stratum v2 Noise Protocol by Sjors)\n* [#26697](https://github.com/bitcoin/bitcoin/pull/26697) (logging: use bitset for categories by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2181044150",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "commented",
      "id": 2181051477,
      "node_id": "IC_kwDOABII586CADRV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2181051477",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T16:03:13Z",
      "updated_at": "2024-06-20T16:03:40Z",
      "author_association": "MEMBER",
      "body": "Would it make sense to add a `libbitcoin_net` library? Either at the same level as `libbitcoin_common` or on top of it. I could see how other node implementations could benefit from that, but it's also a way to limit `libbitcoin_common` in size. Afaik only `libbitcoin_node` needs networking (and `zmq`?), and a future `libbitcoin_sv2`, and maybe `libbitcoin_rpc`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2181051477",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13231508296,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMUqMtI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13231508296",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T16:05:29Z"
    },
    {
      "event": "labeled",
      "id": 13231509069,
      "node_id": "LE_lADOABII586M88kQzwAAAAMUqM5N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13231509069",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T16:05:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2181055856,
      "node_id": "IC_kwDOABII586CAEVw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2181055856",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T16:05:34Z",
      "updated_at": "2024-06-20T16:05:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\nðŸš§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/26477378291</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2181055856",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13231627367,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMUqpxn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13231627367",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-20T16:15:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13241225681,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMVPRHR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13241225681",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T11:14:14Z"
    },
    {
      "event": "commented",
      "id": 2182554706,
      "node_id": "IC_kwDOABII586CFyRS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2182554706",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T11:18:24Z",
      "updated_at": "2024-06-21T11:19:15Z",
      "author_association": "MEMBER",
      "body": "It compiles and the tests run, but it's not pretty.\r\n\r\nThe conversion between `Sv2NetMsg` and `CSerializedNetMsg` / `CNetMessage` is done in https://github.com/bitcoin/bitcoin/pull/30315/commits/7d937674de425d8e2525bac9e719ac93a775ea45, which is a bit of a hack at the moment.\r\n\r\nI also haven't put much thought into `Sv2NetMsg` ever since I took over #27854, so perhaps this design can be improved as well.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2182554706",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13242195353,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMVS92Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13242195353",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T12:47:26Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13242625290,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMVUm0K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13242625290",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T13:24:03Z"
    },
    {
      "event": "commented",
      "id": 2182768070,
      "node_id": "IC_kwDOABII586CGmXG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2182768070",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T13:34:45Z",
      "updated_at": "2024-06-21T13:34:45Z",
      "author_association": "MEMBER",
      "body": "I only had a very brief look, but my guess would be that it would be easier if `Sv2NetMsg` did not contain an `Sv2NetHeader`, and just stored type and message. The Sv2 Transport would then construct the header at submitting or sending time instead. This means `Sv2NetMsg` would be more of a dumb container for what higher-level code cares about, while the protocol details would be more abstracted away in the Transport.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2182768070",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "unlabeled",
      "id": 13244009977,
      "node_id": "UNLE_lADOABII586M88kQzwAAAAMVZ435",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13244009977",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T15:18:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13244298304,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMVa_RA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13244298304",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T15:44:01Z"
    },
    {
      "event": "commented",
      "id": 2182999892,
      "node_id": "IC_kwDOABII586CHe9U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2182999892",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T15:44:59Z",
      "updated_at": "2024-06-21T15:44:59Z",
      "author_association": "MEMBER",
      "body": "@sipa done and managed to clean up `sv2_messages.h` a bit in the process.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2182999892",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "mentioned",
      "id": 13244308952,
      "node_id": "MEE_lADOABII586M88kQzwAAAAMVbB3Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13244308952",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T15:45:01Z"
    },
    {
      "event": "subscribed",
      "id": 13244308961,
      "node_id": "SE_lADOABII586M88kQzwAAAAMVbB3h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13244308961",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T15:45:01Z"
    },
    {
      "event": "reviewed",
      "id": 2132948873,
      "node_id": "PRR_kwDOABII585_IjeJ",
      "url": null,
      "actor": null,
      "commit_id": "e108385a6e0e1a9528c15ae8b668a91163e0af44",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#pullrequestreview-2132948873",
      "submitted_at": "2024-06-21T15:47:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13244670139,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMVcaC7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13244670139",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T16:20:02Z"
    },
    {
      "event": "reviewed",
      "id": 2133107146,
      "node_id": "PRR_kwDOABII585_JKHK",
      "url": null,
      "actor": null,
      "commit_id": "2f673b5959cee168b808e23c6f5554e2f673db15",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#pullrequestreview-2133107146",
      "submitted_at": "2024-06-21T17:15:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13245769633,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMVgmeh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13245769633",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T18:14:39Z"
    },
    {
      "event": "commented",
      "id": 2183220018,
      "node_id": "IC_kwDOABII586CIUsy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2183220018",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T18:14:59Z",
      "updated_at": "2024-06-21T18:14:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\nðŸš§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/26526802432</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#issuecomment-2183220018",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30315"
    },
    {
      "event": "labeled",
      "id": 13245772613,
      "node_id": "LE_lADOABII586M88kQzwAAAAMVgnNF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13245772613",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-21T18:14:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13265149402,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMWqh3a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13265149402",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-24T11:50:15Z"
    },
    {
      "event": "unlabeled",
      "id": 13266204744,
      "node_id": "UNLE_lADOABII586M88kQzwAAAAMWujhI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13266204744",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-24T13:08:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13276723013,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMXWrdF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13276723013",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-25T07:42:37Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13278829434,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMXett6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13278829434",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-25T10:14:49Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNmMjU1NzVlY2NhOTU4ZmU2MTUwMzU3N2M4MGFjZmI3MGE0OWNhNWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3f25575ecca958fe61503577c80acfb70a49ca5d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3f25575ecca958fe61503577c80acfb70a49ca5d",
      "tree": {
        "sha": "02ecc3c761adf35cdda6ed944d9a14ed15e8616c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/02ecc3c761adf35cdda6ed944d9a14ed15e8616c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 02ecc3c761adf35cdda6ed944d9a14ed15e8616c\nparent 2f6dca4d1c01ee47275a4292f128d714736837a1\nauthor Sjors Provoost <sjors@sprovoost.nl> 1701349128 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556913 +0200\n\nAdd sv2 log category for Stratum v2\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+WzIACgkQV/+b28ww\nEAncPxAAmANqKHw+FGzHM8wHf25eZW4yKVZSaar2rrmU6NXbay8uNxNnVCwWWQq6\nmLB1w3YDwKguczaDtemr1rhVueaP1HsZvLwNDKkb0YQSnZG113t3QfrxVOPJicQP\nlHy2Ox68Rjj4Hl8k+PyxA4OynS7oT8uWBHa8oOyuD3PI42ZCD/cDcjWK8n+acPIG\n2I7vajY+zgjcWK+Pn+IdNQqnc9IM1XKpVdoTaRBu1OTybi01PkUiXeaShzve3Hsj\nNYGq4Y4ln3OIQp44aTQ4immcKeolphtTxH3GNlVIinO7z5Kpbay2BZ4s4A/roLRC\nSxlXtNmsRZbRX7VhHPLle/uvOKPkv4LG9QTM1U/Uj8ephAss6A4eTo83g+JTLLq0\n0x6XkEg+0yIgtIvefPiwaA9XR1SR3zwz7HYriUTk0IcKDzTRj2gsD+RNh7GVekVy\nGD3Ikn8Uo+3twBGhte62PmPlahsnAz7kEZGH48mLLS4xnvavEjfjr1qXlwvyMrjs\nWHLDNpb9zEiqoMR0pjZrBg0qnFCa6jdhKUnBfMJpNKQwMDdeX8ItXfFj/hV1jzSG\nWrX31X2FNvbnWI5eng/znsgcJvHR2gyhtzEDSWdRBCMUYdG82r76j37vT1Oue3E/\nSPjmFk73rQd15a/XRz0hxL1jbn5sfnlXVOASXs3WBoSV2gQxidc=\n=koDO\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f6dca4d1c01ee47275a4292f128d714736837a1",
          "sha": "2f6dca4d1c01ee47275a4292f128d714736837a1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2f6dca4d1c01ee47275a4292f128d714736837a1"
        }
      ],
      "message": "Add sv2 log category for Stratum v2",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:41:53Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-11-30T12:58:48Z"
      },
      "sha": "3f25575ecca958fe61503577c80acfb70a49ca5d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgxNzVkOGVkOGM0YzE5YmM1Y2MwOWI3Yjg0OWI0N2ViYmUxNGViNGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e",
      "tree": {
        "sha": "0a3ca1ff8fa4ba71f25a524a3b5a7958553ac4eb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0a3ca1ff8fa4ba71f25a524a3b5a7958553ac4eb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0a3ca1ff8fa4ba71f25a524a3b5a7958553ac4eb\nparent 3f25575ecca958fe61503577c80acfb70a49ca5d\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718730637 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556914 +0200\n\nAdd sv2 noise protocol\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+WzIACgkQV/+b28ww\nEAlL6Q//UFA/oDDuABvBORuc4/jf3YWG3YeZZfclBSwZqaPvcgGrJbBQ2BU9CxaM\nCsEPCOjTn0RCAzTMLZQWGWMMYXEegyK6rmMkkd2gZV/GpIk78mTwilvB2rv5gVHU\nF/XPpNMfYV0SOHnOA7xEd8lJ0iJdFLvAvRMCkAj5IoVkC7R0J6PhBmnaGkeXrWWn\n+go/+r35jf9loHKFYO4uKTQbMXKNmcnt83BN4xZjr+uSWcP8IPBng53hq0VisKv/\nxYJ2+qrVrxWEIK9a1BUm57OOi59ff7n8atBScGcrUhmdHndT8zVcLisuPb7O4pa2\nSyTdKtL3kpgpiRu2u1GZzP/2tsOdpcTQdqYU1TmbP/j16wDrDL+7TxMLqPkPHAtN\n9XyHHqArdp6lUM6sCoNmnqOnosC/HgbO6cfQoUG5WIOdgxJpJzstDHkSOOHQSp4X\nr70KOLscXvMDyNTmKyFdeoICCRPvEAwqiMYAS6pvrChDzQWONnwc5k/jJ+Y9WBNf\n6MvcLxcdUfuUtJ+wXktwa+TukuiGb5dqF6Da7BdnIr6BoHuPEv/Vvt/mB1WnpDnj\nHiClpdQYBQeFYj3UMG7xhk6njEzhs4C/4la+LMhuNVThou8mm9l/5aBTrgx1HOYB\n2HqplEA0wcnMGtyOgjvlj7Pgvx4jlJO4gyeMTbgFUNQYiyxga7A=\n=roOj\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3f25575ecca958fe61503577c80acfb70a49ca5d",
          "sha": "3f25575ecca958fe61503577c80acfb70a49ca5d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3f25575ecca958fe61503577c80acfb70a49ca5d"
        }
      ],
      "message": "Add sv2 noise protocol\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:41:54Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-18T17:10:37Z"
      },
      "sha": "8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUxODg4N2QzYzQ1ZDRjMGIyZDQxNDM5MmVjMzNkYmMzNmMwZDhkZjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e18887d3c45d4c0b2d414392ec33dbc36c0d8df7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e18887d3c45d4c0b2d414392ec33dbc36c0d8df7",
      "tree": {
        "sha": "112bbe64bf595fd59ea6d4dc32722475f86772d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/112bbe64bf595fd59ea6d4dc32722475f86772d1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 112bbe64bf595fd59ea6d4dc32722475f86772d1\nparent 8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718896505 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556978 +0200\n\nMove CNetMessage and CSerializedNetMsg to Common\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+W3IACgkQV/+b28ww\nEAlA5hAAvrfy4rGpg03AV+7H9mPK4fkQWkPS6MXIjCnHdRo8TfavCDkiiq0x9meH\nDO9+IB4dd6qSyjmCglSKXgDBkRkcX97XR8vTZ/dCPoCy/XnhONO4BMZGd2VU4T5v\nrohzRKtqxZ5JZIWA5Sqkx42JkyObJ8wVekBs2AnYnQC64TvGoCjDs/NCWXGgvpog\nntcytTNa2vI/6M/teWwFINgpPxiR68vkN+3PbF4UkGbTLck4viZSTGyXOotdFIa5\nlrtzFT0HxSZPj+t9z/7nWTm+/+Wx89MPo/yoIJwhxpXOrYY/fLPho1Mf+up61xYm\nruxtKbU8z5LEG83W1rOoaMXg8YZfTvzmLTEDsKEI1VQ5KW7LfPoWxbJ45qgPkuD5\n1ZXoHF2/8lRMo4zmiK0MHsxBghaMD17ikFFD7XnwBUpgFqSD3xaE/odzvYWhw5dv\nt6rx+h6NHOB9ViV8DMoAzTKES7Yu6cmrodr9mY4nKSf/qYqmAylOsZVWKkoCmMDG\nEBC8fvWEdGDWzA8TXTxoiGTEKm/AcX20OGY8Xf96jrH825nayI3PtCb/cTmHfjN3\nRqnvmYozfy0yxWol6SPNpWBnpyps7KlH0WXlSJv8ZVEIpKZOZT+3T5yF8RmBfS3G\nm6V9tIsHL1UDLRdWO8jR+6+PyvF4t1gamFlvdjYNsGeV5iJO1wU=\n=c+lc\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e",
          "sha": "8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8175d8ed8c4c19bc5cc09b7b849b47ebbe14eb4e"
        }
      ],
      "message": "Move CNetMessage and CSerializedNetMsg to Common",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:42:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-20T15:15:05Z"
      },
      "sha": "e18887d3c45d4c0b2d414392ec33dbc36c0d8df7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNmNjdhNzJhZWE2N2I4ZWNmMmMyNDIwMGY2OWM2OGQxZTdmNGRlNGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b",
      "tree": {
        "sha": "898263c53123e323747ec5f708cb6d0d230e82c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/898263c53123e323747ec5f708cb6d0d230e82c9"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 898263c53123e323747ec5f708cb6d0d230e82c9\nparent e18887d3c45d4c0b2d414392ec33dbc36c0d8df7\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718898258 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556978 +0200\n\nMove connection_types.h to Common\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+W3MACgkQV/+b28ww\nEAm51hAAvrVQYFJHGQSxlIVeAanJY7Eyp69JKu/7H/zob3cMnnE1TiL9cuqPl6W8\nN9u+K22LWcBToo+oe9ZRQHn/PNFFOFEJpEfu2W9qdZjas6xHadqb9+DEeZ3oTT/w\n4gjMBnCEsnSMm+FtIaIgPNZ37hUePLWNYTY9QladA1ywSlzS28CUPMWbENQB1Qt9\n4dXpPD3bmw36q2PsYFOnBkqFGp6wQsSP9VK59EXRA/O7hFWiBc89t5A7vMIh7I6R\np3SO2KFaOxY0v3xxbfFeWuf5fdz+WQtLVEAk8bmOoapT48GCqRFFzZb7cZm3DtSj\nScDpcob7/hIkbBKi5QauGz6cNgbA7Rk0/qeILDi8dDKCwEhm/uBgxQ83JBulwrJf\nSGfKpjD15Bolbm8lnF1Oi0xk24wtMv2naNdv5aRG/dOUJoR6stk4hgJ5R0ZhqR7P\neOKfTFR6hBTd2ceXdKOSvFY0corJnrsUNAALsXzi96Zok5gr8+1H158laOAUxUMP\n5nhznL2zipEbwvNiK3rGswI5zrrCnK+J+oaqbc3p0FA4eXrvwVcHlxP+LNxUwH21\nbLaUweEkvY3Suu1NHWJLUORR341dCX+3fHUyt8poRz86i70kGE3E9tFaH/EhfXY7\n7bySXgTVrLlyVEqkYzM1dGjgjd++aNLp1Qcuj6Xdi91vsvK0DeE=\n=WpZg\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e18887d3c45d4c0b2d414392ec33dbc36c0d8df7",
          "sha": "e18887d3c45d4c0b2d414392ec33dbc36c0d8df7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e18887d3c45d4c0b2d414392ec33dbc36c0d8df7"
        }
      ],
      "message": "Move connection_types.h to Common",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:42:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-20T15:44:18Z"
      },
      "sha": "cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkxMmI4MDA1ODFiYTZjMjFiMGVkNDM4MzJjNjMwN2Y5OGU3YTNhZjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/912b800581ba6c21b0ed43832c6307f98e7a3af1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/912b800581ba6c21b0ed43832c6307f98e7a3af1",
      "tree": {
        "sha": "23f48962d952eb9818955337bca125e7abe13c6d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/23f48962d952eb9818955337bca125e7abe13c6d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 23f48962d952eb9818955337bca125e7abe13c6d\nparent cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718897484 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556979 +0200\n\nMove Transport to Common\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+W3MACgkQV/+b28ww\nEAnbDw//eBYuhwN1Ae5DWaduBt5PF0RSy/Z6+zfEu9aMkjg3aF9gc+X7iMh66KSV\nRNX5Y4hsLjQ8DemTQkkCFCnWq6636xyqypRV1VhE3MLH+IKVwoC6IwFVZEiJDUk9\nA6WQ7ANhUD4vNixsVQ/fIiOVmQNA7x1Z3BjE5UvZFQxj8CrsVCOclfJL4ixoO/9D\nr4WigIXamYYBQugF6y0nWag4/P1m7Y+9Z/qTfBHA0GTAcyFFxMhE/j9xRvM23wpG\nhKPoy0ZYflXMk4VqO6NYdg/7RG3VZpHf7lHsnO3TGbOMc/PjwFUMeJQE7maDn9Y0\nUceD8vnDMc4BGiu9CTlNb8orXeORTvwvD6XH+PBrDYBCL+5ez2fMtyMgfDI5+Pzp\n+Yb1JtywYCg/UfCtf194WxsxmqKHWcM2hm2aGvQxXRFAxDOP3J9Am4f5gLIXSX01\nxNXvvPpvylaUm+mogpG1YDwO/ldqtBS2fuJKfM2nwTkS2i8Lg5j0u4KXlzKsBy3b\n2/PIY3e09BExLWiefV0eNmWMsINqgpJHuYQQoNu+vYvK1RcRssvadpi2k2J0Y3Kx\nsuPpDVJfIFIliscbX3Cap3ohGN4fKlhxhSQ/DrQ3q6qswxmPIQfnBhNXtmlnT1/x\nifNv80ZHj1wD9p8tT0aURgjzwVbWwvQDQWJeMM3A+UDA6zYdaOE=\n=P6Kg\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b",
          "sha": "cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cf67a72aea67b8ecf2c24200f69c68d1e7f4de4b"
        }
      ],
      "message": "Move Transport to Common",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:42:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-20T15:31:24Z"
      },
      "sha": "912b800581ba6c21b0ed43832c6307f98e7a3af1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRmOTYwZjczNjA5ODlkZmMxMjBhMmFjODkxOTYzYTBiOGMxMmY0M2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4f960f7360989dfc120a2ac891963a0b8c12f43d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4f960f7360989dfc120a2ac891963a0b8c12f43d",
      "tree": {
        "sha": "dd41d3efdcbbbdac79e854fd5330beee50a8d00c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dd41d3efdcbbbdac79e854fd5330beee50a8d00c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree dd41d3efdcbbbdac79e854fd5330beee50a8d00c\nparent 912b800581ba6c21b0ed43832c6307f98e7a3af1\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718889964 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556979 +0200\n\nAdd sv2 message CoinbaseOutputDataSize\n\nThis commit adds the simplest stratum v2 message. The remaining messages are introduced in later commits.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+W3MACgkQV/+b28ww\nEAlW5w/9ETg/onppPYneV/41j08Eu/6qzVN0csUHiN2yS7imR9tOC6BfHik6ex0k\nQ1FDSLPiN6qDlIhre8STYKiivKByZLFIPpNRwNJhmqKkbJAYq6qSLBNc9gUD1Mzl\nYbuni+DcrSDKUipK4VuKUWqltD/yJ/MRWwwdikZxImtCNI+11NXL4h918/52ZyNk\nsfwuVn1opu75po/9RNbeTiwyqQqIQXhBPlvUwEvyMeW/vfYw/ljXKME2+gFbVBS4\nVIrdfdkxXIwlKQ4G0zVTYGL2EJirwIrDB03EQm6jsnTIH2lyggUDR8TZKIS/zien\nSIiBmmeUAE5Yyi58Iv59oU6BXhcQn+nIQO5OpAPyDMdAnvQqKysrM+mClntfF3Ae\nghPkm2uo1+wKBQNVn53tP4U3RWxjrwOfN7hvpj4lOIAIwC3WhfFWz+KQTYxDSomY\nvZi9fsvqjTZtoDEi3U4rnjvPxRrp6GdY+vrn5DnevWCw+6/ZtZV+yQ5vXcIbA0XB\nszl4w4ok4LGfWmNNZIV7r+5qoBzODWxlvlc127U+H99TVEDLzUXcuxxAWqDaKVBY\nxe+Vbef5ZiXTBhHjC7k8Sa7FxRcK8OSPauvBtIRVswAufR/eHo8fCm5CGc7NM0qN\n0TMeCYT4wadxDqpAu2gsiV4f/guNYvgfUiMe+7nXHUAW07bdAwU=\n=WkpX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/912b800581ba6c21b0ed43832c6307f98e7a3af1",
          "sha": "912b800581ba6c21b0ed43832c6307f98e7a3af1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/912b800581ba6c21b0ed43832c6307f98e7a3af1"
        }
      ],
      "message": "Add sv2 message CoinbaseOutputDataSize\n\nThis commit adds the simplest stratum v2 message. The remaining messages are introduced in later commits.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:42:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-20T13:26:04Z"
      },
      "sha": "4f960f7360989dfc120a2ac891963a0b8c12f43d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg2M2M1NTQ0NGI5NzE4ZGI3ODRhOTMzYjE3YzlmMGQ5ZjQ5ZGEzMWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/863c55444b9718db784a933b17c9f0d9f49da31b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/863c55444b9718db784a933b17c9f0d9f49da31b",
      "tree": {
        "sha": "f654ead6f790552b7b9275528ff286474251ea6f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f654ead6f790552b7b9275528ff286474251ea6f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f654ead6f790552b7b9275528ff286474251ea6f\nparent 4f960f7360989dfc120a2ac891963a0b8c12f43d\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718963782 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556980 +0200\n\nConvert between Sv2NetMsg  and CSerializedNetMsg\n\nThis allows us to subclass Transport.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+W3QACgkQV/+b28ww\nEAnRkxAAlFGowPmBHkTorqfzpylElUOctcELRlPXO7uQHnR3lMjL9gW+Z0zBIQQW\n89SMlX4SCCzOv9oLzrG5nPCXIYvbas+BMwTy6l7bCK4S1o2a5MslER834VEn2ilJ\nlDvoVo85KQSTqZuAEGZw287AqusfH78xqMGa13sbOTKcOHXHZeHAZj8rKJtR3sCM\n/K35Z6soRWZ+6nEV4aMD5bKotf+Yfa7/gfum5ID8UHqsaZfdAdKYKSVYwy+vxC8Y\n91ir5ZZcocVoSxMa4FU6Xiz14VW0XFksXnsZ7G28A5h3Qi8D2BqGzreouF//OCY8\ngf01FAiC8zIB8VAquxbsJ09D1Tjs0WX6uYMA8y3/PQDiq975SoMwIn4xeY5hGyP0\npLzgaFnHljicSPapea9YNDKq0ErS6tRxnkUbx8jXepuYtfavKwBMhJYLVP31DCkI\nlNNsNyFubadw9vdDAuYC0Q2z8Zvny3gZU2UIjIpU7VjygLDe+csuddLVZbSCqC/V\nX/0Y5COgGAj3fA2PPzSN+NVcDALXHZsFVcwev3oFlvALsZYdzyRNSkd7Yue6CBUq\nAx8SPnaNu7KGEfNKL1MUWbYj4hXoNmlmK11nB/LjcQrHKqJQbxVEMwNvgrRQzAOh\nm/xunINwKX0DCsTHpXkUsJDypDvs0qHxal+V+P6qLjfc7x1RDmI=\n=Ocu0\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4f960f7360989dfc120a2ac891963a0b8c12f43d",
          "sha": "4f960f7360989dfc120a2ac891963a0b8c12f43d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4f960f7360989dfc120a2ac891963a0b8c12f43d"
        }
      ],
      "message": "Convert between Sv2NetMsg  and CSerializedNetMsg\n\nThis allows us to subclass Transport.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:43:00Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-21T09:56:22Z"
      },
      "sha": "863c55444b9718db784a933b17c9f0d9f49da31b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMxMDA5ZjZiM2FhNDllNjk1N2U0OTkzNTUxZTllNjc3NmFhNTAxNWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "tree": {
        "sha": "ec8cc9ae9c89472887b2cb5f38e3f390ddbaf6b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ec8cc9ae9c89472887b2cb5f38e3f390ddbaf6b6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ec8cc9ae9c89472887b2cb5f38e3f390ddbaf6b6\nparent 863c55444b9718db784a933b17c9f0d9f49da31b\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718989960 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1719556980 +0200\n\nIntroduce Sv2Transport\n\nImplemented starting from a copy of V2Transport and the V2TransportTester, modifying it to fit Stratum v2 and Noise Protocol requirements.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\nCo-Authored-By: Fi3\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZ+W3QACgkQV/+b28ww\nEAlADxAAj4jxt5154Vwrmp/7W6enhLwKmAyDU/GvSd8GzKjw2jAE1KZjR9xJxMXU\n1ihuBSuYikJwJBKDwIwyJ+Kc6ibnNrQ2YFcPOEI0CZW3bt4ox5axdFB4JGtPFBHR\n+32cs5TNYSqh8sRTfrMINaPtun5V03vSiI7reNXTi+ieDk5BAidGZv3TN+eqVxlL\nTHLqptwLf92WfkySFGFqXX2tDAZ4TNEuTYEwgKJKHL9xMGt5pZaOeB/rJtSYhntr\nPg2PKWL8IoBJYcftG/9QZrtoUL178iHvOd2NOVor0bPe0uV5eNDBihw9Z1qhSPBI\nHrIb6T8K+4vEhoA1Q+ZSys/79O1SCEc6YceZhDLb6F43mULhupQ9w3xbxRpch/xn\nyxt4u7jmQcRydYwPRm2f9z+R+GhKzkaxDMrh8G6uvTDThgpBeWM3uNc7TF5Bs/QZ\nr6KYSUbkPyLLgoOQyRb1axEw8jry6kj786yDv0smGPb/jJCSdPNDY5pmyLXk22bm\n7ccmrKSAs9Dsdv++nGV57mfuLKhs7202qq46c6XkqkU3Nx/GZx/ub5bynmv2GV4U\nOJ9KGdKkyVrcwyWbQdRZJTtWBbAiWZo99nMrxhOyTr7Uq3a87o7KIz10yktd28Ml\nLosin0tZmQruYtV/k8JVf2b9Ku+gPG9WK6xdW+vKBMTR74g4cSc=\n=8v+O\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/863c55444b9718db784a933b17c9f0d9f49da31b",
          "sha": "863c55444b9718db784a933b17c9f0d9f49da31b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/863c55444b9718db784a933b17c9f0d9f49da31b"
        }
      ],
      "message": "Introduce Sv2Transport\n\nImplemented starting from a copy of V2Transport and the V2TransportTester, modifying it to fit Stratum v2 and Noise Protocol requirements.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\nCo-Authored-By: Fi3",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T06:43:00Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-21T17:12:40Z"
      },
      "sha": "31009f6b3aa49e6957e4993551e9e6776aa5015d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13327272889,
      "node_id": "HRFPE_lADOABII586M88kQzwAAAAMaXgu5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13327272889",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T06:43:35Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649141459",
      "pull_request_review_id": 2132948873,
      "id": 1649141459,
      "node_id": "PRRC_kwDOABII585iS-bT",
      "diff_hunk": "@@ -0,0 +1,221 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_COMMON_SV2_MESSAGES_H\n+#define BITCOIN_COMMON_SV2_MESSAGES_H\n+\n+#include <common/net_message.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <string>\n+#include <util/check.h>\n+\n+namespace node {",
      "path": "src/common/sv2_messages.h",
      "position": 14,
      "original_position": 14,
      "commit_id": "31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "original_commit_id": "e108385a6e0e1a9528c15ae8b668a91163e0af44",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "639be6df22800d2e2a170c1af74d51951597834c: this `namespace` is outdated, since this isn't part of the `node` anymore.",
      "created_at": "2024-06-21T15:47:21Z",
      "updated_at": "2024-06-21T15:47:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#discussion_r1649141459",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649141459"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 14,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649237537",
      "pull_request_review_id": 2133107146,
      "id": 1649237537,
      "node_id": "PRRC_kwDOABII585iTV4h",
      "diff_hunk": "@@ -0,0 +1,388 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/sv2_noise.h>\n+#include <common/sv2_transport.h>\n+#include <logging.h>\n+#include <serialize.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <node/timeoffsets.h>\n+#include <util/bitdeque.h>\n+#include <util/strencodings.h>\n+#include <util/string.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <algorithm>\n+#include <ios>\n+#include <memory>\n+#include <optional>\n+#include <string>\n+\n+using namespace std::literals;\n+using node::Sv2NetMsg;\n+using node::Sv2CoinbaseOutputDataSizeMsg;\n+using node::Sv2MsgType;\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_transport_tests, RegTestingSetup)\n+\n+namespace {\n+\n+/** A class for scenario-based tests of Sv2Transport\n+ *\n+ * Each Sv2TransportTester encapsulates a Sv2Transport (the one being tested),\n+ * and can be told to interact with it. To do so, it also encapsulates a Sv2Cipher\n+ * to act as the other side. A second Sv2Transport is not used, as doing so would\n+ * not permit scenarios that involve sending invalid data.\n+ */\n+class Sv2TransportTester\n+{\n+    std::unique_ptr<Sv2Transport> m_transport; //!< Sv2Transport being tested\n+    std::unique_ptr<Sv2Cipher> m_peer_cipher;  //!< Cipher to help with the other side\n+    bool m_test_initiator;    //!< Whether m_transport is the initiator (true) or responder (false)\n+\n+    std::vector<uint8_t> m_to_send;  //!< Bytes we have queued up to send to m_transport->\n+    std::vector<uint8_t> m_received; //!< Bytes we have received from m_transport->\n+    std::deque<Sv2NetMsg> m_msg_to_send; //!< Messages to be sent *by* m_transport to us.\n+\n+public:\n+    /** Construct a tester object. test_initiator: whether the tested transport is initiator. */\n+\n+    explicit Sv2TransportTester(bool test_initiator) : m_test_initiator(test_initiator)\n+    {\n+        auto initiator_static_key{GenerateRandomKey()};\n+        auto responder_static_key{GenerateRandomKey()};\n+        auto responder_authority_key{GenerateRandomKey()};\n+\n+        // Create certificates\n+        auto epoch_now = std::chrono::system_clock::now().time_since_epoch();\n+        uint16_t version = 0;\n+        uint32_t valid_from = static_cast<uint32_t>(std::chrono::duration_cast<std::chrono::seconds>(epoch_now).count());\n+        uint32_t valid_to =  std::numeric_limits<unsigned int>::max();\n+\n+        auto responder_certificate = Sv2SignatureNoiseMessage(version, valid_from, valid_to,\n+                                    XOnlyPubKey(responder_static_key.GetPubKey()), responder_authority_key);\n+\n+        if (test_initiator) {\n+            m_transport = std::make_unique<Sv2Transport>(initiator_static_key, XOnlyPubKey(responder_authority_key.GetPubKey()));\n+            m_peer_cipher = std::make_unique<Sv2Cipher>(std::move(responder_static_key), std::move(responder_certificate));\n+        } else {\n+            m_transport = std::make_unique<Sv2Transport>(responder_static_key, responder_certificate);\n+            m_peer_cipher = std::make_unique<Sv2Cipher>(std::move(initiator_static_key), XOnlyPubKey(responder_authority_key.GetPubKey()));\n+        }\n+    }\n+\n+    /** Data type returned by Interact:\n+     *\n+     * - std::nullopt: transport error occurred\n+     * - otherwise: a vector of\n+     *   - std::nullopt: invalid message received\n+     *   - otherwise: a Sv2NetMsg retrieved\n+     */\n+    using InteractResult = std::optional<std::vector<std::optional<Sv2NetMsg>>>;\n+\n+    void LogProgress(bool should_progress, bool progress, bool pretend_no_progress) {\n+        if (!should_progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] !should_progress\");\n+        } else if  (!progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] should_progress && !progress\");\n+        } else if (pretend_no_progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] pretend !progress\");\n+        }\n+    }\n+\n+    /** Send/receive scheduled/available bytes and messages.\n+     *\n+     * This is the only function that interacts with the transport being tested; everything else is\n+     * scheduling things done by Interact(), or processing things learned by it.\n+     */\n+    InteractResult Interact()\n+    {\n+        std::vector<std::optional<Sv2NetMsg>> ret;\n+        while (true) {\n+            bool progress{false};\n+            // Send bytes from m_to_send to the transport.\n+            if (!m_to_send.empty()) {\n+                size_t n_bytes_to_send = 1 + InsecureRandRange(m_to_send.size());\n+                BOOST_TEST_MESSAGE(strprintf(\"[Interact] send %d of %d bytes\", n_bytes_to_send, m_to_send.size()));\n+                Span<const uint8_t> to_send = Span{m_to_send}.first(n_bytes_to_send);\n+                size_t old_len = to_send.size();\n+                if (!m_transport->ReceivedBytes(to_send)) {\n+                    BOOST_TEST_MESSAGE(\"[Interact] transport error\");\n+                    return std::nullopt;\n+                }\n+                if (old_len != to_send.size()) {\n+                    progress = true;\n+                    m_to_send.erase(m_to_send.begin(), m_to_send.begin() + (old_len - to_send.size()));\n+                }\n+            }\n+            // Retrieve messages received by the transport.\n+            bool should_progress = m_transport->ReceivedMessageComplete();\n+            bool pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                bool dummy_reject_message = false;\n+                CNetMessage net_msg = m_transport->GetReceivedMessage(std::chrono::microseconds(0), dummy_reject_message);\n+                Sv2NetMsg msg(std::move(net_msg));\n+                ret.emplace_back(std::move(msg));\n+                progress = true;\n+            }\n+            // Enqueue a message to be sent by the transport to us.\n+            should_progress = !m_msg_to_send.empty();\n+            pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                BOOST_TEST_MESSAGE(\"Shoehorn into CSerializedNetMsg\");\n+                CSerializedNetMsg msg{m_msg_to_send.front()};\n+                BOOST_TEST_MESSAGE(\"Call SetMessageToSend\");\n+                if (m_transport->SetMessageToSend(msg)) {\n+                    BOOST_TEST_MESSAGE(\"Finished SetMessageToSend\");\n+                    m_msg_to_send.pop_front();\n+                    progress = true;\n+                }\n+            }\n+            // Receive bytes from the transport.\n+            const auto& [recv_bytes, _more, _m_type] = m_transport->GetBytesToSend(!m_msg_to_send.empty());\n+            should_progress = !recv_bytes.empty();\n+            pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                size_t to_receive = 1 + InsecureRandRange(recv_bytes.size());\n+                BOOST_TEST_MESSAGE(strprintf(\"[Interact] receive %d of %d bytes\", to_receive, recv_bytes.size()));\n+                m_received.insert(m_received.end(), recv_bytes.begin(), recv_bytes.begin() + to_receive);\n+                progress = true;\n+                m_transport->MarkBytesSent(to_receive);\n+            }\n+            if (!progress) break;\n+        }\n+        return ret;\n+    }\n+\n+    /** Schedule bytes to be sent to the transport. */\n+    void Send(Span<const uint8_t> data)\n+    {\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Send: %s\\n\", HexStr(data));\n+        m_to_send.insert(m_to_send.end(), data.begin(), data.end());\n+    }\n+\n+    /** Schedule bytes to be sent to the transport. */\n+    void Send(Span<const std::byte> data) { Send(MakeUCharSpan(data)); }\n+\n+    /** Schedule a message to be sent to us by the transport. */\n+    void AddMessage(Sv2NetMsg msg)\n+    {\n+        m_msg_to_send.push_back(std::move(msg));\n+    }\n+\n+    /**\n+     * If we are the initiator, the send buffer should contain our ephemeral public\n+     * key. Pass this to the peer cipher and clear the buffer.\n+     *\n+     * If we are the responder, put the peer ephemeral public key on our receive buffer.\n+     */\n+    void ProcessHandshake1() {\n+        if (m_test_initiator) {\n+            BOOST_REQUIRE(m_received.size() == Sv2HandshakeState::ELLSWIFT_PUB_KEY_SIZE);\n+            m_peer_cipher->GetHandshakeState().ReadMsgEphemeralPK(MakeWritableByteSpan(m_received));\n+            m_received.clear();\n+        } else {\n+            BOOST_REQUIRE(m_to_send.empty());\n+            m_to_send.resize(Sv2HandshakeState::ELLSWIFT_PUB_KEY_SIZE);\n+            m_peer_cipher->GetHandshakeState().WriteMsgEphemeralPK(MakeWritableByteSpan(m_to_send));\n+        }\n+\n+    }\n+\n+    /** Expect key to have been received from transport and process it.\n+     *\n+     * Many other Sv2TransportTester functions cannot be called until after\n+     * ProcessHandshake2() has been called, as no encryption keys are set up before that point.\n+     */\n+    void ProcessHandshake2()\n+    {\n+        if (m_test_initiator) {\n+            BOOST_REQUIRE(m_to_send.empty());\n+\n+            // Have the peer cypher write the second part of the handshake into our receive buffer\n+            m_to_send.resize(Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+            m_peer_cipher->GetHandshakeState().WriteMsgES(MakeWritableByteSpan(m_to_send));\n+\n+            // At this point the peer is done with the handshake:\n+            m_peer_cipher->FinishHandshake();\n+        } else {\n+            BOOST_REQUIRE(m_received.size() == Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+            BOOST_REQUIRE(m_peer_cipher->GetHandshakeState().ReadMsgES(MakeWritableByteSpan(m_received)));\n+            m_received.clear();\n+\n+            m_peer_cipher->FinishHandshake();\n+        }\n+    }\n+\n+    /** Schedule an encrypted packet with specified content to be sent to transport\n+     *  (only after ReceiveKey). */\n+    void SendPacket(Sv2NetMsg msg)\n+    {\n+        // TODO: randomly break stuff\n+\n+        std::vector<std::byte> ciphertext;\n+        const size_t encrypted_payload_size = Sv2Cipher::EncryptedMessageSize(msg.size());\n+        ciphertext.resize(SV2_HEADER_ENCRYPTED_SIZE + encrypted_payload_size);\n+        Span<std::byte> buffer_span{MakeWritableByteSpan(ciphertext)};\n+\n+        // Header\n+        DataStream ss_header_plain{};\n+        ss_header_plain << Sv2NetHeader(msg);\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Header: %s\\n\", HexStr(ss_header_plain));\n+        Span<std::byte> header_encrypted{buffer_span.subspan(0, SV2_HEADER_ENCRYPTED_SIZE)};\n+        BOOST_REQUIRE(m_peer_cipher->EncryptMessage(ss_header_plain, header_encrypted));\n+\n+        // Payload\n+        Span<const std::byte> payload_plain = MakeByteSpan(msg.data());\n+        // TODO: truncate very long messages, about 100 bytes at the start and end\n+        //       is probably enough for most debugging.\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Payload: %s\\n\", HexStr(payload_plain));",
      "path": "src/test/sv2_transport_tests.cpp",
      "position": 247,
      "original_position": 247,
      "commit_id": "31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "original_commit_id": "2f673b5959cee168b808e23c6f5554e2f673db15",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This trips up the address sanitizer: \r\nhttps://github.com/bitcoin/bitcoin/actions/runs/9616699499/job/26526819621?pr=30315#step:6:4956",
      "created_at": "2024-06-21T17:15:19Z",
      "updated_at": "2024-06-21T17:15:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#discussion_r1649237537",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649237537"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 247,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649241912",
      "pull_request_review_id": 2133114380,
      "id": 1649241912,
      "node_id": "PRRC_kwDOABII585iTW84",
      "diff_hunk": "@@ -0,0 +1,388 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/sv2_noise.h>\n+#include <common/sv2_transport.h>\n+#include <logging.h>\n+#include <serialize.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <node/timeoffsets.h>\n+#include <util/bitdeque.h>\n+#include <util/strencodings.h>\n+#include <util/string.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <algorithm>\n+#include <ios>\n+#include <memory>\n+#include <optional>\n+#include <string>\n+\n+using namespace std::literals;\n+using node::Sv2NetMsg;\n+using node::Sv2CoinbaseOutputDataSizeMsg;\n+using node::Sv2MsgType;\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_transport_tests, RegTestingSetup)\n+\n+namespace {\n+\n+/** A class for scenario-based tests of Sv2Transport\n+ *\n+ * Each Sv2TransportTester encapsulates a Sv2Transport (the one being tested),\n+ * and can be told to interact with it. To do so, it also encapsulates a Sv2Cipher\n+ * to act as the other side. A second Sv2Transport is not used, as doing so would\n+ * not permit scenarios that involve sending invalid data.\n+ */\n+class Sv2TransportTester\n+{\n+    std::unique_ptr<Sv2Transport> m_transport; //!< Sv2Transport being tested\n+    std::unique_ptr<Sv2Cipher> m_peer_cipher;  //!< Cipher to help with the other side\n+    bool m_test_initiator;    //!< Whether m_transport is the initiator (true) or responder (false)\n+\n+    std::vector<uint8_t> m_to_send;  //!< Bytes we have queued up to send to m_transport->\n+    std::vector<uint8_t> m_received; //!< Bytes we have received from m_transport->\n+    std::deque<Sv2NetMsg> m_msg_to_send; //!< Messages to be sent *by* m_transport to us.\n+\n+public:\n+    /** Construct a tester object. test_initiator: whether the tested transport is initiator. */\n+\n+    explicit Sv2TransportTester(bool test_initiator) : m_test_initiator(test_initiator)\n+    {\n+        auto initiator_static_key{GenerateRandomKey()};\n+        auto responder_static_key{GenerateRandomKey()};\n+        auto responder_authority_key{GenerateRandomKey()};\n+\n+        // Create certificates\n+        auto epoch_now = std::chrono::system_clock::now().time_since_epoch();\n+        uint16_t version = 0;\n+        uint32_t valid_from = static_cast<uint32_t>(std::chrono::duration_cast<std::chrono::seconds>(epoch_now).count());\n+        uint32_t valid_to =  std::numeric_limits<unsigned int>::max();\n+\n+        auto responder_certificate = Sv2SignatureNoiseMessage(version, valid_from, valid_to,\n+                                    XOnlyPubKey(responder_static_key.GetPubKey()), responder_authority_key);\n+\n+        if (test_initiator) {\n+            m_transport = std::make_unique<Sv2Transport>(initiator_static_key, XOnlyPubKey(responder_authority_key.GetPubKey()));\n+            m_peer_cipher = std::make_unique<Sv2Cipher>(std::move(responder_static_key), std::move(responder_certificate));\n+        } else {\n+            m_transport = std::make_unique<Sv2Transport>(responder_static_key, responder_certificate);\n+            m_peer_cipher = std::make_unique<Sv2Cipher>(std::move(initiator_static_key), XOnlyPubKey(responder_authority_key.GetPubKey()));\n+        }\n+    }\n+\n+    /** Data type returned by Interact:\n+     *\n+     * - std::nullopt: transport error occurred\n+     * - otherwise: a vector of\n+     *   - std::nullopt: invalid message received\n+     *   - otherwise: a Sv2NetMsg retrieved\n+     */\n+    using InteractResult = std::optional<std::vector<std::optional<Sv2NetMsg>>>;\n+\n+    void LogProgress(bool should_progress, bool progress, bool pretend_no_progress) {\n+        if (!should_progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] !should_progress\");\n+        } else if  (!progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] should_progress && !progress\");\n+        } else if (pretend_no_progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] pretend !progress\");\n+        }\n+    }\n+\n+    /** Send/receive scheduled/available bytes and messages.\n+     *\n+     * This is the only function that interacts with the transport being tested; everything else is\n+     * scheduling things done by Interact(), or processing things learned by it.\n+     */\n+    InteractResult Interact()\n+    {\n+        std::vector<std::optional<Sv2NetMsg>> ret;\n+        while (true) {\n+            bool progress{false};\n+            // Send bytes from m_to_send to the transport.\n+            if (!m_to_send.empty()) {\n+                size_t n_bytes_to_send = 1 + InsecureRandRange(m_to_send.size());\n+                BOOST_TEST_MESSAGE(strprintf(\"[Interact] send %d of %d bytes\", n_bytes_to_send, m_to_send.size()));\n+                Span<const uint8_t> to_send = Span{m_to_send}.first(n_bytes_to_send);\n+                size_t old_len = to_send.size();\n+                if (!m_transport->ReceivedBytes(to_send)) {\n+                    BOOST_TEST_MESSAGE(\"[Interact] transport error\");\n+                    return std::nullopt;\n+                }\n+                if (old_len != to_send.size()) {\n+                    progress = true;\n+                    m_to_send.erase(m_to_send.begin(), m_to_send.begin() + (old_len - to_send.size()));\n+                }\n+            }\n+            // Retrieve messages received by the transport.\n+            bool should_progress = m_transport->ReceivedMessageComplete();\n+            bool pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                bool dummy_reject_message = false;\n+                CNetMessage net_msg = m_transport->GetReceivedMessage(std::chrono::microseconds(0), dummy_reject_message);\n+                Sv2NetMsg msg(std::move(net_msg));\n+                ret.emplace_back(std::move(msg));\n+                progress = true;\n+            }\n+            // Enqueue a message to be sent by the transport to us.\n+            should_progress = !m_msg_to_send.empty();\n+            pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                BOOST_TEST_MESSAGE(\"Shoehorn into CSerializedNetMsg\");\n+                CSerializedNetMsg msg{m_msg_to_send.front()};\n+                BOOST_TEST_MESSAGE(\"Call SetMessageToSend\");\n+                if (m_transport->SetMessageToSend(msg)) {\n+                    BOOST_TEST_MESSAGE(\"Finished SetMessageToSend\");\n+                    m_msg_to_send.pop_front();\n+                    progress = true;\n+                }\n+            }\n+            // Receive bytes from the transport.\n+            const auto& [recv_bytes, _more, _m_type] = m_transport->GetBytesToSend(!m_msg_to_send.empty());\n+            should_progress = !recv_bytes.empty();\n+            pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                size_t to_receive = 1 + InsecureRandRange(recv_bytes.size());\n+                BOOST_TEST_MESSAGE(strprintf(\"[Interact] receive %d of %d bytes\", to_receive, recv_bytes.size()));\n+                m_received.insert(m_received.end(), recv_bytes.begin(), recv_bytes.begin() + to_receive);\n+                progress = true;\n+                m_transport->MarkBytesSent(to_receive);\n+            }\n+            if (!progress) break;\n+        }\n+        return ret;\n+    }\n+\n+    /** Schedule bytes to be sent to the transport. */\n+    void Send(Span<const uint8_t> data)\n+    {\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Send: %s\\n\", HexStr(data));\n+        m_to_send.insert(m_to_send.end(), data.begin(), data.end());\n+    }\n+\n+    /** Schedule bytes to be sent to the transport. */\n+    void Send(Span<const std::byte> data) { Send(MakeUCharSpan(data)); }\n+\n+    /** Schedule a message to be sent to us by the transport. */\n+    void AddMessage(Sv2NetMsg msg)\n+    {\n+        m_msg_to_send.push_back(std::move(msg));\n+    }\n+\n+    /**\n+     * If we are the initiator, the send buffer should contain our ephemeral public\n+     * key. Pass this to the peer cipher and clear the buffer.\n+     *\n+     * If we are the responder, put the peer ephemeral public key on our receive buffer.\n+     */\n+    void ProcessHandshake1() {\n+        if (m_test_initiator) {\n+            BOOST_REQUIRE(m_received.size() == Sv2HandshakeState::ELLSWIFT_PUB_KEY_SIZE);\n+            m_peer_cipher->GetHandshakeState().ReadMsgEphemeralPK(MakeWritableByteSpan(m_received));\n+            m_received.clear();\n+        } else {\n+            BOOST_REQUIRE(m_to_send.empty());\n+            m_to_send.resize(Sv2HandshakeState::ELLSWIFT_PUB_KEY_SIZE);\n+            m_peer_cipher->GetHandshakeState().WriteMsgEphemeralPK(MakeWritableByteSpan(m_to_send));\n+        }\n+\n+    }\n+\n+    /** Expect key to have been received from transport and process it.\n+     *\n+     * Many other Sv2TransportTester functions cannot be called until after\n+     * ProcessHandshake2() has been called, as no encryption keys are set up before that point.\n+     */\n+    void ProcessHandshake2()\n+    {\n+        if (m_test_initiator) {\n+            BOOST_REQUIRE(m_to_send.empty());\n+\n+            // Have the peer cypher write the second part of the handshake into our receive buffer\n+            m_to_send.resize(Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+            m_peer_cipher->GetHandshakeState().WriteMsgES(MakeWritableByteSpan(m_to_send));\n+\n+            // At this point the peer is done with the handshake:\n+            m_peer_cipher->FinishHandshake();\n+        } else {\n+            BOOST_REQUIRE(m_received.size() == Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+            BOOST_REQUIRE(m_peer_cipher->GetHandshakeState().ReadMsgES(MakeWritableByteSpan(m_received)));\n+            m_received.clear();\n+\n+            m_peer_cipher->FinishHandshake();\n+        }\n+    }\n+\n+    /** Schedule an encrypted packet with specified content to be sent to transport\n+     *  (only after ReceiveKey). */\n+    void SendPacket(Sv2NetMsg msg)\n+    {\n+        // TODO: randomly break stuff\n+\n+        std::vector<std::byte> ciphertext;\n+        const size_t encrypted_payload_size = Sv2Cipher::EncryptedMessageSize(msg.size());\n+        ciphertext.resize(SV2_HEADER_ENCRYPTED_SIZE + encrypted_payload_size);\n+        Span<std::byte> buffer_span{MakeWritableByteSpan(ciphertext)};\n+\n+        // Header\n+        DataStream ss_header_plain{};\n+        ss_header_plain << Sv2NetHeader(msg);\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Header: %s\\n\", HexStr(ss_header_plain));\n+        Span<std::byte> header_encrypted{buffer_span.subspan(0, SV2_HEADER_ENCRYPTED_SIZE)};\n+        BOOST_REQUIRE(m_peer_cipher->EncryptMessage(ss_header_plain, header_encrypted));\n+\n+        // Payload\n+        Span<const std::byte> payload_plain = MakeByteSpan(msg.data());\n+        // TODO: truncate very long messages, about 100 bytes at the start and end\n+        //       is probably enough for most debugging.\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Payload: %s\\n\", HexStr(payload_plain));",
      "path": "src/test/sv2_transport_tests.cpp",
      "position": 247,
      "original_position": 247,
      "commit_id": "31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "original_commit_id": "2f673b5959cee168b808e23c6f5554e2f673db15",
      "in_reply_to_id": 1649237537,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Pretty sure you mean `MakeByteSpan(msg)`, not `MakeByteSpan(msg.data())`.",
      "created_at": "2024-06-21T17:20:20Z",
      "updated_at": "2024-06-21T17:20:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#discussion_r1649241912",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649241912"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 247,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649293172",
      "pull_request_review_id": 2133197114,
      "id": 1649293172,
      "node_id": "PRRC_kwDOABII585iTjd0",
      "diff_hunk": "@@ -0,0 +1,388 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/sv2_noise.h>\n+#include <common/sv2_transport.h>\n+#include <logging.h>\n+#include <serialize.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <node/timeoffsets.h>\n+#include <util/bitdeque.h>\n+#include <util/strencodings.h>\n+#include <util/string.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <algorithm>\n+#include <ios>\n+#include <memory>\n+#include <optional>\n+#include <string>\n+\n+using namespace std::literals;\n+using node::Sv2NetMsg;\n+using node::Sv2CoinbaseOutputDataSizeMsg;\n+using node::Sv2MsgType;\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_transport_tests, RegTestingSetup)\n+\n+namespace {\n+\n+/** A class for scenario-based tests of Sv2Transport\n+ *\n+ * Each Sv2TransportTester encapsulates a Sv2Transport (the one being tested),\n+ * and can be told to interact with it. To do so, it also encapsulates a Sv2Cipher\n+ * to act as the other side. A second Sv2Transport is not used, as doing so would\n+ * not permit scenarios that involve sending invalid data.\n+ */\n+class Sv2TransportTester\n+{\n+    std::unique_ptr<Sv2Transport> m_transport; //!< Sv2Transport being tested\n+    std::unique_ptr<Sv2Cipher> m_peer_cipher;  //!< Cipher to help with the other side\n+    bool m_test_initiator;    //!< Whether m_transport is the initiator (true) or responder (false)\n+\n+    std::vector<uint8_t> m_to_send;  //!< Bytes we have queued up to send to m_transport->\n+    std::vector<uint8_t> m_received; //!< Bytes we have received from m_transport->\n+    std::deque<Sv2NetMsg> m_msg_to_send; //!< Messages to be sent *by* m_transport to us.\n+\n+public:\n+    /** Construct a tester object. test_initiator: whether the tested transport is initiator. */\n+\n+    explicit Sv2TransportTester(bool test_initiator) : m_test_initiator(test_initiator)\n+    {\n+        auto initiator_static_key{GenerateRandomKey()};\n+        auto responder_static_key{GenerateRandomKey()};\n+        auto responder_authority_key{GenerateRandomKey()};\n+\n+        // Create certificates\n+        auto epoch_now = std::chrono::system_clock::now().time_since_epoch();\n+        uint16_t version = 0;\n+        uint32_t valid_from = static_cast<uint32_t>(std::chrono::duration_cast<std::chrono::seconds>(epoch_now).count());\n+        uint32_t valid_to =  std::numeric_limits<unsigned int>::max();\n+\n+        auto responder_certificate = Sv2SignatureNoiseMessage(version, valid_from, valid_to,\n+                                    XOnlyPubKey(responder_static_key.GetPubKey()), responder_authority_key);\n+\n+        if (test_initiator) {\n+            m_transport = std::make_unique<Sv2Transport>(initiator_static_key, XOnlyPubKey(responder_authority_key.GetPubKey()));\n+            m_peer_cipher = std::make_unique<Sv2Cipher>(std::move(responder_static_key), std::move(responder_certificate));\n+        } else {\n+            m_transport = std::make_unique<Sv2Transport>(responder_static_key, responder_certificate);\n+            m_peer_cipher = std::make_unique<Sv2Cipher>(std::move(initiator_static_key), XOnlyPubKey(responder_authority_key.GetPubKey()));\n+        }\n+    }\n+\n+    /** Data type returned by Interact:\n+     *\n+     * - std::nullopt: transport error occurred\n+     * - otherwise: a vector of\n+     *   - std::nullopt: invalid message received\n+     *   - otherwise: a Sv2NetMsg retrieved\n+     */\n+    using InteractResult = std::optional<std::vector<std::optional<Sv2NetMsg>>>;\n+\n+    void LogProgress(bool should_progress, bool progress, bool pretend_no_progress) {\n+        if (!should_progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] !should_progress\");\n+        } else if  (!progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] should_progress && !progress\");\n+        } else if (pretend_no_progress) {\n+            BOOST_TEST_MESSAGE(\"[Interact] pretend !progress\");\n+        }\n+    }\n+\n+    /** Send/receive scheduled/available bytes and messages.\n+     *\n+     * This is the only function that interacts with the transport being tested; everything else is\n+     * scheduling things done by Interact(), or processing things learned by it.\n+     */\n+    InteractResult Interact()\n+    {\n+        std::vector<std::optional<Sv2NetMsg>> ret;\n+        while (true) {\n+            bool progress{false};\n+            // Send bytes from m_to_send to the transport.\n+            if (!m_to_send.empty()) {\n+                size_t n_bytes_to_send = 1 + InsecureRandRange(m_to_send.size());\n+                BOOST_TEST_MESSAGE(strprintf(\"[Interact] send %d of %d bytes\", n_bytes_to_send, m_to_send.size()));\n+                Span<const uint8_t> to_send = Span{m_to_send}.first(n_bytes_to_send);\n+                size_t old_len = to_send.size();\n+                if (!m_transport->ReceivedBytes(to_send)) {\n+                    BOOST_TEST_MESSAGE(\"[Interact] transport error\");\n+                    return std::nullopt;\n+                }\n+                if (old_len != to_send.size()) {\n+                    progress = true;\n+                    m_to_send.erase(m_to_send.begin(), m_to_send.begin() + (old_len - to_send.size()));\n+                }\n+            }\n+            // Retrieve messages received by the transport.\n+            bool should_progress = m_transport->ReceivedMessageComplete();\n+            bool pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                bool dummy_reject_message = false;\n+                CNetMessage net_msg = m_transport->GetReceivedMessage(std::chrono::microseconds(0), dummy_reject_message);\n+                Sv2NetMsg msg(std::move(net_msg));\n+                ret.emplace_back(std::move(msg));\n+                progress = true;\n+            }\n+            // Enqueue a message to be sent by the transport to us.\n+            should_progress = !m_msg_to_send.empty();\n+            pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                BOOST_TEST_MESSAGE(\"Shoehorn into CSerializedNetMsg\");\n+                CSerializedNetMsg msg{m_msg_to_send.front()};\n+                BOOST_TEST_MESSAGE(\"Call SetMessageToSend\");\n+                if (m_transport->SetMessageToSend(msg)) {\n+                    BOOST_TEST_MESSAGE(\"Finished SetMessageToSend\");\n+                    m_msg_to_send.pop_front();\n+                    progress = true;\n+                }\n+            }\n+            // Receive bytes from the transport.\n+            const auto& [recv_bytes, _more, _m_type] = m_transport->GetBytesToSend(!m_msg_to_send.empty());\n+            should_progress = !recv_bytes.empty();\n+            pretend_no_progress = InsecureRandBool();\n+            LogProgress(should_progress, progress, pretend_no_progress);\n+            if (should_progress && (!progress || pretend_no_progress)) {\n+                size_t to_receive = 1 + InsecureRandRange(recv_bytes.size());\n+                BOOST_TEST_MESSAGE(strprintf(\"[Interact] receive %d of %d bytes\", to_receive, recv_bytes.size()));\n+                m_received.insert(m_received.end(), recv_bytes.begin(), recv_bytes.begin() + to_receive);\n+                progress = true;\n+                m_transport->MarkBytesSent(to_receive);\n+            }\n+            if (!progress) break;\n+        }\n+        return ret;\n+    }\n+\n+    /** Schedule bytes to be sent to the transport. */\n+    void Send(Span<const uint8_t> data)\n+    {\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Send: %s\\n\", HexStr(data));\n+        m_to_send.insert(m_to_send.end(), data.begin(), data.end());\n+    }\n+\n+    /** Schedule bytes to be sent to the transport. */\n+    void Send(Span<const std::byte> data) { Send(MakeUCharSpan(data)); }\n+\n+    /** Schedule a message to be sent to us by the transport. */\n+    void AddMessage(Sv2NetMsg msg)\n+    {\n+        m_msg_to_send.push_back(std::move(msg));\n+    }\n+\n+    /**\n+     * If we are the initiator, the send buffer should contain our ephemeral public\n+     * key. Pass this to the peer cipher and clear the buffer.\n+     *\n+     * If we are the responder, put the peer ephemeral public key on our receive buffer.\n+     */\n+    void ProcessHandshake1() {\n+        if (m_test_initiator) {\n+            BOOST_REQUIRE(m_received.size() == Sv2HandshakeState::ELLSWIFT_PUB_KEY_SIZE);\n+            m_peer_cipher->GetHandshakeState().ReadMsgEphemeralPK(MakeWritableByteSpan(m_received));\n+            m_received.clear();\n+        } else {\n+            BOOST_REQUIRE(m_to_send.empty());\n+            m_to_send.resize(Sv2HandshakeState::ELLSWIFT_PUB_KEY_SIZE);\n+            m_peer_cipher->GetHandshakeState().WriteMsgEphemeralPK(MakeWritableByteSpan(m_to_send));\n+        }\n+\n+    }\n+\n+    /** Expect key to have been received from transport and process it.\n+     *\n+     * Many other Sv2TransportTester functions cannot be called until after\n+     * ProcessHandshake2() has been called, as no encryption keys are set up before that point.\n+     */\n+    void ProcessHandshake2()\n+    {\n+        if (m_test_initiator) {\n+            BOOST_REQUIRE(m_to_send.empty());\n+\n+            // Have the peer cypher write the second part of the handshake into our receive buffer\n+            m_to_send.resize(Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+            m_peer_cipher->GetHandshakeState().WriteMsgES(MakeWritableByteSpan(m_to_send));\n+\n+            // At this point the peer is done with the handshake:\n+            m_peer_cipher->FinishHandshake();\n+        } else {\n+            BOOST_REQUIRE(m_received.size() == Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+            BOOST_REQUIRE(m_peer_cipher->GetHandshakeState().ReadMsgES(MakeWritableByteSpan(m_received)));\n+            m_received.clear();\n+\n+            m_peer_cipher->FinishHandshake();\n+        }\n+    }\n+\n+    /** Schedule an encrypted packet with specified content to be sent to transport\n+     *  (only after ReceiveKey). */\n+    void SendPacket(Sv2NetMsg msg)\n+    {\n+        // TODO: randomly break stuff\n+\n+        std::vector<std::byte> ciphertext;\n+        const size_t encrypted_payload_size = Sv2Cipher::EncryptedMessageSize(msg.size());\n+        ciphertext.resize(SV2_HEADER_ENCRYPTED_SIZE + encrypted_payload_size);\n+        Span<std::byte> buffer_span{MakeWritableByteSpan(ciphertext)};\n+\n+        // Header\n+        DataStream ss_header_plain{};\n+        ss_header_plain << Sv2NetHeader(msg);\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Header: %s\\n\", HexStr(ss_header_plain));\n+        Span<std::byte> header_encrypted{buffer_span.subspan(0, SV2_HEADER_ENCRYPTED_SIZE)};\n+        BOOST_REQUIRE(m_peer_cipher->EncryptMessage(ss_header_plain, header_encrypted));\n+\n+        // Payload\n+        Span<const std::byte> payload_plain = MakeByteSpan(msg.data());\n+        // TODO: truncate very long messages, about 100 bytes at the start and end\n+        //       is probably enough for most debugging.\n+        LogPrintLevel(BCLog::SV2, BCLog::Level::Trace, \"Payload: %s\\n\", HexStr(payload_plain));",
      "path": "src/test/sv2_transport_tests.cpp",
      "position": 247,
      "original_position": 247,
      "commit_id": "31009f6b3aa49e6957e4993551e9e6776aa5015d",
      "original_commit_id": "2f673b5959cee168b808e23c6f5554e2f673db15",
      "in_reply_to_id": 1649237537,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I did! Did I? Should be fixed now.",
      "created_at": "2024-06-21T18:15:05Z",
      "updated_at": "2024-06-21T18:15:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30315#discussion_r1649293172",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649293172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30315"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 247,
      "original_line": 247,
      "side": "RIGHT"
    }
  ]
}