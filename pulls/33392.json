{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392",
    "id": 2829858173,
    "node_id": "PR_kwDOABII586orDV9",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33392",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33392.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33392.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/1ed236e3c686582e35f20ab668cd6d93316fae2c",
    "number": 33392,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet, rpc: add UTXO set check and incremental rescan to importdescriptors",
    "user": {
      "login": "musaHaruna",
      "id": 124810379,
      "node_id": "U_kgDOB3B0iw",
      "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/musaHaruna",
      "html_url": "https://github.com/musaHaruna",
      "followers_url": "https://api.github.com/users/musaHaruna/followers",
      "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
      "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
      "repos_url": "https://api.github.com/users/musaHaruna/repos",
      "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Fixes [#28898](https://github.com/bitcoin/bitcoin/issues/28898)\r\n\r\nWhen importing descriptors, users may accidentally provide an incorrect birthdate (timestamp). This can cause the wallet to miss relevant historical transactions, leading to incorrect or incomplete balances. Currently, the wallet only relies on rescans starting from the provided timestamp.\r\n\r\nThis PR extends the importdescriptors RPC with a new optional argument:\r\n`scan_utxoset` (bool, default=false):\r\nIf enabled, the wallet will compare its calculated trusted balance against UTXO set balance (by generating the `scriptpukeys` of the wallet and comparing it with the chains UTXO set `scriptpubkeys` to get the accurate balance belonging to the wallet and comparing it with the wallet trusted balance).\r\n\r\nIf the balances match, import continues as normal.\r\nIf a discrepancy is detected, the wallet will attempt incremental rescans in chunks of recent blocks until the missing history is found. If the wallet is pruned, incremental rescans will not go earlier than the prune boundary.\r\n\r\nAdditional information is returned in the RPC response under an `\"info\" ` object when `scan_utxoset` is used, such as:\r\n`utxo_check`: whether the UTXO set matched the wallet balance\r\n`scanned_chunks:` number of incremental rescan chunks attempted\r\n`scanned_blocks`: approximate number of blocks scanned during incremental rescans\r\n\r\nThis helps detect and fix balance mismatches caused by wrong descriptor timestamps.\r\n\r\nA big thanks to **fjahr** for suggesting this approach [comment](https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300319224)\r\n",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2025-09-15T16:17:12Z",
    "updated_at": "2025-10-15T14:19:50Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "19fc082db8d377367aef84e27bf25c1868a10bf5",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "musaHaruna:feature/scan-utxoset-balance-check",
      "ref": "feature/scan-utxoset-balance-check",
      "sha": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 941838367,
        "node_id": "R_kgDOOCNQHw",
        "name": "bitcoin",
        "full_name": "musaHaruna/bitcoin",
        "owner": {
          "login": "musaHaruna",
          "id": 124810379,
          "node_id": "U_kgDOB3B0iw",
          "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/musaHaruna",
          "html_url": "https://github.com/musaHaruna",
          "followers_url": "https://api.github.com/users/musaHaruna/followers",
          "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
          "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
          "repos_url": "https://api.github.com/users/musaHaruna/repos",
          "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/musaHaruna/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/musaHaruna/bitcoin",
        "archive_url": "https://api.github.com/repos/musaHaruna/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/musaHaruna/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/musaHaruna/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/musaHaruna/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/musaHaruna/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/musaHaruna/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/musaHaruna/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/musaHaruna/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/musaHaruna/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/musaHaruna/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/musaHaruna/bitcoin/events",
        "forks_url": "https://api.github.com/repos/musaHaruna/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/musaHaruna/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/musaHaruna/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/musaHaruna/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/musaHaruna/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/musaHaruna/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/musaHaruna/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/musaHaruna/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/musaHaruna/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/musaHaruna/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/musaHaruna/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/musaHaruna/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/musaHaruna/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:musaHaruna/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/musaHaruna/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/musaHaruna/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/musaHaruna/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/musaHaruna/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/musaHaruna/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/musaHaruna/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/musaHaruna/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/musaHaruna/bitcoin/hooks",
        "svn_url": "https://github.com/musaHaruna/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 251018,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-20T16:38:54Z",
        "created_at": "2025-03-03T06:14:54Z",
        "updated_at": "2025-09-14T11:23:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "edb871cba22a658714ce97e843ff84cfe1ba9ac4",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38032,
        "stargazers_count": 86185,
        "watchers_count": 86185,
        "size": 294954,
        "default_branch": "master",
        "open_issues_count": 824,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-10-15T14:01:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-10-15T14:26:37Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 422,
    "deletions": 6,
    "changed_files": 11,
    "commits": 6,
    "review_comments": 1,
    "comments": 7
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJhOWYxMzQ3MzRiNjFhNDBjNWQ2ZmMzZjlkMzgzNjkxNGE5NWQ4NWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "tree": {
        "sha": "6bf062a7e39059fc69f29693f27a8d123a56c367",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bf062a7e39059fc69f29693f27a8d123a56c367"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "sha": "d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d20f10affba83601f1855bc87d0f47e9dfd5caae"
        }
      ],
      "message": "node: add and implement FindCoinsByScript for UTXO-set scan by script\n\nAdd node::FindCoinsByScript and wire it into the node interface as\nNode::getCoinsByScript(), then implement the DB-backed scan that iterates\nthe on-disk UTXO DB with a CCoinsViewCursor.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-14T11:04:16Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-14T11:04:16Z"
      },
      "sha": "ba9f134734b61a40c5d6fc3f9d3836914a95d85c"
    },
    {
      "event": "labeled",
      "id": 19705655772,
      "node_id": "LE_lADOABII587LxCIazwAAAASWjHHc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19705655772",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T16:17:15Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 3292958552,
      "node_id": "IC_kwDOABII587ERo9Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3292958552",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T16:17:17Z",
      "updated_at": "2025-10-15T14:19:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33392.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33135](https://github.com/bitcoin/bitcoin/pull/33135) (wallet: warn against accidental unsafe older() import by Sjors)\n* [#32861](https://github.com/bitcoin/bitcoin/pull/32861) (Have createwalletdescriptor auto-detect an unused(KEY) by Sjors)\n* [#32652](https://github.com/bitcoin/bitcoin/pull/32652) (wallet: add codex32 argument to addhdkey by roconnor-blockstream)\n* [#30343](https://github.com/bitcoin/bitcoin/pull/30343) (wallet, logging: Replace WalletLogPrintf() with LogInfo() by ryanofsky)\n* [#29136](https://github.com/bitcoin/bitcoin/pull/29136) (wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\nPossible typos and grammar issues:\n\n- \"If true, scans the UTXO set balance and compare with wallet balance and triggers incremental rescan if discrepency is found.\" -> \"If true, scans the UTXO set balance and compares with wallet balance and triggers incremental rescan if discrepancy is found.\" [subject-verb agreement (\"compare\" -> \"compares\") and spelling (\"discrepency\" -> \"discrepancy\")]\n\n- \"# Mine 1000 total 1000 more blocksthen send the second tx\" -> \"# Mine 1000 more blocks, then send the second tx\" [typo/duplication (\"total 1000 1000\") and missing space in \"blocksthen\"; rewritten for clarity]\n\n<sup>drahtbot_id_5_m</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3292958552",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19724845449,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAASXsUGJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19724845449",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "93baccaa356d94fb9a2573ffe45dd196798867b7",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/93baccaa356d94fb9a2573ffe45dd196798867b7",
      "created_at": "2025-09-16T11:55:32Z"
    },
    {
      "event": "commented",
      "id": 3298984427,
      "node_id": "IC_kwDOABII587EooHr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3298984427",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T14:17:29Z",
      "updated_at": "2025-09-16T14:18:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "It seems kind of weird to me to add this as an option to `getbalance`. The problem is in the `importdescriptors` call, which is using the wrong birthdate. Have you looked into making this an option of `importdescriptors`? If the performance isn't too bad, this could even be on by default. If that is possible that would seem preferred, since you also write \"However, users may not realize that their wallet balance is incomplete.\", if they don't know they likely also won't call the `getbalance` with this option. So ideally we could \"force\" this on users in a way that they don't feel (much) negative impact from it. If we can't do that then I am not sure this is of much use since the users could just call `rescanblockchain` directly if they are aware that there is a problem with their balances.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3298984427",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3299464744,
      "node_id": "IC_kwDOABII587EqdYo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3299464744",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T16:13:28Z",
      "updated_at": "2025-09-16T19:42:29Z",
      "author_association": "NONE",
      "body": ">  Have you looked into making this an option of importdescriptors? \r\n\r\nI have not looked into making it an option for `importdecriptors`, but I will look into it, and get back to you on that.  \r\n\r\nJust thinking on a high level and somewhat naively because am a new contributor with little knowledge about the codebase,  what if we can atomatically cross check the balance by scanning the utxoset in `importdescriptor` before triggering the rescan, incase of wrong birthtime, seeing that even if they use the new flags in `getbalance`, they might/will eventually have to run `rescanblockchain`.\r\n\r\nThanks for the suggestion. I really appreciate it.\r\n",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3299464744",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3300125137,
      "node_id": "IC_kwDOABII587Es-nR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3300125137",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T19:45:09Z",
      "updated_at": "2025-09-16T19:47:56Z",
      "author_association": "NONE",
      "body": "> I have not looked into making it an option for importdecriptors, but I will look into it, and get back to you on that.\r\n\r\nYes, I have looked into adding the option to `importdescriptors` by introducing a `scan_utxoset` flag and it's possible. The idea is that when enabled, the wallet would scan the UTXO set immediately after import to verify balances against chainstate, and if a discrepancy is detected (for example due to an incorrect birthdate), it could automatically trigger a full rescan from height `0` to restore missing history. This way, users wouldn’t have to manually diagnose incomplete balances — the import flow itself would handle it. What Do you think this approach?.\r\n\r\nI don’t yet know the full impact on performance, but I’m thinking of making the trade-offs very clear in the RPC docs so users can decide whether to enable it.",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300125137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3300319224,
      "node_id": "IC_kwDOABII587Ett_4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3300319224",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T20:53:18Z",
      "updated_at": "2025-09-16T20:53:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Yes, I have looked into adding the option to importdescriptors by introducing a scan_utxoset flag and it's possible. The idea is that when enabled, the wallet would scan the UTXO set immediately after import to verify balances against chainstate, and if a discrepancy is detected (for example due to an incorrect birthdate), it could automatically trigger a full rescan from height 0 to restore missing history. This way, users wouldn’t have to manually diagnose incomplete balances — the import flow itself would handle it. What Do you think this approach?.\r\n\r\nCool, this is pretty much what I had in mind, I guess I would slightly prefer that full rescan isn't started by default and rather the user receives a clear hint that there might be some funds missing and if they want to make sure to get them they should run a full rescan, basically just like what you are doing now in the return from `getbalance`. But I don't have a strong preference there, either sound fine, maybe wait for some more conceptual feedback from other reviewers. \r\n\r\n> I don’t yet know the full impact on performance, but I’m thinking of making the trade-offs very clear in the RPC docs so users can decide whether to enable it.\r\n\r\nMaybe run some benchmarks on the utxo set scan and full rescan and add them to the PR here. I don't have a good feeling for what the relation is and this might influence what reviewers think is better concerning running a full rescan automatically or just returning a warning/hint from `importdescriptors`.\r\n\r\nAnother idea concerning performance: It seems likely that if the birth date is wrong the user might be off by just a few days or weeks, rather than they have a wallet with the satoshi coins. So instead of a full rescan from the start of the chain the rescan could move backwards from the originally supplied birth date and scan the chain in 1000 (or so) block increments and it could stop once the balance matches the one from the utxo set scan. A nice side effect of this is that it means the rescan is also pruning compatible (for as many blocks that are available) but I guess this could be also achieved by starting from pruneheight instead of 0 if pruning is enabled. It's something you need to keep in mind either way. This would also need benchmarks but I can't imagine moving backwards with somewhat large increments would make the process much slower. And ideally the process would exit early in the most common scenario.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300319224",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3302123151,
      "node_id": "IC_kwDOABII587E0maP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3302123151",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T09:27:39Z",
      "updated_at": "2025-09-17T09:27:39Z",
      "author_association": "NONE",
      "body": "> Maybe run some benchmarks on the utxo set scan and full rescan and add them to the PR here. I don't have a good feeling for what the relation is and this might influence what reviewers think is better concerning running a full rescan automatically or just returning a warning/hint from `importdescriptors`.\r\n\r\nI will run some benchmarks on both utxo set scan and full rescan, update the whole PR to use the new approach you suggested i.e to add the feature on `importdescriptors` directly, which I honestly think is better. \r\n\r\n\r\n> Another idea concerning performance: It seems likely that if the birth date is wrong the user might be off by just a few days or weeks, rather than they have a wallet with the satoshi coins. So instead of a full rescan from the start of the chain the rescan could move backwards from the originally supplied birth date and scan the chain in 1000 (or so) block increments and it could stop once the balance matches the one from the utxo set scan. A nice side effect of this is that it means the rescan is also pruning compatible (for as many blocks that are available) but I guess this could be also achieved by starting from pruneheight instead of 0 if pruning is enabled. It's something you need to keep in mind either way. This would also need benchmarks but I can't imagine moving backwards with somewhat large increments would make the process much slower. And ideally the process would exit early in the most common scenario.\r\n\r\nJust to make sure we’re on the same page — my understanding is that the idea is to:\r\n\r\nUse chunked backward rescans starting from the supplied birthdate (e.g. 1000-block increments), and stop as soon as the wallet balance matches the UTXO-set scan. This handles the common case where the birthdate is only off by a few days or weeks, so we don’t need to rescan the entire chain.\r\n\r\nAt the same time, respect the pruneheight as the lower bound if pruning is enabled. That means we only scan back as far as blocks are available, and if the discrepancy still isn’t resolved at that point, we’d warn the user that a reindex is required.",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3302123151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "renamed",
      "id": 19749943072,
      "node_id": "RTE_lADOABII587LxCIazwAAAASZMDcg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19749943072",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T12:57:45Z",
      "rename": {
        "from": "rpc: add scan_utxoset option to getbalance(s) to verify wallet balance accuracy",
        "to": "wallet/rpc: add scan_utxoset option to getbalance(s) to verify wallet balance accuracy"
      }
    },
    {
      "event": "commented",
      "id": 3307315975,
      "node_id": "IC_kwDOABII587FIaMH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3307315975",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-18T12:58:25Z",
      "updated_at": "2025-09-18T12:58:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Just to make sure we’re on the same page — my understanding is that the idea is to:\r\n> \r\n> Use chunked backward rescans starting from the supplied birthdate (e.g. 1000-block increments), and stop as soon as the wallet balance matches the UTXO-set scan. This handles the common case where the birthdate is only off by a few days or weeks, so we don’t need to rescan the entire chain.\r\n\r\nRight, so for example if the supplied birthdate was blockheight `800,000` but there is a discrepancy, then, instead rescanning from 0 to 800k right away, scan 799k - 800k and check the balance, exit if it's a match, continue with 798k - 799k and so on. This shouldn't be too complex to implement since the `rescanblockchain` RPC already takes a start and an end height.\r\n\r\n> At the same time, respect the pruneheight as the lower bound if pruning is enabled. That means we only scan back as far as blocks are available, and if the discrepancy still isn’t resolved at that point, we’d warn the user that a reindex is required.\r\n\r\nYeah, there would be some kind of safe abort if the approach for walking backwards runs into unavailable blocks, just like `rescanblockchain` does as well.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3307315975",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "reviewed",
      "id": 3242264016,
      "node_id": "PRR_kwDOABII587BQQXQ",
      "url": null,
      "actor": null,
      "commit_id": "93baccaa356d94fb9a2573ffe45dd196798867b7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-18T22:32:25Z",
      "author_association": "MEMBER",
      "body": "I agree getbalance* is the wrong place for this kind of check.\r\n\r\nBut it also will fail to detect incorrect birthdates if the TXOs are spent, so it can't be relied on either...",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#pullrequestreview-3242264016",
      "submitted_at": "2025-09-18T22:32:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19793742161,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAASbzIlR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19793742161",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "created_at": "2025-09-19T08:13:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19798716927,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScGHH_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19798716927",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4eb2ce690b6e5754c0ad1444d70f7dd478b774b5",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/4eb2ce690b6e5754c0ad1444d70f7dd478b774b5",
      "created_at": "2025-09-19T12:39:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19801176886,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScPfs2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19801176886",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1c23d97b7e41857660c6bfeaeca042dc9ce6a401",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/1c23d97b7e41857660c6bfeaeca042dc9ce6a401",
      "created_at": "2025-09-19T14:39:26Z"
    },
    {
      "event": "renamed",
      "id": 19801297650,
      "node_id": "RTE_lADOABII587LxCIazwAAAAScP9Ly",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19801297650",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-19T14:44:30Z",
      "rename": {
        "from": "wallet/rpc: add scan_utxoset option to getbalance(s) to verify wallet balance accuracy",
        "to": "wallet, rpc: add UTXO set check and incremental rescan to importdescriptors"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjMDZkZGI4YjllMzNiN2E1OTRhZjllMzhlMDBmMmE4NDEwOTQ3Yjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac06ddb8b9e33b7a594af9e38e00f2a8410947b7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ac06ddb8b9e33b7a594af9e38e00f2a8410947b7",
      "tree": {
        "sha": "1d004fb8f9355099d55fe524da785b8553dcdbfa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1d004fb8f9355099d55fe524da785b8553dcdbfa"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
          "sha": "ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ba9f134734b61a40c5d6fc3f9d3836914a95d85c"
        }
      ],
      "message": "wallet: add GetWalletUTXOSetBalance to calculate balance from UTXO set\n\nIntroduce a new helper `GetWalletUTXOSetBalance(const CWallet&)` that\nderives the wallet’s balance directly from the UTXO set rather than from\nthe wallet’s transaction history.\n\nUsefull for verifying wallet balance correctness against the\nchainstate without requiring a full rescan.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T15:11:52Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T08:21:05Z"
      },
      "sha": "ac06ddb8b9e33b7a594af9e38e00f2a8410947b7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhM2FjNzM3OGNhMDE2YzU5OGQ1MWZhMDBhOWNjMDIxMDM3NTQ1Njk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa3ac7378ca016c598d51fa00a9cc02103754569",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa3ac7378ca016c598d51fa00a9cc02103754569",
      "tree": {
        "sha": "68502450e287d23dd5de30554e660fc69c5bbe22",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/68502450e287d23dd5de30554e660fc69c5bbe22"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac06ddb8b9e33b7a594af9e38e00f2a8410947b7",
          "sha": "ac06ddb8b9e33b7a594af9e38e00f2a8410947b7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ac06ddb8b9e33b7a594af9e38e00f2a8410947b7"
        }
      ],
      "message": "wallet/rpc: add scan_utxoset arg & docs for importdescriptors\n\nAdd a new optional boolean RPC argument `scan_utxoset` to\nimportdescriptors and document the response fields used when the\nscan_utxoset check is enabled.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T15:12:07Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T09:22:08Z"
      },
      "sha": "fa3ac7378ca016c598d51fa00a9cc02103754569"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM3NzE5NjA5ZjFkYzUyODA2MWMxM2Y3NWU0NjUwOTY3NDc3M2VkZDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37719609f1dc528061c13f75e46509674773edd9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/37719609f1dc528061c13f75e46509674773edd9",
      "tree": {
        "sha": "5eca420cec094dbf170bb21e2b508bc15c1b29af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5eca420cec094dbf170bb21e2b508bc15c1b29af"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa3ac7378ca016c598d51fa00a9cc02103754569",
          "sha": "fa3ac7378ca016c598d51fa00a9cc02103754569",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa3ac7378ca016c598d51fa00a9cc02103754569"
        }
      ],
      "message": "wallet: extend RescanFromTime with optional endTime to limit rescan range\n\nAdd a new overload of CWallet::RescanFromTime that accepts an optional\nendTime parameter. When provided, the method finds the approximate end\nheight and calls ScanForWalletTransactions with a bounded [start, end]\nrange. This makes incremental or windowed rescans possible while preserving\nexisting behavior when no endTime is specified.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T15:12:07Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T13:11:10Z"
      },
      "sha": "37719609f1dc528061c13f75e46509674773edd9"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19801924835,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScSWTj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19801924835",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e45f79b80b1bebd19fd2b59c34ffc16f085d50cf",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/e45f79b80b1bebd19fd2b59c34ffc16f085d50cf",
      "created_at": "2025-09-19T15:13:20Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgyYTIyMmIwMGQ2NDk3ZGMyMmU4NTIwNWRhZTU3N2ExYWRmMTU5ODk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82a222b00d6497dc22e85205dae577a1adf15989",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/82a222b00d6497dc22e85205dae577a1adf15989",
      "tree": {
        "sha": "b4101ad89c41efe324110bbc643c816364cd5a44",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b4101ad89c41efe324110bbc643c816364cd5a44"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37719609f1dc528061c13f75e46509674773edd9",
          "sha": "37719609f1dc528061c13f75e46509674773edd9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/37719609f1dc528061c13f75e46509674773edd9"
        }
      ],
      "message": "rpc: extend importdescriptors with UTXO check and incremental rescan\n\nExtend the importdescriptors RPC with an optional `scan_utxoset` parameter.\nWhen enabled, the wallet balance is compared against a balance derived from\nthe UTXO set. If a discrepancy is found, the wallet attempts incremental,\nnon-overlapping rescans in fixed-size block chunks until the balances match,\nallowing for faster recovery in many cases. When a match is detected, the\nRPC returns early with an `info` object describing the UTXO check and rescan\nprogress. If no match is found, the code falls back to the existing full\nrescan behavior starting from the earliest descriptor timestamp (or the\nprune boundary if applicable). Responses are updated to include optional\n`info` fields with `utxo_check`, `scanned_chunks`, and `scanned_blocks`\nmetadata.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T15:23:35Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T14:07:50Z"
      },
      "sha": "82a222b00d6497dc22e85205dae577a1adf15989"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19802155463,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScTOnH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19802155463",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/82a222b00d6497dc22e85205dae577a1adf15989",
      "created_at": "2025-09-19T15:24:14Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFlZDIzNmUzYzY4NjU4MmUzNWYyMGFiNjY4Y2Q2ZDkzMzE2ZmFlMmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "tree": {
        "sha": "afda550778180b30982673f111fee1fbe9cb3224",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/afda550778180b30982673f111fee1fbe9cb3224"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82a222b00d6497dc22e85205dae577a1adf15989",
          "sha": "82a222b00d6497dc22e85205dae577a1adf15989",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/82a222b00d6497dc22e85205dae577a1adf15989"
        }
      ],
      "message": "test: add functional test for importdescriptors scan_utxo flag\n\nAdd a functional test that verifies `importdescriptors`\nbehavior with and without `scan_utxoset`, ensuring wallets correctly detect\nUTXOs and transactions depending on the timestamp used. The test covers both\n`timestamp=\"now\"` (no history vs. UTXO set scan) and accurate historical timestamps\n(both imports discover full history), and also asserts returned metadata fields\n(`success`, `utxo_check`, `scanned_chunks`, `scanned_blocks`).",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-20T16:36:47Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-20T16:36:47Z"
      },
      "sha": "1ed236e3c686582e35f20ab668cd6d93316fae2c"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361315826",
      "pull_request_review_id": 3242264016,
      "id": 2361315826,
      "node_id": "PRRC_kwDOABII586MvtHy",
      "diff_hunk": "@@ -160,22 +213,36 @@ RPCHelpMan getreceivedbylabel()\n     };\n }\n \n-\n RPCHelpMan getbalance()\n {\n     return RPCHelpMan{\n         \"getbalance\",\n         \"Returns the total available balance.\\n\"\n                 \"The available balance is what the wallet considers currently spendable, and is\\n\"\n-                \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\",\n+                \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\"\n+                \"The available balance is what the wallet considers currently spendable, and is\\n\"\n+                \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\"\n+                \"If the optional `scan_utxoset` argument is true, the wallet will scan the UTXO\\n\"\n+                \"set and return both the trusted wallet balance and the scanned UTXO balance.\\n\"\n+                \"If `scan_utxoset` is false (default), only the trusted wallet balance (numeric)\\n\"\n+                \"is returned for backwards compatibility.\\n\",\n                 {\n                     {\"dummy\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"Remains for backward compatibility. Must be excluded or set to \\\"*\\\".\"},\n                     {\"minconf\", RPCArg::Type::NUM, RPCArg::Default{0}, \"Only include transactions confirmed at least this many times.\"},\n                     {\"include_watchonly\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"No longer used\"},\n                     {\"avoid_reuse\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"(only available if avoid_reuse wallet flag is set) Do not include balance in dirty outputs; addresses are considered dirty if they have previously been used in a transaction.\"},\n+                    {\"scan_utxoset\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If true, scan the UTXO set and return scanned UTXO balance alongside the trusted balance.\"},",
      "path": "src/wallet/rpc/coins.cpp",
      "position": 1,
      "original_position": 84,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "93baccaa356d94fb9a2573ffe45dd196798867b7",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This shouldn't be a positional parameter, at least.",
      "created_at": "2025-09-18T22:31:09Z",
      "updated_at": "2025-09-18T22:32:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2361315826",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361315826"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 234,
      "side": "RIGHT"
    }
  ]
}