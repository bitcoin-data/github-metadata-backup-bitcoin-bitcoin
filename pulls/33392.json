{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392",
    "id": 2829858173,
    "node_id": "PR_kwDOABII586orDV9",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33392",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33392.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33392.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
    "number": 33392,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet, rpc: add UTXO set check and incremental rescan to importdescriptors",
    "user": {
      "login": "musaHaruna",
      "id": 124810379,
      "node_id": "U_kgDOB3B0iw",
      "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/musaHaruna",
      "html_url": "https://github.com/musaHaruna",
      "followers_url": "https://api.github.com/users/musaHaruna/followers",
      "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
      "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
      "repos_url": "https://api.github.com/users/musaHaruna/repos",
      "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Fixes [#28898](https://github.com/bitcoin/bitcoin/issues/28898)\r\n\r\nWhen importing descriptors, users may accidentally provide an incorrect birthdate (timestamp). This can cause the wallet to miss relevant historical transactions, leading to incorrect or incomplete balances. Currently, the wallet only relies on rescans starting from the provided timestamp.\r\n\r\nThis PR extends the importdescriptors RPC with a new optional argument:\r\n`scan_utxoset` (bool, default=false):\r\nIf enabled, the wallet will compare its calculated trusted balance against UTXO set balance (by generating the `scriptpukeys` of the wallet and comparing it with the chains UTXO set `scriptpubkeys` to get the accurate balance belonging to the wallet and comparing it with the wallet trusted balance).\r\n\r\nIf the balances match, import continues as normal.\r\nIf a discrepancy is detected, the wallet will attempt incremental rescans in chunks of recent blocks until the missing history is found. If the wallet is pruned, incremental rescans will not go earlier than the prune boundary.\r\n\r\nAdditional information is returned in the RPC response under an `\"info\" ` object when `scan_utxoset` is used, such as:\r\n`utxo_check`: whether the UTXO set matched the wallet balance\r\n`scanned_chunks:` number of incremental rescan chunks attempted\r\n`scanned_blocks`: approximate number of blocks scanned during incremental rescans\r\n\r\nThis helps detect and fix balance mismatches caused by wrong descriptor timestamps.\r\n\r\nA big thanks to **fjahr** for suggesting this approach [comment](https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300319224)\r\n",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-09-15T16:17:12Z",
    "updated_at": "2026-01-03T00:19:11Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged": false,
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "musaHaruna:feature/scan-utxoset-balance-check",
      "ref": "feature/scan-utxoset-balance-check",
      "sha": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 941838367,
        "node_id": "R_kgDOOCNQHw",
        "name": "bitcoin",
        "full_name": "musaHaruna/bitcoin",
        "owner": {
          "login": "musaHaruna",
          "id": 124810379,
          "node_id": "U_kgDOB3B0iw",
          "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/musaHaruna",
          "html_url": "https://github.com/musaHaruna",
          "followers_url": "https://api.github.com/users/musaHaruna/followers",
          "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
          "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
          "repos_url": "https://api.github.com/users/musaHaruna/repos",
          "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/musaHaruna/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/musaHaruna/bitcoin",
        "archive_url": "https://api.github.com/repos/musaHaruna/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/musaHaruna/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/musaHaruna/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/musaHaruna/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/musaHaruna/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/musaHaruna/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/musaHaruna/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/musaHaruna/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/musaHaruna/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/musaHaruna/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/musaHaruna/bitcoin/events",
        "forks_url": "https://api.github.com/repos/musaHaruna/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/musaHaruna/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/musaHaruna/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/musaHaruna/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/musaHaruna/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/musaHaruna/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/musaHaruna/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/musaHaruna/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/musaHaruna/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/musaHaruna/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/musaHaruna/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/musaHaruna/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/musaHaruna/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:musaHaruna/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/musaHaruna/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/musaHaruna/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/musaHaruna/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/musaHaruna/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/musaHaruna/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/musaHaruna/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/musaHaruna/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/musaHaruna/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/musaHaruna/bitcoin/hooks",
        "svn_url": "https://github.com/musaHaruna/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 256771,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-10T07:36:36Z",
        "created_at": "2025-03-03T06:14:54Z",
        "updated_at": "2025-12-10T07:11:13Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "0690514d4f72aac251ee0b876cded9187d42c63e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38566,
        "stargazers_count": 87494,
        "watchers_count": 87494,
        "size": 301106,
        "default_branch": "master",
        "open_issues_count": 738,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-03T00:49:36Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-03T00:49:44Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 411,
    "deletions": 6,
    "changed_files": 11,
    "commits": 6,
    "review_comments": 22,
    "comments": 9
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJhOWYxMzQ3MzRiNjFhNDBjNWQ2ZmMzZjlkMzgzNjkxNGE5NWQ4NWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "tree": {
        "sha": "6bf062a7e39059fc69f29693f27a8d123a56c367",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bf062a7e39059fc69f29693f27a8d123a56c367"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "sha": "d20f10affba83601f1855bc87d0f47e9dfd5caae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d20f10affba83601f1855bc87d0f47e9dfd5caae"
        }
      ],
      "message": "node: add and implement FindCoinsByScript for UTXO-set scan by script\n\nAdd node::FindCoinsByScript and wire it into the node interface as\nNode::getCoinsByScript(), then implement the DB-backed scan that iterates\nthe on-disk UTXO DB with a CCoinsViewCursor.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-14T11:04:16Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-14T11:04:16Z"
      },
      "sha": "ba9f134734b61a40c5d6fc3f9d3836914a95d85c"
    },
    {
      "event": "labeled",
      "id": 19705655772,
      "node_id": "LE_lADOABII587LxCIazwAAAASWjHHc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19705655772",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T16:17:15Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 3292958552,
      "node_id": "IC_kwDOABII587ERo9Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3292958552",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T16:17:17Z",
      "updated_at": "2025-12-19T04:46:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33392.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/33392#pullrequestreview-3447945798) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/911](https://github.com/bitcoin-core/gui/pull/911) (Adds non-mempool wallet balance to overview by ajtowns)\n* [#34049](https://github.com/bitcoin/bitcoin/pull/34049) (rpc: Disallow captures in RPCMethodImpl by ajtowns)\n* [#33671](https://github.com/bitcoin/bitcoin/pull/33671) (wallet: Add separate balance info for non-mempool wallet txs by ajtowns)\n* [#33135](https://github.com/bitcoin/bitcoin/pull/33135) (wallet: warn against accidental unsafe older() import by Sjors)\n* [#32861](https://github.com/bitcoin/bitcoin/pull/32861) (Have createwalletdescriptor auto-detect an unused(KEY) by Sjors)\n* [#31668](https://github.com/bitcoin/bitcoin/pull/31668) (Added rescan option for import descriptors by saikiran57)\n* [#29136](https://github.com/bitcoin/bitcoin/pull/29136) (wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- +    //! Scan UTXO set from coins belonging to the output_scripts -> +    //! Scan UTXO set for coins belonging to output_scripts [‚Äúfrom coins belonging to the output_scripts‚Äù is ungrammatical/awkward; ‚Äúfor coins belonging to output_scripts‚Äù is clearer and consistent with other comments]\n- +        # Mine 1000 total 1000 more blocksthen send the second tx -> +        # Mine 1000 more blocks then send the second tx [‚Äú1000 total 1000 more blocksthen‚Äù has duplicated/missing words and ‚Äúblocksthen‚Äù is a typo; corrected to a clear sentence]\n\n<sup>drahtbot_id_5_m</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3292958552",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19724845449,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAASXsUGJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19724845449",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "93baccaa356d94fb9a2573ffe45dd196798867b7",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/93baccaa356d94fb9a2573ffe45dd196798867b7",
      "created_at": "2025-09-16T11:55:32Z"
    },
    {
      "event": "commented",
      "id": 3298984427,
      "node_id": "IC_kwDOABII587EooHr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3298984427",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T14:17:29Z",
      "updated_at": "2025-09-16T14:18:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "It seems kind of weird to me to add this as an option to `getbalance`. The problem is in the `importdescriptors` call, which is using the wrong birthdate. Have you looked into making this an option of `importdescriptors`? If the performance isn't too bad, this could even be on by default. If that is possible that would seem preferred, since you also write \"However, users may not realize that their wallet balance is incomplete.\", if they don't know they likely also won't call the `getbalance` with this option. So ideally we could \"force\" this on users in a way that they don't feel (much) negative impact from it. If we can't do that then I am not sure this is of much use since the users could just call `rescanblockchain` directly if they are aware that there is a problem with their balances.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3298984427",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3299464744,
      "node_id": "IC_kwDOABII587EqdYo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3299464744",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T16:13:28Z",
      "updated_at": "2025-09-16T19:42:29Z",
      "author_association": "CONTRIBUTOR",
      "body": ">  Have you looked into making this an option of importdescriptors? \r\n\r\nI have not looked into making it an option for `importdecriptors`, but I will look into it, and get back to you on that.  \r\n\r\nJust thinking on a high level and somewhat naively because am a new contributor with little knowledge about the codebase,  what if we can atomatically cross check the balance by scanning the utxoset in `importdescriptor` before triggering the rescan, incase of wrong birthtime, seeing that even if they use the new flags in `getbalance`, they might/will eventually have to run `rescanblockchain`.\r\n\r\nThanks for the suggestion. I really appreciate it.\r\n",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3299464744",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3300125137,
      "node_id": "IC_kwDOABII587Es-nR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3300125137",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T19:45:09Z",
      "updated_at": "2025-09-16T19:47:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I have not looked into making it an option for importdecriptors, but I will look into it, and get back to you on that.\r\n\r\nYes, I have looked into adding the option to `importdescriptors` by introducing a `scan_utxoset` flag and it's possible. The idea is that when enabled, the wallet would scan the UTXO set immediately after import to verify balances against chainstate, and if a discrepancy is detected (for example due to an incorrect birthdate), it could automatically trigger a full rescan from height `0` to restore missing history. This way, users wouldn‚Äôt have to manually diagnose incomplete balances ‚Äî the import flow itself would handle it. What Do you think this approach?.\r\n\r\nI don‚Äôt yet know the full impact on performance, but I‚Äôm thinking of making the trade-offs very clear in the RPC docs so users can decide whether to enable it.",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300125137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3300319224,
      "node_id": "IC_kwDOABII587Ett_4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3300319224",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-16T20:53:18Z",
      "updated_at": "2025-09-16T20:53:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Yes, I have looked into adding the option to importdescriptors by introducing a scan_utxoset flag and it's possible. The idea is that when enabled, the wallet would scan the UTXO set immediately after import to verify balances against chainstate, and if a discrepancy is detected (for example due to an incorrect birthdate), it could automatically trigger a full rescan from height 0 to restore missing history. This way, users wouldn‚Äôt have to manually diagnose incomplete balances ‚Äî the import flow itself would handle it. What Do you think this approach?.\r\n\r\nCool, this is pretty much what I had in mind, I guess I would slightly prefer that full rescan isn't started by default and rather the user receives a clear hint that there might be some funds missing and if they want to make sure to get them they should run a full rescan, basically just like what you are doing now in the return from `getbalance`. But I don't have a strong preference there, either sound fine, maybe wait for some more conceptual feedback from other reviewers. \r\n\r\n> I don‚Äôt yet know the full impact on performance, but I‚Äôm thinking of making the trade-offs very clear in the RPC docs so users can decide whether to enable it.\r\n\r\nMaybe run some benchmarks on the utxo set scan and full rescan and add them to the PR here. I don't have a good feeling for what the relation is and this might influence what reviewers think is better concerning running a full rescan automatically or just returning a warning/hint from `importdescriptors`.\r\n\r\nAnother idea concerning performance: It seems likely that if the birth date is wrong the user might be off by just a few days or weeks, rather than they have a wallet with the satoshi coins. So instead of a full rescan from the start of the chain the rescan could move backwards from the originally supplied birth date and scan the chain in 1000 (or so) block increments and it could stop once the balance matches the one from the utxo set scan. A nice side effect of this is that it means the rescan is also pruning compatible (for as many blocks that are available) but I guess this could be also achieved by starting from pruneheight instead of 0 if pruning is enabled. It's something you need to keep in mind either way. This would also need benchmarks but I can't imagine moving backwards with somewhat large increments would make the process much slower. And ideally the process would exit early in the most common scenario.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300319224",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "commented",
      "id": 3302123151,
      "node_id": "IC_kwDOABII587E0maP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3302123151",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T09:27:39Z",
      "updated_at": "2025-09-17T09:27:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Maybe run some benchmarks on the utxo set scan and full rescan and add them to the PR here. I don't have a good feeling for what the relation is and this might influence what reviewers think is better concerning running a full rescan automatically or just returning a warning/hint from `importdescriptors`.\r\n\r\nI will run some benchmarks on both utxo set scan and full rescan, update the whole PR to use the new approach you suggested i.e to add the feature on `importdescriptors` directly, which I honestly think is better. \r\n\r\n\r\n> Another idea concerning performance: It seems likely that if the birth date is wrong the user might be off by just a few days or weeks, rather than they have a wallet with the satoshi coins. So instead of a full rescan from the start of the chain the rescan could move backwards from the originally supplied birth date and scan the chain in 1000 (or so) block increments and it could stop once the balance matches the one from the utxo set scan. A nice side effect of this is that it means the rescan is also pruning compatible (for as many blocks that are available) but I guess this could be also achieved by starting from pruneheight instead of 0 if pruning is enabled. It's something you need to keep in mind either way. This would also need benchmarks but I can't imagine moving backwards with somewhat large increments would make the process much slower. And ideally the process would exit early in the most common scenario.\r\n\r\nJust to make sure we‚Äôre on the same page ‚Äî my understanding is that the idea is to:\r\n\r\nUse chunked backward rescans starting from the supplied birthdate (e.g. 1000-block increments), and stop as soon as the wallet balance matches the UTXO-set scan. This handles the common case where the birthdate is only off by a few days or weeks, so we don‚Äôt need to rescan the entire chain.\r\n\r\nAt the same time, respect the pruneheight as the lower bound if pruning is enabled. That means we only scan back as far as blocks are available, and if the discrepancy still isn‚Äôt resolved at that point, we‚Äôd warn the user that a reindex is required.",
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3302123151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "renamed",
      "id": 19749943072,
      "node_id": "RTE_lADOABII587LxCIazwAAAASZMDcg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19749943072",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-17T12:57:45Z",
      "rename": {
        "from": "rpc: add scan_utxoset option to getbalance(s) to verify wallet balance accuracy",
        "to": "wallet/rpc: add scan_utxoset option to getbalance(s) to verify wallet balance accuracy"
      }
    },
    {
      "event": "commented",
      "id": 3307315975,
      "node_id": "IC_kwDOABII587FIaMH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3307315975",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-18T12:58:25Z",
      "updated_at": "2025-09-18T12:58:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Just to make sure we‚Äôre on the same page ‚Äî my understanding is that the idea is to:\r\n> \r\n> Use chunked backward rescans starting from the supplied birthdate (e.g. 1000-block increments), and stop as soon as the wallet balance matches the UTXO-set scan. This handles the common case where the birthdate is only off by a few days or weeks, so we don‚Äôt need to rescan the entire chain.\r\n\r\nRight, so for example if the supplied birthdate was blockheight `800,000` but there is a discrepancy, then, instead rescanning from 0 to 800k right away, scan 799k - 800k and check the balance, exit if it's a match, continue with 798k - 799k and so on. This shouldn't be too complex to implement since the `rescanblockchain` RPC already takes a start and an end height.\r\n\r\n> At the same time, respect the pruneheight as the lower bound if pruning is enabled. That means we only scan back as far as blocks are available, and if the discrepancy still isn‚Äôt resolved at that point, we‚Äôd warn the user that a reindex is required.\r\n\r\nYeah, there would be some kind of safe abort if the approach for walking backwards runs into unavailable blocks, just like `rescanblockchain` does as well.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3307315975",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "reviewed",
      "id": 3242264016,
      "node_id": "PRR_kwDOABII587BQQXQ",
      "url": null,
      "actor": null,
      "commit_id": "93baccaa356d94fb9a2573ffe45dd196798867b7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-18T22:32:25Z",
      "author_association": "MEMBER",
      "body": "I agree getbalance* is the wrong place for this kind of check.\r\n\r\nBut it also will fail to detect incorrect birthdates if the TXOs are spent, so it can't be relied on either...",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#pullrequestreview-3242264016",
      "submitted_at": "2025-09-18T22:32:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19793742161,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAASbzIlR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19793742161",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
      "created_at": "2025-09-19T08:13:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19798716927,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScGHH_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19798716927",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4eb2ce690b6e5754c0ad1444d70f7dd478b774b5",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/4eb2ce690b6e5754c0ad1444d70f7dd478b774b5",
      "created_at": "2025-09-19T12:39:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19801176886,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScPfs2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19801176886",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1c23d97b7e41857660c6bfeaeca042dc9ce6a401",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/1c23d97b7e41857660c6bfeaeca042dc9ce6a401",
      "created_at": "2025-09-19T14:39:26Z"
    },
    {
      "event": "renamed",
      "id": 19801297650,
      "node_id": "RTE_lADOABII587LxCIazwAAAAScP9Ly",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19801297650",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-19T14:44:30Z",
      "rename": {
        "from": "wallet/rpc: add scan_utxoset option to getbalance(s) to verify wallet balance accuracy",
        "to": "wallet, rpc: add UTXO set check and incremental rescan to importdescriptors"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19801924835,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScSWTj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19801924835",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e45f79b80b1bebd19fd2b59c34ffc16f085d50cf",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/e45f79b80b1bebd19fd2b59c34ffc16f085d50cf",
      "created_at": "2025-09-19T15:13:20Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19802155463,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAAScTOnH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19802155463",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/82a222b00d6497dc22e85205dae577a1adf15989",
      "created_at": "2025-09-19T15:24:14Z"
    },
    {
      "event": "reviewed",
      "id": 3447945798,
      "node_id": "PRR_kwDOABII587Ng3pG",
      "url": null,
      "actor": null,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-11T14:27:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK and cursory review 1ed236e3c686582e35f20ab668cd6d93316fae2c.\r\n\r\nThe intent of the PR and the corresponding issue #28898 seems fine to me.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#pullrequestreview-3447945798",
      "submitted_at": "2025-11-11T14:27:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY2ODRlM2Q0ZTk2NWRiODNhNzE5ZmRmZGU4MDZmZDI2M2IxMDJiYjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6684e3d4e965db83a719fdfde806fd263b102bb0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6684e3d4e965db83a719fdfde806fd263b102bb0",
      "tree": {
        "sha": "28d5f11657eca1d65cd14fe1d96892f0c763f3b9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28d5f11657eca1d65cd14fe1d96892f0c763f3b9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
          "sha": "ba9f134734b61a40c5d6fc3f9d3836914a95d85c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ba9f134734b61a40c5d6fc3f9d3836914a95d85c"
        }
      ],
      "message": "wallet: add GetWalletUTXOSetBalance to calculate balance from UTXO set\n\nIntroduce a new helper `GetWalletUTXOSetBalance(const CWallet&)` that\nderives the wallet‚Äôs balance directly from the UTXO set rather than from\nthe wallet‚Äôs transaction history.\n\nUsefull for verifying wallet balance correctness against the\nchainstate without requiring a full rescan.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-11-22T09:13:28Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T08:21:05Z"
      },
      "sha": "6684e3d4e965db83a719fdfde806fd263b102bb0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc4MmExNTk4MTUzYTAwMTdkMTI2NDU3ZGVjYjdlZjY1ZGM5MWUzYzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/782a1598153a0017d126457decb7ef65dc91e3c3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/782a1598153a0017d126457decb7ef65dc91e3c3",
      "tree": {
        "sha": "b46413aa9fbffd5e21e58add3fc963fd6aa61121",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b46413aa9fbffd5e21e58add3fc963fd6aa61121"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6684e3d4e965db83a719fdfde806fd263b102bb0",
          "sha": "6684e3d4e965db83a719fdfde806fd263b102bb0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6684e3d4e965db83a719fdfde806fd263b102bb0"
        }
      ],
      "message": "wallet/rpc: add scan_utxoset arg & docs for importdescriptors\n\nAdd a new optional boolean RPC argument `scan_utxoset` to\nimportdescriptors and document the response fields used when the\nscan_utxoset check is enabled.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-11-22T10:25:59Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T09:22:08Z"
      },
      "sha": "782a1598153a0017d126457decb7ef65dc91e3c3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg3NDIyYjMzN2NiNzVjYTVmMmI4ZDljNTI4ZjliYTMzODlhMjljYjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87422b337cb75ca5f2b8d9c528f9ba3389a29cb8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/87422b337cb75ca5f2b8d9c528f9ba3389a29cb8",
      "tree": {
        "sha": "398c8bd19e117f67ca98f198fc7f076060ea99b1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/398c8bd19e117f67ca98f198fc7f076060ea99b1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/782a1598153a0017d126457decb7ef65dc91e3c3",
          "sha": "782a1598153a0017d126457decb7ef65dc91e3c3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/782a1598153a0017d126457decb7ef65dc91e3c3"
        }
      ],
      "message": "wallet: extend RescanFromTime with optional endTime to limit rescan range\n\nAdd a new overload of CWallet::RescanFromTime that accepts an optional\nendTime parameter. When provided, the method finds the approximate end\nheight and calls ScanForWalletTransactions with a bounded [start, end]\nrange. This makes incremental or windowed rescans possible while preserving\nexisting behavior when no endTime is specified.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-11-22T10:26:04Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T13:11:10Z"
      },
      "sha": "87422b337cb75ca5f2b8d9c528f9ba3389a29cb8"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21114570228,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAATqhsX0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21114570228",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "68d4cfbab9a6f5b51e527188dd3bb8f877fee2fc",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/68d4cfbab9a6f5b51e527188dd3bb8f877fee2fc",
      "created_at": "2025-11-22T11:24:09Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBlZjc5ODU0MTMyNDZjM2U3M2FhOGU2Yzg1ODA2NjA4OTFhOTE1YTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0ef7985413246c3e73aa8e6c8580660891a915a1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0ef7985413246c3e73aa8e6c8580660891a915a1",
      "tree": {
        "sha": "e31629f0746f884b71e8b8a25f15651f138e6587",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e31629f0746f884b71e8b8a25f15651f138e6587"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87422b337cb75ca5f2b8d9c528f9ba3389a29cb8",
          "sha": "87422b337cb75ca5f2b8d9c528f9ba3389a29cb8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/87422b337cb75ca5f2b8d9c528f9ba3389a29cb8"
        }
      ],
      "message": "rpc: extend importdescriptors with UTXO check and incremental rescan\n\nExtend the importdescriptors RPC with an optional `scan_utxoset` parameter.\nWhen enabled, the wallet balance is compared against a balance derived from\nthe UTXO set. If a discrepancy is found, the wallet attempts incremental,\nnon-overlapping rescans in fixed-size block chunks until the balances match,\nallowing for faster recovery in many cases. When a match is detected, the\nRPC returns early with an `info` object describing the UTXO check and rescan\nprogress. If no match is found, the code falls back to the existing full\nrescan behavior starting from the earliest descriptor timestamp (or the\nprune boundary if applicable). Responses are updated to include optional\n`info` fields with `utxo_check`, `scanned_chunks`, and `scanned_blocks`\nmetadata.",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-11-22T11:42:21Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-19T14:07:50Z"
      },
      "sha": "0ef7985413246c3e73aa8e6c8580660891a915a1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNlNDIwOTdkZWQ2N2Q0M2ZjOTBkNjRlZTZmYzA2NWI3NmY1ZDVkZTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "tree": {
        "sha": "96d80ba650653d6d541779cbf2de3ef79ed366c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96d80ba650653d6d541779cbf2de3ef79ed366c3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0ef7985413246c3e73aa8e6c8580660891a915a1",
          "sha": "0ef7985413246c3e73aa8e6c8580660891a915a1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0ef7985413246c3e73aa8e6c8580660891a915a1"
        }
      ],
      "message": "test: add functional test for importdescriptors scan_utxo flag\n\nAdd a functional test that verifies `importdescriptors`\nbehavior with and without `scan_utxoset`, ensuring wallets correctly detect\nUTXOs and transactions depending on the timestamp used. The test covers both\n`timestamp=\"now\"` (no history vs. UTXO set scan) and accurate historical timestamps\n(both imports discover full history), and also asserts returned metadata fields\n(`success`, `utxo_check`, `scanned_chunks`, `scanned_blocks`).",
      "committer": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-11-22T11:42:31Z"
      },
      "author": {
        "name": "Musa Haruna",
        "email": "hmusa3962@gmail.com",
        "date": "2025-09-20T16:36:47Z"
      },
      "sha": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21114725127,
      "node_id": "HRFPE_lADOABII587LxCIazwAAAATqiSMH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21114725127",
      "actor": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "commit_url": "https://api.github.com/repos/musaHaruna/bitcoin/commits/3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "created_at": "2025-11-22T11:42:59Z"
    },
    {
      "event": "labeled",
      "id": 21114726408,
      "node_id": "LE_lADOABII587LxCIazwAAAATqiSgI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21114726408",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-22T11:43:21Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3566641246,
      "node_id": "IC_kwDOABII587UlqBe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3566641246",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-22T11:43:30Z",
      "updated_at": "2025-11-22T11:43:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `Windows-cross to x86_64`: https://github.com/bitcoin/bitcoin/actions/runs/19594797010/job/56117977131</sub>\n<sub>LLM reason (‚ú® experimental): Compilation failed: wallet::CWallet::ResubmitWalletTransactions is called with a bool where a node::TxBroadcast enum is required.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3566641246",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    },
    {
      "event": "unlabeled",
      "id": 21115006151,
      "node_id": "UNLE_lADOABII587LxCIazwAAAATqjWzH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21115006151",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-22T12:48:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 21833324158,
      "node_id": "LE_lADOABII587LxCIazwAAAAUVXhZ-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21833324158",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T00:19:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3706521241,
      "node_id": "IC_kwDOABII587c7QaZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3706521241",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T00:19:11Z",
      "updated_at": "2026-01-03T00:19:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3706521241",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33392"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361315826",
      "pull_request_review_id": 3242264016,
      "id": 2361315826,
      "node_id": "PRRC_kwDOABII586MvtHy",
      "diff_hunk": "@@ -160,22 +213,36 @@ RPCHelpMan getreceivedbylabel()\n     };\n }\n \n-\n RPCHelpMan getbalance()\n {\n     return RPCHelpMan{\n         \"getbalance\",\n         \"Returns the total available balance.\\n\"\n                 \"The available balance is what the wallet considers currently spendable, and is\\n\"\n-                \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\",\n+                \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\"\n+                \"The available balance is what the wallet considers currently spendable, and is\\n\"\n+                \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\"\n+                \"If the optional `scan_utxoset` argument is true, the wallet will scan the UTXO\\n\"\n+                \"set and return both the trusted wallet balance and the scanned UTXO balance.\\n\"\n+                \"If `scan_utxoset` is false (default), only the trusted wallet balance (numeric)\\n\"\n+                \"is returned for backwards compatibility.\\n\",\n                 {\n                     {\"dummy\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"Remains for backward compatibility. Must be excluded or set to \\\"*\\\".\"},\n                     {\"minconf\", RPCArg::Type::NUM, RPCArg::Default{0}, \"Only include transactions confirmed at least this many times.\"},\n                     {\"include_watchonly\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"No longer used\"},\n                     {\"avoid_reuse\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"(only available if avoid_reuse wallet flag is set) Do not include balance in dirty outputs; addresses are considered dirty if they have previously been used in a transaction.\"},\n+                    {\"scan_utxoset\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If true, scan the UTXO set and return scanned UTXO balance alongside the trusted balance.\"},",
      "path": "src/wallet/rpc/coins.cpp",
      "position": 1,
      "original_position": 84,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "93baccaa356d94fb9a2573ffe45dd196798867b7",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This shouldn't be a positional parameter, at least.",
      "created_at": "2025-09-18T22:31:09Z",
      "updated_at": "2025-09-18T22:32:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2361315826",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361315826"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 234,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514139728",
      "pull_request_review_id": 3447945798,
      "id": 2514139728,
      "node_id": "PRRC_kwDOABII586V2rpQ",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+\n+    UniValue utxo_diff_obj;\n+\n+    if (do_scan_utxoset && rescan) {\n+        // Compare wallet trusted balance with chainstate-scanned spendable balance.\n+        const auto bal = GetBalance(wallet);\n+\n+        CAmount utxo_scanned_balance = GetWalletUTXOSetBalance(wallet);\n+\n+    if (utxo_scanned_balance != bal.m_mine_trusted) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 140,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 82a222b00d6497dc22e85205dae577a1adf15989 \"rpc: extend importdescriptors with UTXO check and incremental rescan\"\r\n\r\nThe lack of nesting in the `if` blocks makes the code harder to read.\r\n```diff\r\ndiff --git a/src/wallet/rpc/backup.cpp b/src/wallet/rpc/backup.cpp\r\nindex 4146a65876..cf8269b2ef 100644\r\n--- a/src/wallet/rpc/backup.cpp\r\n+++ b/src/wallet/rpc/backup.cpp\r\n@@ -507,7 +507,6 @@ RPCHelpMan importdescriptors()\r\n     bool have_prune_boundary = false;\r\n     int64_t min_trial_start_time = 0;\r\n \r\n-\r\n     UniValue utxo_diff_obj;\r\n \r\n     if (do_scan_utxoset && rescan) {\r\n@@ -516,53 +515,53 @@ RPCHelpMan importdescriptors()\r\n \r\n         CAmount utxo_scanned_balance = GetWalletUTXOSetBalance(wallet);\r\n \r\n-    if (utxo_scanned_balance != bal.m_mine_trusted) {\r\n-        // Incremental-rescan chunking parameters\r\n-        const int chunk_blocks = 1000;\r\n-        const int64_t avg_block_time = 600; // seconds per block (approx)\r\n+        if (utxo_scanned_balance != bal.m_mine_trusted) {\r\n+            // Incremental-rescan chunking parameters\r\n+            const int chunk_blocks = 1000;\r\n+            const int64_t avg_block_time = 600; // seconds per block (approx)\r\n \r\n-        // Get tip time and height\r\n-        int64_t tip_time = 0;\r\n-        int tip_height = 0;\r\n-        {\r\n-        LOCK(pwallet->cs_wallet);\r\n-        CHECK_NONFATAL(pwallet->chain().findBlock(pwallet->GetLastBlockHash(), FoundBlock().time(tip_time).height(tip_height)));\r\n-        }\r\n+            // Get tip time and height\r\n+            int64_t tip_time = 0;\r\n+            int tip_height = 0;\r\n+            {\r\n+                LOCK(pwallet->cs_wallet);\r\n+                CHECK_NONFATAL(pwallet->chain().findBlock(pwallet->GetLastBlockHash(), FoundBlock().time(tip_time).height(tip_height)));\r\n+            }\r\n \r\n-        // If pruned, compute an approximate earliest start time based on prune height\r\n-        bool is_pruned = pwallet->chain().havePruned();\r\n-        std::optional<int> prune_height_opt = pwallet->chain().getPruneHeight();\r\n-        have_prune_boundary = false;\r\n-        min_trial_start_time = 0;\r\n-        if (is_pruned && prune_height_opt.has_value()) {\r\n-            const int prune_height = prune_height_opt.value();\r\n-            int64_t blocks_diff = tip_height - prune_height;\r\n-            if (blocks_diff < 0) blocks_diff = 0;\r\n-            int64_t prune_time_est = tip_time - blocks_diff * avg_block_time;\r\n-            if (prune_time_est < 0) prune_time_est = 0;\r\n-            min_trial_start_time = prune_time_est;\r\n-            have_prune_boundary = true;\r\n-        }\r\n+            // If pruned, compute an approximate earliest start time based on prune height\r\n+            bool is_pruned = pwallet->chain().havePruned();\r\n+            std::optional<int> prune_height_opt = pwallet->chain().getPruneHeight();\r\n+            have_prune_boundary = false;\r\n+            min_trial_start_time = 0;\r\n+            if (is_pruned && prune_height_opt.has_value()) {\r\n+                const int prune_height = prune_height_opt.value();\r\n+                int64_t blocks_diff = tip_height - prune_height;\r\n+                if (blocks_diff < 0) blocks_diff = 0;\r\n+                int64_t prune_time_est = tip_time - blocks_diff * avg_block_time;\r\n+                if (prune_time_est < 0) prune_time_est = 0;\r\n+                min_trial_start_time = prune_time_est;\r\n+                have_prune_boundary = true;\r\n+            }\r\n \r\n-        // Attempt incremental rescans using the helper defined above.\r\n-        int out_chunks_tried = 0;\r\n-        int64_t out_lowest_ts = 0;\r\n-        UniValue early = IncrementalRescansNonOverlap(wallet, tip_time, tip_height, chunk_blocks, avg_block_time, have_prune_boundary,\r\n-                                                        min_trial_start_time, utxo_scanned_balance, reserver, response, out_chunks_tried, out_lowest_ts);\r\n+            // Attempt incremental rescans using the helper defined above.\r\n+            int out_chunks_tried = 0;\r\n+            int64_t out_lowest_ts = 0;\r\n+            UniValue early = IncrementalRescansNonOverlap(wallet, tip_time, tip_height, chunk_blocks, avg_block_time, have_prune_boundary,\r\n+                                                            min_trial_start_time, utxo_scanned_balance, reserver, response, out_chunks_tried, out_lowest_ts);\r\n \r\n-        if (!early.isNull()) {\r\n-            // Matched and response already annotated by helper.\r\n-            return early;\r\n-        }\r\n+            if (!early.isNull()) {\r\n+                // Matched and response already annotated by helper.\r\n+                return early;\r\n+            }\r\n \r\n-        if (have_prune_boundary) {\r\n-            // Set the fallback rescan start to the prune boundary (instead of 0)\r\n-            lowest_timestamp = min_trial_start_time;\r\n-        } else {\r\n-            // Non-pruned node: incremental attempts scanned back to timestamp 0 (genesis)\r\n-            lowest_timestamp = 0;\r\n+            if (have_prune_boundary) {\r\n+                // Set the fallback rescan start to the prune boundary (instead of 0)\r\n+                lowest_timestamp = min_trial_start_time;\r\n+            } else {\r\n+                // Non-pruned node: incremental attempts scanned back to timestamp 0 (genesis)\r\n+                lowest_timestamp = 0;\r\n+            }\r\n         }\r\n-    }\r\n \r\n     }\r\n \r\n\r\n```",
      "created_at": "2025-11-11T12:54:33Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514139728",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514139728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 519,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514179835",
      "pull_request_review_id": 3447945798,
      "id": 2514179835,
      "node_id": "PRRC_kwDOABII586V21b7",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+\n+    UniValue utxo_diff_obj;\n+\n+    if (do_scan_utxoset && rescan) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 223,
      "original_position": 134,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/82a222b00d6497dc22e85205dae577a1adf15989 \"rpc: extend importdescriptors with UTXO check and incremental rescan\"\r\n\r\nWhy is the UTXO set balance check (and the corresponding incremental block scan incase of balance mismatch) done before the usual rescan that's supposed to be done upon a successful descriptor import? Should this not be done after the usual rescan to find any transactions in the older blocks that might have been missed in the rescan because of incorrect timestamp added by the user? ",
      "created_at": "2025-11-11T13:08:40Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514179835",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514179835"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 515,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514186801",
      "pull_request_review_id": 3447945798,
      "id": 2514186801,
      "node_id": "PRRC_kwDOABII586V23Ix",
      "diff_hunk": "@@ -323,6 +323,7 @@ RPCHelpMan importdescriptors()\n                             },\n                         },\n                         RPCArgOptions{.oneline_description=\"requests\"}},\n+                        {\"scan_utxoset\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If true, scans the UTXO set balance and compare with wallet balance and triggers incremental rescan if discrepency is found.\"}",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In fa3ac7378ca016c598d51fa00a9cc02103754569 \"wallet/rpc: add scan_utxoset arg & docs for importdescriptors\"\r\n\r\n```\r\ns/\"scan_utxoset\"/\"verify\"\r\n```\r\n\r\nFrom a user's POV, this feels to me more like a verification step that the wallet might do if set by the user. Let's just call it that to keep it simple for the user? ",
      "created_at": "2025-11-11T13:11:16Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514186801",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514186801"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 326,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514188570",
      "pull_request_review_id": 3447945798,
      "id": 2514188570,
      "node_id": "PRRC_kwDOABII586V23ka",
      "diff_hunk": "@@ -63,6 +70,119 @@ def test_importdesc(self, req, success, error_code=None, error_message=None, war\n             assert_equal(result[0]['error']['code'], error_code)\n             assert_equal(result[0]['error']['message'], error_message)\n \n+    def import_descriptor_scan_utxo_flag_test(self, node, miner_wallet):\n+        self.log.info(\"Test import descriptor with scan_utxo flag\")\n+        receive_address = miner_wallet.getnewaddress()\n+\n+        # Mine up to block 500, then send the first tx\n+        for _ in range(500):\n+            self.generate(node, 1, sync_fun=lambda: None)\n+            self.advance_time(node, BLOCK_TIME)\n+        txid_first = miner_wallet.sendtoaddress(receive_address, 2)\n+        self.log.info(f\"Sent first tx {txid_first} after 500 blocks\")\n+\n+        # Mine 1000 total 1000 more blocksthen send the second tx\n+        for _ in range(1000):\n+            self.generate(node, 1, sync_fun=lambda: None)\n+            self.advance_time(node, BLOCK_TIME)\n+        txid_second = miner_wallet.sendtoaddress(receive_address, 2)\n+        self.log.info(f\"Sent second tx {txid_second} after 1000 blocks\")\n+\n+        # Mine a few extra blocks so both txs are safely confirmed\n+        for _ in range(50):\n+            self.generate(node, 1, sync_fun=lambda: None)\n+            self.advance_time(node, BLOCK_TIME)\n+\n+        # Create two watch-only wallets and import using timestamp=\"now\"\n+        node.createwallet(wallet_name='watch_only_no_scan', disable_private_keys=True, load_on_startup=True)\n+        node.createwallet(wallet_name='watch_only_with_scan', disable_private_keys=True, load_on_startup=True)\n+        wallet_no_scan = node.get_wallet_rpc('watch_only_no_scan')\n+        wallet_with_scan = node.get_wallet_rpc('watch_only_with_scan')\n+\n+        # Blank wallets don't have a birth time\n+        assert 'birthtime' not in wallet_no_scan.getwalletinfo()\n+        assert 'birthtime' not in wallet_with_scan.getwalletinfo()",
      "path": "test/functional/wallet_importdescriptors.py",
      "position": 56,
      "original_position": 56,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In 1ed236e3c686582e35f20ab668cd6d93316fae2c \"test: add functional test for importdescriptors scan_utxo flag\"\r\n\r\nWhat's the reason to assert this at only this stage?",
      "created_at": "2025-11-11T13:11:57Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514188570",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514188570"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": 102,
      "original_start_line": 102,
      "start_side": "RIGHT",
      "line": 104,
      "original_line": 104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514222126",
      "pull_request_review_id": 3447945798,
      "id": 2514222126,
      "node_id": "PRRC_kwDOABII586V2_wu",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+\n+    UniValue utxo_diff_obj;\n+\n+    if (do_scan_utxoset && rescan) {\n+        // Compare wallet trusted balance with chainstate-scanned spendable balance.\n+        const auto bal = GetBalance(wallet);\n+\n+        CAmount utxo_scanned_balance = GetWalletUTXOSetBalance(wallet);\n+\n+    if (utxo_scanned_balance != bal.m_mine_trusted) {\n+        // Incremental-rescan chunking parameters\n+        const int chunk_blocks = 1000;\n+        const int64_t avg_block_time = 600; // seconds per block (approx)\n+\n+        // Get tip time and height\n+        int64_t tip_time = 0;\n+        int tip_height = 0;\n+        {\n+        LOCK(pwallet->cs_wallet);\n+        CHECK_NONFATAL(pwallet->chain().findBlock(pwallet->GetLastBlockHash(), FoundBlock().time(tip_time).height(tip_height)));\n+        }\n+\n+        // If pruned, compute an approximate earliest start time based on prune height\n+        bool is_pruned = pwallet->chain().havePruned();\n+        std::optional<int> prune_height_opt = pwallet->chain().getPruneHeight();\n+        have_prune_boundary = false;\n+        min_trial_start_time = 0;\n+        if (is_pruned && prune_height_opt.has_value()) {\n+            const int prune_height = prune_height_opt.value();\n+            int64_t blocks_diff = tip_height - prune_height;\n+            if (blocks_diff < 0) blocks_diff = 0;\n+            int64_t prune_time_est = tip_time - blocks_diff * avg_block_time;\n+            if (prune_time_est < 0) prune_time_est = 0;\n+            min_trial_start_time = prune_time_est;\n+            have_prune_boundary = true;\n+        }\n+\n+        // Attempt incremental rescans using the helper defined above.\n+        int out_chunks_tried = 0;\n+        int64_t out_lowest_ts = 0;\n+        UniValue early = IncrementalRescansNonOverlap(wallet, tip_time, tip_height, chunk_blocks, avg_block_time, have_prune_boundary,\n+                                                        min_trial_start_time, utxo_scanned_balance, reserver, response, out_chunks_tried, out_lowest_ts);\n+\n+        if (!early.isNull()) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 174,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/82a222b00d6497dc22e85205dae577a1adf15989 \"rpc: extend importdescriptors with UTXO check and incremental rescan\"\r\n\r\nShouldn't the timestamp of the imported descriptors be updated as well in this case to avoid data inconsistency?",
      "created_at": "2025-11-11T13:22:51Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514222126",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514222126"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514287625",
      "pull_request_review_id": 3447945798,
      "id": 2514287625,
      "node_id": "PRRC_kwDOABII586V3PwJ",
      "diff_hunk": "@@ -323,6 +323,7 @@ RPCHelpMan importdescriptors()\n                             },\n                         },\n                         RPCArgOptions{.oneline_description=\"requests\"}},\n+                        {\"scan_utxoset\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If true, scans the UTXO set balance and compare with wallet balance and triggers incremental rescan if discrepency is found.\"}",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": 2514186801,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```\r\ns/discrepency/discrepancy\r\n```",
      "created_at": "2025-11-11T13:43:32Z",
      "updated_at": "2025-11-11T14:27:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514287625",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514287625"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 326,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514297779",
      "pull_request_review_id": 3447945798,
      "id": 2514297779,
      "node_id": "PRRC_kwDOABII586V3SOz",
      "diff_hunk": "@@ -338,21 +339,28 @@ RPCHelpMan importdescriptors()\n                             {\n                                 {RPCResult::Type::ELISION, \"\", \"JSONRPC error\"},\n                             }},\n+                            {RPCResult::Type::OBJ, \"info\", /*optional=*/true, \"Optional informational fields. When present, this object will contain details about incremental rescans (examples below).\",\n+                            {\n+                                {RPCResult::Type::STR, \"utxo_check\", /*optional=*/true, \"Status of the UTXO check. Example values: 'matched' (wallet DB matches UTXO set).\"},",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/fa3ac7378ca016c598d51fa00a9cc02103754569 \"wallet/rpc: add scan_utxoset arg & docs for importdescriptors\"\r\n\r\nThis string property seems unnecessary if it is supposed to have only one value all the time.",
      "created_at": "2025-11-11T13:46:35Z",
      "updated_at": "2025-11-11T14:38:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514297779",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514297779"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 344,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514313528",
      "pull_request_review_id": 3447945798,
      "id": 2514313528,
      "node_id": "PRRC_kwDOABII586V3WE4",
      "diff_hunk": "@@ -338,21 +339,28 @@ RPCHelpMan importdescriptors()\n                             {\n                                 {RPCResult::Type::ELISION, \"\", \"JSONRPC error\"},\n                             }},\n+                            {RPCResult::Type::OBJ, \"info\", /*optional=*/true, \"Optional informational fields. When present, this object will contain details about incremental rescans (examples below).\",\n+                            {\n+                                {RPCResult::Type::STR, \"utxo_check\", /*optional=*/true, \"Status of the UTXO check. Example values: 'matched' (wallet DB matches UTXO set).\"},\n+                                {RPCResult::Type::NUM, \"scanned_chunks\", /*optional=*/true, \"If incremental rescans were performed, the number of chunks scanned before a match was found.\"},\n+                                {RPCResult::Type::NUM, \"scanned_blocks\", /*optional=*/true, \"If incremental rescans were performed, the approximate number of blocks scanned (scanned_chunks * chunk_size).\"},\n+                            }},\n                         }},\n                     }\n                 },\n                 RPCExamples{\n                     HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"internal\\\": true }, \"\n                                           \"{ \\\"desc\\\": \\\"<my descriptor 2>\\\", \\\"label\\\": \\\"example 2\\\", \\\"timestamp\\\": 1455191480 }]'\") +\n-                    HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\" }]'\")\n+                    HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\" }]'\") +\n+                    HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \" \"\\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\", \\\"scan_utxoset\\\": true }]'\") +\n+                    HelpExampleRpc(\"importdescriptors\", \"[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \" \"\\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\", \\\"scan_utxoset\\\": true }]\")\n                 },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& main_request) -> UniValue\n {\n     std::shared_ptr<CWallet> const pwallet = GetWalletForJSONRPCRequest(main_request);\n     if (!pwallet) return UniValue::VNULL;\n     CWallet& wallet{*pwallet};\n \n-    // Make sure the results are valid at least up to the most recent block",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 188,
      "original_position": 35,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/fa3ac7378ca016c598d51fa00a9cc02103754569 \"wallet/rpc: add scan_utxoset arg & docs for importdescriptors\"\r\n\r\nWhy is this comment cut midway?",
      "created_at": "2025-11-11T13:51:45Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514313528",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514313528"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 358,
      "original_line": 358,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514333367",
      "pull_request_review_id": 3447945798,
      "id": 2514333367,
      "node_id": "PRRC_kwDOABII586V3a63",
      "diff_hunk": "@@ -338,21 +339,28 @@ RPCHelpMan importdescriptors()\n                             {\n                                 {RPCResult::Type::ELISION, \"\", \"JSONRPC error\"},\n                             }},\n+                            {RPCResult::Type::OBJ, \"info\", /*optional=*/true, \"Optional informational fields. When present, this object will contain details about incremental rescans (examples below).\",\n+                            {\n+                                {RPCResult::Type::STR, \"utxo_check\", /*optional=*/true, \"Status of the UTXO check. Example values: 'matched' (wallet DB matches UTXO set).\"},\n+                                {RPCResult::Type::NUM, \"scanned_chunks\", /*optional=*/true, \"If incremental rescans were performed, the number of chunks scanned before a match was found.\"},\n+                                {RPCResult::Type::NUM, \"scanned_blocks\", /*optional=*/true, \"If incremental rescans were performed, the approximate number of blocks scanned (scanned_chunks * chunk_size).\"},",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/fa3ac7378ca016c598d51fa00a9cc02103754569 \"wallet/rpc: add scan_utxoset arg & docs for importdescriptors\"\r\n\r\nI think these don't need to be marked optional when the `info` object is already marked so. Unless these properties appear optionally inside the `info` object that I think is not the case.",
      "created_at": "2025-11-11T13:58:18Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514333367",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514333367"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": 345,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 346,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514350932",
      "pull_request_review_id": 3447945798,
      "id": 2514350932,
      "node_id": "PRRC_kwDOABII586V3fNU",
      "diff_hunk": "@@ -273,6 +273,57 @@ Balance GetBalance(const CWallet& wallet, const int min_depth, bool avoid_reuse)\n     return ret;\n }\n \n+CAmount GetWalletUTXOSetBalance(const CWallet& wallet)\n+{\n+    // Collect unique scriptPubKeys owned by the wallet, split into mine vs watch-only\n+    std::set<CScript> output_scripts_mine;\n+    std::set<CScript> output_scripts_watchonly;\n+\n+    LOCK(wallet.cs_wallet);\n+    for (const auto spkm : wallet.GetAllScriptPubKeyMans()) {\n+        bool has_privkeys = spkm->HavePrivateKeys();\n+        for (const auto& script : spkm->GetScriptPubKeys()) {\n+            if (has_privkeys) {\n+                output_scripts_mine.emplace(script);\n+            } else {\n+                output_scripts_watchonly.emplace(script);\n+            }",
      "path": "src/wallet/receive.cpp",
      "position": 1,
      "original_position": 18,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "ac06ddb8b9e33b7a594af9e38e00f2a8410947b7",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In ac06ddb8b9e33b7a594af9e38e00f2a8410947b7 \"wallet: add GetWalletUTXOSetBalance to calculate balance from UTXO set\"\r\n\r\nI don't think the bifurcation between `output_scripts_mine` and `output_scripts_watchonly` needs to be done anymore because the watch only property in the descriptor wallets is at the wallet level now. Either the whole wallet will be watch-only or all of it will be not. Ref: #32618",
      "created_at": "2025-11-11T14:03:55Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514350932",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514350932"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": 284,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 290,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514377833",
      "pull_request_review_id": 3447945798,
      "id": 2514377833,
      "node_id": "PRRC_kwDOABII586V3lxp",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 220,
      "original_position": 131,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/82a222b00d6497dc22e85205dae577a1adf15989 \"rpc: extend importdescriptors with UTXO check and incremental rescan\"\r\n\r\nCan early return from the function here in case `rescan` is `false`.",
      "created_at": "2025-11-11T14:08:40Z",
      "updated_at": "2025-11-11T14:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2514377833",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2514377833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 512,
      "original_line": 512,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553065653",
      "pull_request_review_id": 3496681180,
      "id": 2553065653,
      "node_id": "PRRC_kwDOABII586YLLC1",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+\n+    UniValue utxo_diff_obj;\n+\n+    if (do_scan_utxoset && rescan) {\n+        // Compare wallet trusted balance with chainstate-scanned spendable balance.\n+        const auto bal = GetBalance(wallet);\n+\n+        CAmount utxo_scanned_balance = GetWalletUTXOSetBalance(wallet);\n+\n+    if (utxo_scanned_balance != bal.m_mine_trusted) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 140,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": 2514139728,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed. ",
      "created_at": "2025-11-22T11:26:42Z",
      "updated_at": "2025-11-22T11:26:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553065653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553065653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 519,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553066371",
      "pull_request_review_id": 3496681865,
      "id": 2553066371,
      "node_id": "PRRC_kwDOABII586YLLOD",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+\n+    UniValue utxo_diff_obj;\n+\n+    if (do_scan_utxoset && rescan) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 223,
      "original_position": 134,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": 2514179835,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The UTXO set check is performed before the main rescan to attempt incremental reconciliation of missing funds in small block chunks, potentially reducing the amount of blocks that need to be rescanned in the case of a large blockchain. Doing it after the main rescan would generally be redundant, because the rescan will already incorporate transactions missed due to incorrect timestamps, and any discrepancy with the UTXO set would likely have been resolved. The current order allows us to detect and fix large balance mismatches earlier in the RPC, without necessarily scanning the entire chain from genesis immediately.",
      "created_at": "2025-11-22T11:27:08Z",
      "updated_at": "2025-11-22T11:27:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553066371",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553066371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 515,
      "original_line": 515,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553068563",
      "pull_request_review_id": 3496684075,
      "id": 2553068563,
      "node_id": "PRRC_kwDOABII586YLLwT",
      "diff_hunk": "@@ -323,6 +323,7 @@ RPCHelpMan importdescriptors()\n                             },\n                         },\n                         RPCArgOptions{.oneline_description=\"requests\"}},\n+                        {\"scan_utxoset\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If true, scans the UTXO set balance and compare with wallet balance and triggers incremental rescan if discrepency is found.\"}",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 4,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": 2514186801,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah I agree I have changed it to ` verify_balance` I thought just `verify` is till a bit vague",
      "created_at": "2025-11-22T11:28:01Z",
      "updated_at": "2025-11-22T11:28:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553068563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553068563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 326,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553075650",
      "pull_request_review_id": 3496691138,
      "id": 2553075650,
      "node_id": "PRRC_kwDOABII586YLNfC",
      "diff_hunk": "@@ -338,21 +339,28 @@ RPCHelpMan importdescriptors()\n                             {\n                                 {RPCResult::Type::ELISION, \"\", \"JSONRPC error\"},\n                             }},\n+                            {RPCResult::Type::OBJ, \"info\", /*optional=*/true, \"Optional informational fields. When present, this object will contain details about incremental rescans (examples below).\",\n+                            {\n+                                {RPCResult::Type::STR, \"utxo_check\", /*optional=*/true, \"Status of the UTXO check. Example values: 'matched' (wallet DB matches UTXO set).\"},",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": 2514297779,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed ",
      "created_at": "2025-11-22T11:32:01Z",
      "updated_at": "2025-11-22T11:32:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553075650",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553075650"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 344,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553076297",
      "pull_request_review_id": 3496691859,
      "id": 2553076297,
      "node_id": "PRRC_kwDOABII586YLNpJ",
      "diff_hunk": "@@ -338,21 +339,28 @@ RPCHelpMan importdescriptors()\n                             {\n                                 {RPCResult::Type::ELISION, \"\", \"JSONRPC error\"},\n                             }},\n+                            {RPCResult::Type::OBJ, \"info\", /*optional=*/true, \"Optional informational fields. When present, this object will contain details about incremental rescans (examples below).\",\n+                            {\n+                                {RPCResult::Type::STR, \"utxo_check\", /*optional=*/true, \"Status of the UTXO check. Example values: 'matched' (wallet DB matches UTXO set).\"},\n+                                {RPCResult::Type::NUM, \"scanned_chunks\", /*optional=*/true, \"If incremental rescans were performed, the number of chunks scanned before a match was found.\"},\n+                                {RPCResult::Type::NUM, \"scanned_blocks\", /*optional=*/true, \"If incremental rescans were performed, the approximate number of blocks scanned (scanned_chunks * chunk_size).\"},",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 16,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": 2514333367,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed ",
      "created_at": "2025-11-22T11:32:20Z",
      "updated_at": "2025-11-22T11:32:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553076297",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553076297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": 345,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 346,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553076860",
      "pull_request_review_id": 3496692531,
      "id": 2553076860,
      "node_id": "PRRC_kwDOABII586YLNx8",
      "diff_hunk": "@@ -273,6 +273,57 @@ Balance GetBalance(const CWallet& wallet, const int min_depth, bool avoid_reuse)\n     return ret;\n }\n \n+CAmount GetWalletUTXOSetBalance(const CWallet& wallet)\n+{\n+    // Collect unique scriptPubKeys owned by the wallet, split into mine vs watch-only\n+    std::set<CScript> output_scripts_mine;\n+    std::set<CScript> output_scripts_watchonly;\n+\n+    LOCK(wallet.cs_wallet);\n+    for (const auto spkm : wallet.GetAllScriptPubKeyMans()) {\n+        bool has_privkeys = spkm->HavePrivateKeys();\n+        for (const auto& script : spkm->GetScriptPubKeys()) {\n+            if (has_privkeys) {\n+                output_scripts_mine.emplace(script);\n+            } else {\n+                output_scripts_watchonly.emplace(script);\n+            }",
      "path": "src/wallet/receive.cpp",
      "position": 1,
      "original_position": 18,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "ac06ddb8b9e33b7a594af9e38e00f2a8410947b7",
      "in_reply_to_id": 2514350932,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed",
      "created_at": "2025-11-22T11:32:43Z",
      "updated_at": "2025-11-22T11:32:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553076860",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553076860"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": 284,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 290,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553077585",
      "pull_request_review_id": 3496693133,
      "id": 2553077585,
      "node_id": "PRRC_kwDOABII586YLN9R",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 220,
      "original_position": 131,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": 2514377833,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed.\r\nThank you so much for reviewing the code!!!",
      "created_at": "2025-11-22T11:33:05Z",
      "updated_at": "2025-11-22T11:46:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553077585",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553077585"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 512,
      "original_line": 512,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553095074",
      "pull_request_review_id": 3496709281,
      "id": 2553095074,
      "node_id": "PRRC_kwDOABII586YLSOi",
      "diff_hunk": "@@ -401,10 +499,73 @@ RPCHelpMan importdescriptors()\n                 rescan = true;\n             }\n         }\n+\n         pwallet->ConnectScriptPubKeyManNotifiers();\n         pwallet->RefreshAllTXOs();\n     }\n \n+    bool have_prune_boundary = false;\n+    int64_t min_trial_start_time = 0;\n+\n+\n+    UniValue utxo_diff_obj;\n+\n+    if (do_scan_utxoset && rescan) {\n+        // Compare wallet trusted balance with chainstate-scanned spendable balance.\n+        const auto bal = GetBalance(wallet);\n+\n+        CAmount utxo_scanned_balance = GetWalletUTXOSetBalance(wallet);\n+\n+    if (utxo_scanned_balance != bal.m_mine_trusted) {\n+        // Incremental-rescan chunking parameters\n+        const int chunk_blocks = 1000;\n+        const int64_t avg_block_time = 600; // seconds per block (approx)\n+\n+        // Get tip time and height\n+        int64_t tip_time = 0;\n+        int tip_height = 0;\n+        {\n+        LOCK(pwallet->cs_wallet);\n+        CHECK_NONFATAL(pwallet->chain().findBlock(pwallet->GetLastBlockHash(), FoundBlock().time(tip_time).height(tip_height)));\n+        }\n+\n+        // If pruned, compute an approximate earliest start time based on prune height\n+        bool is_pruned = pwallet->chain().havePruned();\n+        std::optional<int> prune_height_opt = pwallet->chain().getPruneHeight();\n+        have_prune_boundary = false;\n+        min_trial_start_time = 0;\n+        if (is_pruned && prune_height_opt.has_value()) {\n+            const int prune_height = prune_height_opt.value();\n+            int64_t blocks_diff = tip_height - prune_height;\n+            if (blocks_diff < 0) blocks_diff = 0;\n+            int64_t prune_time_est = tip_time - blocks_diff * avg_block_time;\n+            if (prune_time_est < 0) prune_time_est = 0;\n+            min_trial_start_time = prune_time_est;\n+            have_prune_boundary = true;\n+        }\n+\n+        // Attempt incremental rescans using the helper defined above.\n+        int out_chunks_tried = 0;\n+        int64_t out_lowest_ts = 0;\n+        UniValue early = IncrementalRescansNonOverlap(wallet, tip_time, tip_height, chunk_blocks, avg_block_time, have_prune_boundary,\n+                                                        min_trial_start_time, utxo_scanned_balance, reserver, response, out_chunks_tried, out_lowest_ts);\n+\n+        if (!early.isNull()) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 1,
      "original_position": 174,
      "commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "original_commit_id": "82a222b00d6497dc22e85205dae577a1adf15989",
      "in_reply_to_id": 2514222126,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah, I think it should be, I will look into how I can do that, am open to suggestions on how that can be done. ",
      "created_at": "2025-11-22T11:45:14Z",
      "updated_at": "2025-11-22T11:45:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553095074",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553095074"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553121377",
      "pull_request_review_id": 3496735616,
      "id": 2553121377,
      "node_id": "PRRC_kwDOABII586YLYph",
      "diff_hunk": "@@ -63,6 +70,119 @@ def test_importdesc(self, req, success, error_code=None, error_message=None, war\n             assert_equal(result[0]['error']['code'], error_code)\n             assert_equal(result[0]['error']['message'], error_message)\n \n+    def import_descriptor_scan_utxo_flag_test(self, node, miner_wallet):\n+        self.log.info(\"Test import descriptor with scan_utxo flag\")\n+        receive_address = miner_wallet.getnewaddress()\n+\n+        # Mine up to block 500, then send the first tx\n+        for _ in range(500):\n+            self.generate(node, 1, sync_fun=lambda: None)\n+            self.advance_time(node, BLOCK_TIME)\n+        txid_first = miner_wallet.sendtoaddress(receive_address, 2)\n+        self.log.info(f\"Sent first tx {txid_first} after 500 blocks\")\n+\n+        # Mine 1000 total 1000 more blocksthen send the second tx\n+        for _ in range(1000):\n+            self.generate(node, 1, sync_fun=lambda: None)\n+            self.advance_time(node, BLOCK_TIME)\n+        txid_second = miner_wallet.sendtoaddress(receive_address, 2)\n+        self.log.info(f\"Sent second tx {txid_second} after 1000 blocks\")\n+\n+        # Mine a few extra blocks so both txs are safely confirmed\n+        for _ in range(50):\n+            self.generate(node, 1, sync_fun=lambda: None)\n+            self.advance_time(node, BLOCK_TIME)\n+\n+        # Create two watch-only wallets and import using timestamp=\"now\"\n+        node.createwallet(wallet_name='watch_only_no_scan', disable_private_keys=True, load_on_startup=True)\n+        node.createwallet(wallet_name='watch_only_with_scan', disable_private_keys=True, load_on_startup=True)\n+        wallet_no_scan = node.get_wallet_rpc('watch_only_no_scan')\n+        wallet_with_scan = node.get_wallet_rpc('watch_only_with_scan')\n+\n+        # Blank wallets don't have a birth time\n+        assert 'birthtime' not in wallet_no_scan.getwalletinfo()\n+        assert 'birthtime' not in wallet_with_scan.getwalletinfo()",
      "path": "test/functional/wallet_importdescriptors.py",
      "position": 56,
      "original_position": 56,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "1ed236e3c686582e35f20ab668cd6d93316fae2c",
      "in_reply_to_id": 2514188570,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This assertion ensures that the newly created watch-only wallets start from a completely clean state with no prior transaction history or birthtime. That way, we can be sure that any transactions discovered after the import come solely from the descriptor import and the UTXO scan, not from pre-existing wallet data.",
      "created_at": "2025-11-22T12:44:48Z",
      "updated_at": "2025-11-22T12:44:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553121377",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553121377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": 102,
      "original_start_line": 102,
      "start_side": "RIGHT",
      "line": 104,
      "original_line": 104,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553122533",
      "pull_request_review_id": 3496736359,
      "id": 2553122533,
      "node_id": "PRRC_kwDOABII586YLY7l",
      "diff_hunk": "@@ -338,21 +339,28 @@ RPCHelpMan importdescriptors()\n                             {\n                                 {RPCResult::Type::ELISION, \"\", \"JSONRPC error\"},\n                             }},\n+                            {RPCResult::Type::OBJ, \"info\", /*optional=*/true, \"Optional informational fields. When present, this object will contain details about incremental rescans (examples below).\",\n+                            {\n+                                {RPCResult::Type::STR, \"utxo_check\", /*optional=*/true, \"Status of the UTXO check. Example values: 'matched' (wallet DB matches UTXO set).\"},\n+                                {RPCResult::Type::NUM, \"scanned_chunks\", /*optional=*/true, \"If incremental rescans were performed, the number of chunks scanned before a match was found.\"},\n+                                {RPCResult::Type::NUM, \"scanned_blocks\", /*optional=*/true, \"If incremental rescans were performed, the approximate number of blocks scanned (scanned_chunks * chunk_size).\"},\n+                            }},\n                         }},\n                     }\n                 },\n                 RPCExamples{\n                     HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"internal\\\": true }, \"\n                                           \"{ \\\"desc\\\": \\\"<my descriptor 2>\\\", \\\"label\\\": \\\"example 2\\\", \\\"timestamp\\\": 1455191480 }]'\") +\n-                    HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\" }]'\")\n+                    HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\" }]'\") +\n+                    HelpExampleCli(\"importdescriptors\", \"'[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \" \"\\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\", \\\"scan_utxoset\\\": true }]'\") +\n+                    HelpExampleRpc(\"importdescriptors\", \"[{ \\\"desc\\\": \\\"<my descriptor>\\\", \\\"timestamp\\\":1455191478, \\\"active\\\": true, \" \"\\\"range\\\": [0,100], \\\"label\\\": \\\"<my bech32 wallet>\\\", \\\"scan_utxoset\\\": true }]\")\n                 },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& main_request) -> UniValue\n {\n     std::shared_ptr<CWallet> const pwallet = GetWalletForJSONRPCRequest(main_request);\n     if (!pwallet) return UniValue::VNULL;\n     CWallet& wallet{*pwallet};\n \n-    // Make sure the results are valid at least up to the most recent block",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 188,
      "original_position": 35,
      "commit_id": "3e42097ded67d43fc90d64ee6fc065b76f5d5de3",
      "original_commit_id": "fa3ac7378ca016c598d51fa00a9cc02103754569",
      "in_reply_to_id": 2514313528,
      "user": {
        "login": "musaHaruna",
        "id": 124810379,
        "node_id": "U_kgDOB3B0iw",
        "avatar_url": "https://avatars.githubusercontent.com/u/124810379?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/musaHaruna",
        "html_url": "https://github.com/musaHaruna",
        "followers_url": "https://api.github.com/users/musaHaruna/followers",
        "following_url": "https://api.github.com/users/musaHaruna/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/musaHaruna/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/musaHaruna/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/musaHaruna/subscriptions",
        "organizations_url": "https://api.github.com/users/musaHaruna/orgs",
        "repos_url": "https://api.github.com/users/musaHaruna/repos",
        "events_url": "https://api.github.com/users/musaHaruna/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/musaHaruna/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think this is part of backupwallet RPC and I don't think I touch the backupwallet rpc codenthe entire PR. ",
      "created_at": "2025-11-22T12:47:42Z",
      "updated_at": "2025-11-22T12:47:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33392#discussion_r2553122533",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2553122533"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 358,
      "original_line": 358,
      "side": "LEFT"
    }
  ]
}