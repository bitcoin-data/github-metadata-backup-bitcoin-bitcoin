{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682",
    "id": 2285701879,
    "node_id": "PR_kwDOABII586IPQr3",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31682",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31682.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31682.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/786fdd177b63897648a227cb3f115b027792ca6f",
    "number": 31682,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "[IBD] specialize CheckBlock's input & coinbase checks",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n`CheckBlock`'s latency is critical for efficiently validating correct inputs during transaction validation, including mempool acceptance and new block creation.\r\n\r\nThis PR improves performance and maintainability by introducing the following changes:\r\n* Simplified checks for the most common cases (1 or 2 inputs - [70-90% of transactions have a single input](https://transactionfee.info/charts/transactions-1in)).\r\n* Optimized the general case by replacing `std::set` with sorted `std::vector` for improved locality.\r\n* Simplified Null prevout checks from linear to constant time.\r\n\r\n### Context, concerns\r\n\r\nAs noted by Sipa in https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2570273162, this is consensus-critical code (especially since we've had an actual inflation bug related to duplicate checking).\r\nHowever, the changes here are very confined to a single function, easily reviewed, and I have a general preference for avoiding `std::set` when sorted `std::vector` works too as well.\r\n\r\nThe goal of this change is to [make block validation faster](https://github.com/bitcoin/bitcoin/pull/14387#issuecomment-442748969) via a low-risk alternative.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C++ compiler .......................... AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\r\n|            9,585.10 |          104,328.55 |    0.1% |     11.03 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\r\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 2.07x faster `CheckBlockBench`\r\n* 3.4x faster `DuplicateInputs`\r\n* 1.8% faster `ProcessTransactionBench`\r\n\r\n-----\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`\r\n|           56,199.57 |           17,793.73 |    0.1% |      229,263.01 |      178,766.31 |  1.282 |      15,509.97 |    0.5% |     10.91 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\r\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 31% faster `CheckBlockBench`\r\n* 2x faster `DuplicateInputs`\r\n* 0.5% faster `ProcessTransactionBench`\r\n\r\n----\r\n\r\nWhile the point of the change isn't necessarily to speed up IBD, but you can see the measurements at https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2606765689\r\n\r\n----\r\n\r\nRelated PRs: \r\n* https://github.com/bitcoin/bitcoin/pull/14397 - very similar solution, I only found it after pushing the PR (was closed for inactivity)\r\n* https://github.com/bitcoin/bitcoin/pull/14837 - a faster, but a lot more complex alternative (was closed for complexity and inactivity).",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2025-01-18T15:03:56Z",
    "updated_at": "2026-02-08T12:38:12Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "f3f8176b00d354c99ab2b62c116078fd1f10e010",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/optimize-CheckBlock-input-duplicate-check",
      "ref": "l0rinc/optimize-CheckBlock-input-duplicate-check",
      "sha": "786fdd177b63897648a227cb3f115b027792ca6f",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 283671,
        "default_branch": "master",
        "open_issues_count": 43,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-08T09:38:58Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2026-02-05T12:40:37Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b2805eec35ce9fdb69892e864556be4ae057ce6a",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38865,
        "stargazers_count": 88012,
        "watchers_count": 88012,
        "size": 303308,
        "default_branch": "master",
        "open_issues_count": 734,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-08T09:37:54Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-02-08T12:26:58Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 252,
    "deletions": 39,
    "changed_files": 5,
    "commits": 6,
    "review_comments": 26,
    "comments": 25
  },
  "events": [
    {
      "event": "commented",
      "id": 2599752522,
      "node_id": "IC_kwDOABII586a9RNK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2599752522",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-18T15:03:59Z",
      "updated_at": "2026-02-08T12:38:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31682.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [1440000bytes](https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608187686) |\n| Concept ACK | [sipa](https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2570273162) |\n| Approach ACK | [Raimo33](https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-3264846277) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34208](https://github.com/bitcoin/bitcoin/pull/34208) (bench: add fluent API for untimed `setup` steps in nanobench by l0rinc)\n* [#32729](https://github.com/bitcoin/bitcoin/pull/32729) (test,refactor: extract script template helpers & widen sigop count coverage by l0rinc)\n* [#32554](https://github.com/bitcoin/bitcoin/pull/32554) (bench: replace embedded raw block with configurable block generator by l0rinc)\n* [#31868](https://github.com/bitcoin/bitcoin/pull/31868) ([IBD] specialize block serialization by l0rinc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2599752522",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "convert_to_draft",
      "id": 15986025238,
      "node_id": "CTDE_lADOABII586mtzVqzwAAAAO412MW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986025238",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-18T15:05:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15986047186,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO417jS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986047186",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "be627bc43d0b219a4651019e107a1628ae006ba1",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/be627bc43d0b219a4651019e107a1628ae006ba1",
      "created_at": "2025-01-18T15:18:04Z"
    },
    {
      "event": "commented",
      "id": 2599756742,
      "node_id": "IC_kwDOABII586a9SPG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2599756742",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-18T15:18:09Z",
      "updated_at": "2025-01-18T15:18:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35818754067</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2599756742",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "labeled",
      "id": 15986047350,
      "node_id": "LE_lADOABII586mtzVqzwAAAAO417l2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986047350",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-18T15:18:09Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15986048422,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO4172m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986048422",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "bf0cf4ff34b65f46b5d2218319704fae8aa079d2",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/bf0cf4ff34b65f46b5d2218319704fae8aa079d2",
      "created_at": "2025-01-18T15:18:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15986061103,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO41-8v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986061103",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d1689061579203ddbe0376a700890c1081b33f20",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d1689061579203ddbe0376a700890c1081b33f20",
      "created_at": "2025-01-18T15:26:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15986105475,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO42JyD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986105475",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0fae6e9615934bd5dd8837fc162133da78127dd7",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/0fae6e9615934bd5dd8837fc162133da78127dd7",
      "created_at": "2025-01-18T15:50:39Z"
    },
    {
      "event": "ready_for_review",
      "id": 15986108720,
      "node_id": "RFRE_lADOABII586mtzVqzwAAAAO42Kkw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986108720",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-18T15:52:25Z"
    },
    {
      "event": "unlabeled",
      "id": 15986216870,
      "node_id": "UNLE_lADOABII586mtzVqzwAAAAO42k-m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15986216870",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-18T16:49:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2560493743,
      "node_id": "PRR_kwDOABII586Yngiv",
      "url": null,
      "actor": null,
      "commit_id": "0fae6e9615934bd5dd8837fc162133da78127dd7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-01-18T18:01:02Z",
      "author_association": "NONE",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2560493743",
      "submitted_at": "2025-01-18T18:01:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
    },
    {
      "event": "commented",
      "id": 2600379756,
      "node_id": "IC_kwDOABII586a_qVs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2600379756",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-19T01:28:22Z",
      "updated_at": "2025-01-19T01:28:22Z",
      "author_association": "MEMBER",
      "body": "How much of an improvement does this translate into for a user? The bar should be pretty high for touching such critical code.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2600379756",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15989407126,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO5Cv2W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15989407126",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ec62db0f482fdd9e82543859b35a620f786aa218",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/ec62db0f482fdd9e82543859b35a620f786aa218",
      "created_at": "2025-01-19T17:34:14Z"
    },
    {
      "event": "commented",
      "id": 2600969293,
      "node_id": "IC_kwDOABII586bB6RN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2600969293",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-19T18:20:42Z",
      "updated_at": "2025-01-19T18:20:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The bar should be pretty high for touching such critical code.\r\n\r\nAbsolutely, every change should have an extremely high bar here.\r\nFor context, compared to the changes described in https://bitcoincore.org/en/2018/09/20/notice, this update doesnâ€™t involve caching or reusing previously calculated values elsewhere. Instead, it operates entirely within the method, maintaining a black-box approach that ensures the exact same behavior. To validate this, Iâ€™ve added an extensive suite of tests that thoroughly cover these cases.\r\n\r\n> How much of an improvement does this translate into for a user? \r\n\r\nThe primary goal of this change is to improve block validation performance while maintaining a low risk profile. The PR description includes detailed measurements of the improvements. If there are additional benchmarks or scenarios youâ€™d like me to measure, please let me know, and Iâ€™ll be happy to provide them.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2600969293",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "reviewed",
      "id": 2561075956,
      "node_id": "PRR_kwDOABII586Ypur0",
      "url": null,
      "actor": null,
      "commit_id": "ec62db0f482fdd9e82543859b35a620f786aa218",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-01-19T19:36:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "This is not just affecting `CheckBlock`, it is called whenever a tx is validated (so also during mempool acceptance).\r\n\r\nThe reason that this check is increased significantly percent-wise by these changes might just be that the non-contextual checks are extremely fast in the first place (compared with contextual checks such as script verification / input lookup).\r\nSince the non-contextual checks aren't really ever performed in isolation, an interesting benchmark for me would be how much this improves transaction validation as a whole - whether it's in the context of a mempool acceptance or IBD benchmark.\r\n\r\n> CheckBlock's latency is critical both for quickly discarding invalid blocks\r\n\r\nI don't think that this is the case, since it's guarded by PoW - it's very expensive to create blocks with a valid header that fail `CheckBlock`, so it's impossible to create them in bulk. So if we do encounter them, I'd say that performance is not really critical, unless the effect is extreme (in the order of seconds / minutes). ",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2561075956",
      "submitted_at": "2025-01-19T19:36:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
    },
    {
      "event": "commented",
      "id": 2603071270,
      "node_id": "IC_kwDOABII586bJ7cm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2603071270",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-20T18:51:16Z",
      "updated_at": "2025-01-20T18:51:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "> it is called whenever a tx is validated (so also during mempool acceptance)\r\n\r\nUpdated the description, thanks.\r\n\r\n>  how much this improves transaction validation as a whole\r\n\r\nI can only optimize small parts of these, step-by-step. This was the next part I found that could be cheaply sped up (having preexisting tests, benchmarks - signaling that others were also interested in it).\r\n\r\nI have created a `chainman.ProcessTransaction` benchmark locally (will commit separately, not strictly related to this PR) to check the overall effect, but as you've stated, this is a small part of the whole process, so I regularly got roughly ~1% speedup only. Not huge, but we have to decide if it's proportional to the risk or not.\r\n\r\n<details>\r\n<summary>ProcessTransaction results</summary>\r\n\r\n```bash\r\ngit checkout bf090135d01076aa6d4fbfe7a185682dd6f9f489 >/dev/null 2>&1 \\\r\n&& cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release >/dev/null 2>&1 \\\r\n&& cmake --build build -j$(nproc) >/dev/null 2>&1 \\\r\n&& build/src/bench/bench_bitcoin -filter='ProcessTransactionBench' -min-time=10000 \\\r\n&& git checkout f25b91cd5a50e1035bbdb884ab11858702fadf33 >/dev/null 2>&1 \\\r\n&& cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release >/dev/null 2>&1 \\\r\n&& cmake --build build -j$(nproc) >/dev/null 2>&1 \\\r\n&& build/src/bench/bench_bitcoin -filter='ProcessTransactionBench' -min-time=10000\r\n```\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           56,570.90 |           17,676.93 |    0.1% |      229,118.71 |      179,945.97 |  1.273 |      15,499.48 |    0.5% |     11.03 | `ProcessTransactionBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           56,152.78 |           17,808.56 |    0.0% |      228,009.18 |      178,596.02 |  1.277 |      15,224.76 |    0.4% |     10.92 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\nSimilarly, I ran a few reindex-chainstates (as proxies for a stable IBD) and - as posted in the description -, got a similar ~1% speedup (2 runs per bench, `19923` & `19933` seconds before, and `19681` and `19737` seconds after).\r\nNot earth-shattering globally, but I think the risk (given all the tests and benchmarks) is relatively low as well.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2603071270",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2603163348,
      "node_id": "IC_kwDOABII586bKR7U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2603163348",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-20T20:06:59Z",
      "updated_at": "2025-07-31T19:15:29Z",
      "author_association": "NONE",
      "body": "> I regularly got roughly ~1% speedup only. Not huge, but we have to decide if it's proportional to the risk or not.\r\n\r\n> got a similar ~1% speedup (2 runs per bench, 19923 & 19933 seconds before, and 19681 and 19737 seconds after).\r\n\r\nNACK",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2603163348",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "labeled",
      "id": 16014838645,
      "node_id": "LE_lADOABII586mtzVqzwAAAAO6jwt1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16014838645",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T13:53:45Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "commented",
      "id": 2604837850,
      "node_id": "IC_kwDOABII586bQqva",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2604837850",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T14:09:10Z",
      "updated_at": "2025-01-21T14:09:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "@1440000bytes, this behavior isn't helpful - you're just reiterating what I've already explained, without suggesting workable solutions.\r\n\r\nAnyway, I've created an [alternative PR](https://github.com/bitcoin/bitcoin/pull/31699) that focuses solely on the tests and benchmarks, excluding the controversial optimizations. It validates the affected code and removes microbenchmarks that overemphasize this segment's significance, replacing it with a higher-level one, as suggested by @mzumsande.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2604837850",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "mentioned",
      "id": 16015071071,
      "node_id": "MEE_lADOABII586mtzVqzwAAAAO6kpdf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16015071071",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T14:09:13Z"
    },
    {
      "event": "subscribed",
      "id": 16015071097,
      "node_id": "SE_lADOABII586mtzVqzwAAAAO6kpd5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16015071097",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T14:09:13Z"
    },
    {
      "event": "convert_to_draft",
      "id": 16015074728,
      "node_id": "CTDE_lADOABII586mtzVqzwAAAAO6kqWo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16015074728",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T14:09:27Z"
    },
    {
      "event": "commented",
      "id": 2604902068,
      "node_id": "IC_kwDOABII586bQ6a0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2604902068",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T14:34:00Z",
      "updated_at": "2025-07-31T19:15:29Z",
      "author_association": "NONE",
      "body": "> @1440000bytes, this behavior isn't helpful - you're just reiterating what I've already explained, without suggesting workable solutions.\r\n\r\nI don't think optimization is worth changing consensus code.",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2604902068",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "reviewed",
      "id": 2565081559,
      "node_id": "PRR_kwDOABII586Y5AnX",
      "url": null,
      "actor": null,
      "commit_id": "ec62db0f482fdd9e82543859b35a620f786aa218",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-01-21T16:16:50Z",
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2565081559",
      "submitted_at": "2025-01-21T16:16:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16026156657,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO7O75x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16026156657",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0a40b8c8a09344c1ef9167be2f357da7a551d65d",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/0a40b8c8a09344c1ef9167be2f357da7a551d65d",
      "created_at": "2025-01-22T09:40:23Z"
    },
    {
      "event": "commented",
      "id": 2606765689,
      "node_id": "IC_kwDOABII586bYBZ5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2606765689",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T09:50:25Z",
      "updated_at": "2025-01-25T14:37:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "~I pushed a new version that is based on https://github.com/bitcoin/bitcoin/pull/31699 - to separate the testing/benching from the consensus change. This will remain in draft to gather comments.~\r\n\r\n----\r\n\r\nI've also retriggered an IBD (simulated via multiple ` -reindex-chainstate` runs for stability).\r\nHere I've compared the performance of this PR after applying my other IBD optimizations (https://github.com/bitcoin/bitcoin/pull/31144 and https://github.com/bitcoin/bitcoin/pull/31645) to measure the future potential of this change. I ran it until 800k block this time to avoid the validation overhead.\r\n\r\n<details>\r\n<summary>Benchmark results</summary>\r\n\r\n```bash\r\nhyperfine --runs 2 --parameter-list COMMIT dcc3fe7f9c4b68a4b4622ef958a3262cd8a4b08a,053ccbefa3563e776932bb847aae9c302d07de61 --prepare 'rm -rfd /mnt/my_storage/BitcoinData/debug.log build/ && git checkout {COMMIT} && cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_UTIL=OFF -DBUILD_TX=OFF -DBUILD_TESTS=OFF -DENABLE_WALLET=OFF -DINSTALL_MAN=OFF && cmake --build build -j$(nproc)' --cleanup 'mv /mnt/my_storage/BitcoinData/debug.log /mnt/my_storage/logs/debug-{COMMIT}-$(date +%s.log)' 'COMMIT={COMMIT} ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=800000 -dbcache=30000 -reindex-chainstate -connect=0 -printtoconsole=0'\r\nBenchmark 1: COMMIT=dcc3fe7f9c4b68a4b4622ef958a3262cd8a4b08a ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=800000 -dbcache=30000 -reindex-chainstate -connect=0 -printtoconsole=0\r\n  Time (mean Â± Ïƒ):     12537.220 s Â±  7.591 s    [User: 13362.903 s, System: 523.533 s]\r\n  Range (min â€¦ max):   12531.852 s â€¦ 12542.588 s    2 runs\r\n \r\nBenchmark 2: COMMIT=053ccbefa3563e776932bb847aae9c302d07de61 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=800000 -dbcache=30000 -reindex-chainstate -connect=0 -printtoconsole=0\r\n  Time (mean Â± Ïƒ):     12251.387 s Â± 52.389 s    [User: 13169.814 s, System: 543.757 s]\r\n  Range (min â€¦ max):   12214.343 s â€¦ 12288.432 s    2 runs\r\n \r\nSummary\r\n  COMMIT=053ccbefa3563e776932bb847aae9c302d07de61 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=800000 -dbcache=30000 -reindex-chainstate -connect=0 -printtoconsole=0 ran\r\n    1.02 Â± 0.00 times faster than COMMIT=dcc3fe7f9c4b68a4b4622ef958a3262cd8a4b08a ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=800000 -dbcache=30000 -reindex-chainstate -connect=0 -printtoconsole=0\r\n```\r\n\r\n</details>\r\n\r\nThis reveals a ~2.5% speedup (taking the best runs out of 2).",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2606765689",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "renamed",
      "id": 16026301077,
      "node_id": "RTE_lADOABII586mtzVqzwAAAAO7PfKV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16026301077",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T09:50:41Z",
      "rename": {
        "from": "optimization: `CheckBlock` input duplicate detection",
        "to": "optimization,RFC: `CheckBlock` input duplicate detection"
      }
    },
    {
      "event": "renamed",
      "id": 16026337645,
      "node_id": "RTE_lADOABII586mtzVqzwAAAAO7PoFt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16026337645",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T09:53:07Z",
      "rename": {
        "from": "optimization,RFC: `CheckBlock` input duplicate detection",
        "to": "RFC: optimize `CheckBlock` input duplicate detection"
      }
    },
    {
      "event": "commented",
      "id": 2608187686,
      "node_id": "IC_kwDOABII586bdckm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608187686",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T20:20:52Z",
      "updated_at": "2025-07-31T19:15:29Z",
      "author_association": "NONE",
      "body": "NACK https://github.com/bitcoin/bitcoin/commit/0a40b8c8a09344c1ef9167be2f357da7a551d65d\r\n\r\nReason: https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2604902068",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608187686",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2608192093,
      "node_id": "IC_kwDOABII586bddpd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608192093",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T20:23:29Z",
      "updated_at": "2025-01-22T20:24:49Z",
      "author_association": "NONE",
      "body": "I don't like your behavior to keep pushing for minimal changes to affect consensus code ",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608192093",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2608195017,
      "node_id": "IC_kwDOABII586bdeXJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608195017",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T20:25:14Z",
      "updated_at": "2025-01-22T20:25:14Z",
      "author_association": "MEMBER",
      "body": "@1440000bytes keep your comments on topic. the topic is technical. comments about people are not relevant.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608195017",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2608201121,
      "node_id": "IC_kwDOABII586bdf2h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608201121",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T20:29:05Z",
      "updated_at": "2025-07-31T19:15:29Z",
      "author_association": "NONE",
      "body": "> @1440000bytes keep your comments on topic. the topic is technical. comments about people are not relevant.\r\n\r\nIt is on topic and response to https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2604837850\r\n\r\nI have reviewed technically before others.",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608201121",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2608204277,
      "node_id": "IC_kwDOABII586bdgn1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608204277",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T20:30:55Z",
      "updated_at": "2025-01-22T20:30:55Z",
      "author_association": "MEMBER",
      "body": "Everyone needs to cool down on this pull request. 24 hour bans are next for users that mention people and not code. After that its 7 day bans.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608204277",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2608279611,
      "node_id": "IC_kwDOABII586bdzA7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2608279611",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T21:11:23Z",
      "updated_at": "2025-01-22T21:14:48Z",
      "author_association": "NONE",
      "body": "Merge this pull request if my comments are so off topic. ",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2608279611",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2609511597,
      "node_id": "IC_kwDOABII586bifyt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2609511597",
      "actor": {
        "login": "jmoik",
        "id": 63734881,
        "node_id": "MDQ6VXNlcjYzNzM0ODgx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63734881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jmoik",
        "html_url": "https://github.com/jmoik",
        "followers_url": "https://api.github.com/users/jmoik/followers",
        "following_url": "https://api.github.com/users/jmoik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jmoik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jmoik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jmoik/subscriptions",
        "organizations_url": "https://api.github.com/users/jmoik/orgs",
        "repos_url": "https://api.github.com/users/jmoik/repos",
        "events_url": "https://api.github.com/users/jmoik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jmoik/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T11:02:28Z",
      "updated_at": "2025-01-23T11:02:28Z",
      "author_association": "NONE",
      "body": "Interesting how std::vector is almost always the best performing container, even when uniqueness or sorting is required.",
      "user": {
        "login": "jmoik",
        "id": 63734881,
        "node_id": "MDQ6VXNlcjYzNzM0ODgx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63734881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jmoik",
        "html_url": "https://github.com/jmoik",
        "followers_url": "https://api.github.com/users/jmoik/followers",
        "following_url": "https://api.github.com/users/jmoik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jmoik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jmoik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jmoik/subscriptions",
        "organizations_url": "https://api.github.com/users/jmoik/orgs",
        "repos_url": "https://api.github.com/users/jmoik/repos",
        "events_url": "https://api.github.com/users/jmoik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jmoik/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2609511597",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 2610129748,
      "node_id": "IC_kwDOABII586bk2tU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2610129748",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T15:33:24Z",
      "updated_at": "2025-01-23T15:33:24Z",
      "author_association": "MEMBER",
      "body": "`std::vector` is probably less likely to have bugs that `std::set`, so there's an improvement in that regard as well.\r\n\r\nI feel like we shouldn't need to fully sort, though. Perhaps a custom check would improve performance more significantly? (OTOH, the \"normal flow\" scenario might end up being a full sort anyway, unsure)",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2610129748",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "reviewed",
      "id": 2570273162,
      "node_id": "PRR_kwDOABII586ZM0GK",
      "url": null,
      "actor": null,
      "commit_id": "0a40b8c8a09344c1ef9167be2f357da7a551d65d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-01-23T17:44:35Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.\r\n\r\nI agree with the concerns about being cautious when changing such consensus-critical code, especially given the fact that we've had an actual critical vulnerability related to duplicate checking. However, the changes here are very confined to a single function, easily reviewed, and I have a general preference for avoiding `std::set` when sorted `std::vector` works too as well (even beyond what benchmarks can measure, it reduces memory fragmentation e.g.).\r\n\r\nThat said, I absolutely respect the view \"This optimization is not worth the risk\", and I don't think it requires \"suggesting workable solutions\". There is no problem to be solved; it's an improvement, and both \"doing it\" and \"not doing anything like this at all\" are valid choices we can make.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2570273162",
      "submitted_at": "2025-01-23T16:48:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16047481820,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO8gSPc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16047481820",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8",
      "created_at": "2025-01-23T17:29:16Z"
    },
    {
      "event": "commented",
      "id": 2612218530,
      "node_id": "IC_kwDOABII586bs0qi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2612218530",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-24T10:44:14Z",
      "updated_at": "2025-01-24T16:10:39Z",
      "author_association": "MEMBER",
      "body": "(Side-note: In theory `std::flat_set` constructor (4) (https://en.cppreference.com/w/cpp/container/flat_set/flat_set) could be used as a drop-in replacement to do the sort+uniq, but this requires C++23 and isn't even implemented in any released standard lib and would only turn two calls into one.)",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2612218530",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16067551629,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO9s2GN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16067551629",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "5c0402ebef3365ce70a7f9f699609c49332a78af",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/5c0402ebef3365ce70a7f9f699609c49332a78af",
      "created_at": "2025-01-25T14:37:46Z"
    },
    {
      "event": "commented",
      "id": 2613988299,
      "node_id": "IC_kwDOABII586bzkvL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2613988299",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T14:43:10Z",
      "updated_at": "2025-01-27T20:26:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I feel like we shouldn't need to fully sort, though\r\n\r\nWe likely wouldn't need that just for duplicate checking, but this seems \"good enough\", since it's a built-in function - especially now that I have integrated it with null checks as well.\r\n\r\nThe code now separates (in many tiny commits to ease review) validations by input sizes:\r\n* 1 input - it's either coinbase, in which case we don't need duplicate checks and don't need to check that none of the inputs are null, or if it's not, we're done with validation. Given that this is the most common case currently, seemed like an important case to tread separately.\r\n* 2 inputs - we check that the two are not equal and that they're not null\r\n* otherwise we sort the prevouts, check duplicates via built-in (possibly SIMD optimized) method and check for nulls at the head of the sorted values in constant time (we could also check NULL during `sortedPrevouts` collection but that would change the validation order for duplicates & nulls).\r\n\r\nI've also [extended the tests](https://github.com/bitcoin/bitcoin/compare/51e473cec9b22a1a8785405ded8ba7c464da28ae..5c0402ebef3365ce70a7f9f699609c49332a78af) to cover random null check validations.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2613988299",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16070199897,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAO928pZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16070199897",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "created_at": "2025-01-26T14:21:55Z"
    },
    {
      "event": "reviewed",
      "id": 2576769678,
      "node_id": "PRR_kwDOABII586ZlmKO",
      "url": null,
      "actor": null,
      "commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-01-27T23:38:46Z",
      "author_association": "NONE",
      "user": {
        "login": "jasonribble",
        "id": 80722374,
        "node_id": "MDQ6VXNlcjgwNzIyMzc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/80722374?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jasonribble",
        "html_url": "https://github.com/jasonribble",
        "followers_url": "https://api.github.com/users/jasonribble/followers",
        "following_url": "https://api.github.com/users/jasonribble/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jasonribble/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jasonribble/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jasonribble/subscriptions",
        "organizations_url": "https://api.github.com/users/jasonribble/orgs",
        "repos_url": "https://api.github.com/users/jasonribble/repos",
        "events_url": "https://api.github.com/users/jasonribble/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jasonribble/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2576769678",
      "submitted_at": "2025-01-27T23:38:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
    },
    {
      "event": "renamed",
      "id": 16095341354,
      "node_id": "RTE_lADOABII586mtzVqzwAAAAO_W2sq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16095341354",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T15:34:36Z",
      "rename": {
        "from": "RFC: optimize `CheckBlock` input duplicate detection",
        "to": "RFC: optimize `CheckBlock` input checks (duplicate detection & nulls)"
      }
    },
    {
      "event": "commented",
      "id": 2624700760,
      "node_id": "IC_kwDOABII586cccFY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2624700760",
      "actor": {
        "login": "jmoik",
        "id": 63734881,
        "node_id": "MDQ6VXNlcjYzNzM0ODgx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63734881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jmoik",
        "html_url": "https://github.com/jmoik",
        "followers_url": "https://api.github.com/users/jmoik/followers",
        "following_url": "https://api.github.com/users/jmoik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jmoik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jmoik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jmoik/subscriptions",
        "organizations_url": "https://api.github.com/users/jmoik/orgs",
        "repos_url": "https://api.github.com/users/jmoik/repos",
        "events_url": "https://api.github.com/users/jmoik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jmoik/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T14:46:59Z",
      "updated_at": "2025-01-30T14:46:59Z",
      "author_association": "NONE",
      "body": "I experimented a bit more and it looks like I got another 17% speed improvement (on block413567 on my linux machine) over your changes @l0rinc , by using a faster comparison operator and doing direct comparisons for relatively small input sizes. Can I create a new pull request for that?",
      "user": {
        "login": "jmoik",
        "id": 63734881,
        "node_id": "MDQ6VXNlcjYzNzM0ODgx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63734881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jmoik",
        "html_url": "https://github.com/jmoik",
        "followers_url": "https://api.github.com/users/jmoik/followers",
        "following_url": "https://api.github.com/users/jmoik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jmoik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jmoik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jmoik/subscriptions",
        "organizations_url": "https://api.github.com/users/jmoik/orgs",
        "repos_url": "https://api.github.com/users/jmoik/repos",
        "events_url": "https://api.github.com/users/jmoik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jmoik/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2624700760",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "mentioned",
      "id": 16125341346,
      "node_id": "MEE_lADOABII586mtzVqzwAAAAPBJS6i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16125341346",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T14:47:01Z"
    },
    {
      "event": "subscribed",
      "id": 16125341353,
      "node_id": "SE_lADOABII586mtzVqzwAAAAPBJS6p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16125341353",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T14:47:01Z"
    },
    {
      "event": "commented",
      "id": 2624773641,
      "node_id": "IC_kwDOABII586cct4J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2624773641",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T15:14:03Z",
      "updated_at": "2025-01-30T15:14:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "> by using a faster comparison operator and doing direct comparisons for relatively small input sizes.\r\n\r\nQuadratic comparison would likely be faster than sorting for very small input sizes (e.g. <10, I guess), but it would complicate the code and testing considerably for a case that is likely not representative. I also thought of that but I want the code to be faster while not being more difficult to comprehend. But feel free to challenge my bias by pushing a different PR with those changes and let the best approach win! You can cherry-pick it on top of these changes if you want.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2624773641",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "unsubscribed",
      "id": 16129573256,
      "node_id": "UE_lADOABII586mtzVqzwAAAAPBZcGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16129573256",
      "actor": {
        "login": "PRADACANDI18",
        "id": 91190628,
        "node_id": "MDQ6VXNlcjkxMTkwNjI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/91190628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PRADACANDI18",
        "html_url": "https://github.com/PRADACANDI18",
        "followers_url": "https://api.github.com/users/PRADACANDI18/followers",
        "following_url": "https://api.github.com/users/PRADACANDI18/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PRADACANDI18/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PRADACANDI18/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PRADACANDI18/subscriptions",
        "organizations_url": "https://api.github.com/users/PRADACANDI18/orgs",
        "repos_url": "https://api.github.com/users/PRADACANDI18/repos",
        "events_url": "https://api.github.com/users/PRADACANDI18/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PRADACANDI18/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T20:14:38Z"
    },
    {
      "event": "renamed",
      "id": 16317405008,
      "node_id": "RTE_lADOABII586mtzVqzwAAAAPMl9dQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16317405008",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-14T21:04:23Z",
      "rename": {
        "from": "RFC: optimize `CheckBlock` input checks (duplicate detection & nulls)",
        "to": "optimization: speed up `CheckBlock` input checks (duplicate detection & nulls)"
      }
    },
    {
      "event": "ready_for_review",
      "id": 16317407108,
      "node_id": "RFRE_lADOABII586mtzVqzwAAAAPMl9-E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16317407108",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-14T21:04:39Z"
    },
    {
      "event": "renamed",
      "id": 16716244641,
      "node_id": "RTE_lADOABII586mtzVqzwAAAAPkXaah",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16716244641",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T15:36:14Z",
      "rename": {
        "from": "optimization: speed up `CheckBlock` input checks (duplicate detection & nulls)",
        "to": "[IBD] Specialize CheckBlock's input & coinbase checks"
      }
    },
    {
      "event": "mentioned",
      "id": 16716325350,
      "node_id": "MEE_lADOABII586mtzVqzwAAAAPkXuHm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16716325350",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T15:40:40Z"
    },
    {
      "event": "subscribed",
      "id": 16716325383,
      "node_id": "SE_lADOABII586mtzVqzwAAAAPkXuIH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16716325383",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T15:40:40Z"
    },
    {
      "event": "renamed",
      "id": 16717059941,
      "node_id": "RTE_lADOABII586mtzVqzwAAAAPkahdl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717059941",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:23:17Z",
      "rename": {
        "from": "[IBD] Specialize CheckBlock's input & coinbase checks",
        "to": "[IBD] specialize CheckBlock's input & coinbase checks"
      }
    },
    {
      "event": "reviewed",
      "id": 2679943648,
      "node_id": "PRR_kwDOABII586fvLHg",
      "url": null,
      "actor": null,
      "commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-03-12T21:44:00Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2679943648",
      "submitted_at": "2025-03-12T21:44:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17303926966,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAQHZPi2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17303926966",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "492f5b60e10452da4383fa822345cd2c99cfa38e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/492f5b60e10452da4383fa822345cd2c99cfa38e",
      "created_at": "2025-04-17T10:34:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17329436208,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAQI6jYw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17329436208",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "632de976017c1a3e45d99d16ba90dc6e08eceb7e",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/632de976017c1a3e45d99d16ba90dc6e08eceb7e",
      "created_at": "2025-04-19T18:52:23Z"
    },
    {
      "event": "labeled",
      "id": 17690485267,
      "node_id": "LE_lADOABII586mtzVqzwAAAAQeb2IT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17690485267",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-16T14:58:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17690597829,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAQecRnF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17690597829",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "19fbd5e089763db3fc0a8375eae76e9d8416a6be",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/19fbd5e089763db3fc0a8375eae76e9d8416a6be",
      "created_at": "2025-05-16T15:06:15Z"
    },
    {
      "event": "unlabeled",
      "id": 17693251075,
      "node_id": "UNLE_lADOABII586mtzVqzwAAAAQemZYD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17693251075",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-16T18:56:57Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18707813336,
      "node_id": "LE_lADOABII586mtzVqzwAAAARbEpPY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18707813336",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T21:54:45Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18864536284,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAARkafrc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18864536284",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f159a773e075291bd8629c8ba4532f15b5db0372",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/f159a773e075291bd8629c8ba4532f15b5db0372",
      "created_at": "2025-07-28T21:01:51Z"
    },
    {
      "event": "unlabeled",
      "id": 18865386799,
      "node_id": "UNLE_lADOABII586mtzVqzwAAAARkdvUv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18865386799",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-28T22:30:49Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 19061317054,
      "node_id": "LE_lADOABII586mtzVqzwAAAARwJJ2-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19061317054",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-08T20:01:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19147343779,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAR1RUej",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19147343779",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "created_at": "2025-08-13T23:30:53Z"
    },
    {
      "event": "commented",
      "id": 3186174330,
      "node_id": "IC_kwDOABII58696Sl6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3186174330",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-13T23:31:27Z",
      "updated_at": "2025-08-13T23:31:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to fix conflicts with https://github.com/bitcoin/bitcoin/pull/33116",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-3186174330",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "unlabeled",
      "id": 19148303684,
      "node_id": "UNLE_lADOABII586mtzVqzwAAAAR1U-1E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19148303684",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-14T01:01:23Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3264550939,
      "node_id": "IC_kwDOABII587ClRgb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3264550939",
      "actor": {
        "login": "Raimo33",
        "id": 104778891,
        "node_id": "U_kgDOBj7Miw",
        "avatar_url": "https://avatars.githubusercontent.com/u/104778891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Raimo33",
        "html_url": "https://github.com/Raimo33",
        "followers_url": "https://api.github.com/users/Raimo33/followers",
        "following_url": "https://api.github.com/users/Raimo33/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Raimo33/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Raimo33/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Raimo33/subscriptions",
        "organizations_url": "https://api.github.com/users/Raimo33/orgs",
        "repos_url": "https://api.github.com/users/Raimo33/repos",
        "events_url": "https://api.github.com/users/Raimo33/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Raimo33/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-08T04:27:28Z",
      "updated_at": "2025-09-08T04:34:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK.\n\nwill review soon. I'm a fan of the simpler std::vector approach. ",
      "user": {
        "login": "Raimo33",
        "id": 104778891,
        "node_id": "U_kgDOBj7Miw",
        "avatar_url": "https://avatars.githubusercontent.com/u/104778891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Raimo33",
        "html_url": "https://github.com/Raimo33",
        "followers_url": "https://api.github.com/users/Raimo33/followers",
        "following_url": "https://api.github.com/users/Raimo33/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Raimo33/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Raimo33/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Raimo33/subscriptions",
        "organizations_url": "https://api.github.com/users/Raimo33/orgs",
        "repos_url": "https://api.github.com/users/Raimo33/repos",
        "events_url": "https://api.github.com/users/Raimo33/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Raimo33/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-3264550939",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "commented",
      "id": 3264846277,
      "node_id": "IC_kwDOABII587CmZnF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3264846277",
      "actor": {
        "login": "Raimo33",
        "id": 104778891,
        "node_id": "U_kgDOBj7Miw",
        "avatar_url": "https://avatars.githubusercontent.com/u/104778891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Raimo33",
        "html_url": "https://github.com/Raimo33",
        "followers_url": "https://api.github.com/users/Raimo33/followers",
        "following_url": "https://api.github.com/users/Raimo33/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Raimo33/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Raimo33/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Raimo33/subscriptions",
        "organizations_url": "https://api.github.com/users/Raimo33/orgs",
        "repos_url": "https://api.github.com/users/Raimo33/repos",
        "events_url": "https://api.github.com/users/Raimo33/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Raimo33/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-08T06:46:57Z",
      "updated_at": "2025-09-08T06:46:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The bar should be pretty high for touching such critical code.\r\n\r\nI agree but I argue the changes proposed are small enough that this should be seriously considered for merge. the diff makes it hard to grasp, but few actually changed, and for the best.\r\nI'm debated on cae4bb877f9ef1350825ed42a9b97090d5920d39, but for the rest, Concept ACK, Approach ACK, ACK d28302fa2c09c2eac3daad7116dc9812fe01928b.\r\n\r\nI've ran the tests and double checked the logic.\r\n\r\n```shell\r\ntaskset -c 1 ./bench_bitcoin --filter=\"(ProcessTransactionBench)\" --min-time=10000\r\n```\r\n\r\n> Before:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|           52,941.54 |           18,888.76 |    0.1% |     10.79 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|           52,110.83 |           19,189.87 |    0.1% |     10.78 | `ProcessTransactionBench`\r\n\r\n> Without  cae4bb877f9ef1350825ed42a9b97090d5920d39:\r\n\r\n```diff\r\n- else if (tx.vin.size() == 2) {\r\n-       if (tx.vin[0].prevout == tx.vin[1].prevout) {\r\n-           return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\r\n-       }\r\n-       if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\r\n-           return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\r\n-       }\r\n-}\r\n```\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|           52,778.63 |           18,947.06 |    0.1% |     10.77 | `ProcessTransactionBench`\r\n\r\n\r\n**+1.6%** faster\r\nonly **+0.3%** faster without cae4bb877f9ef1350825ed42a9b97090d5920d39\r\n\r\nLooks like the gain comes from handling txs with 1-2 inputs separately.",
      "user": {
        "login": "Raimo33",
        "id": 104778891,
        "node_id": "U_kgDOBj7Miw",
        "avatar_url": "https://avatars.githubusercontent.com/u/104778891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Raimo33",
        "html_url": "https://github.com/Raimo33",
        "followers_url": "https://api.github.com/users/Raimo33/followers",
        "following_url": "https://api.github.com/users/Raimo33/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Raimo33/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Raimo33/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Raimo33/subscriptions",
        "organizations_url": "https://api.github.com/users/Raimo33/orgs",
        "repos_url": "https://api.github.com/users/Raimo33/repos",
        "events_url": "https://api.github.com/users/Raimo33/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Raimo33/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-3264846277",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "unsubscribed",
      "id": 19690429275,
      "node_id": "UE_lADOABII586mtzVqzwAAAASVpBtb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19690429275",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-15T02:12:35Z"
    },
    {
      "event": "commented",
      "id": 3574992541,
      "node_id": "IC_kwDOABII587VFg6d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3574992541",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T10:45:16Z",
      "updated_at": "2025-11-25T10:45:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased after #33629, removed the conflicting [`1783fbe` (#31682)](https://github.com/bitcoin/bitcoin/pull/31682/commits/1783fbe04dd4938300dadf2553a9bb20accf2ccc) for simplicity ",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-3574992541",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31682"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21161384772,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAATtURtE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21161384772",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "1fb312f0d6a24273249403cb4037a73f3a366b39",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/1fb312f0d6a24273249403cb4037a73f3a366b39",
      "created_at": "2025-11-25T10:45:17Z"
    },
    {
      "event": "labeled",
      "id": 22056015441,
      "node_id": "LE_lADOABII586mtzVqzwAAAAUipBZR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22056015441",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-14T23:25:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22094378022,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAUk7XQm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22094378022",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7f43cb141c404255519c1b851ea386ed0a0d7c6b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/7f43cb141c404255519c1b851ea386ed0a0d7c6b",
      "created_at": "2026-01-16T12:11:34Z"
    },
    {
      "event": "unlabeled",
      "id": 22094954312,
      "node_id": "UNLE_lADOABII586mtzVqzwAAAAUk9j9I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22094954312",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-16T12:41:23Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 22604913221,
      "node_id": "LE_lADOABII586mtzVqzwAAAAVDW5pF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22604913221",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T04:14:55Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMxMWQ2YjljOWM5ZjE2NGRlZmZkODc2OTM1ZGYxOWU1NzkxYjc4ODQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/311d6b9c9c9f164deffd876935df19e5791b7884",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/311d6b9c9c9f164deffd876935df19e5791b7884",
      "tree": {
        "sha": "866c802b826daa3be9c81ab387e42bcce62deac1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/866c802b826daa3be9c81ab387e42bcce62deac1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 866c802b826daa3be9c81ab387e42bcce62deac1\nparent b2805eec35ce9fdb69892e864556be4ae057ce6a\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1737211028 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1770491876 +0100\n\ntest: validate duplicate detection in `CheckTransaction`\n\nThe `CheckTransaction` validation function in https://github.com/bitcoin/bitcoin/blob/master/src/consensus/tx_check.cpp#L41-L45 relies on a correct ordering relation for detecting duplicate transaction inputs.\n\nThese test updates ensure:\n* Accurate detection of duplicates beyond trivial cases (e.g., two identical inputs);\n* Consistent behavior between sortedâ€‘set and hashâ€‘set duplicate checks when detecting duplicates for `COutPoint` and related values;\n* The function maintains expected behavior for ordering and equality checks.\n\nUsing randomized testing with shuffled inputs (to avoid any remaining bias introduced), the enhanced test validates that `CheckTransaction` remains robust and reliable across various input configurations.\nIt confirms identical behavior to a hashing-based duplicate detection mechanism, ensuring consistency and correctness.\n\nTo make sure the new branches in the follow-up commits will be covered, `basic_transaction_tests` was extended a randomized test one comparing against the old implementation (and also an alternative duplicate). The iterations and ranges were chosen such that every new branch is expected to be hit once.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmHj+cACgkQZp//D/pH\nenbP6xAAvSEoZ4mzuk9H6hA8/WZ82+cCCm0ZP4JygPPZxxrQRCjMG8xPDlm1w3/8\nB2c1eqcc+oew6nmciQA8aa6Y9q6IyPjdqHNN67149wkPgNRq+ZMW+AnBeCNclhyx\npQUfvZdVdQpBZYnAkK6CG+LRQYRvwAm2KQ2ejAXUQwAAWot8IpYZBTiSzBqnaFZ3\nk9ffybXd9Vz5HJE0VVAG05ntDc3VsPlsN+GjmRq24J9jwXUDK8Pnc+VJCHIZguzD\nm5r1l9CPfkPwO1I6972vv3HRXk/U/tp1aFpScUwItq/UurpjQbol/h4UJulgNi3D\nl4wImoC2YHIQ0+DtrDLWxRZpS21NRutCj46F8hmYFjqFgHnfDbrcRWI75aAQuy9f\n6u93OzujX7AuKNOabxyi9AKhdRi/w9IArmodANoXDwf0vWbPrJAZhQZauFPosR2q\n2USXEigoU2nW0WuWxsxFGnn3G7v+xB9saoLMeORKwN8oUh0IlX34ltRprn21jjW2\nJ2BgT/APZ3t+9oTjlYWfsulXrJBTfXmCojTGPtsDV6+GsnxjIuVrwNMFfH233Ey4\nO369v/OKRcpRF6i3X3V+6nqVK2Uxc4h0s0TXY2IGZFdH4mbUudNwCMFSiHEQwZ0Q\nwBxNL/3FQVi4kvRw34OkBQk0fliwyfRhyWIFaWpfDEtc4GdmSF8=\n=tvmy\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b2805eec35ce9fdb69892e864556be4ae057ce6a",
          "sha": "b2805eec35ce9fdb69892e864556be4ae057ce6a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b2805eec35ce9fdb69892e864556be4ae057ce6a"
        }
      ],
      "message": "test: validate duplicate detection in `CheckTransaction`\n\nThe `CheckTransaction` validation function in https://github.com/bitcoin/bitcoin/blob/master/src/consensus/tx_check.cpp#L41-L45 relies on a correct ordering relation for detecting duplicate transaction inputs.\n\nThese test updates ensure:\n* Accurate detection of duplicates beyond trivial cases (e.g., two identical inputs);\n* Consistent behavior between sortedâ€‘set and hashâ€‘set duplicate checks when detecting duplicates for `COutPoint` and related values;\n* The function maintains expected behavior for ordering and equality checks.\n\nUsing randomized testing with shuffled inputs (to avoid any remaining bias introduced), the enhanced test validates that `CheckTransaction` remains robust and reliable across various input configurations.\nIt confirms identical behavior to a hashing-based duplicate detection mechanism, ensuring consistency and correctness.\n\nTo make sure the new branches in the follow-up commits will be covered, `basic_transaction_tests` was extended a randomized test one comparing against the old implementation (and also an alternative duplicate). The iterations and ranges were chosen such that every new branch is expected to be hit once.",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-07T19:17:56Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-18T14:37:08Z"
      },
      "sha": "311d6b9c9c9f164deffd876935df19e5791b7884"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMyZDM3MTRkNzVhNGZhZWEwMTUyMWQ2ZDM5MGU2ZDE3YTdjODBhMmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2d3714d75a4faea01521d6d390e6d17a7c80a2e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c2d3714d75a4faea01521d6d390e6d17a7c80a2e",
      "tree": {
        "sha": "55875f5364651eac16e30f7a614d44faeae508de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/55875f5364651eac16e30f7a614d44faeae508de"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 55875f5364651eac16e30f7a614d44faeae508de\nparent 311d6b9c9c9f164deffd876935df19e5791b7884\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1737197006 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1770491879 +0100\n\nbench: measure `CheckBlock` speed separately from serialization\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmHj+cACgkQZp//D/pH\nenZqrhAAlnsFjrDWxF+AlkIdQ3liobIzr38EzJ3Sg/xzJdei74f+En/fIc37xjk/\ny3XJX3G2WTUnIxxzEG7EgXvR9fLg6vw92+lhAUSd8zaw2WkpLYh4oKhQlVTb+clG\nUYlbBlJ7j2l2WlBTb7dZF8JjGzfCh3J9OJqgQGxco6dzYZQPesvwZRWhEClapLra\nBYEW8gMcLJuTi4lqTHLzcSEVqRQp/SCdPMOVB8c075PKVZsL0XBmlhrECYaP8uJF\n7jXHU8j2TggbKiAAzAwd1/3EPUU9ZOrBDYIrN73dmS8O9GDPzqK8oHAuHpbtwhLP\nMSBF/EjoggmIfyhlVpyOAz7yEEXSDeWwOHOqRjaH1VPxWfQuKVGHEQsxoDxv8Z+u\n7gODKoFms0WuBwZfadOS/LoZ78S+XBc5cDDYkHGuW8/EIgv55FKj807pFFxC8Bp0\nWRSsTztT69kRlYLJ59O3aWdSLoc4BWptmzscCKgrK7E0qzI7bBViy4bUgUleGV1e\n3Joc64aC+M3dzcT72F4aH5/tVfvAA4rmZK/Wb1n5OhAkwCeFAqrAFqFMynMHgTo+\nhHvvT6UiS9URfyn1nBsdRBlpahGM1bwvN0t2ABWA2GW3VH0NOXhodouak9Flrbq2\nzHoCC+FPGORBNuQGTLr8ahFd7XGspTiI08Rhd+sbhKOqObxmUP8=\n=Yo6B\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/311d6b9c9c9f164deffd876935df19e5791b7884",
          "sha": "311d6b9c9c9f164deffd876935df19e5791b7884",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/311d6b9c9c9f164deffd876935df19e5791b7884"
        }
      ],
      "message": "bench: measure `CheckBlock` speed separately from serialization\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-07T19:17:59Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-18T10:43:26Z"
      },
      "sha": "c2d3714d75a4faea01521d6d390e6d17a7c80a2e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGExYTY2NjU4YWE3MmVjODA3NDg3ZDgzNjljMjNmYWZkNjdhNTM5NTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a1a66658aa72ec807487d8369c23fafd67a53959",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a1a66658aa72ec807487d8369c23fafd67a53959",
      "tree": {
        "sha": "4cdfa5c06c1692f28195495246e6f2ec4505d36d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4cdfa5c06c1692f28195495246e6f2ec4505d36d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4cdfa5c06c1692f28195495246e6f2ec4505d36d\nparent c2d3714d75a4faea01521d6d390e6d17a7c80a2e\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1737810444 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1770491879 +0100\n\noptimization: move duplicate checks outside of coinbase branch\n\n`IsCoinBase` means a single input with Null prevout, so restrict duplicate checks to non-coinbase transactions.\nBehavior is unchanged, except that single-input transactions arenâ€™t checked for duplicates anymore (~70â€“90% of cases, see https://transactionfee.info/charts/transactions-1in).\nAdded braces to conditions and loops to simplify review of followâ€‘up commits.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          335,917.12 |            2,976.92 |    1.3% |     11.01 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,286,337.42 |              304.29 |    1.1% |     10.90 | `DuplicateInputs`\n|            9,561.02 |          104,591.35 |    0.2% |     11.02 | `ProcessTransactionBench`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmHj+cACgkQZp//D/pH\nenbvuRAArvEU7AR34uYFLeEhSNlWKIMhliyOnlNi6x5k6O7DywAXC9Gmu8oxmO3H\nZGpOd9T0VEJYMZPJ1FlvIIFJGJr/bfMpLczUAa7QdTLh7a5BiC2fU9L9IYJi/Smg\nhxH6XiN1RSqtujsUTdLii3MvMX71iOml+3d/jai7IS1gKwpPTEWDG9UxiUY8HdSD\n3CkSdlLICF2+IVtpq+oG4AN0E5q9+rM10y9aT+FpM7r91VvYvLUIT2zJGtX4+t7G\nrxX86Ph85KA62eKFLnzRDNjMP0HzFrtkSNhpcHShMNCLWuykr5Tu7aHi3xLa5PKw\nfOJihs1CVvzT/9+HOJAlJawYynQwbtXgQWGPJ4STxIGIRdTJd+r1AnGsj044aOmE\nM+B6b3ZxwuxV0yVvE/OmKfDem8klxxHOs/OqZRbp8FBzI1zyj4zoCIpQpQG8GEzp\nmnTMIFKEt9OlIQWlujs39yO/rfwO/NkECuXE7GfuVGlYyna4S8jTHOm027Io6Lop\nihT2Hnw0EyyRnajov/kbI9TB6OV3j2H744mz6E5qjkoPPPqb0m8oXYwZ4PBZQiqT\nnqth7MQujpZKO5hTTZD6HtEnOxClfXBcYTpryE8xXN2xBjLma0gYvNJmmh2YhMbY\nZQa7Fiz/8Llo12D2zGQDWwH0CJgIQ6EPGY0mjcWleoZuaLHj4zA=\n=xIf+\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2d3714d75a4faea01521d6d390e6d17a7c80a2e",
          "sha": "c2d3714d75a4faea01521d6d390e6d17a7c80a2e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c2d3714d75a4faea01521d6d390e6d17a7c80a2e"
        }
      ],
      "message": "optimization: move duplicate checks outside of coinbase branch\n\n`IsCoinBase` means a single input with Null prevout, so restrict duplicate checks to non-coinbase transactions.\nBehavior is unchanged, except that single-input transactions arenâ€™t checked for duplicates anymore (~70â€“90% of cases, see https://transactionfee.info/charts/transactions-1in).\nAdded braces to conditions and loops to simplify review of followâ€‘up commits.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          335,917.12 |            2,976.92 |    1.3% |     11.01 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,286,337.42 |              304.29 |    1.1% |     10.90 | `DuplicateInputs`\n|            9,561.02 |          104,591.35 |    0.2% |     11.02 | `ProcessTransactionBench`",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-07T19:17:59Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-25T13:07:24Z"
      },
      "sha": "a1a66658aa72ec807487d8369c23fafd67a53959"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUxMjBmMzMxNTMxODY3NWI4OGMxMmRiNDk1ZGEyMTJmNTJlMWEzNTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e120f3315318675b88c12db495da212f52e1a350",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e120f3315318675b88c12db495da212f52e1a350",
      "tree": {
        "sha": "5b11acc9658f8d5808f0f86d5951d35b684b6993",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b11acc9658f8d5808f0f86d5951d35b684b6993"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5b11acc9658f8d5808f0f86d5951d35b684b6993\nparent a1a66658aa72ec807487d8369c23fafd67a53959\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1737149999 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1770491879 +0100\n\noptimization: simplify duplicate checks for trivial inputs\n\nNo need to create a set to check duplicates for two-input transactions.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          314,137.30 |            3,183.32 |    1.2% |     11.04 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,220,592.73 |              310.50 |    1.3% |     10.92 | `DuplicateInputs`\n|            9,425.98 |          106,089.77 |    0.3% |     11.00 | `ProcessTransactionBench`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmHj+cACgkQZp//D/pH\nenbPSQ/+LgK+dqNY2otNsK7GuKyGbAxr/Xl6j6koea/iyKOtmoDiQjCMMdpnPJhc\np+fExAZX+mmTUbOYfVObvzm5BPqAv2mnQipNbWmUn+inr0u7kBkyv+utQELkPvmj\nKVT6RtpBS7OODI4mE60ntpMgSGq9eCuvzVrGk+AbQrBRubGevUq9UhIYvWdT5yFM\nzGSshcr0wupUCtHuuAiOh/GJGiCoZFy7Grbfi/F4dBdtJJT1HaaAe9uPx4nRFfKr\nm4LV13daRNCgDO7fkiJWkj8zF09lIqaBcjW24qZIImbBCJBIQ9+HB4RZMFkI4p79\nr1Y1IuW+Q+E43qLcHX0Ls/ByYj9pO3mJX5XHdIoeBhsizD2wEKU6Lj2zuoQL46kt\n4Dkx0qQItAzyeSNr7p1TZzektUL5/vhJHkkTFHo/GF6KjLD3e4sljjN2W/R17ej7\nKLND8DzCRf0RtQIA3WE/S1e5ObTAMRdbCF6zKkw1kNfEMGtBMVhEi9jaR7svueL6\n1/gDMxSB7rX3lcXZZPeC7GZY1xCSUKkkOX34uaK6zKKkvhEOYZ6q7IsSWy5OIRWK\nbQ6XoVl2l3IgvCk8uM5qSnm7wvDXUzgP7+7bY0dJ92S0w28pSZs6iP2DosGFv7KH\nys4NBOlV05IhWmF32Hzj5VFvjr0O74CRrtcfwLhBt7kFVnNQaX0=\n=jxM4\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a1a66658aa72ec807487d8369c23fafd67a53959",
          "sha": "a1a66658aa72ec807487d8369c23fafd67a53959",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a1a66658aa72ec807487d8369c23fafd67a53959"
        }
      ],
      "message": "optimization: simplify duplicate checks for trivial inputs\n\nNo need to create a set to check duplicates for two-input transactions.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          314,137.30 |            3,183.32 |    1.2% |     11.04 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,220,592.73 |              310.50 |    1.3% |     10.92 | `DuplicateInputs`\n|            9,425.98 |          106,089.77 |    0.3% |     11.00 | `ProcessTransactionBench`",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-07T19:17:59Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-17T21:39:59Z"
      },
      "sha": "e120f3315318675b88c12db495da212f52e1a350"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMwMDcyZjcwYTAyMjFjMjUwYmIyMjhmOTBkYjA1NzM0MDE5ZGVlN2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/30072f70a0221c250bb228f90db05734019dee7e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/30072f70a0221c250bb228f90db05734019dee7e",
      "tree": {
        "sha": "f774d523a526776b3942ac93dff414afc9be9222",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f774d523a526776b3942ac93dff414afc9be9222"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f774d523a526776b3942ac93dff414afc9be9222\nparent e120f3315318675b88c12db495da212f52e1a350\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1737197687 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1770491879 +0100\n\noptimization: replace tree with sorted vector\n\nA pre-sized vector retains locality (enabling SIMD operations), speeding up sorting and equality checks.\nIt's also simpler (and therefore more reliable) than a sorted set, and causes less memory fragmentation.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          181,922.54 |            5,496.85 |    0.2% |     10.98 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          997,739.30 |            1,002.27 |    1.0% |     10.94 | `DuplicateInputs`\n|            9,449.28 |          105,828.15 |    0.3% |     10.99 | `ProcessTransactionBench`\n\nCo-authored-by: Pieter Wuille <pieter@wuille.net>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmHj+cACgkQZp//D/pH\nenbRnxAAudnT/5FzN/6sBNThwxatSe9itbsoN9SezT0g+004+XeTy4fTEacQGcTi\ngl2zE2+LEpANSPfplPn0IyZmAcTmYnGDrkmIe4s49dHerI5Qh7pFWgelk13CeBKz\nw0a5in6nExpVIMPcaVz4POU8rB9mSruec/kPjR2VxZS3ManpaXYeql5EbPVbyIIw\nI8K8mUw0Wsv/fipsHyca7Yi5pX856ug0u9EtURvHfIFAVWow7k8yv8xBJl04UYyB\nRoFp7m9TCbnw+fB/1ohsLIBdhYCzp0Jn52cltw3+3kwlJVOtVcw7QSqGHvrBOueI\nHo+HOUFX6/m99ssFr/vIoUkDNLERWNgpvijQEmuVPZvg/A5A5svM9J0qTxBhAhht\nYhjTfCiAhJdTxm9YArDasrGj6UocKOQofMbOC3PVKBbJNnsHZJPlNBQTtNBAvRpR\n9+OiJVWr403j3HXAsV7bm1p1lUGB80DWJFhATsLGRXKWJX1uCg9LvM/mEfvarpfm\nj4Fi0DaLwBI+/cgwfRKUszxall1wgHJ+8R/XACVFwHpxyIoUxdrXe/qJDpT+AzR/\njxGfjbUUOpp5g11G4oVjeNfYxHCLweTa6dHW6h2rj1C9KPBHPSaqz+GFwWZr5IeL\nrmdU1+6x9AtBGymos2xlO70HmOZPTCvFO6DlQDcHja3RG6dXDPk=\n=mVN2\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e120f3315318675b88c12db495da212f52e1a350",
          "sha": "e120f3315318675b88c12db495da212f52e1a350",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e120f3315318675b88c12db495da212f52e1a350"
        }
      ],
      "message": "optimization: replace tree with sorted vector\n\nA pre-sized vector retains locality (enabling SIMD operations), speeding up sorting and equality checks.\nIt's also simpler (and therefore more reliable) than a sorted set, and causes less memory fragmentation.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          181,922.54 |            5,496.85 |    0.2% |     10.98 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          997,739.30 |            1,002.27 |    1.0% |     10.94 | `DuplicateInputs`\n|            9,449.28 |          105,828.15 |    0.3% |     10.99 | `ProcessTransactionBench`\n\nCo-authored-by: Pieter Wuille <pieter@wuille.net>",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-07T19:17:59Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-18T10:54:47Z"
      },
      "sha": "30072f70a0221c250bb228f90db05734019dee7e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc4NmZkZDE3N2I2Mzg5NzY0OGEyMjdjYjNmMTE1YjAyNzc5MmNhNmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/786fdd177b63897648a227cb3f115b027792ca6f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/786fdd177b63897648a227cb3f115b027792ca6f",
      "tree": {
        "sha": "1e714d81ebdaa6e5f3a29996fb14ecc5c5e45854",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e714d81ebdaa6e5f3a29996fb14ecc5c5e45854"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1e714d81ebdaa6e5f3a29996fb14ecc5c5e45854\nparent 30072f70a0221c250bb228f90db05734019dee7e\nauthor LÅ‘rinc <pap.lorinc@gmail.com> 1737811442 +0100\ncommitter LÅ‘rinc <pap.lorinc@gmail.com> 1770491880 +0100\n\noptimization: look for Null prevouts in sorted values\n\nFor the two-input case, we simply check both inputs, as we did with equality.\n\nFor the general case, take advantage of sorting, making invalid prevout detection constant time instead of worst-case linear.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqXy8dDLWkKQdUrTAZp//D/pHenYFAmmHj+gACgkQZp//D/pH\nenb0mQ/9EL0MMl1I88PiBcdq16X9+R9wt+isY4fCiAuNX8+N5536uhZ/vvC+C9we\nWhJFxn3bJwyDfDE1dN8+N/LioECtcgCb7Vz4Njy6ByZpTj0ismr6IYI4tp12J+j8\nqyVXerz6BRaasj3HQdmw3m2pr2+NwGJuPxDvA1jbaYcctnlLnqmgjlQnjbsTP6Z4\n19ko/ygaDAl/ziMAriZavz7pC9hd8mLNV3cFvw6P4mbEDxppnpKmYl9YmcTw6VO0\nraNJEySkpWorpu5Oi0al3wM79y6eY4VYKE372QH+Piszu3PJOJiLoKdahAfhG9IX\njjmZfNt0SugR/RBRzq4p9fgwDYV8zp1c0pCJPklLhGQOMyJ7882wbTsf/GpJT4fK\nPE8uP0k9dhVuM30WRkJ2G2zrEAZ1gb1P2txbcx1LyeviQbFy/M5kmp2DEdlDgemK\nIwojU8d5o87SO7fGKV9OWGbcD7OZX5aC3m59BtlefwfVghhrsFMyTtpiNCGxtfqi\nElaNWsgrxfOTQ+Nf5rtJJiUy03rnkzCDB/oK/3fsO6n9sjS41QOL4JhTvFj2bf7F\nqRmegye4PLqZp9IjB5wH7th2O7LzAV7xqnEKSDmECQlZL+Bw8bUgy6kTfHcdDU5P\naDowK6zeGxbf9CBLSsHuXJV0JPCKSaokW0+MTHmQuaCIwzUX8Mo=\n=xCtq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/30072f70a0221c250bb228f90db05734019dee7e",
          "sha": "30072f70a0221c250bb228f90db05734019dee7e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/30072f70a0221c250bb228f90db05734019dee7e"
        }
      ],
      "message": "optimization: look for Null prevouts in sorted values\n\nFor the two-input case, we simply check both inputs, as we did with equality.\n\nFor the general case, take advantage of sorting, making invalid prevout detection constant time instead of worst-case linear.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`",
      "committer": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2026-02-07T19:18:00Z"
      },
      "author": {
        "name": "LÅ‘rinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-25T13:24:02Z"
      },
      "sha": "786fdd177b63897648a227cb3f115b027792ca6f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 22613666460,
      "node_id": "HRFPE_lADOABII586mtzVqzwAAAAVD4Sqc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22613666460",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/786fdd177b63897648a227cb3f115b027792ca6f",
      "created_at": "2026-02-07T19:19:36Z"
    },
    {
      "event": "unlabeled",
      "id": 22613881839,
      "node_id": "UNLE_lADOABII586mtzVqzwAAAAVD5HPv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22613881839",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-07T19:42:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1921118826",
      "pull_request_review_id": 2560493743,
      "id": 1921118826,
      "node_id": "PRRC_kwDOABII585ygfJq",
      "diff_hunk": "@@ -38,10 +38,16 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+    if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) [[unlikely]] return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+    } else if (tx.vin.size() >= 3) {\n+        std::vector<COutPoint> vInOutPoints;\n+        vInOutPoints.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            vInOutPoints.push_back(txin.prevout);\n+        }\n+        std::sort(vInOutPoints.begin(), vInOutPoints.end());\n+        if (std::ranges::adjacent_find(vInOutPoints) != vInOutPoints.end()) [[unlikely]] return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");",
      "path": "src/consensus/tx_check.cpp",
      "position": 1,
      "original_position": 17,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "0fae6e9615934bd5dd8837fc162133da78127dd7",
      "in_reply_to_id": null,
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I just reviewed this code and it looks okay to me. However, this is consensus related code and an optimization had caused [CVE-2018-17144](https://bitcoincore.org/en/2018/09/20/notice/) so regular contributors might know better.",
      "created_at": "2025-01-18T18:01:01Z",
      "updated_at": "2025-07-31T19:15:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1921118826",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1921118826"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": 41,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923995451",
      "pull_request_review_id": 2565081559,
      "id": 1923995451,
      "node_id": "PRRC_kwDOABII585yrdc7",
      "diff_hunk": "@@ -38,10 +38,17 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) [[unlikely]] {",
      "path": "src/consensus/tx_check.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "093b3b49c23c7018dc1885ffac0e044cb1e06d6e",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> to allow the compiler to optimize for the case where paths of execution including that statement are less likely than _**any alternative path**_ of execution that does not include such a statement\r\n\r\nSee here for why this is probably a bad idea: https://blog.aaronballman.com/2020/08/dont-use-the-likely-or-unlikely-attributes/\r\n\r\n\r\ntl;dr: It's impl-defined whether or not this makes the parent `if(tx.vin.size() == 2)` unlikely as well.",
      "created_at": "2025-01-21T16:04:41Z",
      "updated_at": "2025-01-21T16:16:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1923995451",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923995451"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924065290",
      "pull_request_review_id": 2565196330,
      "id": 1924065290,
      "node_id": "PRRC_kwDOABII585yrugK",
      "diff_hunk": "@@ -38,10 +38,17 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) [[unlikely]] {",
      "path": "src/consensus/tx_check.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "093b3b49c23c7018dc1885ffac0e044cb1e06d6e",
      "in_reply_to_id": 1923995451,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for the context!\r\n~Do you think it makes sense to update that here, or should I just close the PR and leave https://github.com/bitcoin/bitcoin/pull/31699 as a follow-up?~",
      "created_at": "2025-01-21T16:48:40Z",
      "updated_at": "2025-01-22T09:54:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1924065290",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924065290"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1925006647",
      "pull_request_review_id": 2566686750,
      "id": 1925006647,
      "node_id": "PRRC_kwDOABII585yvUU3",
      "diff_hunk": "@@ -38,10 +38,17 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) [[unlikely]] {",
      "path": "src/consensus/tx_check.cpp",
      "position": 1,
      "original_position": 8,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "093b3b49c23c7018dc1885ffac0e044cb1e06d6e",
      "in_reply_to_id": 1923995451,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed, thanks",
      "created_at": "2025-01-22T09:40:53Z",
      "updated_at": "2025-01-22T09:40:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1925006647",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1925006647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927213045",
      "pull_request_review_id": 2570273162,
      "id": 1927213045,
      "node_id": "PRRC_kwDOABII585y3u_1",
      "diff_hunk": "@@ -406,20 +406,61 @@ BOOST_AUTO_TEST_CASE(tx_oversized)\n     }\n }\n \n-BOOST_AUTO_TEST_CASE(basic_transaction_tests)\n+static CMutableTransaction CreateTransaction()\n {\n-    // Random real transaction (e2769b09e784f32f62ef849763d4f45b98e07ba658647343b915ff832b110436)\n-    unsigned char ch[] = {0x01, 0x00, 0x00, 0x00, 0x01, 0x6b, 0xff, 0x7f, 0xcd, 0x4f, 0x85, 0x65, 0xef, 0x40, 0x6d, 0xd5, 0xd6, 0x3d, 0x4f, 0xf9, 0x4f, 0x31, 0x8f, 0xe8, 0x20, 0x27, 0xfd, 0x4d, 0xc4, 0x51, 0xb0, 0x44, 0x74, 0x01, 0x9f, 0x74, 0xb4, 0x00, 0x00, 0x00, 0x00, 0x8c, 0x49, 0x30, 0x46, 0x02, 0x21, 0x00, 0xda, 0x0d, 0xc6, 0xae, 0xce, 0xfe, 0x1e, 0x06, 0xef, 0xdf, 0x05, 0x77, 0x37, 0x57, 0xde, 0xb1, 0x68, 0x82, 0x09, 0x30, 0xe3, 0xb0, 0xd0, 0x3f, 0x46, 0xf5, 0xfc, 0xf1, 0x50, 0xbf, 0x99, 0x0c, 0x02, 0x21, 0x00, 0xd2, 0x5b, 0x5c, 0x87, 0x04, 0x00, 0x76, 0xe4, 0xf2, 0x53, 0xf8, 0x26, 0x2e, 0x76, 0x3e, 0x2d, 0xd5, 0x1e, 0x7f, 0xf0, 0xbe, 0x15, 0x77, 0x27, 0xc4, 0xbc, 0x42, 0x80, 0x7f, 0x17, 0xbd, 0x39, 0x01, 0x41, 0x04, 0xe6, 0xc2, 0x6e, 0xf6, 0x7d, 0xc6, 0x10, 0xd2, 0xcd, 0x19, 0x24, 0x84, 0x78, 0x9a, 0x6c, 0xf9, 0xae, 0xa9, 0x93, 0x0b, 0x94, 0x4b, 0x7e, 0x2d, 0xb5, 0x34, 0x2b, 0x9d, 0x9e, 0x5b, 0x9f, 0xf7, 0x9a, 0xff, 0x9a, 0x2e, 0xe1, 0x97, 0x8d, 0xd7, 0xfd, 0x01, 0xdf, 0xc5, 0x22, 0xee, 0x02, 0x28, 0x3d, 0x3b, 0x06, 0xa9, 0xd0, 0x3a, 0xcf, 0x80, 0x96, 0x96, 0x8d, 0x7d, 0xbb, 0x0f, 0x91, 0x78, 0xff, 0xff, 0xff, 0xff, 0x02, 0x8b, 0xa7, 0x94, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xba, 0xde, 0xec, 0xfd, 0xef, 0x05, 0x07, 0x24, 0x7f, 0xc8, 0xf7, 0x42, 0x41, 0xd7, 0x3b, 0xc0, 0x39, 0x97, 0x2d, 0x7b, 0x88, 0xac, 0x40, 0x94, 0xa8, 0x02, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xc1, 0x09, 0x32, 0x48, 0x3f, 0xec, 0x93, 0xed, 0x51, 0xf5, 0xfe, 0x95, 0xe7, 0x25, 0x59, 0xf2, 0xcc, 0x70, 0x43, 0xf9, 0x88, 0xac, 0x00, 0x00, 0x00, 0x00, 0x00};\n-    std::vector<unsigned char> vch(ch, ch + sizeof(ch) -1);\n-    DataStream stream(vch);\n+    // Serialized random real transaction (e2769b09e784f32f62ef849763d4f45b98e07ba658647343b915ff832b110436)\n+    std::vector<unsigned char> vch{0x01, 0x00, 0x00, 0x00, 0x01, 0x6b, 0xff, 0x7f, 0xcd, 0x4f, 0x85, 0x65, 0xef, 0x40, 0x6d, 0xd5, 0xd6, 0x3d, 0x4f, 0xf9, 0x4f, 0x31, 0x8f, 0xe8, 0x20, 0x27, 0xfd, 0x4d, 0xc4, 0x51, 0xb0, 0x44, 0x74, 0x01, 0x9f, 0x74, 0xb4, 0x00, 0x00, 0x00, 0x00, 0x8c, 0x49, 0x30, 0x46, 0x02, 0x21, 0x00, 0xda, 0x0d, 0xc6, 0xae, 0xce, 0xfe, 0x1e, 0x06, 0xef, 0xdf, 0x05, 0x77, 0x37, 0x57, 0xde, 0xb1, 0x68, 0x82, 0x09, 0x30, 0xe3, 0xb0, 0xd0, 0x3f, 0x46, 0xf5, 0xfc, 0xf1, 0x50, 0xbf, 0x99, 0x0c, 0x02, 0x21, 0x00, 0xd2, 0x5b, 0x5c, 0x87, 0x04, 0x00, 0x76, 0xe4, 0xf2, 0x53, 0xf8, 0x26, 0x2e, 0x76, 0x3e, 0x2d, 0xd5, 0x1e, 0x7f, 0xf0, 0xbe, 0x15, 0x77, 0x27, 0xc4, 0xbc, 0x42, 0x80, 0x7f, 0x17, 0xbd, 0x39, 0x01, 0x41, 0x04, 0xe6, 0xc2, 0x6e, 0xf6, 0x7d, 0xc6, 0x10, 0xd2, 0xcd, 0x19, 0x24, 0x84, 0x78, 0x9a, 0x6c, 0xf9, 0xae, 0xa9, 0x93, 0x0b, 0x94, 0x4b, 0x7e, 0x2d, 0xb5, 0x34, 0x2b, 0x9d, 0x9e, 0x5b, 0x9f, 0xf7, 0x9a, 0xff, 0x9a, 0x2e, 0xe1, 0x97, 0x8d, 0xd7, 0xfd, 0x01, 0xdf, 0xc5, 0x22, 0xee, 0x02, 0x28, 0x3d, 0x3b, 0x06, 0xa9, 0xd0, 0x3a, 0xcf, 0x80, 0x96, 0x96, 0x8d, 0x7d, 0xbb, 0x0f, 0x91, 0x78, 0xff, 0xff, 0xff, 0xff, 0x02, 0x8b, 0xa7, 0x94, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xba, 0xde, 0xec, 0xfd, 0xef, 0x05, 0x07, 0x24, 0x7f, 0xc8, 0xf7, 0x42, 0x41, 0xd7, 0x3b, 0xc0, 0x39, 0x97, 0x2d, 0x7b, 0x88, 0xac, 0x40, 0x94, 0xa8, 0x02, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xc1, 0x09, 0x32, 0x48, 0x3f, 0xec, 0x93, 0xed, 0x51, 0xf5, 0xfe, 0x95, 0xe7, 0x25, 0x59, 0xf2, 0xcc, 0x70, 0x43, 0xf9, 0x88, 0xac, 0x00, 0x00, 0x00, 0x00, 0x00};",
      "path": "src/test/transaction_tests.cpp",
      "position": 1,
      "original_position": 12,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "9b855f18e0c813c0005c4df1c2561543f515d381",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This could be written more concisely now:\r\n\r\n```c++\r\nstatic CMutableTransaction CreateTransaction()\r\n{\r\n    // Serialized random real transaction (e2769b09e784f32f62ef849763d4f45b98e07ba658647343b915ff832b110436)\r\n    static constexpr auto ser_tx = \"01000000016bff7fcd4f8565ef406dd5d63d4ff94f318fe82027fd4dc451b04474019f74b4000000008c493046022100da0dc6aecefe1e06efdf05773757deb168820930e3b0d03f46f5fcf150bf990c022100d25b5c87040076e4f253f8262e763e2dd51e7ff0be157727c4bc42807f17bd39014104e6c26ef67dc610d2cd192484789a6cf9aea9930b944b7e2db5342b9d9e5b9ff79aff9a2ee1978dd7fd01dfc522ee02283d3b06a9d03acf8096968d7dbb0f9178ffffffff028ba7940e000000001976a914badeecfdef0507247fc8f74241d73bc039972d7b88ac4094a802000000001976a914c10932483fec93ed51f5fe95e72559f2cc7043f988ac0000000000\"_hex;\r\n    CMutableTransaction tx;\r\n    DataStream(ser_tx) >> TX_WITH_WITNESS(tx);\r\n    return tx;\r\n}\r\n```\r\n",
      "created_at": "2025-01-23T15:50:55Z",
      "updated_at": "2025-01-23T16:48:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927213045",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927213045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 412,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927238713",
      "pull_request_review_id": 2570273162,
      "id": 1927238713,
      "node_id": "PRRC_kwDOABII585y31Q5",
      "diff_hunk": "@@ -1048,4 +1089,116 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     CheckIsNotStandard(t, \"dust\");\n }\n \n+BOOST_AUTO_TEST_CASE(test_uint256_sorting)\n+{\n+    // Sorting\n+    std::vector original{\n+        uint256{1},\n+        uint256{2},\n+        uint256{3}\n+    };\n+\n+    std::vector shuffled{original};\n+    std::ranges::shuffle(shuffled, FastRandomContext());",
      "path": "src/test/transaction_tests.cpp",
      "position": 1,
      "original_position": 85,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "9b855f18e0c813c0005c4df1c2561543f515d381",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You can access the test context's RNG here:\r\n\r\n```c++\r\nstd::ranges::shuffle(shuffled, m_rng);\r\n```",
      "created_at": "2025-01-23T16:04:58Z",
      "updated_at": "2025-01-23T16:48:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927238713",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927238713"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927244902",
      "pull_request_review_id": 2570273162,
      "id": 1927244902,
      "node_id": "PRRC_kwDOABII585y32xm",
      "diff_hunk": "@@ -1048,4 +1089,116 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     CheckIsNotStandard(t, \"dust\");\n }\n \n+BOOST_AUTO_TEST_CASE(test_uint256_sorting)\n+{\n+    // Sorting\n+    std::vector original{\n+        uint256{1},\n+        uint256{2},\n+        uint256{3}\n+    };\n+\n+    std::vector shuffled{original};\n+    std::ranges::shuffle(shuffled, FastRandomContext());\n+    std::sort(shuffled.begin(), shuffled.end());\n+\n+    BOOST_CHECK_EQUAL_COLLECTIONS(original.begin(), original.end(), shuffled.begin(), shuffled.end());\n+\n+    // Operators\n+    constexpr auto a{uint256{1}},\n+                   b{uint256{2}},\n+                   c{uint256{3}};\n+\n+    BOOST_CHECK(a == a);\n+    BOOST_CHECK(a == uint256{1});\n+    BOOST_CHECK(b == b);\n+    BOOST_CHECK(c == c);\n+    BOOST_CHECK(a != b);\n+    BOOST_CHECK(a != uint256{10});\n+    BOOST_CHECK(a != c);\n+    BOOST_CHECK(b != c);\n+\n+    BOOST_CHECK(a < b);\n+    BOOST_CHECK(a < uint256{10});\n+    BOOST_CHECK(b < c);\n+    BOOST_CHECK(a < c);\n+}\n+\n+BOOST_AUTO_TEST_CASE(test_transaction_identifier_sorting)\n+{\n+    std::vector original{\n+        Txid::FromUint256(uint256{1}),\n+        Txid::FromUint256(uint256{2}),\n+        Txid::FromUint256(uint256{3})\n+    };\n+\n+    std::vector shuffled{original};\n+    std::ranges::shuffle(shuffled, FastRandomContext());",
      "path": "src/test/transaction_tests.cpp",
      "position": 1,
      "original_position": 119,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "9b855f18e0c813c0005c4df1c2561543f515d381",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Same here,\r\n\r\n```c++\r\nstd::ranges::shuffle(shuffled, m_rng);\r\n```",
      "created_at": "2025-01-23T16:08:29Z",
      "updated_at": "2025-01-23T16:48:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927244902",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927244902"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927252674",
      "pull_request_review_id": 2570273162,
      "id": 1927252674,
      "node_id": "PRRC_kwDOABII585y34rC",
      "diff_hunk": "@@ -126,5 +135,53 @@ static void MempoolCheck(benchmark::Bench& bench)\n     });\n }\n \n+static void ProcessTransactionBench(benchmark::Bench& bench)\n+{\n+    const auto testing_setup{MakeNoLogFileContext<const TestingSetup>()};\n+    CTxMemPool& pool{*Assert(testing_setup->m_node.mempool)};\n+    ChainstateManager& chainman{*testing_setup->m_node.chainman};\n+\n+    CBlock block;\n+    DataStream(benchmark::data::block413567) >> TX_WITH_WITNESS(block);\n+\n+    std::vector<CTransactionRef> txs(block.vtx.size() - 1);\n+    for (size_t i{1}; i < block.vtx.size(); ++i) {\n+        CMutableTransaction mtx{*block.vtx[i]};\n+        for (auto& txin : mtx.vin) {\n+            txin.nSequence = CTxIn::SEQUENCE_FINAL;\n+            txin.scriptSig.clear();\n+            txin.scriptWitness.stack = {WITNESS_STACK_ELEM_OP_TRUE};\n+        }\n+        txs[i - 1] = MakeTransactionRef(std::move(mtx));\n+    }\n+\n+    CCoinsViewCache* coins_tip{nullptr};\n+    size_t cached_coin_count{0};\n+    {\n+        LOCK(cs_main);\n+        coins_tip = &chainman.ActiveChainstate().CoinsTip();\n+        for (const auto& tx : txs) {\n+            const Coin coin(CTxOut(2 * tx->GetValueOut(), P2WSH_OP_TRUE), 1, /*fCoinBaseIn=*/false);\n+            for (const auto& in : tx->vin) {\n+                coins_tip->AddCoin(in.prevout, Coin{coin}, /*possible_overwrite=*/false);\n+                cached_coin_count++;\n+            }\n+        }\n+    }\n+\n+    bench.batch(txs.size()).run([&] {\n+        LOCK2(cs_main, pool.cs);\n+        assert(coins_tip->GetCacheSize() == cached_coin_count);\n+        for (const auto& tx : txs) pool.removeRecursive(*tx, MemPoolRemovalReason::REPLACED);\n+        assert(pool.size() == 0);\n+\n+        for (const auto& tx : txs) {\n+            const auto res{chainman.ProcessTransaction(tx, /*test_accept=*/true)};\n+            assert(res.m_result_type == MempoolAcceptResult::ResultType::VALID);\n+        }\n+    });\n+}\n+\n BENCHMARK(ComplexMemPool, benchmark::PriorityLevel::HIGH);\n BENCHMARK(MempoolCheck, benchmark::PriorityLevel::HIGH);\n+BENCHMARK(ProcessTransactionBench, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/mempool_stress.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "323a00338dbe0fa11f026deebfc59b42f8ad3d7c",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: newline at end of file",
      "created_at": "2025-01-23T16:12:59Z",
      "updated_at": "2025-01-23T16:48:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927252674",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927252674"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 187,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927263208",
      "pull_request_review_id": 2570273162,
      "id": 1927263208,
      "node_id": "PRRC_kwDOABII585y37Po",
      "diff_hunk": "@@ -1,79 +0,0 @@\n-// Copyright (c) 2011-2022 The Bitcoin Core developers\n-// Distributed under the MIT software license, see the accompanying\n-// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n-\n-#include <bench/bench.h>\n-#include <chain.h>\n-#include <chainparams.h>\n-#include <consensus/consensus.h>\n-#include <consensus/merkle.h>\n-#include <consensus/validation.h>\n-#include <pow.h>\n-#include <primitives/block.h>\n-#include <primitives/transaction.h>\n-#include <random.h>\n-#include <script/script.h>\n-#include <sync.h>\n-#include <test/util/setup_common.h>\n-#include <uint256.h>\n-#include <validation.h>\n-\n-#include <cassert>\n-#include <cstdint>\n-#include <memory>\n-#include <string>\n-#include <utility>\n-#include <vector>\n-\n-\n-static void DuplicateInputs(benchmark::Bench& bench)\n-{\n-    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n-\n-    const CScript SCRIPT_PUB{CScript(OP_TRUE)};\n-\n-    const CChainParams& chainparams = Params();\n-\n-    CBlock block{};\n-    CMutableTransaction coinbaseTx{};\n-    CMutableTransaction naughtyTx{};\n-\n-    LOCK(cs_main);\n-    CBlockIndex* pindexPrev = testing_setup->m_node.chainman->ActiveChain().Tip();\n-    assert(pindexPrev != nullptr);\n-    block.nBits = GetNextWorkRequired(pindexPrev, &block, chainparams.GetConsensus());\n-    block.nNonce = 0;\n-    auto nHeight = pindexPrev->nHeight + 1;\n-\n-    // Make a coinbase TX\n-    coinbaseTx.vin.resize(1);\n-    coinbaseTx.vin[0].prevout.SetNull();\n-    coinbaseTx.vout.resize(1);\n-    coinbaseTx.vout[0].scriptPubKey = SCRIPT_PUB;\n-    coinbaseTx.vout[0].nValue = GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n-    coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n-\n-\n-    naughtyTx.vout.resize(1);\n-    naughtyTx.vout[0].nValue = 0;\n-    naughtyTx.vout[0].scriptPubKey = SCRIPT_PUB;\n-\n-    uint64_t n_inputs = (((MAX_BLOCK_SERIALIZED_SIZE / WITNESS_SCALE_FACTOR) - (CTransaction(coinbaseTx).GetTotalSize() + CTransaction(naughtyTx).GetTotalSize())) / 41) - 100;\n-    for (uint64_t x = 0; x < (n_inputs - 1); ++x) {\n-        naughtyTx.vin.emplace_back(Txid::FromUint256(GetRandHash()), 0, CScript(), 0);\n-    }\n-    naughtyTx.vin.emplace_back(naughtyTx.vin.back());\n-\n-    block.vtx.push_back(MakeTransactionRef(std::move(coinbaseTx)));\n-    block.vtx.push_back(MakeTransactionRef(std::move(naughtyTx)));\n-\n-    block.hashMerkleRoot = BlockMerkleRoot(block);\n-\n-    bench.run([&] {\n-        BlockValidationState cvstate{};\n-        assert(!CheckBlock(block, cvstate, chainparams.GetConsensus(), false, false));\n-        assert(cvstate.GetRejectReason() == \"bad-txns-inputs-duplicate\");\n-    });\n-}\n-\n-BENCHMARK(DuplicateInputs, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/duplicate_inputs.cpp",
      "position": 1,
      "original_position": 79,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "323a00338dbe0fa11f026deebfc59b42f8ad3d7c",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Adding a new, more high-level, benchmark is great, but I don't see why you'd delete the existing benchmark?",
      "created_at": "2025-01-23T16:17:26Z",
      "updated_at": "2025-01-23T16:48:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927263208",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927263208"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393219",
      "pull_request_review_id": 2570560883,
      "id": 1927393219,
      "node_id": "PRRC_kwDOABII585y4a_D",
      "diff_hunk": "@@ -1,79 +0,0 @@\n-// Copyright (c) 2011-2022 The Bitcoin Core developers\n-// Distributed under the MIT software license, see the accompanying\n-// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n-\n-#include <bench/bench.h>\n-#include <chain.h>\n-#include <chainparams.h>\n-#include <consensus/consensus.h>\n-#include <consensus/merkle.h>\n-#include <consensus/validation.h>\n-#include <pow.h>\n-#include <primitives/block.h>\n-#include <primitives/transaction.h>\n-#include <random.h>\n-#include <script/script.h>\n-#include <sync.h>\n-#include <test/util/setup_common.h>\n-#include <uint256.h>\n-#include <validation.h>\n-\n-#include <cassert>\n-#include <cstdint>\n-#include <memory>\n-#include <string>\n-#include <utility>\n-#include <vector>\n-\n-\n-static void DuplicateInputs(benchmark::Bench& bench)\n-{\n-    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n-\n-    const CScript SCRIPT_PUB{CScript(OP_TRUE)};\n-\n-    const CChainParams& chainparams = Params();\n-\n-    CBlock block{};\n-    CMutableTransaction coinbaseTx{};\n-    CMutableTransaction naughtyTx{};\n-\n-    LOCK(cs_main);\n-    CBlockIndex* pindexPrev = testing_setup->m_node.chainman->ActiveChain().Tip();\n-    assert(pindexPrev != nullptr);\n-    block.nBits = GetNextWorkRequired(pindexPrev, &block, chainparams.GetConsensus());\n-    block.nNonce = 0;\n-    auto nHeight = pindexPrev->nHeight + 1;\n-\n-    // Make a coinbase TX\n-    coinbaseTx.vin.resize(1);\n-    coinbaseTx.vin[0].prevout.SetNull();\n-    coinbaseTx.vout.resize(1);\n-    coinbaseTx.vout[0].scriptPubKey = SCRIPT_PUB;\n-    coinbaseTx.vout[0].nValue = GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n-    coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n-\n-\n-    naughtyTx.vout.resize(1);\n-    naughtyTx.vout[0].nValue = 0;\n-    naughtyTx.vout[0].scriptPubKey = SCRIPT_PUB;\n-\n-    uint64_t n_inputs = (((MAX_BLOCK_SERIALIZED_SIZE / WITNESS_SCALE_FACTOR) - (CTransaction(coinbaseTx).GetTotalSize() + CTransaction(naughtyTx).GetTotalSize())) / 41) - 100;\n-    for (uint64_t x = 0; x < (n_inputs - 1); ++x) {\n-        naughtyTx.vin.emplace_back(Txid::FromUint256(GetRandHash()), 0, CScript(), 0);\n-    }\n-    naughtyTx.vin.emplace_back(naughtyTx.vin.back());\n-\n-    block.vtx.push_back(MakeTransactionRef(std::move(coinbaseTx)));\n-    block.vtx.push_back(MakeTransactionRef(std::move(naughtyTx)));\n-\n-    block.hashMerkleRoot = BlockMerkleRoot(block);\n-\n-    bench.run([&] {\n-        BlockValidationState cvstate{};\n-        assert(!CheckBlock(block, cvstate, chainparams.GetConsensus(), false, false));\n-        assert(cvstate.GetRejectReason() == \"bad-txns-inputs-duplicate\");\n-    });\n-}\n-\n-BENCHMARK(DuplicateInputs, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/duplicate_inputs.cpp",
      "position": 1,
      "original_position": 79,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "323a00338dbe0fa11f026deebfc59b42f8ad3d7c",
      "in_reply_to_id": 1927263208,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It was suggested that these may be too low level and may be misleading (distract us from real bottlenecks) - I've [restored](https://github.com/bitcoin/bitcoin/compare/0a40b8c8a09344c1ef9167be2f357da7a551d65d..518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8#diff-547fa26a77a99ccd77aca7ce1c69c0544666f788d463dc7bff664001f9ff1c88R42-R53) [them](https://github.com/bitcoin/bitcoin/compare/0a40b8c8a09344c1ef9167be2f357da7a551d65d..518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8#diff-8b5eb5b1ae0470483dd6f65003f44bbd1b8403af91a455c92d495e1310f12e89) so that reviewers can decide",
      "created_at": "2025-01-23T17:29:28Z",
      "updated_at": "2025-01-23T17:32:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927393219",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393219"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393426",
      "pull_request_review_id": 2570561082,
      "id": 1927393426,
      "node_id": "PRRC_kwDOABII585y4bCS",
      "diff_hunk": "@@ -126,5 +135,53 @@ static void MempoolCheck(benchmark::Bench& bench)\n     });\n }\n \n+static void ProcessTransactionBench(benchmark::Bench& bench)\n+{\n+    const auto testing_setup{MakeNoLogFileContext<const TestingSetup>()};\n+    CTxMemPool& pool{*Assert(testing_setup->m_node.mempool)};\n+    ChainstateManager& chainman{*testing_setup->m_node.chainman};\n+\n+    CBlock block;\n+    DataStream(benchmark::data::block413567) >> TX_WITH_WITNESS(block);\n+\n+    std::vector<CTransactionRef> txs(block.vtx.size() - 1);\n+    for (size_t i{1}; i < block.vtx.size(); ++i) {\n+        CMutableTransaction mtx{*block.vtx[i]};\n+        for (auto& txin : mtx.vin) {\n+            txin.nSequence = CTxIn::SEQUENCE_FINAL;\n+            txin.scriptSig.clear();\n+            txin.scriptWitness.stack = {WITNESS_STACK_ELEM_OP_TRUE};\n+        }\n+        txs[i - 1] = MakeTransactionRef(std::move(mtx));\n+    }\n+\n+    CCoinsViewCache* coins_tip{nullptr};\n+    size_t cached_coin_count{0};\n+    {\n+        LOCK(cs_main);\n+        coins_tip = &chainman.ActiveChainstate().CoinsTip();\n+        for (const auto& tx : txs) {\n+            const Coin coin(CTxOut(2 * tx->GetValueOut(), P2WSH_OP_TRUE), 1, /*fCoinBaseIn=*/false);\n+            for (const auto& in : tx->vin) {\n+                coins_tip->AddCoin(in.prevout, Coin{coin}, /*possible_overwrite=*/false);\n+                cached_coin_count++;\n+            }\n+        }\n+    }\n+\n+    bench.batch(txs.size()).run([&] {\n+        LOCK2(cs_main, pool.cs);\n+        assert(coins_tip->GetCacheSize() == cached_coin_count);\n+        for (const auto& tx : txs) pool.removeRecursive(*tx, MemPoolRemovalReason::REPLACED);\n+        assert(pool.size() == 0);\n+\n+        for (const auto& tx : txs) {\n+            const auto res{chainman.ProcessTransaction(tx, /*test_accept=*/true)};\n+            assert(res.m_result_type == MempoolAcceptResult::ResultType::VALID);\n+        }\n+    });\n+}\n+\n BENCHMARK(ComplexMemPool, benchmark::PriorityLevel::HIGH);\n BENCHMARK(MempoolCheck, benchmark::PriorityLevel::HIGH);\n+BENCHMARK(ProcessTransactionBench, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/mempool_stress.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "323a00338dbe0fa11f026deebfc59b42f8ad3d7c",
      "in_reply_to_id": 1927252674,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done ",
      "created_at": "2025-01-23T17:29:30Z",
      "updated_at": "2025-01-23T17:29:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927393426",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393426"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 187,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393563",
      "pull_request_review_id": 2570561247,
      "id": 1927393563,
      "node_id": "PRRC_kwDOABII585y4bEb",
      "diff_hunk": "@@ -1048,4 +1089,116 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     CheckIsNotStandard(t, \"dust\");\n }\n \n+BOOST_AUTO_TEST_CASE(test_uint256_sorting)\n+{\n+    // Sorting\n+    std::vector original{\n+        uint256{1},\n+        uint256{2},\n+        uint256{3}\n+    };\n+\n+    std::vector shuffled{original};\n+    std::ranges::shuffle(shuffled, FastRandomContext());\n+    std::sort(shuffled.begin(), shuffled.end());\n+\n+    BOOST_CHECK_EQUAL_COLLECTIONS(original.begin(), original.end(), shuffled.begin(), shuffled.end());\n+\n+    // Operators\n+    constexpr auto a{uint256{1}},\n+                   b{uint256{2}},\n+                   c{uint256{3}};\n+\n+    BOOST_CHECK(a == a);\n+    BOOST_CHECK(a == uint256{1});\n+    BOOST_CHECK(b == b);\n+    BOOST_CHECK(c == c);\n+    BOOST_CHECK(a != b);\n+    BOOST_CHECK(a != uint256{10});\n+    BOOST_CHECK(a != c);\n+    BOOST_CHECK(b != c);\n+\n+    BOOST_CHECK(a < b);\n+    BOOST_CHECK(a < uint256{10});\n+    BOOST_CHECK(b < c);\n+    BOOST_CHECK(a < c);\n+}\n+\n+BOOST_AUTO_TEST_CASE(test_transaction_identifier_sorting)\n+{\n+    std::vector original{\n+        Txid::FromUint256(uint256{1}),\n+        Txid::FromUint256(uint256{2}),\n+        Txid::FromUint256(uint256{3})\n+    };\n+\n+    std::vector shuffled{original};\n+    std::ranges::shuffle(shuffled, FastRandomContext());",
      "path": "src/test/transaction_tests.cpp",
      "position": 1,
      "original_position": 119,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "9b855f18e0c813c0005c4df1c2561543f515d381",
      "in_reply_to_id": 1927244902,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "[Done](https://github.com/bitcoin/bitcoin/compare/0a40b8c8a09344c1ef9167be2f357da7a551d65d..518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8#diff-cc0c6a9039a1c9fe38b8a21fe28391fffbac9b8531dfda0f658919a9f74b46baR1112-R1189)",
      "created_at": "2025-01-23T17:29:32Z",
      "updated_at": "2025-01-23T17:31:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927393563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393678",
      "pull_request_review_id": 2570561383,
      "id": 1927393678,
      "node_id": "PRRC_kwDOABII585y4bGO",
      "diff_hunk": "@@ -1048,4 +1089,116 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     CheckIsNotStandard(t, \"dust\");\n }\n \n+BOOST_AUTO_TEST_CASE(test_uint256_sorting)\n+{\n+    // Sorting\n+    std::vector original{\n+        uint256{1},\n+        uint256{2},\n+        uint256{3}\n+    };\n+\n+    std::vector shuffled{original};\n+    std::ranges::shuffle(shuffled, FastRandomContext());",
      "path": "src/test/transaction_tests.cpp",
      "position": 1,
      "original_position": 85,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "9b855f18e0c813c0005c4df1c2561543f515d381",
      "in_reply_to_id": 1927238713,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "[Done](https://github.com/bitcoin/bitcoin/compare/0a40b8c8a09344c1ef9167be2f357da7a551d65d..518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8#diff-cc0c6a9039a1c9fe38b8a21fe28391fffbac9b8531dfda0f658919a9f74b46baR1112-R1189)",
      "created_at": "2025-01-23T17:29:34Z",
      "updated_at": "2025-01-23T17:31:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927393678",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393678"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393799",
      "pull_request_review_id": 2570561537,
      "id": 1927393799,
      "node_id": "PRRC_kwDOABII585y4bIH",
      "diff_hunk": "@@ -406,20 +406,61 @@ BOOST_AUTO_TEST_CASE(tx_oversized)\n     }\n }\n \n-BOOST_AUTO_TEST_CASE(basic_transaction_tests)\n+static CMutableTransaction CreateTransaction()\n {\n-    // Random real transaction (e2769b09e784f32f62ef849763d4f45b98e07ba658647343b915ff832b110436)\n-    unsigned char ch[] = {0x01, 0x00, 0x00, 0x00, 0x01, 0x6b, 0xff, 0x7f, 0xcd, 0x4f, 0x85, 0x65, 0xef, 0x40, 0x6d, 0xd5, 0xd6, 0x3d, 0x4f, 0xf9, 0x4f, 0x31, 0x8f, 0xe8, 0x20, 0x27, 0xfd, 0x4d, 0xc4, 0x51, 0xb0, 0x44, 0x74, 0x01, 0x9f, 0x74, 0xb4, 0x00, 0x00, 0x00, 0x00, 0x8c, 0x49, 0x30, 0x46, 0x02, 0x21, 0x00, 0xda, 0x0d, 0xc6, 0xae, 0xce, 0xfe, 0x1e, 0x06, 0xef, 0xdf, 0x05, 0x77, 0x37, 0x57, 0xde, 0xb1, 0x68, 0x82, 0x09, 0x30, 0xe3, 0xb0, 0xd0, 0x3f, 0x46, 0xf5, 0xfc, 0xf1, 0x50, 0xbf, 0x99, 0x0c, 0x02, 0x21, 0x00, 0xd2, 0x5b, 0x5c, 0x87, 0x04, 0x00, 0x76, 0xe4, 0xf2, 0x53, 0xf8, 0x26, 0x2e, 0x76, 0x3e, 0x2d, 0xd5, 0x1e, 0x7f, 0xf0, 0xbe, 0x15, 0x77, 0x27, 0xc4, 0xbc, 0x42, 0x80, 0x7f, 0x17, 0xbd, 0x39, 0x01, 0x41, 0x04, 0xe6, 0xc2, 0x6e, 0xf6, 0x7d, 0xc6, 0x10, 0xd2, 0xcd, 0x19, 0x24, 0x84, 0x78, 0x9a, 0x6c, 0xf9, 0xae, 0xa9, 0x93, 0x0b, 0x94, 0x4b, 0x7e, 0x2d, 0xb5, 0x34, 0x2b, 0x9d, 0x9e, 0x5b, 0x9f, 0xf7, 0x9a, 0xff, 0x9a, 0x2e, 0xe1, 0x97, 0x8d, 0xd7, 0xfd, 0x01, 0xdf, 0xc5, 0x22, 0xee, 0x02, 0x28, 0x3d, 0x3b, 0x06, 0xa9, 0xd0, 0x3a, 0xcf, 0x80, 0x96, 0x96, 0x8d, 0x7d, 0xbb, 0x0f, 0x91, 0x78, 0xff, 0xff, 0xff, 0xff, 0x02, 0x8b, 0xa7, 0x94, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xba, 0xde, 0xec, 0xfd, 0xef, 0x05, 0x07, 0x24, 0x7f, 0xc8, 0xf7, 0x42, 0x41, 0xd7, 0x3b, 0xc0, 0x39, 0x97, 0x2d, 0x7b, 0x88, 0xac, 0x40, 0x94, 0xa8, 0x02, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xc1, 0x09, 0x32, 0x48, 0x3f, 0xec, 0x93, 0xed, 0x51, 0xf5, 0xfe, 0x95, 0xe7, 0x25, 0x59, 0xf2, 0xcc, 0x70, 0x43, 0xf9, 0x88, 0xac, 0x00, 0x00, 0x00, 0x00, 0x00};\n-    std::vector<unsigned char> vch(ch, ch + sizeof(ch) -1);\n-    DataStream stream(vch);\n+    // Serialized random real transaction (e2769b09e784f32f62ef849763d4f45b98e07ba658647343b915ff832b110436)\n+    std::vector<unsigned char> vch{0x01, 0x00, 0x00, 0x00, 0x01, 0x6b, 0xff, 0x7f, 0xcd, 0x4f, 0x85, 0x65, 0xef, 0x40, 0x6d, 0xd5, 0xd6, 0x3d, 0x4f, 0xf9, 0x4f, 0x31, 0x8f, 0xe8, 0x20, 0x27, 0xfd, 0x4d, 0xc4, 0x51, 0xb0, 0x44, 0x74, 0x01, 0x9f, 0x74, 0xb4, 0x00, 0x00, 0x00, 0x00, 0x8c, 0x49, 0x30, 0x46, 0x02, 0x21, 0x00, 0xda, 0x0d, 0xc6, 0xae, 0xce, 0xfe, 0x1e, 0x06, 0xef, 0xdf, 0x05, 0x77, 0x37, 0x57, 0xde, 0xb1, 0x68, 0x82, 0x09, 0x30, 0xe3, 0xb0, 0xd0, 0x3f, 0x46, 0xf5, 0xfc, 0xf1, 0x50, 0xbf, 0x99, 0x0c, 0x02, 0x21, 0x00, 0xd2, 0x5b, 0x5c, 0x87, 0x04, 0x00, 0x76, 0xe4, 0xf2, 0x53, 0xf8, 0x26, 0x2e, 0x76, 0x3e, 0x2d, 0xd5, 0x1e, 0x7f, 0xf0, 0xbe, 0x15, 0x77, 0x27, 0xc4, 0xbc, 0x42, 0x80, 0x7f, 0x17, 0xbd, 0x39, 0x01, 0x41, 0x04, 0xe6, 0xc2, 0x6e, 0xf6, 0x7d, 0xc6, 0x10, 0xd2, 0xcd, 0x19, 0x24, 0x84, 0x78, 0x9a, 0x6c, 0xf9, 0xae, 0xa9, 0x93, 0x0b, 0x94, 0x4b, 0x7e, 0x2d, 0xb5, 0x34, 0x2b, 0x9d, 0x9e, 0x5b, 0x9f, 0xf7, 0x9a, 0xff, 0x9a, 0x2e, 0xe1, 0x97, 0x8d, 0xd7, 0xfd, 0x01, 0xdf, 0xc5, 0x22, 0xee, 0x02, 0x28, 0x3d, 0x3b, 0x06, 0xa9, 0xd0, 0x3a, 0xcf, 0x80, 0x96, 0x96, 0x8d, 0x7d, 0xbb, 0x0f, 0x91, 0x78, 0xff, 0xff, 0xff, 0xff, 0x02, 0x8b, 0xa7, 0x94, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xba, 0xde, 0xec, 0xfd, 0xef, 0x05, 0x07, 0x24, 0x7f, 0xc8, 0xf7, 0x42, 0x41, 0xd7, 0x3b, 0xc0, 0x39, 0x97, 0x2d, 0x7b, 0x88, 0xac, 0x40, 0x94, 0xa8, 0x02, 0x00, 0x00, 0x00, 0x00, 0x19, 0x76, 0xa9, 0x14, 0xc1, 0x09, 0x32, 0x48, 0x3f, 0xec, 0x93, 0xed, 0x51, 0xf5, 0xfe, 0x95, 0xe7, 0x25, 0x59, 0xf2, 0xcc, 0x70, 0x43, 0xf9, 0x88, 0xac, 0x00, 0x00, 0x00, 0x00, 0x00};",
      "path": "src/test/transaction_tests.cpp",
      "position": 1,
      "original_position": 12,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "9b855f18e0c813c0005c4df1c2561543f515d381",
      "in_reply_to_id": 1927213045,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "[Done](https://github.com/bitcoin/bitcoin/compare/0a40b8c8a09344c1ef9167be2f357da7a551d65d..518b8b2ba6bff1a3b87e5571e6d0b3cd0a2a97b8#diff-cc0c6a9039a1c9fe38b8a21fe28391fffbac9b8531dfda0f658919a9f74b46baL412)",
      "created_at": "2025-01-23T17:29:36Z",
      "updated_at": "2025-01-23T17:31:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927393799",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927393799"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 412,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927396535",
      "pull_request_review_id": 2570565302,
      "id": 1927396535,
      "node_id": "PRRC_kwDOABII585y4by3",
      "diff_hunk": "@@ -1,79 +0,0 @@\n-// Copyright (c) 2011-2022 The Bitcoin Core developers\n-// Distributed under the MIT software license, see the accompanying\n-// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n-\n-#include <bench/bench.h>\n-#include <chain.h>\n-#include <chainparams.h>\n-#include <consensus/consensus.h>\n-#include <consensus/merkle.h>\n-#include <consensus/validation.h>\n-#include <pow.h>\n-#include <primitives/block.h>\n-#include <primitives/transaction.h>\n-#include <random.h>\n-#include <script/script.h>\n-#include <sync.h>\n-#include <test/util/setup_common.h>\n-#include <uint256.h>\n-#include <validation.h>\n-\n-#include <cassert>\n-#include <cstdint>\n-#include <memory>\n-#include <string>\n-#include <utility>\n-#include <vector>\n-\n-\n-static void DuplicateInputs(benchmark::Bench& bench)\n-{\n-    const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n-\n-    const CScript SCRIPT_PUB{CScript(OP_TRUE)};\n-\n-    const CChainParams& chainparams = Params();\n-\n-    CBlock block{};\n-    CMutableTransaction coinbaseTx{};\n-    CMutableTransaction naughtyTx{};\n-\n-    LOCK(cs_main);\n-    CBlockIndex* pindexPrev = testing_setup->m_node.chainman->ActiveChain().Tip();\n-    assert(pindexPrev != nullptr);\n-    block.nBits = GetNextWorkRequired(pindexPrev, &block, chainparams.GetConsensus());\n-    block.nNonce = 0;\n-    auto nHeight = pindexPrev->nHeight + 1;\n-\n-    // Make a coinbase TX\n-    coinbaseTx.vin.resize(1);\n-    coinbaseTx.vin[0].prevout.SetNull();\n-    coinbaseTx.vout.resize(1);\n-    coinbaseTx.vout[0].scriptPubKey = SCRIPT_PUB;\n-    coinbaseTx.vout[0].nValue = GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n-    coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n-\n-\n-    naughtyTx.vout.resize(1);\n-    naughtyTx.vout[0].nValue = 0;\n-    naughtyTx.vout[0].scriptPubKey = SCRIPT_PUB;\n-\n-    uint64_t n_inputs = (((MAX_BLOCK_SERIALIZED_SIZE / WITNESS_SCALE_FACTOR) - (CTransaction(coinbaseTx).GetTotalSize() + CTransaction(naughtyTx).GetTotalSize())) / 41) - 100;\n-    for (uint64_t x = 0; x < (n_inputs - 1); ++x) {\n-        naughtyTx.vin.emplace_back(Txid::FromUint256(GetRandHash()), 0, CScript(), 0);\n-    }\n-    naughtyTx.vin.emplace_back(naughtyTx.vin.back());\n-\n-    block.vtx.push_back(MakeTransactionRef(std::move(coinbaseTx)));\n-    block.vtx.push_back(MakeTransactionRef(std::move(naughtyTx)));\n-\n-    block.hashMerkleRoot = BlockMerkleRoot(block);\n-\n-    bench.run([&] {\n-        BlockValidationState cvstate{};\n-        assert(!CheckBlock(block, cvstate, chainparams.GetConsensus(), false, false));\n-        assert(cvstate.GetRejectReason() == \"bad-txns-inputs-duplicate\");\n-    });\n-}\n-\n-BENCHMARK(DuplicateInputs, benchmark::PriorityLevel::HIGH);",
      "path": "src/bench/duplicate_inputs.cpp",
      "position": 1,
      "original_position": 79,
      "commit_id": "d28302fa2c09c2eac3daad7116dc9812fe01928b",
      "original_commit_id": "323a00338dbe0fa11f026deebfc59b42f8ad3d7c",
      "in_reply_to_id": 1927263208,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If so, I disagree with that argument. The presence of a benchmark does not imply it's somehow a prioritized target for optimization. It's useful as-is in order to not accidentally introduce performance regressions too.",
      "created_at": "2025-01-23T17:31:01Z",
      "updated_at": "2025-01-23T17:31:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1927396535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1927396535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 79,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931324152",
      "pull_request_review_id": 2576769678,
      "id": 1931324152,
      "node_id": "PRRC_kwDOABII585zHar4",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning\n+            if (in.IsNull()) {\n                 return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+            }\n+        }",
      "path": "src/consensus/tx_check.cpp",
      "position": 46,
      "original_position": 46,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": null,
      "user": {
        "login": "jasonribble",
        "id": 80722374,
        "node_id": "MDQ6VXNlcjgwNzIyMzc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/80722374?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jasonribble",
        "html_url": "https://github.com/jasonribble",
        "followers_url": "https://api.github.com/users/jasonribble/followers",
        "following_url": "https://api.github.com/users/jasonribble/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jasonribble/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jasonribble/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jasonribble/subscriptions",
        "organizations_url": "https://api.github.com/users/jasonribble/orgs",
        "repos_url": "https://api.github.com/users/jasonribble/repos",
        "events_url": "https://api.github.com/users/jasonribble/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jasonribble/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Is `in` a common variable naming in C/C++ or Bitcoin? Not sure what it is without digging into other code",
      "created_at": "2025-01-27T23:38:45Z",
      "updated_at": "2025-01-27T23:38:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1931324152",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931324152"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": 65,
      "original_start_line": 65,
      "start_side": "RIGHT",
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931784521",
      "pull_request_review_id": 2577550777,
      "id": 1931784521,
      "node_id": "PRRC_kwDOABII585zJLFJ",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning\n+            if (in.IsNull()) {\n                 return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+            }\n+        }",
      "path": "src/consensus/tx_check.cpp",
      "position": 46,
      "original_position": 46,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1931324152,
      "user": {
        "login": "jmoik",
        "id": 63734881,
        "node_id": "MDQ6VXNlcjYzNzM0ODgx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63734881?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jmoik",
        "html_url": "https://github.com/jmoik",
        "followers_url": "https://api.github.com/users/jmoik/followers",
        "following_url": "https://api.github.com/users/jmoik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jmoik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jmoik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jmoik/subscriptions",
        "organizations_url": "https://api.github.com/users/jmoik/orgs",
        "repos_url": "https://api.github.com/users/jmoik/repos",
        "events_url": "https://api.github.com/users/jmoik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jmoik/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I also think it's bad naming, especially because it's used as a keyword in other languages.",
      "created_at": "2025-01-28T09:11:10Z",
      "updated_at": "2025-01-28T09:11:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1931784521",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931784521"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": 65,
      "original_start_line": 65,
      "start_side": "RIGHT",
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1932347912",
      "pull_request_review_id": 2578570756,
      "id": 1932347912,
      "node_id": "PRRC_kwDOABII585zLUoI",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning\n+            if (in.IsNull()) {\n                 return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+            }\n+        }",
      "path": "src/consensus/tx_check.cpp",
      "position": 46,
      "original_position": 46,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1931324152,
      "user": {
        "login": "jasonribble",
        "id": 80722374,
        "node_id": "MDQ6VXNlcjgwNzIyMzc0",
        "avatar_url": "https://avatars.githubusercontent.com/u/80722374?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jasonribble",
        "html_url": "https://github.com/jasonribble",
        "followers_url": "https://api.github.com/users/jasonribble/followers",
        "following_url": "https://api.github.com/users/jasonribble/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jasonribble/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jasonribble/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jasonribble/subscriptions",
        "organizations_url": "https://api.github.com/users/jasonribble/orgs",
        "repos_url": "https://api.github.com/users/jasonribble/repos",
        "events_url": "https://api.github.com/users/jasonribble/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jasonribble/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "100% agree.  @l0rinc what do you think?",
      "created_at": "2025-01-28T15:08:17Z",
      "updated_at": "2025-01-28T15:08:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1932347912",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1932347912"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": 65,
      "original_start_line": 65,
      "start_side": "RIGHT",
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1932361492",
      "pull_request_review_id": 2578595432,
      "id": 1932361492,
      "node_id": "PRRC_kwDOABII585zLX8U",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning\n+            if (in.IsNull()) {\n                 return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+            }\n+        }",
      "path": "src/consensus/tx_check.cpp",
      "position": 46,
      "original_position": 46,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1931324152,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Guys/bots, please stop useless spamming!\r\n\r\nIf you care about Bitcoin, please review the code instead on a high level to make sure the original behavior is retained, risk is minimized, suggesting meaningful changes that make it more reviewable, less risky, identify missing test cases, better benchmarks, raise valid concerns.",
      "created_at": "2025-01-28T15:15:13Z",
      "updated_at": "2025-01-28T15:15:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1932361492",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1932361492"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": 65,
      "original_start_line": 65,
      "start_side": "RIGHT",
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1992337395",
      "pull_request_review_id": 2679943648,
      "id": 1992337395,
      "node_id": "PRRC_kwDOABII5852wKfz",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning",
      "path": "src/consensus/tx_check.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This comment made me wonder if one could remove the loop, I think we could:\r\n```diff\r\ndiff --git a/src/consensus/tx_check.cpp b/src/consensus/tx_check.cpp\r\nindex 0a471deda2..6aa8a73de6 100644\r\n--- a/src/consensus/tx_check.cpp\r\n+++ b/src/consensus/tx_check.cpp\r\n@@ -57,16 +57,21 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\r\n         for (const auto& txin : tx.vin) {\r\n             sortedPrevouts.push_back(txin.prevout);\r\n         }\r\n-        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\r\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end(), [](auto& a, auto& b) {\r\n+            if (a.hash == b.hash) {\r\n+                // Sort these in reverse order so that NULL_INDEX come first,\r\n+                // meaning we can check for IsNull() on the first element below.\r\n+                return a.n > b.n;\r\n+            } else {\r\n+                return a.hash < b.hash;\r\n+            }});\r\n         if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\r\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\r\n         }\r\n \r\n-        for (const auto& in : sortedPrevouts) {\r\n-            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning\r\n-            if (in.IsNull()) {\r\n-                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\r\n-            }\r\n+        // Invalid values can only be at the beginning.\r\n+        if (sortedPrevouts.front().IsNull()) {\r\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\r\n         }\r\n     }\r\n```\r\nWithout change:\r\n```\r\nâ‚¿ build/src/bench/bench_bitcoin -filter=CheckBlockBench -min-time=30000\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          628,647.76 |            1,590.72 |    0.1% |    5,197,460.63 |    2,317,136.19 |  2.243 |     645,929.63 |    2.0% |     32.81 | `CheckBlockBench`\r\n```\r\n\r\nWith change:\r\n```\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          612,838.80 |            1,631.75 |    0.1% |    5,207,901.62 |    2,258,985.81 |  2.305 |     618,340.61 |    2.1% |     33.08 | `CheckBlockBench`\r\n```",
      "created_at": "2025-03-12T21:44:00Z",
      "updated_at": "2025-03-12T21:44:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1992337395",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1992337395"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1992367875",
      "pull_request_review_id": 2679989148,
      "id": 1992367875,
      "node_id": "PRRC_kwDOABII5852wR8D",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning",
      "path": "src/consensus/tx_check.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1992337395,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks for the hint, this is also a good alternative.\r\n\r\nThat combination is tested via:\r\nhttps://github.com/bitcoin/bitcoin/blob/6421b986f6c043fd1266c399e542279ad373822f/src/test/transaction_tests.cpp#L504\r\n\r\nI ran `CheckBlockBench` a few times to see if there's any difference and there's barely any (the current one seemed a tiny bit faster with Clang) - so I'd rather go for simpler code.\r\n\r\nIn reality though the loop exits immediately since we rarely have hashes of 0, so the two solutions are basically equivalent.\r\n\r\nWill let the reviewers decide which one is simpler for them to understand.",
      "created_at": "2025-03-12T22:12:54Z",
      "updated_at": "2025-03-12T22:12:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1992367875",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1992367875"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1992427691",
      "pull_request_review_id": 2680079186,
      "id": 1992427691,
      "node_id": "PRRC_kwDOABII5852wgir",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning",
      "path": "src/consensus/tx_check.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1992337395,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I ran `CheckBlockBench` a few times to see if there's any difference and there's barely any (the current one seemed a tiny bit faster with Clang) - so I'd rather go for simpler code.\r\n\r\nI have yet to have a run where my alternative was not faster when I set `-min-time=30000`. Seems to be around 2% faster on my CPU.\r\n\r\nAgree that it's good to not complicate consensus code. As you say the loop exits immediately after initializing the iterator and checking that it's not at the end, then checking `IsNull()`, in the common case. Your version also has the benefit of not exploding if the check for empty `vin`s at the top of the function were to be removed in the future.",
      "created_at": "2025-03-12T23:28:23Z",
      "updated_at": "2025-03-12T23:28:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1992427691",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1992427691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1993324156",
      "pull_request_review_id": 2681532004,
      "id": 1993324156,
      "node_id": "PRRC_kwDOABII5852z7Z8",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning",
      "path": "src/consensus/tx_check.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1992337395,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "By the way, the distributions of inputs lengths in `block413567` used in `CheckBlockBench ` are:\r\n\r\nsize | count\r\n|---:|-----:|\r\n| 1 | 1052\r\n| 2 | 255\r\n| 3 | 113\r\n| 4 | 26\r\n| 5 | 41\r\n| 6 | 22\r\n| 7 | 14\r\n| >=8 | 33\r\n\r\n<details>\r\n<summary>>=8</summary>\r\n\r\n```bash\r\n8\r\n8\r\n8\r\n8\r\n8\r\n9\r\n9\r\n10\r\n10\r\n12\r\n12\r\n12\r\n14\r\n17\r\n17\r\n21\r\n24\r\n25\r\n26\r\n27\r\n31\r\n32\r\n35\r\n45\r\n56\r\n80\r\n90\r\n120\r\n200\r\n200\r\n200\r\n274\r\n357\r\n442\r\n```\r\n\r\n</details>\r\n",
      "created_at": "2025-03-13T11:29:01Z",
      "updated_at": "2025-03-13T11:29:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1993324156",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1993324156"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1993519848",
      "pull_request_review_id": 2681907614,
      "id": 1993519848,
      "node_id": "PRRC_kwDOABII58520rLo",
      "diff_hunk": "@@ -38,22 +38,36 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\n     // of a tx as spent, it does not check if the tx has duplicate inputs.\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\n     // the underlying coins database.\n-    std::set<COutPoint> vInOutPoints;\n-    for (const auto& txin : tx.vin) {\n-        if (!vInOutPoints.insert(txin.prevout).second)\n+    if (tx.vin.size() == 1) {\n+        if (tx.IsCoinBase()) {\n+            if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100) {\n+                return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n+            }\n+        }\n+    } else if (tx.vin.size() == 2) {\n+        if (tx.vin[0].prevout == tx.vin[1].prevout) {\n             return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n-    }\n+        }\n+        if (tx.vin[0].prevout.IsNull() || tx.vin[1].prevout.IsNull()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-prevout-null\");\n+        }\n+    } else {\n+        std::vector<COutPoint> sortedPrevouts;\n+        sortedPrevouts.reserve(tx.vin.size());\n+        for (const auto& txin : tx.vin) {\n+            sortedPrevouts.push_back(txin.prevout);\n+        }\n+        std::sort(sortedPrevouts.begin(), sortedPrevouts.end());\n+        if (std::ranges::adjacent_find(sortedPrevouts) != sortedPrevouts.end()) {\n+            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\n+        }\n \n-    if (tx.IsCoinBase())\n-    {\n-        if (tx.vin[0].scriptSig.size() < 2 || tx.vin[0].scriptSig.size() > 100)\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-cb-length\");\n-    }\n-    else\n-    {\n-        for (const auto& txin : tx.vin)\n-            if (txin.prevout.IsNull())\n+        for (const auto& in : sortedPrevouts) {\n+            if (!in.hash.IsNull()) break; // invalid values can only be at the beginning",
      "path": "src/consensus/tx_check.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "786fdd177b63897648a227cb3f115b027792ca6f",
      "original_commit_id": "9a3397456d169fd7e7a9f13ad6b752586829b5d9",
      "in_reply_to_id": 1992337395,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "My previous measurement was on Clang 19.1.7. My GCC 14.2.1 results show a similar 2.5% improvement.\r\n\r\n<details><summary>GCC Benchmarks</summary>\r\n\r\n#### PR\r\n\r\n```\r\nâ‚¿ build/src/bench/bench_bitcoin -filter=CheckBlockBench -min-time=30000\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          738,374.10 |            1,354.33 |    0.1% |    6,635,540.75 |    2,722,368.66 |  2.437 |     912,205.74 |    1.5% |     33.03 | `CheckBlockBench`\r\n```\r\n#### My suggestion\r\n\r\n```\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          719,769.22 |            1,389.33 |    0.1% |    6,566,565.73 |    2,653,931.08 |  2.474 |     871,059.72 |    1.6% |     33.03 | `CheckBlockBench`\r\n```\r\n</details>\r\n\r\nI don't feel too strongly about this. Understand if the potential gain is too low to motivate making the code more complicated. Especially when it seems to make things slower on ARM/non-Intel.",
      "created_at": "2025-03-13T13:26:10Z",
      "updated_at": "2025-03-13T13:26:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31682#discussion_r1993519848",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1993519848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31682"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    }
  ]
}