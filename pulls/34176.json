{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176",
    "id": 3135104327,
    "node_id": "PR_kwDOABII58663eVH",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/34176",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/34176.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/34176.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/2ef6adde86f9a248463b8b628f559012be103382",
    "number": 34176,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet: improve error msg when db directory is not writable",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Make wallet creation and load fail with a clear error when the db directory isn’t writable.\r\n\r\n#### 1) For Wallet Creation\r\n\r\nBefore: creating a wallet would return a generic error:\r\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\r\n\r\nAfter: creating a wallet returns:\r\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"\r\n\r\n#### 2) For Wallet Loading\r\n\r\nWe currently allow the load of wallets located on non-writable directories. This is problematic\r\nbecause the node crashes on any subsequent write; generating a block is enough to trigger it.\r\nCan be verified just by running the following test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\n\r\n\r\nAlso, to check directory writability, this creates a tmp file rather than relying on the\r\n`permissions()` functions, since perms bits alone may not reliably reflect actual writability\r\nin some systems.\r\n\r\nTesting Note:\r\nPushed the tests in separate commits so they can be cherry-picked on master for comparison.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-12-29T19:44:56Z",
    "updated_at": "2026-01-22T14:24:28Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged": false,
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "furszy:2025_wallet_check_db_permissions",
      "ref": "2025_wallet_check_db_permissions",
      "sha": "2ef6adde86f9a248463b8b628f559012be103382",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 7,
        "watchers_count": 7,
        "size": 446239,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-19T16:54:49Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2026-01-07T20:26:47Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ab233255d444ccf6ffe4a45cb02bfc3e5fb71bdb",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38761,
        "stargazers_count": 87737,
        "watchers_count": 87737,
        "size": 302194,
        "default_branch": "master",
        "open_issues_count": 748,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-22T14:45:20Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-22T14:47:37Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 87,
    "deletions": 0,
    "changed_files": 6,
    "commits": 3,
    "review_comments": 10,
    "comments": 9
  },
  "events": [
    {
      "event": "labeled",
      "id": 21783420387,
      "node_id": "LE_lADOABII587gmhxUzwAAAAUSZJ3j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21783420387",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-29T19:44:59Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 3697354911,
      "node_id": "IC_kwDOABII587cYSif",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3697354911",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-29T19:45:02Z",
      "updated_at": "2026-01-22T14:24:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34176.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3721321867) |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3709275555), [rkrux](https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3784661860) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34269](https://github.com/bitcoin/bitcoin/pull/34269) (wallet: disallow creating new or restoring to an unnamed (default) wallet by achow101)\n* [#33014](https://github.com/bitcoin/bitcoin/pull/33014) (rpc: Fix internal bug in descriptorprocesspsbt when encountering invalid signatures by b-l-u-e)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3697354911",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "labeled",
      "id": 21784250996,
      "node_id": "LE_lADOABII587gmhxUzwAAAAUScUp0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21784250996",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-29T21:01:04Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21788070510,
      "node_id": "HRFPE_lADOABII587gmhxUzwAAAAUSq5Ju",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21788070510",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "created_at": "2025-12-30T05:30:27Z"
    },
    {
      "event": "reviewed",
      "id": 3617621667,
      "node_id": "PRR_kwDOABII587XoIaj",
      "url": null,
      "actor": null,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-30T09:31:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Combining the individual suggestions, the full diff:\n\n```diff\ndiff --git a/test/functional/wallet_createwallet.py b/test/functional/wallet_createwallet.py\nindex 3bd8e6a310..f0b34d685d 100755\n--- a/test/functional/wallet_createwallet.py\n+++ b/test/functional/wallet_createwallet.py\n@@ -33,21 +33,23 @@ class CreateWalletTest(BitcoinTestFramework):\n         wallet_name = \"bad_permissions\"\n         dir_path = node.wallets_path / wallet_name\n         dir_path.mkdir(parents=True)\n-        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        original_dir_perms = dir_path.stat().st_mode\n+        os.chmod(dir_path, original_dir_perms & ~(stat.S_IWUSR | stat.S_IWGRP | stat.S_IWOTH))\n         try:\n-            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n-            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n-            return\n+            if (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch(): # Verify the directory is actually non-writable\n+                self.log.warning(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n+                return\n+            assert_raises_rpc_error(-4, f\"SQLiteDatabase: Failed to open database in directory '{str(dir_path)}': directory is not writable\", node.createwallet, wallet_name=wallet_name, descriptors=True)\n         except PermissionError:\n             pass\n-        assert_raises_rpc_error(-4, f\"SQLiteDatabase: Failed to open database in directory '{str(dir_path)}': directory is not writable\", node.createwallet, wallet_name=wallet_name, descriptors=True)\n-        dir_path.chmod(dir_path.stat().st_mode | stat.S_IWRITE)\n+        finally:\n+            dir_path.chmod(original_dir_perms)\n \n```",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#pullrequestreview-3617621667",
      "submitted_at": "2025-12-30T09:31:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21796284965,
      "node_id": "HRFPE_lADOABII587gmhxUzwAAAAUTKOol",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21796284965",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "4ad08fcc2052f68d3e025739450a2920e20231f3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/4ad08fcc2052f68d3e025739450a2920e20231f3",
      "created_at": "2025-12-30T16:09:44Z"
    },
    {
      "event": "commented",
      "id": 3699846514,
      "node_id": "IC_kwDOABII587chy1y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3699846514",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T16:17:10Z",
      "updated_at": "2025-12-30T16:17:10Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review @rkrux!\r\nApplied all suggestions except the `touch()` if-block, since the function doesn’t return a boolean (per docs, it either returns `None` or an exception). Also pulled out the `is_dir_writable` function to make the introduced try-except-finally workflow slightly more readable.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3699846514",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "mentioned",
      "id": 21796398038,
      "node_id": "MEE_lADOABII587gmhxUzwAAAAUTKqPW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21796398038",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T16:17:12Z"
    },
    {
      "event": "subscribed",
      "id": 21796398053,
      "node_id": "SE_lADOABII587gmhxUzwAAAAUTKqPl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21796398053",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T16:17:12Z"
    },
    {
      "event": "unlabeled",
      "id": 21797415586,
      "node_id": "UNLE_lADOABII587gmhxUzwAAAAUTOiqi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21797415586",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-30T17:28:02Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM1MDg0MGU5NjBhOTVjMzRjOWRiN2ViNGJiNWFiYTRjODQzMzc5Yjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/350840e960a95c34c9db7eb4bb5aba4c843379b9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/350840e960a95c34c9db7eb4bb5aba4c843379b9",
      "tree": {
        "sha": "88c21f7b4f47214d81c396773f65574f1e0040cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/88c21f7b4f47214d81c396773f65574f1e0040cd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 88c21f7b4f47214d81c396773f65574f1e0040cd\nparent 2bcb3f64648ad27d4df10013b5bf0441124f1372\nauthor furszy <matiasfurszyfer@protonmail.com> 1767036204 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767124817 -0500\n\nwallet: improve error msg when db directory is not writable\n\nAdd `IsDirWritable` helper in util/fs_helpers to test whether a directory\ncan be written to by creating a temporary file.\n\nUse this check when opening a SQLite database to fail early with a clear\nerror if the database directory is not writable, preventing obscure SQLite\nerrors.\n\nBefore: creating a wallet would throw a generic error:\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\n\nAfter: creating a wallet throws:\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlUL1EACgkQXdI8zGhq\npiPRWRAAv1xGOPsqQCULNDilhhE+TIGLmCs5GpGYYvXwcI6+PnmOljV9wQu5TBLX\n6YOVpEquZe6xzZ1QTCMqJj/IcQKmPAMB8Cf6zTS4NviLPsWPWTWg24jBElgmzcNT\noa+UUrrzml2IjGgTQB+ytYo7IpYO9dXzNMV+j5hVsaLs6nJrRTS4setaRK6Y0yDF\nocEQ2JdSfojN8rq45EPL818+NCaJL46n3a9DlH8l1InKIlzj+e0ARi6IBo0WM3P2\nKlgy0N03Nd1CI3KiMaicOXPjrhx54ee447iDkSWVFnxhM9TF3GYFI5j70zFhKqWN\n5wqKucYPJ6BystOPzS/TI4FforSVkIAZo3B+pk43bxt8MmIjgfLIW2vtGAC4MbYM\nzDBMPsRTRSdSZV2kwrk7FaK+Mc89MW5DJM+uWXxvJWJsexLIQHIohXVXw7qdfOxl\nJs3ZdB8O9OrDDu5ipVCspwjmvXIbOnXwILMP4e26JsEuAncwCOK8VtUv5bZYNfWQ\nxjVV5hSKuPkv+lBANzUicZ2LWcYhjagqo9xb9xZy3igf2bMih5dCsJuHkUrJz8Wv\nR3WWMEWIiP1JGuRyCyrfWPKG11X/QNr1b/K21t7piTJNRrWVddg4r+A0yzfEksrR\nXfJRk/EYYi9DrT/eOQ/EiVguZu/X9RVjQaUNssdBavYFN/Ym7Q0=\n=2Px7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2bcb3f64648ad27d4df10013b5bf0441124f1372",
          "sha": "2bcb3f64648ad27d4df10013b5bf0441124f1372",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2bcb3f64648ad27d4df10013b5bf0441124f1372"
        }
      ],
      "message": "wallet: improve error msg when db directory is not writable\n\nAdd `IsDirWritable` helper in util/fs_helpers to test whether a directory\ncan be written to by creating a temporary file.\n\nUse this check when opening a SQLite database to fail early with a clear\nerror if the database directory is not writable, preventing obscure SQLite\nerrors.\n\nBefore: creating a wallet would throw a generic error:\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\n\nAfter: creating a wallet throws:\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-30T20:00:17Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-29T19:23:24Z"
      },
      "sha": "350840e960a95c34c9db7eb4bb5aba4c843379b9"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21799116760,
      "node_id": "HRFPE_lADOABII587gmhxUzwAAAAUTVB_Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21799116760",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "0a9ddd3dba535d94cd7febac50ef5cf1eac19f5f",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/0a9ddd3dba535d94cd7febac50ef5cf1eac19f5f",
      "created_at": "2025-12-30T20:00:36Z"
    },
    {
      "event": "commented",
      "id": 3706878509,
      "node_id": "IC_kwDOABII587c8not",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3706878509",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T08:03:58Z",
      "updated_at": "2026-01-03T08:04:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Hmm. Nothing against better reporting when something failed, but the changes necessary to do that here seem a bit excessive for the pay-off? It doesn't seem like this change would have made resolving #34163 trivial?\r\n\r\nDidn't test, but would `sqlite3_errmsg(m_db)` offer a more simple alternative? I think I'm slightly Approach NACK atm, unless I'm wrong on the usefulness of the change.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3706878509",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "commented",
      "id": 3707215626,
      "node_id": "IC_kwDOABII587c958K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707215626",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T17:17:06Z",
      "updated_at": "2026-01-03T18:19:57Z",
      "author_association": "MEMBER",
      "body": "> the changes necessary to do that here seem a bit excessive for the pay-off? It doesn't seem like this change would have made resolving #34163 trivial?\r\n\r\nIt turned out not to help with #34163, but it is a general improvement to reporting read-only permission issues. Which we currently don't do properly. Can take #34163 as the starting point that led to uncover other issues.\r\n\r\nSomething I didn’t mention in the PR description is that this also fixes opening a non-writable wallet directory, which is actually more important than issues during creation. We currently open the wallet even when the directory is read-only, and then crash on any subsequent write because we cannot write to the `-journal` file. I should add a simple test case demonstrating this bad behavior and append it to the PR description..\r\n\r\nAlso, do you really think that labeling these changes as \"excessive\" is correct?\r\nWe are talking about an 8-line function that improves the user experience at almost no cost and could be useful in other contexts as well. Even setting aside the post-opening crash and only focusing on the creation issue, I wouldn’t label this as an excessive change.\r\n\r\n> Didn't test, but would `sqlite3_errmsg(m_db)` offer a more simple alternative? I think I'm slightly Approach NACK atm, unless I'm wrong on the usefulness of the change.\r\n\r\n`sqlite3_errmsg(m_db)` returns the same message as `sqlite3_errstr(ret)`. Both return the generic and not particularly useful \"unable to open database file\".",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3707215626",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "commented",
      "id": 3707232127,
      "node_id": "IC_kwDOABII587c999_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3707232127",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T17:41:57Z",
      "updated_at": "2026-01-03T17:41:57Z",
      "author_association": "MEMBER",
      "body": "@stickies-v done. Run this simple test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\nThe node crashes after loading a wallet in a non-writable directory; generating a block is enough to trigger it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3707232127",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "mentioned",
      "id": 21837201005,
      "node_id": "MEE_lADOABII587gmhxUzwAAAAUVmT5t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837201005",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T17:41:58Z"
    },
    {
      "event": "subscribed",
      "id": 21837201011,
      "node_id": "SE_lADOABII587gmhxUzwAAAAUVmT5z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837201011",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T17:41:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21837357663,
      "node_id": "HRFPE_lADOABII587gmhxUzwAAAAUVm6Jf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837357663",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "66ebb960b502794ae71cac21c21e77efc6b4f1cc",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/66ebb960b502794ae71cac21c21e77efc6b4f1cc",
      "created_at": "2026-01-03T18:17:06Z"
    },
    {
      "event": "labeled",
      "id": 21837360435,
      "node_id": "LE_lADOABII587gmhxUzwAAAAUVm60z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837360435",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T18:17:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUwNGUyMTQxNmVkMjc1ODBjNGI5NTQ2N2VmMmRmNTQ4YTZmOGMwZmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/504e21416ed27580c4b95467ef2df548a6f8c0fa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/504e21416ed27580c4b95467ef2df548a6f8c0fa",
      "tree": {
        "sha": "2f38839e095085599e3cffbcd457258ec5ff6549",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2f38839e095085599e3cffbcd457258ec5ff6549"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2f38839e095085599e3cffbcd457258ec5ff6549\nparent 350840e960a95c34c9db7eb4bb5aba4c843379b9\nauthor furszy <matiasfurszyfer@protonmail.com> 1767036849 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767468715 -0500\n\ntest: add coverage for wallet creation in non-writable directory\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZbqsACgkQXdI8zGhq\npiOVcA/+PUwgq+0KMtLbSPUrsjjS8q20mI6gf8WM0AxCYkDl9jx7+7K3414yYumq\naL0Smxx7L2DPXAn72AptWnBjG2ocM/Ed1SIEG5jISKwXLf+zslrpXNmtf5qyCK6w\noeyKUxPLIrId/TSOOk5RnV1TT44XAYydQjmR8aMlihmb+a26QUtq9Ta4Rj5ZxH5S\nXj2ASUPRr0zZJdtLIVrh+eDhl3w/d6EMWwCc2kgD56pn58qOhmEqUyyUaC94HzFD\nwmmvNEqiH3ZdZevMzWKwnMEb9mhoRBfsLRjS6TETjaARB7DpGok7/9xnBj8PL3Am\n41ng1u+c2/nsb8aT26wiCZWJ/1c32NkX9rMYNhhLNaPQIN00MuGhSgv11+NsLyXr\ndTCGUsCOt+yQy0MeyrXalFJinksnANW38Wj3UjsjnrXcrKcAc/S7PPuhuvu4g7fx\nTz32kpc303TV8kdjjMjYTQ7UFOn7PUV1NPHhsC2N7NhDIHQ+7Px6RqXYjK/+mhbg\nweo1vyE7TTys0r6J73NNq/FCKZFjZqJ4gpo485kRGpe6xCuainqMoOmFMrJ+6VqE\nU85K4rFA/47v/AaDAR8E8Wc38Tx67x8VzJmrOTHlpVKc9Rw+PU+YXLc3jQNRa6sR\ng8YcNoBSVa73wQfkogThwKYK6AmG4NETHccrhwfdrX38etaJ5V0=\n=h8/P\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/350840e960a95c34c9db7eb4bb5aba4c843379b9",
          "sha": "350840e960a95c34c9db7eb4bb5aba4c843379b9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/350840e960a95c34c9db7eb4bb5aba4c843379b9"
        }
      ],
      "message": "test: add coverage for wallet creation in non-writable directory",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-03T19:31:55Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-29T19:34:09Z"
      },
      "sha": "504e21416ed27580c4b95467ef2df548a6f8c0fa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJlZjZhZGRlODZmOWEyNDg0NjNiOGI2MjhmNTU5MDEyYmUxMDMzODI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2ef6adde86f9a248463b8b628f559012be103382",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2ef6adde86f9a248463b8b628f559012be103382",
      "tree": {
        "sha": "520e2550b656ee6afd5756660db0de8ec5ec867a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/520e2550b656ee6afd5756660db0de8ec5ec867a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 520e2550b656ee6afd5756660db0de8ec5ec867a\nparent 504e21416ed27580c4b95467ef2df548a6f8c0fa\nauthor furszy <matiasfurszyfer@protonmail.com> 1767461865 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1767468715 -0500\n\ntest: add coverage for loading a wallet in a non-writable directory\n\nPreviously, wallets in non-writable directories were loaded,\nleading to crashes on any subsequent write.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlZbqsACgkQXdI8zGhq\npiMrPg//YkpAr0tnz0yGitLN+bcg3+vvPgA+YdBt1ogNKO/VJlzuWcf2SdclKX5h\nHbf57OGdjjW6ZyfIfB1pvx7ouYRsu3JSSorZfrS7mwWqAdOxO2mPHpNG0mqdCvZ3\nK0zMbZ0SNNmcdxp30pdeIgv6PXalukJ59ZPolDSFoOhUTo5FeX16+1twWp+bBTgG\nWPY1n4R9Ox0jAHTkTzj5KCO838YgH+zrYouQlRBdSxTGKs2Q+C1Cqwi0whAechX+\nSSagCrv7NoNy8MXl1RW0ELj5NYRsJpa88ude7AigbH0NZt2zQq4gwvw5KbEudV1e\n7vAKCQq0EeZH+zKMKEu7qPy4ejQGnfoV2yxEgCvP9ak+OfGtKKUtpc2W/ZA+mslv\nC+gTUi6duedt0gYa0G4922sXYK66VUWjTBnN4rNI3fjuQLQzy6Yb659yEYfo8kDk\nsgRSNRl87MM4gnTMGIUrWFEsD5TeIR1MUS1tFPK0p0Ydcp7jE1XNn7IyAPe5bvSG\nwZt0/KYX0l01TLv3l+vhvhogx2941JT2KvgVkjzgtjuMD8XenPcBTbFAWGkS4kHL\ndjqozHbd6xcCf/t7mcsSouJLv0q0rEWMgRe8ObOUcL4jWBFb/wCjgwRMYV98iYrY\nWKfRecbjOtR6561FYKRSAi5uvHYYNSZOgxMVbQGLyx2cA1urRF4=\n=7UwI\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/504e21416ed27580c4b95467ef2df548a6f8c0fa",
          "sha": "504e21416ed27580c4b95467ef2df548a6f8c0fa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/504e21416ed27580c4b95467ef2df548a6f8c0fa"
        }
      ],
      "message": "test: add coverage for loading a wallet in a non-writable directory\n\nPreviously, wallets in non-writable directories were loaded,\nleading to crashes on any subsequent write.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-03T19:31:55Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2026-01-03T17:37:45Z"
      },
      "sha": "2ef6adde86f9a248463b8b628f559012be103382"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21837701963,
      "node_id": "HRFPE_lADOABII587gmhxUzwAAAAUVoONL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837701963",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2ef6adde86f9a248463b8b628f559012be103382",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/2ef6adde86f9a248463b8b628f559012be103382",
      "created_at": "2026-01-03T19:32:09Z"
    },
    {
      "event": "unlabeled",
      "id": 21837971174,
      "node_id": "UNLE_lADOABII587gmhxUzwAAAAUVpP7m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21837971174",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-03T20:46:13Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3709275555,
      "node_id": "IC_kwDOABII587dFw2j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3709275555",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-05T07:41:34Z",
      "updated_at": "2026-01-05T07:41:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Also, do you really think that labeling these changes as \"excessive\" is correct?\r\n\r\nIt's not a big diff, but adding helper functions to improve diagnostic messages for a rare issue that is reasonably straightforward for the user to diagnose felt like perhaps not something we should have in our codebase, hence why I used \"excessive\" (in a relative way).\r\n\r\n> The node crashes after loading a wallet in a non-writable directory; generating a block is enough to trigger it.\r\n\r\nThis seems like a much better rationale to me for this PR. Concept ACK. Approach-wise, I'm confused why the `sqlite3_db_readonly` call we already have doesn't do what we'd expect it to do, but I'm not sure I'll be diving into this further, just wanted to leave early concept feedback.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3709275555",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "commented",
      "id": 3721321867,
      "node_id": "IC_kwDOABII587dzt2L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3721321867",
      "actor": {
        "login": "bensig",
        "id": 1872138,
        "node_id": "MDQ6VXNlcjE4NzIxMzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1872138?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bensig",
        "html_url": "https://github.com/bensig",
        "followers_url": "https://api.github.com/users/bensig/followers",
        "following_url": "https://api.github.com/users/bensig/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bensig/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bensig/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bensig/subscriptions",
        "organizations_url": "https://api.github.com/users/bensig/orgs",
        "repos_url": "https://api.github.com/users/bensig/repos",
        "events_url": "https://api.github.com/users/bensig/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bensig/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-07T23:59:14Z",
      "updated_at": "2026-01-07T23:59:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 2ef6adde86f9a248463b8b628f559012be103382 \r\n\r\nTests passed",
      "user": {
        "login": "bensig",
        "id": 1872138,
        "node_id": "MDQ6VXNlcjE4NzIxMzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1872138?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bensig",
        "html_url": "https://github.com/bensig",
        "followers_url": "https://api.github.com/users/bensig/followers",
        "following_url": "https://api.github.com/users/bensig/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bensig/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bensig/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bensig/subscriptions",
        "organizations_url": "https://api.github.com/users/bensig/orgs",
        "repos_url": "https://api.github.com/users/bensig/repos",
        "events_url": "https://api.github.com/users/bensig/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bensig/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3721321867",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "review_requested",
      "id": 21910579296,
      "node_id": "RRE_lADOABII587gmhxUzwAAAAUZ-Ohg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21910579296",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-07T23:59:19Z",
      "requested_reviewer": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 22201719842,
      "node_id": "LE_lADOABII587gmhxUzwAAAAUrU1wi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22201719842",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-21T23:29:37Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3781612489,
      "node_id": "IC_kwDOABII587hZtPJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3781612489",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-21T23:29:38Z",
      "updated_at": "2026-01-21T23:29:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3781612489",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "reviewed",
      "id": 3689822606,
      "node_id": "PRR_kwDOABII587b7jmO",
      "url": null,
      "actor": null,
      "commit_id": "2ef6adde86f9a248463b8b628f559012be103382",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-21T23:32:05Z",
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#pullrequestreview-3689822606",
      "submitted_at": "2026-01-21T23:32:05Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
    },
    {
      "event": "commented",
      "id": 3784661860,
      "node_id": "IC_kwDOABII587hlVtk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3784661860",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T14:24:24Z",
      "updated_at": "2026-01-22T14:24:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK 2ef6adde86f9a248463b8b628f559012be103382, will finish review.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3784661860",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/34176"
    },
    {
      "event": "referenced",
      "id": 22218140598,
      "node_id": "REFE_lADOABII587gmhxUzwAAAAUsTeu2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22218140598",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ef5fdf190ffd37dbc2005c3c0736b968e44f8dd1",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/ef5fdf190ffd37dbc2005c3c0736b968e44f8dd1",
      "created_at": "2026-01-22T14:51:09Z"
    },
    {
      "event": "referenced",
      "id": 22218140720,
      "node_id": "REFE_lADOABII587gmhxUzwAAAAUsTeww",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22218140720",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "240a9e801fd62d1bc6c519ccf338cf4001cbf6e5",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/240a9e801fd62d1bc6c519ccf338cf4001cbf6e5",
      "created_at": "2026-01-22T14:51:09Z"
    },
    {
      "event": "referenced",
      "id": 22218140820,
      "node_id": "REFE_lADOABII587gmhxUzwAAAAUsTeyU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22218140820",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "12fd702a766aa730016d15e56737919e4f393e9c",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/12fd702a766aa730016d15e56737919e4f393e9c",
      "created_at": "2026-01-22T14:51:09Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652547457",
      "pull_request_review_id": 3617621667,
      "id": 2652547457,
      "node_id": "PRRC_kwDOABII586eGqmB",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        try:\n+            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n+            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 22,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "From the CI failure logs:\n```zsh\nstderr:\n/home/admin/actions-runner/_work/_temp/build/test/functional/wallet_createwallet.py:39: DeprecationWarning: The 'warn' method is deprecated, use 'warning' instead\n  self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n```\n\n```diff\n- self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n+ self.log.warning(\"Skipping non-writable directory test: unable to enforce read-only permissions\") \n```",
      "created_at": "2025-12-30T09:00:02Z",
      "updated_at": "2025-12-30T09:31:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2652547457",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652547457"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652554691",
      "pull_request_review_id": 3617621667,
      "id": 2652554691,
      "node_id": "PRRC_kwDOABII586eGsXD",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        try:\n+            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n+            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n+            return\n+        except PermissionError:\n+            pass\n+        assert_raises_rpc_error(-4, f\"SQLiteDatabase: Failed to open database in directory '{str(dir_path)}': directory is not writable\", node.createwallet, wallet_name=wallet_name, descriptors=True)\n+        dir_path.chmod(dir_path.stat().st_mode | stat.S_IWRITE)",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 27,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "By debugging the permissions at 3 different stages here, it appears that the original permissions of the directory are not set at the end of this test.\n\n```diff\ndiff --git a/test/functional/wallet_createwallet.py b/test/functional/wallet_createwallet.py\nindex 3bd8e6a310..29a2db3dab 100755\n--- a/test/functional/wallet_createwallet.py\n+++ b/test/functional/wallet_createwallet.py\n@@ -33,7 +33,9 @@ class CreateWalletTest(BitcoinTestFramework):\n         wallet_name = \"bad_permissions\"\n         dir_path = node.wallets_path / wallet_name\n         dir_path.mkdir(parents=True)\n+        print(dir_path.stat().st_mode)\n         os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        print(dir_path.stat().st_mode)\n         try:\n             (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n             self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n@@ -42,12 +44,13 @@ class CreateWalletTest(BitcoinTestFramework):\n             pass\n         assert_raises_rpc_error(-4, f\"SQLiteDatabase: Failed to open database in directory '{str(dir_path)}': directory is not writable\", node.createwallet, wallet_name=wallet_name, descriptors=True)\n         dir_path.chmod(dir_path.stat().st_mode | stat.S_IWRITE)\n+        print(dir_path.stat().st_mode)\n```\n\n```zsh\n➜  bitcoin git:(2025_wallet_check_db_permissions) ✗ ./build/test/functional/wallet_createwallet.py            \n2025-12-30T09:01:50.770611Z TestFramework (INFO): PRNG seed is: 3561247270765759257\n2025-12-30T09:01:50.771467Z TestFramework (INFO): Initializing test directory /var/folders/6v/mpspb4bx4zzf3xr2z96hgq9h0000gn/T/bitcoin_func_test_5m4h9kjq\n2025-12-30T09:01:51.370097Z TestFramework (INFO): Test wallet creation failure due to non-writable directory\n16877\n16704\n16832\n2025-12-30T09:01:51.424150Z TestFramework (INFO): Stopping nodes\n2025-12-30T09:01:51.689178Z TestFramework (INFO): Cleaning up /var/folders/6v/mpspb4bx4zzf3xr2z96hgq9h0000gn/T/bitcoin_func_test_5m4h9kjq on exit\n2025-12-30T09:01:51.689295Z TestFramework (INFO): Tests successful\n```\n\nI believe 16877 (0o40755) should be set back at the end of this test.",
      "created_at": "2025-12-30T09:04:43Z",
      "updated_at": "2025-12-30T09:31:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2652554691",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652554691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652573236",
      "pull_request_review_id": 3617621667,
      "id": 2652573236,
      "node_id": "PRRC_kwDOABII586eGw40",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        try:\n+            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n+            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 22,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Based on the logs, it appears that all the 9 failing jobs skipped the test. At the moment, I don't know why the `touch` function didn't throw here even after non-writable permissions given to the directory. The jobs failed because the clean up was not done after the test because of access denied errors. Restoring the original permissions of the directory in a `finally` block should help here.\n\n```zsh\nstderr:\nD:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\wallet_createwallet.py:39: DeprecationWarning: The 'warn' method is deprecated, use 'warning' instead\n\n  self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n\nTraceback (most recent call last):\n\n  File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\wallet_createwallet.py\", line 202, in <module>\n\n    CreateWalletTest(__file__).main()\n\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n\n  File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\test_framework\\test_framework.py\", line 154, in main\n\n    exit_code = self.shutdown()\n\n  File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\test_framework\\test_framework.py\", line 332, in shutdown\n\n    shutil.rmtree(self.options.tmpdir)\n\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^\n\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.14.2\\x64\\Lib\\shutil.py\", line 852, in rmtree\n\n    _rmtree_impl(path, dir_fd, onexc)\n\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^\n\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.14.2\\x64\\Lib\\shutil.py\", line 697, in _rmtree_unsafe\n\n    onexc(os.rmdir, fullname, err)\n\n    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.14.2\\x64\\Lib\\shutil.py\", line 693, in _rmtree_unsafe\n\n    os.rmdir(fullname)\n\n    ~~~~~~~~^^^^^^^^^^\n\nPermissionError: [WinError 5] Access is denied: 'D:\\\\a\\\\_temp\\\\test_runner_₿_🏃_20251230_063644\\\\wallet_createwallet_186\\\\node0\\\\regtest\\\\wallets\\\\bad_permissions'\n```",
      "created_at": "2025-12-30T09:16:40Z",
      "updated_at": "2025-12-30T09:31:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2652573236",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652573236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": 36,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652576857",
      "pull_request_review_id": 3617621667,
      "id": 2652576857,
      "node_id": "PRRC_kwDOABII586eGxxZ",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 19,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://docs.python.org/3/library/stat.html#stat.S_IREAD\n\n> stat.S_IREAD\nUnix V7 synonym for [S_IRUSR](https://docs.python.org/3/library/stat.html#stat.S_IRUSR).\n\nMaybe `s/stat.S_IREAD/stat.S_IRUSR` to avoid using the Unix synonym, thereby making it platform independent. Just a guess because the test works fine on my MacOS.",
      "created_at": "2025-12-30T09:18:42Z",
      "updated_at": "2025-12-30T09:31:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2652576857",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2652576857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653318199",
      "pull_request_review_id": 3618661095,
      "id": 2653318199,
      "node_id": "PRRC_kwDOABII586eJmw3",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        try:\n+            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n+            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 22,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": 2652547457,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done. Thanks.",
      "created_at": "2025-12-30T16:08:06Z",
      "updated_at": "2025-12-30T16:08:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2653318199",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653318199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653319080",
      "pull_request_review_id": 3618661931,
      "id": 2653319080,
      "node_id": "PRRC_kwDOABII586eJm-o",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        try:\n+            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n+            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")\n+            return\n+        except PermissionError:\n+            pass\n+        assert_raises_rpc_error(-4, f\"SQLiteDatabase: Failed to open database in directory '{str(dir_path)}': directory is not writable\", node.createwallet, wallet_name=wallet_name, descriptors=True)\n+        dir_path.chmod(dir_path.stat().st_mode | stat.S_IWRITE)",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 27,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": 2652554691,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done as suggested. Thanks.",
      "created_at": "2025-12-30T16:08:31Z",
      "updated_at": "2025-12-30T16:08:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2653319080",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653319080"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653320042",
      "pull_request_review_id": 3618662852,
      "id": 2653320042,
      "node_id": "PRRC_kwDOABII586eJnNq",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)\n+        try:\n+            (dir_path / f\".tmp_{random.randrange(1 << 32)}\").touch() # Verify the directory is actually non-writable\n+            self.log.warn(\"Skipping non-writable directory test: unable to enforce read-only permissions\")",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 22,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": 2652573236,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done as suggested. Thanks.",
      "created_at": "2025-12-30T16:09:04Z",
      "updated_at": "2025-12-30T16:09:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2653320042",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653320042"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": 36,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653320397",
      "pull_request_review_id": 3618663218,
      "id": 2653320397,
      "node_id": "PRRC_kwDOABII586eJnTN",
      "diff_hunk": "@@ -25,9 +28,26 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def test_bad_dir_permissions(self, node):\n+        self.log.info(\"Test wallet creation failure due to non-writable directory\")\n+        wallet_name = \"bad_permissions\"\n+        dir_path = node.wallets_path / wallet_name\n+        dir_path.mkdir(parents=True)\n+        os.chmod(dir_path, stat.S_IREAD | stat.S_IEXEC)",
      "path": "test/functional/wallet_createwallet.py",
      "position": 1,
      "original_position": 19,
      "commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "original_commit_id": "16b82f13dba72d79eca434d10cadd5017e9ac16f",
      "in_reply_to_id": 2652576857,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done as suggested. Thanks.",
      "created_at": "2025-12-30T16:09:16Z",
      "updated_at": "2025-12-30T16:09:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2653320397",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2653320397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2714710574",
      "pull_request_review_id": 3689822606,
      "id": 2714710574,
      "node_id": "PRRC_kwDOABII586hzzIu",
      "diff_hunk": "@@ -304,6 +305,21 @@ std::optional<fs::perms> InterpretPermString(const std::string& s)\n     }\n }\n \n+bool IsDirWritable(const fs::path& dir_path)\n+{\n+    // Attempt to create a tmp file in the directory\n+    if (!fs::is_directory(dir_path)) throw std::runtime_error(strprintf(\"Path %s is not a directory\", fs::PathToString(dir_path)));\n+    FastRandomContext rng;\n+    const auto tmp = dir_path / fs::PathFromString(strprintf(\".tmp_%d\", rng.rand64()));\n+    if (auto created{fsbridge::fopen(tmp, \"a\")}) {",
      "path": "src/util/fs_helpers.cpp",
      "position": 18,
      "original_position": 18,
      "commit_id": "2ef6adde86f9a248463b8b628f559012be103382",
      "original_commit_id": "2ef6adde86f9a248463b8b628f559012be103382",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n    if (auto created{fsbridge::fopen(tmp, \"wx\")}) {\r\n```\r\n\r\nOn the unlikely chance someone already has a file with that name or races us for it...\r\n\r\n(Python's pathlib touch method already has this check)",
      "created_at": "2026-01-21T23:31:11Z",
      "updated_at": "2026-01-21T23:32:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2714710574",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2714710574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 314,
      "original_line": 314,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2715682964",
      "pull_request_review_id": 3691036708,
      "id": 2715682964,
      "node_id": "PRRC_kwDOABII586h3giU",
      "diff_hunk": "@@ -304,6 +305,21 @@ std::optional<fs::perms> InterpretPermString(const std::string& s)\n     }\n }\n \n+bool IsDirWritable(const fs::path& dir_path)\n+{\n+    // Attempt to create a tmp file in the directory\n+    if (!fs::is_directory(dir_path)) throw std::runtime_error(strprintf(\"Path %s is not a directory\", fs::PathToString(dir_path)));\n+    FastRandomContext rng;\n+    const auto tmp = dir_path / fs::PathFromString(strprintf(\".tmp_%d\", rng.rand64()));\n+    if (auto created{fsbridge::fopen(tmp, \"a\")}) {",
      "path": "src/util/fs_helpers.cpp",
      "position": 18,
      "original_position": 18,
      "commit_id": "2ef6adde86f9a248463b8b628f559012be103382",
      "original_commit_id": "2ef6adde86f9a248463b8b628f559012be103382",
      "in_reply_to_id": 2714710574,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "would need to be \r\n\r\n```cpp\r\n#ifdef __MINGW64__\r\n            \"w\" // Temporary workaround for https://github.com/bitcoin/bitcoin/issues/30210\r\n#else\r\n            \"wx\"\r\n#endif\r\n",
      "created_at": "2026-01-22T07:39:26Z",
      "updated_at": "2026-01-22T07:39:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/34176#discussion_r2715682964",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2715682964"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/34176"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 314,
      "original_line": 314,
      "side": "RIGHT"
    }
  ]
}