{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657",
    "id": 2927705886,
    "node_id": "PR_kwDOABII586ugT8e",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33657",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33657.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33657.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/07135290c1720a14c9d2f18a5700bb6565ae7a10",
    "number": 33657,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "rest: allow reading partial block data from storage",
    "user": {
      "login": "romanz",
      "id": 9900,
      "node_id": "MDQ6VXNlcjk5MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/romanz",
      "html_url": "https://github.com/romanz",
      "followers_url": "https://api.github.com/users/romanz/followers",
      "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
      "organizations_url": "https://api.github.com/users/romanz/orgs",
      "repos_url": "https://api.github.com/users/romanz/repos",
      "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/romanz/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "It allows fetching specific transactions using an external index, following https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-3267485313.\r\n\r\nCurrently, electrs and other indexers map between an address/scripthash to the list of the relevant transactions.\r\n\r\nHowever, in order to fetch those transactions from bitcoind, electrs relies on reading the whole block and post-filtering for a specific transaction[^1]. \nOther indexers use a `txindex` to fetch a transaction using its txid [^2][^3][^4]. This approach has significant storage and CPU overhead, since the `txid` is a pseudo-random 32-byte value. Also, mainnet `txindex` takes ~60GB today.\r\n\r\nThis PR is adding support for using the transaction's position within its block to be able to fetch it directly using [REST API](https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md), using the following HTTP request:\r\n\r\n```\r\nGET /rest/blockpart/BLOCKHASH.bin?offset=OFFSET&size=SIZE\r\n```\r\n\r\n- The offsets' index can be encoded much more efficiently ([~1.3GB today](https://github.com/romanz/bindex-rs/pull/66#issuecomment-3508476436)).\r\n\r\n- Address history query performance can be tested on mainnet using [1BitcoinEaterAddressDontSendf59kuE](https://mempool.space/address/1BitcoinEaterAddressDontSendf59kuE) - assuming warm OS block cache, [it takes <1s to fetch 5200 txs, i.e. <0.2ms per tx](https://github.com/romanz/bindex-rs/pull/66#issuecomment-3508476436) with [bindex](https://github.com/romanz/bindex-rs).\r\n\r\n- Only binary and hex response formats are supported.\r\n\r\n[^1]: https://github.com/romanz/electrs/blob/master/doc/schema.md\r\n[^2]: https://github.com/Blockstream/electrs/blob/new-index/doc/schema.md#txstore\r\n[^3]: https://github.com/spesmilo/electrumx/blob/master/docs/HOWTO.rst#prerequisites\r\n[^4]: https://github.com/cculianu/Fulcrum/blob/master/README.md#requirements\r\n\r\n",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2025-10-19T11:08:00Z",
    "updated_at": "2025-12-27T18:46:27Z",
    "closed_at": "2025-12-12T13:22:07Z",
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2025-12-12T13:22:06Z",
    "merged_by": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "merge_commit_sha": "938d7aacabd0bb3784bb3e529b1ed06bb2891864",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "romanz:romanz/rest-blockdata",
      "ref": "romanz/rest-blockdata",
      "sha": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 125523455,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMjU1MjM0NTU=",
        "name": "bitcoin",
        "full_name": "romanz/bitcoin",
        "owner": {
          "login": "romanz",
          "id": 9900,
          "node_id": "MDQ6VXNlcjk5MDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/romanz",
          "html_url": "https://github.com/romanz",
          "followers_url": "https://api.github.com/users/romanz/followers",
          "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
          "organizations_url": "https://api.github.com/users/romanz/orgs",
          "repos_url": "https://api.github.com/users/romanz/repos",
          "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/romanz/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/romanz/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/romanz/bitcoin",
        "archive_url": "https://api.github.com/repos/romanz/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/romanz/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/romanz/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/romanz/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/romanz/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/romanz/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/romanz/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/romanz/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/romanz/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/romanz/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/romanz/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/romanz/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/romanz/bitcoin/events",
        "forks_url": "https://api.github.com/repos/romanz/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/romanz/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/romanz/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/romanz/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/romanz/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/romanz/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/romanz/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/romanz/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/romanz/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/romanz/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/romanz/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/romanz/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/romanz/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/romanz/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/romanz/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/romanz/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:romanz/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/romanz/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/romanz/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/romanz/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/romanz/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/romanz/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/romanz/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/romanz/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/romanz/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/romanz/bitcoin/hooks",
        "svn_url": "https://github.com/romanz/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 275017,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-18T20:49:13Z",
        "created_at": "2018-03-16T13:59:02Z",
        "updated_at": "2025-12-18T21:06:48Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5be20c380dcb38160d41d8f4b226d92b69c12523",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38413,
        "stargazers_count": 87383,
        "watchers_count": 87383,
        "size": 301051,
        "default_branch": "master",
        "open_issues_count": 726,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-27T16:35:25Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-12-27T18:53:48Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 216,
    "deletions": 48,
    "changed_files": 11,
    "commits": 3,
    "review_comments": 207,
    "comments": 37
  },
  "events": [
    {
      "event": "labeled",
      "id": 20366281883,
      "node_id": "LE_lADOABII587SZwXIzwAAAAS97Myb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20366281883",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-19T11:08:03Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 3419579130,
      "node_id": "IC_kwDOABII587L0qL6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3419579130",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-19T11:08:05Z",
      "updated_at": "2025-12-12T13:00:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33657.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3643843248), [hodlinator](https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3571618055), [l0rinc](https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3646374389) |\n| Concept ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3425689192) |\n| Stale ACK | [ubbabeck](https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3433931938), [sedited](https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3536915373) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33727](https://github.com/bitcoin/bitcoin/pull/33727) (zmq: Log bind error at Error level, abort startup on init error by isrod)\n* [#31860](https://github.com/bitcoin/bitcoin/pull/31860) (init: Take lock on blocks directory in BlockManager ctor by sedited)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3419579130",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20366481704,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAS979ko",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20366481704",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "created_at": "2025-10-19T12:07:57Z"
    },
    {
      "event": "commented",
      "id": 3419973259,
      "node_id": "IC_kwDOABII587L2KaL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3419973259",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-19T21:30:34Z",
      "updated_at": "2025-10-19T21:30:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "Some of the PR description is reused from the previous PR, but is now stale.\n\n> This PR is adding support for using the transaction's position within its block to be able to fetch it directly using REST API, using the following HTTP request (to fetch the N-th transaction from BLOCKHASH):\n\nThis does not support fetching an N-th transaction, only a slice of a block.\n\n> If binary response format is used, the transaction data will be read directly from the storage and sent back to the client, without any deserialization overhead.\n\nThere is no way to use this in non-binary form (except hex I suppose).",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3419973259",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3354714295,
      "node_id": "PRR_kwDOABII587H9OC3",
      "url": null,
      "actor": null,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-19T23:04:43Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3354714295",
      "submitted_at": "2025-10-19T23:04:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3356129025,
      "node_id": "PRR_kwDOABII587ICncB",
      "url": null,
      "actor": null,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-20T11:26:34Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3356129025",
      "submitted_at": "2025-10-20T11:26:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3356139262,
      "node_id": "PRR_kwDOABII587ICp7-",
      "url": null,
      "actor": null,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-20T11:31:05Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3356139262",
      "submitted_at": "2025-10-20T11:31:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20388309899,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAS_POuL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20388309899",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c4bf7a77c45e297672222a2e1a984ef8d755b471",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/c4bf7a77c45e297672222a2e1a984ef8d755b471",
      "created_at": "2025-10-20T20:20:45Z"
    },
    {
      "event": "commented",
      "id": 3423601774,
      "node_id": "IC_kwDOABII587MEARu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3423601774",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-20T20:23:27Z",
      "updated_at": "2025-10-20T20:23:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Some of the PR description is reused from the previous PR, but is now stale.\r\n\r\nGood catch, thanks!\r\nUpdated PR description: https://github.com/bitcoin/bitcoin/pull/33657#issue-3529967048",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3423601774",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20395306433,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAS_p63B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20395306433",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c9bfd298be422de7e989fe244fb4281c507068a3",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/c9bfd298be422de7e989fe244fb4281c507068a3",
      "created_at": "2025-10-21T05:59:57Z"
    },
    {
      "event": "commented",
      "id": 3425689192,
      "node_id": "IC_kwDOABII587ML95o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3425689192",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-21T09:48:17Z",
      "updated_at": "2025-10-21T09:48:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK c9bfd298be422de7e989fe244fb4281c507068a3",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3425689192",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20414529654,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATAzQB2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20414529654",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/301116e85540e49c27473f450fc210b702db4cf5",
      "created_at": "2025-10-21T20:24:53Z"
    },
    {
      "event": "review_requested",
      "id": 20422267095,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATBQxDX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20422267095",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-22T07:00:49Z",
      "requested_reviewer": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3433931938,
      "node_id": "IC_kwDOABII587MraSi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3433931938",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-22T19:33:49Z",
      "updated_at": "2025-10-22T19:33:49Z",
      "author_association": "NONE",
      "body": "tACK 301116e855\r\n\r\nWhat was done:\r\n- functional test.\r\n- unit test\r\n- tested the new rest endpoint `rest/blockpart/<blockhash>.bin`  manually with curl with different offsets and sizes. \r\n\r\nIf there are any additional test you'd like me to help with let me know. \r\nI also did a perf dump, but I need some guidelines on what to measure/ grep for.  ",
      "user": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3433931938",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "review_requested",
      "id": 20438828706,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATCP8ai",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20438828706",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-22T19:33:54Z",
      "requested_reviewer": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3434299935,
      "node_id": "IC_kwDOABII587Ms0If",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3434299935",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-22T21:44:16Z",
      "updated_at": "2025-10-22T21:44:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Many thanks @ubbabeck!\r\n\r\n> If there are any additional test you'd like me to help with let me know.\r\n\r\nIt would be interesting to compare the performance for single transaction fetching, similar to how it was done in https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-2897330791, comparing `txindex`-based and `locationindex`-based queries.",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3434299935",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 20440921281,
      "node_id": "MEE_lADOABII587SZwXIzwAAAATCX7TB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20440921281",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-22T21:44:17Z"
    },
    {
      "event": "subscribed",
      "id": 20440921307,
      "node_id": "SE_lADOABII587SZwXIzwAAAATCX7Tb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20440921307",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-22T21:44:17Z"
    },
    {
      "event": "commented",
      "id": 3438168264,
      "node_id": "IC_kwDOABII587M7kjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3438168264",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-23T17:12:14Z",
      "updated_at": "2025-10-23T17:19:25Z",
      "author_association": "NONE",
      "body": "> It would be interesting to compare the performance for single transaction fetching, similar to how it was done in [#32541 (comment)](https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-2897330791), comparing `txindex`-based and `locationindex`-based queries.\r\n\r\nHere are the results from testing. I used hey to benchmark and your rust getrawtransaction. \r\n\r\nWas this somewhat you were looking for? If not let me know and I'll redo them correctly.\r\n\r\nMaybe not relevant to test, but fetching the whole block using blockpart.\r\n\r\n`hey -c 1 -n 100000 http://localhost:8332/rest/blockpart/000000000000000000017bfd05b5fa367a424c4a565a4baf7950d9e8605df8ec.bin`\r\n\r\n<details>\r\n\r\n```\r\nSummary:\r\n  Total:\t114.4020 secs\r\n  Slowest:\t0.0048 secs\r\n  Fastest:\t0.0009 secs\r\n  Average:\t0.0011 secs\r\n  Requests/sec:\t874.1103\r\n\r\n  Total data:\t146938500000 bytes\r\n  Size/request:\t1469385 bytes\r\n\r\nResponse time histogram:\r\n  0.001 [1]\t|\r\n  0.001 [93859]\t|\r\n  0.002 [4835]\t|\r\n  0.002 [1052]\t|\r\n  0.002 [165]\t|\r\n  0.003 [65]\t|\r\n  0.003 [20]\t|\r\n  0.004 [2]\t|\r\n  0.004 [0]\t|\r\n  0.004 [0]\t|\r\n  0.005 [1]\t|\r\n\r\n\r\nLatency distribution:\r\n  10% in 0.0010 secs\r\n  25% in 0.0011 secs\r\n  50% in 0.0011 secs\r\n  75% in 0.0012 secs\r\n  90% in 0.0013 secs\r\n  95% in 0.0013 secs\r\n  99% in 0.0018 secs\r\n\r\nDetails (average, fastest, slowest):\r\n  DNS+dialup:\t0.0000 secs, 0.0009 secs, 0.0048 secs\r\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0006 secs\r\n  req write:\t0.0000 secs, 0.0000 secs, 0.0003 secs\r\n  resp wait:\t0.0004 secs, 0.0002 secs, 0.0034 secs\r\n  resp read:\t0.0007 secs, 0.0002 secs, 0.0030 secs\r\n\r\nStatus code distribution:\r\n  [200]\t100000 responses\r\n\r\n\r\n```\r\n</details>\r\n\r\nUsing a random offset and size of 310 bytes to simulate fetching a transaction.\r\n\r\n\r\n`hey -c 16 -n 100000 http://localhost:8332/rest/blockpart/000000000000000000017bfd05b5fa367a424c4a565a4baf7950d9e8605df8ec.bin\\?offset\\=4000\\&size\\=310`\r\n\r\n<details>\r\n\r\n```\r\nSummary:\r\n  Total:\t1.7338 secs\r\n  Slowest:\t0.0023 secs\r\n  Fastest:\t0.0001 secs\r\n  Average:\t0.0003 secs\r\n  Requests/sec:\t57675.3814\r\n  \r\n  Total data:\t31000000 bytes\r\n  Size/request:\t310 bytes\r\n\r\nResponse time histogram:\r\n  0.000 [1]\t|\r\n  0.000 [57797]\t|\r\n  0.000 [41217]\t|\r\n  0.001 [824]\t|\r\n  0.001 [76]\t|\r\n  0.001 [10]\t|\r\n  0.001 [15]\t|\r\n  0.002 [20]\t|\r\n  0.002 [24]\t|\r\n  0.002 [10]\t|\r\n  0.002 [6]\t|\r\n\r\n\r\nLatency distribution:\r\n  10% in 0.0002 secs\r\n  25% in 0.0003 secs\r\n  50% in 0.0003 secs\r\n  75% in 0.0003 secs\r\n  90% in 0.0003 secs\r\n  95% in 0.0003 secs\r\n  99% in 0.0005 secs\r\n\r\nDetails (average, fastest, slowest):\r\n  DNS+dialup:\t0.0000 secs, 0.0001 secs, 0.0023 secs\r\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0015 secs\r\n  req write:\t0.0000 secs, 0.0000 secs, 0.0008 secs\r\n  resp wait:\t0.0003 secs, 0.0000 secs, 0.0018 secs\r\n  resp read:\t0.0000 secs, 0.0000 secs, 0.0007 secs\r\n\r\nStatus code distribution:\r\n  [200]\t100000 responses\r\n\r\n```\r\n\r\n</details>\r\n\r\n\r\nOne runner\r\n\r\n`hey -c 1 -n 100000 http://localhost:8332/rest/blockpart/000000000000000000017bfd05b5fa367a424c4a565a4baf7950d9e8605df8ec.bin\\?offset\\=4000\\&size\\=310`\r\n\r\n<details>\r\n\r\n```\r\nSummary:\r\n  Total:\t1.7338 secs\r\n  Slowest:\t0.0023 secs\r\n  Fastest:\t0.0001 secs\r\n  Average:\t0.0003 secs\r\n  Requests/sec:\t57675.3814\r\n  \r\n  Total data:\t31000000 bytes\r\n  Size/request:\t310 bytes\r\n\r\nResponse time histogram:\r\n  0.000 [1]\t|\r\n  0.000 [57797]\t|\r\n  0.000 [41217]\t|\r\n  0.001 [824]\t|\r\n  0.001 [76]\t|\r\n  0.001 [10]\t|\r\n  0.001 [15]\t|\r\n  0.002 [20]\t|\r\n  0.002 [24]\t|\r\n  0.002 [10]\t|\r\n  0.002 [6]\t|\r\n\r\n\r\nLatency distribution:\r\n  10% in 0.0002 secs\r\n  25% in 0.0003 secs\r\n  50% in 0.0003 secs\r\n  75% in 0.0003 secs\r\n  90% in 0.0003 secs\r\n  95% in 0.0003 secs\r\n  99% in 0.0005 secs\r\n\r\nDetails (average, fastest, slowest):\r\n  DNS+dialup:\t0.0000 secs, 0.0001 secs, 0.0023 secs\r\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0015 secs\r\n  req write:\t0.0000 secs, 0.0000 secs, 0.0008 secs\r\n  resp wait:\t0.0003 secs, 0.0000 secs, 0.0018 secs\r\n  resp read:\t0.0000 secs, 0.0000 secs, 0.0007 secs\r\n\r\nStatus code distribution:\r\n  [200]\t100000 responses\r\n\r\n```\r\n\r\n</details>\r\n\r\n\r\n[Rust getrawtransaction benchmark](https://gist.github.com/romanz/2630210f497b69d605cdb831fd057b98)\r\n\r\n```\r\ntime cargo run --release -- 4137d0dbad434d68a4f52b7bebcba91ddac3f7f5c92b84130432bd6b5e2ea57a 0000000000000000000083a0cff38278aae196d6d923a7e8ee7e5a0e371226fe\r\n   Compiling bench-getrawtx v0.1.0 (review/bench-getrawtx)\r\n    Finished `release` profile [optimized] target(s) in 0.29s\r\n     Running `target/x86_64-unknown-linux-gnu/release/bench-getrawtx 4137d0dbad434d68a4f52b7bebcba91ddac3f7f5c92b84130432bd6b5e2ea57a 0000000000000000000083a0cff38278aae196d6d923a7e8ee7e5a0e371226fe`\r\niterations = 100000\r\naverage RPC duration = 130.319s\r\ncargo run --release --    1.29s user 1.09s system 17% cpu 13.342 total\r\n```\r\n",
      "user": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3438168264",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "commented",
      "id": 3447786473,
      "node_id": "IC_kwDOABII587NgQvp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3447786473",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T21:43:48Z",
      "updated_at": "2025-10-25T21:43:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Tested the performance of the new REST endpoint using `ab` on mainnet with various `SIZE` parameters:\r\n```\r\n$ BLOCKHASH=00000000000000000001eae3683a5350b67ddb17d9c7b6c8010ab5b36ccbaa09\r\n$ ab -q -k -c 1 -n 100000 'http://localhost:8332/rest/blockpart/BLOCKHASH.bin?offset=0&size=SIZE'\r\n```\r\n| `SIZE` | Time per request [ms] |\r\n| - | - |\r\n| 1 | 0.03 |\r\n| 10 | 0.03 | \r\n| 100 | 0.03 | \r\n| 1k | 0.03 |\r\n| 10k | 0.04 |\r\n| 100k | 0.07 |\r\n| 1M | 0.6 |\r\n\r\nSo fetching a typical transaction is expected to take <40us on my machine.\r\n\r\n@ubbabeck could you please test it too?",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3447786473",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 20504731881,
      "node_id": "MEE_lADOABII587SZwXIzwAAAATGLWDp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20504731881",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T21:43:50Z"
    },
    {
      "event": "subscribed",
      "id": 20504731886,
      "node_id": "SE_lADOABII587SZwXIzwAAAATGLWDu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20504731886",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T21:43:50Z"
    },
    {
      "event": "commented",
      "id": 3447826732,
      "node_id": "IC_kwDOABII587Ngaks",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3447826732",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-25T22:19:49Z",
      "updated_at": "2025-10-25T22:20:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Compared your command fetching SIZE=788 and block 850000 with a 788 byte tx in that block 2d2dcc80195541dd44209dcfeb25393c8c8710f262360368a618b7ff3fa3f08c using `getrawtransaction` with `txindex`. I used hex encoding to make the comparison more fair.\r\n\r\n```\r\nab -q -k -c 1 -n 1000000 'http://localhost:8332/rest/blockpart/00000000000000000002a0b5db2a7f8d9087464c2586b546be7bce8eb53b8187.hex?offset=0&size=788'\r\n```\r\nI got `Time per request:       0.037 [ms] (mean)`.\r\n\r\nCompared with RPC `getrawtransaction`:\r\n```\r\nab -q -k -c 1 -n 1000000 -p data.json -A user:password 'http://localhost:8332/'\r\n```\r\nwhere `user:password` are what is set in the config and `data.json` is\r\n```\r\n{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getrawtransaction\", \"params\": [\"2d2dcc80195541dd44209dcfeb25393c8c8710f262360368a618b7ff3fa3f08c\"]}\r\n```\r\nI got `Time per request:       0.135 [ms] (mean)`. So quite a bit faster with the blockpart method.\r\n\r\nUsing binary encoding `Time per request:       0.032 [ms] (mean)`. Slightly faster.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3447826732",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "commented",
      "id": 3448550601,
      "node_id": "IC_kwDOABII587NjLTJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3448550601",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-26T13:39:17Z",
      "updated_at": "2025-10-26T13:39:17Z",
      "author_association": "NONE",
      "body": "> @ubbabeck could you please test it too?\r\n\r\nSure here her my results for the same test using the same params and ApacheBench, Version 2.3\r\n<details>\r\n\r\n| SIZE | Time per request [ms] |\r\n| ---- | --------------------- |\r\n| 1    | 0.046                 |\r\n| 10   | 0.046                 |\r\n| 100  | 0.050                 |\r\n| 1k   | 0.050                 |\r\n| 10k  | 0.054                 |\r\n| 100k | 0.113                 |\r\n| 1m   | 0.803                 |\r\n\r\nFetching  on average tx on my system is expected to take <0.05 ms\r\n\r\n\r\nFor fetching `2d2dcc80195541dd44209dcfeb25393c8c8710f262360368a618b7ff3fa3f08c` as Andrew did.\r\n\r\n| Blockpart ms | rpc `getrawtransaction` ms | diff  |\r\n| ------------ | -------------------------- | ----- |\r\n| 0.022        | 0.104                      | 0.082 |\r\n\r\n</details>\r\n",
      "user": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3448550601",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 20509807805,
      "node_id": "MEE_lADOABII587SZwXIzwAAAATGetS9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20509807805",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-26T13:39:18Z"
    },
    {
      "event": "subscribed",
      "id": 20509807814,
      "node_id": "SE_lADOABII587SZwXIzwAAAATGetTG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20509807814",
      "actor": {
        "login": "ubbabeck",
        "id": 36157890,
        "node_id": "MDQ6VXNlcjM2MTU3ODkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/36157890?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ubbabeck",
        "html_url": "https://github.com/ubbabeck",
        "followers_url": "https://api.github.com/users/ubbabeck/followers",
        "following_url": "https://api.github.com/users/ubbabeck/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ubbabeck/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ubbabeck/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ubbabeck/subscriptions",
        "organizations_url": "https://api.github.com/users/ubbabeck/orgs",
        "repos_url": "https://api.github.com/users/ubbabeck/repos",
        "events_url": "https://api.github.com/users/ubbabeck/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ubbabeck/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-26T13:39:19Z"
    },
    {
      "event": "reviewed",
      "id": 3399383695,
      "node_id": "PRR_kwDOABII587KnnqP",
      "url": null,
      "actor": null,
      "commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T12:53:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Made sure this also doesn't slow down normal block retrieval. There is a bit of extra logic in the hot path for `ReadRawBlock`, but I think this should be fine. ",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3399383695",
      "submitted_at": "2025-10-30T12:53:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20619743316,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATNCFBU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20619743316",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/c30647c4d34c2941696729704854467b30657c43",
      "created_at": "2025-10-30T20:56:51Z"
    },
    {
      "event": "reviewed",
      "id": 3402991102,
      "node_id": "PRR_kwDOABII587K1YX-",
      "url": null,
      "actor": null,
      "commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-31T08:17:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK c30647c4d34c2941696729704854467b30657c43",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3402991102",
      "submitted_at": "2025-10-31T08:17:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3407545416,
      "node_id": "PRR_kwDOABII587LGwRI",
      "url": null,
      "actor": null,
      "commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-01T14:02:10Z",
      "author_association": "NONE",
      "user": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3407545416",
      "submitted_at": "2025-11-01T14:02:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "commented",
      "id": 3478211267,
      "node_id": "IC_kwDOABII587PUUrD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3478211267",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-02T19:26:36Z",
      "updated_at": "2025-11-02T19:26:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "@romanz do you have a proof-of-concept for the tx indexer that will utilize this? It would be good to make sure this will be sufficient and performant enough for your requirements.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3478211267",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 20662175648,
      "node_id": "MEE_lADOABII587SZwXIzwAAAATPj8eg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20662175648",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-02T19:26:37Z"
    },
    {
      "event": "subscribed",
      "id": 20662175653,
      "node_id": "SE_lADOABII587SZwXIzwAAAATPj8el",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20662175653",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-02T19:26:37Z"
    },
    {
      "event": "commented",
      "id": 3482711385,
      "node_id": "IC_kwDOABII587PlfVZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3482711385",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T21:41:14Z",
      "updated_at": "2025-11-03T21:41:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "> do you have a proof-of-concept for the tx indexer that will utilize this?\r\n\r\nYes - I am working on a PR to adapt `bindex` to use the new REST API endpoint.\r\nAssuming warm OS block cache, https://github.com/romanz/bindex-rs/pull/63#issuecomment-3448841256 achieves retrieval rate of ~10k txs/second when querying a \"popular\" signet address.\r\n\r\nWill test it on mainnet as well :)",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3482711385",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "commented",
      "id": 3484111220,
      "node_id": "IC_kwDOABII587Pq1F0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3484111220",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-04T06:33:15Z",
      "updated_at": "2025-11-06T18:35:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "Tested mainnet query performance using https://mempool.space/address/1BitcoinEaterAddressDontSendf59kuE. \r\nAssuming warm OS block cache, https://github.com/romanz/bindex-rs/pull/63#issuecomment-3484098889 takes <1s to fetch 5190 txs, i.e. <0.2ms per tx :+1:",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3484111220",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20808805213,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATYTStd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20808805213",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9a4c016b9c41ad711d7be487d6f450659246af0a",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/9a4c016b9c41ad711d7be487d6f450659246af0a",
      "created_at": "2025-11-08T17:06:44Z"
    },
    {
      "event": "commented",
      "id": 3506722651,
      "node_id": "IC_kwDOABII587RBFdb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3506722651",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T17:07:29Z",
      "updated_at": "2025-11-08T17:31:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "[Added](https://github.com/bitcoin/bitcoin/compare/c30647c4d34c2941696729704854467b30657c43..e14650967dc95da5c10e0d6183b6eac3e8243fe5) REST API documentation and release notes & added a comment for `rest_block` (following @oren-z0 [review](https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2483977816)).",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3506722651",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20808837260,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATYTaiM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20808837260",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "created_at": "2025-11-08T17:13:33Z"
    },
    {
      "event": "labeled",
      "id": 20808839554,
      "node_id": "LE_lADOABII587SZwXIzwAAAATYTbGC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20808839554",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T17:14:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3506727220,
      "node_id": "IC_kwDOABII587RBGk0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3506727220",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T17:14:23Z",
      "updated_at": "2025-11-08T17:14:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19196021604/job/54877130784</sub>\n<sub>LLM reason ( experimental): Lint failure: release note snippets are in the wrong folder (doc_release_note_snippets detected; should be /doc/release-notes-<PR>.md).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3506727220",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 20808846083,
      "node_id": "MEE_lADOABII587SZwXIzwAAAATYTcsD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20808846083",
      "actor": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T17:15:27Z"
    },
    {
      "event": "subscribed",
      "id": 20808846088,
      "node_id": "SE_lADOABII587SZwXIzwAAAATYTcsI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20808846088",
      "actor": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T17:15:27Z"
    },
    {
      "event": "unlabeled",
      "id": 20809029627,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAATYUJf7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20809029627",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T17:56:56Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 20809316858,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATYVPn6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20809316858",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-08T19:00:18Z",
      "requested_reviewer": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3538691286,
      "node_id": "IC_kwDOABII587S7CTW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3538691286",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-16T12:15:51Z",
      "updated_at": "2025-11-16T12:16:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated [PR's description](https://github.com/bitcoin/bitcoin/pull/33657#issue-3529967048) with query performance and external offset index size for mainnet:\r\n<img width=\"1093\" height=\"297\" alt=\"image\" src=\"https://github.com/user-attachments/assets/88ade527-c26d-4572-af9d-cdca166ba7dd\" />\r\n",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3538691286",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3470261623,
      "node_id": "PRR_kwDOABII587O1_13",
      "url": null,
      "actor": null,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-16T15:43:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "Since happy path performance is important here, maybe adding `[[unlikely]]` attributes for all error paths could yield a benefit.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3470261623",
      "submitted_at": "2025-11-16T15:43:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "commented",
      "id": 3538991279,
      "node_id": "IC_kwDOABII587S8Liv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3538991279",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-16T17:28:14Z",
      "updated_at": "2025-11-16T17:42:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks @andrewtoth! \r\nI have applied the patch below on e14650967d, but it seems that it didn't improve the following benchmark performance (reading the smallest possible amount of data from a block):\r\n```\r\n$ BLOCKHASH=00000000000000000001878540abd91b4dd591287ee58de73a163b698748f23b\r\n$ ab -q -k -c 1 -n 100000 \"http://localhost:8332/rest/blockpart/$BLOCK.bin?offset=0&size=1\"\r\n...\r\nServer Software:        \r\nServer Hostname:        localhost\r\nServer Port:            8332\r\n\r\nDocument Path:          /rest/blockpart/00000000000000000001878540abd91b4dd591287ee58de73a163b698748f23b.bin?offset=0&size=1\r\nDocument Length:        1 bytes\r\n\r\nConcurrency Level:      1\r\nTime taken for tests:   4.395 seconds\r\nComplete requests:      100000\r\nFailed requests:        0\r\nKeep-Alive requests:    100000\r\nTotal transferred:      10300000 bytes\r\nHTML transferred:       100000 bytes\r\nRequests per second:    22750.88 [#/sec] (mean)\r\nTime per request:       0.044 [ms] (mean)\r\nTime per request:       0.044 [ms] (mean, across all concurrent requests)\r\nTransfer rate:          2288.42 [Kbytes/sec] received\r\n\r\n\r\n$ ab -V\r\nThis is ApacheBench, Version 2.3 <$Revision: 1903618 $>\r\n```\r\n<details>\r\n\r\n<summary> Patch </summary>\r\n\r\n```diff\r\ndiff --git a/src/node/blockstorage.cpp b/src/node/blockstorage.cpp\r\nindex 47beac674c..6a3f39f737 100644\r\n--- a/src/node/blockstorage.cpp\r\n+++ b/src/node/blockstorage.cpp\r\n@@ -1084,7 +1084,7 @@ bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFile\r\n \r\n         size_t offset = 0;\r\n         if (part_offset.has_value()) {\r\n-            if (*part_offset > blk_size) {\r\n+            if (*part_offset > blk_size) [[unlikely]] {\r\n                 LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\r\n                 return false;\r\n             }\r\n@@ -1093,7 +1093,7 @@ bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFile\r\n \r\n         size_t size = blk_size - offset;\r\n         if (part_size.has_value()) {\r\n-            if (*part_size > size || *part_size == 0) {\r\n+            if (*part_size > size || *part_size == 0) [[unlikely]] {\r\n                 LogError(\"Read from block file failed: invalid size: %u\", *part_size);\r\n                 return false;\r\n             }\r\ndiff --git a/src/rest.cpp b/src/rest.cpp\r\nindex f3edc69d09..8e1c35b153 100644\r\n--- a/src/rest.cpp\r\n+++ b/src/rest.cpp\r\n@@ -454,7 +454,7 @@ static bool rest_block(const std::any& context,\r\n     }\r\n \r\n     case RESTResponseFormat::JSON: {\r\n-        if (!tx_verbosity.has_value()) {\r\n+        if (!tx_verbosity.has_value()) [[unlikely]] {\r\n             return RESTERR(req, HTTP_BAD_REQUEST, \"JSON output is not supported for this request type\");\r\n         }\r\n         CBlock block{};\r\n@@ -491,14 +491,14 @@ static bool rest_block_part(const std::any& context, HTTPRequest* req, const std\r\n         const auto part_offset_str = req->GetQueryParameter(\"offset\");\r\n         if (part_offset_str.has_value()) {\r\n             part_offset = ToIntegral<size_t>(*part_offset_str);\r\n-            if (!part_offset.has_value()) {\r\n+            if (!part_offset.has_value()) [[unlikely]] {\r\n                 return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\r\n             }\r\n         }\r\n         const auto part_size_str = req->GetQueryParameter(\"size\");\r\n         if (part_size_str.has_value()) {\r\n             part_size = ToIntegral<size_t>(*part_size_str);\r\n-            if (!part_size.has_value()) {\r\n+            if (!part_size.has_value()) [[unlikely]] {\r\n                 return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\r\n             }\r\n         }\r\n```\r\n\r\n</details>\r\n\r\nIn both cases (with the patch and without it), the benchmark takes ~4.4s (~44us/req = ~23k req/s).\r\n",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3538991279",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 20973106027,
      "node_id": "MEE_lADOABII587SZwXIzwAAAATiGDNr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20973106027",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-16T17:28:15Z"
    },
    {
      "event": "subscribed",
      "id": 20973106044,
      "node_id": "SE_lADOABII587SZwXIzwAAAATiGDN8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20973106044",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-16T17:28:15Z"
    },
    {
      "event": "review_requested",
      "id": 20974062319,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATiJsrv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20974062319",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-16T19:37:06Z",
      "requested_reviewer": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3492740506,
      "node_id": "PRR_kwDOABII587QLv2a",
      "url": null,
      "actor": null,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-21T14:50:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK e14650967dc95da5c10e0d6183b6eac3e8243fe5\n\n#32541 contained some useful tricks that seem to be useful to shrink other index implementations. Thanks for letting it go in favor of this less invasive change though!",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3492740506",
      "submitted_at": "2025-11-21T14:50:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21103482555,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATp3Za7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21103482555",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "655e4d8fa5589b9c61465571ddbf5a45d04cfeb2",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/655e4d8fa5589b9c61465571ddbf5a45d04cfeb2",
      "created_at": "2025-11-21T18:54:42Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21103598322,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATp31ry",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21103598322",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "created_at": "2025-11-21T19:01:24Z"
    },
    {
      "event": "labeled",
      "id": 21103606720,
      "node_id": "LE_lADOABII587SZwXIzwAAAATp33vA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21103606720",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T19:02:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 21104342249,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAATp6rTp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21104342249",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T19:48:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 21104380824,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATp60uY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21104380824",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-21T19:50:41Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3494446000,
      "node_id": "PRR_kwDOABII587QSQOw",
      "url": null,
      "actor": null,
      "commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-21T21:38:52Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3494446000",
      "submitted_at": "2025-11-21T21:38:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21111682920,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATqWrdo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21111682920",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/78d6402458d7d14533444d893c989f0534a3896f",
      "created_at": "2025-11-22T07:24:49Z"
    },
    {
      "event": "review_requested",
      "id": 21115690401,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATql92h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21115690401",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-22T15:29:38Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3500228951,
      "node_id": "PRR_kwDOABII587QoUFX",
      "url": null,
      "actor": null,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-24T12:50:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK 78d6402458d7d14533444d893c989f0534a3896f",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3500228951",
      "submitted_at": "2025-11-24T12:50:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3499037428,
      "node_id": "PRR_kwDOABII587QjxL0",
      "url": null,
      "actor": null,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-24T14:43:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "Reviewed 78d6402458d7d14533444d893c989f0534a3896f\n\nMain issue blocking A-C-K is in doc/REST-interface.md (see inline comment).\n\nLeft minor comment/question in related presentation: https://docs.google.com/presentation/d/1Zez-6DApKRu59kke4i_g9jwxQlaFKKRpOPdYFYsFXfA/edit?disco=AAABwl3JY0U\n(I was re-reading it to remind myself why switching from a tx hash to a block hash would be more efficient, re-realized that mapping block height=>block hash is quite natural).\n\nExperimented with further optimizations in https://github.com/hodlinator/bitcoin/tree/pr/33657_follow-ups, but as branch name suggests, they need more work and should probably be done as follow-ups. I've been unable to measure a stable & really notable performance-improvement yet.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3499037428",
      "submitted_at": "2025-11-24T14:43:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21140672276,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATsFQ8U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21140672276",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T14:43:56Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21147975396,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATshH7k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21147975396",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "c2088a74586742cadc0041cab8782c423eda3bd0",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/c2088a74586742cadc0041cab8782c423eda3bd0",
      "created_at": "2025-11-24T20:10:01Z"
    },
    {
      "event": "commented",
      "id": 3572749774,
      "node_id": "IC_kwDOABII587U89XO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3572749774",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-24T21:12:19Z",
      "updated_at": "2025-11-24T21:12:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks!\r\n\r\n> Left minor comment/question in related presentation: https://docs.google.com/presentation/d/1Zez-6DApKRu59kke4i_g9jwxQlaFKKRpOPdYFYsFXfA/edit?disco=AAABwl3JY0U\r\n\r\nGood point - I've changed a bit the slide, and added a few comments.\r\n\r\nThis should be similar to the [electrs schema](https://github.com/romanz/electrs/blob/master/doc/schema.md), but with `txnum` instead of block height.",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3572749774",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3504441013,
      "node_id": "PRR_kwDOABII587Q4Ya1",
      "url": null,
      "actor": null,
      "commit_id": "c2088a74586742cadc0041cab8782c423eda3bd0",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-25T10:40:12Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3504441013",
      "submitted_at": "2025-11-25T10:40:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21170177421,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATt10WN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21170177421",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "created_at": "2025-11-25T17:24:31Z"
    },
    {
      "event": "review_requested",
      "id": 21170220077,
      "node_id": "RRE_lADOABII587SZwXIzwAAAATt1-wt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21170220077",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-25T17:26:42Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3509833324,
      "node_id": "PRR_kwDOABII587RM85s",
      "url": null,
      "actor": null,
      "commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-26T09:34:22Z",
      "author_association": "MEMBER",
      "body": "lgtm, but i think the error handling can be improved?\n\nlgtm ff5c3feceaba496ff25efd8420cfcc32e0864bcc \n\n<details><summary>Show signature</summary>\n\nSignature:\n\n```\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\ntrusted comment: lgtm ff5c3feceaba496ff25efd8420cfcc32e0864bcc \nrYeG+6HnNmTxgjfUwQVqSoWF82BPiTgTmWMWaiT1YjY7jaNXF081kvStje78wygH2tE+kYnAmG1JxdSD79W+Dg==\n```\n\n</details>\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3509833324",
      "submitted_at": "2025-11-26T09:34:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21206378199,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATv_6bX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21206378199",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "created_at": "2025-11-26T22:22:24Z"
    },
    {
      "event": "reviewed",
      "id": 3518219173,
      "node_id": "PRR_kwDOABII587Rs8Ol",
      "url": null,
      "actor": null,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-28T09:55:41Z",
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3518219173",
      "submitted_at": "2025-11-28T09:55:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21247754967,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATydwLX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21247754967",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "26999bcc35bea6bc2ce266e5e51433e14431448c",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/26999bcc35bea6bc2ce266e5e51433e14431448c",
      "created_at": "2025-11-28T20:25:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21247961326,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATyeiju",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21247961326",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "60a132bedbaf8dea4cf5be0c367fa31d838b9d57",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/60a132bedbaf8dea4cf5be0c367fa31d838b9d57",
      "created_at": "2025-11-28T20:53:03Z"
    },
    {
      "event": "labeled",
      "id": 21247967807,
      "node_id": "LE_lADOABII587SZwXIzwAAAATyekI_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21247967807",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T20:54:05Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3590427885,
      "node_id": "IC_kwDOABII587WAZTt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3590427885",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T20:54:19Z",
      "updated_at": "2025-11-28T20:54:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19773241080/job/56661356997</sub>\n<sub>LLM reason ( experimental): Lint check failed: unused import typing.Optional detected by ruff, causing non-zero exit.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3590427885",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21248113133,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATyfHnt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21248113133",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "ae3d3c68cb01856d6bbd42f7e8fd445893a2189d",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/ae3d3c68cb01856d6bbd42f7e8fd445893a2189d",
      "created_at": "2025-11-28T21:15:16Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21248245282,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAATyfn4i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21248245282",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f33eafff0f3c2698ee69ccef800bbc70a4eeae86",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/f33eafff0f3c2698ee69ccef800bbc70a4eeae86",
      "created_at": "2025-11-28T21:33:19Z"
    },
    {
      "event": "unlabeled",
      "id": 21248566183,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAATyg2On",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21248566183",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-28T22:17:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3591536574,
      "node_id": "IC_kwDOABII587WEn--",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3591536574",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-29T10:14:19Z",
      "updated_at": "2025-11-29T10:14:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Many thanks for the review!\r\nPushed [`f50c0d9a3e..f33eafff0f`](https://github.com/bitcoin/bitcoin/compare/f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2..f33eafff0f3c2698ee69ccef800bbc70a4eeae86).",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3591536574",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3530944965,
      "node_id": "PRR_kwDOABII587SdfHF",
      "url": null,
      "actor": null,
      "commit_id": "f33eafff0f3c2698ee69ccef800bbc70a4eeae86",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T16:23:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK f33eafff0f3c2698ee69ccef800bbc70a4eeae86\n\nProvides a REST API useful to external indexers, that shouldn't be a source of egregious log spam (https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2564184625).\n\nMeasured performance before/after PR change to confirm no slowdown happened when fetching large blocks (URL: http://127.0.0.1:8332/rest/block/0000000000000000000515e202c8ae73c8155fc472422d7593af87aa74f2cf3d.bin).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3530944965",
      "submitted_at": "2025-12-02T16:23:19Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21310835000,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT2OYk4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21310835000",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-02T16:23:25Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21312024413,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT2S69d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21312024413",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/6826375e85a690d583cdeae3ff68d8703b1802ca",
      "created_at": "2025-12-02T17:12:07Z"
    },
    {
      "event": "reviewed",
      "id": 3531762528,
      "node_id": "PRR_kwDOABII587Sgmtg",
      "url": null,
      "actor": null,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T19:16:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 6826375e85a690d583cdeae3ff68d8703b1802ca",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3531762528",
      "submitted_at": "2025-12-02T19:16:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3531880902,
      "node_id": "PRR_kwDOABII587ShDnG",
      "url": null,
      "actor": null,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T19:55:26Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3531880902",
      "submitted_at": "2025-12-02T19:55:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3531852343,
      "node_id": "PRR_kwDOABII587Sg8o3",
      "url": null,
      "actor": null,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-02T20:39:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK 6826375e85a690d583cdeae3ff68d8703b1802ca",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3531852343",
      "submitted_at": "2025-12-02T20:39:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21317972698,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT2pnLa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21317972698",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "created_at": "2025-12-02T22:14:38Z"
    },
    {
      "event": "reviewed",
      "id": 3534148441,
      "node_id": "PRR_kwDOABII587SptNZ",
      "url": null,
      "actor": null,
      "commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T09:55:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3534148441",
      "submitted_at": "2025-12-03T09:55:54Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21328103701,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT3QQkV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21328103701",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T09:56:01Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3534235283,
      "node_id": "PRR_kwDOABII587SqCaT",
      "url": null,
      "actor": null,
      "commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T10:07:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3534235283",
      "submitted_at": "2025-12-03T10:07:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21340334073,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT3-6f5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21340334073",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7",
      "created_at": "2025-12-03T18:53:40Z"
    },
    {
      "event": "reviewed",
      "id": 3536580365,
      "node_id": "PRR_kwDOABII587Sy-8N",
      "url": null,
      "actor": null,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T20:33:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3536580365",
      "submitted_at": "2025-12-03T19:22:46Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21340918893,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT4BJRt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21340918893",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T19:22:52Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3536659569,
      "node_id": "PRR_kwDOABII587SzSRx",
      "url": null,
      "actor": null,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T20:33:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3536659569",
      "submitted_at": "2025-12-03T19:46:20Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21342276911,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT4GU0v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21342276911",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/e6eb4a57df9f0379550358e4362729bfe5953007",
      "created_at": "2025-12-03T20:33:44Z"
    },
    {
      "event": "commented",
      "id": 3608793203,
      "node_id": "IC_kwDOABII587XGdBz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3608793203",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T20:51:35Z",
      "updated_at": "2025-12-03T20:51:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "Split https://github.com/bitcoin/bitcoin/commit/d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7 into 3 commits:\r\n\r\n$ git lg -3\r\n* e6eb4a57df Roman Zeyde:  rest: allow reading partial block data from storage\r\n* 8f0bfb9343 Roman Zeyde:  blockstorage: allow reading partial block data from storage\r\n* 07b8278299 Roman Zeyde:  blockstorage: overload `ReadRawBlock()` to return an error code\r\n\r\nhttps://github.com/bitcoin/bitcoin/compare/d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7..e6eb4a57df9f0379550358e4362729bfe5953007",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3608793203",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3536915373,
      "node_id": "PRR_kwDOABII587S0Qut",
      "url": null,
      "actor": null,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-03T21:01:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK e6eb4a57df9f0379550358e4362729bfe5953007",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3536915373",
      "submitted_at": "2025-12-03T21:01:22Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21342803331,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT4IVWD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21342803331",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T21:01:27Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3609114450,
      "node_id": "IC_kwDOABII587XHrdS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3609114450",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-03T22:27:59Z",
      "updated_at": "2025-12-03T22:27:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Been running some benchmarks:\r\n\r\n```shell\r\n cmake --build build -t bench_bitcoin && ./build/bin/bench_bitcoin -filter=ReadRawBlockBench -min-time=15000\r\n```\r\n(Usually second run has lower error rate).\r\n\r\n### baseline - master - `07b82782~` = d30f149360\r\n\r\n```\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           85,950.97 |           11,634.54 |    0.1% |      262,668.04 |      118,748.52 |  2.212 |      18,171.03 |    0.1% |     16.44 | `ReadRawBlockBench`\r\n```\r\n\r\n### f07c765aa6bdba2511ceec56aa7f9755fa29a81e - out parameters\r\n\r\n```\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           86,022.91 |           11,624.81 |    0.1% |      262,706.03 |      117,878.09 |  2.229 |      18,177.03 |    0.1% |     16.51 | `ReadRawBlockBench`\r\n```\r\n\r\n### 07b82782991bba8e9a798421be742ba5bf729fc4 - std::variant\r\n\r\n```\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          108,644.58 |            9,204.33 |    0.1% |      263,338.06 |      199,792.36 |  1.318 |      18,307.05 |    0.1% |     15.97 | `ReadRawBlockBench`\r\n```\r\nOh, no!?\r\n\r\n### Tweaked 07b82782991bba8e9a798421be742ba5bf729fc4 to not use std::variant\r\n\r\n<details><summary>Diff</summary>\r\n\r\n```diff\r\ndiff --git a/src/node/blockstorage.cpp b/src/node/blockstorage.cpp\r\nindex 5eb80a6205..85deeff3c0 100644\r\n--- a/src/node/blockstorage.cpp\r\n+++ b/src/node/blockstorage.cpp\r\n@@ -1047,27 +1047,22 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\r\n \r\n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\r\n {\r\n-    auto ret{ReadRawBlock(pos)};\r\n-    if (auto* vec{std::get_if<std::vector<std::byte>>(&ret)}) {\r\n-        block = std::move(*vec);\r\n-        return true;\r\n-    }\r\n-    return false;\r\n+    return ReadRawBlockPart(block, pos) == ReadRawResult::Success;\r\n }\r\n \r\n-std::variant<std::vector<std::byte>, ReadRawError> BlockManager::ReadRawBlock(const FlatFilePos& pos) const\r\n+ReadRawResult BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos) const\r\n {\r\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\r\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\r\n         // This would cause an unsigned integer underflow when trying to position the file cursor\r\n         // This can happen after pruning or default constructed positions\r\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\r\n-        return ReadRawError::IO;\r\n+        return ReadRawResult::IOError;\r\n     }\r\n     AutoFile filein{OpenBlockFile({pos.nFile, pos.nPos - STORAGE_HEADER_BYTES}, /*fReadOnly=*/true)};\r\n     if (filein.IsNull()) {\r\n         LogError(\"OpenBlockFile failed for %s while reading raw block\", pos.ToString());\r\n-        return ReadRawError::IO;\r\n+        return ReadRawResult::IOError;\r\n     }\r\n \r\n     try {\r\n@@ -1079,24 +1074,23 @@ std::variant<std::vector<std::byte>, ReadRawError> BlockManager::ReadRawBlock(co\r\n         if (blk_start != GetParams().MessageStart()) {\r\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\r\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\r\n-            return ReadRawError::IO;\r\n+            return ReadRawResult::IOError;\r\n         }\r\n \r\n         if (blk_size > MAX_SIZE) {\r\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\r\n                 pos.ToString(), blk_size, MAX_SIZE);\r\n-            return ReadRawError::IO;\r\n+            return ReadRawResult::IOError;\r\n         }\r\n \r\n-        std::vector<std::byte> data;\r\n         data.resize(blk_size); // Zeroing of memory is intentional here\r\n         filein.read(data);\r\n-        return data;\r\n     } catch (const std::exception& e) {\r\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\r\n-        return ReadRawError::IO;\r\n+        return ReadRawResult::IOError;\r\n     }\r\n-    assert(false);\r\n+\r\n+    return ReadRawResult::Success;\r\n }\r\n \r\n FlatFilePos BlockManager::WriteBlock(const CBlock& block, int nHeight)\r\ndiff --git a/src/node/blockstorage.h b/src/node/blockstorage.h\r\nindex a58a661f7f..e335b9bc73 100644\r\n--- a/src/node/blockstorage.h\r\n+++ b/src/node/blockstorage.h\r\n@@ -127,8 +127,9 @@ struct BlockfileCursor {\r\n \r\n std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\r\n \r\n-enum class ReadRawError {\r\n-    IO,\r\n+enum class ReadRawResult {\r\n+    Success,\r\n+    IOError,\r\n };\r\n \r\n /**\r\n@@ -417,7 +418,7 @@ public:\r\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\r\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\r\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\r\n-    std::variant<std::vector<std::byte>, ReadRawError> ReadRawBlock(const FlatFilePos& pos) const;\r\n+    ReadRawResult ReadRawBlockPart(std::vector<std::byte>& block, const FlatFilePos& pos) const;\r\n \r\n     bool ReadBlockUndo(CBlockUndo& blockundo, const CBlockIndex& index) const;\r\n \r\n```\r\nNeeded to rename to `ReadRawBlockPart` to avoid collision with overload.\r\n\r\n</details>\r\n\r\n```\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           85,165.30 |           11,741.87 |    0.1% |      262,683.04 |      118,447.23 |  2.218 |      18,174.03 |    0.1% |     16.50 | `ReadRawBlockBench`\r\n```\r\n\r\n### Synthetic benchmark too synthetic?\r\n\r\nHowever, changing the benchmark to not reuse the same vector gets us back to slower speeds:\r\n\r\n```diff\r\n--- a/src/bench/readwriteblock.cpp\r\n+++ b/src/bench/readwriteblock.cpp\r\n@@ -60,7 +60,8 @@ static void ReadRawBlockBench(benchmark::Bench& bench)\r\n     std::vector<std::byte> block_data;\r\n     blockman.ReadRawBlock(block_data, pos); // warmup\r\n     bench.run([&] {\r\n-        const auto success{blockman.ReadRawBlock(block_data, pos)};\r\n+        std::vector<std::byte> new_block_data;\r\n+        const auto success{blockman.ReadRawBlock(new_block_data, pos)};\r\n         assert(success);\r\n     });\r\n }\r\n```\r\n\r\n```\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          111,627.84 |            8,958.34 |    0.1% |      263,330.06 |      197,929.86 |  1.330 |      18,299.06 |    0.1% |     16.03 | `ReadRawBlockBench`\r\n```\r\n\r\n### std::variant version from 07b82782991bba8e9a798421be742ba5bf729fc4 using the tweaked benchmark diff from just above\r\n\r\n```\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          111,701.66 |            8,952.42 |    0.1% |      263,285.06 |      197,639.24 |  1.332 |      18,292.05 |    0.1% |     16.01 | `ReadRawBlockBench`\r\n```\r\n\r\n### Conclusion\r\n\r\nIt would be good to decide whether we want the benchmark to re-use the vector or not. All current callers of `ReadRawBlock` outside of the benchmark send in fresh vectors AFAIK.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3609114450",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "commented",
      "id": 3610528091,
      "node_id": "IC_kwDOABII587XNElb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3610528091",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-04T06:33:59Z",
      "updated_at": "2025-12-04T07:06:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "Tested REST throughput using block #900000:\r\n```\r\nab -k -c 1 -n 10000 'http://localhost:8332/rest/block/000000000000000000010538edbfd2d5b809a33dd83f284aeea41c6d0d96968a.bin'\r\n```\r\n### d30f149360 (baseline - before this PR)\r\n```\r\nConcurrency Level:      1\r\nTime taken for tests:   11.033 seconds\r\nComplete requests:      10000\r\nFailed requests:        0\r\nKeep-Alive requests:    10000\r\nTotal transferred:      19208850000 bytes\r\nHTML transferred:       19207770000 bytes\r\nRequests per second:    906.33 [#/sec] (mean)\r\nTime per request:       1.103 [ms] (mean)\r\nTime per request:       1.103 [ms] (mean, across all concurrent requests)\r\nTransfer rate:          1700158.95 [Kbytes/sec] received\r\n```\r\n\r\n### e6eb4a57df (this PR)\r\n```\r\nConcurrency Level:      1\r\nTime taken for tests:   10.519 seconds\r\nComplete requests:      10000\r\nFailed requests:        0\r\nKeep-Alive requests:    10000\r\nTotal transferred:      19208850000 bytes\r\nHTML transferred:       19207770000 bytes\r\nRequests per second:    950.70 [#/sec] (mean)\r\nTime per request:       1.052 [ms] (mean)\r\nTime per request:       1.052 [ms] (mean, across all concurrent requests)\r\nTransfer rate:          1783387.76 [Kbytes/sec] received\r\n```\r\n\r\nThere is no block fetching performance degradation due to this PR.",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3610528091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3536872444,
      "node_id": "PRR_kwDOABII587S0GP8",
      "url": null,
      "actor": null,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-05T08:40:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for taking care of this and for splitting the change into smaller chunks.\r\nThe change is quite straightforward now, it helped with experimenting with it locally.\r\n\r\nConcept ACK\r\n\r\nI left a few suggestions:\r\n\r\n* `std::variant` is not meant to be used as an error monad, it results in very awkward code (e.g. compared to the usage of `std::optional` or `std::expected`). But it seems we already have such a try sum type that we only have to adjust slightly for it to simplify the change a lot. I pushed that separately in https://github.com/bitcoin/bitcoin/pull/34005, feel free to cherry-pick it here if you agree it helps.\r\n* I don't see why we would make both `part_size` and `part_offset` optional, it complicates the use case for no obvious benefit. We're even dereferencing the `nullopt` when trying to parse them.\r\n* The above would enable us to have a single `BlockManager::ReadRawBlock` implementation instead of this weird delegation, and even the usages would be simplified as a result.\r\n* We need to add some fuzz tests comparing it against the previous full reads, and maybe a `std::numeric_limits<size_t>::max()` test for the unit tests.\r\n* Could you provide a patch for me which would go through every single transaction in mainchain history and query it both ways (full block + new RPC) and assert that they're equal? I expect it to be heavy, I can run it on my benchmark servers to make sure it works for every real scenario we have.\r\n* Some brace-init inconsistencies and test duplications could also be addressed if we're touching it again.\r\n* As @hodlinator also mentioned, we should adjust the benchmark to make sure this doesn't introduce a regression (and we have to revive https://corecheck.dev/bitcoin/bitcoin/pulls/33657 somehow, seems it's offline for some time now).\r\n\r\nPlease see https://github.com/l0rinc/bitcoin/pull/61 for my detailed suggestions.\r\n\r\nEdit: I ran a differential reindex-chainstate on an rpi5 to see if this introduces any slowdown - it's within noise.\r\n\r\n<details>\r\n<summary>Measurements</summary>\r\n\r\n```\r\nCOMMITS=\"9a29b2d331eed5b4cbd6922f63e397b68ff12447 3e2e155e3ebe3718af1a496b08f48d078b6a5b65\"; STOP=923319; DBCACHE=4500; CC=gcc; CXX=g++; BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && (echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&hyperfine   --sort command   --runs 1   --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\"   --parameter-list COMMIT ${COMMITS// /,}   --prepare \"killall -9 bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\"   --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\"   \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\n\r\n9a29b2d331 Merge bitcoin/bitcoin#33857: doc: Add `x86_64-w64-mingw32ucrt` triplet to `depends/README.md`\r\n3e2e155e3e rest: allow reading partial block data from storage\r\n\r\nreindex-chainstate | 923319 blocks | dbcache 4500 | rpi5-16-2 | aarch64 | Cortex-A76 | 4 cores | 15Gi RAM | ext4 | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=923319 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 9a29b2d331eed5b4cbd6922f63e397b68ff12447)\r\n  Time (abs ):        37089.832 s               [User: 45041.206 s, System: 3372.164 s]\r\n \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=923319 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 3e2e155e3ebe3718af1a496b08f48d078b6a5b65)\r\n  Time (abs ):        37277.807 s               [User: 45134.733 s, System: 3456.199 s]\r\n \r\nRelative speed comparison\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=923319 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 9a29b2d331eed5b4cbd6922f63e397b68ff12447)\r\n        1.01          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=923319 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 3e2e155e3ebe3718af1a496b08f48d078b6a5b65)\r\n```\r\n\r\n</details>",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3536872444",
      "submitted_at": "2025-12-04T14:18:49Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3543967284,
      "node_id": "PRR_kwDOABII587TPKY0",
      "url": null,
      "actor": null,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-05T10:32:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Could you provide a patch for me which would go through every single transaction in mainchain history and query it both ways (full block + new RPC) and assert that they're equal? I expect it to be heavy, I can run it on my benchmark servers to make sure it works for every real scenario we have.\n\nWhat value would that provide? The new API allows fetching arbitrary byte-ranges from within blocks. The current unit tests checking the bytes match seem sufficient for validating the logic (testing with `std::numeric_limits::max()` as you suggested would be a nice touch though).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3543967284",
      "submitted_at": "2025-12-05T10:32:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21381581012,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT6cQjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21381581012",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-05T10:32:41Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3544513831,
      "node_id": "PRR_kwDOABII587TRP0n",
      "url": null,
      "actor": null,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-05T12:23:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Could you provide a patch for me which would go through every single transaction in mainchain history and query it both ways (full block + new RPC) and assert that they're equal? I expect it to be heavy, I can run it on my benchmark servers to make sure it works for every real scenario we have.\n> \n> What value would that provide? The new API allows fetching arbitrary byte-ranges from within blocks. The current unit tests checking the bytes match seem sufficient for validating the logic (testing with `std::numeric_limits::max()` as you suggested would be a nice touch though).\n\nWe have a very unique opportunity compared to other software: many of our problems are bounded, we *can* actually try out every meaningful combination that we expect the users to try - that's what I'm suggesting, validating that every single transaction so far can be fetched with both the old and the new api to be sure we won't have surprises.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3544513831",
      "submitted_at": "2025-12-05T12:23:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "commented",
      "id": 3620474096,
      "node_id": "IC_kwDOABII587XzAzw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3620474096",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T14:38:23Z",
      "updated_at": "2025-12-06T14:38:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Many thanks @l0rinc!\r\n\r\nI have rebased this PR over #34006 together with https://github.com/l0rinc/bitcoin/pull/61/commits/536f93df79975f50781072301947cafa4640b606 - please take a look :)",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3620474096",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 21401336364,
      "node_id": "MEE_lADOABII587SZwXIzwAAAAT7nnos",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21401336364",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T14:38:25Z"
    },
    {
      "event": "subscribed",
      "id": 21401336384,
      "node_id": "SE_lADOABII587SZwXIzwAAAAT7nnpA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21401336384",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T14:38:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21401340738,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT7notC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21401340738",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "495b6d5a77a2f383708ff4473a560acadafb159c",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/495b6d5a77a2f383708ff4473a560acadafb159c",
      "created_at": "2025-12-06T14:39:10Z"
    },
    {
      "event": "commented",
      "id": 3620482557,
      "node_id": "IC_kwDOABII587XzC39",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3620482557",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T14:41:00Z",
      "updated_at": "2025-12-06T14:41:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Could you provide a patch for me which would go through every single transaction in mainchain history and query it both ways (full block + new RPC) and assert that they're equal?\r\n\r\nSounds good - will it be OK to write it as a Rust CLI tool to interact with bitcoind?",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3620482557",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21401807998,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT7pax-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21401807998",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "created_at": "2025-12-06T15:34:53Z"
    },
    {
      "event": "labeled",
      "id": 21401811098,
      "node_id": "LE_lADOABII587SZwXIzwAAAAT7pbia",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21401811098",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T15:35:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3620591970,
      "node_id": "IC_kwDOABII587Xzdli",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3620591970",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-06T15:35:34Z",
      "updated_at": "2025-12-06T15:35:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `test each commit`: https://github.com/bitcoin/bitcoin/actions/runs/19989968537/job/57329252547</sub>\n<sub>LLM reason ( experimental): CI failed due to git rebase stopping: the index/working tree has uncommitted changes.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3620591970",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3548184494,
      "node_id": "PRR_kwDOABII587TfP-u",
      "url": null,
      "actor": null,
      "commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-06T19:39:51Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3548184494",
      "submitted_at": "2025-12-06T19:39:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21409149322,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT8FbGK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21409149322",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "created_at": "2025-12-07T09:28:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21409330240,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT8GHRA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21409330240",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "created_at": "2025-12-07T10:16:13Z"
    },
    {
      "event": "commented",
      "id": 3621933771,
      "node_id": "IC_kwDOABII587X4lLL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3621933771",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-07T11:29:09Z",
      "updated_at": "2025-12-07T11:29:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Could you provide a patch for me which would go through every single transaction in mainchain history and query it both ways (full block + new RPC) and assert that they're equal?\r\n>\r\n> Sounds good - will it be OK to write it as a Rust CLI tool to interact with bitcoind?\r\n\r\nhttps://github.com/romanz/fetch-txs can be used for equivalence testing:\r\n```\r\n$ cargo run --release -- 900000 900010\r\n    Finished `release` profile [optimized] target(s) in 0.11s\r\n     Running `target/release/fetch-txs 900000 900010`\r\n000000000000000000010538edbfd2d5b809a33dd83f284aeea41c6d0d96968a  1920777 bytes, 1562 txs\r\n00000000000000000001a8ff030609a6248e0f6e77f9f141aeb21e4eac4f83fc  1543737 bytes, 2170 txs\r\n00000000000000000001045e6be5e294b6c3a12e3ae00ad36287cf9579e0c1c6  1121121 bytes, 2455 txs\r\n000000000000000000019ba085f3b1933b9431fd4a57b80e5d0f67996ccbe02c  553149 bytes, 968 txs\r\n0000000000000000000166ff021ddd7c5736e917a3a7d16f2e2fff684cb6ecdd  1332731 bytes, 1656 txs\r\n000000000000000000017bfd05b5fa367a424c4a565a4baf7950d9e8605df8ec  1469385 bytes, 5402 txs\r\n000000000000000000022fa88a5322ec04b22aa89c1e4ecc649477a39bf334cb  1710919 bytes, 2258 txs\r\n00000000000000000001456223bb003fbf52eef4c7875d1bd57744d899f9a3fc  1160045 bytes, 1930 txs\r\n0000000000000000000163b288aeee6711ff667818053fe1e712513ca9c19776  1114941 bytes, 2083 txs\r\n000000000000000000015ed1e7ea326a848e643264b738e9520f7cbcbc40b0b8  949976 bytes, 1910 txs\r\n000000000000000000002c331b475c269de59d6d422a658cb843cb2cc3487098  1442990 bytes, 2829 txs\r\n```",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3621933771",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "unlabeled",
      "id": 21409608086,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAAT8HLGW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21409608086",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-07T11:34:02Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21411262625,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT8NfCh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21411262625",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "created_at": "2025-12-07T17:10:22Z"
    },
    {
      "event": "reviewed",
      "id": 3550963091,
      "node_id": "PRR_kwDOABII587Tp2WT",
      "url": null,
      "actor": null,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T10:09:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "Reviewed 262f4dfe691b12171a31c9219ba33f1fe55f67a7\n\nLove how elegant 71c7b747091fce045dbf25e4e0cfc0e6a4ad6435 turned out!",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3550963091",
      "submitted_at": "2025-12-08T10:09:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3549399405,
      "node_id": "PRR_kwDOABII587Tj4lt",
      "url": null,
      "actor": null,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-09T11:48:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "Changes since my last review:\n\n* `ReadRawBlock` takes a single optional param now, all call sites have been updated, there's a single method now, the change is a lot simpler and cleaner this way \\\\:D/\n* `block_part` case in `ReadRawBlock` is completely isolated from the rest of the method.\n* Now that both params are needed, the partial argument tests were correctly udpated\n* `blockmanager_block_data_part` was updated to use brace init and stricter `BOOST_REQUIRE` instead of `BOOST_CHECK` and was deduplicated and split as requested.\n* previous `std::variant` was changed to the recently merged `std::expected`\n* `rest_block` and `ReadRawBlock` now take default values which simplifies the diff.\n* `rest_block_part` is simplified a lot now, I like this version.\n\nLeft a few remaining suggestions (no warming needed in bench, numeric_limits::max test, rest API doc), but I'm fine with this version as well.\nI know the PR still has to be rebased, but I find this version very easy to review, makes me want to review your other work as well :)\nHappy to reack on other changes.\n\nACK 262f4dfe691b12171a31c9219ba33f1fe55f67a7\n\n<details>\n<summary>full diff since last review</summary>\n\n```patch\ndiff --git a/src/bench/readwriteblock.cpp b/src/bench/readwriteblock.cpp\nindex 4ca5b8ebe2..3a9a0204eb 100644\n--- a/src/bench/readwriteblock.cpp\n+++ b/src/bench/readwriteblock.cpp\n@@ -57,11 +57,10 @@ static void ReadRawBlockBench(benchmark::Bench& bench)\n     const auto testing_setup{MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN)};\n     auto& blockman{testing_setup->m_node.chainman->m_blockman};\n     const auto pos{blockman.WriteBlock(CreateTestBlock(), 413'567)};\n-    std::vector<std::byte> block_data;\n-    blockman.ReadRawBlock(block_data, pos); // warmup\n+    assert(blockman.ReadRawBlock(pos)); // warmup\n     bench.run([&] {\n-        const auto success{blockman.ReadRawBlock(block_data, pos)};\n-        assert(success);\n+        const auto res{blockman.ReadRawBlock(pos)};\n+        assert(res);\n     });\n }\n\ndiff --git a/src/init.cpp b/src/init.cpp\nindex bfb9483ad8..25ceecbb02 100644\n--- a/src/init.cpp\n+++ b/src/init.cpp\n@@ -1759,7 +1759,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     g_zmq_notification_interface = CZMQNotificationInterface::Create(\n         [&chainman = node.chainman](std::vector<std::byte>& block, const CBlockIndex& index) {\n             assert(chainman);\n-            return chainman->m_blockman.ReadRawBlock(block, WITH_LOCK(cs_main, return index.GetBlockPos()));\n+            if (auto ret{chainman->m_blockman.ReadRawBlock(WITH_LOCK(cs_main, return index.GetBlockPos()))}) {\n+                block = std::move(*ret);\n+                return true;\n+            }\n+            return false;\n         });\n\n     if (g_zmq_notification_interface) {\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\nindex 34749c9680..6c28f5d7e3 100644\n--- a/src/net_processing.cpp\n+++ b/src/net_processing.cpp\n@@ -2276,8 +2276,9 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     } else if (inv.IsMsgWitnessBlk()) {\n         // Fast-path: in this case it is possible to serve the block directly from disk,\n         // as the network format matches the format on disk\n-        std::vector<std::byte> block_data;\n-        if (!m_chainman.m_blockman.ReadRawBlock(block_data, block_pos)) {\n+        if (const auto block_data{m_chainman.m_blockman.ReadRawBlock(block_pos)}) {\n+            MakeAndPushMessage(pfrom, NetMsgType::BLOCK, std::span{*block_data});\n+        } else {\n             if (WITH_LOCK(m_chainman.GetMutex(), return m_chainman.m_blockman.IsBlockPruned(*pindex))) {\n                 LogDebug(BCLog::NET, \"Block was pruned before it could be read, %s\\n\", pfrom.DisconnectMsg(fLogIPs));\n             } else {\n@@ -2286,7 +2287,6 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n             pfrom.fDisconnect = true;\n             return;\n         }\n-        MakeAndPushMessage(pfrom, NetMsgType::BLOCK, std::span{block_data});\n         // Don't set pblock as we've sent the block\n     } else {\n         // Send block from disk\ndiff --git a/src/node/blockstorage.cpp b/src/node/blockstorage.cpp\nindex 85bf729feb..24d203cd51 100644\n--- a/src/node/blockstorage.cpp\n+++ b/src/node/blockstorage.cpp\n@@ -43,7 +43,6 @@\n #include <map>\n #include <optional>\n #include <unordered_map>\n-#include <variant>\n\n namespace kernel {\n static constexpr uint8_t DB_BLOCK_FILES{'f'};\n@@ -1007,14 +1006,14 @@ bool BlockManager::ReadBlock(CBlock& block, const FlatFilePos& pos, const std::o\n     block.SetNull();\n\n     // Open history file to read\n-    std::vector<std::byte> block_data;\n-    if (!ReadRawBlock(block_data, pos)) {\n+    const auto block_data{ReadRawBlock(pos)};\n+    if (!block_data) {\n         return false;\n     }\n\n     try {\n         // Read block\n-        SpanReader{block_data} >> TX_WITH_WITNESS(block);\n+        SpanReader{*block_data} >> TX_WITH_WITNESS(block);\n     } catch (const std::exception& e) {\n         LogError(\"Deserialize or I/O error - %s at %s while reading block\", e.what(), pos.ToString());\n         return false;\n@@ -1049,29 +1048,19 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n     return ReadBlock(block, block_pos, index.GetBlockHash());\n }\n\n-bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n-{\n-    auto ret{ReadRawBlock(pos, /*part_offset=*/0, /*part_size=*/std::nullopt)};\n-    if (auto* vec{std::get_if<std::vector<std::byte>>(&ret)}) {\n-        block = std::move(*vec);\n-        return true;\n-    }\n-    return false;\n-}\n-\n-std::variant<std::vector<std::byte>, ReadRawError> BlockManager::ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n+BlockManager::ReadRawBlockResult BlockManager::ReadRawBlock(const FlatFilePos& pos, std::optional<std::pair<size_t, size_t>> block_part) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return ReadRawError::IO;\n+        return util::Unexpected(ReadRawError::IO);\n     }\n     AutoFile filein{OpenBlockFile({pos.nFile, pos.nPos - STORAGE_HEADER_BYTES}, /*fReadOnly=*/true)};\n     if (filein.IsNull()) {\n         LogError(\"OpenBlockFile failed for %s while reading raw block\", pos.ToString());\n-        return ReadRawError::IO;\n+        return util::Unexpected(ReadRawError::IO);\n     }\n\n     try {\n@@ -1083,39 +1072,31 @@ std::variant<std::vector<std::byte>, ReadRawError> BlockManager::ReadRawBlock(co\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return ReadRawError::IO;\n+            return util::Unexpected(ReadRawError::IO);\n         }\n\n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return ReadRawError::IO;\n-        }\n-\n-        if (part_offset > blk_size) {\n-            // Avoid logging - part_offset can come from an untrusted source (REST)\n-            return ReadRawError::BadPartRange;\n+            return util::Unexpected(ReadRawError::IO);\n         }\n\n-        size_t size = blk_size - part_offset;\n-        if (part_size.has_value()) {\n-            if (*part_size > size || *part_size == 0) {\n-                // Avoid logging - part_offset & part_size can come from an untrusted source (REST)\n-                return ReadRawError::BadPartRange;\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {\n+                return util::Unexpected(ReadRawError::BadPartRange); // Avoid logging - offset/size come from untrusted REST input\n             }\n-            size = *part_size;\n+            filein.seek(offset, SEEK_CUR);\n+            blk_size = size;\n         }\n\n-        std::vector<std::byte> data;\n-        data.resize(size); // Zeroing of memory is intentional here\n-        if (part_offset > 0) filein.seek(part_offset, SEEK_CUR);\n+        std::vector<std::byte> data(blk_size); // Zeroing of memory is intentional here\n         filein.read(data);\n         return data;\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\n-        return ReadRawError::IO;\n+        return util::Unexpected(ReadRawError::IO);\n     }\n-    assert(false);\n }\n\n FlatFilePos BlockManager::WriteBlock(const CBlock& block, int nHeight)\ndiff --git a/src/node/blockstorage.h b/src/node/blockstorage.h\nindex 477983a694..e3f9c445ea 100644\n--- a/src/node/blockstorage.h\n+++ b/src/node/blockstorage.h\n@@ -17,6 +17,7 @@\n #include <streams.h>\n #include <sync.h>\n #include <uint256.h>\n+#include <util/expected.h>\n #include <util/fs.h>\n #include <util/hasher.h>\n\n@@ -306,6 +307,7 @@ private:\n\n public:\n     using Options = kernel::BlockManagerOpts;\n+    using ReadRawBlockResult = util::Expected<std::vector<std::byte>, ReadRawError>;\n\n     explicit BlockManager(const util::SignalInterrupt& interrupt, Options opts);\n\n@@ -459,8 +461,7 @@ public:\n     /** Functions for disk access for blocks */\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n-    bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n-    std::variant<std::vector<std::byte>, ReadRawError> ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;\n+    ReadRawBlockResult ReadRawBlock(const FlatFilePos& pos, std::optional<std::pair<size_t, size_t>> block_part = std::nullopt) const;\n\n     bool ReadBlockUndo(CBlockUndo& blockundo, const CBlockIndex& index) const;\n\ndiff --git a/src/rest.cpp b/src/rest.cpp\nindex 669da54b98..92fd747f01 100644\n--- a/src/rest.cpp\n+++ b/src/rest.cpp\n@@ -32,7 +32,6 @@\n #include <validation.h>\n\n #include <any>\n-#include <variant>\n #include <vector>\n\n #include <univalue.h>\n@@ -390,8 +389,7 @@ static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n                        std::optional<TxVerbosity> tx_verbosity,\n-                       size_t part_offset,\n-                       std::optional<size_t> part_size)\n+                       std::optional<std::pair<size_t, size_t>> block_part = std::nullopt)\n {\n     if (!CheckWarmup(req))\n         return false;\n@@ -425,45 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n\n-    const auto block_result{chainman.m_blockman.ReadRawBlock(pos, part_offset, part_size)};\n-    if (const auto* error{std::get_if<node::ReadRawError>(&block_result)}) {\n-        switch (*error) {\n-        case node::ReadRawError::IO:\n-            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n-\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n         case node::ReadRawError::BadPartRange:\n-            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+            } else {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Empty block part for %s\", hashStr));\n+            }\n+        default: assert(false);\n         }\n-        assert(false);\n     }\n-    const auto& block_data{std::get<std::vector<std::byte>>(block_result)};\n\n     switch (rf) {\n     case RESTResponseFormat::BINARY: {\n         req->WriteHeader(\"Content-Type\", \"application/octet-stream\");\n-        req->WriteReply(HTTP_OK, block_data);\n+        req->WriteReply(HTTP_OK, *block_data);\n         return true;\n     }\n\n     case RESTResponseFormat::HEX: {\n-        const std::string strHex{HexStr(block_data) + \"\\n\"};\n+        const std::string strHex{HexStr(*block_data) + \"\\n\"};\n         req->WriteHeader(\"Content-Type\", \"text/plain\");\n         req->WriteReply(HTTP_OK, strHex);\n         return true;\n     }\n\n     case RESTResponseFormat::JSON: {\n-        if (!tx_verbosity.has_value()) {\n-            return RESTERR(req, HTTP_BAD_REQUEST, \"JSON output is not supported for this request type\");\n+        if (tx_verbosity) {\n+            CBlock block{};\n+            DataStream block_stream{*block_data};\n+            block_stream >> TX_WITH_WITNESS(block);\n+            UniValue objBlock = blockToJSON(chainman.m_blockman, block, *tip, *pblockindex, *tx_verbosity, chainman.GetConsensus().powLimit);\n+            std::string strJSON = objBlock.write() + \"\\n\";\n+            req->WriteHeader(\"Content-Type\", \"application/json\");\n+            req->WriteReply(HTTP_OK, strJSON);\n+            return true;\n         }\n-        CBlock block{};\n-        DataStream block_stream{block_data};\n-        block_stream >> TX_WITH_WITNESS(block);\n-        UniValue objBlock = blockToJSON(chainman.m_blockman, block, *tip, *pblockindex, *tx_verbosity, chainman.GetConsensus().powLimit);\n-        std::string strJSON = objBlock.write() + \"\\n\";\n-        req->WriteHeader(\"Content-Type\", \"application/json\");\n-        req->WriteReply(HTTP_OK, strJSON);\n-        return true;\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"JSON output is not supported for this request type\");\n     }\n\n     default: {\n@@ -474,39 +473,31 @@ static bool rest_block(const std::any& context,\n\n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n }\n\n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n }\n\n static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    size_t part_offset{0};\n-    std::optional<size_t> part_size{};\n     try {\n-        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n-        if (part_offset_str.has_value()) {\n-            auto opt = ToIntegral<size_t>(*part_offset_str);\n-            if (opt.has_value()) {\n-                part_offset = opt.value();\n+        if (const auto opt_offset{ToIntegral<size_t>(req->GetQueryParameter(\"offset\").value_or(\"\"))}) {\n+            if (const auto opt_size{ToIntegral<size_t>(req->GetQueryParameter(\"size\").value_or(\"\"))}) {\n+                return rest_block(context, req, uri_part,\n+                                  /*tx_verbosity=*/std::nullopt,\n+                                  /*block_part=*/{{*opt_offset, *opt_size}});\n             } else {\n-                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n-            }\n-        }\n-        const auto part_size_str = req->GetQueryParameter(\"size\");\n-        if (part_size_str.has_value()) {\n-            part_size = ToIntegral<size_t>(*part_size_str);\n-            if (!part_size.has_value()) {\n-                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"Block part size missing or invalid\");\n             }\n+        } else {\n+            return RESTERR(req, HTTP_BAD_REQUEST, \"Block part offset missing or invalid\");\n         }\n     } catch (const std::runtime_error& e) {\n         return RESTERR(req, HTTP_BAD_REQUEST, e.what());\n     }\n-    return rest_block(context, req, uri_part, /*tx_verbosity=*/std::nullopt, part_offset, part_size);\n }\n\n static bool rest_filter_header(const std::any& context, HTTPRequest* req, const std::string& uri_part)\ndiff --git a/src/rpc/blockchain.cpp b/src/rpc/blockchain.cpp\nindex 8f283ff4f0..40761d5cab 100644\n--- a/src/rpc/blockchain.cpp\n+++ b/src/rpc/blockchain.cpp\n@@ -680,7 +680,6 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n\n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n@@ -688,13 +687,10 @@ static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const C\n         pos = blockindex.GetBlockPos();\n     }\n\n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;\n+    // Block not found on disk. This shouldn't normally happen unless the block was\n+    // pruned right after we released the lock above.\n+    throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n }\n\n static CBlockUndo GetUndoChecked(BlockManager& blockman, const CBlockIndex& blockindex)\ndiff --git a/src/test/blockmanager_tests.cpp b/src/test/blockmanager_tests.cpp\nindex 06fe021dc0..3080ad080d 100644\n--- a/src/test/blockmanager_tests.cpp\n+++ b/src/test/blockmanager_tests.cpp\n@@ -141,68 +141,63 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n {\n     LOCK(::cs_main);\n-    auto& chainman = m_node.chainman;\n-    auto& blockman = chainman->m_blockman;\n-    const CBlockIndex& tip = *chainman->ActiveTip();\n-    const FlatFilePos tip_block_pos = tip.GetBlockPos();\n-\n-    std::vector<std::byte> block{};\n-    BOOST_CHECK(blockman.ReadRawBlock(block, tip_block_pos));\n-    BOOST_CHECK_GE(block.size(), 200);\n-\n-    std::vector<std::byte> block_part{};\n-    const auto read_tip_part{[&](auto part_offset, auto part_size) {\n-        block_part.clear();\n-        auto block_result{blockman.ReadRawBlock(tip_block_pos, part_offset, part_size)};\n-        if (auto* vec{std::get_if<std::vector<std::byte>>(&block_result)}) {\n-            block_part = std::move(*vec);\n-            return true;\n-        }\n-        return false;\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_REQUIRE(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n     }};\n\n-    BOOST_CHECK(read_tip_part(0, std::nullopt));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n-\n-    BOOST_CHECK(read_tip_part(1, std::nullopt));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n-\n-    BOOST_CHECK(read_tip_part(10, std::nullopt));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.end());\n-\n-    BOOST_CHECK(read_tip_part(0, block.size()));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n-\n-    BOOST_CHECK(read_tip_part(0, block.size() - 1));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 1);\n-\n-    BOOST_CHECK(read_tip_part(0, block.size() - 10));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 10);\n-\n-    BOOST_CHECK(read_tip_part(0, 20));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.begin() + 20);\n-\n-    BOOST_CHECK(read_tip_part(1, block.size() - 1));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n-\n-    BOOST_CHECK(read_tip_part(10, 20));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.begin() + 30);\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());\n+    expect_part(0, block->size() - 1);\n+    expect_part(0, block->size() - 10);\n+    expect_part(0, 20);\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(block->size() - 1, 1);\n+}\n\n-    BOOST_CHECK(read_tip_part(block.size() - 1, 1));\n-    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.end() - 1, block.end());\n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part_error{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(!res);\n+        BOOST_CHECK_EQUAL(res.error(), node::ReadRawError::BadPartRange);\n+    }};\n\n-    // check errors\n-    BOOST_CHECK(!read_tip_part(0, 0));\n-    BOOST_CHECK(!read_tip_part(0, block.size() + 1));\n-    BOOST_CHECK(!read_tip_part(1, block.size()));\n-    BOOST_CHECK(!read_tip_part(2, block.size() - 1));\n-    BOOST_CHECK(!read_tip_part(block.size() - 2, 3));\n-    BOOST_CHECK(!read_tip_part(block.size() - 1, 2));\n-    BOOST_CHECK(!read_tip_part(block.size(), 0));\n-    BOOST_CHECK(!read_tip_part(block.size(), 1));\n-    BOOST_CHECK(!read_tip_part(block.size() + 1, 0));\n-    BOOST_CHECK(!read_tip_part(block.size() + 1, 1));\n-    BOOST_CHECK(!read_tip_part(block.size() + 2, 2));\n+    expect_part_error(0, 0);\n+    expect_part_error(0, block->size() + 1);\n+    expect_part_error(1, block->size());\n+    expect_part_error(2, block->size() - 1);\n+    expect_part_error(block->size() - 2, 3);\n+    expect_part_error(block->size() - 1, 2);\n+    expect_part_error(block->size(), 0);\n+    expect_part_error(block->size(), 1);\n+    expect_part_error(block->size() + 1, 0);\n+    expect_part_error(block->size() + 1, 1);\n+    expect_part_error(block->size() + 2, 2);\n }\n\n BOOST_FIXTURE_TEST_CASE(blockmanager_readblock_hash_mismatch, TestingSetup)\ndiff --git a/test/functional/interface_rest.py b/test/functional/interface_rest.py\nindex e7dff20239..32254535ce 100755\n--- a/test/functional/interface_rest.py\n+++ b/test/functional/interface_rest.py\n@@ -470,17 +470,14 @@ class RESTTest (BitcoinTestFramework):\n                     resp = bytes.fromhex(resp.decode().strip())\n                 return resp\n\n-            assert_equal(block_bin, _get_block_part())\n-            assert_equal(block_bin, _get_block_part(query_params={\"offset\": 0}))\n-            assert_equal(block_bin, _get_block_part(query_params={\"size\": len(block_bin)}))\n             assert_equal(block_bin, _get_block_part(query_params={\"offset\": 0, \"size\": len(block_bin)}))\n\n             assert len(block_bin) >= 500\n-            assert_equal(block_bin[10:], _get_block_part(query_params={\"offset\": 10}))\n-            assert_equal(block_bin[:100], _get_block_part(query_params={\"size\": 100}))\n             assert_equal(block_bin[20:320], _get_block_part(query_params={\"offset\": 20, \"size\": 300}))\n             assert_equal(block_bin[-5:], _get_block_part(query_params={\"offset\": len(block_bin) - 5, \"size\": 5}))\n\n+            _get_block_part(status=400, query_params={\"offset\": 10})\n+            _get_block_part(status=400, query_params={\"size\": 100})\n             _get_block_part(status=400, query_params={\"offset\": \"x\"})\n             _get_block_part(status=400, query_params={\"size\": \"y\"})\n             _get_block_part(status=400, query_params={\"offset\": \"x\", \"size\": \"y\"})\n@@ -490,8 +487,8 @@ class RESTTest (BitcoinTestFramework):\n             _get_block_part(status=404, query_params={\"offset\": len(block_bin), \"size\": 0})\n             _get_block_part(status=404, query_params={\"offset\": len(block_bin) + 1, \"size\": 1})\n             _get_block_part(status=404, query_params={\"offset\": len(block_bin), \"size\": 1})\n-            _get_block_part(status=404, query_params={\"offset\": len(block_bin) + 1})\n-            _get_block_part(status=404, query_params={\"size\": len(block_bin) + 1})\n+            _get_block_part(status=404, query_params={\"offset\": len(block_bin) + 1, \"size\": 1})\n+            _get_block_part(status=404, query_params={\"offset\": 0, \"size\": len(block_bin) + 1})\n\n         self.test_rest_request(f\"/blockpart/{blockhash}\", status=400, req_type=ReqType.JSON, ret_type=RetType.OBJ)\n\n```\n\n</details>\n\n\n> Sounds good - will it be OK to write it as a Rust CLI tool to interact with bitcoind?\n\nThis was a bit slow, reimplemented it in multithreaded Python, it successfully validated the first ~300k blocks so far:\n```bash\n...\n287090 0000000000000000401489a5114dc753058ef77222823a599b730cd5a179aedd  149845 bytes, 116 txs\n287093 00000000000000001f2a8974ae934fe70e1bc8037aa45b687b2d5bb17e23f3cd  55402 bytes, 126 txs\n287091 0000000000000000d36060aa424ef7b830db264d267a1b69f31d8dca16076553  157275 bytes, 347 txs\n...\n```\n\n<details>\n<summary>python alternative for comparing the new solution with previous versions</summary>\n\n```python\n#!/usr/bin/env python3\nimport sys\nimport json\nimport subprocess\nimport urllib.request\nfrom concurrent.futures import ThreadPoolExecutor, as_completed\n\nDATA_DIR = \"/mnt/my_storage/BitcoinData\"\n\ndef rest(path):\n    with urllib.request.urlopen(f\"http://127.0.0.1:8332/rest/{path}\") as r:\n        return r.read()\n\ndef cli(*args):\n    return subprocess.run([\"./build/bin/bitcoin-cli\", f\"-datadir={DATA_DIR}\", *args],\n                          capture_output=True, text=True, check=True).stdout.strip()\n\ndef varint_size(n):\n    return 1 if n < 0xfd else 3 if n <= 0xffff else 5 if n <= 0xffffffff else 9\n\ndef check_block(height):\n    block_hash = rest(f\"blockhashbyheight/{height}.hex\").decode().strip()\n    block_bytes = rest(f\"block/{block_hash}.bin\")\n    txids = json.loads(rest(f\"block/notxdetails/{block_hash}.json\"))[\"tx\"]\n    offset = 80 + varint_size(len(txids))\n    for i, txid in enumerate(txids):\n        tx_bytes = bytes.fromhex(cli(\"getrawtransaction\", txid, \"false\", block_hash))\n        part = rest(f\"blockpart/{block_hash}.bin?offset={offset}&size={len(tx_bytes)}\")\n        assert part == tx_bytes, f\"mismatch at {block_hash} tx#{i}\"\n        offset += len(tx_bytes)\n    assert offset == len(block_bytes), f\"size mismatch: {offset} vs {len(block_bytes)}\"\n    return height, block_hash, offset, len(txids)\n\nwith ThreadPoolExecutor() as pool:\n    futures = {pool.submit(check_block, h): h for h in range(int(sys.argv[1]), int(sys.argv[2]) + 1)}\n    for future in as_completed(futures):\n        height, block_hash, size, tx_count = future.result()\n        print(f\"{height} {block_hash}  {size} bytes, {tx_count} txs\")\n```\n</details>\n",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3549399405",
      "submitted_at": "2025-12-09T11:48:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "review_requested",
      "id": 21451400111,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT-mmOv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21451400111",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T11:48:44Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 21451400525,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAT-mmVN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21451400525",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T11:48:45Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21463444341,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAT_Uit1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21463444341",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2251ac101fc21caa3d69ea8f0324edf5ced38cc2",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/2251ac101fc21caa3d69ea8f0324edf5ced38cc2",
      "created_at": "2025-12-09T20:38:09Z"
    },
    {
      "event": "labeled",
      "id": 21464765091,
      "node_id": "LE_lADOABII587SZwXIzwAAAAT_ZlKj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21464765091",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T21:51:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3634435102,
      "node_id": "IC_kwDOABII587YoRQe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3634435102",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-09T21:51:49Z",
      "updated_at": "2025-12-09T21:51:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `test max 6 ancestor commits`: https://github.com/bitcoin/bitcoin/actions/runs/20077800373/job/57596718560</sub>\n<sub>LLM reason ( experimental): Build failed due to an unhandled enumeration value BadPartRange in rest.cpp, flagged as an error by -Werror.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3634435102",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3560044195,
      "node_id": "PRR_kwDOABII587UMfaj",
      "url": null,
      "actor": null,
      "commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-09T22:48:17Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3560044195",
      "submitted_at": "2025-12-09T22:48:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21482124837,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUAbzYl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21482124837",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/8b417087aec4671a1ce58f2331d1688e665d9935",
      "created_at": "2025-12-10T15:29:18Z"
    },
    {
      "event": "unlabeled",
      "id": 21483987640,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAAUAi6K4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21483987640",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-10T16:48:23Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3638047678,
      "node_id": "IC_kwDOABII587Y2DO-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3638047678",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-10T16:53:33Z",
      "updated_at": "2025-12-10T16:53:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 8b417087aec4671a1ce58f2331d1688e665d9935\r\n\r\nThe implementation doesn't slow down the critical path anymore and is beautifully isolated from the rest of the raw block reading.\r\nThe tests contain the extremes (added since last ACK), docs were update, braces added.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3638047678",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3563450136,
      "node_id": "PRR_kwDOABII587UZe8Y",
      "url": null,
      "actor": null,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-10T16:53:52Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3563450136",
      "submitted_at": "2025-12-10T16:53:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "reviewed",
      "id": 3563299997,
      "node_id": "PRR_kwDOABII587UY6Sd",
      "url": null,
      "actor": null,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-10T19:54:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 8b417087aec4671a1ce58f2331d1688e665d9935",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3563299997",
      "submitted_at": "2025-12-10T19:54:41Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21489883172,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUA5Zgk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21489883172",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "44758e8387e66ec49d190b59f8a8fefab84b1e69",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/44758e8387e66ec49d190b59f8a8fefab84b1e69",
      "created_at": "2025-12-10T22:04:24Z"
    },
    {
      "event": "commented",
      "id": 3639185341,
      "node_id": "IC_kwDOABII587Y6Y-9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3639185341",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-10T22:16:19Z",
      "updated_at": "2025-12-10T22:16:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 44758e8387e66ec49d190b59f8a8fefab84b1e69\r\n\r\nSince last push a `HTTP_NOT_FOUND` error code was changed to `HTTP_INTERNAL_SERVER_ERROR`, a test `BOOST_REQUIRE` was changed to a more permissive `BOOST_CHECK`, and in functional tests an assert was adjusted and a missing-block-data case was added for the status of the response.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3639185341",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "review_requested",
      "id": 21490061625,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAUA6FE5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21490061625",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-10T22:16:29Z",
      "requested_reviewer": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 21491558192,
      "node_id": "LE_lADOABII587SZwXIzwAAAAUA_ycw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21491558192",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T00:18:26Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21496270649,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUBRw85",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21496270649",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "created_at": "2025-12-11T06:41:09Z"
    },
    {
      "event": "unlabeled",
      "id": 21497566255,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAAUBWtQv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21497566255",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T07:54:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21508031724,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUB-oTs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21508031724",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6e71622d8526ec682375479ecabc6426409410f2",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/6e71622d8526ec682375479ecabc6426409410f2",
      "created_at": "2025-12-11T16:01:00Z"
    },
    {
      "event": "reviewed",
      "id": 3568187260,
      "node_id": "PRR_kwDOABII587Urjd8",
      "url": null,
      "actor": null,
      "commit_id": "6e71622d8526ec682375479ecabc6426409410f2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-11T16:04:56Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3568187260",
      "submitted_at": "2025-12-11T16:04:56Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21508135643,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUB_Brb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21508135643",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/389eafc631733c1ac2890e1b012a94f66a31ccad",
      "created_at": "2025-12-11T16:05:06Z"
    },
    {
      "event": "labeled",
      "id": 21508156108,
      "node_id": "LE_lADOABII587SZwXIzwAAAAUB_GrM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21508156108",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:05:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3642639318,
      "node_id": "IC_kwDOABII587ZHkPW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3642639318",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:06:02Z",
      "updated_at": "2025-12-11T16:06:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/20139296974/job/57801727809</sub>\n<sub>LLM reason ( experimental): Lint check failed: Ruff reports an unused import (platform) in test/interface_rest.py, causing the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3642639318",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "commented",
      "id": 3642651685,
      "node_id": "IC_kwDOABII587ZHnQl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3642651685",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:08:18Z",
      "updated_at": "2025-12-11T16:08:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Windows CI jobs fail, probably due to https://www.githubstatus.com/incidents/xntfc1fz5rfb :confused: ",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3642651685",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "reviewed",
      "id": 3567464974,
      "node_id": "PRR_kwDOABII587UozIO",
      "url": null,
      "actor": null,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-11T16:09:00Z",
      "author_association": "MEMBER",
      "body": "looks good, the style nits can be ignored and are not important.\r\n\r\n\r\nreview ACK 9f8809f2b1206ad34dfc68831c10db76e618de3f \r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 9f8809f2b1206ad34dfc68831c10db76e618de3f \r\nNUYr34EtZ+EeDqlvABg/SqtOUoi+6/Wf8HHOwwzPB636/nDHpQsbkGLTmW2Nz8zu27KwzUXxzqojtB5pV3MRAQ==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3567464974",
      "submitted_at": "2025-12-11T16:09:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "commented",
      "id": 3642785500,
      "node_id": "IC_kwDOABII587ZIH7c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3642785500",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:39:12Z",
      "updated_at": "2025-12-11T16:39:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 389eafc631733c1ac2890e1b012a94f66a31ccad\r\n\r\nOnly test changes [since my last review](https://github.com/bitcoin/bitcoin/compare/44758e8387e66ec49d190b59f8a8fefab84b1e69..389eafc631733c1ac2890e1b012a94f66a31ccad).\r\n\r\nThanks for your patience and responsiveness, @romanz.\r\nFeel free to apply other recommendations as well, happy to reack.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3642785500",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "mentioned",
      "id": 21508909081,
      "node_id": "MEE_lADOABII587SZwXIzwAAAAUCB-gZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21508909081",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:39:14Z"
    },
    {
      "event": "subscribed",
      "id": 21508909126,
      "node_id": "SE_lADOABII587SZwXIzwAAAAUCB-hG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21508909126",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:39:14Z"
    },
    {
      "event": "review_requested",
      "id": 21508912561,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAUCB_Wx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21508912561",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T16:39:24Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYyZmQxYWEyMWM3Njk0Y2VmMzkzYjRhMTNlNDcyYWU5ZDNmYzU0ZmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc",
      "tree": {
        "sha": "5106b92cfec22bb476acb88b813ffb35b164c818",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5106b92cfec22bb476acb88b813ffb35b164c818"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cca113f5b022b131a78579ab233d0d40643c7c2b",
          "sha": "cca113f5b022b131a78579ab233d0d40643c7c2b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cca113f5b022b131a78579ab233d0d40643c7c2b"
        }
      ],
      "message": "blockstorage: return an error code from `ReadRawBlock()`\n\nIt will enable different error handling flows for different error types.\n\nAlso, `ReadRawBlockBench` performance has decreased due to no longer reusing a vector\nwith an unchanging capacity - mirroring our production code behavior.\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>\nCo-authored-by: Lrinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Roman Zeyde",
        "email": "me@romanzey.de",
        "date": "2025-12-11T17:54:55Z"
      },
      "author": {
        "name": "Roman Zeyde",
        "email": "me@romanzey.de",
        "date": "2025-12-03T19:06:27Z"
      },
      "sha": "f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRlMmFmMWMwNjU0NzIzMGI5MjQ1ZDk0ZTdiY2IxMTI5ZjJjNDk3MTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4e2af1c06547230b9245d94e7bcb1129f2c49714",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4e2af1c06547230b9245d94e7bcb1129f2c49714",
      "tree": {
        "sha": "55015d225839544609e420c6f5ab0022aed66aa1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/55015d225839544609e420c6f5ab0022aed66aa1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc",
          "sha": "f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc"
        }
      ],
      "message": "blockstorage: allow reading partial block data from storage\n\nIt will allow fetching specific transactions using an external index,\nfollowing https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-3267485313.\n\nNo logging takes place in case of an invalid offset/size (to avoid spamming the log),\nby using a new `ReadRawError::BadPartRange` error variant.\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>\nCo-authored-by: Lrinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Roman Zeyde",
        "email": "me@romanzey.de",
        "date": "2025-12-11T17:54:55Z"
      },
      "author": {
        "name": "Roman Zeyde",
        "email": "me@romanzey.de",
        "date": "2025-12-06T14:02:29Z"
      },
      "sha": "4e2af1c06547230b9245d94e7bcb1129f2c49714"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21510458598,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUCH4zm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21510458598",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "e4f460bbe44ba11e3997da80daf39cbb2515fefc",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/e4f460bbe44ba11e3997da80daf39cbb2515fefc",
      "created_at": "2025-12-11T17:57:28Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA3MTM1MjkwYzE3MjBhMTRjOWQyZjE4YTU3MDBiYjY1NjVhZTdhMTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "tree": {
        "sha": "378b7c8bd35230e8db05fcf0cb340ae4497899f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/378b7c8bd35230e8db05fcf0cb340ae4497899f2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4e2af1c06547230b9245d94e7bcb1129f2c49714",
          "sha": "4e2af1c06547230b9245d94e7bcb1129f2c49714",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4e2af1c06547230b9245d94e7bcb1129f2c49714"
        }
      ],
      "message": "rest: allow reading partial block data from storage\n\nIt will allow fetching specific transactions using an external index,\nfollowing https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-3267485313.\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>\nCo-authored-by: Lrinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Roman Zeyde",
        "email": "me@romanzey.de",
        "date": "2025-12-11T18:02:56Z"
      },
      "author": {
        "name": "Roman Zeyde",
        "email": "me@romanzey.de",
        "date": "2025-12-06T14:08:57Z"
      },
      "sha": "07135290c1720a14c9d2f18a5700bb6565ae7a10"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21510580753,
      "node_id": "HRFPE_lADOABII587SZwXIzwAAAAUCIWoR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21510580753",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "created_at": "2025-12-11T18:03:31Z"
    },
    {
      "event": "commented",
      "id": 3643160579,
      "node_id": "IC_kwDOABII587ZJjgD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3643160579",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T18:04:24Z",
      "updated_at": "2025-12-11T20:10:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "Applied most of the recommendations above & removed a trailing space in https://github.com/bitcoin/bitcoin/compare/e4f460bbe44ba11e3997da80daf39cbb2515fefc..07135290c1720a14c9d2f18a5700bb6565ae7a10.",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3643160579",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "commented",
      "id": 3643843248,
      "node_id": "IC_kwDOABII587ZMKKw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3643843248",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T21:24:58Z",
      "updated_at": "2025-12-11T21:24:58Z",
      "author_association": "MEMBER",
      "body": "Nice. Only non-test change is adding the missing `std::move` to avoid the copy.\r\n\r\nreview ACK 07135290c1720a14c9d2f18a5700bb6565ae7a10 \r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 07135290c1720a14c9d2f18a5700bb6565ae7a10 \r\n8tJyFyaSq9eBol4xP04vrx1VzK8edVKSVO+Xe4aZZctHc6j+sDo6BBuFcYwXO9R+a1pCtl/H34i6ppXCjD9bDg==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3643843248",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "review_requested",
      "id": 21514125648,
      "node_id": "RRE_lADOABII587SZwXIzwAAAAUCV4FQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21514125648",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T21:25:08Z",
      "requested_reviewer": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "unlabeled",
      "id": 21514229792,
      "node_id": "UNLE_lADOABII587SZwXIzwAAAAUCWRgg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21514229792",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-11T21:31:17Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3571618055,
      "node_id": "PRR_kwDOABII587U4pEH",
      "url": null,
      "actor": null,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-12T12:47:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3571618055",
      "submitted_at": "2025-12-12T12:47:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "commented",
      "id": 3646374389,
      "node_id": "IC_kwDOABII587ZV0H1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3646374389",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-12T12:55:34Z",
      "updated_at": "2025-12-12T13:00:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 07135290c1720a14c9d2f18a5700bb6565ae7a10\r\n\r\n[Since my last ACK](https://github.com/bitcoin/bitcoin/compare/389eafc631733c1ac2890e1b012a94f66a31ccad..07135290c1720a14c9d2f18a5700bb6565ae7a10): deduplicated & sorted the unit test cases, moved non-const return value in rpc `GetRawBlockChecked`, added default switch comment, renamed functional test lambda, and changed functional test category to be delimited by log instead of comment.\r\n\r\nrfm?",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3646374389",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "merged",
      "id": 21527956228,
      "node_id": "ME_lADOABII587SZwXIzwAAAAUDKosE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21527956228",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "938d7aacabd0bb3784bb3e529b1ed06bb2891864",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/938d7aacabd0bb3784bb3e529b1ed06bb2891864",
      "created_at": "2025-12-12T13:22:06Z"
    },
    {
      "event": "closed",
      "id": 21527956251,
      "node_id": "CE_lADOABII587SZwXIzwAAAAUDKosb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21527956251",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-12T13:22:07Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 21528315508,
      "node_id": "HRDE_lADOABII587SZwXIzwAAAAUDMAZ0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21528315508",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-12T13:42:02Z"
    },
    {
      "event": "commented",
      "id": 3646978232,
      "node_id": "IC_kwDOABII587ZYHi4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3646978232",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-12T15:22:14Z",
      "updated_at": "2025-12-12T15:22:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "Many thanks!",
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#issuecomment-3646978232",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33657"
    },
    {
      "event": "referenced",
      "id": 21535403478,
      "node_id": "REFE_lADOABII587SZwXIzwAAAAUDnC3W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21535403478",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "17d6782bf334a2be0dc6a1ff913353ce7a413f21",
      "commit_url": "https://api.github.com/repos/romanz/bindex-rs/commits/17d6782bf334a2be0dc6a1ff913353ce7a413f21",
      "created_at": "2025-12-12T19:48:10Z"
    },
    {
      "event": "referenced",
      "id": 21535611887,
      "node_id": "REFE_lADOABII587SZwXIzwAAAAUDn1vv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21535611887",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "b7c3ec1af3f360bc7ed4118e2cc34ea41ac81382",
      "commit_url": "https://api.github.com/repos/stringintech/go-bitcoinkernel/commits/b7c3ec1af3f360bc7ed4118e2cc34ea41ac81382",
      "created_at": "2025-12-12T19:58:37Z"
    },
    {
      "event": "referenced",
      "id": 21547391684,
      "node_id": "REFE_lADOABII587SZwXIzwAAAAUEUxrE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21547391684",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "599effdeab4d6687da783de04f8edf1d88959169",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/599effdeab4d6687da783de04f8edf1d88959169",
      "created_at": "2025-12-14T09:25:30Z"
    },
    {
      "event": "referenced",
      "id": 21547391692,
      "node_id": "REFE_lADOABII587SZwXIzwAAAAUEUxrM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21547391692",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a059385438541bc6577f6f2ab2318419c8c3e451",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/a059385438541bc6577f6f2ab2318419c8c3e451",
      "created_at": "2025-12-14T09:25:30Z"
    },
    {
      "event": "referenced",
      "id": 21547502699,
      "node_id": "REFE_lADOABII587SZwXIzwAAAAUEVMxr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21547502699",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "41118e17f87561afc8cbe1f3dd528624f06906a7",
      "commit_url": "https://api.github.com/repos/romanz/bitcoin/commits/41118e17f87561afc8cbe1f3dd528624f06906a7",
      "created_at": "2025-12-14T09:44:37Z"
    },
    {
      "event": "reviewed",
      "id": 3579735099,
      "node_id": "PRR_kwDOABII587VXmw7",
      "url": null,
      "actor": null,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-15T19:14:41Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#pullrequestreview-3579735099",
      "submitted_at": "2025-12-15T19:14:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
    },
    {
      "event": "referenced",
      "id": 21619832897,
      "node_id": "REFE_lADOABII587SZwXIzwAAAAUIpHhB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21619832897",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "a005fdff6c7a6b5b481e11dc1e4117306447f9a6",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a005fdff6c7a6b5b481e11dc1e4117306447f9a6",
      "created_at": "2025-12-17T15:09:19Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2443539559",
      "pull_request_review_id": 3354714295,
      "id": 2443539559,
      "node_id": "PRRC_kwDOABII586RpXRn",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Do we want to support zero `*part_size`? Should probably return false too?",
      "created_at": "2025-10-19T23:04:43Z",
      "updated_at": "2025-10-19T23:04:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2443539559",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2443539559"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1096,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2444741664",
      "pull_request_review_id": 3356129025,
      "id": 2444741664,
      "node_id": "PRRC_kwDOABII586Rt8wg",
      "diff_hunk": "@@ -414,6 +414,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    bool ReadRawBlockPart(std::vector<std::byte>& block, const FlatFilePos& pos, std::optional<size_t> part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Declaration differs from definition, `block` vs `data` parameter name",
      "created_at": "2025-10-20T11:26:34Z",
      "updated_at": "2025-10-20T11:26:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2444741664",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2444741664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 417,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2444750382",
      "pull_request_review_id": 3356139262,
      "id": 2444750382,
      "node_id": "PRRC_kwDOABII586Rt-4u",
      "diff_hunk": "@@ -472,6 +496,11 @@ static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, co\n     return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n }\n \n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)",
      "path": "src/rest.cpp",
      "position": 80,
      "original_position": 65,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": null,
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This way both `block` and `blockpart` api's take the same paramaters, including `\"offset\"` and `\"size\"`, right? Is that intended?",
      "created_at": "2025-10-20T11:31:05Z",
      "updated_at": "2025-10-20T11:31:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2444750382",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2444750382"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 481,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446013049",
      "pull_request_review_id": 3357789365,
      "id": 2446013049,
      "node_id": "PRRC_kwDOABII586RyzJ5",
      "diff_hunk": "@@ -472,6 +496,11 @@ static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, co\n     return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n }\n \n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)",
      "path": "src/rest.cpp",
      "position": 80,
      "original_position": 65,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2444750382,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Right - I have used the same implementation for both endpoints for simplicity and to avoid code duplication.\r\nI can add an additional boolean argument to enable `offset` and `size` parameter handling for the `/rest/blockpart` endpoint (and disable it for `/rest/block` endpoint).\r\nWDYT?",
      "created_at": "2025-10-20T20:14:28Z",
      "updated_at": "2025-10-20T20:37:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2446013049",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446013049"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 481,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446030515",
      "pull_request_review_id": 3357811022,
      "id": 2446030515,
      "node_id": "PRRC_kwDOABII586Ry3az",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2443539559,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sounds good - fixed in [787d6df48a..c4bf7a77c4](https://github.com/bitcoin/bitcoin/compare/787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9..c4bf7a77c45e297672222a2e1a984ef8d755b471).",
      "created_at": "2025-10-20T20:21:20Z",
      "updated_at": "2025-10-20T20:21:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2446030515",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446030515"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1096,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446030635",
      "pull_request_review_id": 3357811179,
      "id": 2446030635,
      "node_id": "PRRC_kwDOABII586Ry3cr",
      "diff_hunk": "@@ -414,6 +414,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    bool ReadRawBlockPart(std::vector<std::byte>& block, const FlatFilePos& pos, std::optional<size_t> part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 4,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2444741664,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks - fixed in [787d6df48a..c4bf7a77c4](https://github.com/bitcoin/bitcoin/compare/787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9..c4bf7a77c45e297672222a2e1a984ef8d755b471).",
      "created_at": "2025-10-20T20:21:23Z",
      "updated_at": "2025-10-20T20:22:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2446030635",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446030635"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 417,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446168275",
      "pull_request_review_id": 3357987847,
      "id": 2446168275,
      "node_id": "PRRC_kwDOABII586RzZDT",
      "diff_hunk": "@@ -472,6 +496,11 @@ static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, co\n     return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n }\n \n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)",
      "path": "src/rest.cpp",
      "position": 80,
      "original_position": 65,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2444750382,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If I understand correctly, this would allow passing `offset` or `size` to `/rest/block` along with `.json` format specification. Normally this would fail to deserialize, but if very unlucky it could deserialize to what looks like a block and return? That would be very bad.\r\nSimilarly if not using `.json`, this would return incorrect data that a user might not expect (for instance if they switched rest endpoints but forgot to remove parameters).\r\n\r\nI would recommend disabling these parameters if not calling `/rest/blockpart`.",
      "created_at": "2025-10-20T21:28:14Z",
      "updated_at": "2025-10-20T22:19:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2446168275",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446168275"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 481,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446263560",
      "pull_request_review_id": 3358111407,
      "id": 2446263560,
      "node_id": "PRRC_kwDOABII586RzwUI",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2443539559,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We should probably cover this as well as other cases of `ReadRawBlockPart` in `blockmanager_tests.cpp`.",
      "created_at": "2025-10-20T22:22:02Z",
      "updated_at": "2025-10-20T22:22:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2446263560",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446263560"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1096,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446805105",
      "pull_request_review_id": 3358853547,
      "id": 2446805105,
      "node_id": "PRRC_kwDOABII586R10hx",
      "diff_hunk": "@@ -472,6 +496,11 @@ static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, co\n     return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n }\n \n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)",
      "path": "src/rest.cpp",
      "position": 80,
      "original_position": 65,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2444750382,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agree - fixed in [c4bf7a77c4..c9bfd298be](https://github.com/bitcoin/bitcoin/compare/c4bf7a77c45e297672222a2e1a984ef8d755b471..c9bfd298be422de7e989fe244fb4281c507068a3) (`offset` and `size` are parsed only for `/rest/blockpart` endpoint).",
      "created_at": "2025-10-21T06:01:17Z",
      "updated_at": "2025-10-21T06:02:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2446805105",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2446805105"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 481,
      "original_line": 481,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2449615816",
      "pull_request_review_id": 3362591120,
      "id": 2449615816,
      "node_id": "PRRC_kwDOABII586SAivI",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "original_commit_id": "787d6df48af31b42ee9a69ff5c33e73bbe8cf8e9",
      "in_reply_to_id": 2443539559,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added in [c9bfd298be..301116e855](https://github.com/bitcoin/bitcoin/compare/c9bfd298be422de7e989fe244fb4281c507068a3..301116e85540e49c27473f450fc210b702db4cf5).",
      "created_at": "2025-10-21T20:26:00Z",
      "updated_at": "2025-10-21T20:26:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2449615816",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2449615816"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1096,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477934300",
      "pull_request_review_id": 3399383695,
      "id": 2477934300,
      "node_id": "PRRC_kwDOABII586Tskbc",
      "diff_hunk": "@@ -464,12 +469,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 69,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Can you add a test case for the error conditions? Maybe I am missing it, but corecheck's coverage report also thinks they are not covered.",
      "created_at": "2025-10-30T12:35:36Z",
      "updated_at": "2025-10-30T12:53:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2477934300",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477934300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 489,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479504434",
      "pull_request_review_id": 3401627353,
      "id": 2479504434,
      "node_id": "PRRC_kwDOABII586Tyjwy",
      "diff_hunk": "@@ -464,12 +469,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 69,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "in_reply_to_id": 2477934300,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks - added in [301116e855...c30647c4d3](https://github.com/bitcoin/bitcoin/compare/301116e85540e49c27473f450fc210b702db4cf5..c30647c4d34c2941696729704854467b30657c43).\r\n\r\nAlso, tested an invalid RFC 3986 query:\r\n```\r\n$ curl -v 'http://localhost:8332/rest/blockpart/000000000000000000016d31a675b96acb4aacca6e4653039703b9fe03997c78.hex?%XY'\r\n* Host localhost:8332 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:8332...\r\n* Connected to localhost (::1) port 8332\r\n> GET /rest/blockpart/000000000000000000016d31a675b96acb4aacca6e4653039703b9fe03997c78.hex?%XY HTTP/1.1\r\n> Host: localhost:8332\r\n> User-Agent: curl/8.5.0\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 400 Bad Request\r\n< Content-Type: text/plain\r\n< Date: Thu, 30 Oct 2025 20:58:12 GMT\r\n< Content-Length: 69\r\n< \r\nURI parsing failed, it likely contained RFC 3986 invalid characters\r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nas well as querying a pruned block:\r\n```\r\n$ curl -v 'http://localhost:8332/rest/blockpart/0000000000002917ed80650c6174aac8dfc46f5fe36480aaef682ff6cd83c3ca.hex?offset=3&size=5'\r\n* Host localhost:8332 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:8332...\r\n* Connected to localhost (::1) port 8332\r\n> GET /rest/blockpart/0000000000002917ed80650c6174aac8dfc46f5fe36480aaef682ff6cd83c3ca.hex?offset=3&size=5 HTTP/1.1\r\n> Host: localhost:8332\r\n> User-Agent: curl/8.5.0\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 404 Not Found\r\n< Content-Type: text/plain\r\n< Date: Thu, 30 Oct 2025 20:59:08 GMT\r\n< Content-Length: 94\r\n< \r\n0000000000002917ed80650c6174aac8dfc46f5fe36480aaef682ff6cd83c3ca not available (pruned data)\r\n* Connection #0 to host localhost left intact\r\n```",
      "created_at": "2025-10-30T20:59:22Z",
      "updated_at": "2025-10-30T20:59:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2479504434",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479504434"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 489,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483736256",
      "pull_request_review_id": 3407545416,
      "id": 2483736256,
      "node_id": "PRRC_kwDOABII586UCs7A",
      "diff_hunk": "@@ -392,7 +392,9 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n-                       TxVerbosity tx_verbosity)\n+                       std::optional<TxVerbosity> tx_verbosity,",
      "path": "src/rest.cpp",
      "position": 14,
      "original_position": 5,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "in_reply_to_id": null,
      "user": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Why make verbosity optional, and not keep as-is?\r\nWhere is it called with a null value?",
      "created_at": "2025-11-01T14:02:09Z",
      "updated_at": "2025-11-01T14:04:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2483736256",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483736256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 391,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483749818",
      "pull_request_review_id": 3407558383,
      "id": 2483749818,
      "node_id": "PRRC_kwDOABII586UCwO6",
      "diff_hunk": "@@ -392,7 +392,9 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n-                       TxVerbosity tx_verbosity)\n+                       std::optional<TxVerbosity> tx_verbosity,",
      "path": "src/rest.cpp",
      "position": 14,
      "original_position": 5,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "in_reply_to_id": 2483736256,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Why make verbosity optional, and not keep as-is?\r\n\r\nIt allows reusing this function also for the new REST endpoint (`/blockpart/`) which doesn't support JSON response format.\r\n\r\n> Where is it called with a null value?\r\n\r\nIt is called by `rest_block_part()` here:\r\nhttps://github.com/bitcoin/bitcoin/blob/c30647c4d34c2941696729704854467b30657c43/src/rest.cpp#L480-L503",
      "created_at": "2025-11-01T14:39:12Z",
      "updated_at": "2025-11-01T16:57:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2483749818",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483749818"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 391,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483977816",
      "pull_request_review_id": 3407807564,
      "id": 2483977816,
      "node_id": "PRRC_kwDOABII586UDn5Y",
      "diff_hunk": "@@ -392,7 +392,9 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n-                       TxVerbosity tx_verbosity)\n+                       std::optional<TxVerbosity> tx_verbosity,",
      "path": "src/rest.cpp",
      "position": 14,
      "original_position": 5,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "in_reply_to_id": 2483736256,
      "user": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Oh, now I get it.\r\nSo the question is why `tx_verbosity` was required in the first place even when the data-format was binary or hex (where it is ignored).\r\nConsider splitting this into two commits, one to make `tx_verbosity` optional, and another to add the new blockpart feature.",
      "created_at": "2025-11-01T22:25:56Z",
      "updated_at": "2025-11-01T22:25:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2483977816",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2483977816"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 391,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2484934207",
      "pull_request_review_id": 3408896349,
      "id": 2484934207,
      "node_id": "PRRC_kwDOABII586UHRY_",
      "diff_hunk": "@@ -392,7 +392,9 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n-                       TxVerbosity tx_verbosity)\n+                       std::optional<TxVerbosity> tx_verbosity,",
      "path": "src/rest.cpp",
      "position": 14,
      "original_position": 5,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "in_reply_to_id": 2483736256,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Not sure if splitting this PR into two commits will make it clearer...\r\nMaybe I should add a comment at `rest_block()` definition?",
      "created_at": "2025-11-02T18:02:28Z",
      "updated_at": "2025-11-02T18:02:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2484934207",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2484934207"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 391,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2484938860",
      "pull_request_review_id": 3408904955,
      "id": 2484938860,
      "node_id": "PRRC_kwDOABII586UHShs",
      "diff_hunk": "@@ -392,7 +392,9 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n-                       TxVerbosity tx_verbosity)\n+                       std::optional<TxVerbosity> tx_verbosity,",
      "path": "src/rest.cpp",
      "position": 14,
      "original_position": 5,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "in_reply_to_id": 2483736256,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "e.g.:\r\n```c++\r\n/**\r\n * This handler is used for multiple HTTP endpoints:\r\n * - `/block/` via `rest_block_extended()`\r\n * - `/block/notxdetails/` via `rest_block_notxdetails()`\r\n * - `/blockpart/` via `rest_block_part` (doesn't support JSON response so `tx_verbosity` is unset)\r\n */\r\nstatic bool rest_block(const std::any& context,\r\n                       HTTPRequest* req,\r\n                       const std::string& uri_part,\r\n                       std::optional<TxVerbosity> tx_verbosity,\r\n                       std::optional<size_t> part_offset,\r\n                       std::optional<size_t> part_size)\r\n```                       ",
      "created_at": "2025-11-02T18:14:26Z",
      "updated_at": "2025-11-02T18:14:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2484938860",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2484938860"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 391,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2507024695",
      "pull_request_review_id": 3438487380,
      "id": 2507024695,
      "node_id": "PRRC_kwDOABII586Vbik3",
      "diff_hunk": "@@ -392,7 +392,9 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n-                       TxVerbosity tx_verbosity)\n+                       std::optional<TxVerbosity> tx_verbosity,",
      "path": "src/rest.cpp",
      "position": 14,
      "original_position": 5,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "c30647c4d34c2941696729704854467b30657c43",
      "in_reply_to_id": 2483736256,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added here:\r\nhttps://github.com/bitcoin/bitcoin/blob/e14650967dc95da5c10e0d6183b6eac3e8243fe5/src/rest.cpp#L392-L397",
      "created_at": "2025-11-08T17:16:25Z",
      "updated_at": "2025-11-08T17:16:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2507024695",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2507024695"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 391,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532036409",
      "pull_request_review_id": 3470261623,
      "id": 2532036409,
      "node_id": "PRRC_kwDOABII586W6885",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n            if (*part_offset > blk_size) [[unlikely]] {\n```\n",
      "created_at": "2025-11-16T15:38:25Z",
      "updated_at": "2025-11-16T15:43:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532036409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532036409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1087,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532036843",
      "pull_request_review_id": 3470261623,
      "id": 2532036843,
      "node_id": "PRRC_kwDOABII586W69Dr",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n            if (*part_size > size || *part_size == 0) [[unlikely]] {\n```\n",
      "created_at": "2025-11-16T15:39:08Z",
      "updated_at": "2025-11-16T15:43:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532036843",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532036843"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1098,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532037331",
      "pull_request_review_id": 3470261623,
      "id": 2532037331,
      "node_id": "PRRC_kwDOABII586W69LT",
      "diff_hunk": "@@ -446,10 +454,13 @@ static bool rest_block(const std::any& context,\n     }\n \n     case RESTResponseFormat::JSON: {\n+        if (!tx_verbosity.has_value()) {",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n        if (!tx_verbosity.has_value()) [[unlikely]] { \n```\n",
      "created_at": "2025-11-16T15:40:00Z",
      "updated_at": "2025-11-16T15:43:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532037331",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532037331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 466,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532037585",
      "pull_request_review_id": 3470261623,
      "id": 2532037585,
      "node_id": "PRRC_kwDOABII586W69PR",
      "diff_hunk": "@@ -464,12 +475,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 66,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n            if (!part_offset.has_value()) [[unlikely]] {\n```\n",
      "created_at": "2025-11-16T15:40:26Z",
      "updated_at": "2025-11-16T15:43:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532037585",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532037585"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 494,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532037702",
      "pull_request_review_id": 3470261623,
      "id": 2532037702,
      "node_id": "PRRC_kwDOABII586W69RG",
      "diff_hunk": "@@ -464,12 +475,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 73,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n            if (!part_size.has_value()) [[unlikely]] {\n```\n",
      "created_at": "2025-11-16T15:40:44Z",
      "updated_at": "2025-11-16T15:43:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532037702",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532037702"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 512,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532038587",
      "pull_request_review_id": 3470261623,
      "id": 2532038587,
      "node_id": "PRRC_kwDOABII586W69e7",
      "diff_hunk": "@@ -464,12 +475,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {",
      "path": "src/rest.cpp",
      "position": 94,
      "original_position": 77,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n    } catch (const std::runtime_error& e) [[unlikely]] {\n```\n",
      "created_at": "2025-11-16T15:42:12Z",
      "updated_at": "2025-11-16T15:43:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532038587",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532038587"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 495,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532087454",
      "pull_request_review_id": 3470303055,
      "id": 2532087454,
      "node_id": "PRRC_kwDOABII586W7Jae",
      "diff_hunk": "@@ -464,12 +475,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {",
      "path": "src/rest.cpp",
      "position": 94,
      "original_position": 77,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": 2532038587,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The above suggestion fails to compile on my machine:\r\n```\r\nsrc/rest.cpp: In function bool rest_block_part(const std::any&, HTTPRequest*, const std::string&):\r\nsrc/rest.cpp:505:43: error: expected { before [ token\r\n  505 |     } catch (const std::runtime_error& e) [[unlikely]] {\r\n      |                                           ^\r\n\r\n$ gcc --version\r\ngcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0\r\n```",
      "created_at": "2025-11-16T17:08:59Z",
      "updated_at": "2025-11-16T17:08:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532087454",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532087454"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 495,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532090415",
      "pull_request_review_id": 3470307189,
      "id": 2532090415,
      "node_id": "PRRC_kwDOABII586W7KIv",
      "diff_hunk": "@@ -464,12 +475,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {",
      "path": "src/rest.cpp",
      "position": 94,
      "original_position": 77,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": 2532038587,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ahh I didn't test these suggestions before submitting. I wasn't sure if we could have that annotation after a catch block. Please ignore.",
      "created_at": "2025-11-16T17:13:25Z",
      "updated_at": "2025-11-16T17:13:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2532090415",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2532090415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 495,
      "original_line": 495,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549741549",
      "pull_request_review_id": 3492740506,
      "id": 2549741549,
      "node_id": "PRRC_kwDOABII586X-fft",
      "diff_hunk": "@@ -1078,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {\n+                LogError(\"Read from block file failed: invalid size: %u\", *part_size);\n+                return false;\n+            }\n+            size = *part_size;\n+        }\n+\n+\n+        data.resize(size); // Zeroing of memory is intentional here\n+        filein.seek(offset, SEEK_CUR);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 63,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Could avoid syscall in common case\n```suggestion\n        if (offset > 0) filein.seek(offset, SEEK_CUR);\n```\nOther PR avoiding similar syscall which was leading to slowdowns on Windows: #30884\nAlternatively one could perform the noop-check inside of `AutoFile` itself.",
      "created_at": "2025-11-21T13:19:41Z",
      "updated_at": "2025-11-21T14:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2549741549",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549741549"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549751593",
      "pull_request_review_id": 3492740506,
      "id": 2549751593,
      "node_id": "PRRC_kwDOABII586X-h8p",
      "diff_hunk": "@@ -1046,6 +1045,11 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    return ReadRawBlockPart(block, pos, std::nullopt, std::nullopt);\n+}\n+\n+bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, std::optional<size_t> part_offset, std::optional<size_t> part_size) const",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "No need to have `std::optional` for the offset, could just be sent in as `0` when reading whole blocks. Same for parameter types in rest.cpp.\n```suggestion\nbool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n```\n\n<details><summary>Full compiling diff (includes suggestion to skip noop seeks, see other comment).</summary>\n\n```diff\ndiff --git a/src/node/blockstorage.cpp b/src/node/blockstorage.cpp\nindex 47beac674c..7062735067 100644\n--- a/src/node/blockstorage.cpp\n+++ b/src/node/blockstorage.cpp\n@@ -1046,10 +1046,10 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n {\n-    return ReadRawBlockPart(block, pos, std::nullopt, std::nullopt);\n+    return ReadRawBlockPart(block, pos, 0, std::nullopt);\n }\n \n-bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, std::optional<size_t> part_offset, std::optional<size_t> part_size) const\n+bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n@@ -1082,16 +1082,12 @@ bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFile\n             return false;\n         }\n \n-        size_t offset = 0;\n-        if (part_offset.has_value()) {\n-            if (*part_offset > blk_size) {\n-                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n-                return false;\n-            }\n-            offset = *part_offset;\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);\n+            return false;\n         }\n \n-        size_t size = blk_size - offset;\n+        size_t size = blk_size - part_offset;\n         if (part_size.has_value()) {\n             if (*part_size > size || *part_size == 0) {\n                 LogError(\"Read from block file failed: invalid size: %u\", *part_size);\n@@ -1102,7 +1098,7 @@ bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFile\n \n \n         data.resize(size); // Zeroing of memory is intentional here\n-        filein.seek(offset, SEEK_CUR);\n+        if (part_offset > 0) filein.seek(part_offset, SEEK_CUR);\n         filein.read(data);\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\ndiff --git a/src/node/blockstorage.h b/src/node/blockstorage.h\nindex 61128942b3..9f33d826a1 100644\n--- a/src/node/blockstorage.h\n+++ b/src/node/blockstorage.h\n@@ -414,7 +414,7 @@ public:\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n-    bool ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, std::optional<size_t> part_offset, std::optional<size_t> part_size) const;\n+    bool ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;\n \n     bool ReadBlockUndo(CBlockUndo& blockundo, const CBlockIndex& index) const;\n \ndiff --git a/src/rest.cpp b/src/rest.cpp\nindex f3edc69d09..294337a24b 100644\n--- a/src/rest.cpp\n+++ b/src/rest.cpp\n@@ -399,7 +399,7 @@ static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& uri_part,\n                        std::optional<TxVerbosity> tx_verbosity,\n-                       std::optional<size_t> part_offset,\n+                       size_t part_offset,\n                        std::optional<size_t> part_size)\n {\n     if (!CheckWarmup(req))\n@@ -475,23 +475,25 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    std::optional<size_t> part_offset{};\n+    size_t part_offset{0};\n     std::optional<size_t> part_size{};\n     try {\n         const auto part_offset_str = req->GetQueryParameter(\"offset\");\n         if (part_offset_str.has_value()) {\n-            part_offset = ToIntegral<size_t>(*part_offset_str);\n-            if (!part_offset.has_value()) {\n+            auto opt = ToIntegral<size_t>(*part_offset_str);\n+            if (opt.has_value()) {\n+                part_offset = opt.value();\n+            } else {\n                 return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n             }\n         }\n```\n\n</details>",
      "created_at": "2025-11-21T13:23:08Z",
      "updated_at": "2025-11-21T14:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2549751593",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549751593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1052,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549772096",
      "pull_request_review_id": 3492740506,
      "id": 2549772096,
      "node_id": "PRRC_kwDOABII586X-m9A",
      "diff_hunk": "@@ -137,6 +137,64 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip.GetBlockPos()));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), std::nullopt, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Could call `block_part.clear()` between each read.",
      "created_at": "2025-11-21T13:30:42Z",
      "updated_at": "2025-11-21T14:50:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2549772096",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549772096"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550802960",
      "pull_request_review_id": 3494155075,
      "id": 2550802960,
      "node_id": "PRRC_kwDOABII586YCioQ",
      "diff_hunk": "@@ -137,6 +137,64 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip.GetBlockPos()));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), std::nullopt, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 20,
      "commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": 2549772096,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sounds good - fixed in [e14650967d..8457a71a64](https://github.com/bitcoin/bitcoin/compare/e14650967dc95da5c10e0d6183b6eac3e8243fe5..8457a71a6420792a1b9c7c8645c9e5c607a4b90c).",
      "created_at": "2025-11-21T19:49:40Z",
      "updated_at": "2025-11-21T19:49:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2550802960",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550802960"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550803976",
      "pull_request_review_id": 3494156486,
      "id": 2550803976,
      "node_id": "PRRC_kwDOABII586YCi4I",
      "diff_hunk": "@@ -1046,6 +1045,11 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    return ReadRawBlockPart(block, pos, std::nullopt, std::nullopt);\n+}\n+\n+bool BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, std::optional<size_t> part_offset, std::optional<size_t> part_size) const",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": 2549751593,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Many thanks! [e14650967d..8457a71a64](https://github.com/bitcoin/bitcoin/compare/e14650967dc95da5c10e0d6183b6eac3e8243fe5..8457a71a6420792a1b9c7c8645c9e5c607a4b90c)",
      "created_at": "2025-11-21T19:50:09Z",
      "updated_at": "2025-11-21T19:50:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2550803976",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550803976"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1052,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550804495",
      "pull_request_review_id": 3494157040,
      "id": 2550804495,
      "node_id": "PRRC_kwDOABII586YCjAP",
      "diff_hunk": "@@ -1078,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {\n+                LogError(\"Read from block file failed: invalid size: %u\", *part_size);\n+                return false;\n+            }\n+            size = *part_size;\n+        }\n+\n+\n+        data.resize(size); // Zeroing of memory is intentional here\n+        filein.seek(offset, SEEK_CUR);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 63,
      "commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": 2549741549,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed by [e14650967d..8457a71a64](https://github.com/bitcoin/bitcoin/compare/e14650967dc95da5c10e0d6183b6eac3e8243fe5..8457a71a6420792a1b9c7c8645c9e5c607a4b90c).",
      "created_at": "2025-11-21T19:50:24Z",
      "updated_at": "2025-11-21T19:50:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2550804495",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2550804495"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2551029734",
      "pull_request_review_id": 3494446000,
      "id": 2551029734,
      "node_id": "PRRC_kwDOABII586YDZ_m",
      "diff_hunk": "@@ -133,11 +132,79 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip.GetBlockPos()));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 1, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 10, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, block.size()));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 1);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, block.size() - 10));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 10);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, 20));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.begin() + 20);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 1, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 10, 20));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.begin() + 30);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 1, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), block.size() - 1, 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.end() - 1, block.end());\n+\n+    BOOST_CHECK(!blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, 0));\n+    BOOST_CHECK(!blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, 0));",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 137,
      "commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "original_commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: With the latest push (https://github.com/bitcoin/bitcoin/compare/e14650967dc95da5c10e0d6183b6eac3e8243fe5..8457a71a6420792a1b9c7c8645c9e5c607a4b90c#diff-d6d633592a40f5f3d8b03863e41547de8751b874c1d20f129a616b9dd719b999), we are testing the same thing on two lines.",
      "created_at": "2025-11-21T21:38:51Z",
      "updated_at": "2025-11-21T21:38:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2551029734",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2551029734"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 199,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 200,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2552443566",
      "pull_request_review_id": 3495997264,
      "id": 2552443566,
      "node_id": "PRRC_kwDOABII586YIzKu",
      "diff_hunk": "@@ -133,11 +132,79 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip.GetBlockPos()));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 1, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 10, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, block.size()));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 1);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, block.size() - 10));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 10);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, 20));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.begin() + 20);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 1, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 10, 20));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.begin() + 30);\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 1, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    block_part.clear();\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), block.size() - 1, 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.end() - 1, block.end());\n+\n+    BOOST_CHECK(!blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, 0));\n+    BOOST_CHECK(!blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, 0));",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 137,
      "commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "original_commit_id": "8457a71a6420792a1b9c7c8645c9e5c607a4b90c",
      "in_reply_to_id": 2551029734,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Oops - thanks!\r\nFixed in [8457a71a64..78d6402458](https://github.com/bitcoin/bitcoin/compare/8457a71a6420792a1b9c7c8645c9e5c607a4b90c..78d6402458d7d14533444d893c989f0534a3896f) (also removed 2 duplicate test cases above).",
      "created_at": "2025-11-22T07:26:51Z",
      "updated_at": "2025-11-22T07:26:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2552443566",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2552443566"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 199,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 200,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2555214226",
      "pull_request_review_id": 3499037428,
      "id": 2555214226,
      "node_id": "PRRC_kwDOABII586YTXmS",
      "diff_hunk": "@@ -47,6 +47,11 @@ The HTTP request and response are both handled entirely in-memory.\n \n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n+- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?start=X&offset=Y`",
      "path": "doc/REST-interface.md",
      "position": 1,
      "original_position": 4,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "original_commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Incorrect names:\r\n```suggestion\r\n- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?offset=X&size=Y`\r\n```",
      "created_at": "2025-11-24T08:51:41Z",
      "updated_at": "2025-11-24T14:43:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2555214226",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2555214226"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2555223914",
      "pull_request_review_id": 3499037428,
      "id": 2555223914,
      "node_id": "PRRC_kwDOABII586YTZ9q",
      "diff_hunk": "@@ -0,0 +1,5 @@\n+New RPCs\n+--------\n+\n+- A new REST API endpoint (`/rest/blockpart/BLOCKHASH`) has been introduced",
      "path": "doc/release-notes-33657.md",
      "position": 1,
      "original_position": 4,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "original_commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: I think it's worth including the parameters to make the reason behind adding this more understandable.\r\n```suggestion\r\n- A new REST API endpoint (`/rest/blockpart/BLOCKHASH?offset=X&size=Y`) has been introduced\r\n```",
      "created_at": "2025-11-24T08:53:45Z",
      "updated_at": "2025-11-24T14:43:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2555223914",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2555223914"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2555229245",
      "pull_request_review_id": 3499037428,
      "id": 2555229245,
      "node_id": "PRRC_kwDOABII586YTbQ9",
      "diff_hunk": "@@ -379,10 +389,18 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n     }\n }\n \n+/**\n+ * This handler is used by multiple HTTP endpoints:\n+ * - `/block/` via `rest_block_extended()`\n+ * - `/block/notxdetails/` via `rest_block_notxdetails()`\n+ * - `/blockpart/` via `rest_block_part` (doesn't support JSON response, so `tx_verbosity` is unset)",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "original_commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Consistency\n```suggestion\n * - `/blockpart/` via `rest_block_part()` (doesn't support JSON response, so `tx_verbosity` is unset)\n```",
      "created_at": "2025-11-24T08:54:53Z",
      "updated_at": "2025-11-24T14:43:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2555229245",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2555229245"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 396,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2557682639",
      "pull_request_review_id": 3502185775,
      "id": 2557682639,
      "node_id": "PRRC_kwDOABII586YcyPP",
      "diff_hunk": "@@ -379,10 +389,18 @@ static bool rest_spent_txouts(const std::any& context, HTTPRequest* req, const s\n     }\n }\n \n+/**\n+ * This handler is used by multiple HTTP endpoints:\n+ * - `/block/` via `rest_block_extended()`\n+ * - `/block/notxdetails/` via `rest_block_notxdetails()`\n+ * - `/blockpart/` via `rest_block_part` (doesn't support JSON response, so `tx_verbosity` is unset)",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 46,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "original_commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "in_reply_to_id": 2555229245,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "[`78d6402458..c2088a7458`](https://github.com/bitcoin/bitcoin/compare/78d6402458d7d14533444d893c989f0534a3896f..c2088a74586742cadc0041cab8782c423eda3bd0)",
      "created_at": "2025-11-24T20:48:09Z",
      "updated_at": "2025-11-29T10:15:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2557682639",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2557682639"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 396,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2557682926",
      "pull_request_review_id": 3502186171,
      "id": 2557682926,
      "node_id": "PRRC_kwDOABII586YcyTu",
      "diff_hunk": "@@ -0,0 +1,5 @@\n+New RPCs\n+--------\n+\n+- A new REST API endpoint (`/rest/blockpart/BLOCKHASH`) has been introduced",
      "path": "doc/release-notes-33657.md",
      "position": 1,
      "original_position": 4,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "original_commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "in_reply_to_id": 2555223914,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sounds good -> [78d6402458..c2088a7458](https://github.com/bitcoin/bitcoin/compare/78d6402458d7d14533444d893c989f0534a3896f..c2088a74586742cadc0041cab8782c423eda3bd0)",
      "created_at": "2025-11-24T20:48:18Z",
      "updated_at": "2025-11-24T20:48:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2557682926",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2557682926"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2557683518",
      "pull_request_review_id": 3502186887,
      "id": 2557683518,
      "node_id": "PRRC_kwDOABII586Ycyc-",
      "diff_hunk": "@@ -47,6 +47,11 @@ The HTTP request and response are both handled entirely in-memory.\n \n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n+- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?start=X&offset=Y`",
      "path": "doc/REST-interface.md",
      "position": 1,
      "original_position": 4,
      "commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "original_commit_id": "78d6402458d7d14533444d893c989f0534a3896f",
      "in_reply_to_id": 2555214226,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks!\r\nFixed in [78d6402458..c2088a7458](https://github.com/bitcoin/bitcoin/compare/78d6402458d7d14533444d893c989f0534a3896f..c2088a74586742cadc0041cab8782c423eda3bd0).",
      "created_at": "2025-11-24T20:48:35Z",
      "updated_at": "2025-11-24T20:48:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2557683518",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2557683518"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559477612",
      "pull_request_review_id": 3504428218,
      "id": 2559477612,
      "node_id": "PRRC_kwDOABII586Yjods",
      "diff_hunk": "@@ -1077,8 +1082,28 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t offset = 0;\n+        if (part_offset.has_value()) {\n+            if (*part_offset > blk_size) {\n+                LogError(\"Read from block file failed: invalid offset: %u\", *part_offset);\n+                return false;\n+            }\n+            offset = *part_offset;\n+        }\n+\n+        size_t size = blk_size - offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e14650967dc95da5c10e0d6183b6eac3e8243fe5",
      "in_reply_to_id": 2532036843,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> `[[unlikely]]`\n\nWill this actually help in a large function without a loop, where a single if is annotated?\n\nGenerally, I have the impression that `[[likely]]`, and `[[unlikely]]` should not be used. Possibly in rare cases, where there is a really hot loop, and all release compilers agree that the attribute will help.\n\nIn other cases, if the attributes are used too liberal, it seems an accidental pessimization is plausible: It is unclear what the meaning of the attributes are, if nested scopes use both `[[likely]]` and `[[unlikely]]` at different scope levels, but the same path of execution, possibly hidden in macros.\n\nRef:\n\nhttps://eel.is/c++draft/dcl.attr.likelihood#note-2\n\n> [Note [2](https://eel.is/c++draft/dcl.attr.likelihood#note-2):Excessive usage of either of these attributes is liable to result in performance degradation[.](https://eel.is/c++draft/dcl.attr.likelihood#2.sentence-5)\n end note]\n\nand https://blog.aaronballman.com/2020/08/dont-use-the-likely-or-unlikely-attributes/\n\n\nOtherwise, if there was a benefit, it would be easier to just annotate the `LogError` macro with unlikely and not every scope that calls it.",
      "created_at": "2025-11-25T10:37:22Z",
      "updated_at": "2025-11-25T10:37:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2559477612",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559477612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1098,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559487359",
      "pull_request_review_id": 3504441013,
      "id": 2559487359,
      "node_id": "PRRC_kwDOABII586Yjq1_",
      "diff_hunk": "@@ -1049,6 +1045,11 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    return ReadRawBlockPart(block, pos, 0, std::nullopt);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 146,
      "commit_id": "c2088a74586742cadc0041cab8782c423eda3bd0",
      "original_commit_id": "c2088a74586742cadc0041cab8782c423eda3bd0",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Could use named args consistently, like below? `/*part_offset=*/0, /*part_size=*/std::nullopt);`\n\n",
      "created_at": "2025-11-25T10:40:12Z",
      "updated_at": "2025-11-25T10:40:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2559487359",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2559487359"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1049,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2560837987",
      "pull_request_review_id": 3506123497,
      "id": 2560837987,
      "node_id": "PRRC_kwDOABII586Yo0lj",
      "diff_hunk": "@@ -1049,6 +1045,11 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    return ReadRawBlockPart(block, pos, 0, std::nullopt);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 146,
      "commit_id": "c2088a74586742cadc0041cab8782c423eda3bd0",
      "original_commit_id": "c2088a74586742cadc0041cab8782c423eda3bd0",
      "in_reply_to_id": 2559487359,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks! Fixed in [`c2088a7458...ff5c3fecea`](https://github.com/bitcoin/bitcoin/compare/c2088a74586742cadc0041cab8782c423eda3bd0..ff5c3feceaba496ff25efd8420cfcc32e0864bcc).",
      "created_at": "2025-11-25T17:25:07Z",
      "updated_at": "2025-11-29T10:14:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2560837987",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2560837987"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1049,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2564089445",
      "pull_request_review_id": 3509833324,
      "id": 2564089445,
      "node_id": "PRRC_kwDOABII586Y1OZl",
      "diff_hunk": "@@ -47,6 +47,11 @@ The HTTP request and response are both handled entirely in-memory.\n \n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n+- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?offset=X&size=Y`\n+\n+Given a block hash: returns a block part, in binary or hex-encoded binary formats.\n+Responds with 404 if the block doesn't exist.",
      "path": "doc/REST-interface.md",
      "position": 1,
      "original_position": 7,
      "commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\nResponds with 404 if the block or the byte range doesn't exist.\n```\n\nnit",
      "created_at": "2025-11-26T09:02:05Z",
      "updated_at": "2025-11-26T09:34:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2564089445",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2564089445"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2564184625",
      "pull_request_review_id": 3509833324,
      "id": 2564184625,
      "node_id": "PRRC_kwDOABII586Y1lox",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "the rest interface should be fine to expose to remote untrusted parties, no? So i am not sure about allowing them to unconditionally log confusing errors to the debug log.\n\ni think it would be better if the caller could decide if there really was a storage corruption and an error should be logged, or if the user just had a typo in the rest url.\n\nOne way to achieve this, would be by returning a failure value.\n\nUnfortunately, `util::Result` does not yet allow this:  #25665. So maybe for now, the return value could be a `std::optional<ReadRawError>`?\n\n```cpp\nstruct ReadRawError{\n  std::string msg;\n  bool invalid_range;\n};\n```",
      "created_at": "2025-11-26T09:20:14Z",
      "updated_at": "2025-11-26T09:34:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2564184625",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2564184625"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2564233993",
      "pull_request_review_id": 3509833324,
      "id": 2564233993,
      "node_id": "PRRC_kwDOABII586Y1xsJ",
      "diff_hunk": "@@ -464,12 +469,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 69,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "in_reply_to_id": 2477934300,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I also don't see the code path here. `rest_block` is called in the scope and line below, so why would pruning have any effect here?\n\n",
      "created_at": "2025-11-26T09:33:15Z",
      "updated_at": "2025-11-26T09:34:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2564233993",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2564233993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 489,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2566624413",
      "pull_request_review_id": 3512924394,
      "id": 2566624413,
      "node_id": "PRRC_kwDOABII586Y-5Sd",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564184625,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> i think it would be better if the caller could decide if there really was a storage corruption and an error should be logged, or if the user just had a typo in the rest url.\r\n\r\nSounds good - WDYT about https://github.com/romanz/bitcoin/commit/9716ff4dd92b31fa4d97b909892f7fc8e3c82b9c?\r\n",
      "created_at": "2025-11-26T22:19:45Z",
      "updated_at": "2025-11-26T22:19:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2566624413",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2566624413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2566629544",
      "pull_request_review_id": 3512932423,
      "id": 2566629544,
      "node_id": "PRRC_kwDOABII586Y-6io",
      "diff_hunk": "@@ -47,6 +47,11 @@ The HTTP request and response are both handled entirely in-memory.\n \n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n+- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?offset=X&size=Y`\n+\n+Given a block hash: returns a block part, in binary or hex-encoded binary formats.\n+Responds with 404 if the block doesn't exist.",
      "path": "doc/REST-interface.md",
      "position": 1,
      "original_position": 7,
      "commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564089445,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks! Fixed in [`ff5c3fecea..f50c0d9a3e`](https://github.com/bitcoin/bitcoin/compare/ff5c3feceaba496ff25efd8420cfcc32e0864bcc..f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2).",
      "created_at": "2025-11-26T22:23:15Z",
      "updated_at": "2025-11-29T10:14:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2566629544",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2566629544"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2566644764",
      "pull_request_review_id": 3512951699,
      "id": 2566644764,
      "node_id": "PRRC_kwDOABII586Y--Qc",
      "diff_hunk": "@@ -464,12 +469,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 69,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "in_reply_to_id": 2477934300,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You're right - I just wanted to mention that trying to fetch a pruned block still returns `404 Not Found` error.\r\n\r\nFor testing the `catch (const std::runtime_error& e)` clause, I have used an invalid URL encoding by passing the `%XY` parameter:\r\n```\r\n$ curl -v \"http://localhost:8332/rest/blockpart/00.hex?%XY\"\r\n```",
      "created_at": "2025-11-26T22:33:35Z",
      "updated_at": "2025-11-26T22:33:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2566644764",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2566644764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 489,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2570863123",
      "pull_request_review_id": 3517986767,
      "id": 2570863123,
      "node_id": "PRRC_kwDOABII586ZPEIT",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564184625,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Did a tweak commit on top of https://github.com/romanz/bitcoin/commit/9716ff4dd92b31fa4d97b909892f7fc8e3c82b9c: https://github.com/hodlinator/bitcoin/commit/0c75c322a404708d82d9bbf31b70f3b036c831ba\r\n\r\n* NotFound -> IO seems more accurate.\r\n* Add comments to explain why we don't log for some errors.\r\n* Marginally nicer errors in rest.cpp (used contrived `0` for unset `part_size`). Feel less strongly about this.",
      "created_at": "2025-11-28T08:50:58Z",
      "updated_at": "2025-11-28T08:50:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2570863123",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2570863123"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2570949283",
      "pull_request_review_id": 3518090302,
      "id": 2570949283,
      "node_id": "PRRC_kwDOABII586ZPZKj",
      "diff_hunk": "@@ -464,12 +469,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 69,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "in_reply_to_id": 2477934300,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe do something like this then?\r\n\r\n```diff\r\n--- a/test/functional/interface_rest.py\r\n+++ b/test/functional/interface_rest.py\r\n@@ -67,12 +67,15 @@ class RESTTest (BitcoinTestFramework):\r\n             status: int = 200,\r\n             ret_type: RetType = RetType.JSON,\r\n             query_params: Optional[dict[str, typing.Any]] = None,\r\n+            raw_query_params: Optional[str] = None,\r\n             ) -> typing.Union[http.client.HTTPResponse, bytes, str, None]:\r\n         rest_uri = '/rest' + uri\r\n         if req_type in ReqType:\r\n             rest_uri += f'.{req_type.name.lower()}'\r\n         if query_params:\r\n             rest_uri += f'?{urllib.parse.urlencode(query_params)}'\r\n+        elif raw_query_params:\r\n+            rest_uri += f'?{raw_query_params}'\r\n \r\n         conn = http.client.HTTPConnection(self.url.hostname, self.url.port)\r\n         self.log.debug(f'{http_method} {rest_uri} {body}')\r\n@@ -482,6 +485,7 @@ class RESTTest (BitcoinTestFramework):\r\n             _get_block_part(status=400, query_params={\"offset\": \"x\"})\r\n             _get_block_part(status=400, query_params={\"size\": \"y\"})\r\n             _get_block_part(status=400, query_params={\"offset\": \"x\", \"size\": \"y\"})\r\n+            assert _get_block_part(status=400, raw_query_params=\"%XY\").decode(\"utf-8\").startswith(\"URI parsing failed\")\r\n \r\n             _get_block_part(status=404, query_params={\"offset\": 0, \"size\": 0})\r\n             _get_block_part(status=404, query_params={\"offset\": len(block_bin), \"size\": 0})\r\n```",
      "created_at": "2025-11-28T09:19:20Z",
      "updated_at": "2025-11-28T09:19:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2570949283",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2570949283"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 489,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2571010317",
      "pull_request_review_id": 3518167081,
      "id": 2571010317,
      "node_id": "PRRC_kwDOABII586ZPoEN",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564184625,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Did a tweak commit on top of [romanz@9716ff4](https://github.com/romanz/bitcoin/commit/9716ff4dd92b31fa4d97b909892f7fc8e3c82b9c): [hodlinator@0c75c32](https://github.com/hodlinator/bitcoin/commit/0c75c322a404708d82d9bbf31b70f3b036c831ba)\r\n\r\nlgtm. Could also merge the two size/offset errors into one about just `BadPartRange`?\r\n\r\nSeems fine to push as a commit here. It can stay separate, or be squashed, up to you.",
      "created_at": "2025-11-28T09:40:28Z",
      "updated_at": "2025-11-28T09:40:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2571010317",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2571010317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2571056932",
      "pull_request_review_id": 3518219173,
      "id": 2571056932,
      "node_id": "PRRC_kwDOABII586ZPzck",
      "diff_hunk": "@@ -133,11 +132,70 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip.GetBlockPos()));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 89,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n    const auto read_tip_part{[&](auto part_offset, auto part_size){return blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), part_offset, part_size);}};\n    BOOST_CHECK(read_tip_part(0, std::nullopt));\n```\n\nstyle nit: Could reduce the verbosity  in this line (and below) with a lambda.",
      "created_at": "2025-11-28T09:55:41Z",
      "updated_at": "2025-11-28T09:55:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2571056932",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2571056932"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2572914108",
      "pull_request_review_id": 3520610086,
      "id": 2572914108,
      "node_id": "PRRC_kwDOABII586ZW428",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564184625,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks! Fixed in [`f50c0d9a3e..f33eafff0f`](https://github.com/bitcoin/bitcoin/compare/f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2..f33eafff0f3c2698ee69ccef800bbc70a4eeae86).",
      "created_at": "2025-11-29T09:20:30Z",
      "updated_at": "2025-11-29T10:14:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2572914108",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2572914108"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2572914368",
      "pull_request_review_id": 3520610221,
      "id": 2572914368,
      "node_id": "PRRC_kwDOABII586ZW47A",
      "diff_hunk": "@@ -133,11 +132,70 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip.GetBlockPos()));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    BOOST_CHECK(blockman.ReadRawBlockPart(block_part, tip.GetBlockPos(), 0, std::nullopt));",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 89,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "in_reply_to_id": 2571056932,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks - fixed in [`f50c0d9a3e..f33eafff0f`](https://github.com/bitcoin/bitcoin/compare/f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2..f33eafff0f3c2698ee69ccef800bbc70a4eeae86).",
      "created_at": "2025-11-29T09:20:59Z",
      "updated_at": "2025-11-29T10:14:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2572914368",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2572914368"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 152,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2572915212",
      "pull_request_review_id": 3520610908,
      "id": 2572915212,
      "node_id": "PRRC_kwDOABII586ZW5IM",
      "diff_hunk": "@@ -464,12 +469,37 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/std::nullopt, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    std::optional<size_t> part_offset{};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            part_offset = ToIntegral<size_t>(*part_offset_str);\n+            if (!part_offset.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 69,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "301116e85540e49c27473f450fc210b702db4cf5",
      "in_reply_to_id": 2477934300,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done in [f50c0d9a3e..f33eafff0f](https://github.com/bitcoin/bitcoin/compare/f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2..f33eafff0f3c2698ee69ccef800bbc70a4eeae86) (by allowing the caller to pass raw string `query_params`).",
      "created_at": "2025-11-29T09:23:30Z",
      "updated_at": "2025-11-29T09:23:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2572915212",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2572915212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 489,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581862320",
      "pull_request_review_id": 3530944965,
      "id": 2581862320,
      "node_id": "PRRC_kwDOABII586Z5Bew",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564184625,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit on my own suggestion if you re-touch :grimacing: - consistent ordering of offset/size:\r\n```diff\r\n-            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part size/offset %d/%d for %s\", part_size.value_or(0), part_offset, hashStr));\r\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\r\n```",
      "created_at": "2025-12-02T16:06:48Z",
      "updated_at": "2025-12-02T16:23:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2581862320",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2581862320"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582130115",
      "pull_request_review_id": 3531289148,
      "id": 2582130115,
      "node_id": "PRRC_kwDOABII586Z6C3D",
      "diff_hunk": "@@ -1081,8 +1082,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            LogError(\"Read from block file failed: invalid offset: %u\", part_offset);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "f50c0d9a3ec3b830de79d64082e9f0ab4a9fc4d2",
      "original_commit_id": "ff5c3feceaba496ff25efd8420cfcc32e0864bcc",
      "in_reply_to_id": 2564184625,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Sounds good - reordered in https://github.com/bitcoin/bitcoin/compare/f33eafff0f3c2698ee69ccef800bbc70a4eeae86..6826375e85a690d583cdeae3ff68d8703b1802ca.",
      "created_at": "2025-12-02T17:13:13Z",
      "updated_at": "2025-12-02T17:13:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582130115",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582130115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582578921",
      "pull_request_review_id": 3531852343,
      "id": 2582578921,
      "node_id": "PRRC_kwDOABII586Z7wbp",
      "diff_hunk": "@@ -427,8 +435,14 @@ static bool rest_block(const std::any& context,\n     }\n \n     std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    if (auto err = chainman.m_blockman.ReadRawBlockPart(block_data, pos, part_offset, part_size)) {\n+        switch (*err) {\n+        case node::ReadRawError::IO:\n+            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+\n+        case node::ReadRawError::BadPartRange:\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: It would be good to assert that we don't fall through here, as per the [developer-notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#c-data-structures), by adding an `assert(false)` here.",
      "created_at": "2025-12-02T19:46:00Z",
      "updated_at": "2025-12-02T20:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582578921",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582578921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582597724",
      "pull_request_review_id": 3531852343,
      "id": 2582597724,
      "node_id": "PRRC_kwDOABII586Z71Bc",
      "diff_hunk": "@@ -1068,23 +1074,39 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            // Avoid logging - part_offset can come from an untrusted source (REST)\n+            return ReadRawError::BadPartRange;\n+        }\n+\n+        size_t size = blk_size - part_offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {\n+                // Avoid logging - part_offset & part_size are can come from an untrusted source (REST)",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: I think the extra `are` is a typo.",
      "created_at": "2025-12-02T19:53:49Z",
      "updated_at": "2025-12-02T20:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582597724",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582597724"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1094,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582602195",
      "pull_request_review_id": 3531880902,
      "id": 2582602195,
      "node_id": "PRRC_kwDOABII586Z72HT",
      "diff_hunk": "@@ -1045,18 +1045,24 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto err = ReadRawBlockPart(block, pos, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return !err.has_value();\n+}\n+\n+std::optional<ReadRawError> BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return ReadRawError::IO;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 17,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "there's a **lot** happening in a single commit - please consider splitting the low risk changes such as this line from introducing a new feature or a doc change. It would help guide the reviewers if it were split into trivial-to-review chunks where the commit message explains the thinking.",
      "created_at": "2025-12-02T19:55:25Z",
      "updated_at": "2025-12-02T19:55:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582602195",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582602195"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1065,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582661911",
      "pull_request_review_id": 3531852343,
      "id": 2582661911,
      "node_id": "PRRC_kwDOABII586Z8EsX",
      "diff_hunk": "@@ -414,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::optional<ReadRawError> ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: I don't like that we are returning a nullopt for a success code here. If we'd finally have #25665 we could have a proper result type here. Leaving as a nit, because I don't have a good alternative either.",
      "created_at": "2025-12-02T20:18:19Z",
      "updated_at": "2025-12-02T20:39:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582661911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582661911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582956040",
      "pull_request_review_id": 3532323856,
      "id": 2582956040,
      "node_id": "PRRC_kwDOABII586Z9MgI",
      "diff_hunk": "@@ -414,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::optional<ReadRawError> ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582661911,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> If we'd finally have https://github.com/bitcoin/bitcoin/pull/25665 we could have a proper result type here.\r\n\r\nAgree - but maybe meanwhile we can use the following?\r\nhttps://github.com/bitcoin/bitcoin/compare/6826375e85a690d583cdeae3ff68d8703b1802ca..f07c765aa6bdba2511ceec56aa7f9755fa29a81e\r\n(changed the return type back to be boolean + added an output parameter for the error enum)",
      "created_at": "2025-12-02T22:19:49Z",
      "updated_at": "2025-12-02T22:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582956040",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582956040"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582956676",
      "pull_request_review_id": 3532324453,
      "id": 2582956676,
      "node_id": "PRRC_kwDOABII586Z9MqE",
      "diff_hunk": "@@ -1068,23 +1074,39 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            // Avoid logging - part_offset can come from an untrusted source (REST)\n+            return ReadRawError::BadPartRange;\n+        }\n+\n+        size_t size = blk_size - part_offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {\n+                // Avoid logging - part_offset & part_size are can come from an untrusted source (REST)",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 52,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582597724,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks! Removed in https://github.com/bitcoin/bitcoin/compare/6826375e85a690d583cdeae3ff68d8703b1802ca..f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "created_at": "2025-12-02T22:20:07Z",
      "updated_at": "2025-12-02T22:20:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582956676",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582956676"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1094,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582956967",
      "pull_request_review_id": 3532324766,
      "id": 2582956967,
      "node_id": "PRRC_kwDOABII586Z9Mun",
      "diff_hunk": "@@ -427,8 +435,14 @@ static bool rest_block(const std::any& context,\n     }\n \n     std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    if (auto err = chainman.m_blockman.ReadRawBlockPart(block_data, pos, part_offset, part_size)) {\n+        switch (*err) {\n+        case node::ReadRawError::IO:\n+            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+\n+        case node::ReadRawError::BadPartRange:\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582578921,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks! Added in https://github.com/bitcoin/bitcoin/compare/6826375e85a690d583cdeae3ff68d8703b1802ca..f07c765aa6bdba2511ceec56aa7f9755fa29a81e.",
      "created_at": "2025-12-02T22:20:15Z",
      "updated_at": "2025-12-02T22:20:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582956967",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582956967"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582961930",
      "pull_request_review_id": 3532330326,
      "id": 2582961930,
      "node_id": "PRRC_kwDOABII586Z9N8K",
      "diff_hunk": "@@ -1045,18 +1045,24 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto err = ReadRawBlockPart(block, pos, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return !err.has_value();\n+}\n+\n+std::optional<ReadRawError> BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return ReadRawError::IO;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 17,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582602195,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If f07c765aa6bdba2511ceec56aa7f9755fa29a81e is OK, I will split it into the following commits:\r\n1. adding support for returning error details via a new `ReadRawBlock()` overload.\r\n2. adding support for range reads to the previously added `ReadRawBlock()` overload.\r\n3. adding new REST endpoint using the previously added `ReadRawBlock()` overload.\r\n\r\nWDYT?",
      "created_at": "2025-12-02T22:22:47Z",
      "updated_at": "2025-12-02T22:22:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582961930",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2582961930"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1065,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584393520",
      "pull_request_review_id": 3534148441,
      "id": 2584393520,
      "node_id": "PRRC_kwDOABII586aCrcw",
      "diff_hunk": "@@ -414,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::optional<ReadRawError> ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582661911,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: I prefer using `std::variant` instead of out-parameters. See ab11b4bd7a5844d6ce654b39fca034d73defe973 / https://github.com/bitcoin/bitcoin/compare/master...hodlinator:bitcoin:pr/33657_suggestions2",
      "created_at": "2025-12-03T09:51:37Z",
      "updated_at": "2025-12-03T09:55:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2584393520",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584393520"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584396172",
      "pull_request_review_id": 3534148441,
      "id": 2584396172,
      "node_id": "PRRC_kwDOABII586aCsGM",
      "diff_hunk": "@@ -1072,19 +1076,40 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n+            error = ReadRawError::IO;\n             return false;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n+            error = ReadRawError::IO;\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            // Avoid logging - part_offset can come from an untrusted source (REST)\n+            error = ReadRawError::BadPartRange;\n+            return false;\n+        }\n+\n+        size_t size = blk_size - part_offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {\n+                // Avoid logging - part_offset & part_size can come from an untrusted source (REST)\n+                error = ReadRawError::BadPartRange;\n+                return false;\n+            }\n+            size = *part_size;\n+        }\n+\n+",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 200,
      "commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "original_commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "meganit: double newline",
      "created_at": "2025-12-03T09:52:16Z",
      "updated_at": "2025-12-03T09:55:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2584396172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584396172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 1105,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584406304",
      "pull_request_review_id": 3534148441,
      "id": 2584406304,
      "node_id": "PRRC_kwDOABII586aCukg",
      "diff_hunk": "@@ -1045,18 +1045,24 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto err = ReadRawBlockPart(block, pos, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return !err.has_value();\n+}\n+\n+std::optional<ReadRawError> BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return ReadRawError::IO;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 17,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582602195,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm fine with both 1 commit or breaking apart as suggested.",
      "created_at": "2025-12-03T09:55:03Z",
      "updated_at": "2025-12-03T09:55:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2584406304",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2584406304"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1065,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586259538",
      "pull_request_review_id": 3536459598,
      "id": 2586259538,
      "node_id": "PRRC_kwDOABII586aJzBS",
      "diff_hunk": "@@ -414,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::optional<ReadRawError> ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582661911,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Looks good, thanks!\r\nhttps://github.com/bitcoin/bitcoin/compare/f07c765aa6bdba2511ceec56aa7f9755fa29a81e..d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7",
      "created_at": "2025-12-03T18:54:11Z",
      "updated_at": "2025-12-03T18:54:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2586259538",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586259538"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586262733",
      "pull_request_review_id": 3536463469,
      "id": 2586262733,
      "node_id": "PRRC_kwDOABII586aJzzN",
      "diff_hunk": "@@ -1072,19 +1076,40 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n+            error = ReadRawError::IO;\n             return false;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n+            error = ReadRawError::IO;\n             return false;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        if (part_offset > blk_size) {\n+            // Avoid logging - part_offset can come from an untrusted source (REST)\n+            error = ReadRawError::BadPartRange;\n+            return false;\n+        }\n+\n+        size_t size = blk_size - part_offset;\n+        if (part_size.has_value()) {\n+            if (*part_size > size || *part_size == 0) {\n+                // Avoid logging - part_offset & part_size can come from an untrusted source (REST)\n+                error = ReadRawError::BadPartRange;\n+                return false;\n+            }\n+            size = *part_size;\n+        }\n+\n+",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 200,
      "commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "original_commit_id": "f07c765aa6bdba2511ceec56aa7f9755fa29a81e",
      "in_reply_to_id": 2584396172,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks!\r\nhttps://github.com/bitcoin/bitcoin/compare/f07c765aa6bdba2511ceec56aa7f9755fa29a81e..d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7",
      "created_at": "2025-12-03T18:55:29Z",
      "updated_at": "2025-12-03T18:55:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2586262733",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586262733"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 1105,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586531856",
      "pull_request_review_id": 3536827831,
      "id": 2586531856,
      "node_id": "PRRC_kwDOABII586aK1gQ",
      "diff_hunk": "@@ -1045,18 +1045,24 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto err = ReadRawBlockPart(block, pos, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return !err.has_value();\n+}\n+\n+std::optional<ReadRawError> BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return ReadRawError::IO;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 17,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582602195,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Split d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7 into 3 commits: \r\n```\r\n$ git lg -3\r\n* e6eb4a57df Roman Zeyde:  rest: allow reading partial block data from storage\r\n* 8f0bfb9343 Roman Zeyde:  blockstorage: allow reading partial block data from storage\r\n* 07b8278299 Roman Zeyde:  blockstorage: overload `ReadRawBlock()` to return an error code\r\n\r\n```\r\nhttps://github.com/bitcoin/bitcoin/compare/d2f4bccbf70031b84b6af1a6c8480c4b3071bfd7..e6eb4a57df9f0379550358e4362729bfe5953007",
      "created_at": "2025-12-03T20:34:25Z",
      "updated_at": "2025-12-03T20:36:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2586531856",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586531856"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1065,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586568153",
      "pull_request_review_id": 3536872444,
      "id": 2586568153,
      "node_id": "PRRC_kwDOABII586aK-XZ",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here\n+        filein.read(data);\n+        return data;\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\n-        return false;\n+        return ReadRawError::IO;\n     }\n-\n-    return true;\n+    assert(false);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 67,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "what role does this serve, don't all paths already return? Seems like dead code to me.",
      "created_at": "2025-12-03T20:48:58Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2586568153",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586568153"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1099,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586569022",
      "pull_request_review_id": 3536872444,
      "id": 2586569022,
      "node_id": "PRRC_kwDOABII586aK-k-",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 57,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\n        std::vector<std::byte> data(blk_size); // Zeroing of memory is intentional here\r\n```",
      "created_at": "2025-12-03T20:49:21Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2586569022",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2586569022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 1091,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1092,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588463650",
      "pull_request_review_id": 3536872444,
      "id": 2588463650,
      "node_id": "PRRC_kwDOABII586aSNIi",
      "diff_hunk": "@@ -1049,18 +1046,28 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto ret{ReadRawBlock(pos, /*part_offset=*/0, /*part_size=*/std::nullopt)};\n+    if (auto* vec{std::get_if<std::vector<std::byte>>(&ret)}) {\n+        block = std::move(*vec);\n+        return true;\n+    }\n+    return false;\n+}",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "While `std::variant` is a lot better that output parameters (as long as it doesn't incur a slowdown, since this is on the critical path for IBD), it *is* a bit awkwards for this situation.\n\nC++23 provides a better alternative (https://en.cppreference.com/w/cpp/utility/expected.html), but that's not available for us yet. \nBut we have our own alternative:\nhttps://github.com/bitcoin/bitcoin/blob/9a29b2d331eed5b4cbd6922f63e397b68ff12447/src/util/result.h#L19-L90\n\nWhich would make usage so simple that we wouldn't even need two `ReadRawBlock` anymore.\n\n",
      "created_at": "2025-12-04T10:32:52Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588463650",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588463650"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 1048,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1056,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588478938",
      "pull_request_review_id": 3536872444,
      "id": 2588478938,
      "node_id": "PRRC_kwDOABII586aSQ3a",
      "diff_hunk": "@@ -1072,23 +1079,39 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n+        }\n+\n+        if (part_offset > blk_size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 195,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What would be the point of an offset equaling the total size? if we don't want to get the value of the last valid offset, at least prohibit 0 sizes:\n```suggestion\n        if (part_offset >= blk_size) {\n```\n\nWhich should split out the `*part_size == 0` case below as well.\n\nIf we added the, a single optional it would also improve readability by separating the partial case neatly, it doesn't pollute the whole method. \nWe could even `filein.seek` only when the param is specified.",
      "created_at": "2025-12-04T10:36:50Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588478938",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588478938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1091,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588506623",
      "pull_request_review_id": 3536872444,
      "id": 2588506623,
      "node_id": "PRRC_kwDOABII586aSXn_",
      "diff_hunk": "@@ -1049,18 +1046,28 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto ret{ReadRawBlock(pos, /*part_offset=*/0, /*part_size=*/std::nullopt)};\n+    if (auto* vec{std::get_if<std::vector<std::byte>>(&ret)}) {\n+        block = std::move(*vec);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+std::variant<std::vector<std::byte>, ReadRawError> BlockManager::ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 162,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "what's the point of an optional `part_size` but a mandatory `part_offset`?\nWe've introduced two related args here that should likely be groupes, either as\n```C++\nstd::optional<std::pair<size_t, size_t>> block_part\n```\nor\n```C++\nstruct BlockPart {\n    size_t offset;\n    size_t size;\n}\n```",
      "created_at": "2025-12-04T10:44:03Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588506623",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588506623"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1058,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588518399",
      "pull_request_review_id": 3536872444,
      "id": 2588518399,
      "node_id": "PRRC_kwDOABII586aSaf_",
      "diff_hunk": "@@ -133,11 +132,78 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+    const FlatFilePos tip_block_pos = tip.GetBlockPos();",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 83,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: could we use brace init consistently in the change (it helps with a few cases, e.g. warns on narrowing conversions)",
      "created_at": "2025-12-04T10:47:07Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588518399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588518399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 143,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588520278",
      "pull_request_review_id": 3536872444,
      "id": 2588520278,
      "node_id": "PRRC_kwDOABII586aSa9W",
      "diff_hunk": "@@ -133,11 +132,78 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+    const FlatFilePos tip_block_pos = tip.GetBlockPos();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip_block_pos));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    const auto read_tip_part{[&](auto part_offset, auto part_size) {\n+        block_part.clear();\n+        auto block_result{blockman.ReadRawBlock(tip_block_pos, part_offset, part_size)};\n+        if (auto* vec{std::get_if<std::vector<std::byte>>(&block_result)}) {\n+            block_part = std::move(*vec);\n+            return true;\n+        }\n+        return false;\n+    }};\n+\n+    BOOST_CHECK(read_tip_part(0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 101,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "there's a lot of repetition here, can we separate the data from the algorithm?\n\nAnd could you please add a fuzz test which exercises the same - if the randomly generated range returns valid bytes for the complete block, the new rpc should also return the same values. If it errs, so should the new RPC.",
      "created_at": "2025-12-04T10:47:36Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588520278",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588520278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 163,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 164,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588655840",
      "pull_request_review_id": 3536872444,
      "id": 2588655840,
      "node_id": "PRRC_kwDOABII586aS8Dg",
      "diff_hunk": "@@ -456,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::variant<std::vector<std::byte>, ReadRawError> ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 121,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't like that we have 2 separate methods doing the same thing. if we grouped the new parameters (with default `nullopt`) and used a dedicated return value of\n```C++\nusing ReadRawBlockResult = util::Result<std::vector<std::byte>, ReadRawError>;\n```\n(needs a slight adjustment to `util::Result`)\n\nwe could have a single:\n```C++\nReadRawBlockResult ReadRawBlock(const FlatFilePos& pos, std::optional<std::pair<size_t, size_t>> block_part = std::nullopt) const;\n```\n\nWe would need to adjust a few usages, please see my suggested implementation of that.",
      "created_at": "2025-12-04T11:23:08Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588655840",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588655840"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 420,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588735671",
      "pull_request_review_id": 3536872444,
      "id": 2588735671,
      "node_id": "PRRC_kwDOABII586aTPi3",
      "diff_hunk": "@@ -1072,23 +1079,39 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n+        }\n+\n+        if (part_offset > blk_size) {\n+            // Avoid logging - part_offset can come from an untrusted source (REST)\n+            return ReadRawError::BadPartRange;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t size = blk_size - part_offset;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 202,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "can we add a test with `std::numeric_limits<size_t>::max()` for both offset and size to make sure we don't have overflow problems?",
      "created_at": "2025-12-04T11:46:33Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588735671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588735671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1096,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588794523",
      "pull_request_review_id": 3536872444,
      "id": 2588794523,
      "node_id": "PRRC_kwDOABII586aTd6b",
      "diff_hunk": "@@ -454,12 +484,39 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    size_t part_offset{0};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            auto opt = ToIntegral<size_t>(*part_offset_str);\n+            if (opt.has_value()) {\n+                part_offset = opt.value();\n+            } else {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The idiomatic way to use the `std::optional` is to guard in the if condition for its existence.\n`.value()` only really makes sense over `*` when we need it to throw - which it can't if we're already guarding.\nAlso, the first condition has an if-exists-assign-else-return format, while the second checks for non-existence and assigns to external.\nWe could also just return from the `try` for the happy case, narrowing the scopes of the related variables.\n\nAnd what is the expected behavior when `part_size_str` is `nullopt`, I don't think we should try to dereference it in case of an error.\nWe could likely simplify this by only assigning the pair optional when both are present and use `value_or(\"\")` for simpler validation:\n```suggestion\nstatic bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n{\n    try {\n        std::optional<std::pair<size_t, size_t>> block_part{};\n        if (const auto opt_offset{ToIntegral<size_t>(req->GetQueryParameter(\"offset\").value_or(\"\"))}) {\n            if (const auto opt_size{ToIntegral<size_t>(req->GetQueryParameter(\"size\").value_or(\"\"))}) {\n                block_part = {*opt_offset, *opt_size};\n            } else {\n                return RESTERR(req, HTTP_BAD_REQUEST, \"Block part size missing or invalid\");\n            }\n        } else {\n            return RESTERR(req, HTTP_BAD_REQUEST, \"Block part offset missing or invalid\");\n        }\n        return rest_block(context, req, uri_part, /*tx_verbosity=*/std::nullopt, block_part);\n    } catch (const std::runtime_error& e) {\n        return RESTERR(req, HTTP_BAD_REQUEST, e.what());\n    }\n}\n```",
      "created_at": "2025-12-04T12:02:42Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2588794523",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2588794523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 497,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589061422",
      "pull_request_review_id": 3536872444,
      "id": 2589061422,
      "node_id": "PRRC_kwDOABII586aUfEu",
      "diff_hunk": "@@ -1045,18 +1045,24 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto err = ReadRawBlockPart(block, pos, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+    return !err.has_value();\n+}\n+\n+std::optional<ReadRawError> BlockManager::ReadRawBlockPart(std::vector<std::byte>& data, const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return ReadRawError::IO;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 17,
      "commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582602195,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks!",
      "created_at": "2025-12-04T13:21:21Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2589061422",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589061422"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1065,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589106176",
      "pull_request_review_id": 3536872444,
      "id": 2589106176,
      "node_id": "PRRC_kwDOABII586aUqAA",
      "diff_hunk": "@@ -133,11 +132,78 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+    const FlatFilePos tip_block_pos = tip.GetBlockPos();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip_block_pos));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    const auto read_tip_part{[&](auto part_offset, auto part_size) {\n+        block_part.clear();\n+        auto block_result{blockman.ReadRawBlock(tip_block_pos, part_offset, part_size)};\n+        if (auto* vec{std::get_if<std::vector<std::byte>>(&block_result)}) {\n+            block_part = std::move(*vec);\n+            return true;\n+        }\n+        return false;\n+    }};\n+\n+    BOOST_CHECK(read_tip_part(0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    BOOST_CHECK(read_tip_part(1, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    BOOST_CHECK(read_tip_part(10, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.end());\n+\n+    BOOST_CHECK(read_tip_part(0, block.size()));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());\n+\n+    BOOST_CHECK(read_tip_part(0, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 1);\n+\n+    BOOST_CHECK(read_tip_part(0, block.size() - 10));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end() - 10);\n+\n+    BOOST_CHECK(read_tip_part(0, 20));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.begin() + 20);\n+\n+    BOOST_CHECK(read_tip_part(1, block.size() - 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 1, block.end());\n+\n+    BOOST_CHECK(read_tip_part(10, 20));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin() + 10, block.begin() + 30);\n+\n+    BOOST_CHECK(read_tip_part(block.size() - 1, 1));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.end() - 1, block.end());\n+\n+    // check errors",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 130,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "these should be in a separate test for clarity - similarly deduplicating the data from the algo",
      "created_at": "2025-12-04T13:33:08Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2589106176",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589106176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 193,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589112232",
      "pull_request_review_id": 3536872444,
      "id": 2589112232,
      "node_id": "PRRC_kwDOABII586aUreo",
      "diff_hunk": "@@ -436,10 +463,13 @@ static bool rest_block(const std::any& context,\n     }\n \n     case RESTResponseFormat::JSON: {\n+        if (!tx_verbosity.has_value()) {",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 92,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "we should invert this to be able to use the optional in the idiomatic way of `if (opt) ... *opt`",
      "created_at": "2025-12-04T13:34:46Z",
      "updated_at": "2025-12-09T10:47:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2589112232",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589112232"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 466,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589115455",
      "pull_request_review_id": 3536872444,
      "id": 2589115455,
      "node_id": "PRRC_kwDOABII586aUsQ_",
      "diff_hunk": "@@ -454,12 +484,39 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 108,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "we could avoid the default `block_part` value here",
      "created_at": "2025-12-04T13:35:38Z",
      "updated_at": "2025-12-04T14:20:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2589115455",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589115455"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 487,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589164374",
      "pull_request_review_id": 3536872444,
      "id": 2589164374,
      "node_id": "PRRC_kwDOABII586aU4NW",
      "diff_hunk": "@@ -455,6 +457,43 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def _get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)\n+                assert isinstance(resp, bytes)\n+                if req_type is ReqType.HEX and status == 200:\n+                    resp = bytes.fromhex(resp.decode().strip())\n+                return resp\n+\n+            assert_equal(block_bin, _get_block_part())\n+            assert_equal(block_bin, _get_block_part(query_params={\"offset\": 0}))\n+            assert_equal(block_bin, _get_block_part(query_params={\"size\": len(block_bin)}))",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 46,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't like these partial matches, is there any disadvantage in mandating both parameters?",
      "created_at": "2025-12-04T13:49:10Z",
      "updated_at": "2025-12-04T14:18:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2589164374",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2589164374"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 473,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 475,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592108737",
      "pull_request_review_id": 3543967284,
      "id": 2592108737,
      "node_id": "PRRC_kwDOABII586agHDB",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here\n+        filein.read(data);\n+        return data;\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\n-        return false;\n+        return ReadRawError::IO;\n     }\n-\n-    return true;\n+    assert(false);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 67,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": 2586568153,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It was part of my suggestion (https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2584393520), inspired by https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2582578921. A somewhat common alternative to C++23's `std::unreachable()`.",
      "created_at": "2025-12-05T10:04:53Z",
      "updated_at": "2025-12-05T10:32:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592108737",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592108737"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1099,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592121707",
      "pull_request_review_id": 3543967284,
      "id": 2592121707,
      "node_id": "PRRC_kwDOABII586agKNr",
      "diff_hunk": "@@ -133,11 +132,78 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+    const FlatFilePos tip_block_pos = tip.GetBlockPos();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip_block_pos));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    const auto read_tip_part{[&](auto part_offset, auto part_size) {\n+        block_part.clear();\n+        auto block_result{blockman.ReadRawBlock(tip_block_pos, part_offset, part_size)};\n+        if (auto* vec{std::get_if<std::vector<std::byte>>(&block_result)}) {\n+            block_part = std::move(*vec);\n+            return true;\n+        }\n+        return false;\n+    }};\n+\n+    BOOST_CHECK(read_tip_part(0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 101,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588520278,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Unit test seems sufficient to me.",
      "created_at": "2025-12-05T10:09:17Z",
      "updated_at": "2025-12-05T10:32:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592121707",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592121707"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 163,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 164,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592146736",
      "pull_request_review_id": 3543967284,
      "id": 2592146736,
      "node_id": "PRRC_kwDOABII586agQUw",
      "diff_hunk": "@@ -456,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::variant<std::vector<std::byte>, ReadRawError> ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 121,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588655840,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Agree it probably makes sense to have an `optional` for the range. It's interesting to explore what could be done with `util::Result`, but I feel that could be done as a follow-up to this PR.\r\n\r\nAgree that the ergonomics of `std::expected` are better than `std::variant`, but not that they are terrible. If you are strongly against `std::variant` then maybe we could step back to using out-parameters for now in this PR.",
      "created_at": "2025-12-05T10:17:42Z",
      "updated_at": "2025-12-05T10:32:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592146736",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592146736"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 420,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592204362",
      "pull_request_review_id": 3544121876,
      "id": 2592204362,
      "node_id": "PRRC_kwDOABII586ageZK",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here\n+        filein.read(data);\n+        return data;\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\n-        return false;\n+        return ReadRawError::IO;\n     }\n-\n-    return true;\n+    assert(false);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 67,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": 2586568153,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See the dev notes: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#c-data-structures",
      "created_at": "2025-12-05T10:36:27Z",
      "updated_at": "2025-12-05T10:36:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592204362",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592204362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1099,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592495614",
      "pull_request_review_id": 3544513831,
      "id": 2592495614,
      "node_id": "PRRC_kwDOABII586ahlf-",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here\n+        filein.read(data);\n+        return data;\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\n-        return false;\n+        return ReadRawError::IO;\n     }\n-\n-    return true;\n+    assert(false);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 67,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": 2586568153,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This is unreachable code, all code paths before return, both in the try and in the catch. The compiler would already warn if any of the code paths wouldn't return. We don't add \"assert(false)\" after a throw or return, since those are all terminating execution.\r\nThis isn't the same as non-exhaustive switches (which can change and leave cases uncovered, though a linter could be configured to warn instead), but this is just confusing dead code.",
      "created_at": "2025-12-05T12:18:41Z",
      "updated_at": "2025-12-05T12:24:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592495614",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592495614"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1099,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592500035",
      "pull_request_review_id": 3544513831,
      "id": 2592500035,
      "node_id": "PRRC_kwDOABII586ahmlD",
      "diff_hunk": "@@ -133,11 +132,78 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+    const FlatFilePos tip_block_pos = tip.GetBlockPos();\n+\n+    std::vector<std::byte> block{};\n+    BOOST_CHECK(blockman.ReadRawBlock(block, tip_block_pos));\n+    BOOST_CHECK_GE(block.size(), 200);\n+\n+    std::vector<std::byte> block_part{};\n+    const auto read_tip_part{[&](auto part_offset, auto part_size) {\n+        block_part.clear();\n+        auto block_result{blockman.ReadRawBlock(tip_block_pos, part_offset, part_size)};\n+        if (auto* vec{std::get_if<std::vector<std::byte>>(&block_result)}) {\n+            block_part = std::move(*vec);\n+            return true;\n+        }\n+        return false;\n+    }};\n+\n+    BOOST_CHECK(read_tip_part(0, std::nullopt));\n+    BOOST_CHECK_EQUAL_COLLECTIONS(block_part.begin(), block_part.end(), block.begin(), block.end());",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 101,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588520278,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If so, I'd randomize the unit tests to avoid our bias (such as not having max values)",
      "created_at": "2025-12-05T12:20:16Z",
      "updated_at": "2025-12-05T12:23:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592500035",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592500035"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 163,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 164,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592501977",
      "pull_request_review_id": 3544513831,
      "id": 2592501977,
      "node_id": "PRRC_kwDOABII586ahnDZ",
      "diff_hunk": "@@ -456,6 +418,7 @@ class BlockManager\n     bool ReadBlock(CBlock& block, const FlatFilePos& pos, const std::optional<uint256>& expected_hash) const;\n     bool ReadBlock(CBlock& block, const CBlockIndex& index) const;\n     bool ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const;\n+    std::variant<std::vector<std::byte>, ReadRawError> ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const;",
      "path": "src/node/blockstorage.h",
      "position": 1,
      "original_position": 121,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588655840,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I'm mostly against introducing an extra method that basically does the same thing",
      "created_at": "2025-12-05T12:20:52Z",
      "updated_at": "2025-12-05T12:23:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2592501977",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2592501977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 420,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595369704",
      "pull_request_review_id": 3548182334,
      "id": 2595369704,
      "node_id": "PRRC_kwDOABII586asjLo",
      "diff_hunk": "@@ -454,12 +484,39 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    size_t part_offset{0};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            auto opt = ToIntegral<size_t>(*part_offset_str);\n+            if (opt.has_value()) {\n+                part_offset = opt.value();\n+            } else {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588794523,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We can make this a little easier to parse with less nesting if we did:\r\n```C++\r\n        std::pair<size_t, size_t> block_part;\r\n        if (const auto opt_offset{ToIntegral<size_t>(req->GetQueryParameter(\"offset\").value_or(\"\"))}) {\r\n            block_part.first = *opt_offset;\r\n        } else {\r\n            return RESTERR(req, HTTP_BAD_REQUEST, \"Block part offset missing or invalid\");\r\n        }\r\n        if (const auto opt_size{ToIntegral<size_t>(req->GetQueryParameter(\"size\").value_or(\"\"))}) {\r\n            block_part.second = *opt_size;\r\n        } else {\r\n            return RESTERR(req, HTTP_BAD_REQUEST, \"Block part size missing or invalid\");\r\n        }\r\n        return rest_block(context, req, uri_part, /*tx_verbosity=*/std::nullopt, block_part);\r\n```",
      "created_at": "2025-12-06T19:37:10Z",
      "updated_at": "2025-12-06T19:37:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2595369704",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595369704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 497,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595371025",
      "pull_request_review_id": 3548184494,
      "id": 2595371025,
      "node_id": "PRRC_kwDOABII586asjgR",
      "diff_hunk": "@@ -2276,8 +2276,9 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     } else if (inv.IsMsgWitnessBlk()) {\n         // Fast-path: in this case it is possible to serve the block directly from disk,\n         // as the network format matches the format on disk\n-        std::vector<std::byte> block_data;\n-        if (!m_chainman.m_blockman.ReadRawBlock(block_data, block_pos)) {\n+        if (auto block_data{m_chainman.m_blockman.ReadRawBlock(block_pos)}) {",
      "path": "src/net_processing.cpp",
      "position": 1,
      "original_position": 59,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit\r\n```suggestion\r\n        if (const auto block_data{m_chainman.m_blockman.ReadRawBlock(block_pos)}) {\r\n```",
      "created_at": "2025-12-06T19:38:19Z",
      "updated_at": "2025-12-06T19:39:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2595371025",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595371025"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2279,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595371448",
      "pull_request_review_id": 3548184494,
      "id": 2595371448,
      "node_id": "PRRC_kwDOABII586asjm4",
      "diff_hunk": "@@ -1006,14 +1006,14 @@ bool BlockManager::ReadBlock(CBlock& block, const FlatFilePos& pos, const std::o\n     block.SetNull();\n \n     // Open history file to read\n-    std::vector<std::byte> block_data;\n-    if (!ReadRawBlock(block_data, pos)) {\n+    auto block_data{ReadRawBlock(pos)};",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit\r\n```suggestion\r\n    const auto block_data{ReadRawBlock(pos)};\r\n```",
      "created_at": "2025-12-06T19:38:35Z",
      "updated_at": "2025-12-06T19:39:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2595371448",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595371448"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1009,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595372132",
      "pull_request_review_id": 3548184494,
      "id": 2595372132,
      "node_id": "PRRC_kwDOABII586asjxk",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit\r\n```suggestion\r\n    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\r\n```",
      "created_at": "2025-12-06T19:39:09Z",
      "updated_at": "2025-12-06T19:39:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2595372132",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595372132"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 426,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595372728",
      "pull_request_review_id": 3548184494,
      "id": 2595372728,
      "node_id": "PRRC_kwDOABII586asj64",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit\r\n```suggestion\r\n    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;\r\n```",
      "created_at": "2025-12-06T19:39:39Z",
      "updated_at": "2025-12-06T19:39:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2595372728",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595372728"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595516221",
      "pull_request_review_id": 3548358507,
      "id": 2595516221,
      "node_id": "PRRC_kwDOABII586atG89",
      "diff_hunk": "@@ -454,12 +484,39 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    size_t part_offset{0};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            auto opt = ToIntegral<size_t>(*part_offset_str);\n+            if (opt.has_value()) {\n+                part_offset = opt.value();\n+            } else {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588794523,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In this case I think the nesting's fine, it signals clearly that `opt_size` should only be checked if `opt_offset` was already successful - in the suggested version we have to check the return values.\r\nBoth are fine, I'm just explaining why we may not want to avoid the nesting here.",
      "created_at": "2025-12-06T21:27:39Z",
      "updated_at": "2025-12-06T21:27:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2595516221",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2595516221"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 497,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211587",
      "pull_request_review_id": 3549205019,
      "id": 2596211587,
      "node_id": "PRRC_kwDOABII586avwuD",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/compare/bbea9636a3b11df1c79664e97ded7907bbacfcf3..9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "created_at": "2025-12-07T10:17:09Z",
      "updated_at": "2025-12-07T10:17:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596211587",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211587"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211598",
      "pull_request_review_id": 3549205029,
      "id": 2596211598,
      "node_id": "PRRC_kwDOABII586avwuO",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372132,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/compare/bbea9636a3b11df1c79664e97ded7907bbacfcf3..9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "created_at": "2025-12-07T10:17:11Z",
      "updated_at": "2025-12-07T10:17:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596211598",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211598"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 426,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211612",
      "pull_request_review_id": 3549205051,
      "id": 2596211612,
      "node_id": "PRRC_kwDOABII586avwuc",
      "diff_hunk": "@@ -1006,14 +1006,14 @@ bool BlockManager::ReadBlock(CBlock& block, const FlatFilePos& pos, const std::o\n     block.SetNull();\n \n     // Open history file to read\n-    std::vector<std::byte> block_data;\n-    if (!ReadRawBlock(block_data, pos)) {\n+    auto block_data{ReadRawBlock(pos)};",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595371448,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/compare/bbea9636a3b11df1c79664e97ded7907bbacfcf3..9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "created_at": "2025-12-07T10:17:15Z",
      "updated_at": "2025-12-07T10:17:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596211612",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1009,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211643",
      "pull_request_review_id": 3549205075,
      "id": 2596211643,
      "node_id": "PRRC_kwDOABII586avwu7",
      "diff_hunk": "@@ -2276,8 +2276,9 @@ void PeerManagerImpl::ProcessGetBlockData(CNode& pfrom, Peer& peer, const CInv&\n     } else if (inv.IsMsgWitnessBlk()) {\n         // Fast-path: in this case it is possible to serve the block directly from disk,\n         // as the network format matches the format on disk\n-        std::vector<std::byte> block_data;\n-        if (!m_chainman.m_blockman.ReadRawBlock(block_data, block_pos)) {\n+        if (auto block_data{m_chainman.m_blockman.ReadRawBlock(block_pos)}) {",
      "path": "src/net_processing.cpp",
      "position": 1,
      "original_position": 59,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595371025,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/compare/bbea9636a3b11df1c79664e97ded7907bbacfcf3..9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "created_at": "2025-12-07T10:17:19Z",
      "updated_at": "2025-12-07T10:17:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596211643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596211643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2279,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596332437",
      "pull_request_review_id": 3549305011,
      "id": 2596332437,
      "node_id": "PRRC_kwDOABII586awOOV",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here\n+        filein.read(data);\n+        return data;\n     } catch (const std::exception& e) {\n         LogError(\"Read from block file failed: %s for %s while reading raw block\", e.what(), pos.ToString());\n-        return false;\n+        return ReadRawError::IO;\n     }\n-\n-    return true;\n+    assert(false);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 67,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": 2586568153,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 7802c1f9ca09b5669b8400e96baeadc238fa9df2",
      "created_at": "2025-12-07T14:05:05Z",
      "updated_at": "2025-12-07T14:05:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596332437",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596332437"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1099,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596332557",
      "pull_request_review_id": 3549305125,
      "id": 2596332557,
      "node_id": "PRRC_kwDOABII586awOQN",
      "diff_hunk": "@@ -1068,23 +1079,24 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        std::vector<std::byte> data;\n+        data.resize(blk_size); // Zeroing of memory is intentional here",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 57,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "07b82782991bba8e9a798421be742ba5bf729fc4",
      "in_reply_to_id": 2586569022,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 7802c1f9ca09b5669b8400e96baeadc238fa9df2",
      "created_at": "2025-12-07T14:05:18Z",
      "updated_at": "2025-12-07T14:05:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596332557",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596332557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 1091,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1092,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596332829",
      "pull_request_review_id": 3549305355,
      "id": 2596332829,
      "node_id": "PRRC_kwDOABII586awOUd",
      "diff_hunk": "@@ -1049,18 +1046,28 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto ret{ReadRawBlock(pos, /*part_offset=*/0, /*part_size=*/std::nullopt)};\n+    if (auto* vec{std::get_if<std::vector<std::byte>>(&ret)}) {\n+        block = std::move(*vec);\n+        return true;\n+    }\n+    return false;\n+}",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 160,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588463650,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Used `util::Expected` from fa114be27b17ed32c1d9a7106f313a0df8755fa2",
      "created_at": "2025-12-07T14:05:54Z",
      "updated_at": "2025-12-07T14:05:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596332829",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596332829"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 1048,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1056,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596333260",
      "pull_request_review_id": 3549305632,
      "id": 2596333260,
      "node_id": "PRRC_kwDOABII586awObM",
      "diff_hunk": "@@ -1072,23 +1079,39 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n+        }\n+\n+        if (part_offset > blk_size) {",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 195,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588478938,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 71c7b747091fce045dbf25e4e0cfc0e6a4ad6435",
      "created_at": "2025-12-07T14:06:33Z",
      "updated_at": "2025-12-07T14:06:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596333260",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596333260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1091,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596333791",
      "pull_request_review_id": 3549306105,
      "id": 2596333791,
      "node_id": "PRRC_kwDOABII586awOjf",
      "diff_hunk": "@@ -1049,18 +1046,28 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n }\n \n bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+{\n+    auto ret{ReadRawBlock(pos, /*part_offset=*/0, /*part_size=*/std::nullopt)};\n+    if (auto* vec{std::get_if<std::vector<std::byte>>(&ret)}) {\n+        block = std::move(*vec);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+std::variant<std::vector<std::byte>, ReadRawError> BlockManager::ReadRawBlock(const FlatFilePos& pos, size_t part_offset, std::optional<size_t> part_size) const",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 162,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588506623,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 71c7b747091fce045dbf25e4e0cfc0e6a4ad6435",
      "created_at": "2025-12-07T14:07:35Z",
      "updated_at": "2025-12-07T14:07:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596333791",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596333791"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1058,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596334064",
      "pull_request_review_id": 3549306324,
      "id": 2596334064,
      "node_id": "PRRC_kwDOABII586awOnw",
      "diff_hunk": "@@ -133,11 +132,78 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     func_prune_blocks(last_pruned_block);\n \n     // 3) The last block not pruned is in-between upper-block and the genesis block\n-    BOOST_CHECK_EQUAL(&blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n+    BOOST_CHECK_EQUAL(blockman.GetFirstBlock(tip, BLOCK_HAVE_DATA), first_available_block);\n     BOOST_CHECK(blockman.CheckBlockDataAvailability(tip, *first_available_block));\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman = m_node.chainman;\n+    auto& blockman = chainman->m_blockman;\n+    const CBlockIndex& tip = *chainman->ActiveTip();\n+    const FlatFilePos tip_block_pos = tip.GetBlockPos();",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 83,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588518399,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 71c7b747091fce045dbf25e4e0cfc0e6a4ad6435",
      "created_at": "2025-12-07T14:08:06Z",
      "updated_at": "2025-12-07T14:08:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596334064",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596334064"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 143,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596422778",
      "pull_request_review_id": 3549397576,
      "id": 2596422778,
      "node_id": "PRRC_kwDOABII586awkR6",
      "diff_hunk": "@@ -454,12 +484,39 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    size_t part_offset{0};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            auto opt = ToIntegral<size_t>(*part_offset_str);\n+            if (opt.has_value()) {\n+                part_offset = opt.value();\n+            } else {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588794523,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "We can at least change the declaration to not be an optional:\r\n```\r\nstd::pair<size_t, size_t> block_part;\r\n```",
      "created_at": "2025-12-07T16:23:11Z",
      "updated_at": "2025-12-07T16:23:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596422778",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596422778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 497,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596424077",
      "pull_request_review_id": 3549399405,
      "id": 2596424077,
      "node_id": "PRRC_kwDOABII586awkmN",
      "diff_hunk": "@@ -0,0 +1,5 @@\n+New RPCs",
      "path": "doc/release-notes-33657.md",
      "position": 1,
      "original_position": 1,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think this should rather be\r\n\r\n```suggestion\r\nNew REST API\r\n```",
      "created_at": "2025-12-07T16:25:04Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596424077",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596424077"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596452456",
      "pull_request_review_id": 3549427530,
      "id": 2596452456,
      "node_id": "PRRC_kwDOABII586awrho",
      "diff_hunk": "@@ -454,12 +484,39 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_DETAILS_AND_PREVOUT, /*part_offset=*/0, /*part_size=*/std::nullopt);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n {\n-    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n+    return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID, /*part_offset=*/0, /*part_size=*/std::nullopt);\n+}\n+\n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    size_t part_offset{0};\n+    std::optional<size_t> part_size{};\n+    try {\n+        const auto part_offset_str = req->GetQueryParameter(\"offset\");\n+        if (part_offset_str.has_value()) {\n+            auto opt = ToIntegral<size_t>(*part_offset_str);\n+            if (opt.has_value()) {\n+                part_offset = opt.value();\n+            } else {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part offset is invalid: %s\", *part_offset_str));\n+            }\n+        }\n+        const auto part_size_str = req->GetQueryParameter(\"size\");\n+        if (part_size_str.has_value()) {\n+            part_size = ToIntegral<size_t>(*part_size_str);\n+            if (!part_size.has_value()) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Block part size is invalid: %s\", *part_size_str));\n+            }\n+        }\n+    } catch (const std::runtime_error& e) {\n+        return RESTERR(req, HTTP_BAD_REQUEST, e.what());",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 139,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588794523,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "WDYT about https://github.com/bitcoin/bitcoin/compare/9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3..262f4dfe691b12171a31c9219ba33f1fe55f67a7?",
      "created_at": "2025-12-07T17:11:21Z",
      "updated_at": "2025-12-07T17:11:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2596452456",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2596452456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 497,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 517,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597756415",
      "pull_request_review_id": 3550963091,
      "id": 2597756415,
      "node_id": "PRRC_kwDOABII586a1p3_",
      "diff_hunk": "",
      "path": "src/bench/readwriteblock.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in 7802c1f9ca09b5669b8400e96baeadc238fa9df2 \"blockstorage: return an error code from `ReadRawBlock()`\": The commit message should probably note that the benchmark performance decreases due to no longer reusing a `vector` with an unchanging capacity (but that it mirrors our production code behavior).",
      "created_at": "2025-12-08T09:20:40Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597756415",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597756415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597781433",
      "pull_request_review_id": 3550963091,
      "id": 2597781433,
      "node_id": "PRRC_kwDOABII586a1v-5",
      "diff_hunk": "@@ -1048,19 +1048,19 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n     return ReadBlock(block, block_pos, index.GetBlockHash());\n }\n \n-bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+BlockManager::ReadRawBlockResult BlockManager::ReadRawBlock(const FlatFilePos& pos, std::optional<std::pair<size_t, size_t>> block_part) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return util::Unexpected(ReadRawError::IO);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 31,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "meganit: Prefer curly braces by convention in modern code\n```suggestion\n        return util::Unexpected{ReadRawError::IO};\n```",
      "created_at": "2025-12-08T09:25:18Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597781433",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597781433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1058,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597817911",
      "pull_request_review_id": 3550963091,
      "id": 2597817911,
      "node_id": "PRRC_kwDOABII586a1443",
      "diff_hunk": "@@ -427,8 +435,14 @@ static bool rest_block(const std::any& context,\n     }\n \n     std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    if (auto err = chainman.m_blockman.ReadRawBlockPart(block_data, pos, part_offset, part_size)) {\n+        switch (*err) {\n+        case node::ReadRawError::IO:\n+            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+\n+        case node::ReadRawError::BadPartRange:\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582578921,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The example in the developer notes linked above doesn't include the `default` case, but rather puts the `assert(false)` after the `switch`. This means the compiler will start warning if `enum` values are missing from the `switch`. (Only applicable when all cases `return`, which they do in this part of the code).\r\n\r\nPlease adjust the commits accordingly.",
      "created_at": "2025-12-08T09:34:55Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597817911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597817911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597862560",
      "pull_request_review_id": 3550963091,
      "id": 2597862560,
      "node_id": "PRRC_kwDOABII586a2Dyg",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Might be a more appropriate error code?\n```suggestion\n                return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n```",
      "created_at": "2025-12-08T09:47:46Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597862560",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597862560"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 432,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597870863",
      "pull_request_review_id": 3550963091,
      "id": 2597870863,
      "node_id": "PRRC_kwDOABII586a2F0P",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+            } else {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Empty block part for %s\", hashStr));",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 34,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`BadPartRange` should only happen when a block_part is specified, so I would prefer an `assert()` over this contrived error condition:\n\n```C++\n        case node::ReadRawError::BadPartRange:\n            assert(block_part);\n            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n```",
      "created_at": "2025-12-08T09:50:20Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597870863",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597870863"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 434,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597880475",
      "pull_request_review_id": 3550963091,
      "id": 2597880475,
      "node_id": "PRRC_kwDOABII586a2IKb",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+            } else {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Empty block part for %s\", hashStr));\n+            }\n+        default: assert(false);\n+        }\n     }\n \n     switch (rf) {\n     case RESTResponseFormat::BINARY: {\n         req->WriteHeader(\"Content-Type\", \"application/octet-stream\");\n-        req->WriteReply(HTTP_OK, block_data);\n+        req->WriteReply(HTTP_OK, *block_data);\n         return true;\n     }\n \n     case RESTResponseFormat::HEX: {\n-        const std::string strHex{HexStr(block_data) + \"\\n\"};\n+        const std::string strHex{HexStr(*block_data) + \"\\n\"};\n         req->WriteHeader(\"Content-Type\", \"text/plain\");\n         req->WriteReply(HTTP_OK, strHex);\n         return true;\n     }\n \n     case RESTResponseFormat::JSON: {\n-        CBlock block{};\n-        DataStream block_stream{block_data};\n-        block_stream >> TX_WITH_WITNESS(block);\n-        UniValue objBlock = blockToJSON(chainman.m_blockman, block, *tip, *pblockindex, tx_verbosity, chainman.GetConsensus().powLimit);\n-        std::string strJSON = objBlock.write() + \"\\n\";\n-        req->WriteHeader(\"Content-Type\", \"application/json\");\n-        req->WriteReply(HTTP_OK, strJSON);\n-        return true;\n+        if (tx_verbosity) {",
      "path": "src/rest.cpp",
      "position": 62,
      "original_position": 65,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Preference for the following in favor of smaller diff:\r\n```C++\r\n        if (!tx_verbosity) {\r\n            return RESTERR(req, HTTP_BAD_REQUEST, \"JSON output is not supported for this request type\");\r\n        }\r\n```",
      "created_at": "2025-12-08T09:52:22Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597880475",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597880475"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 452,
      "original_line": 452,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597901554",
      "pull_request_review_id": 3550963091,
      "id": 2597901554,
      "node_id": "PRRC_kwDOABII586a2NTy",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "(Don't see the value in `const` here as we return it directly, but the noise isn't too bad).",
      "created_at": "2025-12-08T09:58:03Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597901554",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597901554"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597911471",
      "pull_request_review_id": 3550963091,
      "id": 2597911471,
      "node_id": "PRRC_kwDOABII586a2Puv",
      "diff_hunk": "@@ -1072,23 +1079,39 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return ReadRawError::IO;\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return ReadRawError::IO;\n+        }\n+\n+        if (part_offset > blk_size) {\n+            // Avoid logging - part_offset can come from an untrusted source (REST)\n+            return ReadRawError::BadPartRange;\n         }\n \n-        block.resize(blk_size); // Zeroing of memory is intentional here\n-        filein.read(block);\n+        size_t size = blk_size - part_offset;",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 202,
      "commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "original_commit_id": "e6eb4a57df9f0379550358e4362729bfe5953007",
      "in_reply_to_id": 2588735671,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Would be nice to include something like this in unit tests.\r\n\r\n```diff\r\n--- a/src/test/blockmanager_tests.cpp\r\n+++ b/src/test/blockmanager_tests.cpp\r\n@@ -188,6 +188,9 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\r\n     }};\r\n \r\n     expect_part_error(0, 0);\r\n+    expect_part_error(std::numeric_limits<size_t>::max(), 1);\r\n+    expect_part_error(0, std::numeric_limits<size_t>::max());\r\n+    expect_part_error(std::numeric_limits<size_t>::max(), std::numeric_limits<size_t>::max());\r\n     expect_part_error(0, block->size() + 1);\r\n     expect_part_error(1, block->size());\r\n     expect_part_error(2, block->size() - 1);\r\n```",
      "created_at": "2025-12-08T10:01:06Z",
      "updated_at": "2025-12-08T10:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2597911471",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2597911471"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1096,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602113088",
      "pull_request_review_id": 3549399405,
      "id": 2602113088,
      "node_id": "PRRC_kwDOABII586bGRhA",
      "diff_hunk": "@@ -530,7 +530,7 @@ class PeerManagerImpl final : public PeerManager\n     /** Implement PeerManager */\n     void StartScheduledTasks(CScheduler& scheduler) override;\n     void CheckForStaleTipAndEvictPeers() override;\n-    std::optional<std::string> FetchBlock(NodeId peer_id, const CBlockIndex& block_index) override\n+    util::Expected<void, std::string> FetchBlock(NodeId peer_id, const CBlockIndex& block_index) override",
      "path": "src/net_processing.cpp",
      "position": 1,
      "original_position": 5,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "fa114be27b17ed32c1d9a7106f313a0df8755fa2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`util::Expected` was just merged, you can rebase the PR now, thanks for using it here, the results are a lot more readable",
      "created_at": "2025-12-09T10:50:39Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602113088",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602113088"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 533,
      "original_line": 533,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602127679",
      "pull_request_review_id": 3549399405,
      "id": 2602127679,
      "node_id": "PRRC_kwDOABII586bGVE_",
      "diff_hunk": "",
      "path": "src/bench/readwriteblock.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597756415,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Unfortunately https://corecheck.dev/bitcoin/bitcoin/pulls/33657 is still dead, so we don't actually see this change :/",
      "created_at": "2025-12-09T10:55:00Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602127679",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602127679"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602129290",
      "pull_request_review_id": 3549399405,
      "id": 2602129290,
      "node_id": "PRRC_kwDOABII586bGVeK",
      "diff_hunk": "@@ -57,11 +57,10 @@ static void ReadRawBlockBench(benchmark::Bench& bench)\n     const auto testing_setup{MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN)};\n     auto& blockman{testing_setup->m_node.chainman->m_blockman};\n     const auto pos{blockman.WriteBlock(CreateTestBlock(), 413'567)};\n-    std::vector<std::byte> block_data;\n-    blockman.ReadRawBlock(block_data, pos); // warmup\n+    assert(blockman.ReadRawBlock(pos)); // warmup",
      "path": "src/bench/readwriteblock.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "7802c1f9ca09b5669b8400e96baeadc238fa9df2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "does this still warm up anything? I think we can safely delete this line now...",
      "created_at": "2025-12-09T10:55:27Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602129290",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602129290"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602140994",
      "pull_request_review_id": 3549399405,
      "id": 2602140994,
      "node_id": "PRRC_kwDOABII586bGYVC",
      "diff_hunk": "@@ -427,8 +435,14 @@ static bool rest_block(const std::any& context,\n     }\n \n     std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    if (auto err = chainman.m_blockman.ReadRawBlockPart(block_data, pos, part_offset, part_size)) {\n+        switch (*err) {\n+        case node::ReadRawError::IO:\n+            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+\n+        case node::ReadRawError::BadPartRange:\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582578921,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "is there a difference? Isn't the `default` way more self-contained?",
      "created_at": "2025-12-09T10:59:01Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602140994",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602140994"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602158244",
      "pull_request_review_id": 3549399405,
      "id": 2602158244,
      "node_id": "PRRC_kwDOABII586bGcik",
      "diff_hunk": "@@ -47,6 +47,11 @@ The HTTP request and response are both handled entirely in-memory.\n \n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n+- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?offset=X&size=Y`",
      "path": "doc/REST-interface.md",
      "position": 1,
      "original_position": 4,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "if we're writing `<BLOCK-HASH>` and not just `BLOCK-HASH`, we should so the same for `X` and Y` (which can also be reworded for consistency, similarly to the PRs description):\r\n```suggestion\r\n- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?offset=<OFFSET>&size=<SIZE>`\r\n- ```",
      "created_at": "2025-12-09T11:03:35Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602158244",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602158244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602166921",
      "pull_request_review_id": 3549399405,
      "id": 2602166921,
      "node_id": "PRRC_kwDOABII586bGeqJ",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597862560,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Indeed",
      "created_at": "2025-12-09T11:05:30Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602166921",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602166921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 432,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602172861",
      "pull_request_review_id": 3549399405,
      "id": 2602172861,
      "node_id": "PRRC_kwDOABII586bGgG9",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+            } else {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Empty block part for %s\", hashStr));\n+            }\n+        default: assert(false);\n+        }\n     }\n \n     switch (rf) {\n     case RESTResponseFormat::BINARY: {\n         req->WriteHeader(\"Content-Type\", \"application/octet-stream\");\n-        req->WriteReply(HTTP_OK, block_data);\n+        req->WriteReply(HTTP_OK, *block_data);\n         return true;\n     }\n \n     case RESTResponseFormat::HEX: {\n-        const std::string strHex{HexStr(block_data) + \"\\n\"};\n+        const std::string strHex{HexStr(*block_data) + \"\\n\"};\n         req->WriteHeader(\"Content-Type\", \"text/plain\");\n         req->WriteReply(HTTP_OK, strHex);\n         return true;\n     }\n \n     case RESTResponseFormat::JSON: {\n-        CBlock block{};\n-        DataStream block_stream{block_data};\n-        block_stream >> TX_WITH_WITNESS(block);\n-        UniValue objBlock = blockToJSON(chainman.m_blockman, block, *tip, *pblockindex, tx_verbosity, chainman.GetConsensus().powLimit);\n-        std::string strJSON = objBlock.write() + \"\\n\";\n-        req->WriteHeader(\"Content-Type\", \"application/json\");\n-        req->WriteReply(HTTP_OK, strJSON);\n-        return true;\n+        if (tx_verbosity) {",
      "path": "src/rest.cpp",
      "position": 62,
      "original_position": 65,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597880475,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "That was the previous version before I explicitly suggested this. Either is fine I guess, this way we have the dereferencing inside the checking condition, with your suggestion the diff would be smaller.",
      "created_at": "2025-12-09T11:07:05Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602172861",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602172861"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 452,
      "original_line": 452,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602174539",
      "pull_request_review_id": 3549399405,
      "id": 2602174539,
      "node_id": "PRRC_kwDOABII586bGghL",
      "diff_hunk": "@@ -465,6 +481,25 @@ static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, co\n     return rest_block(context, req, uri_part, TxVerbosity::SHOW_TXID);\n }\n \n+static bool rest_block_part(const std::any& context, HTTPRequest* req, const std::string& uri_part)\n+{\n+    try {\n+        if (const auto opt_offset{ToIntegral<size_t>(req->GetQueryParameter(\"offset\").value_or(\"\"))}) {\n+            if (const auto opt_size{ToIntegral<size_t>(req->GetQueryParameter(\"size\").value_or(\"\"))}) {\n+                return rest_block(context, req, uri_part,",
      "path": "src/rest.cpp",
      "position": 85,
      "original_position": 72,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I like this new version, it's very compact",
      "created_at": "2025-12-09T11:07:37Z",
      "updated_at": "2025-12-09T11:48:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2602174539",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2602174539"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 486,
      "original_line": 486,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2603066114",
      "pull_request_review_id": 3557955584,
      "id": 2603066114,
      "node_id": "PRRC_kwDOABII586bJ6MC",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "So, I think making this `const` prevents RVO here and this should be reverted (sorry). I'm also unclear if the compiler will move the value out of the `util::Expected`. Do we need this to be `return std::move(*data);`?",
      "created_at": "2025-12-09T15:07:12Z",
      "updated_at": "2025-12-09T15:07:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2603066114",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2603066114"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2603307514",
      "pull_request_review_id": 3558278945,
      "id": 2603307514,
      "node_id": "PRRC_kwDOABII586bK1H6",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I think making this const prevents RVO here\r\n\r\nCan you explain why you think that's the case?",
      "created_at": "2025-12-09T16:00:38Z",
      "updated_at": "2025-12-09T16:00:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2603307514",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2603307514"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2603334866",
      "pull_request_review_id": 3558310948,
      "id": 2603334866,
      "node_id": "PRRC_kwDOABII586bK7zS",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "The compiler can't automatically move `const` `lvalue` return values to the callsite.\r\n\r\nIf this was just returning the value, like `return data;`, then it would be straightforward and `const` would definitely be undesirable and require a copy. Regardless, the compiler here won't be able to move the expected value out of the `Expected` struct if it is `const`.\r\n\r\nSince we have to dereference here and are not returning the `lvalue` itself, I'm unsure if the compiler will be able to move the expected value out of the `Expected` or not. If not, we should wrap it in `std::move`.",
      "created_at": "2025-12-09T16:07:29Z",
      "updated_at": "2025-12-09T16:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2603334866",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2603334866"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2604616574",
      "pull_request_review_id": 3560044195,
      "id": 2604616574,
      "node_id": "PRRC_kwDOABII586bP0t-",
      "diff_hunk": "@@ -172,6 +172,7 @@ std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\n \n enum class ReadRawError {\n     IO,\n+    BadPartRange,",
      "path": "src/node/blockstorage.h",
      "position": 14,
      "original_position": 4,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If you add the value in 0fa70db617a0f003422f66a0ef634b0af1bbd520, you have to handle it in every switch:\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20077800373/job/57596718560?pr=33657#step:8:2692\r\n\r\n@sedited, are you sure still we need the `assert(false)` hack, it seems `-Wswitch` already warns:\r\n```\r\n/home/runner/work/bitcoin/bitcoin/src/rest.cpp:421:17: error: enumeration value 'BadPartRange' not handled in switch [-Werror,-Wswitch]\r\n  421 |         switch (block_data.error()) {\r\n      |                 ^~~~~~~~~~~~~~~~~~\r\n1 error generated.\r\n```\r\nEdit: we should keep the assert for now, we can adjust them all later, if needed....",
      "created_at": "2025-12-09T22:48:16Z",
      "updated_at": "2025-12-09T23:10:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2604616574",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2604616574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607170399",
      "pull_request_review_id": 3563196809,
      "id": 2607170399,
      "node_id": "PRRC_kwDOABII586bZkNf",
      "diff_hunk": "@@ -172,6 +172,7 @@ std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\n \n enum class ReadRawError {\n     IO,\n+    BadPartRange,",
      "path": "src/node/blockstorage.h",
      "position": 14,
      "original_position": 4,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "in_reply_to_id": 2604616574,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Modified `blockstorage: allow reading partial block data from storage` to fix the issue above:\r\n\r\n<details>\r\n\r\n<summary> range-diff </summary>\r\n\r\n```\r\n$ git range-diff origin/master 2251ac1 8b41708\r\n\r\n1:  1be1c165b3 = 1:  1be1c165b3 blockstorage: return an error code from `ReadRawBlock()`\r\n2:  0fa70db617 ! 2:  52ac60d141 blockstorage: allow reading partial block data from storage\r\n    @@ src/node/blockstorage.h: public:\r\n          bool ReadBlockUndo(CBlockUndo& blockundo, const CBlockIndex& index) const;\r\n      \r\n     \r\n    + ## src/rest.cpp ##\r\n    +@@ src/rest.cpp: static bool rest_block(const std::any& context,\r\n    +     if (!block_data) {\r\n    +         switch (block_data.error()) {\r\n    +         case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\r\n    ++        case node::ReadRawError::BadPartRange: break; // can happen only when reading a block part\r\n    +         }\r\n    +         assert(false);\r\n    +     }\r\n    +\r\n      ## src/test/blockmanager_tests.cpp ##\r\n     @@ src/test/blockmanager_tests.cpp: BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\r\n          BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\r\n3:  2251ac101f ! 3:  8b417087ae rest: allow reading partial block data from storage\r\n    @@ src/rest.cpp: static bool rest_block(const std::any& context,\r\n          if (!block_data) {\r\n              switch (block_data.error()) {\r\n              case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\r\n    +-        case node::ReadRawError::BadPartRange: break; // can happen only when reading a block part\r\n     +        case node::ReadRawError::BadPartRange:\r\n     +            assert(block_part);\r\n     +            return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\r\n```\r\n\r\n</details>\r\n",
      "created_at": "2025-12-10T15:40:27Z",
      "updated_at": "2025-12-10T15:40:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607170399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607170399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607215490",
      "pull_request_review_id": 3563252006,
      "id": 2607215490,
      "node_id": "PRRC_kwDOABII586bZvOC",
      "diff_hunk": "@@ -47,6 +47,11 @@ The HTTP request and response are both handled entirely in-memory.\n \n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n+- `GET /rest/blockpart/<BLOCK-HASH>.<bin|hex>?offset=X&size=Y`",
      "path": "doc/REST-interface.md",
      "position": 1,
      "original_position": 4,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2602158244,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 8b417087ae",
      "created_at": "2025-12-10T15:50:52Z",
      "updated_at": "2025-12-10T15:50:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607215490",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607215490"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607216804",
      "pull_request_review_id": 3563253667,
      "id": 2607216804,
      "node_id": "PRRC_kwDOABII586bZvik",
      "diff_hunk": "@@ -57,11 +57,10 @@ static void ReadRawBlockBench(benchmark::Bench& bench)\n     const auto testing_setup{MakeNoLogFileContext<const TestingSetup>(ChainType::MAIN)};\n     auto& blockman{testing_setup->m_node.chainman->m_blockman};\n     const auto pos{blockman.WriteBlock(CreateTestBlock(), 413'567)};\n-    std::vector<std::byte> block_data;\n-    blockman.ReadRawBlock(block_data, pos); // warmup\n+    assert(blockman.ReadRawBlock(pos)); // warmup",
      "path": "src/bench/readwriteblock.cpp",
      "position": 1,
      "original_position": 6,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "7802c1f9ca09b5669b8400e96baeadc238fa9df2",
      "in_reply_to_id": 2602129290,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Dropped in 1be1c165b3",
      "created_at": "2025-12-10T15:51:13Z",
      "updated_at": "2025-12-10T15:51:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607216804",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607216804"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607218695",
      "pull_request_review_id": 3563255765,
      "id": 2607218695,
      "node_id": "PRRC_kwDOABII586bZwAH",
      "diff_hunk": "@@ -0,0 +1,5 @@\n+New RPCs",
      "path": "doc/release-notes-33657.md",
      "position": 1,
      "original_position": 1,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "9efccb0d3e84d83e0ec29a4b18b72019ffc3d5c3",
      "in_reply_to_id": 2596424077,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks - updated in 8b417087ae",
      "created_at": "2025-12-10T15:51:44Z",
      "updated_at": "2025-12-10T15:51:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607218695",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607218695"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607222862",
      "pull_request_review_id": 3563260432,
      "id": 2607222862,
      "node_id": "PRRC_kwDOABII586bZxBO",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+            } else {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Empty block part for %s\", hashStr));",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 34,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597870863,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Changed in 8b417087ae.",
      "created_at": "2025-12-10T15:52:47Z",
      "updated_at": "2025-12-10T15:52:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607222862",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607222862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 434,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607223451",
      "pull_request_review_id": 3563261079,
      "id": 2607223451,
      "node_id": "PRRC_kwDOABII586bZxKb",
      "diff_hunk": "@@ -416,34 +423,46 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            if (block_part) {\n+                return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 32,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597862560,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 8b417087ae",
      "created_at": "2025-12-10T15:52:57Z",
      "updated_at": "2025-12-10T15:52:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607223451",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607223451"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 432,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607225790",
      "pull_request_review_id": 3563264481,
      "id": 2607225790,
      "node_id": "PRRC_kwDOABII586bZxu-",
      "diff_hunk": "@@ -1048,19 +1048,19 @@ bool BlockManager::ReadBlock(CBlock& block, const CBlockIndex& index) const\n     return ReadBlock(block, block_pos, index.GetBlockHash());\n }\n \n-bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos& pos) const\n+BlockManager::ReadRawBlockResult BlockManager::ReadRawBlock(const FlatFilePos& pos, std::optional<std::pair<size_t, size_t>> block_part) const\n {\n     if (pos.nPos < STORAGE_HEADER_BYTES) {\n         // If nPos is less than STORAGE_HEADER_BYTES, we can't read the header that precedes the block data\n         // This would cause an unsigned integer underflow when trying to position the file cursor\n         // This can happen after pruning or default constructed positions\n         LogError(\"Failed for %s while reading raw block storage header\", pos.ToString());\n-        return false;\n+        return util::Unexpected(ReadRawError::IO);",
      "path": "src/node/blockstorage.cpp",
      "position": 1,
      "original_position": 31,
      "commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597781433,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in 1be1c165b3 & 52ac60d141",
      "created_at": "2025-12-10T15:53:36Z",
      "updated_at": "2025-12-10T15:53:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607225790",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607225790"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1058,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607254720",
      "pull_request_review_id": 3563299997,
      "id": 2607254720,
      "node_id": "PRRC_kwDOABII586bZ4zA",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Sorry for not suggesting earlier, this could possibly be more appropriate:\r\n```suggestion\r\n        case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\r\n```",
      "created_at": "2025-12-10T15:59:58Z",
      "updated_at": "2025-12-10T19:54:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607254720",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607254720"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607375727",
      "pull_request_review_id": 3563450136,
      "id": 2607375727,
      "node_id": "PRRC_kwDOABII586baWVv",
      "diff_hunk": "",
      "path": "src/bench/readwriteblock.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597756415,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It came back, as expected, it shows the benchmark getting slower because of the vector recreation (making it more realistic):\r\n<img width=\"711\" height=\"121\" alt=\"image\" src=\"https://github.com/user-attachments/assets/acb14880-0371-4a8a-910e-5e04bbf79aa3\" />\r\n\r\n---\r\n\r\nI have checked that the refactor doesn't introduce any regression now  ",
      "created_at": "2025-12-10T16:31:30Z",
      "updated_at": "2025-12-10T16:53:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607375727",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607375727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607445185",
      "pull_request_review_id": 3563450136,
      "id": 2607445185,
      "node_id": "PRRC_kwDOABII586banTB",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@romanz, can you please check if there's a performance difference in the RPC with and without a const here?",
      "created_at": "2025-12-10T16:49:06Z",
      "updated_at": "2025-12-10T16:53:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607445185",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607445185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607453751",
      "pull_request_review_id": 3563450136,
      "id": 2607453751,
      "node_id": "PRRC_kwDOABII586bapY3",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_REQUIRE(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());\n+    expect_part(0, block->size() - 1);\n+    expect_part(0, block->size() - 10);\n+    expect_part(0, 20);\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(block->size() - 1, 1);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part_error{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(!res);",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 46,
      "original_position": 49,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: the above test makes res a `REQUIRE`, if you touch agan, consider unifying. Definitely not a blocker.",
      "created_at": "2025-12-10T16:51:42Z",
      "updated_at": "2025-12-10T16:53:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607453751",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607453751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607934791",
      "pull_request_review_id": 3563299997,
      "id": 2607934791,
      "node_id": "PRRC_kwDOABII586bce1H",
      "diff_hunk": "@@ -427,8 +435,14 @@ static bool rest_block(const std::any& context,\n     }\n \n     std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    if (auto err = chainman.m_blockman.ReadRawBlockPart(block_data, pos, part_offset, part_size)) {\n+        switch (*err) {\n+        case node::ReadRawError::IO:\n+            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+\n+        case node::ReadRawError::BadPartRange:\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582578921,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Having a `default` prevents the compiler warning for missing `enum` values as it is assumed the developer meant for all missing `enum` values to go to the `default`.",
      "created_at": "2025-12-10T19:23:32Z",
      "updated_at": "2025-12-10T19:54:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2607934791",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2607934791"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608002092",
      "pull_request_review_id": 3563299997,
      "id": 2608002092,
      "node_id": "PRRC_kwDOABII586bcvQs",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Could add a test for this:\n```diff\n--- a/test/functional/interface_rest.py\n+++ b/test/functional/interface_rest.py\n@@ -9,6 +9,7 @@ from enum import Enum\n from io import BytesIO\n import http.client\n import json\n+import os\n import typing\n import urllib.parse\n \n@@ -84,7 +85,7 @@ class RESTTest (BitcoinTestFramework):\n             conn.request('POST', rest_uri, body)\n         resp = conn.getresponse()\n \n-        assert_equal(resp.status, status)\n+        assert resp.status == status, f\"Expected: {status}, Got: {resp.status} - Response: {str(resp.read())}\"\n \n         if ret_type == RetType.OBJ:\n             return resp\n@@ -492,6 +493,11 @@ class RESTTest (BitcoinTestFramework):\n \n         self.test_rest_request(f\"/blockpart/{blockhash}\", status=400, req_type=ReqType.JSON, ret_type=RetType.OBJ)\n \n+        self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\n+        os.rename(self.nodes[0].blocks_path, self.nodes[0].blocks_path.with_suffix(\".bkp\"))\n+        self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=404, req_type=ReqType.BIN, ret_type=RetType.OBJ)\n+        os.rename(self.nodes[0].blocks_path.with_suffix(\".bkp\"), self.nodes[0].blocks_path)\n+\n         self.log.info(\"Test the /deploymentinfo URI\")\n \n         deployment_info = self.nodes[0].getdeploymentinfo()\n```",
      "created_at": "2025-12-10T19:45:35Z",
      "updated_at": "2025-12-10T19:54:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608002092",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608002092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608380979",
      "pull_request_review_id": 3564696045,
      "id": 2608380979,
      "node_id": "PRRC_kwDOABII586beLwz",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, added in https://github.com/bitcoin/bitcoin/pull/33657/commits/44758e8387e66ec49d190b59f8a8fefab84b1e69.",
      "created_at": "2025-12-10T22:05:08Z",
      "updated_at": "2025-12-10T22:05:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608380979",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608380979"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608385566",
      "pull_request_review_id": 3564701764,
      "id": 2608385566,
      "node_id": "PRRC_kwDOABII586beM4e",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2607254720,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "No worries, thanks :)\r\n\r\n<details>\r\n\r\n<summary> git range-diff </summary>\r\n\r\n```\r\n1:  1be1c165b3 ! 1:  7a2a6b398b blockstorage: return an error code from `ReadRawBlock()`\r\n    @@ src/rest.cpp: static bool rest_block(const std::any& context,\r\n     +    const auto block_data{chainman.m_blockman.ReadRawBlock(pos)};\r\n     +    if (!block_data) {\r\n     +        switch (block_data.error()) {\r\n    -+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\r\n    ++        case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\r\n     +        }\r\n     +        assert(false);\r\n          }\r\n2:  52ac60d141 ! 2:  f03f9d7dcd blockstorage: allow reading partial block data from storage\r\n    @@ src/rest.cpp\r\n     @@ src/rest.cpp: static bool rest_block(const std::any& context,\r\n          if (!block_data) {\r\n              switch (block_data.error()) {\r\n    -         case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\r\n    +         case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\r\n     +        case node::ReadRawError::BadPartRange: break; // can happen only when reading a block part\r\n              }\r\n              assert(false);\r\n    @@ src/test/blockmanager_tests.cpp: BOOST_FIXTURE_TEST_CASE(blockmanager_block_data\r\n     +\r\n     +    const auto expect_part{[&](size_t offset, size_t size) {\r\n     +        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\r\n    -+        BOOST_REQUIRE(res);\r\n    ++        BOOST_CHECK(res);\r\n     +        const auto& part{res.value()};\r\n     +        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\r\n     +    }};\r\n3:  8b417087ae ! 3:  44758e8387 rest: allow reading partial block data from storage\r\n    @@ src/rest.cpp: static bool rest_block(const std::any& context,\r\n     +    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\r\n          if (!block_data) {\r\n              switch (block_data.error()) {\r\n    -         case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\r\n    +         case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\r\n     -        case node::ReadRawError::BadPartRange: break; // can happen only when reading a block part\r\n     +        case node::ReadRawError::BadPartRange:\r\n     +            assert(block_part);\r\n    @@ test/functional/interface_rest.py: class RESTTest (BitcoinTestFramework):\r\n      \r\n              conn = http.client.HTTPConnection(self.url.hostname, self.url.port)\r\n              self.log.debug(f'{http_method} {rest_uri} {body}')\r\n    +@@ test/functional/interface_rest.py: class RESTTest (BitcoinTestFramework):\r\n    +             conn.request('POST', rest_uri, body)\r\n    +         resp = conn.getresponse()\r\n    + \r\n    +-        assert_equal(resp.status, status)\r\n    ++        assert resp.status == status, f\"Expected: {status}, Got: {resp.status} - Response: {str(resp.read())}\"\r\n    + \r\n    +         if ret_type == RetType.OBJ:\r\n    +             return resp\r\n     @@ test/functional/interface_rest.py: class RESTTest (BitcoinTestFramework):\r\n                      expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\r\n                      assert_equal(expected, actual)\r\n    @@ test/functional/interface_rest.py: class RESTTest (BitcoinTestFramework):\r\n     +            _get_block_part(status=400, query_params={\"offset\": 0, \"size\": len(block_bin) + 1})\r\n     +\r\n     +        self.test_rest_request(f\"/blockpart/{blockhash}\", status=400, req_type=ReqType.JSON, ret_type=RetType.OBJ)\r\n    ++\r\n    ++        self.test_rest_request(f\"/block/{blockhash}\", status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n    ++        self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n    ++        # Missing block data should cause REST API to fail\r\n    ++        blocks_path = self.nodes[0].blocks_path\r\n    ++        backup_path = blocks_path.with_suffix(\".bkp\")\r\n    ++        blocks_path.rename(backup_path)\r\n    ++        try:\r\n    ++            self.test_rest_request(f\"/block/{blockhash}\", status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n    ++            self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n    ++        finally:\r\n    ++            backup_path.rename(blocks_path)\r\n      \r\n              self.log.info(\"Test the /deploymentinfo URI\")\r\n```\r\n\r\n</details>",
      "created_at": "2025-12-10T22:07:10Z",
      "updated_at": "2025-12-10T22:07:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608385566",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608385566"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608388301",
      "pull_request_review_id": 3564704843,
      "id": 2608388301,
      "node_id": "PRRC_kwDOABII586beNjN",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_REQUIRE(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());\n+    expect_part(0, block->size() - 1);\n+    expect_part(0, block->size() - 10);\n+    expect_part(0, 20);\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(block->size() - 1, 1);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part_error{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(!res);",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 46,
      "original_position": 49,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2607453751,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Unified in f03f9d7dcd929f73f7b0c7030d9822e54f1621ec",
      "created_at": "2025-12-10T22:08:19Z",
      "updated_at": "2025-12-10T22:08:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608388301",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608388301"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608396257",
      "pull_request_review_id": 3564714101,
      "id": 2608396257,
      "node_id": "PRRC_kwDOABII586bePfh",
      "diff_hunk": "@@ -427,8 +435,14 @@ static bool rest_block(const std::any& context,\n     }\n \n     std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    if (auto err = chainman.m_blockman.ReadRawBlockPart(block_data, pos, part_offset, part_size)) {\n+        switch (*err) {\n+        case node::ReadRawError::IO:\n+            return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);\n+\n+        case node::ReadRawError::BadPartRange:\n+            return RESTERR(req, HTTP_NOT_FOUND, strprintf(\"Bad block part offset/size %d/%d for %s\", part_offset, part_size.value_or(0), hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "6826375e85a690d583cdeae3ff68d8703b1802ca",
      "in_reply_to_id": 2582578921,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If we don't have a default, the compiler will warn since we have the `-Wswitch` set - in which case I don't see why the `assert(false)` is needed.\r\nAlternatively, if we add a `default: assert(false)`, we don't need to specify all values and the compiler won't warn, the failure will be on runtime.\r\nAnyway, off topic, I'm fine either way.",
      "created_at": "2025-12-10T22:12:03Z",
      "updated_at": "2025-12-10T22:12:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608396257",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608396257"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608446338",
      "pull_request_review_id": 3564770718,
      "id": 2608446338,
      "node_id": "PRRC_kwDOABII586bebuC",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 30,
      "commit_id": "bbea9636a3b11df1c79664e97ded7907bbacfcf3",
      "original_commit_id": "194a8ebf8ceaab3ea7e990bc96a39c32ec293431",
      "in_reply_to_id": 2595372728,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Not sure whether `getblock` JSON RPC performance measurement will be precise enough (due to RPC & serialization overhead)... \r\n\r\nMaybe it would be easier to inline `GetRawBlockChecked` (similar to how it's done in `rest.cpp`)?\r\n\r\n```diff\r\ndiff --git a/src/rpc/blockchain.cpp b/src/rpc/blockchain.cpp\r\nindex 40761d5cab..e179284fcf 100644\r\n--- a/src/rpc/blockchain.cpp\r\n+++ b/src/rpc/blockchain.cpp\r\n@@ -678,21 +678,6 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\r\n     return block;\r\n }\r\n \r\n-static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\r\n-{\r\n-    FlatFilePos pos{};\r\n-    {\r\n-        LOCK(cs_main);\r\n-        CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\r\n-        pos = blockindex.GetBlockPos();\r\n-    }\r\n-\r\n-    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;\r\n-    // Block not found on disk. This shouldn't normally happen unless the block was\r\n-    // pruned right after we released the lock above.\r\n-    throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\r\n-}\r\n-\r\n static CBlockUndo GetUndoChecked(BlockManager& blockman, const CBlockIndex& blockindex)\r\n {\r\n     CBlockUndo blockUndo;\r\n@@ -815,7 +800,8 @@ static RPCHelpMan getblock()\r\n \r\n     const CBlockIndex* pblockindex;\r\n     const CBlockIndex* tip;\r\n-    ChainstateManager& chainman = EnsureAnyChainman(request.context);\r\n+    ChainstateManager& chainman{EnsureAnyChainman(request.context)};\r\n+    FlatFilePos pos{};\r\n     {\r\n         LOCK(cs_main);\r\n         pblockindex = chainman.m_blockman.LookupBlockIndex(hash);\r\n@@ -824,15 +810,22 @@ static RPCHelpMan getblock()\r\n         if (!pblockindex) {\r\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\r\n         }\r\n+\r\n+        CheckBlockDataAvailability(chainman.m_blockman, *pblockindex, /*check_for_undo=*/false);\r\n+        pos = pblockindex->GetBlockPos();\r\n     }\r\n \r\n-    const std::vector<std::byte> block_data{GetRawBlockChecked(chainman.m_blockman, *pblockindex)};\r\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos)};\r\n+    // Block not found on disk. This shouldn't normally happen unless the block was\r\n+    // pruned right after we released the lock above.\r\n+    if (!block_data) throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\r\n+\r\n \r\n     if (verbosity <= 0) {\r\n-        return HexStr(block_data);\r\n+        return HexStr(*block_data);\r\n     }\r\n \r\n-    DataStream block_stream{block_data};\r\n+    DataStream block_stream{*block_data};\r\n     CBlock block{};\r\n     block_stream >> TX_WITH_WITNESS(block);\r\n```\r\n\r\n",
      "created_at": "2025-12-10T22:33:34Z",
      "updated_at": "2025-12-10T22:33:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608446338",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608446338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608555177",
      "pull_request_review_id": 3564903920,
      "id": 2608555177,
      "node_id": "PRRC_kwDOABII586be2Sp",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Argh, saw Windows CI failures: https://github.com/bitcoin/bitcoin/actions/runs/20114716290/job/57721194424?pr=33657#step:14:3972\r\n\r\nI guess the OS doesn't like moving directories with opened files in them. Maybe best to make these checks conditional on the platform (`if platform.system() != \"Windows\":`).",
      "created_at": "2025-12-10T23:25:01Z",
      "updated_at": "2025-12-10T23:25:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2608555177",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2608555177"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609482205",
      "pull_request_review_id": 3566084459,
      "id": 2609482205,
      "node_id": "PRRC_kwDOABII586biYnd",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed on https://github.com/bitcoin/bitcoin/commit/9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "created_at": "2025-12-11T07:26:51Z",
      "updated_at": "2025-12-11T07:28:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2609482205",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609482205"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609627988",
      "pull_request_review_id": 3566227211,
      "id": 2609627988,
      "node_id": "PRRC_kwDOABII586bi8NU",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_REQUIRE(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());\n+    expect_part(0, block->size() - 1);\n+    expect_part(0, block->size() - 10);\n+    expect_part(0, 20);\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(block->size() - 1, 1);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part_error{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(!res);",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 46,
      "original_position": 49,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2607453751,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: In my opinion it would be better to use `REQUIRE` which stops the test in case of failure, so that we don't trigger less clear failures on the following lines (internal assert in `Expected::value()` - might be an exception after #34032, assert inside `Expected::error()`).\r\n\r\n```diff\r\n--- a/src/test/blockmanager_tests.cpp\r\n+++ b/src/test/blockmanager_tests.cpp\r\n@@ -152,7 +152,7 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\r\n \r\n     const auto expect_part{[&](size_t offset, size_t size) {\r\n         auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\r\n-        BOOST_CHECK(res);\r\n+        BOOST_REQUIRE(res);\r\n         const auto& part{res.value()};\r\n         BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\r\n     }};\r\n@@ -183,7 +183,7 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\r\n \r\n     const auto expect_part_error{[&](size_t offset, size_t size) {\r\n         auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\r\n-        BOOST_CHECK(!res);\r\n+        BOOST_REQUIRE(!res);\r\n         BOOST_CHECK_EQUAL(res.error(), node::ReadRawError::BadPartRange);\r\n     }};\r\n \r\n```",
      "created_at": "2025-12-11T08:21:35Z",
      "updated_at": "2025-12-11T08:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2609627988",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609627988"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609654918",
      "pull_request_review_id": 3566227211,
      "id": 2609654918,
      "node_id": "PRRC_kwDOABII586bjCyG",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Not sure about the `try`/`finally`. I think it may be better to leave the filesystem as-is in case of failure, so that devs inspecting the directory of a failed test finds it closer to how it looked when the failure happened. Haven't seen this kind of pattern in other functional tests. We don't continue the test regardless, so there's no benefit to checks later in the test.\r\n```diff\r\n--- a/test/functional/interface_rest.py\r\n+++ b/test/functional/interface_rest.py\r\n@@ -500,11 +500,9 @@ class RESTTest (BitcoinTestFramework):\r\n             blocks_path = self.nodes[0].blocks_path\r\n             backup_path = blocks_path.with_suffix(\".bkp\")\r\n             blocks_path.rename(backup_path)\r\n-            try:\r\n-                self.test_rest_request(f\"/block/{blockhash}\", status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n-                self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n-            finally:\r\n-                backup_path.rename(blocks_path)\r\n+            self.test_rest_request(f\"/block/{blockhash}\", status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n+            self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n+            backup_path.rename(blocks_path)\r\n \r\n         self.log.info(\"Test the /deploymentinfo URI\")\r\n \r\n```",
      "created_at": "2025-12-11T08:30:42Z",
      "updated_at": "2025-12-11T08:34:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2609654918",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2609654918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610003251",
      "pull_request_review_id": 3566711730,
      "id": 2610003251,
      "node_id": "PRRC_kwDOABII586bkX0z",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_REQUIRE(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());\n+    expect_part(0, block->size() - 1);\n+    expect_part(0, block->size() - 10);\n+    expect_part(0, 20);\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(block->size() - 1, 1);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part_error{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(!res);",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 46,
      "original_position": 49,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2607453751,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "(Others seem to disagree with me here though: https://github.com/bitcoin/bitcoin/pull/34032#discussion_r2609913103).",
      "created_at": "2025-12-11T10:16:17Z",
      "updated_at": "2025-12-11T10:16:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610003251",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610003251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610060424",
      "pull_request_review_id": 3566778739,
      "id": 2610060424,
      "node_id": "PRRC_kwDOABII586bklyI",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_REQUIRE(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());\n+    expect_part(0, block->size() - 1);\n+    expect_part(0, block->size() - 10);\n+    expect_part(0, 20);\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(block->size() - 1, 1);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part_error, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part_error{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(!res);",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 46,
      "original_position": 49,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2607453751,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I asked the two to be unified, both are fine here",
      "created_at": "2025-12-11T10:34:02Z",
      "updated_at": "2025-12-11T10:34:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610060424",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610060424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 183,
      "original_line": 183,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610071673",
      "pull_request_review_id": 3566792147,
      "id": 2610071673,
      "node_id": "PRRC_kwDOABII586bkoh5",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I don't really like this Windows distinction - can we rather find a way that does work on all platforms? Haven't checked, is it only triggered when the file is missing, or can a truncated file also trigger the error?",
      "created_at": "2025-12-11T10:37:37Z",
      "updated_at": "2025-12-11T10:37:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610071673",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610071673"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610108777",
      "pull_request_review_id": 3566837092,
      "id": 2610108777,
      "node_id": "PRRC_kwDOABII586bkxlp",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Yeah, finding a solution that works on all platforms would be even better. Don't think it's a case of the file missing, but rather that Windows forbids renaming parent directories when a process holds a file handle to a file.\r\n\r\nMaybe we could rename files inside of the directory matching `blk*.dat` to `blk*.dat.bkp`? Haven't tested yet.",
      "created_at": "2025-12-11T10:49:24Z",
      "updated_at": "2025-12-11T10:49:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610108777",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610108777"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610543103",
      "pull_request_review_id": 3567387390,
      "id": 2610543103,
      "node_id": "PRRC_kwDOABII586bmbn_",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This might do it - an earlier version of it passed Windows CI (https://github.com/hodlinator/bitcoin/actions/runs/20131062861):\r\n```diff\r\n--- a/test/functional/interface_rest.py\r\n+++ b/test/functional/interface_rest.py\r\n@@ -7,9 +7,11 @@\r\n from decimal import Decimal\r\n from enum import Enum\r\n from io import BytesIO\r\n+from pathlib import Path\r\n import http.client\r\n import json\r\n-import platform\r\n+import os\r\n+import re\r\n import typing\r\n import urllib.parse\r\n \r\n@@ -496,15 +498,14 @@ class RESTTest (BitcoinTestFramework):\r\n         self.test_rest_request(f\"/block/{blockhash}\", status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n         self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n         # Missing block data should cause REST API to fail\r\n-        if platform.system() != \"Windows\":\r\n-            blocks_path = self.nodes[0].blocks_path\r\n-            backup_path = blocks_path.with_suffix(\".bkp\")\r\n-            blocks_path.rename(backup_path)\r\n-            try:\r\n-                self.test_rest_request(f\"/block/{blockhash}\", status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n-                self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n-            finally:\r\n-                backup_path.rename(blocks_path)\r\n+        for f in os.scandir(self.nodes[0].blocks_path):\r\n+            if re.match(r\"blk.*\\.dat\", f.name):\r\n+                Path(f.path).rename(f\"{f.path}.bkp\")\r\n+        self.test_rest_request(f\"/block/{blockhash}\", status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n+        self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=500, req_type=ReqType.BIN, ret_type=RetType.OBJ)\r\n+        for f in os.scandir(self.nodes[0].blocks_path):\r\n+            if re.match(r\"blk.*\\.dat\\.bkp\", f.name):\r\n+                Path(f.path).rename(f\"{f.path[:-4]}\")\r\n \r\n         self.log.info(\"Test the /deploymentinfo URI\")\r\n```\r\nCI in progress: https://github.com/hodlinator/bitcoin/actions/runs/20134156831",
      "created_at": "2025-12-11T13:14:01Z",
      "updated_at": "2025-12-11T13:14:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610543103",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610543103"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610601314",
      "pull_request_review_id": 3567464974,
      "id": 2610601314,
      "node_id": "PRRC_kwDOABII586bmp1i",
      "diff_hunk": "@@ -302,6 +306,7 @@ class BlockManager\n \n public:\n     using Options = kernel::BlockManagerOpts;\n+    using ReadRawBlockResult = util::Expected<std::vector<std::byte>, ReadRawError>;",
      "path": "src/node/blockstorage.h",
      "position": 23,
      "original_position": 22,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "d2ffbb5985717f9b6348a7aab60fcad6e271a296",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in d2ffbb5985717f9b6348a7aab60fcad6e271a296: This is only used twice. Could remove it, or move it right above the function declaration  that needs it?",
      "created_at": "2025-12-11T13:31:09Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610601314",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610601314"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 310,
      "original_line": 310,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610645541",
      "pull_request_review_id": 3567464974,
      "id": 2610645541,
      "node_id": "PRRC_kwDOABII586bm0ol",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            assert(block_part);\n+            return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n        } // no default case, so the compiler can warn about missing cases\n```\n\nnit in the first commit: This is normally done, to explain the code. See `git grep 'no default'`.",
      "created_at": "2025-12-11T13:44:05Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610645541",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610645541"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610662400",
      "pull_request_review_id": 3567464974,
      "id": 2610662400,
      "node_id": "PRRC_kwDOABII586bm4wA",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 29,
      "original_position": 29,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in the first commit: This is not always an internal server error. It is rarely possible that this is due to a pruning race.\n\nNot sure if anything needs to change, though. Just wanted to leave the note.",
      "created_at": "2025-12-11T13:49:04Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610662400",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610662400"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 429,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610702117",
      "pull_request_review_id": 3567464974,
      "id": 2610702117,
      "node_id": "PRRC_kwDOABII586bnCcl",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in the first commit: i am pretty sure this is wrong and creates a copy now, when previously it did not.\n\nRef: https://godbolt.org/z/GT7sdYWxM (see the `const`)",
      "created_at": "2025-12-11T14:00:24Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610702117",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610702117"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610832092",
      "pull_request_review_id": 3567464974,
      "id": 2610832092,
      "node_id": "PRRC_kwDOABII586bniLc",
      "diff_hunk": "@@ -1072,23 +1072,31 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n+        }\n+\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {",
      "path": "src/node/blockstorage.cpp",
      "position": 76,
      "original_position": 58,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\n            if (size == 0 || SaturatingAdd(offset, size) > blk_size) {\n```\n\nnit in the second commit: Could use a single saturating add and a single `>` compare?",
      "created_at": "2025-12-11T14:35:09Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610832092",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610832092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1086,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610834748",
      "pull_request_review_id": 3567464974,
      "id": 2610834748,
      "node_id": "PRRC_kwDOABII586bni08",
      "diff_hunk": "@@ -1072,23 +1072,31 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n+        }\n+\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {",
      "path": "src/node/blockstorage.cpp",
      "position": 76,
      "original_position": 58,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610832092,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Also seems fine to allow zero-size?",
      "created_at": "2025-12-11T14:35:50Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610834748",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610834748"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1086,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610869879",
      "pull_request_review_id": 3567464974,
      "id": 2610869879,
      "node_id": "PRRC_kwDOABII586bnrZ3",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "3a24113dea228b1bbe14d02c6cab2579d49231fb",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in 3a24113dea228b1bbe14d02c6cab2579d49231fb:\n\nCould use `LOCK(chainman.GetMutex())` instead for new code? (same below)",
      "created_at": "2025-12-11T14:45:24Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610869879",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610869879"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 143,
      "original_start_line": 143,
      "start_side": "RIGHT",
      "line": 144,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610892498",
      "pull_request_review_id": 3567464974,
      "id": 2610892498,
      "node_id": "PRRC_kwDOABII586bnw7S",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "3a24113dea228b1bbe14d02c6cab2579d49231fb",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Some of these are duplicates?",
      "created_at": "2025-12-11T14:51:00Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610892498",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610892498"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610898120",
      "pull_request_review_id": 3567464974,
      "id": 2610898120,
      "node_id": "PRRC_kwDOABII586bnyTI",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "3a24113dea228b1bbe14d02c6cab2579d49231fb",
      "in_reply_to_id": 2610869879,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Could also merge the two tests into one, to avoid the boilerplate in the beginning. ",
      "created_at": "2025-12-11T14:52:24Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610898120",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610898120"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 143,
      "original_start_line": 143,
      "start_side": "RIGHT",
      "line": 144,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610966599",
      "pull_request_review_id": 3567464974,
      "id": 2610966599,
      "node_id": "PRRC_kwDOABII586boDBH",
      "diff_hunk": "@@ -455,6 +458,53 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def _get_block_part(status: int = 200, **kwargs):",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 53,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in the last commit: What does the `_` mean here? Could drop it?",
      "created_at": "2025-12-11T15:10:15Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2610966599",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2610966599"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 465,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611161028",
      "pull_request_review_id": 3568174784,
      "id": 2611161028,
      "node_id": "PRRC_kwDOABII586boyfE",
      "diff_hunk": "",
      "path": "src/bench/readwriteblock.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "262f4dfe691b12171a31c9219ba33f1fe55f67a7",
      "in_reply_to_id": 2597756415,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Updated the commit message in f195f46a996b9803d26865cdcef185806c22a723.",
      "created_at": "2025-12-11T16:01:34Z",
      "updated_at": "2025-12-11T16:01:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611161028",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611161028"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611169064",
      "pull_request_review_id": 3568185368,
      "id": 2611169064,
      "node_id": "PRRC_kwDOABII586bo0co",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed using `Path.glob()` in https://github.com/romanz/bitcoin/blob/6e71622d8526ec682375479ecabc6426409410f2/test/functional/interface_rest.py#L499-L505",
      "created_at": "2025-12-11T16:03:38Z",
      "updated_at": "2025-12-11T16:03:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611169064",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611169064"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611170486",
      "pull_request_review_id": 3568187260,
      "id": 2611170486,
      "node_id": "PRRC_kwDOABII586bo0y2",
      "diff_hunk": "@@ -9,6 +9,7 @@\n from io import BytesIO\n import http.client\n import json\n+import platform",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "6e71622d8526ec682375479ecabc6426409410f2",
      "original_commit_id": "6e71622d8526ec682375479ecabc6426409410f2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: this isn't needed anymore",
      "created_at": "2025-12-11T16:03:58Z",
      "updated_at": "2025-12-11T16:04:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611170486",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611170486"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611181217",
      "pull_request_review_id": 3568200543,
      "id": 2611181217,
      "node_id": "PRRC_kwDOABII586bo3ah",
      "diff_hunk": "@@ -9,6 +9,7 @@\n from io import BytesIO\n import http.client\n import json\n+import platform",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 4,
      "commit_id": "6e71622d8526ec682375479ecabc6426409410f2",
      "original_commit_id": "6e71622d8526ec682375479ecabc6426409410f2",
      "in_reply_to_id": 2611170486,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks - fixed in 389eafc631733c1ac2890e1b012a94f66a31ccad.",
      "created_at": "2025-12-11T16:06:12Z",
      "updated_at": "2025-12-11T16:06:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611181217",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611181217"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611191457",
      "pull_request_review_id": 3567464974,
      "id": 2611191457,
      "node_id": "PRRC_kwDOABII586bo56h",
      "diff_hunk": "@@ -455,6 +457,51 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def _get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)\n+                assert isinstance(resp, bytes)\n+                if req_type is ReqType.HEX and status == 200:\n+                    resp = bytes.fromhex(resp.decode().strip())\n+                return resp\n+\n+            assert_equal(block_bin, _get_block_part(query_params={\"offset\": 0, \"size\": len(block_bin)}))\n+\n+            assert len(block_bin) >= 500\n+            assert_equal(block_bin[20:320], _get_block_part(query_params={\"offset\": 20, \"size\": 300}))\n+            assert_equal(block_bin[-5:], _get_block_part(query_params={\"offset\": len(block_bin) - 5, \"size\": 5}))\n+\n+            _get_block_part(status=400, query_params={\"offset\": 10})\n+            _get_block_part(status=400, query_params={\"size\": 100})\n+            _get_block_part(status=400, query_params={\"offset\": \"x\"})\n+            _get_block_part(status=400, query_params={\"size\": \"y\"})\n+            _get_block_part(status=400, query_params={\"offset\": \"x\", \"size\": \"y\"})\n+            assert _get_block_part(status=400, query_params=\"%XY\").decode(\"utf-8\").startswith(\"URI parsing failed\")\n+\n+            _get_block_part(status=400, query_params={\"offset\": 0, \"size\": 0})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin), \"size\": 0})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin) + 1, \"size\": 1})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin), \"size\": 1})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin) + 1, \"size\": 1})\n+            _get_block_part(status=400, query_params={\"offset\": 0, \"size\": len(block_bin) + 1})\n+\n+        self.test_rest_request(f\"/blockpart/{blockhash}\", status=400, req_type=ReqType.JSON, ret_type=RetType.OBJ)\n+\n+        self.test_rest_request(f\"/block/{blockhash}\", status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\n+        self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\n+        # Missing block data should cause REST API to fail",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 77,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit in the last commit: I didn't understand that this is a new test case. Could add a `self.log.info(\"Missing block data should cause REST API to fail\")`?",
      "created_at": "2025-12-11T16:08:14Z",
      "updated_at": "2025-12-11T16:09:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611191457",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611191457"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 494,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 497,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611264906",
      "pull_request_review_id": 3568301981,
      "id": 2611264906,
      "node_id": "PRRC_kwDOABII586bpL2K",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_NOT_FOUND, \"I/O error reading \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 29,
      "commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "original_commit_id": "8b417087aec4671a1ce58f2331d1688e665d9935",
      "in_reply_to_id": 2608002092,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Slick! :pinched_fingers: ",
      "created_at": "2025-12-11T16:28:47Z",
      "updated_at": "2025-12-11T16:58:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611264906",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611264906"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 429,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611285589",
      "pull_request_review_id": 3568328180,
      "id": 2611285589,
      "node_id": "PRRC_kwDOABII586bpQ5V",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610702117,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "See https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2603066114",
      "created_at": "2025-12-11T16:35:04Z",
      "updated_at": "2025-12-11T16:35:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611285589",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611285589"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611288723",
      "pull_request_review_id": 3568331640,
      "id": 2611288723,
      "node_id": "PRRC_kwDOABII586bpRqT",
      "diff_hunk": "@@ -1072,23 +1072,31 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n+        }\n+\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {",
      "path": "src/node/blockstorage.cpp",
      "position": 76,
      "original_position": 58,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610832092,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "what would be the advantage of zero size?",
      "created_at": "2025-12-11T16:35:59Z",
      "updated_at": "2025-12-11T16:35:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611288723",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611288723"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1086,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611291862",
      "pull_request_review_id": 3568335380,
      "id": 2611291862,
      "node_id": "PRRC_kwDOABII586bpSbW",
      "diff_hunk": "@@ -302,6 +306,7 @@ class BlockManager\n \n public:\n     using Options = kernel::BlockManagerOpts;\n+    using ReadRawBlockResult = util::Expected<std::vector<std::byte>, ReadRawError>;",
      "path": "src/node/blockstorage.h",
      "position": 23,
      "original_position": 22,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "d2ffbb5985717f9b6348a7aab60fcad6e271a296",
      "in_reply_to_id": 2610601314,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "it's a mouthful, I personally would prefer keeping it as it is",
      "created_at": "2025-12-11T16:36:59Z",
      "updated_at": "2025-12-11T16:37:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611291862",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611291862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 310,
      "original_line": 310,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611332441",
      "pull_request_review_id": 3568301981,
      "id": 2611332441,
      "node_id": "PRRC_kwDOABII586bpcVZ",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610702117,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Good point about the copy. If I keep the `const` and add `return std::move(*data)` at the end my LSP complains about it having no effect. (My build setup does not). Not sure if removing the `const` but adding the explicit move would help.",
      "created_at": "2025-12-11T16:49:49Z",
      "updated_at": "2025-12-11T16:58:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611332441",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611332441"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611367256",
      "pull_request_review_id": 3568423414,
      "id": 2611367256,
      "node_id": "PRRC_kwDOABII586bpk1Y",
      "diff_hunk": "@@ -172,6 +172,7 @@ std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\n \n enum class ReadRawError {\n     IO,\n+    BadPartRange,",
      "path": "src/node/blockstorage.h",
      "position": 14,
      "original_position": 4,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "in_reply_to_id": 2604616574,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> \r\n> @sedited, are you sure still we need the `assert(false)` hack, it seems `-Wswitch` already warns:\r\n\r\nYes, the `assert(false)` is needed, even if the compiler can warn about missing enum class cases. this is, because even with an enum class, there could be unhandled cases. This is not forbidden by the language. So the switch may fall through and lead to UB or unexpected behavior. Generally, we prefer assert(false) over UB",
      "created_at": "2025-12-11T17:00:54Z",
      "updated_at": "2025-12-11T17:00:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611367256",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611367256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611394282",
      "pull_request_review_id": 3568456926,
      "id": 2611394282,
      "node_id": "PRRC_kwDOABII586bprbq",
      "diff_hunk": "@@ -1072,23 +1072,31 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n+        }\n+\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {",
      "path": "src/node/blockstorage.cpp",
      "position": 76,
      "original_position": 58,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610832092,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> what would be the advantage of zero size?\r\n\r\nidk. It is generally valid to read zero bytes:\r\n\r\n```\r\nwith open(\"example.txt\", \"rb\") as f:\r\n    data = f.read(0)\r\n    print(data)   # prints: b''\r\n```\r\n\r\ni don't mind either way. I just wanted to mention it, because some non-ideal hacky script may read blocks in ranges and read the last range, even if it is of zero size. yes, the script should be adjusted, but I don't see the harm in allowing it. In any case, just a nit and not important at all.",
      "created_at": "2025-12-11T17:09:59Z",
      "updated_at": "2025-12-11T17:09:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611394282",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611394282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1086,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611396410",
      "pull_request_review_id": 3568459369,
      "id": 2611396410,
      "node_id": "PRRC_kwDOABII586bpr86",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610702117,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "How can you move out of `data` if it is `const` though? The `const` needs to be removed. I like the approach suggested by @romanz to inline it in the previous discussion.",
      "created_at": "2025-12-11T17:10:41Z",
      "updated_at": "2025-12-11T17:10:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611396410",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611396410"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611412135",
      "pull_request_review_id": 3568480031,
      "id": 2611412135,
      "node_id": "PRRC_kwDOABII586bpvyn",
      "diff_hunk": "@@ -172,6 +172,7 @@ std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\n \n enum class ReadRawError {\n     IO,\n+    BadPartRange,",
      "path": "src/node/blockstorage.h",
      "position": 14,
      "original_position": 4,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "in_reply_to_id": 2604616574,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "So the -Wswitch wouldn't catch them? I have checked multiple and they all failed the build if I left out any enum value ",
      "created_at": "2025-12-11T17:16:14Z",
      "updated_at": "2025-12-11T17:16:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611412135",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611412135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611448233",
      "pull_request_review_id": 3568524883,
      "id": 2611448233,
      "node_id": "PRRC_kwDOABII586bp4mp",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610702117,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "\r\n\r\n\r\n\r\n> Good point about the copy. If I keep the `const` and add `return std::move(*data)` at the end my LSP complains about it having no effect. (My build setup does not). Not sure if removing the `const` but adding the explicit move would help.\r\n\r\nIf the `const` is kept, the `std::move` will hopefully fail clang-tidy in the CI.\r\n\r\nThe const needs to be removed and an `std::move` will need to be added. This is what I was trying to show with the godbolt, but maybe it wasn't clear.",
      "created_at": "2025-12-11T17:25:55Z",
      "updated_at": "2025-12-11T17:25:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611448233",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611448233"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611463509",
      "pull_request_review_id": 3568543313,
      "id": 2611463509,
      "node_id": "PRRC_kwDOABII586bp8VV",
      "diff_hunk": "@@ -172,6 +172,7 @@ std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\n \n enum class ReadRawError {\n     IO,\n+    BadPartRange,",
      "path": "src/node/blockstorage.h",
      "position": 14,
      "original_position": 4,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "in_reply_to_id": 2604616574,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> So the -Wswitch wouldn't catch them? I have checked multiple and they all failed the build if I left out any enum value\r\n\r\nNo. See https://godbolt.org/z/6zGqrcnax\r\n\r\n```cpp\r\n#include <iostream>\r\n\r\nenum class Color : uint8_t { Red, Green, Blue };\r\n\r\nint to_int(Color c) {\r\n    switch (c) {\r\n        case Color::Red:\r\n            return 1;\r\n        case Color::Green:\r\n            return 2;\r\n        case Color::Blue:\r\n            return 3;\r\n    }\r\n    return -1; // this should never happen?\r\n}\r\n\r\nint main() {\r\n    Color c = static_cast<Color>(7);\r\n    std::cout << to_int(c) << \"\\n\";\r\n}",
      "created_at": "2025-12-11T17:31:13Z",
      "updated_at": "2025-12-11T17:31:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611463509",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611463509"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611552247",
      "pull_request_review_id": 3568657894,
      "id": 2611552247,
      "node_id": "PRRC_kwDOABII586bqR_3",
      "diff_hunk": "@@ -455,6 +457,51 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def _get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)\n+                assert isinstance(resp, bytes)\n+                if req_type is ReqType.HEX and status == 200:\n+                    resp = bytes.fromhex(resp.decode().strip())\n+                return resp\n+\n+            assert_equal(block_bin, _get_block_part(query_params={\"offset\": 0, \"size\": len(block_bin)}))\n+\n+            assert len(block_bin) >= 500\n+            assert_equal(block_bin[20:320], _get_block_part(query_params={\"offset\": 20, \"size\": 300}))\n+            assert_equal(block_bin[-5:], _get_block_part(query_params={\"offset\": len(block_bin) - 5, \"size\": 5}))\n+\n+            _get_block_part(status=400, query_params={\"offset\": 10})\n+            _get_block_part(status=400, query_params={\"size\": 100})\n+            _get_block_part(status=400, query_params={\"offset\": \"x\"})\n+            _get_block_part(status=400, query_params={\"size\": \"y\"})\n+            _get_block_part(status=400, query_params={\"offset\": \"x\", \"size\": \"y\"})\n+            assert _get_block_part(status=400, query_params=\"%XY\").decode(\"utf-8\").startswith(\"URI parsing failed\")\n+\n+            _get_block_part(status=400, query_params={\"offset\": 0, \"size\": 0})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin), \"size\": 0})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin) + 1, \"size\": 1})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin), \"size\": 1})\n+            _get_block_part(status=400, query_params={\"offset\": len(block_bin) + 1, \"size\": 1})\n+            _get_block_part(status=400, query_params={\"offset\": 0, \"size\": len(block_bin) + 1})\n+\n+        self.test_rest_request(f\"/blockpart/{blockhash}\", status=400, req_type=ReqType.JSON, ret_type=RetType.OBJ)\n+\n+        self.test_rest_request(f\"/block/{blockhash}\", status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\n+        self.test_rest_request(f\"/blockpart/{blockhash}\", query_params={\"offset\": 0, \"size\": 1}, status=200, req_type=ReqType.BIN, ret_type=RetType.OBJ)\n+        # Missing block data should cause REST API to fail",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 77,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "in_reply_to_id": 2611191457,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added in e4f460bbe44ba11e3997da80daf39cbb2515fefc",
      "created_at": "2025-12-11T17:59:22Z",
      "updated_at": "2025-12-11T17:59:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611552247",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611552247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": 494,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 497,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611552484",
      "pull_request_review_id": 3568658228,
      "id": 2611552484,
      "node_id": "PRRC_kwDOABII586bqSDk",
      "diff_hunk": "@@ -455,6 +458,53 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def _get_block_part(status: int = 200, **kwargs):",
      "path": "test/functional/interface_rest.py",
      "position": 1,
      "original_position": 53,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610966599,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Dropped in e4f460bbe44ba11e3997da80daf39cbb2515fefc",
      "created_at": "2025-12-11T17:59:28Z",
      "updated_at": "2025-12-11T17:59:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611552484",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611552484"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 465,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611553805",
      "pull_request_review_id": 3568660148,
      "id": 2611553805,
      "node_id": "PRRC_kwDOABII586bqSYN",
      "diff_hunk": "@@ -138,6 +138,71 @@ BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_availability, TestChain100Setup)\n     BOOST_CHECK(!blockman.CheckBlockDataAvailability(tip, *last_pruned_block));\n }\n \n+BOOST_FIXTURE_TEST_CASE(blockmanager_block_data_part, TestChain100Setup)\n+{\n+    LOCK(::cs_main);\n+    auto& chainman{m_node.chainman};\n+    auto& blockman{chainman->m_blockman};\n+    const CBlockIndex& tip{*chainman->ActiveTip()};\n+    const FlatFilePos tip_block_pos{tip.GetBlockPos()};\n+\n+    auto block{blockman.ReadRawBlock(tip_block_pos)};\n+    BOOST_REQUIRE(block);\n+    BOOST_REQUIRE_GE(block->size(), 200);\n+\n+    const auto expect_part{[&](size_t offset, size_t size) {\n+        auto res{blockman.ReadRawBlock(tip_block_pos, std::pair{offset, size})};\n+        BOOST_CHECK(res);\n+        const auto& part{res.value()};\n+        BOOST_CHECK_EQUAL_COLLECTIONS(part.begin(), part.end(), block->begin() + offset, block->begin() + offset + size);\n+    }};\n+\n+    expect_part(0, block->size());\n+    expect_part(1, block->size() - 1);\n+    expect_part(10, 20);\n+    expect_part(0, block->size());",
      "path": "src/test/blockmanager_tests.cpp",
      "position": 1,
      "original_position": 26,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "3a24113dea228b1bbe14d02c6cab2579d49231fb",
      "in_reply_to_id": 2610892498,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Deduplicated tests in 4e2af1c06547230b9245d94e7bcb1129f2c49714",
      "created_at": "2025-12-11T17:59:55Z",
      "updated_at": "2025-12-11T17:59:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611553805",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611553805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611555519",
      "pull_request_review_id": 3568662246,
      "id": 2611555519,
      "node_id": "PRRC_kwDOABII586bqSy_",
      "diff_hunk": "@@ -680,21 +680,17 @@ static CBlock GetBlockChecked(BlockManager& blockman, const CBlockIndex& blockin\n \n static std::vector<std::byte> GetRawBlockChecked(BlockManager& blockman, const CBlockIndex& blockindex)\n {\n-    std::vector<std::byte> data{};\n     FlatFilePos pos{};\n     {\n         LOCK(cs_main);\n         CheckBlockDataAvailability(blockman, blockindex, /*check_for_undo=*/false);\n         pos = blockindex.GetBlockPos();\n     }\n \n-    if (!blockman.ReadRawBlock(data, pos)) {\n-        // Block not found on disk. This shouldn't normally happen unless the block was\n-        // pruned right after we released the lock above.\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n-    }\n-\n-    return data;\n+    if (const auto data{blockman.ReadRawBlock(pos)}) return *data;",
      "path": "src/rpc/blockchain.cpp",
      "position": 1,
      "original_position": 19,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610702117,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Changed in f2fd1aa21c7694cef393b4a13e472ae9d3fc54fc",
      "created_at": "2025-12-11T18:00:27Z",
      "updated_at": "2025-12-11T18:00:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611555519",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611555519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 690,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611558798",
      "pull_request_review_id": 3568666796,
      "id": 2611558798,
      "node_id": "PRRC_kwDOABII586bqTmO",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            assert(block_part);\n+            return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610645541,
      "user": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added in e4f460bbe44ba11e3997da80daf39cbb2515fefc",
      "created_at": "2025-12-11T18:01:31Z",
      "updated_at": "2025-12-11T18:01:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2611558798",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2611558798"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2614038938",
      "pull_request_review_id": 3571618055,
      "id": 2614038938,
      "node_id": "PRRC_kwDOABII586bzxGa",
      "diff_hunk": "@@ -416,34 +423,43 @@ static bool rest_block(const std::any& context,\n         pos = pblockindex->GetBlockPos();\n     }\n \n-    std::vector<std::byte> block_data{};\n-    if (!chainman.m_blockman.ReadRawBlock(block_data, pos)) {\n-        return RESTERR(req, HTTP_NOT_FOUND, hashStr + \" not found\");\n+    const auto block_data{chainman.m_blockman.ReadRawBlock(pos, block_part)};\n+    if (!block_data) {\n+        switch (block_data.error()) {\n+        case node::ReadRawError::IO: return RESTERR(req, HTTP_INTERNAL_SERVER_ERROR, \"I/O error reading \" + hashStr);\n+        case node::ReadRawError::BadPartRange:\n+            assert(block_part);\n+            return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Bad block part offset/size %d/%d for %s\", block_part->first, block_part->second, hashStr));\n+        }",
      "path": "src/rest.cpp",
      "position": 1,
      "original_position": 33,
      "commit_id": "389eafc631733c1ac2890e1b012a94f66a31ccad",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610645541,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "(meganit: Would add the comment in the first commit instead of the last if you re-touch).",
      "created_at": "2025-12-12T12:24:23Z",
      "updated_at": "2025-12-12T12:47:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2614038938",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2614038938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 433,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2614058989",
      "pull_request_review_id": 3571618055,
      "id": 2614058989,
      "node_id": "PRRC_kwDOABII586bz1_t",
      "diff_hunk": "@@ -1072,23 +1072,31 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n+        }\n+\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {",
      "path": "src/node/blockstorage.cpp",
      "position": 76,
      "original_position": 58,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610832092,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: Agree on reducing the number of direct conditions by using `SaturatingAdd` as sugggested at the beginning of the thread (passes current unit tests).\r\n\r\nNo strong opinion for/against disallowing 0-size ranges.",
      "created_at": "2025-12-12T12:31:59Z",
      "updated_at": "2025-12-12T12:47:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2614058989",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2614058989"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1086,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2614119273",
      "pull_request_review_id": 3571711265,
      "id": 2614119273,
      "node_id": "PRRC_kwDOABII586b0Etp",
      "diff_hunk": "@@ -1072,23 +1072,31 @@ bool BlockManager::ReadRawBlock(std::vector<std::byte>& block, const FlatFilePos\n         if (blk_start != GetParams().MessageStart()) {\n             LogError(\"Block magic mismatch for %s: %s versus expected %s while reading raw block\",\n                 pos.ToString(), HexStr(blk_start), HexStr(GetParams().MessageStart()));\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n         }\n \n         if (blk_size > MAX_SIZE) {\n             LogError(\"Block data is larger than maximum deserialization size for %s: %s versus %s while reading raw block\",\n                 pos.ToString(), blk_size, MAX_SIZE);\n-            return false;\n+            return util::Unexpected{ReadRawError::IO};\n+        }\n+\n+        if (block_part) {\n+            const auto [offset, size]{*block_part};\n+            if (size == 0 || offset >= blk_size || size > blk_size - offset) {",
      "path": "src/node/blockstorage.cpp",
      "position": 76,
      "original_position": 58,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "9f8809f2b1206ad34dfc68831c10db76e618de3f",
      "in_reply_to_id": 2610832092,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> nit: Agree on reducing the number of direct conditions by using `SaturatingAdd` as sugggested at the beginning of the thread (passes current unit tests).\r\n> \r\n\r\n\r\nLet's leave the nits for a follow-up? The thread has more than 250 comments, and at least on my end, I am having difficulties loading, reading, and writing new comments, due to GitHub slowness or brittleness. \r\n\r\n",
      "created_at": "2025-12-12T12:54:27Z",
      "updated_at": "2025-12-12T12:54:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2614119273",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2614119273"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1086,
      "original_line": 1086,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620533888",
      "pull_request_review_id": 3579735099,
      "id": 2620533888,
      "node_id": "PRRC_kwDOABII586cMiyA",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Just want to note that I saw CI failures here on windows after this was merged where the request for `/block/` on line 463 seemed to succeed, but the `/blockpart/` request immediately following it returned a 404 on line 466 (this line). Unfortunately the only error information was `Expected: 200, Got: 404 - Response: b''` because line 87 above is only printing `resp.status` not `resp.reason`, so cause of the 404 is not clear.\r\n\r\nThe failures happened in 4 different runs:\r\n\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20166531437/job/57892614796?pr=10102#step:13:3933\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20166531437/job/57892614796?pr=10102#step:13:3933\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20166532530/job/57895147947?pr=19460#step:13:3913\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20166532530/job/57895147999?pr=19460#step:13:3917\r\n\r\nAnd the logs look exactly the same exactly the same except for the blockhashes:\r\n\r\n```python\r\ntest  TestFramework (INFO): Test the /blockpart URI \r\nnode0 [http] [httpserver.cpp:307] [http] Received a POST request for / from 127.0.0.1:56381 \r\nnode0 [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=getbestblockhash user=__cookie__ \r\ntest  TestFramework (DEBUG): GET /rest/block/7bb6d8cde00d88f6a4342f0273a5981d2fdf4d397b35954e22c015fc55e19b7b.bin \r\nnode0 [http] [httpserver.cpp:307] [http] Received a GET request for /rest/block/7bb6d8cde00d88f6a4342f0273a5981d2fdf4d397b35954e22c015fc55e19b7b.bin from 127.0.0.1:57139 \r\ntest  TestFramework (DEBUG): GET /rest/blockpart/7bb6d8cde00d88f6a4342f0273a5981d2fdf4d397b35954e22c015fc55e19b7b.bin?offset=0&size=652 \r\nnode0 [http] [httpserver.cpp:307] [http] Received a GET request for /rest/blockpart/7bb6d8cde00d88f6a4342f0273a5981d2fdf4d397b35954e22c015fc55e19b7b.bin?offset=0&size=6 from 127.0.0.1:57140 \r\ntest  TestFramework (ERROR): Unexpected exception \r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\r\n    self.run_test()\r\n    ~~~~~~~~~~~~~^^\r\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/interface_rest.py\", line 473, in run_test\r\n    assert_equal(block_bin, get_block_part(query_params={\"offset\": 0, \"size\": len(block_bin)}))\r\n                            ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/interface_rest.py\", line 466, in get_block_part\r\n    resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\r\n                                  req_type=req_type, ret_type=RetType.BYTES, **kwargs)\r\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/interface_rest.py\", line 87, in test_rest_request\r\n    assert resp.status == status, f\"Expected: {status}, Got: {resp.status} - Response: {str(resp.read())}\"\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: Expected: 200, Got: 404 - Response: b''\r\n```\r\n\r\nOne thing that is weird here about the logs is the failing request shows up as `?offset=0&size=652` in the test logs but `?offset=0&size=6` in the node logs, where `652` is somehow truncated to `6`. I don't think the truncation explains the error, because it doesn't look like there is a way for an incorrect size to trigger a 404, but the problems may be related.\r\n\r\nAlso, even though the same failure happened in the two PR's above, it did NOT happen in a third PR based on the other two (#19461) and pushed at the same time, which suggests the failure might happen randomly. I also don't think there's any code changes in any of the PR that would be related to this test or should change its behavior.\r\n\r\nNot sure if this report is actionable, but wanted to say:\r\n\r\n- If anyone has any idea what might cause these type of failures on windows CI, that would be helpful.\r\n- It would be nice if the `assert resp.status == status` error included `resp.reason`, since knowing the message associated with the status would probably be helpful for debugging.",
      "created_at": "2025-12-15T19:14:41Z",
      "updated_at": "2025-12-15T19:16:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620533888",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620533888"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620569375",
      "pull_request_review_id": 3579789893,
      "id": 2620569375,
      "node_id": "PRRC_kwDOABII586cMrcf",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> where `652` is somehow truncated to `6`\r\n\r\nActually this appears to be normal because requests are truncated at 100 characters and `6` is the last character that fits https://github.com/bitcoin/bitcoin/blob/41bf8f2d5eceaac72b98c1791f5fc368b3af90cb/src/httpserver.cpp#L308",
      "created_at": "2025-12-15T19:26:46Z",
      "updated_at": "2025-12-15T19:26:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620569375",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620569375"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620576777",
      "pull_request_review_id": 3579799384,
      "id": 2620576777,
      "node_id": "PRRC_kwDOABII586cMtQJ",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I also wonder if there may be a CI bug causing this, where windows jobs were using old `bitcoind` binaries that did not have the `/blockpart/` endpoint defined so it returned a 404?",
      "created_at": "2025-12-15T19:28:55Z",
      "updated_at": "2025-12-15T19:28:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620576777",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620576777"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620643470",
      "pull_request_review_id": 3579891730,
      "id": 2620643470,
      "node_id": "PRRC_kwDOABII586cM9iO",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Not sure I understand what's going on, but can we assume that it will happen again if it's a real problem (and not just some commit order mixup or whatever)?\r\n\r\ndoing a\r\n```bash\r\ncurl 'https://productionresultssa2.blob.core.windows.net/actions-results/b958a1af-d4e2-49e6-9411-5feedc7e3f3a/workflow-job-run-1192ebfe-48b0-5433-a77e-092eca6802f2/logs/job/job-logs.txt?rsct=text%2Fplain&se=2025-12-15T19%3A49%3A59Z&sig=LJxVtw7oMg%2Byssj%2FbCpdhXU3T3PfIVYuOxqJwuu2FyE%3D&ske=2025-12-16T06%3A42%3A59Z&skoid=ca7593d4-ee42-46cd-af88-8b886a2f84eb&sks=b&skt=2025-12-15T18%3A42%3A59Z&sktid=398a6654-997b-47e9-b12b-9515b896b4de&skv=2025-11-05&sp=r&spr=https&sr=b&st=2025-12-15T19%3A39%3A54Z&sv=2025-11-05' | grep 'Registering HTTP handler for /rest/block'\r\n```\r\nshows no `Registering HTTP handler for /rest/blockpart/` for `https://github.com/bitcoin/bitcoin/actions/runs/20166531437/job/57892614796?pr=10102#step:13:3933`:\r\n```\r\n2025-12-12T14:35:29.4245912Z  node0 2025-12-12T14:35:23.889620Z [init] [httpserver.cpp:761] [void RegisterHTTPHandler(const std::string&, bool, const HTTPRequestHandler&)] [http] Registering HTTP handler for /rest/block/notxdetails/ (exactmatch 0) \r\n2025-12-12T14:35:29.4248088Z  node0 2025-12-12T14:35:23.889630Z [init] [httpserver.cpp:761] [void RegisterHTTPHandler(const std::string&, bool, const HTTPRequestHandler&)] [http] Registering HTTP handler for /rest/block/ (exactmatch 0) \r\n2025-12-12T14:35:29.4249218Z  node0 2025-12-12T14:35:23.889640Z [init] [httpserver.cpp:761] [void RegisterHTTPHandler(const std::string&, bool, const HTTPRequestHandler&)] [http] Registering HTTP handler for /rest/blockfilter/ (exactmatch 0) \r\n2025-12-12T14:35:29.4250381Z  node0 2025-12-12T14:35:23.889650Z [init] [httpserver.cpp:761] [void RegisterHTTPHandler(const std::string&, bool, const HTTPRequestHandler&)] [http] Registering HTTP handler for /rest/blockfilterheaders/ (exactmatch 0) \r\n2025-12-12T14:35:29.4259046Z  node0 2025-12-12T14:35:23.889720Z [init] [httpserver.cpp:761] [void RegisterHTTPHandler(const std::string&, bool, const HTTPRequestHandler&)] [http] Registering HTTP handler for /rest/blockhashbyheight/ (exactmatch 0) \r\n```\r\nso a 404 is indeed expected.\r\n\r\nAlso, the build seems to be for [GITHUB_SHA: 369ecaca0e89f90647edc41faa73b84ca31eebfa](https://github.com/bitcoin/bitcoin/commit/369ecaca0e89f90647edc41faa73b84ca31eebfa) which doesn't seem to contain this PR - why are we even running those test, is it an invalid checkout, some leftovers that we forgot to clean up?",
      "created_at": "2025-12-15T19:53:51Z",
      "updated_at": "2025-12-15T19:53:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620643470",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620643470"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620679556",
      "pull_request_review_id": 3579937492,
      "id": 2620679556,
      "node_id": "PRRC_kwDOABII586cNGWE",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620643470\r\n\r\n> shows no `Registering HTTP handler for /rest/blockpart/` for `https://github.com/bitcoin/bitcoin/actions/runs/20166531437/job/57892614796?pr=10102#step:13:3933`:\r\n\r\nNice, thanks! That seems like a clear indication that the CI job was running the new test with an old bitcoind binary.\r\n\r\n> Not sure I understand what's going on, but can we assume that it will happen again if it's a real problem (and not just some commit order mixup or whatever)?\r\n\r\nFrom what I can tell it seems like this is a real problem and it's probably fair to assume it will happen again at some point. But maybe it will happen rarely enough that it doesn't matter. It seems like I was just unlucky pushing my PR's around the same time that this PR was merged.\r\n\r\nI do think it would be good if windows CI jobs that do not build their own binaries could check whether the binaries came from the same commit being tested, and produce an explicit error or warning if they don't. (Or maybe they could just check out the same commit that the binaries came from.) No idea how difficult these things would be to implement, though",
      "created_at": "2025-12-15T20:06:15Z",
      "updated_at": "2025-12-15T20:06:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620679556",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620679556"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620685231",
      "pull_request_review_id": 3579944841,
      "id": 2620685231,
      "node_id": "PRRC_kwDOABII586cNHuv",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "is it possible that this was rather a leftover file in the build folder that wasn't properly reverted before checkout?",
      "created_at": "2025-12-15T20:08:39Z",
      "updated_at": "2025-12-15T20:08:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620685231",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620685231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620717677",
      "pull_request_review_id": 3579983907,
      "id": 2620717677,
      "node_id": "PRRC_kwDOABII586cNPpt",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620685231\r\n\r\n> is it possible that this was rather a leftover file in the build folder that wasn't properly reverted before checkout?\r\n\r\nI probably don't know enough about the CI system to answer this question, but I believe these CI jobs are not building anything, they are just using binaries built by other CI jobs, and apparently not requiring those binaries to come from the same commit. The jobs are defined here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/41bf8f2d5eceaac72b98c1791f5fc368b3af90cb/.github/workflows/ci.yml#L402-L403\r\n\r\nEDIT: Updated link above to point to windows-native-test job not windows-cross job",
      "created_at": "2025-12-15T20:21:57Z",
      "updated_at": "2025-12-15T20:26:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620717677",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620717677"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620800749",
      "pull_request_review_id": 3580095468,
      "id": 2620800749,
      "node_id": "PRRC_kwDOABII586cNj7t",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "@ryanofsky do you mean that even with\r\n```bash\r\nGITHUB_SHA: 369ecaca0e89f90647edc41faa73b84ca31eebfa\r\n```\r\nsince we're fetching by PR number:\r\n```\r\n\"C:\\Program Files\\Git\\bin\\git.exe\" checkout --progress --force refs/remotes/pull/10102/merge\r\n```\r\nwe might switch versions mid-run if they push?\r\n```\r\n2025-12-12T14:21:28.8214717Z HEAD is now at e3a830d Merge 3638b89090f539c360c5d4d358c4ed17db59c25e into 938d7aacabd0bb3784bb3e529b1ed06bb2891864\r\n```\r\nhttps://github.com/bitcoin/bitcoin/blob/d2a199bca73ba26838ebbaebd6f6e5857fe3d34f/.github/workflows/ci.yml#L153-L154\r\nshould `github.ref` be `GITHUB_SHA` - or maybe we should fail if the two don't coincide?",
      "created_at": "2025-12-15T20:47:43Z",
      "updated_at": "2025-12-15T20:47:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620800749",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620800749"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620839001",
      "pull_request_review_id": 3580141293,
      "id": 2620839001,
      "node_id": "PRRC_kwDOABII586cNtRZ",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think the issue is that we merge into different commits on the master branch:\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20166531437/job/57892614796?pr=10102#step:3:79\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/20166531437/job/57891206284?pr=10102#step:3:79",
      "created_at": "2025-12-15T21:02:54Z",
      "updated_at": "2025-12-15T21:02:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620839001",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620839001"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620856775",
      "pull_request_review_id": 3580162632,
      "id": 2620856775,
      "node_id": "PRRC_kwDOABII586cNxnH",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620800749\r\n\r\n> we might switch versions mid-run if they push?\r\n\r\nYes that seems like what happened. Test appears to be from e3a830d9d810b085eeb78e3e99c697508df52696 while binaries were built from 369ecaca0e89f90647edc41faa73b84ca31eebfa (GITHUB_SHA)\r\n\r\n> should `github.ref` be `GITHUB_SHA` - or maybe we should fail if the two don't coincide?\r\n\r\nIt does seem like using GITHUB_SHA would fix this, but might have other negative consequences. I don't know enough to know what the right fix should be, or if this is worth fixing. The problem seems easy enough to work around for now by pushing again (which I need to do anyway because the linter job failed).\r\n\r\n",
      "created_at": "2025-12-15T21:09:15Z",
      "updated_at": "2025-12-15T21:11:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2620856775",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2620856775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2622017534",
      "pull_request_review_id": 3581583225,
      "id": 2622017534,
      "node_id": "PRRC_kwDOABII586cSM_-",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "This was intentionally left as-is, but a clean fix would be to record the commit id and check out the exact commit id later in the second task. see https://github.com/bitcoin/bitcoin/pull/33303#discussion_r2391260220.",
      "created_at": "2025-12-16T06:47:20Z",
      "updated_at": "2025-12-16T06:47:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2622017534",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2622017534"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2622244233",
      "pull_request_review_id": 3581848409,
      "id": 2622244233,
      "node_id": "PRRC_kwDOABII586cTEWJ",
      "diff_hunk": "@@ -455,6 +457,52 @@ def run_test(self):\n                 expected = [(p[\"scriptPubKey\"], p[\"value\"]) for p in prevouts]\n                 assert_equal(expected, actual)\n \n+        self.log.info(\"Test the /blockpart URI\")\n+\n+        blockhash = self.nodes[0].getbestblockhash()\n+        block_bin = self.test_rest_request(f\"/block/{blockhash}\", req_type=ReqType.BIN, ret_type=RetType.BYTES)\n+        for req_type in (ReqType.BIN, ReqType.HEX):\n+            def get_block_part(status: int = 200, **kwargs):\n+                resp = self.test_rest_request(f\"/blockpart/{blockhash}\", status=status,\n+                                              req_type=req_type, ret_type=RetType.BYTES, **kwargs)",
      "path": "test/functional/interface_rest.py",
      "position": 47,
      "original_position": 47,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "in_reply_to_id": 2620533888,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Fixed in https://github.com/bitcoin/bitcoin/pull/34080",
      "created_at": "2025-12-16T08:11:53Z",
      "updated_at": "2025-12-16T08:11:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2622244233",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2622244233"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": 466,
      "original_start_line": 466,
      "start_side": "RIGHT",
      "line": 467,
      "original_line": 467,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2631926033",
      "pull_request_review_id": 3594073477,
      "id": 2631926033,
      "node_id": "PRRC_kwDOABII586c4AER",
      "diff_hunk": "@@ -172,6 +172,7 @@ std::ostream& operator<<(std::ostream& os, const BlockfileCursor& cursor);\n \n enum class ReadRawError {\n     IO,\n+    BadPartRange,",
      "path": "src/node/blockstorage.h",
      "position": 14,
      "original_position": 4,
      "commit_id": "07135290c1720a14c9d2f18a5700bb6565ae7a10",
      "original_commit_id": "0fa70db617a0f003422f66a0ef634b0af1bbd520",
      "in_reply_to_id": 2604616574,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thanks, I was under the wrong impression this was only the case with bare `enum`s - thanks for the example.",
      "created_at": "2025-12-18T17:21:54Z",
      "updated_at": "2025-12-18T17:21:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33657#discussion_r2631926033",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2631926033"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33657"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    }
  ]
}