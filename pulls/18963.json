{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963",
    "id": 416964752,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDE2OTY0NzUy",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18963",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/18963.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/18963.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/d6b1729e642e05738858772f8d2b334b8360b75e",
    "number": 18963,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[WIP] rebase: Call ProcessNewBlock() asynchronously",
    "user": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is a (currently naive) rebase of #16323, which is a rework of #16175, which is a rework of #12934.\r\nBuilt on top of #17479.\r\n\r\nCurrently `validationinterface_tests/unregister_all_during_call` fails.\r\n\r\n-----\r\n\r\nGoals:\r\n- [ ] Add as much documentation as possible to aid with review\r\n- [ ] Split up commits as much as possible to aid with review",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      },
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      },
      {
        "id": 749416508,
        "node_id": "MDU6TGFiZWw3NDk0MTY1MDg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Up%20for%20grabs",
        "name": "Up for grabs",
        "color": "99a810",
        "default": false
      }
    ],
    "created_at": "2020-05-12T20:56:39Z",
    "updated_at": "2024-08-07T13:03:38Z",
    "closed_at": "2021-04-20T15:45:21Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "dongcarl:2020-05-async-pnb",
      "ref": "2020-05-async-pnb",
      "sha": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 97671618,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NzY3MTYxOA==",
        "name": "bitcoin",
        "full_name": "dongcarl/bitcoin",
        "owner": {
          "login": "dongcarl",
          "id": 3445290,
          "node_id": "MDQ6VXNlcjM0NDUyOTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/dongcarl",
          "html_url": "https://github.com/dongcarl",
          "followers_url": "https://api.github.com/users/dongcarl/followers",
          "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
          "organizations_url": "https://api.github.com/users/dongcarl/orgs",
          "repos_url": "https://api.github.com/users/dongcarl/repos",
          "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/dongcarl/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/dongcarl/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/dongcarl/bitcoin",
        "archive_url": "https://api.github.com/repos/dongcarl/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/dongcarl/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/dongcarl/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/dongcarl/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/dongcarl/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/dongcarl/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/dongcarl/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/dongcarl/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/dongcarl/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/dongcarl/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/dongcarl/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/dongcarl/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/dongcarl/bitcoin/events",
        "forks_url": "https://api.github.com/repos/dongcarl/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/dongcarl/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/dongcarl/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/dongcarl/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/dongcarl/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/dongcarl/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/dongcarl/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/dongcarl/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/dongcarl/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/dongcarl/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/dongcarl/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/dongcarl/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/dongcarl/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/dongcarl/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/dongcarl/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/dongcarl/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:dongcarl/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/dongcarl/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/dongcarl/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/dongcarl/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/dongcarl/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/dongcarl/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/dongcarl/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/dongcarl/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/dongcarl/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/dongcarl/bitcoin/hooks",
        "svn_url": "https://github.com/dongcarl/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 204504,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-05-28T17:13:06Z",
        "created_at": "2017-07-19T04:07:18Z",
        "updated_at": "2022-06-03T10:08:14Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "9abed46871a7f44277a0a59c645a8593ce9e5628",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35965,
        "stargazers_count": 77762,
        "watchers_count": 77762,
        "size": 265076,
        "default_branch": "master",
        "open_issues_count": 660,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-08-07T13:52:36Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-08-07T13:52:55Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": true,
    "additions": 513,
    "deletions": 138,
    "changed_files": 15,
    "commits": 18,
    "review_comments": 6,
    "comments": 9
  },
  "events": [
    {
      "event": "labeled",
      "id": 3329460851,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMjk0NjA4NTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3329460851",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-12T21:50:22Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "labeled",
      "id": 3329460853,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMjk0NjA4NTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3329460853",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-12T21:50:22Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "labeled",
      "id": 3329460855,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMjk0NjA4NTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3329460855",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-12T21:50:22Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 3329460858,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMjk0NjA4NTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3329460858",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-12T21:50:22Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "labeled",
      "id": 3329460860,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMjk0NjA4NjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3329460860",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-12T21:50:22Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "commented",
      "id": 628167453,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyODE2NzQ1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628167453",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-13T18:27:48Z",
      "updated_at": "2020-05-13T18:27:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "Since this PR touches critical parts of the codebase, I think it deserves a thorough review. I'm going to go through the original PR (#16323) commit by commit and write down my notes here: https://docs.google.com/document/d/1tduRmqcvhdl3FRkmdnj0f3_fknXuIZ57R8zdCGHNt6k/edit?usp=sharing",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-628167453",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NWJlZGJkOTZhMmM3MzZjNTI1ZGQwZDA4YjVmMmI0NGExYmFiODg2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/45bedbd96a2c736c525dd0d08b5f2b44a1bab886",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/45bedbd96a2c736c525dd0d08b5f2b44a1bab886",
      "tree": {
        "sha": "80ad0b96cd3f9197ca32bb633e19290a442f2781",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/80ad0b96cd3f9197ca32bb633e19290a442f2781"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9c504cbc4ba45a32abb86b67a277b75a17f13a4",
          "sha": "b9c504cbc4ba45a32abb86b67a277b75a17f13a4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b9c504cbc4ba45a32abb86b67a277b75a17f13a4"
        }
      ],
      "message": "[tests] Remove unnecessary cs_mains in denialofservice_tests\n\n9fdf05d70cac4a62d1aeeb4299e2c3a9a866f8af resolved some lock\ninversion warnings in denialofservice_tests, but left in a number\nof cs_main locks that are unnecessary (introducing lock inversion\nwarnings in future changes).",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T13:02:23Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-12T00:10:25Z"
      },
      "sha": "45bedbd96a2c736c525dd0d08b5f2b44a1bab886"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzozNDQ2ZmQyOTg2N2NiNjVlY2I3ZDgzNmVkODI4ZWMzMzViZTM4OTVj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3446fd29867cb65ecb7d836ed828ec335be3895c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3446fd29867cb65ecb7d836ed828ec335be3895c",
      "tree": {
        "sha": "64abecee883ccac83fc502be53c41180b87d0047",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/64abecee883ccac83fc502be53c41180b87d0047"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/45bedbd96a2c736c525dd0d08b5f2b44a1bab886",
          "sha": "45bedbd96a2c736c525dd0d08b5f2b44a1bab886",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/45bedbd96a2c736c525dd0d08b5f2b44a1bab886"
        }
      ],
      "message": "[net processing] Deduplicate post-block-processing code\n\nCo-authored-by: Carl Dong <contact@carldong.me>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T13:02:23Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2019-11-14T19:47:55Z"
      },
      "sha": "3446fd29867cb65ecb7d836ed828ec335be3895c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYjBlZWNjMmJkNjc0YzdjMGI0NDAwNjMwZGZiZDQwZjFmNjI0M2Ew",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db0eecc2bd674c7c0b4400630dfbd40f1f6243a0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/db0eecc2bd674c7c0b4400630dfbd40f1f6243a0",
      "tree": {
        "sha": "000b3bd2c30a492c71f54963410680758ee30372",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/000b3bd2c30a492c71f54963410680758ee30372"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3446fd29867cb65ecb7d836ed828ec335be3895c",
          "sha": "3446fd29867cb65ecb7d836ed828ec335be3895c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3446fd29867cb65ecb7d836ed828ec335be3895c"
        }
      ],
      "message": "[validation] Add BlockValidationState inout param to ProcessNewBlock\n\nThis is a pure refactor commit.\n\nThis commit enables the caller of ProcessNewBlock to access the final\nBlockValidationState passed around between CheckBlock(), AcceptBlock(),\nand BlockChecked() inside ProcessNewBlock(). This is useful because in a\nfuture commit, we will move the BlockChecked() call out of\nProcessNewBlock(), and BlockChecked() still needs to be able to access\nthe BlockValidationState.\n\nCo-authored-by: John Newbery <john@johnnewbery.com>\nCo-authored-by: Carl Dong <contact@carldong.me>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T20:18:16Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-11-15T18:26:28Z"
      },
      "sha": "db0eecc2bd674c7c0b4400630dfbd40f1f6243a0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzphODVlOGI3MzkzYjM3ZTc0ZGRkN2NlMGU1NjM5YmMxOTQ0Zjc1NmY1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a85e8b7393b37e74ddd7ce0e5639bc1944f756f5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a85e8b7393b37e74ddd7ce0e5639bc1944f756f5",
      "tree": {
        "sha": "2bf67fb4946d0c1843f0f889d0d2f9533b9c8625",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2bf67fb4946d0c1843f0f889d0d2f9533b9c8625"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db0eecc2bd674c7c0b4400630dfbd40f1f6243a0",
          "sha": "db0eecc2bd674c7c0b4400630dfbd40f1f6243a0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/db0eecc2bd674c7c0b4400630dfbd40f1f6243a0"
        }
      ],
      "message": "[net processing] Make BlockChecked a standalone, static function\n\nThis is a pure refactor commit.\n\nSince BlockChecked() doesn't actually depend on all of\nPeerLogicValidation but just PeerLogicValidation's CConnman, we can make\na standalone, static function that simply has an extra CConnman\nparameter and have the non-static version call the static one.\n\nThis also means that, in a future commit, when we move the\nBlockChecked() call out of ProcessNewBlock(), the caller of\nProcessNewBlock() can call BlockChecked() directly even if they only\nhave a CConnman.\n\nCo-authored-by: John Newbery <john@johnnewbery.com>\nCo-authored-by: Carl Dong <contact@carldong.me>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T20:18:19Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-11-15T19:51:21Z"
      },
      "sha": "a85e8b7393b37e74ddd7ce0e5639bc1944f756f5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZmMxOTJjM2VjYjQwNjk1ZWJkZGJlNzM2Njg0YjE1MjA4MWVhNGRm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8fc192c3ecb40695ebddbe736684b152081ea4df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8fc192c3ecb40695ebddbe736684b152081ea4df",
      "tree": {
        "sha": "7cbc0b0c9ae2ce08657025d12c5613f8b58978a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7cbc0b0c9ae2ce08657025d12c5613f8b58978a4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a85e8b7393b37e74ddd7ce0e5639bc1944f756f5",
          "sha": "a85e8b7393b37e74ddd7ce0e5639bc1944f756f5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a85e8b7393b37e74ddd7ce0e5639bc1944f756f5"
        }
      ],
      "message": "[validation] Return the AcceptBlock BlockValidationState directly in ProcessNewBlock\n\nNet processing now passes a BlockValidationState object into\nProcessNewBlock(). If CheckBlock() or AcceptBlock() fails, then PNB\nreturns to net processing without calling the (asynchronous)\nBlockChecked Validation Interface method. net processing can use the\ninvalid BlockValidationState returned to punish peers.\n\nCheckBlock() and AcceptBlock() represent the DoS checks on a block (ie\nPoW and malleability). Net processing wants to know about those failed\nchecks immediately and shouldn't have to wait on a callback. Other\nvalidation interface clients don't care about net processing submitting\nbogus malleated blocks to validation, so they don't need to be notified\nof BlockChecked.\n\nFurthermore, if PNB returns a valid BlockValidationState, we never need\nto try to process (non-malleated) copies of the block from other peers.\nThat makes it much easier to move the best chain activation logic to a\nbackground thread in future work.\n\nCo-authored-by: John Newbery <john@johnnewbery.com>\nCo-authored-by: Carl Dong <contact@carldong.me>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T20:18:19Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-11-15T19:56:02Z"
      },
      "sha": "8fc192c3ecb40695ebddbe736684b152081ea4df"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOTRjYTk4Mzg1MjM2OGU2ODNmODlkYjMyZDk0YmUyMWQzNzQ4YTBj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c94ca983852368e683f89db32d94be21d3748a0c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c94ca983852368e683f89db32d94be21d3748a0c",
      "tree": {
        "sha": "3534a35bf449ebdc7077463ec79ba67f8e7dbf28",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3534a35bf449ebdc7077463ec79ba67f8e7dbf28"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8fc192c3ecb40695ebddbe736684b152081ea4df",
          "sha": "8fc192c3ecb40695ebddbe736684b152081ea4df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8fc192c3ecb40695ebddbe736684b152081ea4df"
        }
      ],
      "message": "[validation] trivial: Rename state to dummy_state for clarity\n\nThis is a pure refactor commit.\n\nCo-authored-by: John Newbery <john@johnnewbery.com>\nCo-authored-by: Carl Dong <contact@carldong.me>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T20:18:19Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-11-15T19:56:45Z"
      },
      "sha": "c94ca983852368e683f89db32d94be21d3748a0c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MDA0OGY0NWEwN2ZkY2VkMmI5NzIwOWExN2JmYTBiMTYxNTE4Nzcz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50048f45a07fdced2b97209a17bfa0b161518773",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/50048f45a07fdced2b97209a17bfa0b161518773",
      "tree": {
        "sha": "6fe24c6a960107951c22f7ce8591bfba08cc3011",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6fe24c6a960107951c22f7ce8591bfba08cc3011"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c94ca983852368e683f89db32d94be21d3748a0c",
          "sha": "c94ca983852368e683f89db32d94be21d3748a0c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c94ca983852368e683f89db32d94be21d3748a0c"
        }
      ],
      "message": "[test/rpc] Additional checks for dos_state validity\n\nCo-authored-by: John Newbery <john@johnnewbery.com>\nCo-authored-by: Carl Dong <contact@carldong.me>",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-05-14T20:18:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-11-15T19:58:23Z"
      },
      "sha": "50048f45a07fdced2b97209a17bfa0b161518773"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3349238518,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzM0OTIzODUxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3349238518",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-18T21:47:41Z"
    },
    {
      "event": "commented",
      "id": 630453121,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMDQ1MzEyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630453121",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-18T21:49:35Z",
      "updated_at": "2020-05-18T21:49:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased on newer #17479. `git-bisect`ing the `validationinterface_tests/unregister_all_during_call` says:\r\n\r\n```\r\n194935b1a2968b594a42cb880e30701dd2e2bc7c is the first bad commit\r\n```",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-630453121",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "commented",
      "id": 630470943,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMDQ3MDk0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630470943",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-18T22:35:42Z",
      "updated_at": "2020-05-18T22:35:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Rebased on newer #17479. `git-bisect`ing the `validationinterface_tests/unregister_all_during_call` says:\r\n> \r\n> ```\r\n> 194935b1a2968b594a42cb880e30701dd2e2bc7c is the first bad commit\r\n> ```\r\n\r\nTest was relying on the fact that BlockChecked as synchronous and that commit made it asynchronous. You can switch it to a different synchronous method:\r\n\r\n```diff\r\n--- a/src/test/validationinterface_tests.cpp\r\n+++ b/src/test/validationinterface_tests.cpp\r\n@@ -57,15 +57,13 @@ public:\r\n     {\r\n         if (m_on_destroy) m_on_destroy();\r\n     }\r\n-    void BlockChecked(const CBlock& block, const BlockValidationState& state) override\r\n+    void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock> &block) override\r\n     {\r\n         if (m_on_call) m_on_call();\r\n     }\r\n     static void Call()\r\n     {\r\n-        std::shared_ptr<const CBlock> block = std::make_shared<CBlock>();\r\n-        BlockValidationState state;\r\n-        GetMainSignals().BlockChecked(block, state);\r\n+        GetMainSignals().NewPoWValidBlock(nullptr, std::make_shared<CBlock>());\r\n     }\r\n     std::function<void()> m_on_call;\r\n     std::function<void()> m_on_destroy;\r\n```",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-630470943",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "commented",
      "id": 630493441,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMDQ5MzQ0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630493441",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-18T23:50:26Z",
      "updated_at": "2020-05-18T23:50:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Now `p2p_unrequested_blocks.py` is failing. `git-bisect` says: \r\n```\r\n1d9f66ea37ac6f22f26013cd57ed75fc04a9481f is the first bad commit\r\n```\r\n-----\r\n\r\nAs noted in the Google Doc:\r\n\r\n> Up to this point, it seems that splitting this commit into:\r\n> \r\n> 1. Changing the call semantics of `ProcessNewBlock`\r\n> 2. Changing the return type to a `std::future`\r\n> \r\n> Might make it easier to review.\r\n\r\nSo I plan to split it up and track it down.",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-630493441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYjE3ODkwM2IwNzUyZGUzZWRmZDg3ZjYwMTNjMmI0ZGU0MWI2ZTEz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb178903b0752de3edfd87f6013c2b4de41b6e13",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cb178903b0752de3edfd87f6013c2b4de41b6e13",
      "tree": {
        "sha": "b8e2d39ed2d0715d883f1ad775b03eda4544c909",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b8e2d39ed2d0715d883f1ad775b03eda4544c909"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b8e2d39ed2d0715d883f1ad775b03eda4544c909\nparent 50048f45a07fdced2b97209a17bfa0b161518773\nauthor Carl Dong <contact@carldong.me> 1589913908 -0400\ncommitter Carl Dong <contact@carldong.me> 1589913908 -0400\n\nMake ProcessNewBlock return fNewBlock instead of state validity\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7EKTQACgkQDMUhUxl5\nkaW4cRAAtZORr3ghXpXrNDPUctCMv5TX9FJkPu8hrL8//GMS1kr7mICF7MnU3cMG\nbwp67bWLWmE3SNhd7GPFSU2whhIRXHktgpTKg/7dc3awELU7eoJeXeKYVNPeDblk\nfGp+cWQX5qalXhA2ah2mrL3VJ5Pzdr+Y0iGwST7ep5E9yHuEgPNZMjVT5sWFek51\nfA9o8/fao2ylwjLPgDbyMSdn75COTN11B/SXh0E//GOqWKI+lo5Fr2Jpj0hAvuyQ\npOmW0h46UiPy+DNYgD0WBUg1WFRQpr6CMzBy/s037lWfZoYdxCRiF0ZxjRHEQFKf\nDVwe0fQmG//ijyYQKx1hdHzOMe7C720EA1NZ9v/b31dIU3RZVGkQCMHXLkl5t3yF\nq77bqsrJrAWbcCp5eNiSLgYwzCN+7UgFKzEqqQ/ayksY7iOByAAIhgSDZDuRl4fY\netNHIC0J91r6AdFt9Etiys7lo97Vyd0hq458OIXTornvCdHeVEE4JWEJWTQNWLTL\nyM2s9BoaQZWm+hMfyFS1GCGzCggrkCTAsKG7iHpzZ4kiF/BlBrF8r6CWkdKxk3Av\nqgt4A+X7EhvHpY73x5Ou6S8LABIPcMwIGobhuyleBH3pwl7SGZ0occnskyP3esF7\nOSzzqSm16JdZR6tQDTYzJx4nPTmAnm0VTbb+KJAeoJFYHu0iD8o=\n=A4gg\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50048f45a07fdced2b97209a17bfa0b161518773",
          "sha": "50048f45a07fdced2b97209a17bfa0b161518773",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/50048f45a07fdced2b97209a17bfa0b161518773"
        }
      ],
      "message": "Make ProcessNewBlock return fNewBlock instead of state validity",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-19T18:45:08Z"
      },
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-19T18:45:08Z"
      },
      "sha": "cb178903b0752de3edfd87f6013c2b4de41b6e13"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NTMyY2Y2YzU2ZDAxNWU4YmFlNjQ2MTM4ZDcxZGY4MjVkMjY4NGFi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7532cf6c56d015e8bae646138d71df825d2684ab",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7532cf6c56d015e8bae646138d71df825d2684ab",
      "tree": {
        "sha": "d05b4ed6ec2858d87865105a39dd6c409c7d5550",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d05b4ed6ec2858d87865105a39dd6c409c7d5550"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d05b4ed6ec2858d87865105a39dd6c409c7d5550\nparent cb178903b0752de3edfd87f6013c2b4de41b6e13\nauthor Matt Corallo <git@bluematt.me> 1560790621 -0400\ncommitter Carl Dong <contact@carldong.me> 1589915241 -0400\n\nMake ProcessNewBlock return a future instead of an immediate bool\n\nThis prepares for making best-chain-activation and disk writes\nhappen in a separate thread from the caller, even though all\ncallsites currently block on the return value immediately.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7ELmkACgkQDMUhUxl5\nkaUWtw//VbFhyeDDt2iCiQPBTe0c0jyHj+fr8G6LaByDX9QZEeDDgaVwFHALhHe/\nweA7XtwZgI/WVtaQrD27b/nc1UNi2MEGgMyqZ4v70NREYadMtVf0qAgfSsQyEi1/\nKsW6SCPVWh5PPBCGqrkDwcedfLw/r5pEPPn6bj4s8tAkbSKd1LxBqq2iKGR2WNGG\n/+IMeBbp6mdF5Yb0nzMwiaLpELnTS51LqScoQLVy5dUC7OPhLaMLEPcRnGHHqjGV\nuQ2gF1u9S+dwdKui/bsLWT2iFftIELBsaKOH9YBsA0fc7nh7o/ZUqLG3/DyUAOyT\n9IrFWkbOKOaOVqGrxdb/5ylyqscqiI9YJzONTM9rUjlJSMeNhVZfsZZlVyzh4UYV\n/jnoKdbjC2Go31ThdgCCBRdqzcM6ulwEkxytRccKqX3Zy9FJjpv+4QZNBJMr+CB8\n/xzftue0emwmz9E+CuH0W/Hzg2pi1t7nz57OsJtVYZr8cL9qjguwglPkKPOlmagY\nUNtwgfCQPNI/seVutqD2JdQ+my45lhkCWwruBk9wfQyN28WhpD1wE+R2YhMEDJW1\nMPGywy/nZwYUPMsa38P3nq1RsIcFovVUxL/bkNVyjROlhAivBcphMXfwFkOFeq4s\nzq6M8cYKpNBSWye8TDLGl72oYxDlxs3XqzKm+GPPjcO2Cj7EFi8=\n=Q63n\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb178903b0752de3edfd87f6013c2b4de41b6e13",
          "sha": "cb178903b0752de3edfd87f6013c2b4de41b6e13",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cb178903b0752de3edfd87f6013c2b4de41b6e13"
        }
      ],
      "message": "Make ProcessNewBlock return a future instead of an immediate bool\n\nThis prepares for making best-chain-activation and disk writes\nhappen in a separate thread from the caller, even though all\ncallsites currently block on the return value immediately.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-19T19:07:21Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-17T16:57:01Z"
      },
      "sha": "7532cf6c56d015e8bae646138d71df825d2684ab"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZGNkYjUzN2I1YzFkY2U2MGRiMjE3MjM4YzVlNzVkYWU2MDJlNzU1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2dcdb537b5c1dce60db217238c5e75dae602e755",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2dcdb537b5c1dce60db217238c5e75dae602e755",
      "tree": {
        "sha": "7bbb2e9aadabaaf886ddc02ce0720abc534736d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7bbb2e9aadabaaf886ddc02ce0720abc534736d8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7bbb2e9aadabaaf886ddc02ce0720abc534736d8\nparent 7532cf6c56d015e8bae646138d71df825d2684ab\nauthor Carl Dong <contact@carldong.me> 1589915311 -0400\ncommitter Carl Dong <contact@carldong.me> 1589915435 -0400\n\nNon-obvious parts of \"Make ProcessNewBlock return a future instead of an immediate bool\"\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7EL0MACgkQDMUhUxl5\nkaWfgg//d9oRHyG/2UdQ8iXU9E95VeVOGv4vofYdeXwh66NSixnDKgJvQy1w1eY3\nGCvhqfpB9UiSx0lw8uTol2bL4cBISX+yfd0fp7xGOWUib+l5aoa+KOtUPXLuK6Bj\nUfi8MT8jMkLWcwyHeyd8QiXmPrV2XZYqYoh+4+e45/WkderPABnCPfR3yiEZhXgD\niyDAqtsIlQt0hY7emKUSzIhMpszklrvJJol12hmfMbG/7JvL1DaE0mdzvH3jd7wt\n7abVxzfbihqxuNUzAZx4AHHNHLwtFIIPTeeGk+aaD59dCPz88C/TYvkOcIAlz5FI\nBdefMYWXhNPWTcpm+5zpL7iOa/cs2T+VlYg1vrcTZPdVA/EglScIk9yWh0Gn5wTI\n/O4+a+2lL2fOPEc++aTIxcW7kKlNaGFtxVaLe9fzY/BcvqGQgk5772eOdF+358Xl\nEVQ6DERhUXTlNPcwkYopKT3AP1+T14fy8GGWY3wfGpRy/+bC5yhApCBgLpkIjHoI\nf+phEoPbVi5cjCVL6G2Z1Je0FBnYxEWW0jEz3x3+4Skudtie9Zhd9+hDZl+dTCMC\nz4wGMtoeGuYo8RrBxa63uuEKbnhEErP3oPIYXv9w3CkP/tf3jKj+JqzJ8cZwNcR3\n1vMQp+FHq4kPR8CbZSjazZSTI54DeiVpmKSo31Ywn38me+F5GZo=\n=1wBP\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7532cf6c56d015e8bae646138d71df825d2684ab",
          "sha": "7532cf6c56d015e8bae646138d71df825d2684ab",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7532cf6c56d015e8bae646138d71df825d2684ab"
        }
      ],
      "message": "Non-obvious parts of \"Make ProcessNewBlock return a future instead of an immediate bool\"",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-19T19:10:35Z"
      },
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-19T19:08:31Z"
      },
      "sha": "2dcdb537b5c1dce60db217238c5e75dae602e755"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzozYTkxZTM2NjY5N2Q5ZTgzYzQ5NmNiZmYxOTkxNDY3YzY0ZGQ2ZDQ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a91e366697d9e83c496cbff1991467c64dd6d48",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3a91e366697d9e83c496cbff1991467c64dd6d48",
      "tree": {
        "sha": "6195507d5bcd2ad2e9952ebbd51816e3c2f58b90",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6195507d5bcd2ad2e9952ebbd51816e3c2f58b90"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6195507d5bcd2ad2e9952ebbd51816e3c2f58b90\nparent 2dcdb537b5c1dce60db217238c5e75dae602e755\nauthor Matt Corallo <git@bluematt.me> 1559998078 -0400\ncommitter Carl Dong <contact@carldong.me> 1589915460 -0400\n\nAdd a new peer state tracking class to reduce cs_main contention.\n\nCNodeState was added for validation-state-tracking, and thus,\nlogically, was protected by cs_main. However, as it has grown to\ninclude non-validation state (taking state from CNode), and as\nwe've reduced cs_main usage for other unrelated things, CNodeState\nis left with lots of cs_main locking in net_processing.\n\nIn order to ease transition to something new, this adds only a\ndummy CPeerState which is held as a reference for the duration of\nmessage processing.\n\nNote that moving things is somewhat tricky pre validation-thread as\na consistent lockorder must be kept - we can't take a lock on the\nnew cs_peerstate in anything that's called directly from\nvalidation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7EL0QACgkQDMUhUxl5\nkaVY2hAAi0td1v8Gi9Kv6FHDU8zP7N87+ntsNM8u3804w93HtMvh6qaRKnrgfojK\n/NXtNKwNs4kuUeyoGqIU1wzhzRiURv+B9XVcInQSN2YN2RUgIMTIxdgmtb5LDs35\n0XW+RG6OaOu5WjMhEebPFcpwHiPN3zndNCtxcfye9Jjihcq1oPQgnvHQwdVPerTU\naWp2Qf/FnXnJCDNxKErSrqIyPX7iDzpqQf5h9nVt65fpPBA/igRSPOG9Dw/4/qqM\nk7yR54o7FWrB56M4GmCjemwq+kC2cO7ox8oO2yHF6iWChx95MeOJWNcApxXquQtI\n4fwLlV45Zz24tNcNE98hM/FArw/ClkVSQGU04V4M2p9lt0Fsng6tW9UvYNwVgTQO\n+0kIxh577sFXHrZoSLEU1dahkiFIE3T9jzJMdUII04zXBcBooPGGFpzFje+eR9rA\nGx6Kks03aXjuu5jlxo34pduJnU7r8RSiqPvjObGDZWOWPBSUkoVokwxUBiZlA6Tt\nX2xIgrKCy+dDtHNiMEWZW93JZ8j05gTXR+nhSFi28ugoYDmlv/zmo2KVV711cO2n\nQqhdmWumIhe8sy54TicpZQfi0USRea04S8BWg//r9awwzzJRxZbf/dq+UcuDneMr\nAAR+nSoRQDoT9EUTWhbPfvWgmUI+Ha449NQYNlanclVuMHsuRgk=\n=Y3Og\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2dcdb537b5c1dce60db217238c5e75dae602e755",
          "sha": "2dcdb537b5c1dce60db217238c5e75dae602e755",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2dcdb537b5c1dce60db217238c5e75dae602e755"
        }
      ],
      "message": "Add a new peer state tracking class to reduce cs_main contention.\n\nCNodeState was added for validation-state-tracking, and thus,\nlogically, was protected by cs_main. However, as it has grown to\ninclude non-validation state (taking state from CNode), and as\nwe've reduced cs_main usage for other unrelated things, CNodeState\nis left with lots of cs_main locking in net_processing.\n\nIn order to ease transition to something new, this adds only a\ndummy CPeerState which is held as a reference for the duration of\nmessage processing.\n\nNote that moving things is somewhat tricky pre validation-thread as\na consistent lockorder must be kept - we can't take a lock on the\nnew cs_peerstate in anything that's called directly from\nvalidation.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-19T19:11:00Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-08T12:47:58Z"
      },
      "sha": "3a91e366697d9e83c496cbff1991467c64dd6d48"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3353386777,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzM1MzM4Njc3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3353386777",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-19T19:29:04Z"
    },
    {
      "event": "commented",
      "id": 631038490,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMTAzODQ5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631038490",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-19T19:37:54Z",
      "updated_at": "2020-05-19T19:37:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "Split up the first commit into:\r\n\r\n1. cb178903b0752de3edfd87f6013c2b4de41b6e13 which changes the call semantics of `ProcessNewBlock` and deals with the fallout of that\r\n2. 7532cf6c56d015e8bae646138d71df825d2684ab which changes the return from a bool to a future of a bool and deals with the fallout of that\r\n3. 2dcdb537b5c1dce60db217238c5e75dae602e755 which contains changes that are non-obvious to me to be correct\r\n\r\n-----\r\n\r\nI also botched the `git-bisect` before (didn't call `make` in a `bash -c`), new output:\r\n```\r\n$ git bisect run bash -c \"make -j50 && python3 test/functional/p2p_unrequested_blocks.py\"\r\n\r\n...\r\n\r\n7c77827558715180594f5881b6d02982504c4fad is the first bad commit\r\ncommit 7c77827558715180594f5881b6d02982504c4fad\r\nAuthor: Matt Corallo <git@bluematt.me>\r\nDate:   Mon Jun 17 13:13:36 2019 -0400\r\n\r\n    Move net_processing's ProcessNewBlock calls to resolve async.\r\n\r\n    Essentially, our goal is to not process anything for the given peer\r\n    until the block finishes processing (emulating the previous behavior)\r\n    without actually blocking the ProcessMessages loops. Obviously, in\r\n    most cases, we'll just go on to the next peer and immediately hit a\r\n    cs_main lock, blocking us anyway, but this we can slowly improve\r\n    that state over time by moving things from CNodeState to CPeerState.\r\n\r\n src/net_processing.cpp | 79 ++++++++++++++++++++++++++++++++++++++++++--------\r\n 1 file changed, 67 insertions(+), 12 deletions(-)\r\nbisect run success\r\n```",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-631038490",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5N2FhOTA3OGU1OGM4NWM0NThiNjU4OWM0M2JkZGY1MDViNTNkNzA0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97aa9078e58c85c458b6589c43bddf505b53d704",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/97aa9078e58c85c458b6589c43bddf505b53d704",
      "tree": {
        "sha": "e50684fa512a75326bd9e4c3eb116f7e3f33053e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e50684fa512a75326bd9e4c3eb116f7e3f33053e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e50684fa512a75326bd9e4c3eb116f7e3f33053e\nparent 3a91e366697d9e83c496cbff1991467c64dd6d48\nauthor Matt Corallo <git@bluematt.me> 1560791616 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098571 -0400\n\nMove net_processing's ProcessNewBlock calls to resolve async.\n\nEssentially, our goal is to not process anything for the given peer\nuntil the block finishes processing (emulating the previous behavior)\nwithout actually blocking the ProcessMessages loops. Obviously, in\nmost cases, we'll just go on to the next peer and immediately hit a\ncs_main lock, blocking us anyway, but this we can slowly improve\nthat state over time by moving things from CNodeState to CPeerState.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+osACgkQDMUhUxl5\nkaW6NRAAmKok7JRa0A9WcrvovWe9gYnvJMchzjrtpeaMZg776aQK/xheHYzuEbsV\nXO9wsfsTMchHyfO+z/JKyFP9aH762gTltUwJ+Mjo2l0gi2JwE9RpaSvcMdfvAwfp\nwSSZgU1w1xTuuHNngX292/NhLITzQRIz66waz6+Wr3X4vV2AH4IfmcAJSQ3/bm+2\nMmIrDun6mcfDc31Tf/t7QEsunykBuNoYgvhhsDfG/Wha4vnauo5DbsSii+x746eX\nh47ZXIKOkvFbKZrfcV/FTm+apQZU4Dq47sMQ8GWGxZ8wdGvJZZUZ7vfpwd26NyPj\nmnt2fBv3QZzqUSQAkqi27VT81j01s4M6NcfPnVmA/HCtUOBZCZg0Kw8PCw8hN9V+\noddkkk1iNBvHeqd350WL0O0MGOtvAsmmTWcFuNQli4ze/pU1kAvk3acTbP7pwOfq\n6D0WKovD+udbhkZqwbJL+YYlG4luF6y7qRjtnlbE7M9YEjilt7zfRHmp1vccYYXh\nVRLBOjvFEHzqjLYmjB+xlldoXF9WnlkkKwOdto8FKDiIGJWdkg4cfP+b8Olrwbjz\nmaC6cWQql+TSLAjCa4miFlzn8qT0cG6850D+1Tpo9mRiRe1eRQrfv542MLKbQWgH\nM7f+p5jBBtGlqj4D80rwoX8vNl6pc01ea+SE34DA4GX/LnQf/vE=\n=NiqS\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a91e366697d9e83c496cbff1991467c64dd6d48",
          "sha": "3a91e366697d9e83c496cbff1991467c64dd6d48",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3a91e366697d9e83c496cbff1991467c64dd6d48"
        }
      ],
      "message": "Move net_processing's ProcessNewBlock calls to resolve async.\n\nEssentially, our goal is to not process anything for the given peer\nuntil the block finishes processing (emulating the previous behavior)\nwithout actually blocking the ProcessMessages loops. Obviously, in\nmost cases, we'll just go on to the next peer and immediately hit a\ncs_main lock, blocking us anyway, but this we can slowly improve\nthat state over time by moving things from CNodeState to CPeerState.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:51Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-17T17:13:36Z"
      },
      "sha": "97aa9078e58c85c458b6589c43bddf505b53d704"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MjU3NGUyZmRhY2JiZGRmNGQ3NDM0ZDk4YWNjMDc4NjFkYmRmN2U0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/92574e2fdacbbddf4d7434d98acc07861dbdf7e4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/92574e2fdacbbddf4d7434d98acc07861dbdf7e4",
      "tree": {
        "sha": "288f3812d213f2b88bbca2fe849cd1649b2829a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/288f3812d213f2b88bbca2fe849cd1649b2829a4"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 288f3812d213f2b88bbca2fe849cd1649b2829a4\nparent 97aa9078e58c85c458b6589c43bddf505b53d704\nauthor Matt Corallo <git@bluematt.me> 1563743171 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098572 -0400\n\nRun the ActivateBestChain in ProcessNewBlock in a background thread\n\nSpawn a background thread at startup which validates each block as\nit comes in from ProcessNewBlock, taking advantage of the new\nstd::future return value to keep tests simple (and the new\nnet_processing handling of such values async already).\n\nThis makes introducing subtle validationinterface deadlocks much\nharder as any locks held going into ProcessNewBlock do not interact\nwith (in the form of lockorder restrictions) locks taken in\nvalidationinterface callbacks.\n\nNote that after this commit, feature_block and feature_assumevalid\ntests time out due to increased latency between block processing\nwhen those blocks do not represent a new best block. This will be\nresolved in the next commit.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+owACgkQDMUhUxl5\nkaVvAA/+IOZVTYa0vij9V7uaAfOw9MQ9P0uWf7LRJ/pFntfrQPtrKLLX950WuIgu\ntWiZn0c7EdzFSFUcsozw4UU8bNUj9LFMCkryCSAbt0nOFNy+qPaymxJI0TqI/gng\nqPyXTtHgjiGmmbGvllHD6BCk0X7BX7iBHw0FbLMjgKimvn8SKBUpGV4Zc0K8F+79\nPsZpWlc5srnKdWV7c41Zb0yNkczP0uav526jF3iX/IyFncNLxAHkaOWHN02ODx1A\nqshWvGMmn+zj19El9OxJqMh2YV1uQIaJG7fv8Pn7ZpKS3bi7sOXG7qOJjqnSL5AY\nkeQZ+0JibUFGVG7vaKl5Z1o1z4+lmfvcSHXUJ9uyDzKqjEz7lsaVhA55/ZFSuG35\n+6upOGMXet4YAvAS2R96Hg55UbrAbDKzwbsRWu4d3an2n2RItYi7A0D9S+VWDmiU\n7OTcMDAX7dB1PK4xlF4tFDvNJqovI78E67zBUDS2hk79lM2HnTC2FTA5sv6+e4dG\nXrR23vDXdA6e7+MlqJXvwQIjskZjhTUQo3LGDslF70axuBDSGKl40WukJpPwXcrk\nT0FYUQyBUI0KreJ8x+Itq9jMOtB7HsFvqGHgqoyL1BNXIeRiMwDrSpX6Olw/gSHE\nqYidD9h+ry1e0yugmxY4AH6rbFuFtCyvu2C8SfakzdBlc+KhuQk=\n=g3FQ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97aa9078e58c85c458b6589c43bddf505b53d704",
          "sha": "97aa9078e58c85c458b6589c43bddf505b53d704",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/97aa9078e58c85c458b6589c43bddf505b53d704"
        }
      ],
      "message": "Run the ActivateBestChain in ProcessNewBlock in a background thread\n\nSpawn a background thread at startup which validates each block as\nit comes in from ProcessNewBlock, taking advantage of the new\nstd::future return value to keep tests simple (and the new\nnet_processing handling of such values async already).\n\nThis makes introducing subtle validationinterface deadlocks much\nharder as any locks held going into ProcessNewBlock do not interact\nwith (in the form of lockorder restrictions) locks taken in\nvalidationinterface callbacks.\n\nNote that after this commit, feature_block and feature_assumevalid\ntests time out due to increased latency between block processing\nwhen those blocks do not represent a new best block. This will be\nresolved in the next commit.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:52Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-07-21T21:06:11Z"
      },
      "sha": "92574e2fdacbbddf4d7434d98acc07861dbdf7e4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5YTI1YzQ5YTUwMmNmODg5N2JkNzNkY2FlODFiMjhjODc5MzA3ZmI1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9a25c49a502cf8897bd73dcae81b28c879307fb5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9a25c49a502cf8897bd73dcae81b28c879307fb5",
      "tree": {
        "sha": "ae5571a4f6f2adc05df01eb52c3857f376b7e6c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ae5571a4f6f2adc05df01eb52c3857f376b7e6c4"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ae5571a4f6f2adc05df01eb52c3857f376b7e6c4\nparent 92574e2fdacbbddf4d7434d98acc07861dbdf7e4\nauthor Matt Corallo <git@bluematt.me> 1560274148 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098573 -0400\n\nAdd a callback to indicate a block has been processed\n\nThis resolves the performance regression introduced in the previous\ncommit by always waking the message processing thread after each\nblock future resolves.\n\nSadly, this is somewhat awkward - all other validationinterface\ncallbacks represent an actual change to the global validation state,\nwhereas this callback indicates only that a call which one\nvalidation \"client\" made has completed. After going back and forth\nfor some time I didn't see a materially better way to resolve this\nissue, and luckily its a rather simple change, but its far from\nideal. Note that because we absolutely do not want to ever block on\na ProcessNewBlock-returned-future, the callback approach is\ncritical.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+o4ACgkQDMUhUxl5\nkaX5Vg//TnhX0wcNfMLtaiMc6AaBsKCanF8VT16JLyN7AcFxKILQRG/h9fB4auUK\n/2IhbbpzpJKS+QbFeCLBZxEBHqEHpTM40+MudipnriLBjTYmp/m0AqAIDVGtgXIv\nlR6eR8IWH27+IEQEHSzVr/udSDik5dzR16YACpbCnaKUr5cahDBR2DUecUC1iucg\nLMnVc+TjdTRL6Q7OVnzNJ00sTfOIjejjXHiVuJLnZWlH769Dkqzq757GlXWo4l6q\n8/xTffQR7+8YaVbT/56TmzA9ONSxXWr5QRqXpZemNV2WGuIESYOGSmLW10cMw9FG\nGE61fYKPCJocTt4ZiE9z7IoXo4S30GWbToSMeU7cjwDg8VbN5lf5mvAymynr2ECu\nO6xw07UYMBE153eFmYqwpTkJgQmm6ct/FFv0n8Sd1K++PurRZcSS0Or/ZNhA91/V\nTnkzwnIFLPJAuL5WRXlHyXTLUYy6UGoCAEROC7PkBdKZchEcg5CSmJSqDFvURmSy\nvJhZOawLN2kjWdenGl/UUdUyMXps9F274pcNzHOlTuxV0mALJ2+n7qJMd2iQFX5d\nKSP8o7QGTGS6IK7L04INquIvGQsrMRFvqs6vVszCSqWx2N2Hri8O0DAv0ssYUgml\nu/iaj9lc6aJlflW5ZlebezbQ8vAza4EveyemtKkHFgtlE40icRI=\n=+Umo\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/92574e2fdacbbddf4d7434d98acc07861dbdf7e4",
          "sha": "92574e2fdacbbddf4d7434d98acc07861dbdf7e4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/92574e2fdacbbddf4d7434d98acc07861dbdf7e4"
        }
      ],
      "message": "Add a callback to indicate a block has been processed\n\nThis resolves the performance regression introduced in the previous\ncommit by always waking the message processing thread after each\nblock future resolves.\n\nSadly, this is somewhat awkward - all other validationinterface\ncallbacks represent an actual change to the global validation state,\nwhereas this callback indicates only that a call which one\nvalidation \"client\" made has completed. After going back and forth\nfor some time I didn't see a materially better way to resolve this\nissue, and luckily its a rather simple change, but its far from\nideal. Note that because we absolutely do not want to ever block on\na ProcessNewBlock-returned-future, the callback approach is\ncritical.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:53Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-11T17:29:08Z"
      },
      "sha": "9a25c49a502cf8897bd73dcae81b28c879307fb5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYzhjOTJkZTVlNjc5MjBhNjBjNmJhM2U0ZGZmN2VlYTg1MzQ2ODM3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc8c92de5e67920a60c6ba3e4dff7eea85346837",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bc8c92de5e67920a60c6ba3e4dff7eea85346837",
      "tree": {
        "sha": "74b69aa822769aee541d02fad5ac2c1b17bcee15",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/74b69aa822769aee541d02fad5ac2c1b17bcee15"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 74b69aa822769aee541d02fad5ac2c1b17bcee15\nparent 9a25c49a502cf8897bd73dcae81b28c879307fb5\nauthor Matt Corallo <git@bluematt.me> 1562377419 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098575 -0400\n\nSplit AcceptBlock into three stages to write to disk in background\n\nTo keep the API the same (and for simplicity of clients, ie\nnet_processing), this splits AcceptBlock into the do-I-want-this\nstage, the checking stage, and the writing stage.\n\nProcessNewBlock calls the do-I-want-this and checking (ie\nmalleability checking) stuff, and then dumps blocks that pass\ninto the background thread. In the background, we re-test the\ndo-I-want-this logic but skip the checking stuff, before writing\nthe block to disk and activating the best chain.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+o8ACgkQDMUhUxl5\nkaUptA//WNafq8LNjj+DFiGYhs+Y9+YinSvcxwvUQn1q+FeIaZImB7FRTGZGwXez\nwquZPRGe58V9bDpXO0ij1V9735gRgsgWpUVdhZBYb99V267eIbWzBWLy/j4PW5lP\ni2agR7stydzj69kyq4WX3Z8tWmM82URMNZyZfAlAUXYVh6Dgmy5+fSq2Yy+rCMsX\nTcwUujWeDZ79ob9eipw+4z9DbPz3bi32LpwKWjQ/Gy83l8heuu7Rs1ml1X2GOpbr\nCfOkFhOcxXMn4WnN9qWFwvDH5mep973iZSuiUnx8zDyM2dD8hPRlmgB8YqFZU779\n6uP8v9MRa2qtHHUS/B8y7jrX+s4JdKRwtxFVO1KOK09PAaODsjcd4bsluracS+Sw\n/JafPLyZ0BTR4TollXt1nDXo6XRssmLOtAIygA0RXmCefXqPjTF0m1tddQcgGzcw\nXKvgqbrNWXqnlHqnahlfQZfnjuX04AxFRw9XQqJqqCTWnCGAV+G1xiCmHsPXQIZR\nbn5aLgbOpxgKrz1fhRL7spSrAOxDm6Voxzin+fKing/1VVwlqgkMz6cjFOHhuiaS\nWdgIW7QMFyTI9EmhbYuMiH9r5CtbL2rhKeAvuIv84wxy7H80a2N8RdqlNuq96EKz\nUSSGmgw4zj7ajMoR4GVAa9oWeRuj4YzJ/he3hVmcYe4Rza719Ls=\n=3Gtz\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9a25c49a502cf8897bd73dcae81b28c879307fb5",
          "sha": "9a25c49a502cf8897bd73dcae81b28c879307fb5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9a25c49a502cf8897bd73dcae81b28c879307fb5"
        }
      ],
      "message": "Split AcceptBlock into three stages to write to disk in background\n\nTo keep the API the same (and for simplicity of clients, ie\nnet_processing), this splits AcceptBlock into the do-I-want-this\nstage, the checking stage, and the writing stage.\n\nProcessNewBlock calls the do-I-want-this and checking (ie\nmalleability checking) stuff, and then dumps blocks that pass\ninto the background thread. In the background, we re-test the\ndo-I-want-this logic but skip the checking stuff, before writing\nthe block to disk and activating the best chain.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:55Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-07-06T01:43:39Z"
      },
      "sha": "bc8c92de5e67920a60c6ba3e4dff7eea85346837"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZWQwYjY0NzQzNWI4MDk0NmY3ZjAwMGQ1NzNmZjRiNGUyNzRjYTcw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2ed0b647435b80946f7f000d573ff4b4e274ca70",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2ed0b647435b80946f7f000d573ff4b4e274ca70",
      "tree": {
        "sha": "b87ffaf68942b5fc34b9f362941bdcc011322c81",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b87ffaf68942b5fc34b9f362941bdcc011322c81"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b87ffaf68942b5fc34b9f362941bdcc011322c81\nparent bc8c92de5e67920a60c6ba3e4dff7eea85346837\nauthor Matt Corallo <git@bluematt.me> 1560094027 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098576 -0400\n\nMove BlockChecked to a background thread\n\nAs reject messages are required to go out in-order (ie before any\nfurther messages are processed), this sadly requires that we\nfurther delay re-enabling a peer after a block has been processed\nby waiting for current validationinterface callbacks to drain.\n\nThis commit enables further reduction of cs_main in net_processing\nby allowing us to lock cs_peerstate before cs_main in BlockChecked\n(ie allows us to move things which are accessed in BlockChecked,\nincluding DoS state and rejects into CPeerState and out of\nCNodeState).\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+pAACgkQDMUhUxl5\nkaVjAw//Vo1t5G4lSHCy9/zTGt5r/2YaaUmuCKEvLfGhpVmx1lVOKgIwpk0zc97X\nClW6vJnFYxNrk1JNaIF8XZwvTsXenpHOJs91onAIkU/j0He9aUU3aAnk3QD4cC9D\nZkOIY/TH9LNVrXgvWRSM093QOXGw/C8PnyObTjVNxyut31rrjvMK5JbgF9Ey3aRy\nXdEscitNKx6L5cPClpPj9A4c8DR0yak7WUCYvOsPTwhtkbBSaYKkTMTLk5qKY7S6\npe5RE3imNKnHWHnG6h1uB4NUUcMGgJ9In6QeUfLR5RJYlnfW/ybxs/Wx6bNZomHv\n2mLRZT89gM08wd0/mu7DXfgxLj8v/wbDf4dy7WDPnLhYE1McBw4mCC0IL5Cnp76T\ni+4/5kkBR/xnGGFXZuLA9h1GDSL9DG83wThLI01IgGliOlXxJWJLGSjKE40qFV0B\n/RbfekAyZIz9RoCYuLDTAQaq6QDW9cR2J/5Ge7Fue/fK7ddYPh0UrIZvS1trI4xI\nHCLzvcv+Oomi1ZXH4yswsjmTR+66VKcUl1nkIz32B8HJ9PeIrZ4cAA/7YgCB8ny8\n4xeAJQdYguNaj+BD1n3ka5EqUfHyhxVRdUJlwuphHORphhY+MWck7IsUnbSjq2Ig\n9Gg5opr4YbFvwUq7gZjmi5eVMemOw8hfok1oDn/sMjs4+lE7xMg=\n=4Tba\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc8c92de5e67920a60c6ba3e4dff7eea85346837",
          "sha": "bc8c92de5e67920a60c6ba3e4dff7eea85346837",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bc8c92de5e67920a60c6ba3e4dff7eea85346837"
        }
      ],
      "message": "Move BlockChecked to a background thread\n\nAs reject messages are required to go out in-order (ie before any\nfurther messages are processed), this sadly requires that we\nfurther delay re-enabling a peer after a block has been processed\nby waiting for current validationinterface callbacks to drain.\n\nThis commit enables further reduction of cs_main in net_processing\nby allowing us to lock cs_peerstate before cs_main in BlockChecked\n(ie allows us to move things which are accessed in BlockChecked,\nincluding DoS state and rejects into CPeerState and out of\nCNodeState).",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-09T15:27:07Z"
      },
      "sha": "2ed0b647435b80946f7f000d573ff4b4e274ca70"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkM2E5NDFlOGM1NGYzMTg5NTJmNzAyZGIyNGZmZjU4ZTNlYTQxOWY3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3a941e8c54f318952f702db24fff58e3ea419f7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d3a941e8c54f318952f702db24fff58e3ea419f7",
      "tree": {
        "sha": "6bd3ca5cedf64f40afe78e695e3b70b244b4ee79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bd3ca5cedf64f40afe78e695e3b70b244b4ee79"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6bd3ca5cedf64f40afe78e695e3b70b244b4ee79\nparent 2ed0b647435b80946f7f000d573ff4b4e274ca70\nauthor Matt Corallo <git@bluematt.me> 1560807811 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098577 -0400\n\nMove mapBlockSource to cs_peerstate from cs_main\n\nThis technically resolves a race where entries are added to\nmapBlockSource before we know that they're non-malleated and then\nremoved only after PNB returns, though in practice this wasn't an\nissue since all access to mapBlockSource already held cs_peerstate.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+pEACgkQDMUhUxl5\nkaUMzQ/+KDVjV+sm0GhZ1jio7ntko3g2bJC1KMi3isOzSz8LwAQsF6BygeH/XeIz\n0gxV1dImIKf7X0UHxUjr70Kl7dLkZgLcbWsq2++5paCtMUJIcG13fhuRmKF+Wm1N\nfVFpFO0WNKJlU/juyhGQv2KvCDbhPSxG8bEgzdpxP6dVDnxMQRKD+ldchGG4pCOZ\nremObqtEtZek6TV3bfgqjUWJz6kmneVhxtb8mltMHNaLy67p9qkYlyn1zmU9ySbh\npuAPUFMzOMMv/glvHI2KqTKzYFau06k7eM3ACoORRi36zy2T2+E1EYA/kmr71ScE\nvP9z1EkvKWrABE0jh2hdSsgeiKsUu3vhb0+4Db49M64derygVEqjc4k9XoTTkfCr\nxzT+0Mq38NeqQobB9OlvzX2V/AHD0rD2JwGpyw+nUxuAb+Va3hMtyzdjiuKbQ0uV\ne9BWN9DbrLAr03VLhq+IBVWSEUe8+qo99xUbUEFb8Jm5bXzouP0D9Os/L61i9gfG\nL96LdLIJQXJmILCAzch621RPEajul+N8n2vpiuzW5pyCiwBNYRzB2jtJW17Bh5Jd\nkBt2u3jHk2e8MSuAa9Y+QRTaJl0i1NYOoUyS4zS9oDAzovRYrqQ56kffyHUr5En5\nvlrjM67+ezUtIDwjsz1swnQRLHozdzuaYp9L+D1/0GTymGXmFWI=\n=pJ9m\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2ed0b647435b80946f7f000d573ff4b4e274ca70",
          "sha": "2ed0b647435b80946f7f000d573ff4b4e274ca70",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2ed0b647435b80946f7f000d573ff4b4e274ca70"
        }
      ],
      "message": "Move mapBlockSource to cs_peerstate from cs_main\n\nThis technically resolves a race where entries are added to\nmapBlockSource before we know that they're non-malleated and then\nremoved only after PNB returns, though in practice this wasn't an\nissue since all access to mapBlockSource already held cs_peerstate.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:57Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-17T21:43:31Z"
      },
      "sha": "d3a941e8c54f318952f702db24fff58e3ea419f7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNmIxNzI5ZTY0MmUwNTczODg1ODc3MmY4ZDJiMzM0YjgzNjBiNzVl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6b1729e642e05738858772f8d2b334b8360b75e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d6b1729e642e05738858772f8d2b334b8360b75e",
      "tree": {
        "sha": "eb64b1c5151c3b0f5495f4a05471f08e9ace7ea2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eb64b1c5151c3b0f5495f4a05471f08e9ace7ea2"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree eb64b1c5151c3b0f5495f4a05471f08e9ace7ea2\nparent d3a941e8c54f318952f702db24fff58e3ea419f7\nauthor Carl Dong <contact@carldong.me> 1589844248 -0400\ncommitter Carl Dong <contact@carldong.me> 1590098578 -0400\n\nvalidationinterface: Use NewPoWValidBlock as sync test instead.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl7G+pIACgkQDMUhUxl5\nkaXqdhAAqwNb03i8sVk7mAFWvkkpCk9Q+4dt+AEP1Sj+TsrmjL5rq/X05yJsxqdT\nIECDaI/LjYFQ7OIyUfwNKwX62+a/GZiOM5K6OQaFgn/JeQuxUQFSQqm+p1/IO/FO\nqJYJzzj+BE0vvTkj+F2U60/OJcrXNPwOl4H5OqdvCTDXQdgMf+QXiR7ycXTZsvMu\nq6gjpH3UcIxlUZAB/iTr9DfzHtd03CbumCxHIOqEcLB7FLuuiniRvecRIL6UzLM2\nRpTo0ufHZfWSz8eFc5G5eVvilu/o8JraQHU4/8ijvXd58teoO0WcygNTpajY75+u\nslbBn4eCxoWksFC1fZnX0j4iOneF/wuZs0/VbOb8OwUiMYUCDP+Iy1Ka1Z0E1fUG\ngca7aDG13noaXPIND1dVlJrTv8GI+UAGh4Nel17hYuJP12KzVrCLQIJcm2i9Z04c\n3zb8x1Ab4bzLY6GAIfBw3yXZ5nP2NLD824YZTbF36W+AeCKhoW8KXSlz9d9NcYuH\nA5DOz5N7peLouiIx98ZpaVBzQO7Ybl0MzX8Hb8bJh90/w6G5u7iMV0a12eMFIWwp\ncedZeO4PI0tV5Eis7t3gp7XHJXzwMIgHdK2eKdojvwnT5IgdBdNk7Ba/PQL9JS5P\nkHYoHLDz0DO5bZFDOHa15jBdudnMHz0au7gtBhvb1oe6VcfVFPY=\n=wPEB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3a941e8c54f318952f702db24fff58e3ea419f7",
          "sha": "d3a941e8c54f318952f702db24fff58e3ea419f7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d3a941e8c54f318952f702db24fff58e3ea419f7"
        }
      ],
      "message": "validationinterface: Use NewPoWValidBlock as sync test instead.",
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-21T22:02:58Z"
      },
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-05-18T23:24:08Z"
      },
      "sha": "d6b1729e642e05738858772f8d2b334b8360b75e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3362512296,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzM2MjUxMjI5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3362512296",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-21T22:05:52Z"
    },
    {
      "event": "commented",
      "id": 632370917,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjM3MDkxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632370917",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-21T22:06:45Z",
      "updated_at": "2020-05-21T22:06:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Got the unit tests and functional tests to pass!",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-632370917",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "reviewed",
      "id": 417226161,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MjI2MTYx",
      "url": null,
      "actor": null,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Great to see progress on this, for now just high-level comments calling for better comments . I will review John PR again and then your linked notes to help to make them easier to read. I think that's the right way to come with a clear display of what is the current validation model, what this changes propose to do and why. There is so much context, that we can't expect all reviewers to do the PR context history digging by themselves.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#pullrequestreview-417226161",
      "submitted_at": "2020-05-22T23:54:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
    },
    {
      "event": "commented",
      "id": 823380098,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzM4MDA5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823380098",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-20T15:45:21Z",
      "updated_at": "2021-04-20T15:45:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "Not planning to work on this anytime soon unfortunately.",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-823380098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "closed",
      "id": 4620072098,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDYyMDA3MjA5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4620072098",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-20T15:45:21Z"
    },
    {
      "event": "commented",
      "id": 823421533,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzQyMTUzMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823421533",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-20T16:30:40Z",
      "updated_at": "2021-04-20T16:30:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "![image](https://user-images.githubusercontent.com/1063656/115432151-f68a7900-a1fd-11eb-9a0e-9a29702d40b4.png)\r\n\r\n \r\n\r\nLet me know if you pick this up again!",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-823421533",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "labeled",
      "id": 4623403909,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ2MjM0MDM5MDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4623403909",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-21T08:05:39Z",
      "label": {
        "name": "Up for grabs",
        "color": "99a810"
      }
    },
    {
      "event": "locked",
      "id": 7216535410,
      "node_id": "LOE_lADOABII584kxfqgzwAAAAGuI5dy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7216535410",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-18T18:23:23Z",
      "lock_reason": "resolved"
    },
    {
      "event": "commented",
      "id": 1550945493,
      "node_id": "IC_kwDOABII585ccYzV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550945493",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-17T08:07:13Z",
      "updated_at": "2023-05-17T08:07:13Z",
      "author_association": "MEMBER",
      "body": "From my research it follows that the \"[Move BlockChecked to a background thread](https://github.com/bitcoin/bitcoin/pull/18963/commits/2ed0b647435b80946f7f000d573ff4b4e274ca70)\" commit fixes a lock-order-inversion in the MessageHandler thread.\r\n\r\nSee https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-1514928912.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#issuecomment-1550945493",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18963"
    },
    {
      "event": "unlocked",
      "id": 9266168708,
      "node_id": "UNLOE_lADOABII584kxfqgzwAAAAIoToOE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9266168708",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-17T08:12:59Z"
    },
    {
      "event": "unlabeled",
      "id": 10037432531,
      "node_id": "UNLE_lADOABII584kxfqgzwAAAAJWRxDT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10037432531",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-08T16:03:11Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "locked",
      "id": 13792175471,
      "node_id": "LOE_lADOABII584kxfqgzwAAAAM2E-Vv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13792175471",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-07T13:03:38Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429490419",
      "pull_request_review_id": 417226161,
      "id": 429490419,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5MDQxOQ==",
      "diff_hunk": "@@ -237,6 +248,30 @@ namespace {\n } // namespace\n \n namespace {\n+/**\n+ * Maintain state about nodes, protected by our own lock. Historically we put all\n+ * peer tracking state in CNodeState, however this results in significant cs_main\n+ * contention. Thus, new state tracking should go here, and we should eventually\n+ * move most (non-validation-specific) state here.",
      "path": "src/net_processing.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "original_commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you should define more difference between validation-state and non-validation-state. Right now peer tracking state is spread among multiple class like `CNode` with `TxRelay` or `CNodeState` and now `CPeerState`. We should have a clear idea of _what_ should go _where_, according to which thread uses it. You should also explain how `CPeerState` aims to reduce `cs_main` contention with regards to the new threading model.",
      "created_at": "2020-05-22T23:42:31Z",
      "updated_at": "2020-05-22T23:54:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#discussion_r429490419",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429490419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 255,
      "original_line": 255,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491029",
      "pull_request_review_id": 417226161,
      "id": 429491029,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5MTAyOQ==",
      "diff_hunk": "@@ -237,6 +248,30 @@ namespace {\n } // namespace\n \n namespace {\n+/**\n+ * Maintain state about nodes, protected by our own lock. Historically we put all\n+ * peer tracking state in CNodeState, however this results in significant cs_main\n+ * contention. Thus, new state tracking should go here, and we should eventually\n+ * move most (non-validation-specific) state here.\n+ */\n+struct CPeerState {\n+    //! If this peer generated some headers for us to add, we store the resulting\n+    //! future here and wait for it to complete before we process more data from this\n+    //! peer.\n+    std::future<bool> pending_block_processing;\n+    //! The hash of the block which is pending download.\n+    uint256 pending_block_hash;\n+    //! Once we've finished processing a block from this peer, we must still wait for\n+    //! any related callbacks to fire (to ensure, specifically, that rejects go out",
      "path": "src/net_processing.cpp",
      "position": 46,
      "original_position": 46,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "original_commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is reject here making reference to reject messages ? I think it doesn't make sense anymore post-#15437 and post-#17004. Also you may lay out the expected callback sequence (as we do for `TransactionRemovedFromMempool` in `src/validationinterface.h`). ",
      "created_at": "2020-05-22T23:46:53Z",
      "updated_at": "2020-05-22T23:54:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#discussion_r429491029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 265,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491095",
      "pull_request_review_id": 417226161,
      "id": 429491095,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5MTA5NQ==",
      "diff_hunk": "@@ -1973,6 +2047,23 @@ void static ProcessOrphanTx(CConnman* connman, CTxMemPool& mempool, std::set<uin\n     }\n }\n \n+/**\n+ *  A block has been processed. Handle potential peer punishment and housekeeping.",
      "path": "src/net_processing.cpp",
      "position": 189,
      "original_position": 189,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "original_commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Please define more \"housekeeping\".",
      "created_at": "2020-05-22T23:47:32Z",
      "updated_at": "2020-05-22T23:54:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#discussion_r429491095",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2051,
      "original_line": 2051,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491238",
      "pull_request_review_id": 417226161,
      "id": 429491238,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5MTIzOA==",
      "diff_hunk": "@@ -3082,30 +3167,22 @@ bool ProcessMessage(CNode* pfrom, const std::string& msg_type, CDataStream& vRec\n                 // updated, etc.\n                 MarkBlockAsReceived(resp.blockhash); // it is now an empty pointer\n                 fBlockRead = true;\n-                // mapBlockSource is used for potentially punishing peers and\n-                // updating which peers send us compact blocks, so the race\n-                // between here and cs_main in ProcessNewBlock is fine.\n-                // BIP 152 permits peers to relay compact blocks after validating\n-                // the header only; we should not punish peers if the block turns\n-                // out to be invalid.\n-                mapBlockSource.emplace(resp.blockhash, std::make_pair(pfrom->GetId(), false));\n             }\n         } // Don't hold cs_main when we call into ProcessNewBlock\n         if (fBlockRead) {\n-            bool fNewBlock = false;\n+            // BIP 152 permits peers to relay compact blocks after validating",
      "path": "src/net_processing.cpp",
      "position": 283,
      "original_position": 283,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "original_commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure that BIP152 low-bandwidth authorizes invalid header propagation, maybe precise.",
      "created_at": "2020-05-22T23:48:14Z",
      "updated_at": "2020-05-22T23:54:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#discussion_r429491238",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491238"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3173,
      "original_line": 3173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491376",
      "pull_request_review_id": 417226161,
      "id": 429491376,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5MTM3Ng==",
      "diff_hunk": "@@ -3729,23 +3729,10 @@ static FlatFilePos SaveBlockToDisk(const CBlock& block, int nHeight, const CChai\n     return blockPos;\n }\n \n-/** Store block on disk. If dbp is non-nullptr, the file is known to already reside on disk */\n-bool CChainState::AcceptBlock(const std::shared_ptr<const CBlock>& pblock, BlockValidationState& state, const CChainParams& chainparams, CBlockIndex** ppindex, bool fRequested, const FlatFilePos* dbp, bool* fNewBlock)\n+bool CChainState::ShouldMaybeWrite(CBlockIndex* pindex, bool fRequested)",
      "path": "src/validation.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "original_commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Please can you comment on what conditional write is laying on.",
      "created_at": "2020-05-22T23:49:32Z",
      "updated_at": "2020-05-22T23:54:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#discussion_r429491376",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3732,
      "original_line": 3732,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491503",
      "pull_request_review_id": 417226161,
      "id": 429491503,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5MTUwMw==",
      "diff_hunk": "@@ -3812,39 +3844,135 @@ bool CChainState::AcceptBlock(const std::shared_ptr<const CBlock>& pblock, Block\n     return true;\n }\n \n-bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<const CBlock> pblock, bool fForceProcessing, bool *fNewBlock)\n+void CChainState::AwaitBlockValidationParked()\n+{\n+    std::unique_lock<RecursiveMutex> lock(m_cs_block_validation_queue);\n+    m_cv_block_validation_parked.wait(lock, [this] { return m_block_validation_parked; });\n+}\n+\n+void CChainState::ProcessBlockValidationQueue()\n+{\n+    while (true) {\n+        std::shared_ptr<const CBlock> pblock;\n+        bool fForceProcessing;\n+        std::promise<bool> result_promise;\n+        {\n+            std::unique_lock<RecursiveMutex> lock(m_cs_block_validation_queue);\n+            if (m_block_validation_queue.empty()) {\n+                m_block_validation_parked = true;\n+                m_cv_block_validation_parked.notify_all();\n+                m_cv_block_validation_queue.wait_for(lock, std::chrono::milliseconds(100));\n+                m_block_validation_parked = false;\n+            }\n+            if (ShutdownRequested())\n+                break;\n+            boost::this_thread::interruption_point();\n+            if (m_block_validation_queue.empty()) {\n+                continue;\n+            }\n+\n+            std::tuple<std::shared_ptr<const CBlock>, bool, std::promise<bool>>& tuple = m_block_validation_queue.front();\n+            pblock = std::move(std::get<0>(tuple));\n+            fForceProcessing = std::get<1>(tuple);\n+            result_promise = std::move(std::get<2>(tuple));\n+            m_block_validation_queue.pop_front();\n+        }\n+\n+        CChainParams chainparams = Params();\n+        {\n+            LOCK(cs_main);\n+\n+            CBlockIndex* pindex = LookupBlockIndex(pblock->GetHash());\n+            assert(pindex);\n+\n+            // Check that we still want this block\n+            if (!ShouldMaybeWrite(pindex, fForceProcessing)) {\n+                result_promise.set_value(false);\n+                continue;\n+            }\n+\n+            // We already verified the block in ProcessNewBlock, so no need to check merkle roots here again\n+\n+            // Header is valid/has work, merkle tree and segwit merkle tree are good...RELAY NOW\n+            // (but if it does not build on our best tip, let the SendMessages loop relay it)\n+            if (!IsInitialBlockDownload() && m_chain.Tip() == pindex->pprev)\n+                GetMainSignals().NewPoWValidBlock(pindex, pblock);\n+\n+            BlockValidationState state;\n+            try {\n+                FlatFilePos blockPos = SaveBlockToDisk(*pblock, pindex->nHeight, chainparams, nullptr);\n+                if (blockPos.IsNull()) {\n+                    error(strprintf(\"%s: Failed to find position to write new block to disk\", __func__).c_str());\n+                    result_promise.set_value(false);\n+                    continue;\n+                }\n+                ReceivedBlockTransactions(*pblock, pindex, blockPos, chainparams.GetConsensus());\n+            } catch (const std::runtime_error& e) {\n+                AbortNode(state, std::string(\"System error: \") + e.what());\n+            }\n+\n+            FlushStateToDisk(chainparams, state, FlushStateMode::NONE);\n+\n+            CheckBlockIndex(chainparams.GetConsensus());\n+\n+            if (state.IsError()) {\n+                result_promise.set_value(false);\n+                continue;\n+            }\n+        }\n+\n+        NotifyHeaderTip();\n+\n+        BlockValidationState state; // Only used to report errors, not invalidity - ignore it",
      "path": "src/validation.cpp",
      "position": 195,
      "original_position": 195,
      "commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "original_commit_id": "d6b1729e642e05738858772f8d2b334b8360b75e",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You should point where errors are distinguished from invalidity.",
      "created_at": "2020-05-22T23:50:28Z",
      "updated_at": "2020-05-22T23:54:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18963#discussion_r429491503",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429491503"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18963"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3926,
      "original_line": 3926,
      "side": "RIGHT"
    }
  ]
}