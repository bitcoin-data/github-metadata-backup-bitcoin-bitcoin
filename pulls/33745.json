{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745",
    "id": 2962918038,
    "node_id": "PR_kwDOABII586wmoqW",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33745",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33745.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33745.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6eaa00fe20206baedc0d8ade5bb8d066ea615704",
    "number": 33745,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "mining: check witness commitment in submitBlock",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "When an IPC client requests a new block template via the Mining interface, we hold on to its `CBlock`. That way when they call `submitSolution()` we can modify it in place, rather than having to reconstruct the full block like the `submitblock` RPC does.\r\n\r\nBefore this commit however we forgot to invalidate `m_checked_witness_commitment`, which we should since the client brings a new coinbase.\r\n\r\nThis would cause us to accept an invalid chaintip.\r\n\r\nFix this and add a test to confirm that we now reject such a block. As a sanity check, we add a second node to the test and confirm that will accept our mined block.\r\n\r\nAs first noticed in #33374 the IPC code takes the coinbase as provided, unlike the `submitblock` RPC which calls `UpdateUncommittedBlockStructures()` and adds witness commitment to the coinbase if it was missing.\r\n\r\nAlthough that could have been an alternative fix, we instead document that IPC clients are expected to provide the full coinbase including witness commitment.\r\n\r\nPatch to produce the original issue:\r\n\r\n```diff\r\ndiff --git a/src/node/miner.cpp b/src/node/miner.cpp\r\nindex b988e28a3f..28e9048a4d 100644\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -450,15 +450,10 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\r\n     }\r\n     block.nVersion = version;\r\n     block.nTime = timestamp;\r\n     block.nNonce = nonce;\r\n     block.hashMerkleRoot = BlockMerkleRoot(block);\r\n-\r\n-    // Reset cached checks\r\n-    block.m_checked_witness_commitment = false;\r\n-    block.m_checked_merkle_root = false;\r\n-    block.fChecked = false;\r\n }\r\n\r\n std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\r\n                                                       KernelNotifications& kernel_notifications,\r\n                                                       CTxMemPool* mempool,\r\ndiff --git a/test/functional/interface_ipc.py b/test/functional/interface_ipc.py\r\nindex cce56e3294..bf1b7048ab 100755\r\n--- a/test/functional/interface_ipc.py\r\n+++ b/test/functional/interface_ipc.py\r\n@@ -216,22 +216,22 @@ class IPCInterfaceTest(BitcoinTestFramework):\r\n             assert_equal(res.result, True)\r\n\r\n             # The remote template block will be mutated, capture the original:\r\n             remote_block_before = await self.parse_and_deserialize_block(template, ctx)\r\n\r\n-            self.log.debug(\"Submitted coinbase must include witness\")\r\n+            self.log.debug(\"Submitted coinbase with missing witness is accepted\")\r\n             assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\r\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\r\n-            assert_equal(res.result, False)\r\n+            assert_equal(res.result, True)\r\n\r\n             self.log.debug(\"Even a rejected submitBlock() mutates the template's block\")\r\n             # Can be used by clients to download and inspect the (rejected)\r\n             # reconstructed block.\r\n             remote_block_after = await self.parse_and_deserialize_block(template, ctx)\r\n             assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\r\n\r\n-            self.log.debug(\"Submit again, with the witness\")\r\n+            self.log.debug(\"Submit again, with the witness - does not replace the invalid block\")\r\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\r\n             assert_equal(res.result, True)\r\n\r\n             self.log.debug(\"Block should propagate\")\r\n             assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)\r\n```\r\n",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2025-10-30T12:02:55Z",
    "updated_at": "2026-01-22T09:01:05Z",
    "closed_at": "2025-11-12T15:04:13Z",
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2025-11-12T15:04:13Z",
    "merged_by": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "merge_commit_sha": "3c3c6adb72608842aaf60f9986f16610a7260cf2",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "Sjors:2025/10/submit-solution-doc",
      "ref": "2025/10/submit-solution-doc",
      "sha": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 11,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 284529,
        "default_branch": "master",
        "open_issues_count": 6,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-22T09:22:34Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2026-01-14T16:26:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "305384a0372a13fef8dc7029fc79eaf79d8f4bc1",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 38761,
        "stargazers_count": 87735,
        "watchers_count": 87735,
        "size": 302195,
        "default_branch": "master",
        "open_issues_count": 751,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-21T22:09:37Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2026-01-22T09:38:10Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 57,
    "deletions": 7,
    "changed_files": 4,
    "commits": 3,
    "review_comments": 26,
    "comments": 12
  },
  "events": [
    {
      "event": "labeled",
      "id": 20607345430,
      "node_id": "LE_lADOABII587U0PtezwAAAATMSyMW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20607345430",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T12:02:59Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 3467666654,
      "node_id": "IC_kwDOABII587OsGTe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3467666654",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T12:03:01Z",
      "updated_at": "2025-11-11T13:18:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33745.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3474302360), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3410154831), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3444353769) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33819](https://github.com/bitcoin/bitcoin/pull/33819) (mining: add getCoinbase() by Sjors)\n* [#32420](https://github.com/bitcoin/bitcoin/pull/32420) (miner: drop dummy extraNonce in coinbase scriptSig for templates requested via IPC by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3467666654",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "reviewed",
      "id": 3399316388,
      "node_id": "PRR_kwDOABII587KnXOk",
      "url": null,
      "actor": null,
      "commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T12:15:48Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3399316388",
      "submitted_at": "2025-10-30T12:15:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3399416295,
      "node_id": "PRR_kwDOABII587Knvnn",
      "url": null,
      "actor": null,
      "commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T12:47:40Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3399416295",
      "submitted_at": "2025-10-30T12:47:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3399448986,
      "node_id": "PRR_kwDOABII587Kn3ma",
      "url": null,
      "actor": null,
      "commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T13:34:39Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3399448986",
      "submitted_at": "2025-10-30T13:34:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "commented",
      "id": 3468059025,
      "node_id": "IC_kwDOABII587OtmGR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3468059025",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T13:38:26Z",
      "updated_at": "2025-10-30T13:38:26Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/18939943748/job/54075967306?pr=33745#step:9:2351:\r\n```bash\r\n\r\ntest/miner_tests.cpp(70): Entering test suite \"miner_tests\"\r\ntest/miner_tests.cpp(686): Entering test case \"CreateNewBlock_validity\"\r\n<snip>\r\n 2025-10-30T12:08:21.221330Z [test] [validationinterface.cpp:218] [void ValidationSignals::BlockConnected(ChainstateRole, const std::shared_ptr<const CBlock> &, const CBlockIndex *)] [validation] Enqueuing BlockConnected: block hash=000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f block height=0\r\n2025-10-30T12:08:21.221451Z [scheduler] [validationinterface.cpp:218] [auto ValidationSignals::BlockConnected(ChainstateRole, const std::shared_ptr<const CBlock> &, const CBlockIndex *)::(anonymous class)::operator()() const] [validation] BlockConnected: block hash=000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60node/miner.cpp:187 CreateNewBlock: Assertion `pblock->m_checked_witness_commitment' failed.\r\n```",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3468059025",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20609772897,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATMcC1h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20609772897",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "43b92a2727ef99a9bfd41c6e3467d04c868fba2f",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/43b92a2727ef99a9bfd41c6e3467d04c868fba2f",
      "created_at": "2025-10-30T13:44:55Z"
    },
    {
      "event": "commented",
      "id": 3468101541,
      "node_id": "IC_kwDOABII587Otwel",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3468101541",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T13:45:45Z",
      "updated_at": "2025-10-30T13:45:45Z",
      "author_association": "MEMBER",
      "body": "@TheCharlatan wrote:\r\n\r\n> What about the other checked flags? Should we just reset all of them in `AddMerkleRootAndCoinbase`?\r\n\r\nDone and pushed, but still checking the CI failure.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3468101541",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "mentioned",
      "id": 20609796828,
      "node_id": "MEE_lADOABII587U0PtezwAAAATMcIrc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20609796828",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T13:45:47Z"
    },
    {
      "event": "subscribed",
      "id": 20609796874,
      "node_id": "SE_lADOABII587U0PtezwAAAATMcIsK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20609796874",
      "actor": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T13:45:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20609821071,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATMcOmP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20609821071",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "fcb8b982f159f68edc128a835026059210b57ff7",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/fcb8b982f159f68edc128a835026059210b57ff7",
      "created_at": "2025-10-30T13:46:43Z"
    },
    {
      "event": "commented",
      "id": 3468117727,
      "node_id": "IC_kwDOABII587Ot0bf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3468117727",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-30T13:48:45Z",
      "updated_at": "2025-10-30T13:48:45Z",
      "author_association": "MEMBER",
      "body": "I dropped `Assume(pblock->m_checked_witness_commitment);` from `miner.cpp`, since the assumptions seems to be wrong.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3468117727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20611759678,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATMjn4-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20611759678",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "created_at": "2025-10-30T14:54:30Z"
    },
    {
      "event": "reviewed",
      "id": 3401753833,
      "node_id": "PRR_kwDOABII587KwqTp",
      "url": null,
      "actor": null,
      "commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T21:33:55Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3401753833",
      "submitted_at": "2025-10-30T21:33:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3401818466,
      "node_id": "PRR_kwDOABII587Kw6Fi",
      "url": null,
      "actor": null,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T22:06:07Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3401818466",
      "submitted_at": "2025-10-30T22:06:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3401822551,
      "node_id": "PRR_kwDOABII587Kw7FX",
      "url": null,
      "actor": null,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T22:42:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4. Code, test, documentation updates all seem like improvements and it is good to make submitSolution provide better feedback. I do think more improvements could be made here: documentation could be updated to say what requirements on submitSolution inputs are, and I think BlockTemplate accessors could be added so miners do not need to make hardcoded assumptions about the coinbase transaction? (https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477980297). It would also be nice to return error messages and not just the false return value.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3401822551",
      "submitted_at": "2025-10-30T22:42:04Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3402068948,
      "node_id": "PRR_kwDOABII587Kx3PU",
      "url": null,
      "actor": null,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-30T23:31:47Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3402068948",
      "submitted_at": "2025-10-30T23:31:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3403009700,
      "node_id": "PRR_kwDOABII587K1c6k",
      "url": null,
      "actor": null,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-31T08:24:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3403009700",
      "submitted_at": "2025-10-31T08:24:22Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20628230545,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATNidGR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20628230545",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "2fc95ca731b52ca419215109c568e89bf683a94b",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/2fc95ca731b52ca419215109c568e89bf683a94b",
      "created_at": "2025-10-31T08:53:52Z"
    },
    {
      "event": "commented",
      "id": 3471963619,
      "node_id": "IC_kwDOABII587O8fXj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3471963619",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T08:55:31Z",
      "updated_at": "2025-10-31T08:55:31Z",
      "author_association": "MEMBER",
      "body": "Pushed [7d57c4e](https://github.com/bitcoin/bitcoin/commit/7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4) to [2fc95ca](https://github.com/bitcoin/bitcoin/commit/2fc95ca731b52ca419215109c568e89bf683a94b): [compare](https://github.com/bitcoin/bitcoin/compare/7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4..2fc95ca731b52ca419215109c568e89bf683a94b). No behavior change.\r\n\r\nI added a patch the to PR description that reproduces the original issue.\r\n\r\nExpanded the `submitSolution` documentation to indicate that a duplicate block is not considered a failure, and why.\r\n\r\nI kept all three reset caches for simplicity.\r\n\r\nNote that `m_checked_merkle_root` will be false anyway, because `BlockAssembler::CreateNewBlock` skips the merle root check. If we really wanted to skip that check, since we created the merle root ourselves, we would have to modify `ProcessNewBlock` to forward `check_merkle_root` to its `CheckBlock` call. That seems out of scope.\r\n\r\nSimilarly `fChecked` will already be `false` because the only place that sets it to true is guarded by `if (fCheckPOW && fCheckMerkleRoot)`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3471963619",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "commented",
      "id": 3472031005,
      "node_id": "IC_kwDOABII587O8v0d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3472031005",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T09:11:41Z",
      "updated_at": "2025-10-31T09:14:53Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky wrote:\r\n\r\n> I do think more improvements could be made here:\r\n\r\nThese could be followups, some thoughts:\r\n\r\n> - documentation could be updated to say what requirements on submitSolution inputs are\r\n\r\nNot sure what to write there, basically whatever consensus requires. Previously (external) mining software would generate the whole coinbase from scratch and we never really documented that. \r\n\r\nThe Stratum v2 spec does specify what their `SubmitSolution` message should look like: https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#77-submitsolution-client-server\r\n\r\nThat's presumably based on their understanding of our code, so we shouldn't blindly copy-paste it.\r\n\r\n> and I think BlockTemplate accessors could be added so miners do not need to make hardcoded assumptions about the coinbase transaction?  (https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477980297).\r\n\r\nThe Template Provider I implemented takes all sorts of stuff from the coinbase in order to produce its [NewTemplate message](https://stratumprotocol.org/specification/07-Template-Distribution-Protocol/#72-newtemplate-server-client):\r\n\r\n- https://github.com/Sjors/sv2-tp/blob/50ea909bc43b9c7ad3ccb20b142533317a9ac993/src/sv2/messages.cpp#L8-L32\r\n- https://github.com/Sjors/sv2-tp/blob/50ea909bc43b9c7ad3ccb20b142533317a9ac993/src/sv2/template_provider.cpp#L557-L562\r\n\r\nThis could be refactored to use more accessors. Though I'd be worried about having lots of back and forth IPC messages.\r\n\r\n> It would also be nice to return error messages and not just the false return value.\r\n\r\nIndeed, though this requires a refactor of `ProcessNewBlock`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3472031005",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "mentioned",
      "id": 20628645502,
      "node_id": "MEE_lADOABII587U0PtezwAAAATNkCZ-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20628645502",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T09:11:42Z"
    },
    {
      "event": "subscribed",
      "id": 20628645548,
      "node_id": "SE_lADOABII587U0PtezwAAAATNkCas",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20628645548",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T09:11:42Z"
    },
    {
      "event": "reviewed",
      "id": 3403234847,
      "node_id": "PRR_kwDOABII587K2T4f",
      "url": null,
      "actor": null,
      "commit_id": "2fc95ca731b52ca419215109c568e89bf683a94b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-31T09:19:18Z",
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3403234847",
      "submitted_at": "2025-10-31T09:19:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "commented",
      "id": 3472081330,
      "node_id": "IC_kwDOABII587O88Gy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3472081330",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T09:23:19Z",
      "updated_at": "2025-10-31T09:23:19Z",
      "author_association": "MEMBER",
      "body": "cc @ajtowns",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3472081330",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "mentioned",
      "id": 20628913869,
      "node_id": "MEE_lADOABII587U0PtezwAAAATNlD7N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20628913869",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T09:23:20Z"
    },
    {
      "event": "subscribed",
      "id": 20628913916,
      "node_id": "SE_lADOABII587U0PtezwAAAATNlD78",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20628913916",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T09:23:20Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwZDFiNmVmNGIxMjAzZTgwMjcxYzE2YzBkNWIxNzk1MjVkZTE5MTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00d1b6ef4b1203e80271c16c0d5b179525de1913",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/00d1b6ef4b1203e80271c16c0d5b179525de1913",
      "tree": {
        "sha": "49855f98a076c5514508a0b8c783caf0d05a3c9e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49855f98a076c5514508a0b8c783caf0d05a3c9e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 49855f98a076c5514508a0b8c783caf0d05a3c9e\nparent 72511fd02e72b74be11273e97bd7911786a82e54\nauthor Sjors Provoost <sjors@sprovoost.nl> 1761900333 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1761907648 +0100\n\ndoc: clarify UpdateUncommittedBlockStructures\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmkEk8AACgkQV/+b28ww\nEAmsAw//W+2mf5ugZ2Oc9S89GGo3lGiG2oMpyPqmercsHhcrWkEAoA7az3Wka7GF\nwIJ6yui/+IBc+s7L/65uy30QZ55gQlBZcM+okcHVAnTb9b4fI7rvU3iYF7d1hScz\n2+AONjstvzC857z/T1OmS1w/n+npbrFZGTSA5Jx3zonJtUTSSUSvqM9IrhENwypM\nZEVN03vH0WwYMEk/dInlc4u0sgHaKof+IWggKP0baowqoBm0WAdle6rDFDSa4nxi\ny8PWTBN0gP3ugJt7eg5p9WV2OeQpNioVtO6QQwmQ81lbMUAnnr3YXXCDz8r1eJpy\nfyDFvCyrIW3SZKQlVrg0Ahv+ntDdHUFfhvz61a5kx73AlqWcmWfFQU3kSLmHFC7O\ncJ6030T+TlnADBVlFCR4g6VPxgHesGDwnnhGUocoL6JPIdQE40GRRWTube1Ih7di\nA31071MkpsANe1BzgKiknyeoy4O4JZP5G3fz0CVepYJ5IhaDOvVWrIwTdj1d//Fq\nXQcBHpuhqOtt4YPQk26/BhWEyawqvNWm5BBJ2V2+thUOo2d0askMqf8Ffn1dOO0J\nKXxpVCHoP6bx12NHCSR6xDLQJ4pDqL2gda1sE/d55kFet3tTY5KOvEiBsJX4xisx\nMC36Op0/4Yt1ZXza6hKtArmOOkF8qbh2eEB5blmVhNkwY+FLr8o=\n=N5Dd\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/72511fd02e72b74be11273e97bd7911786a82e54",
          "sha": "72511fd02e72b74be11273e97bd7911786a82e54",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/72511fd02e72b74be11273e97bd7911786a82e54"
        }
      ],
      "message": "doc: clarify UpdateUncommittedBlockStructures",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-10-31T10:47:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-10-31T08:45:33Z"
      },
      "sha": "00d1b6ef4b1203e80271c16c0d5b179525de1913"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg2MmJkNDMyODM3ZWZlYjZhYjE0MzVmNzU0OTM1MDE2MThhYjMxOTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/862bd432837efeb6ab1435f75493501618ab3190",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/862bd432837efeb6ab1435f75493501618ab3190",
      "tree": {
        "sha": "cac2d5729ce5b61ffb85fd4e83b8f81186f72dfd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cac2d5729ce5b61ffb85fd4e83b8f81186f72dfd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree cac2d5729ce5b61ffb85fd4e83b8f81186f72dfd\nparent 00d1b6ef4b1203e80271c16c0d5b179525de1913\nauthor Sjors Provoost <sjors@sprovoost.nl> 1761907992 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1761907992 +0100\n\nmining: ensure witness commitment check in submitBlock\n\nWhen an IPC client requests a new block template via the Mining interface,\nwe hold on to its CBlock. That way when they call submitSolution() we can\nmodify it in place, rather than having to reconstruct the full block like\nthe submitblock RPC does.\n\nBefore this commit however we forgot to invalidate\nm_checked_witness_commitment, which we should since the client brings a\nnew coinbase.\n\nThis would cause us to accept an invalid chaintip.\n\nFix this and add a test to confirm that we now reject such a block.\nAs a sanity check, we add a second node to the test and confirm that will\naccept our mined block.\n\nNote that the IPC code takes the coinbase as provided, unlike the\nsubmitblock RPC which calls UpdateUncommittedBlockStructures() and adds\nwitness commitment to the coinbase if it was missing.\n\nAlthough that could have been an alternative fix, we instead document that\nIPC clients are expected to provide the full coinbase including witness\ncommitment.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmkElRgACgkQV/+b28ww\nEAnk1xAAsG7ERNc7BpDAkfas665U+s9rmGNPPLyt8twsFViUz6Y1DIHmPXWaN1CT\np3oA9zk8lJubwtYaTw/DGgpMI/4AhkMPHpTzhzAH2T3B/9EJDsUpMI84Vqm1Qe4X\noyxWg0Edjv0k9BS+zcZP+01NP05B9UrPjzcyrC5TC5Zuq6q/Mxf36DhaaIWhQUo1\no5SURJ3VfwmhFVhsUdspoeUObAZWl05y0LLRX3376rlSBqX4DqlPmqJPB8yI4/2H\nYIXaRYOlbZn3Sg+W+v4FvLSkfhIyXk7GSw15Jtl9OQp8vHTNXvEgeIGoYJGonAg7\nL3mCptKO716lflNLjGcIHhF6nUqekyNWx5M3qMdk/sQz2ZyAVG5ILhv4PNHrDo9C\nawrxVIEy5sTqmko4PNGgEPah7ZCp6nCEhh5O1NYLx4VF0ti6Ksw1h2mlXk/jvi2P\nMlbuGam54ApZtc06NUrHnup5JD9MgM/OBfrmRaVx6d+KUox0vM8g6sS3rs5IskWN\n5ee26YNdKgBjgMlz/Hk2RMHSK0DFbn8tFnZYGz07KaKF2KlxKc+oFCZN82KezfOG\n2BmrRYqoikMJWxiqp1fqvW3TDPsUG37/bbUcwW1tX3s4QEgoIBxN3HHp+R47zlml\nroBIxzWnsb/FCQFVn4P/B18AsU44queLJnd8nosliWkVP0BsMY0=\n=JJSf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00d1b6ef4b1203e80271c16c0d5b179525de1913",
          "sha": "00d1b6ef4b1203e80271c16c0d5b179525de1913",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/00d1b6ef4b1203e80271c16c0d5b179525de1913"
        }
      ],
      "message": "mining: ensure witness commitment check in submitBlock\n\nWhen an IPC client requests a new block template via the Mining interface,\nwe hold on to its CBlock. That way when they call submitSolution() we can\nmodify it in place, rather than having to reconstruct the full block like\nthe submitblock RPC does.\n\nBefore this commit however we forgot to invalidate\nm_checked_witness_commitment, which we should since the client brings a\nnew coinbase.\n\nThis would cause us to accept an invalid chaintip.\n\nFix this and add a test to confirm that we now reject such a block.\nAs a sanity check, we add a second node to the test and confirm that will\naccept our mined block.\n\nNote that the IPC code takes the coinbase as provided, unlike the\nsubmitblock RPC which calls UpdateUncommittedBlockStructures() and adds\nwitness commitment to the coinbase if it was missing.\n\nAlthough that could have been an alternative fix, we instead document that\nIPC clients are expected to provide the full coinbase including witness\ncommitment.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-10-31T10:53:12Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-10-31T10:53:12Z"
      },
      "sha": "862bd432837efeb6ab1435f75493501618ab3190"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20631303661,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATNuLXt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20631303661",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "58d21863c1cab88b225f231bc2bceee0714bca46",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/58d21863c1cab88b225f231bc2bceee0714bca46",
      "created_at": "2025-10-31T10:58:36Z"
    },
    {
      "event": "commented",
      "id": 3472525510,
      "node_id": "IC_kwDOABII587O-ojG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3472525510",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T10:59:39Z",
      "updated_at": "2025-10-31T10:59:39Z",
      "author_association": "MEMBER",
      "body": "I split the template block mutation test into a third commit and documented its history in the commit message.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3472525510",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20631344757,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATNuVZ1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20631344757",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7c7e6954902b59d3076d53b5b4b8470a3f9343bf",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/7c7e6954902b59d3076d53b5b4b8470a3f9343bf",
      "created_at": "2025-10-31T11:00:26Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZlYWEwMGZlMjAyMDZiYWVkYzBkOGFkZTViYjhkMDY2ZWE2MTU3MDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "tree": {
        "sha": "feeb793e058e76dc29b071def36bcaccadbd2082",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/feeb793e058e76dc29b071def36bcaccadbd2082"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree feeb793e058e76dc29b071def36bcaccadbd2082\nparent 862bd432837efeb6ab1435f75493501618ab3190\nauthor Sjors Provoost <sjors@sprovoost.nl> 1761908464 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1761908464 +0100\n\ntest: clarify submitBlock() mutates the template\n\nPR #33374 proposed a new Mining IPC method applySolution() which\ncould be used by clients to obtain the reconstructed block for\ninspection, especially in the case of a rejected block.\n\nHowever it was pointed out during review that submitBlock() modified\nthe template CBlock in place, so the client can just call getBlock()\nand no new method is needed.\n\nThis commit adds a test to document that (now intentional) behavior.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmkElxkACgkQV/+b28ww\nEAnZchAApXw7D7OdSfBoNbfPfax1SzCWKN7Miysy8ygEcP+mK8bipkIJj802+iU0\nTX0+BkPVyDqp87q05voDl4BWxu8A9PD1z8cqIs7w+9rv//YIN7o7MW1GXcsCSL6a\nIaDT4DS8MFPkYu69o/AC5EZrQIIxIBh68A/XiPwJobtlB/YIsFncxB7hKhKs3N5L\n9jAsaED2Lv3jfGqqArDw5FiWNniGodUW4sS0Ja1zxH1EQh13Vs1TanknooCHEoEh\n9syKmNNezrC2ilO0O1va8MzgJQBBd2XqmixmWzdV5Gz43g52tJo0R8x8OwyzghVd\niJ0+yZRxS1osXLNwFSeMK8lt4JbKUplmeSwLyW4LxxUagFeHFa1DC722MsafQP33\nHZgB5yWaecSELitOYAWtU7O6ChUKaY4xFYwfBISkIx5hjvN747Hb9JWRJArRQ8OT\neRc4V5jXPBPe/p9UwHprT5SyCesSEEniYILm4wgPo1/nDXDT5CIYOH08yxmM94li\nqKquAE3r0W8DlwzDCgoaentAKQgL6x/I6ZbLppvoJIhaXKoYBBVkSblXJGOICofo\n76bONtPuhiHy8mrFSISRtURrReJz1rAeWgjVMv8p35MbVOWklRQJL3W0HemVkeRB\nu/E+dwwd/vF/fW+jX1ZQwm3JsjrzZa6IogCy1Ph1q7Wpx6HxGu8=\n=xuer\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/862bd432837efeb6ab1435f75493501618ab3190",
          "sha": "862bd432837efeb6ab1435f75493501618ab3190",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/862bd432837efeb6ab1435f75493501618ab3190"
        }
      ],
      "message": "test: clarify submitBlock() mutates the template\n\nPR #33374 proposed a new Mining IPC method applySolution() which\ncould be used by clients to obtain the reconstructed block for\ninspection, especially in the case of a rejected block.\n\nHowever it was pointed out during review that submitBlock() modified\nthe template CBlock in place, so the client can just call getBlock()\nand no new method is needed.\n\nThis commit adds a test to document that (now intentional) behavior.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-10-31T11:01:04Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2025-10-31T11:01:04Z"
      },
      "sha": "6eaa00fe20206baedc0d8ade5bb8d066ea615704"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 20631381618,
      "node_id": "HRFPE_lADOABII587U0PtezwAAAATNueZy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20631381618",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "commit_url": "https://api.github.com/repos/Sjors/bitcoin/commits/6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "created_at": "2025-10-31T11:01:56Z"
    },
    {
      "event": "commented",
      "id": 3473794785,
      "node_id": "IC_kwDOABII587PDebh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3473794785",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T16:10:30Z",
      "updated_at": "2025-10-31T16:10:30Z",
      "author_association": "MEMBER",
      "body": "I wrote:\r\n\r\n> The Template Provider I implemented takes all sorts of stuff from the coinbase in order to produce its NewTemplate message\r\n\r\nThis is a continuing source of confusion, see e.g. https://github.com/Sjors/sv2-tp/pull/55#pullrequestreview-3404172536\r\n\r\nOrthogonal to this PR, but I plan to add some getters to the interface later.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3473794785",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "commented",
      "id": 3474302360,
      "node_id": "IC_kwDOABII587PFaWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3474302360",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:18:54Z",
      "updated_at": "2025-11-12T15:32:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 6eaa00fe20206baedc0d8ade5bb8d066ea615704. Just documentation updates and test clarifications since last review, also splitting up a commit. \r\n\r\n---\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3472031005\r\n\r\n> > and I think BlockTemplate accessors could be added so miners do not need to make hardcoded assumptions about the coinbase transaction?  ([#33745 (comment)](https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477980297)).\r\n> \r\n> The Template Provider I implemented takes all sorts of stuff from the coinbase [...]\r\n\r\nThanks, those links to your implementation were really helpful. I didn't realize all of the required information for a possible protocol upgrade is actually available from getCoinbaseTx() and getWitnessCommitmentIndex() and not that hard to access. It's really the SV2 protocol that needs to change to be more future proof, not the mining interface.\r\n\r\n\r\n> This could be refactored to use more accessors. Though I'd be worried about having lots of back and forth IPC messages.\r\n\r\nYeah I wouldn't suggest adding lots of accessors just for convenience. If there are maybe a handful of fields that would be useful to return, could have a single getCoinbaseInfo() or similar method. But seems not very important.\r\n\r\n\r\n> > It would also be nice to return error messages and not just the false return value.\r\n> \r\n> Indeed, though this requires a refactor of `ProcessNewBlock`.\r\n\r\nYes, and definitely tangential to this PR, but it does seem like this change wouldn't be a big refactor since there is already a [BlockValidationState](https://github.com/bitcoin/bitcoin/blob/da6f041e39efaf64a84b748556e321021ec1f756/src/validation.cpp#L4517) variable that can be returned.\r\n\r\n\r\n\r\n> > * documentation could be updated to say what requirements on submitSolution inputs are\r\n> \r\n> Not sure what to write there, basically whatever consensus requires. Previously (external) mining software would generate the whole coinbase from scratch and we never really documented that.\r\n\r\nI guess the following comment would be overkill, but honestly I find this issue pretty confusing and think if we are going to be in an awkward state where external [software](https://github.com/bitcoin/bitcoin/pull/33374#issuecomment-3299129244) and [protocols](https://mirror.b10c.me/bitcoin-bitcoin/33374#issuecomment-3299309843) are making hardcoded assumptions about the node it could be useful to have a description of what's required and why.\r\n\r\nI asked chatgpt to write a comment describing requirements fully and maybe this is just useful for me personally, but to me it covers the information that seems useful to know:\r\n\r\n```c++\r\n/**\r\n * Construct a block from this template using the supplied header fields and\r\n * coinbase transaction, then submit it for processing/broadcast.\r\n *\r\n * SegWit / coinbase requirements:\r\n *   - When a witness commitment is expected for this template\r\n *     (i.e. getWitnessCommitmentIndex() != -1), the caller MUST supply a\r\n *     coinbase that is consistent with the templateâ€™s commitment semantics:\r\n *\r\n *       â€¢ Coinbase OUTPUT at the commitment index with script\r\n *         OP_RETURN 0xaa21a9ed <32-byte commitment>.\r\n *\r\n *       â€¢ Coinbase INPUT witness stack that contains a single 32-byte\r\n *         â€œwitness-reserved valueâ€ R at vin[0].scriptWitness.stack[0].\r\n *\r\n *       â€¢ The 32-byte commitment MUST equal:\r\n *            SHA256d( WitnessMerkleRoot(block) || R )\r\n *\r\n *     IMPORTANT (future-proofing): The value R is consensus-opaque. Its\r\n *     contents and required construction MAY change via soft-fork in the\r\n *     future. Clients MUST treat R as a node-provided value and MUST NOT\r\n *     invent or substitute their own, unless the template explicitly\r\n *     authorizes client-chosen R.\r\n *\r\n * Provided helpers on BlockTemplate:\r\n *   - getCoinbaseTx()               : Base coinbase transaction for this template\r\n *                                     satisfying the requirements.\r\n *   - getWitnessCommitmentIndex()   : vout index of the witness-commitment OP_RETURN\r\n *                                     or -1 if no commitment is expected.\r\n *   - getCoinbaseCommitment()       : Serialized OP_RETURN script (0xaa21a9ed || 32B payload)\r\n *                                     to place at the commitment index.\r\n *\r\n * No auto-fixups:\r\n *     Unlike the submitblock RPC method, this IPC method\r\n *     DOES NOT call UpdateUncommittedBlockStructures() and\r\n *     DOES NOT modify/mint R or the commitment on your behalf. If the\r\n *     coinbase is missing/malformed/inconsistent or R does not match the\r\n *     templateâ€™s requirements, the call SHOULD fail with a descriptive error.\r\n *\r\n * Mutation:\r\n *   - This call mutates the underlying templateâ€™s block (coinbase, merkle\r\n *     root, header fields). Subsequent getBlockHeader()/getBlock()/\r\n *     getCoinbaseTx() reflect the updated state.\r\n *\r\n * Errors (recommended set):\r\n *   - MissingWitnessCommitmentOutput\r\n *   - MissingCoinbaseWitnessReservedValue\r\n *   - InvalidWitnessReservedValueSize\r\n *   - WitnessCommitmentMismatch\r\n *   - ReservedValueNotAuthorized   // client supplied R not matching template\r\n *   - TemplateStale\r\n *\r\n * Parameters:\r\n *   @param version   Block header nVersion.\r\n *   @param timestamp Block header nTime (UNIX epoch).\r\n *   @param nonce     Block header nNonce (32-bit).\r\n *   @param coinbase  COMPLETE coinbase tx (including witness if required).\r\n *\r\n * @returns true if enqueued for processing (independent of final validity).\r\n */\r\nvirtual bool submitSolution(uint32_t version,\r\n                            uint32_t timestamp,\r\n                            uint32_t nonce,\r\n                            CTransactionRef coinbase) = 0;\r\n```",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3474302360",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "review_requested",
      "id": 20640559036,
      "node_id": "RRE_lADOABII587U0PtezwAAAATORe-8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20640559036",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-10-31T18:18:58Z",
      "requested_reviewer": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3405553194,
      "node_id": "PRR_kwDOABII587K_J4q",
      "url": null,
      "actor": null,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-10-31T18:23:19Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, will review.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3405553194",
      "submitted_at": "2025-10-31T18:23:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "reviewed",
      "id": 3410154831,
      "node_id": "PRR_kwDOABII587LQtVP",
      "url": null,
      "actor": null,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-03T09:32:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK 6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3410154831",
      "submitted_at": "2025-11-03T09:32:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "review_requested",
      "id": 20670026011,
      "node_id": "RRE_lADOABII587U0PtezwAAAATQB5Eb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20670026011",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-03T09:32:31Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 3444353769,
      "node_id": "PRR_kwDOABII587NTKrp",
      "url": null,
      "actor": null,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-11-10T17:24:17Z",
      "author_association": "MEMBER",
      "body": "Code review and tested ACK   6eaa00fe20206baedc0d8ade5bb8d066ea615704\n\nThis looks really good. I have verified that previously, we would indeed accept a block with an invalid witness commitment because we did not check for it. The new toggle of the cached flags to `false` in the first commit prevents us from doing so.\nThe added documentation also looks good.\n\nBefore the patch in the first commit, the added test in the second commit failed\n```terminal\n2025-11-10T17:14:58.517226Z TestFramework (INFO): PRNG seed is: 6082034237012765229\n2025-11-10T17:14:58.517665Z TestFramework (INFO): Initializing test directory /var/folders/dj/d8p8jhd172n7wnq81ryfl6rc0000gn/T/bitcoin_func_test_fm1o0xxb\n2025-11-10T17:15:00.198939Z TestFramework (INFO): Running echo test\n2025-11-10T17:15:00.205953Z TestFramework (INFO): Running mining test\n2025-11-10T17:15:06.280650Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/Users/abubakarismail/Desktop/Work/bitcoin-dev/bitcoin-work-tree/bitcoin-master/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/Users/abubakarismail/Desktop/Work/bitcoin-dev/bitcoin-work-tree/bitcoin-master/build/test/functional/interface_ipc.py\", line 252, in run_test\n    self.run_mining_test()\n    ~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/abubakarismail/Desktop/Work/bitcoin-dev/bitcoin-work-tree/bitcoin-master/build/test/functional/interface_ipc.py\", line 248, in run_mining_test\n    asyncio.run(capnp.run(async_routine()))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 195, in run\n    return runner.run(main)\n           ~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 725, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\n  File \"capnp/lib/capnp.pyx\", line 1965, in run\n  File \"capnp/lib/capnp.pyx\", line 1966, in capnp.lib.capnp.run\n  File \"/Users/abubakarismail/Desktop/Work/bitcoin-dev/bitcoin-work-tree/bitcoin-master/build/test/functional/interface_ipc.py\", line 221, in async_routine\n    assert_equal(res.result, False)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"/Users/abubakarismail/Desktop/Work/bitcoin-dev/bitcoin-work-tree/bitcoin-master/test/functional/test_framework/util.py\", line 80, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(True == False)\n2025-11-10T17:15:06.340210Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-11-10T17:15:06.340318Z TestFramework (WARNING): Not cleaning up dir /var/folders/dj/d8p8jhd172n7wnq81ryfl6rc0000gn/T/bitcoin_func_test_fm1o0xxb\n2025-11-10T17:15:06.340356Z TestFramework (ERROR): Test failed. Test logging available at /var/folders/dj/d8p8jhd172n7wnq81ryfl6rc0000gn/T/bitcoin_func_test_fm1o0xxb/test_framework.log\n2025-11-10T17:15:06.340441Z TestFramework (ERROR): \n2025-11-10T17:15:06.340567Z TestFramework (ERROR): Hint: Call /Users/abubakarismail/Desktop/Work/bitcoin-dev/bitcoin-work-tree/bitcoin-master/test/functional/combine_logs.py '/var/folders/dj/d8p8jhd172n7wnq81ryfl6rc0000gn/T/bitcoin_func_test_fm1o0xxb' to consolidate all logs\n2025-11-10T17:15:06.340599Z TestFramework (ERROR): \n2025-11-10T17:15:06.340621Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-11-10T17:15:06.340669Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-11-10T17:15:06.340712Z TestFramework (ERROR): \n[node 1] Cleaning up leftover process\n[node 0] Cleaning up leftover process\n```\n\nAfter compiling with the first commit, it succeeded.\n\n```\n2025-11-10T17:21:00.220383Z TestFramework (INFO): PRNG seed is: 2383671957558385254\n2025-11-10T17:21:00.220788Z TestFramework (INFO): Initializing test directory /var/folders/dj/d8p8jhd172n7wnq81ryfl6rc0000gn/T/bitcoin_func_test_q5ioic08\n2025-11-10T17:21:01.905456Z TestFramework (INFO): Running echo test\n2025-11-10T17:21:01.912516Z TestFramework (INFO): Running mining test\n2025-11-10T17:21:08.054949Z TestFramework (INFO): Stopping nodes\n2025-11-10T17:21:08.163859Z TestFramework (INFO): Cleaning up /var/folders/dj/d8p8jhd172n7wnq81ryfl6rc0000gn/T/bitcoin_func_test_q5ioic08 on exit\n2025-11-10T17:21:08.163922Z TestFramework (INFO): Tests successful\n```",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#pullrequestreview-3444353769",
      "submitted_at": "2025-11-10T17:24:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
    },
    {
      "event": "referenced",
      "id": 20862464009,
      "node_id": "REFE_lADOABII587U0PtezwAAAATbf_AJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20862464009",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "9500dca555f7394cd3e51821312309d5b9633539",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9500dca555f7394cd3e51821312309d5b9633539",
      "created_at": "2025-11-11T13:08:49Z"
    },
    {
      "event": "commented",
      "id": 3516899959,
      "node_id": "IC_kwDOABII587Rn6J3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3516899959",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T13:18:39Z",
      "updated_at": "2025-11-11T13:19:35Z",
      "author_association": "MEMBER",
      "body": "Note that 6eaa00fe20206baedc0d8ade5bb8d066ea615704 _test: clarify submitBlock() mutates the template_ seems to conflict with what is proposed for the `BlockTemplateCache` in #33421, see https://github.com/bitcoin/bitcoin/pull/33421#pullrequestreview-3448014534. The plan there is to copy the template `CBlock` and apply the solution to that copy.\r\n\r\nThe choice between modifying in place and copying is not material to this pull request, and the code and test can be modified later, but it's probably better to decide which direction to go first.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3516899959",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "commented",
      "id": 3517184939,
      "node_id": "IC_kwDOABII587Ro_ur",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3517184939",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-11T14:29:51Z",
      "updated_at": "2025-11-11T14:29:51Z",
      "author_association": "MEMBER",
      "body": "See https://github.com/bitcoin/bitcoin/pull/33421#discussion_r2514393534\r\n\r\nThat PR should be updated. This is the right direction IMO.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3517184939",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33745"
    },
    {
      "event": "merged",
      "id": 20890925671,
      "node_id": "ME_lADOABII587U0PtezwAAAATdMjpn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20890925671",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3c3c6adb72608842aaf60f9986f16610a7260cf2",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3c3c6adb72608842aaf60f9986f16610a7260cf2",
      "created_at": "2025-11-12T15:04:13Z"
    },
    {
      "event": "closed",
      "id": 20890925788,
      "node_id": "CE_lADOABII587U0PtezwAAAATdMjrc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20890925788",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-11-12T15:04:13Z"
    },
    {
      "event": "referenced",
      "id": 20971949139,
      "node_id": "REFE_lADOABII587U0PtezwAAAATiBoxT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/20971949139",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "f620a2206b18608dad6d61b4f8457ae85c2ded4c",
      "commit_url": "https://api.github.com/repos/yuvicc/bitcoinkernel-jdk/commits/f620a2206b18608dad6d61b4f8457ae85c2ded4c",
      "created_at": "2025-11-16T14:14:15Z"
    },
    {
      "event": "referenced",
      "id": 21076782611,
      "node_id": "REFE_lADOABII587U0PtezwAAAAToRi4T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21076782611",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "29c37651c74b61232b4c2ef6201bd26196b555af",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29c37651c74b61232b4c2ef6201bd26196b555af",
      "created_at": "2025-11-20T17:19:31Z"
    },
    {
      "event": "referenced",
      "id": 21134561121,
      "node_id": "REFE_lADOABII587U0PtezwAAAATrt89h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21134561121",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "52fffa1e5dd0496dec3cad4ece59a5f7eee13fc0",
      "commit_url": "https://api.github.com/repos/stringintech/go-bitcoinkernel/commits/52fffa1e5dd0496dec3cad4ece59a5f7eee13fc0",
      "created_at": "2025-11-24T10:38:52Z"
    },
    {
      "event": "referenced",
      "id": 21275500461,
      "node_id": "REFE_lADOABII587U0PtezwAAAAT0Hl-t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/21275500461",
      "actor": {
        "login": "alexanderwiederin",
        "id": 37130778,
        "node_id": "MDQ6VXNlcjM3MTMwNzc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37130778?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alexanderwiederin",
        "html_url": "https://github.com/alexanderwiederin",
        "followers_url": "https://api.github.com/users/alexanderwiederin/followers",
        "following_url": "https://api.github.com/users/alexanderwiederin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alexanderwiederin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alexanderwiederin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alexanderwiederin/subscriptions",
        "organizations_url": "https://api.github.com/users/alexanderwiederin/orgs",
        "repos_url": "https://api.github.com/users/alexanderwiederin/repos",
        "events_url": "https://api.github.com/users/alexanderwiederin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alexanderwiederin/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7334556a3fabc65f749269e1462fb617f5d414a6",
      "commit_url": "https://api.github.com/repos/alexanderwiederin/rust-bitcoinkernel/commits/7334556a3fabc65f749269e1462fb617f5d414a6",
      "created_at": "2025-12-01T13:00:11Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 22210235762,
      "node_id": "HRDE_lADOABII587U0PtezwAAAAUr1U1y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/22210235762",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-22T09:01:05Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477883143",
      "pull_request_review_id": 3399316388,
      "id": 2477883143,
      "node_id": "PRRC_kwDOABII586TsX8H",
      "diff_hunk": "@@ -912,7 +912,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n+        CBlock& block{m_block_template->block};\n+        AddMerkleRootAndCoinbase(block, std::move(coinbase), version, timestamp, nonce);\n+\n+        // We modified the coinbase which should invalidate the check we did\n+        // when the block template was constructed. Additionally, unlike the\n+        // submitblock RPC we don't adjust the provided coinbase.\n+        block.m_checked_witness_commitment = false;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 11,
      "commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What about the other checked flags? Should we just reset all of them in `AddMerkleRootAndCoinbase`?",
      "created_at": "2025-10-30T12:15:48Z",
      "updated_at": "2025-10-30T12:15:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477883143",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477883143"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477956663",
      "pull_request_review_id": 3399416295,
      "id": 2477956663,
      "node_id": "PRRC_kwDOABII586Tsp43",
      "diff_hunk": "@@ -912,7 +912,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n+        CBlock& block{m_block_template->block};\n+        AddMerkleRootAndCoinbase(block, std::move(coinbase), version, timestamp, nonce);\n+\n+        // We modified the coinbase which should invalidate the check we did\n+        // when the block template was constructed. Additionally, unlike the\n+        // submitblock RPC we don't adjust the provided coinbase.\n+        block.m_checked_witness_commitment = false;\n+        Assume(!block.fChecked);\n+\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "fcb8b982f159f68edc128a835026059210b57ff7",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: check witness commitment in submitBlock\" (68fc907de93f422fd5566f9066bf16b1239e3a1b)\r\n\r\nIf keeping changes in this function instead of making the fix in AddMerkleRootAndCoinbase, would be good to s/m_block_template->block/block on this line to be consistent",
      "created_at": "2025-10-30T12:43:14Z",
      "updated_at": "2025-10-30T12:47:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477956663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477956663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 916,
      "original_line": 916,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477966256",
      "pull_request_review_id": 3399416295,
      "id": 2477966256,
      "node_id": "PRRC_kwDOABII586TssOw",
      "diff_hunk": "@@ -912,7 +912,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n+        CBlock& block{m_block_template->block};\n+        AddMerkleRootAndCoinbase(block, std::move(coinbase), version, timestamp, nonce);\n+\n+        // We modified the coinbase which should invalidate the check we did\n+        // when the block template was constructed. Additionally, unlike the\n+        // submitblock RPC we don't adjust the provided coinbase.\n+        block.m_checked_witness_commitment = false;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 11,
      "commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2477883143,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477883143\r\n\r\n> What about the other checked flags? Should we just reset all of them in `AddMerkleRootAndCoinbase`?\r\n\r\nThis seems like a really good idea. Having AddMerkleRootAndCoinbase update relevant flags seems like a more robust solution that would have prevented this problem.",
      "created_at": "2025-10-30T12:46:39Z",
      "updated_at": "2025-10-30T12:47:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477966256",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477966256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477980297",
      "pull_request_review_id": 3399448986,
      "id": 2477980297,
      "node_id": "PRRC_kwDOABII586TsvqJ",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "fcb8b982f159f68edc128a835026059210b57ff7",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: check witness commitment in submitBlock\" (68fc907de93f422fd5566f9066bf16b1239e3a1b)\r\n\r\nIt's good to mention the block is modified now but it would seem helpful to provide a little more detail here about what is expected and what is modified here especially since IPC behavior is different from RPC.\r\n\r\nYou also [mentioned](https://github.com/bitcoin/bitcoin/pull/33374#issuecomment-3299129244) that RPC \"This is safe for submitted blocks\" documentation isn't really true and it would be nice if that documentation was fixed as well.\r\n\r\nFinally if we need to add some more accessors (getWitnessCommitment? getCoinbaseWitnessReservedValue?) here so miners do not need to make unsafe assumptions about the node, could we maybe do that in this PR? I understand SV2 protocol coudln't [currently](https://github.com/bitcoin/bitcoin/pull/33374#issuecomment-3299309843) use this information but it'd be nice to not have to revisit this issue and make more changes here if sv2 will need this in the future.\r\n\r\n",
      "created_at": "2025-10-30T12:51:32Z",
      "updated_at": "2025-10-30T13:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2477980297",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2477980297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478021355",
      "pull_request_review_id": 3399448986,
      "id": 2478021355,
      "node_id": "PRRC_kwDOABII586Ts5rr",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.\n+     *\n+     * @param[in] version version block header field\n+     * @param[in] timestamp time block header field (unix timestamp)\n+     * @param[in] nonce nonce block header field\n+     * @param[in] coinbase complete coinbase transaction (including witness)\n+     *\n+     * @note unlike the submitblock RPC, this method does NOT add the\n+     *       coinbase witness automatically.\n      *\n      * @returns if the block was processed, independent of block validity",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: check witness commitment in submitBlock\" (68fc907de93f422fd5566f9066bf16b1239e3a1b)\r\n\r\nIt seems this comment is not actually true if this function is returning false now, or the comment could at least be clarified.\r\n\r\nIt also seems like just returning false here on failure without error messages could make it difficult for clients to debug issues. Will more specific errors be logged here? Could they be easily returned?\r\n\r\n",
      "created_at": "2025-10-30T13:04:35Z",
      "updated_at": "2025-10-30T13:34:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478021355",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478021355"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478177222",
      "pull_request_review_id": 3399721764,
      "id": 2478177222,
      "node_id": "PRRC_kwDOABII586TtfvG",
      "diff_hunk": "@@ -912,7 +912,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n+        CBlock& block{m_block_template->block};\n+        AddMerkleRootAndCoinbase(block, std::move(coinbase), version, timestamp, nonce);\n+\n+        // We modified the coinbase which should invalidate the check we did\n+        // when the block template was constructed. Additionally, unlike the\n+        // submitblock RPC we don't adjust the provided coinbase.\n+        block.m_checked_witness_commitment = false;\n+        Assume(!block.fChecked);\n+\n         return chainman().ProcessNewBlock(std::make_shared<const CBlock>(m_block_template->block), /*force_processing=*/true, /*min_pow_checked=*/true, /*new_block=*/nullptr);",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 14,
      "commit_id": "fcb8b982f159f68edc128a835026059210b57ff7",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2477956663,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I moved the change away from here.",
      "created_at": "2025-10-30T13:44:42Z",
      "updated_at": "2025-10-30T13:44:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478177222",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478177222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 916,
      "original_line": 916,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478202068",
      "pull_request_review_id": 3399754951,
      "id": 2478202068,
      "node_id": "PRRC_kwDOABII586TtlzU",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.\n+     *\n+     * @param[in] version version block header field\n+     * @param[in] timestamp time block header field (unix timestamp)\n+     * @param[in] nonce nonce block header field\n+     * @param[in] coinbase complete coinbase transaction (including witness)\n+     *\n+     * @note unlike the submitblock RPC, this method does NOT add the\n+     *       coinbase witness automatically.\n      *\n      * @returns if the block was processed, independent of block validity",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2478021355,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It behaves the same way as `ProcessNewBlock`, which has the following confusing documentation:\r\n\r\n> This only returns after the best known valid\r\n> block is made active. Note that it does not, however, guarantee that the\r\n> specific block passed to it has been checked for validity!",
      "created_at": "2025-10-30T13:51:37Z",
      "updated_at": "2025-10-30T13:52:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478202068",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478202068"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478209632",
      "pull_request_review_id": 3399764434,
      "id": 2478209632,
      "node_id": "PRRC_kwDOABII586Ttnpg",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.\n+     *\n+     * @param[in] version version block header field\n+     * @param[in] timestamp time block header field (unix timestamp)\n+     * @param[in] nonce nonce block header field\n+     * @param[in] coinbase complete coinbase transaction (including witness)\n+     *\n+     * @note unlike the submitblock RPC, this method does NOT add the\n+     *       coinbase witness automatically.\n      *\n      * @returns if the block was processed, independent of block validity",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2478021355,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I do think it would be nice to return clear errors somehow, but that seems a separate issue.",
      "created_at": "2025-10-30T13:53:39Z",
      "updated_at": "2025-10-30T13:53:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478209632",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478209632"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478210721",
      "pull_request_review_id": 3399766107,
      "id": 2478210721,
      "node_id": "PRRC_kwDOABII586Ttn6h",
      "diff_hunk": "@@ -912,7 +912,15 @@ class BlockTemplateImpl : public BlockTemplate\n \n     bool submitSolution(uint32_t version, uint32_t timestamp, uint32_t nonce, CTransactionRef coinbase) override\n     {\n-        AddMerkleRootAndCoinbase(m_block_template->block, std::move(coinbase), version, timestamp, nonce);\n+        CBlock& block{m_block_template->block};\n+        AddMerkleRootAndCoinbase(block, std::move(coinbase), version, timestamp, nonce);\n+\n+        // We modified the coinbase which should invalidate the check we did\n+        // when the block template was constructed. Additionally, unlike the\n+        // submitblock RPC we don't adjust the provided coinbase.\n+        block.m_checked_witness_commitment = false;",
      "path": "src/node/interfaces.cpp",
      "position": 1,
      "original_position": 11,
      "commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2477883143,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-10-30T13:53:54Z",
      "updated_at": "2025-10-30T13:53:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478210721",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478210721"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 921,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478319678",
      "pull_request_review_id": 3399922219,
      "id": 2478319678,
      "node_id": "PRRC_kwDOABII586TuCg-",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "fcb8b982f159f68edc128a835026059210b57ff7",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2477980297,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Thinking about adding the following to this comment:\r\n\r\n```cpp\r\n    /** Update uncommitted block structures (currently: only the witness reserved\r\n     * value). This is safe for submitted blocks as long as they honor\r\n     * default_witness_commitment from the template. */\r\n    void UpdateUncommittedBlockStructures(CBlock& block, const CBlockIndex* pindexPrev) const;\r\n```",
      "created_at": "2025-10-30T14:25:05Z",
      "updated_at": "2025-10-30T14:25:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478319678",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478319678"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478444690",
      "pull_request_review_id": 3400099201,
      "id": 2478444690,
      "node_id": "PRRC_kwDOABII586TuhCS",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 5,
      "commit_id": "fcb8b982f159f68edc128a835026059210b57ff7",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2477980297,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Done. I also clarified which fields are modified.",
      "created_at": "2025-10-30T14:57:39Z",
      "updated_at": "2025-10-30T14:57:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2478444690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2478444690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479106793",
      "pull_request_review_id": 3401056196,
      "id": 2479106793,
      "node_id": "PRRC_kwDOABII586TxCrp",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.\n+     *\n+     * @param[in] version version block header field\n+     * @param[in] timestamp time block header field (unix timestamp)\n+     * @param[in] nonce nonce block header field\n+     * @param[in] coinbase complete coinbase transaction (including witness)\n+     *\n+     * @note unlike the submitblock RPC, this method does NOT add the\n+     *       coinbase witness automatically.\n      *\n      * @returns if the block was processed, independent of block validity",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2478021355,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe the comment here could be changed to something like:\r\n\r\n```suggestion\r\n     * @returns if the block was processed, does not necessarily indicate validity.\r\n```",
      "created_at": "2025-10-30T18:27:20Z",
      "updated_at": "2025-10-30T18:27:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479106793",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479106793"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479587224",
      "pull_request_review_id": 3401753833,
      "id": 2479587224,
      "node_id": "PRRC_kwDOABII586Ty3-Y",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())",
      "path": "test/functional/interface_ipc.py",
      "position": 40,
      "original_position": 40,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "~In commit 504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4:\r\nIf I apply this test independently before the miner.cpp code changes, it still passes, so not sure what we are testing here. Wouldn't this only be relevant if we'd run checkBlock on the template's own block? Afaict we only do checkBlock on blocks we re-create here.~",
      "created_at": "2025-10-30T21:33:55Z",
      "updated_at": "2025-10-30T22:03:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479587224",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479587224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 223,
      "original_line": 223,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479597276",
      "pull_request_review_id": 3401766771,
      "id": 2479597276,
      "node_id": "PRRC_kwDOABII586Ty6bc",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())",
      "path": "test/functional/interface_ipc.py",
      "position": 40,
      "original_position": 40,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "in_reply_to_id": 2479587224,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Strange, for me this test fails as expected with the following diff applied to this branch:\r\n\r\n```diff\r\ndiff --git a/src/node/miner.cpp b/src/node/miner.cpp\r\nindex b988e28a3f..485984e437 100644\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -454,9 +454,9 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\r\n     block.hashMerkleRoot = BlockMerkleRoot(block);\r\n\r\n     // Reset cached checks\r\n-    block.m_checked_witness_commitment = false;\r\n-    block.m_checked_merkle_root = false;\r\n-    block.fChecked = false;\r\n+    // block.m_checked_witness_commitment = false;\r\n+    // block.m_checked_merkle_root = false;\r\n+    // block.fChecked = false;\r\n }\r\n```",
      "created_at": "2025-10-30T21:40:07Z",
      "updated_at": "2025-10-30T21:40:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479597276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479597276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 223,
      "original_line": 223,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479631022",
      "pull_request_review_id": 3401808607,
      "id": 2479631022,
      "node_id": "PRRC_kwDOABII586TzCqu",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())",
      "path": "test/functional/interface_ipc.py",
      "position": 40,
      "original_position": 40,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "in_reply_to_id": 2479587224,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "You're right, I messed something up.\r\nEDIT: Please resolve.",
      "created_at": "2025-10-30T22:00:55Z",
      "updated_at": "2025-10-30T22:03:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479631022",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479631022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 223,
      "original_line": 223,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479638680",
      "pull_request_review_id": 3401818466,
      "id": 2479638680,
      "node_id": "PRRC_kwDOABII586TzEiY",
      "diff_hunk": "@@ -452,6 +452,11 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\n     block.nTime = timestamp;\n     block.nNonce = nonce;\n     block.hashMerkleRoot = BlockMerkleRoot(block);\n+\n+    // Reset cached checks\n+    block.m_checked_witness_commitment = false;\n+    block.m_checked_merkle_root = false;",
      "path": "src/node/miner.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "in_reply_to_id": null,
      "user": {
        "login": "sedited",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sedited",
        "html_url": "https://github.com/sedited",
        "followers_url": "https://api.github.com/users/sedited/followers",
        "following_url": "https://api.github.com/users/sedited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sedited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sedited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sedited/subscriptions",
        "organizations_url": "https://api.github.com/users/sedited/orgs",
        "repos_url": "https://api.github.com/users/sedited/repos",
        "events_url": "https://api.github.com/users/sedited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sedited/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I previously hinted at resetting this flag too, but does that really make sense, if we've just re-calculated the merkle root?",
      "created_at": "2025-10-30T22:06:07Z",
      "updated_at": "2025-10-30T22:06:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479638680",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479638680"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 458,
      "original_line": 458,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479641553",
      "pull_request_review_id": 3401822551,
      "id": 2479641553,
      "node_id": "PRRC_kwDOABII586TzFPR",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)\n-            assert_equal(self.nodes[0].getchaintips()[0][\"height\"], current_block_height + 1)\n+\n+            self.log.debug(\"Submit mutated the block in the template\")\n+            remote_block_after = await self.parse_and_deserialize_block(template, ctx)\n+            assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\n+            assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 51,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "In commit \"mining: ensure witness commitment check in submitBlock\" (504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4)\r\n\r\nIs there a submitSolution call missing here?  I don't understand what this is testing",
      "created_at": "2025-10-30T22:08:00Z",
      "updated_at": "2025-10-30T22:42:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479641553",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479641553"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": 228,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479687669",
      "pull_request_review_id": 3401822551,
      "id": 2479687669,
      "node_id": "PRRC_kwDOABII586TzQf1",
      "diff_hunk": "@@ -452,6 +452,11 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\n     block.nTime = timestamp;\n     block.nNonce = nonce;\n     block.hashMerkleRoot = BlockMerkleRoot(block);\n+\n+    // Reset cached checks\n+    block.m_checked_witness_commitment = false;\n+    block.m_checked_merkle_root = false;",
      "path": "src/node/miner.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "in_reply_to_id": 2479638680,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479638680\r\n\r\n> I previously hinted at resetting this flag too, but does that really make sense, if we've just re-calculated the merkle root?\r\n\r\nTo me, it would seem safest to go other direction and reset all the cached flags including `fChecked`. Or if any flags are intentionally not reset it would be nice to a comment making it clear that it was intentional and should be safe. \r\n\r\nIn the case of CheckMerkleRoot, it is not just checking the block.hashMerkleRoot value but also checking for malleability. I guess malleablilty case would not be triggered because coinbase probably should not duplicate another transaction, but not sure if we should to make assumptions about how AddMerkleRootAndCoinbase may be used in the future and what inputs might be passed.\r\n\r\nWould seem best to repeat checks by default after mutating the block, or at least comment if it's intentional not to repeat some of them.",
      "created_at": "2025-10-30T22:38:26Z",
      "updated_at": "2025-10-31T00:02:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479687669",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479687669"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 458,
      "original_line": 458,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479771522",
      "pull_request_review_id": 3402038654,
      "id": 2479771522,
      "node_id": "PRRC_kwDOABII586Tzk-C",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)\n-            assert_equal(self.nodes[0].getchaintips()[0][\"height\"], current_block_height + 1)\n+\n+            self.log.debug(\"Submit mutated the block in the template\")\n+            remote_block_after = await self.parse_and_deserialize_block(template, ctx)\n+            assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\n+            assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 51,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "in_reply_to_id": 2479641553,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "(Aside from the last line checking that the second node's chaintip has advanced), I don't think this is testing anything changed by this PR, this test succeeds on master. As I understand it, this is checking that after the `submitSolution` calls above, that `m_block_template->block` has been modified, but I'm not sure why that would be an interesting test, AFAICT it's really just checking that `submitSolution` calls `AddMerkleRootAndCoinbase()`, since that modifies the block passed to it.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4/src/node/miner.cpp#L446-L454",
      "created_at": "2025-10-30T23:23:16Z",
      "updated_at": "2025-10-30T23:37:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479771522",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479771522"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": 228,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479793393",
      "pull_request_review_id": 3402068948,
      "id": 2479793393,
      "node_id": "PRRC_kwDOABII586TzqTx",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)",
      "path": "test/functional/interface_ipc.py",
      "position": 51,
      "original_position": 45,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I want to suggest adding a check here:\n\n```suggestion\n            assert_equal(res.result, True)\n            # self.nodes[1]'s chaintip did not advance.\n            assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height)\n```\n\nBut I'm a bit confused, because testing this without the changes to `src/node/miner.cpp`, self.nodes[1]'s chaintip advances after submitSolution is called with the witnessless coinbase, and this check I'm suggesting fails. \n\nTo reproduce, I'm using the following diff on this branch: \n\n```diff\ndiff --git a/src/node/miner.cpp b/src/node/miner.cpp\nindex b988e28a3f..485984e437 100644\n--- a/src/node/miner.cpp\n+++ b/src/node/miner.cpp\n@@ -454,9 +454,9 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\n     block.hashMerkleRoot = BlockMerkleRoot(block);\n\n     // Reset cached checks\n-    block.m_checked_witness_commitment = false;\n-    block.m_checked_merkle_root = false;\n-    block.fChecked = false;\n+    // block.m_checked_witness_commitment = false;\n+    // block.m_checked_merkle_root = false;\n+    // block.fChecked = false;\n }\n\n std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\ndiff --git a/test/functional/interface_ipc.py b/test/functional/interface_ipc.py\nindex a6010c2fb3..0d99a6b2c3 100755\n--- a/test/functional/interface_ipc.py\n+++ b/test/functional/interface_ipc.py\n@@ -219,7 +219,9 @@ class IPCInterfaceTest(BitcoinTestFramework):\n             self.log.debug(\"Submitted coinbase must include witness\")\n             assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n-            assert_equal(res.result, False)\n+            #assert_equal(res.result, False)\n+            # self.nodes[1]'s chaintip did not advance.\n+            assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height)\n\n             self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n```\n\nAnd the check fails, because self.nodes[1]'s chaintip was advanced!",
      "created_at": "2025-10-30T23:31:47Z",
      "updated_at": "2025-10-30T23:32:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2479793393",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2479793393"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 234,
      "original_line": 234,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480474170",
      "pull_request_review_id": 3402991838,
      "id": 2480474170,
      "node_id": "PRRC_kwDOABII586T2Qg6",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)",
      "path": "test/functional/interface_ipc.py",
      "position": 51,
      "original_position": 45,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "in_reply_to_id": 2479793393,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What your patch demonstrates is that without the fix in this PR (clearing the cache), the invalid block is accepted by the node.\r\n\r\nIf you then also drop the `assert_equal ... current_block_height)` line, you'll see that the fails at \"Block should propagate\".\r\n\r\nThe \"Submit again, with the witness\" step doesn't replace the invalid block, and `ProcessNewBlock` returns `true` for duplicate blocks and `submitSolution` passes it on.\r\n\r\nI think is good, because in Stratum v2 (depending on configuration) the same solution may be submitted via the pool and the individual miner, causing a race over the p2p network. I'll add a note to clarify this.",
      "created_at": "2025-10-31T08:17:24Z",
      "updated_at": "2025-10-31T08:17:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2480474170",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480474170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 234,
      "original_line": 234,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480567300",
      "pull_request_review_id": 3403106698,
      "id": 2480567300,
      "node_id": "PRRC_kwDOABII586T2nQE",
      "diff_hunk": "@@ -54,7 +54,15 @@ class BlockTemplate\n     virtual std::vector<uint256> getCoinbaseMerklePath() = 0;\n \n     /**\n-     * Construct and broadcast the block.\n+     * Construct and broadcast the block. Modifies the template in place.\n+     *\n+     * @param[in] version version block header field\n+     * @param[in] timestamp time block header field (unix timestamp)\n+     * @param[in] nonce nonce block header field\n+     * @param[in] coinbase complete coinbase transaction (including witness)\n+     *\n+     * @note unlike the submitblock RPC, this method does NOT add the\n+     *       coinbase witness automatically.\n      *\n      * @returns if the block was processed, independent of block validity",
      "path": "src/interfaces/mining.h",
      "position": 1,
      "original_position": 15,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "68fc907de93f422fd5566f9066bf16b1239e3a1b",
      "in_reply_to_id": 2478021355,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Taken",
      "created_at": "2025-10-31T08:51:15Z",
      "updated_at": "2025-10-31T08:51:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2480567300",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480567300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480568701",
      "pull_request_review_id": 3403108237,
      "id": 2480568701,
      "node_id": "PRRC_kwDOABII586T2nl9",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)\n-            assert_equal(self.nodes[0].getchaintips()[0][\"height\"], current_block_height + 1)\n+\n+            self.log.debug(\"Submit mutated the block in the template\")\n+            remote_block_after = await self.parse_and_deserialize_block(template, ctx)\n+            assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\n+            assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)",
      "path": "test/functional/interface_ipc.py",
      "position": 1,
      "original_position": 51,
      "commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "original_commit_id": "504acfcd5d1ed4d77f7fd4f5dc57e66d6718d3d4",
      "in_reply_to_id": 2479641553,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "`remote_block_before` is set before the two `submitBlock` calls above. I improved the wording a bit and I moved the `getchaintips()[0][\"height\"]` down to the next test, because that was probably confusing.",
      "created_at": "2025-10-31T08:51:34Z",
      "updated_at": "2025-10-31T08:51:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2480568701",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480568701"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": 228,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480606043",
      "pull_request_review_id": 3403154017,
      "id": 2480606043,
      "node_id": "PRRC_kwDOABII586T2wtb",
      "diff_hunk": "@@ -204,13 +208,32 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)",
      "path": "test/functional/interface_ipc.py",
      "position": 51,
      "original_position": 45,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "in_reply_to_id": 2479793393,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Added a patch to the PR description which reproduces the issue.",
      "created_at": "2025-10-31T09:01:24Z",
      "updated_at": "2025-10-31T09:01:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2480606043",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480606043"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 234,
      "original_line": 234,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480649764",
      "pull_request_review_id": 3403210878,
      "id": 2480649764,
      "node_id": "PRRC_kwDOABII586T27Yk",
      "diff_hunk": "@@ -452,6 +452,11 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\n     block.nTime = timestamp;\n     block.nNonce = nonce;\n     block.hashMerkleRoot = BlockMerkleRoot(block);\n+\n+    // Reset cached checks\n+    block.m_checked_witness_commitment = false;\n+    block.m_checked_merkle_root = false;",
      "path": "src/node/miner.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "7d57c4e44451ce1167ba76a73c9cc6f6fd6cfca4",
      "in_reply_to_id": 2479638680,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I kept all three, but as I explained in https://github.com/bitcoin/bitcoin/pull/33745#issuecomment-3471963619 two of them are already `false`.",
      "created_at": "2025-10-31T09:13:49Z",
      "updated_at": "2025-10-31T09:13:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2480649764",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480649764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 458,
      "original_line": 458,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480669020",
      "pull_request_review_id": 3403234847,
      "id": 2480669020,
      "node_id": "PRRC_kwDOABII586T3AFc",
      "diff_hunk": "@@ -204,13 +208,34 @@ async def async_routine():\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, False)\n             self.log.debug(\"Submit a valid block\")\n+            # The remote template block will be mutated, capture the original:\n+            remote_block_before = await self.parse_and_deserialize_block(template, ctx)\n             block.nVersion = original_version\n             block.solve()\n+\n+            self.log.debug(\"First call checkBlock()\")\n             res = await mining.result.checkBlock(block.serialize(), check_opts)\n             assert_equal(res.result, True)\n+\n+            self.log.debug(\"Submitted coinbase must include witness\")\n+            assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\n+            res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\n+            assert_equal(res.result, False)\n+\n+            self.log.debug(\"Submit again, with the witness\")\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\n             assert_equal(res.result, True)\n-            assert_equal(self.nodes[0].getchaintips()[0][\"height\"], current_block_height + 1)\n+\n+            self.log.debug(\"The above submitBlock() mutated the template's block\")\n+            remote_block_after = await self.parse_and_deserialize_block(template, ctx)\n+            assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\n+\n+            self.log.debug(\"Block should propagate\")\n+            assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)\n+            # Stalls if a regression causes submitBlock() to accept an invalid block:\n+            self.sync_all()\n+            assert_equal(self.nodes[0].getchaintips()[0], self.nodes[1].getchaintips()[0])",
      "path": "test/functional/interface_ipc.py",
      "position": 58,
      "original_position": 57,
      "commit_id": "6eaa00fe20206baedc0d8ade5bb8d066ea615704",
      "original_commit_id": "2fc95ca731b52ca419215109c568e89bf683a94b",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "If you apply the patch in the description and also drop the `sync_all` call, you'll see that the second node sees the block as `headers-only`.",
      "created_at": "2025-10-31T09:19:18Z",
      "updated_at": "2025-10-31T09:19:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33745#discussion_r2480669020",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2480669020"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33745"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 240,
      "original_line": 240,
      "side": "RIGHT"
    }
  ]
}