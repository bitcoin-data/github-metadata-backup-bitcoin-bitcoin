{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378",
    "id": 2202075679,
    "node_id": "PR_kwDOABII586DQQIf",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31378",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31378.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31378.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
    "number": 31378,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet: fix crash during migration due to invalid multisig descriptors",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Ensure legacy wallet migration skips the never standard bare multisig with +3 keys\r\nand consensus-invalid multisig scripts. Treating them as valid causes migration to\r\ncrash because we are enforcing this rules within the descriptors parsing logic.\r\n\r\nTesting Notes:\r\nThis can be verified by cherry-picking and running the test commit on master.\r\nIt will crash there but pass on this branch.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-11-26T23:16:24Z",
    "updated_at": "2024-12-29T10:52:15Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "c6ac5db9a5d8ced9efb6c2fbcfbf28724e9e07fd",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2024_wallet_migration_multisig_crash",
      "ref": "2024_wallet_migration_multisig_crash",
      "sha": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 4,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 418209,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-12-28T14:46:52Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2024-12-20T19:49:16Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ebe4cac38bf6c510b00b8e080acab079c54016d6",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36440,
        "stargazers_count": 80901,
        "watchers_count": 80901,
        "size": 273700,
        "default_branch": "master",
        "open_issues_count": 697,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-12-27T14:54:20Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-12-29T08:48:33Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 51,
    "deletions": 8,
    "changed_files": 5,
    "commits": 3,
    "review_comments": 4,
    "comments": 5
  },
  "events": [
    {
      "event": "commented",
      "id": 2502160346,
      "node_id": "IC_kwDOABII586VI-_a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2502160346",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-26T23:16:26Z",
      "updated_at": "2024-12-29T10:52:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31378.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31404](https://github.com/bitcoin/bitcoin/pull/31404) (descriptors: inference process, do not return unparsable multisig descriptors by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#issuecomment-2502160346",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378"
    },
    {
      "event": "labeled",
      "id": 15443336184,
      "node_id": "LE_lADOABII586gt9DUzwAAAAOYfpv4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15443336184",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-26T23:16:29Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "reviewed",
      "id": 2462972517,
      "node_id": "PRR_kwDOABII586Szfpl",
      "url": null,
      "actor": null,
      "commit_id": "4a1c3d8ffd2d842da24f6361450c52665c112c84",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Ruling out consensus-invalid scripts makes sense, but discarding non-standard scripts is a much bigger leap. Also it would be a wack-a-mole: does the migration crash on any non-standard script? How much of that do you want to cover? Is it not possible to make the migration not crash on valid but not standard scripts instead of changing `IsMine` for those? ",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#pullrequestreview-2462972517",
      "submitted_at": "2024-11-26T23:33:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
    },
    {
      "event": "commented",
      "id": 2504309436,
      "node_id": "IC_kwDOABII586VRLq8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2504309436",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T16:30:35Z",
      "updated_at": "2024-11-27T16:30:35Z",
      "author_association": "MEMBER",
      "body": "> Ruling out consensus-invalid scripts makes sense, but discarding non-standard scripts is a much bigger leap. Also it would be a wack-a-mole: does the migration crash on any non-standard script? How much of that do you want to cover?\r\n\r\nOk, I might have made the PR/commit description too broad when the actual changes are very specific.\r\nMigration does not crash on all non-standard scripts, it only crashes on scripts that fail to be parsed by the descriptors' logic. The specific non-standard crash this PR addresses is a bare multisig with +3 keys. And I don't think we want to cover all non-standard rules; we just need to handle the ones also applied by the current descriptors parsing logic. \r\n\r\nUltimately, we’re preserving/freezing the legacy wallet’s existing behavior ahead of its removal. We shouldn’t allow spendability or migration (even though it’s not possible anyway) of scripts that were not functional during the lifetime of the legacy wallet anyway.\r\n\r\n> Is it not possible to make the migration not crash on valid but not standard scripts instead of changing `IsMine` for those?\r\n\r\nIt’s possible, but it would mean duplicating more code. Still, at least for this case, I don't think it matters much. #30328 inlines the `IsMine()` logic into the migration code, so the entire legacy wallet support can be removed by the next release.\r\nIn other words, duplicating code now won’t change the outcome; if #30328 proceeds, the code will end up been consolidated into the same migration function anyway.\r\n\r\nI'll update the PR description to reflect the actual scope of this fix. it's not as broad as I initially described.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#issuecomment-2504309436",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15456154528,
      "node_id": "HRFPE_lADOABII586gt9DUzwAAAAOZQjOg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15456154528",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "created_at": "2024-11-27T18:02:36Z"
    },
    {
      "event": "reviewed",
      "id": 2475844193,
      "node_id": "PRR_kwDOABII586TkmJh",
      "url": null,
      "actor": null,
      "commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#pullrequestreview-2475844193",
      "submitted_at": "2024-12-03T14:25:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUyMmFhOGIyMmQ2NDBiNDI1Mjg3NDkzZThjODhlZDQ5NGYwNDRjYTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e22aa8b22d640b425287493e8c88ed494f044ca8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e22aa8b22d640b425287493e8c88ed494f044ca8",
      "tree": {
        "sha": "7f99ea27922ae5a6d4837cadd3e547f3e0cdd8e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7f99ea27922ae5a6d4837cadd3e547f3e0cdd8e8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7f99ea27922ae5a6d4837cadd3e547f3e0cdd8e8\nparent 733317ba943698e2f08319bd25d5d65d0058d5d7\nauthor furszy <matiasfurszyfer@protonmail.com> 1733155970 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1733236685 -0500\n\nrefactor: replace hardcoded number, introduce 'MAX_BARE_MULTISIG_PUBKEYS_NUM'\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmdPF80ACgkQXdI8zGhq\npiM/bRAAxk/0HskikE3AmsrirOiUMT9RHAtGtYDeaud4oHZAuKGI/8d0qlOv7sop\nB12FblA01R1LA0zTA/so/ZuRUKBoALXnZGwNUpQCkZVvWsKtat7Lfab/7iXLTS1p\nfwd9Y4ZCojBlMcwAheufcqhFLfDUWmjqVA8ieRiND3wdqs//hLqXkfmqo00lxg/c\nHJdSieojrrhPinMQgTW9jyQ64IfxY7AF2geRiz6PAgXAmQoMH/LQMB1UFg1k1yf7\nBqACZbImt0CM8Qn9+YWYN65oejR08GjaQHZqePh7hHgZbcd4YHBSeU7xcLkcIMDO\n3a2goMNo6tTUNjXw4RVnnwG85dePwSmsUXQEjT+XRlVpalqSoTj38vRFZQ8jT+p8\niVFFMuJHgVcbrDkVoWZRba1FijtiF0GQj3qyEtjYOMLXdSlPSCR++R10mvkqsHu4\n4ERxi2nurqT52SSGtSJamZkY3kQvK3oNbBUDq9vG+X3rz8P51mlprdLCk9I6bYty\nTIJsQWTMzCETPvKYFltat7JZ6/OEXukW/L1y08R4Xsc39sG7iiG5eTtVa8SSI4Zy\nXLaa7Ni3AqTqRLYkasH5k9GP1RnFl0L4Gsy5CrcS9tValXscVUsuFUXYznA4qqIp\niD2v4G+8INe3O8pHOfJiSaQYZsiBbHacgciygtMMNCA1bY/Ario=\n=MVhL\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/733317ba943698e2f08319bd25d5d65d0058d5d7",
          "sha": "733317ba943698e2f08319bd25d5d65d0058d5d7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/733317ba943698e2f08319bd25d5d65d0058d5d7"
        }
      ],
      "message": "refactor: replace hardcoded number, introduce 'MAX_BARE_MULTISIG_PUBKEYS_NUM'",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-12-03T14:38:05Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-12-02T16:12:50Z"
      },
      "sha": "e22aa8b22d640b425287493e8c88ed494f044ca8"
    },
    {
      "event": "reviewed",
      "id": 2475882718,
      "node_id": "PRR_kwDOABII586Tkvje",
      "url": null,
      "actor": null,
      "commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#pullrequestreview-2475882718",
      "submitted_at": "2024-12-03T14:38:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNkYWEzYTU4ZGMxNmQ2YTI3MjQ4ZGM0Y2RlYzJkZDE5MDllZWU3ZmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe",
      "tree": {
        "sha": "51187c775a168a02f731714a713cec54081273fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/51187c775a168a02f731714a713cec54081273fc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 51187c775a168a02f731714a713cec54081273fc\nparent e22aa8b22d640b425287493e8c88ed494f044ca8\nauthor furszy <matiasfurszyfer@protonmail.com> 1732662197 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1733236764 -0500\n\nwallet: bugfix, stop treating multisig consensus-invalid/unspendable scripts as ours\n\nEnsure legacy wallet migration skips the never standard bare multisig with +3 keys\nand consensus-invalid multisig scripts. Treating them as valid causes migration to\ncrash because we are enforcing this rules within the descriptors parsing logic.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmdPGBwACgkQXdI8zGhq\npiNU0g/8Dw8w+fGT5YJgavTI/c/1lNFq1+Dvr1CZtCjOvzMwshp4UYuHjGPj/PMD\nZGk42QUZO4H8yijSg1EjVXsEZVQLz5DwwLKLvOEAqoXGbjNdQA2brskM9lRRx8lA\nEzF357reeyKSugUejD0U1xF/tIxAIg6McPYXlFOkjGDyX1qlbimSKIXhPh9mR4VZ\n6qm2adYgrStu0LZGewfp8+GsS0i48DELyj4uc1bRw0MeFiffat9YE+77xo3F7leu\n2zEuuvOWc19X0syWKPUddyaw8SnhfLoBJUT3kowqDxVY5gJ8oRIWVUTDe3QQbm0n\nWcXNL4wauQccCSDknWpXkCVz3Q/YYryPh/FJubRKvnpIX40qqv7JNf287x54ARwH\nOG/OasFzsxTADf/Mc90Yzq8zu582oLUxNRFMzPAcvgY2TPQ5JVKoQe+NX9MXDDsd\nZfrxH14cA0CAigLsqRQJ4gAvHvB1qarzoJFj+jHwlLiuNW2+od9+kQOBoEksLSgR\nJinx9FddOE1jJZUby/6mjdYZajIB8+RppJ0rxeJCmfAdZTNN8fw74VmfoxsT4Of+\ndaeDcMcTCkf75Ahp3b0s2s5JjjZDghVubOGo9TntwRBgRbfamRS0c1vEAfBoWvTP\nq5a1IgnGcaQp8ZREeTLK5Gh23RJqEEauRDznnjkKZ3srNhzibQs=\n=uhLY\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e22aa8b22d640b425287493e8c88ed494f044ca8",
          "sha": "e22aa8b22d640b425287493e8c88ed494f044ca8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e22aa8b22d640b425287493e8c88ed494f044ca8"
        }
      ],
      "message": "wallet: bugfix, stop treating multisig consensus-invalid/unspendable scripts as ours\n\nEnsure legacy wallet migration skips the never standard bare multisig with +3 keys\nand consensus-invalid multisig scripts. Treating them as valid causes migration to\ncrash because we are enforcing this rules within the descriptors parsing logic.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-12-03T14:39:24Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-11-26T23:03:17Z"
      },
      "sha": "cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc0ZmEyOWUxMmUzNzlkN2JlOGFkMmRkMjYxZWU2OGVmYWY3YTllMDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "tree": {
        "sha": "aa6ab121151580f7ca2fccb23fd181eac11cafe8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aa6ab121151580f7ca2fccb23fd181eac11cafe8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree aa6ab121151580f7ca2fccb23fd181eac11cafe8\nparent cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe\nauthor furszy <matiasfurszyfer@protonmail.com> 1732662326 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1733236764 -0500\n\ntest: migration, add coverage for consensus-invalid/unspendable multisig scripts\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmdPGBwACgkQXdI8zGhq\npiMNTQ//Z1AbexHCzQwge8jlgL0hqgDiOY401SX6NY5wrjncnV+rwLfpig1Z6/Eq\n3LjyUJ1kDoayt10tK8W/WQCs8xa1QFMeqktjJ2O7izZ8XFd5AnEVrg5XwQ46EueF\n6GxHC3ZgsoalYLqFKruwIqBoNwap2d5T4CTN89wjKWoDq1DEjkXNYLa+r/lMAMnf\nv/z2SGmpYqPnLWYSc48NgsAbqg98Oby/mr5OioFO13PuTGUmR/bXfMsbkq3ZlyqG\nSww6aAIDi7Mz//c5xSk6j5xZCsaHAlZSw/8jmtsNljZ4hSLzJeB+iTLvgKis9ayc\njDyzoxBvdQfpvrxJA7htuAP71aZM2GlEe+SIScjn1pC+2/5j+wgMzcpw6+xAFSJz\ng9qIOf9t6mPovNpxx54hdSxx6ItcrZX0+eW92oV5yEC9u3/D8kq4IG2KoMjMC/ZT\noahQGNPgF1e8zX/QRfgSTGft7KBSghmj0UrrpU5H5vlJR6NrpVHi82sijP6GHa+I\nBtn+pquwKLHTMmV6NBBhS6IQwXik0Sa/JEwjyeWeRs1dInFZoZnK4nXKlcScTHCO\nQ14UBdDHjI9FzAGRWX313b+a6yAVAXIENTO+pnTA85WLR25HhH3Y3fAMMYZrYHi2\nFuDDKJAqQR61jgoQnURn9fp5WWHzAprjkOM9xgMi9KVETppg/Mk=\n=Kng7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe",
          "sha": "cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe"
        }
      ],
      "message": "test: migration, add coverage for consensus-invalid/unspendable multisig scripts",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-12-03T14:39:24Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2024-11-26T23:05:26Z"
      },
      "sha": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15510965968,
      "node_id": "HRFPE_lADOABII586gt9DUzwAAAAOcho7Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15510965968",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "created_at": "2024-12-03T14:39:50Z"
    },
    {
      "event": "commented",
      "id": 2521272298,
      "node_id": "IC_kwDOABII586WR4_q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2521272298",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-05T19:54:59Z",
      "updated_at": "2024-12-05T19:54:59Z",
      "author_association": "MEMBER",
      "body": "cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe \"wallet: bugfix, stop treating multisig consensus-invalid/unspendable scripts as ours\" modifies legacy `IsMine()`, ostensibly to mix issues in migration. However, I don't think doing that makes sense that this point as legacy `IsMine` is going to be removed from migration with #30328, and any changes to it may result in incompatibilities with legacy wallets and migrated wallets.\r\n\r\nI think that fixes to migration should be limited to the migration only code. Perhaps it would be easier to cherry pick the tests and migration specific fixes into #30328?",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#issuecomment-2521272298",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378"
    },
    {
      "event": "labeled",
      "id": 15554443697,
      "node_id": "LE_lADOABII586gt9DUzwAAAAOfHfmx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15554443697",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-06T04:45:21Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2485243200,
      "node_id": "PRR_kwDOABII586UIc1A",
      "url": null,
      "actor": null,
      "commit_id": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> [cdaa3a5](https://github.com/bitcoin/bitcoin/commit/cdaa3a58dc16d6a27248dc4cdec2dd1909eee7fe) \"wallet: bugfix, stop treating multisig consensus-invalid/unspendable scripts as ours\" modifies legacy `IsMine()`, ostensibly to mix issues in migration. However, I don't think doing that makes sense that this point as legacy `IsMine` is going to be removed from migration with #30328, and any changes to it may result in incompatibilities with legacy wallets and migrated wallets.\r\n\r\nI'm not going too strong over this point but.. it's hard for me to see the incompatibilities when the changes block two consensus-invalid scripts and a +10 year-old non-standard script that is already blocked in other parts of the legacy wallet. Arguably, this could also be labeled as a legacy wallet bugfix.\r\n\r\n> I think that fixes to migration should be limited to the migration only code. Perhaps it would be easier to cherry pick the tests and migration specific fixes into https://github.com/bitcoin/bitcoin/pull/30328?\r\n\r\nI was aiming to keep #30328 purely as a refactoring without mixing in bug fixes. Reviewing the PR's matching functionality has been challenging in its current state, so I think that it would be good if we don’t expand it more than strictly necessary.\r\n\r\nNote: If, after this comment, the general consensus is still to leave `IsMine` untouched, maybe postponing this PR until after #30328 would be the path that satisfies everyone?",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#pullrequestreview-2485243200",
      "submitted_at": "2024-12-06T16:05:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
    },
    {
      "event": "commented",
      "id": 2523695726,
      "node_id": "IC_kwDOABII586WbIpu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2523695726",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-06T16:36:02Z",
      "updated_at": "2024-12-06T16:36:02Z",
      "author_association": "MEMBER",
      "body": "> Note: If, after this comment, the general consensus is still to leave `IsMine` untouched, maybe postponing this PR until after #30328 would be the path that satisfies everyone?\r\n\r\nThen let's do it afterwards.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#issuecomment-2523695726",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378"
    },
    {
      "event": "commented",
      "id": 2553194280,
      "node_id": "IC_kwDOABII586YLqco",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2553194280",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-19T09:33:42Z",
      "updated_at": "2024-12-19T09:33:42Z",
      "author_association": "MEMBER",
      "body": "Is this now pending #31495 instead of the closed #https://github.com/bitcoin/bitcoin/pull/30328?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#issuecomment-2553194280",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31378"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867820477",
      "pull_request_review_id": 2475844193,
      "id": 1867820477,
      "node_id": "PRRC_kwDOABII585vVK29",
      "diff_hunk": "@@ -203,6 +198,16 @@ IsMineResult IsMineInner(const LegacyDataSPKM& keystore, const CScript& scriptPu\n                 }\n             }\n         }\n+        // Follow consensus rules, never treat too large legacy multisig scripts as valid\n+        if (sigversion == IsMineSigVersion::P2SH && scriptPubKey.size() > MAX_SCRIPT_ELEMENT_SIZE) {\n+            return IsMineResult::INVALID;\n+        }\n+\n+        // Never treat bare multisig outputs as ours (they can still be made watchonly-though)\n+        if (sigversion == IsMineSigVersion::TOP) {\n+            if (keys.size() > 3) return IsMineResult::INVALID; // These are standard wise non-spendable",
      "path": "src/wallet/scriptpubkeyman.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "original_commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Maybe we should have a constant for this number (3)? Then we can use here and in `IsStandard`.",
      "created_at": "2024-12-03T14:25:39Z",
      "updated_at": "2024-12-03T14:25:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#discussion_r1867820477",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867820477"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867841506",
      "pull_request_review_id": 2475878507,
      "id": 1867841506,
      "node_id": "PRRC_kwDOABII585vVP_i",
      "diff_hunk": "@@ -203,6 +198,16 @@ IsMineResult IsMineInner(const LegacyDataSPKM& keystore, const CScript& scriptPu\n                 }\n             }\n         }\n+        // Follow consensus rules, never treat too large legacy multisig scripts as valid\n+        if (sigversion == IsMineSigVersion::P2SH && scriptPubKey.size() > MAX_SCRIPT_ELEMENT_SIZE) {\n+            return IsMineResult::INVALID;\n+        }\n+\n+        // Never treat bare multisig outputs as ours (they can still be made watchonly-though)\n+        if (sigversion == IsMineSigVersion::TOP) {\n+            if (keys.size() > 3) return IsMineResult::INVALID; // These are standard wise non-spendable",
      "path": "src/wallet/scriptpubkeyman.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "original_commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "in_reply_to_id": 1867820477,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "yeah, thats also something that popped-up in https://github.com/bitcoin/bitcoin/pull/31404#discussion_r1866127089 too. Will bring the commit here as well.",
      "created_at": "2024-12-03T14:36:58Z",
      "updated_at": "2024-12-03T14:37:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#discussion_r1867841506",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867841506"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867843990",
      "pull_request_review_id": 2475882718,
      "id": 1867843990,
      "node_id": "PRRC_kwDOABII585vVQmW",
      "diff_hunk": "@@ -299,6 +299,40 @@ def test_multisig(self):\n         assert_equal(ms1_solvable.getbalance(), 0)\n         assert_equal(ms1_solvable.listtransactions(), [])\n \n+    def test_multisig_invalid(self):\n+        self.log.info(\"Test migration of a legacy-wise non-standard bare multisig\")\n+        wallet = self.create_legacy_wallet(\"multi_nonstandard\")\n+\n+        # Create enough keys for all coming tests\n+        addys = [wallet.getnewaddress()] * 20\n+        pubkeys = []\n+        privkeys = []\n+        for addr in addys:\n+            pubkeys.append(wallet.getaddressinfo(addr)['pubkey'])\n+            privkeys.append(wallet.dumpprivkey(addr))\n+\n+        # Create a non-standard multi(4, keys)\n+        res = wallet.createmultisig(4, pubkeys[:4])\n+        # Import script as a bare multisig. This is standard-wise non-spendable, and it is not allowed descriptors' wise\n+        wallet.importaddress(address=res['redeemScript'])\n+\n+        # Now migrate it and verify we don't crash due to a non-allowed descriptor migration\n+        wallet.migratewallet()\n+        wallet.unloadwallet()\n+\n+        ##############################################################\n+        # Import a consensus-wise invalid p2sh multisig with 20 keys #",
      "path": "test/functional/wallet_migration.py",
      "position": 26,
      "original_position": 26,
      "commit_id": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "original_commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In d64193142792e68636bf61ef4b083dfb8c1d20d7: A p2sh multisig with 20 keys is invalid? I thought 20 keys are the limit, but still valid. ",
      "created_at": "2024-12-03T14:38:27Z",
      "updated_at": "2024-12-03T14:38:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#discussion_r1867843990",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867843990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 324,
      "original_line": 324,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867870083",
      "pull_request_review_id": 2475923271,
      "id": 1867870083,
      "node_id": "PRRC_kwDOABII585vVW-D",
      "diff_hunk": "@@ -299,6 +299,40 @@ def test_multisig(self):\n         assert_equal(ms1_solvable.getbalance(), 0)\n         assert_equal(ms1_solvable.listtransactions(), [])\n \n+    def test_multisig_invalid(self):\n+        self.log.info(\"Test migration of a legacy-wise non-standard bare multisig\")\n+        wallet = self.create_legacy_wallet(\"multi_nonstandard\")\n+\n+        # Create enough keys for all coming tests\n+        addys = [wallet.getnewaddress()] * 20\n+        pubkeys = []\n+        privkeys = []\n+        for addr in addys:\n+            pubkeys.append(wallet.getaddressinfo(addr)['pubkey'])\n+            privkeys.append(wallet.dumpprivkey(addr))\n+\n+        # Create a non-standard multi(4, keys)\n+        res = wallet.createmultisig(4, pubkeys[:4])\n+        # Import script as a bare multisig. This is standard-wise non-spendable, and it is not allowed descriptors' wise\n+        wallet.importaddress(address=res['redeemScript'])\n+\n+        # Now migrate it and verify we don't crash due to a non-allowed descriptor migration\n+        wallet.migratewallet()\n+        wallet.unloadwallet()\n+\n+        ##############################################################\n+        # Import a consensus-wise invalid p2sh multisig with 20 keys #",
      "path": "test/functional/wallet_migration.py",
      "position": 26,
      "original_position": 26,
      "commit_id": "74fa29e12e379d7be8ad2dd261ee68efaf7a9e07",
      "original_commit_id": "d64193142792e68636bf61ef4b083dfb8c1d20d7",
      "in_reply_to_id": 1867843990,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In [d641931](https://github.com/bitcoin/bitcoin/commit/d64193142792e68636bf61ef4b083dfb8c1d20d7): A p2sh multisig with 20 keys is invalid? I thought 20 keys are the limit, but still valid.\r\n\r\nYes, they are. The limit is not based on the number of keys, it is on the size of the redeem script. Which can go up to 520 bytes max (which limits the number of keys inside a p2sh to 15).",
      "created_at": "2024-12-03T14:47:46Z",
      "updated_at": "2024-12-03T14:47:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31378#discussion_r1867870083",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1867870083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31378"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 324,
      "original_line": 324,
      "side": "RIGHT"
    }
  ]
}