{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523",
    "id": 1527476981,
    "node_id": "PR_kwDOABII585bC3L1",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28523",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28523.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28523.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28523",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28523/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/da44fd3e499ca53242332ef9cb2907ec31fce1e3",
    "number": 28523,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "rpc: add getaddrmaninfo verbose to list addrman table entries",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This extends the hidden/test-only `getaddrmaninfo` (#27511) with a verbose flag. If set, the RPC returns the contents of the addrman new and tried tables in addition to per-network counts. Addrman table contents can be used in tests and during development. \r\n\r\n```\r\nResult (for verbose = true):\r\n{                           (json object) json object with network type, new_table and tried_table as keys\r\n  ...,                      The same output as verbose = false\r\n  \"table\" : [               (json array) list of addresses in a address manager table ( new_table, tried_table )\r\n    {                       (json object) an address manager table entry\r\n      \"address\" : \"str\",    (string) the address\r\n      \"services\" : n,       (numeric) the services the node might support\r\n      \"bucket\" : n,         (numeric) the address manager bucket the address is placed in\r\n      \"position\" : n,       (numeric) the bucket position the address is placed in\r\n      \"source\" : \"str\"      (string) the address that relayed the address to us\r\n    },\r\n    ...\r\n  ],\r\n  ...\r\n}\r\n```\r\n\r\nThe first commit also reduces the white-spaces to something that clang-format likes and can be reviewed with --ignore-all-space.   ",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2023-09-23T17:48:13Z",
    "updated_at": "2023-09-26T13:55:01Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "d9da4c945edb553b2a6b7dfb6b8e8c4181a15af1",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "0xB10C:2023-09-verbose-getaddrmaninfo",
      "ref": "2023-09-verbose-getaddrmaninfo",
      "sha": "da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 184896538,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODQ4OTY1Mzg=",
        "name": "bitcoin",
        "full_name": "0xB10C/bitcoin",
        "owner": {
          "login": "0xB10C",
          "id": 19157360,
          "node_id": "MDQ6VXNlcjE5MTU3MzYw",
          "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/0xB10C",
          "html_url": "https://github.com/0xB10C",
          "followers_url": "https://api.github.com/users/0xB10C/followers",
          "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
          "organizations_url": "https://api.github.com/users/0xB10C/orgs",
          "repos_url": "https://api.github.com/users/0xB10C/repos",
          "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/0xB10C/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/0xB10C/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/0xB10C/bitcoin",
        "archive_url": "https://api.github.com/repos/0xB10C/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/0xB10C/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/0xB10C/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/0xB10C/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/0xB10C/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/0xB10C/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/0xB10C/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/0xB10C/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/0xB10C/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/0xB10C/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/0xB10C/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/0xB10C/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/0xB10C/bitcoin/events",
        "forks_url": "https://api.github.com/repos/0xB10C/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/0xB10C/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/0xB10C/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/0xB10C/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/0xB10C/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/0xB10C/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/0xB10C/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/0xB10C/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/0xB10C/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/0xB10C/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/0xB10C/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/0xB10C/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/0xB10C/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/0xB10C/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/0xB10C/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/0xB10C/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:0xB10C/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/0xB10C/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/0xB10C/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/0xB10C/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/0xB10C/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/0xB10C/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/0xB10C/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/0xB10C/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/0xB10C/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/0xB10C/bitcoin/hooks",
        "svn_url": "https://github.com/0xB10C/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 227712,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-25T12:17:02Z",
        "created_at": "2019-05-04T13:11:05Z",
        "updated_at": "2022-08-30T07:36:49Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "dcfbf3c2107c3cb9d343ebfa0eee78278dea8d66",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35748,
        "stargazers_count": 71490,
        "watchers_count": 71490,
        "size": 240204,
        "default_branch": "master",
        "open_issues_count": 635,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-26T13:37:51Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-09-26T12:35:44Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 216,
    "deletions": 43,
    "changed_files": 6,
    "commits": 2,
    "review_comments": 4,
    "comments": 4
  },
  "events": [
    {
      "event": "commented",
      "id": 1732374516,
      "node_id": "IC_kwDOABII585nQe_0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732374516",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-23T17:48:15Z",
      "updated_at": "2023-09-24T09:43:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [amitiuttarwar](https://github.com/bitcoin/bitcoin/pull/28523#issuecomment-1732390179), [brunoerg](https://github.com/bitcoin/bitcoin/pull/28523#issuecomment-1732532598) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#issuecomment-1732374516",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28523"
    },
    {
      "event": "labeled",
      "id": 10453724785,
      "node_id": "LE_lADOABII585x14OhzwAAAAJvFy5x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10453724785",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-23T17:48:17Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 1732390179,
      "node_id": "IC_kwDOABII585nQi0j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732390179",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-23T19:10:37Z",
      "updated_at": "2023-09-23T19:10:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "concept ACK. I think it makes sense to expose more info about the addrman internals to allow for better observations & tooling ",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#issuecomment-1732390179",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28523"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-24T00:46:09Z",
      "updated_at": "2023-09-24T00:46:09Z",
      "source": {
        "issue": {
          "id": 1678790809,
          "node_id": "PR_kwDOABII585O4GIc",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27511",
          "number": 27511,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: Add test-only RPC getaddrmaninfo for new/tried table address count",
          "body": "implements https://github.com/bitcoin/bitcoin/issues/26907. split off from #26988 to keep RPC, CLI discussions separate.\r\n\r\nThis PR introduces a new RPC `getaddrmaninfo`which returns the count of addresses in the new/tried table of a node's addrman broken down by network type. This would be useful for users who want to see the distribution of addresses from different networks across new/tried table in the addrman.\r\n\r\n```jsx\r\n$ getaddrmaninfo\r\n\r\nResult:\r\n{                   (json object) json object with network type as keys\r\n  \"network\" : {     (json object) The network (ipv4, ipv6, onion, i2p, cjdns)\r\n    \"new\" : n,      (numeric) number of addresses in new table\r\n    \"tried\" : n,    (numeric) number of addresses in tried table\r\n    \"total\" : n     (numeric) total number of addresses in both new/tried tables from a network\r\n  },\r\n  ...\r\n}\r\n```\r\n\r\n### additional context from [original PR](https://github.com/bitcoin/bitcoin/pull/26988)\r\n\r\n1. network coverage tests were skipped because thereâ€™s a small chance that addresses from different networks could hash to the same bucket and cause count of different network addresses in the tests to fail. see https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1137596851.\r\n2. #26988 uses this RPC in -addrinfo CLI. Slight preference for keeping the RPC hidden since this info will mostly be useful to only super users. see https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1173964808.",
          "user": {
            "login": "stratospher",
            "id": 44024636,
            "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stratospher",
            "html_url": "https://github.com/stratospher",
            "followers_url": "https://api.github.com/users/stratospher/followers",
            "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
            "organizations_url": "https://api.github.com/users/stratospher/orgs",
            "repos_url": "https://api.github.com/users/stratospher/repos",
            "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stratospher/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 24,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27511",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27511.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27511.patch"
          },
          "closed_at": "2023-09-20T12:25:37Z",
          "created_at": "2023-04-21T16:28:48Z",
          "updated_at": "2023-09-25T12:19:34Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1732532598,
      "node_id": "IC_kwDOABII585nRFl2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732532598",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-24T09:43:15Z",
      "updated_at": "2023-09-24T09:43:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#issuecomment-1732532598",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28523"
    },
    {
      "event": "reviewed",
      "id": 1641031644,
      "node_id": "PRR_kwDOABII585h0Cfc",
      "url": null,
      "actor": null,
      "commit_id": "48dfc81e7e1e6ecdccb4a165a292bb4c8cf96fbd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#pullrequestreview-1641031644",
      "submitted_at": "2023-09-24T10:06:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
    },
    {
      "event": "reviewed",
      "id": 1641040890,
      "node_id": "PRR_kwDOABII585h0Ev6",
      "url": null,
      "actor": null,
      "commit_id": "48dfc81e7e1e6ecdccb4a165a292bb4c8cf96fbd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#pullrequestreview-1641040890",
      "submitted_at": "2023-09-24T11:41:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU2YWRjZjQyODA1YjMwMDdiNjYzOTY3NTRhOWU1ZGNkMDk2OGQwMjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56adcf42805b3007b66396754a9e5dcd0968d027",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/56adcf42805b3007b66396754a9e5dcd0968d027",
      "tree": {
        "sha": "c59305c9260192ee3c501220a85814ae4c11298f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c59305c9260192ee3c501220a85814ae4c11298f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c59305c9260192ee3c501220a85814ae4c11298f\nparent 719cb301e69fa15ceed61d6f0fbaebc5eb5c04a9\nauthor 0xb10c <b10c@b10c.me> 1695231465 +0200\ncommitter 0xb10c <b10c@b10c.me> 1695644111 +0200\n\nrpc: getaddrmaninfo verbose for addrman entries\n\nExposing address manager table entries in a hidden RPC allows to introspect\naddrman tables in tests and during development.\n\nAlso ran clang-format-diff.py on my diff to reduce the extra indentation\nfrom the getaddrmaninfo RPC implementation.\n\nCan be reviewed with --ignore-all-space\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEDMuq/Xai7OLM0xQd4v/VsdiMqX0FAmURec8ACgkQ4v/VsdiM\nqX382w//XAsT3nInPyoCpzPR9Mtckx3RZXVY4UScv/088N17zVMtL11jsCptjYa7\nCgxxhKROkpQqoI2n0x0PcS2Lx00lW1WpXMlBh9op5TkqA5eUSTmJoyiqSdqUNi7F\nzRbblPQEzfhDTufvMUt1ALaGoA1q5eQ7WMzw9Gky3c8/TF1CUa6EriS8nTvF0WUq\nLS4m8zS6DS9BIl+4DzOTNltFQPuys5T0VL4AwQCdfbdTDhrqB/3oxjbySVlh/2vB\nd/6xJO11U1PPMMZpLeWh/z79SSG5OTAEG1k5wYXFs8GvBycwpLB4b9pF5QC6C3eV\n2MN67EZ4Pbbe4AEqYoA2yDXdQsKVchDiwevOi+2IefpUQFlWsYaSDrJVwo4b5O/c\nLNwz+4FZkM6JXDc3fpap0yNKbxDLkV46pYOctCVegxTLUgnnM5iDjfwDOkqr+fwl\nFALzpJ9PvR3Ffvp+P8Pw0GQjOMeXP52iEsEYRJl2F/6D5hYbgtkU0cB01Bm5QZlr\nsvEvnVlryKCYDtnWgN1kvfVeYc5WBZ34XfM94UXInzWb1D6v6KFs3f3LYMeRFeHo\nf9lhotfE3ecSgnwtinocmvhjuDAbUU0PKx1iLO8oCkDB5utaWkkD67+vg0pR35XQ\nyoCYst+1Shl8ToSsgN8adxJ3Blza5OUvGLDs1VR+9MMbp2GYy4w=\n=FKDi\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIPmy8rOWU1LgLdqZqKqhlJN4NQ06tYvh7ZIktSVc3dyKCP/wEAbqTSAr745E\njm26/Tt4jcYI8SDXNc/eOf0RQkN4pCSiFiBg5GWnBq6fIB+7GUwZlY1ekwjwIKwy\n162HWJfwfzGrUOnSnGB0uAbKfXV3gM9LaWH1mKvnCPEEZRF50/AIrTERYIiWlgsA\ng9/jDS75DI4uLWh0dHBzOi8vYWxpY2UuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3Rh\nbXBzLm9yZ//wEBd12Wn9dPLEPPZN2odOt1wI8QRlEXnT8Ag1sHdqrTcZ+gCD3+MN\nLvkMjiwraHR0cHM6Ly9ib2IuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9y\nZ//wECwZLM4DyN0LVKZPrbY0pFII8QRlEXnT8AgPp9TPthE/JwCD3+MNLvkMjiMi\naHR0cHM6Ly9idGMuY2FsZW5kYXIuY2F0YWxsYXh5LmNvbfAQ/9WSO+y1mQUztAAi\nuUGXcgjxIL0uwbZXJcSUb5yHr/7qOUxH1GW+0Uv/6PaHm0kbS/4ECPAgzl4RoPZv\nwdSzjXNubKdMcwTNKuCTJSUW1ScfXQA7WboI8QRlEXnS8AjpB6g+0dfwLACD3+MN\nLvkMjikoaHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbQ==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/719cb301e69fa15ceed61d6f0fbaebc5eb5c04a9",
          "sha": "719cb301e69fa15ceed61d6f0fbaebc5eb5c04a9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/719cb301e69fa15ceed61d6f0fbaebc5eb5c04a9"
        }
      ],
      "message": "rpc: getaddrmaninfo verbose for addrman entries\n\nExposing address manager table entries in a hidden RPC allows to introspect\naddrman tables in tests and during development.\n\nAlso ran clang-format-diff.py on my diff to reduce the extra indentation\nfrom the getaddrmaninfo RPC implementation.\n\nCan be reviewed with --ignore-all-space",
      "committer": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2023-09-25T12:15:11Z"
      },
      "author": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2023-09-20T17:37:45Z"
      },
      "sha": "56adcf42805b3007b66396754a9e5dcd0968d027"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRhNDRmZDNlNDk5Y2E1MzI0MjMzMmVmOWNiMjkwN2VjMzFmY2UxZTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "tree": {
        "sha": "c9feeba8c2ea415cc539dd5e9a9531f6106162b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c9feeba8c2ea415cc539dd5e9a9531f6106162b0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c9feeba8c2ea415cc539dd5e9a9531f6106162b0\nparent 56adcf42805b3007b66396754a9e5dcd0968d027\nauthor 0xb10c <b10c@b10c.me> 1695480877 +0200\ncommitter 0xb10c <b10c@b10c.me> 1695644115 +0200\n\ntest: getaddrmaninfo verbose\n\nTest that the getaddrmaninfo with the verbose flag set returns the\naddresses in the new and tried tables. We can't check the buckets and\npositions as these are not deterministic (yet).\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIyBAABCgAdFiEEDMuq/Xai7OLM0xQd4v/VsdiMqX0FAmURedMACgkQ4v/VsdiM\nqX0nhw/2PE9pu0JrdKvRwT8/lnVQ3mRYGaDbPwsKOfPImXOEexRuxhZkfWuTQ3a+\nkFcJUawde2xlDs2qpRN1keIrk5xYcI+juNUtHD7SBYopnfDQYCXeAq22Xw0LijEn\nOkoC1UAU9LvyZt+HIjmW6sIkun8XlR0E4KM3xI6dLqctDfyOrgWpRy1G+vJaRgq1\nEhCltG+VBQduIQNYyMiLKsdtZT3NNkc1y/cd3leQiubFgYTPQSFI7pmXlz4euQGE\nDAjIvcdEnBNpvv2F9d68ysY+1xn3ETIPqOV5FjuGqt+Y6NZTGqe8cmgrYRcScy5L\nRU4LIGDSptZyntrgdY01g3VrX/PB40ZwzruAorPVLsKJAbwsOosSOxkxw6kDd6RA\nFzjHNED9CNM+xPXpzsngD9cL1n+rs5aM/GvrLN1UHzkwSsQp6mkpvDE0ex3lhBc3\n9i3xOEvTOEQ28aSQwy8lTImD0fWw2hVyWpXG+BMPOhIEt4bXHEloqUXi8VbvVciU\nsvqmaCS+t3OM3zdtYBC7ijnUxDmWspm7zr8NrWcJ2zz8NhnQ7Z+iHmpLaK9R4WL7\n2H9SwNSC8SP40q1sqfy3ePlpIxJ/BSahSjCJi7vwcIF+DqKs+9NsPh33Va1ndQBF\nDBhxiAc+ypfD8JEmgYHuKWadFAJ7Zv9lBxs0+H92jZWmaQ6VJA==\n=B39n\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIB9OK3kDWlfGsMPOC1nIwnVfCdkOBkCCJ6KtoRb227IcCP/wED+qwWTkVW6n\nAQ5dCO9CNQsI8SCZR3r4mLcWQ/kn0d+IeM9G19qR7UBHqj38gePCOtfx3QjxINg1\nPPD8ErNVnUxUDQWmVcj9WL64ethCHaWWrNULSDm/CPAgmRhiQLWylBWqPOqdoF0w\nme5Anw/sOyZXZNxfPYg9svoI8QRlEXnX8AjHjZRQVehXXQCD3+MNLvkMji4taHR0\ncHM6Ly9hbGljZS5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQb3p2\nOSXQN4Ht63zHDHYAJQjxBGURedfwCGHV/EdYProMAIPf4w0u+QyOLCtodHRwczov\nL2JvYi5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQgAGG8320VYUQ\nXoRsjhsRmQjxIKBFW51Eyyt51DPkdH1LctUgqULzCH/NgfqeC9j2pqzYCPAg2n/s\n2LhSdV/FQWXJ6cjfMdl0DsP9hNeCIhy9mCugbFYI8QRlEXnW8AjmqAl2WGrliwCD\n3+MNLvkMjikoaHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNv\nbfAQhbk2jHAtfBh14ivLiIKeHQjxBGURedfwCH5rkjICX92+AIPf4w0u+QyOIyJo\ndHRwczovL2J0Yy5jYWxlbmRhci5jYXRhbGxheHkuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/56adcf42805b3007b66396754a9e5dcd0968d027",
          "sha": "56adcf42805b3007b66396754a9e5dcd0968d027",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/56adcf42805b3007b66396754a9e5dcd0968d027"
        }
      ],
      "message": "test: getaddrmaninfo verbose\n\nTest that the getaddrmaninfo with the verbose flag set returns the\naddresses in the new and tried tables. We can't check the buckets and\npositions as these are not deterministic (yet).",
      "committer": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2023-09-25T12:15:15Z"
      },
      "author": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2023-09-23T14:54:37Z"
      },
      "sha": "da44fd3e499ca53242332ef9cb2907ec31fce1e3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10461849132,
      "node_id": "HRFPE_lADOABII585x14OhzwAAAAJvkyYs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10461849132",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T12:17:03Z"
    },
    {
      "event": "commented",
      "id": 1733608639,
      "node_id": "IC_kwDOABII585nVMS_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1733608639",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T12:24:46Z",
      "updated_at": "2023-09-25T12:24:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "- addressed @brunoerg's review\r\n- included  https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1335084087 as I'm touching the line anyway\r\n\r\n\r\nI've also been hacking on a tool that visualizes addrman tables from the getaddrmaninfo verbose output in the browser. A wip version is on https://0xb10c.github.io/addrman-observer ([github.com/0xB10C/addrman-observer](https://github.com/0xB10C/addrman-observer)). You can load dumps produced with `bitcoin-cli getaddrmaninfo true > getaddrmaninfo.json` (all processing happens locally).\r\n\r\n",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#issuecomment-1733608639",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28523"
    },
    {
      "event": "mentioned",
      "id": 10461945642,
      "node_id": "MEE_lADOABII585x14OhzwAAAAJvlJ8q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10461945642",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T12:24:46Z"
    },
    {
      "event": "subscribed",
      "id": 10461945658,
      "node_id": "SE_lADOABII585x14OhzwAAAAJvlJ86",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10461945658",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-25T12:24:46Z"
    },
    {
      "event": "reviewed",
      "id": 1644341592,
      "node_id": "PRR_kwDOABII585iAqlY",
      "url": null,
      "actor": null,
      "commit_id": "da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#pullrequestreview-1644341592",
      "submitted_at": "2023-09-26T13:55:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1335156026",
      "pull_request_review_id": 1641031644,
      "id": 1335156026,
      "node_id": "PRRC_kwDOABII585PlN06",
      "diff_hunk": "@@ -838,6 +838,25 @@ std::vector<CAddress> AddrManImpl::GetAddr_(size_t max_addresses, size_t max_pct\n     return addresses;\n }\n \n+std::vector<std::tuple<int, int, AddrInfo>> AddrManImpl::GetEntries_(bool from_tried) const\n+{\n+    AssertLockHeld(cs);\n+\n+    const int bucket_count = (from_tried) ? ADDRMAN_TRIED_BUCKET_COUNT : ADDRMAN_NEW_BUCKET_COUNT;",
      "path": "src/addrman.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "original_commit_id": "48dfc81e7e1e6ecdccb4a165a292bb4c8cf96fbd",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n```suggestion\r\n    const int bucket_count = from_tried ? ADDRMAN_TRIED_BUCKET_COUNT : ADDRMAN_NEW_BUCKET_COUNT;\r\n```",
      "created_at": "2023-09-24T10:06:28Z",
      "updated_at": "2023-09-24T10:06:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#discussion_r1335156026",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1335156026"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 845,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1335166553",
      "pull_request_review_id": 1641040890,
      "id": 1335166553,
      "node_id": "PRRC_kwDOABII585PlQZZ",
      "diff_hunk": "@@ -1014,52 +1015,105 @@ static RPCHelpMan sendmsgtopeer()\n     };\n }\n \n+UniValue AddrmanEntryToJSON(unsigned int bucket, unsigned int position, const AddrInfo& info)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    ret.pushKV(\"address\", info.ToStringAddrPort());\n+    ret.pushKV(\"services\", (uint64_t)info.nServices);\n+    ret.pushKV(\"bucket\", bucket);\n+    ret.pushKV(\"position\", position);\n+    ret.pushKV(\"source\", info.source.ToStringAddr());\n+    return ret;\n+}\n+\n static RPCHelpMan getaddrmaninfo()\n {\n     return RPCHelpMan{\"getaddrmaninfo\",\n-                      \"\\nProvides information about the node's address manager by returning the number of \"\n-                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n-                      \"This RPC is for testing only.\\n\",\n-                      {},\n-                      RPCResult{\n-                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n-                              {\n-                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n-                                       {\n-                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n-                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n-                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n-                                       }},\n-                              }\n-                      },\n-                      RPCExamples{\n-                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n-                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n-                      },\n-                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n-                      {\n-                          NodeContext& node = EnsureAnyNodeContext(request.context);\n-                          if (!node.addrman) {\n-                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n-                          }\n-\n-                          UniValue ret(UniValue::VOBJ);\n-                          for (int n = 0; n < NET_MAX; ++n) {\n-                              enum Network network = static_cast<enum Network>(n);\n-                              if (network == NET_UNROUTABLE || network == NET_INTERNAL) continue;\n-                              UniValue obj(UniValue::VOBJ);\n-                              obj.pushKV(\"new\", node.addrman->Size(network, true));\n-                              obj.pushKV(\"tried\", node.addrman->Size(network, false));\n-                              obj.pushKV(\"total\", node.addrman->Size(network));\n-                              ret.pushKV(GetNetworkName(network), obj);\n-                          }\n-                          UniValue obj(UniValue::VOBJ);\n-                          obj.pushKV(\"new\", node.addrman->Size(std::nullopt, true));\n-                          obj.pushKV(\"tried\", node.addrman->Size(std::nullopt, false));\n-                          obj.pushKV(\"total\", node.addrman->Size());\n-                          ret.pushKV(\"all_networks\", obj);\n-                          return ret;\n-                      },\n+        \"\\nProvides information about the node's address manager by returning the number of \"\n+        \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+        \"When setting the verbose flag, the address manager entries for the new \"\n+        \"and tried table are also returned.\\n\"\n+        \"This RPC is for testing only.\\n\",\n+        {\n+            {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"True for a list of address manager entries by table, false for address counts only\"},\n+        },\n+        {\n+            RPCResult{\"for verbose = false\", RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                {\n+                    {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\", {\n+                        {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                        {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n+                        {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n+                    }},\n+                },\n+            },\n+            RPCResult{\"for verbose = true\", RPCResult::Type::OBJ_DYN, \"\", \"json object with network type, new_table and tried_table as keys\",\n+                {\n+                    {RPCResult::Type::ELISION, \"\", \"The same output as verbose = false\"},\n+                    {\n+                        RPCResult::Type::ARR, \"table\", \"list of addresses in a address manager table ( new_table, tried_table )\",",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 91,
      "commit_id": "da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "original_commit_id": "48dfc81e7e1e6ecdccb4a165a292bb4c8cf96fbd",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n                        RPCResult::Type::ARR, \"table\", \"list of addresses in the address manager table ( new_table, tried_table )\",\r\n```",
      "created_at": "2023-09-24T11:41:37Z",
      "updated_at": "2023-09-24T11:41:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#discussion_r1335166553",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1335166553"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1054,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1337253953",
      "pull_request_review_id": 1644341592,
      "id": 1337253953,
      "node_id": "PRRC_kwDOABII585PtOBB",
      "diff_hunk": "@@ -1014,52 +1015,105 @@ static RPCHelpMan sendmsgtopeer()\n     };\n }\n \n+UniValue AddrmanEntryToJSON(unsigned int bucket, unsigned int position, const AddrInfo& info)\n+{\n+    UniValue ret(UniValue::VOBJ);\n+    ret.pushKV(\"address\", info.ToStringAddrPort());\n+    ret.pushKV(\"services\", (uint64_t)info.nServices);\n+    ret.pushKV(\"bucket\", bucket);\n+    ret.pushKV(\"position\", position);\n+    ret.pushKV(\"source\", info.source.ToStringAddr());\n+    return ret;\n+}\n+\n static RPCHelpMan getaddrmaninfo()\n {\n     return RPCHelpMan{\"getaddrmaninfo\",\n-                      \"\\nProvides information about the node's address manager by returning the number of \"\n-                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n-                      \"This RPC is for testing only.\\n\",\n-                      {},\n-                      RPCResult{\n-                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n-                              {\n-                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n-                                       {\n-                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n-                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n-                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n-                                       }},\n-                              }\n-                      },\n-                      RPCExamples{\n-                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n-                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n-                      },\n-                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n-                      {\n-                          NodeContext& node = EnsureAnyNodeContext(request.context);\n-                          if (!node.addrman) {\n-                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n-                          }\n-\n-                          UniValue ret(UniValue::VOBJ);\n-                          for (int n = 0; n < NET_MAX; ++n) {\n-                              enum Network network = static_cast<enum Network>(n);\n-                              if (network == NET_UNROUTABLE || network == NET_INTERNAL) continue;\n-                              UniValue obj(UniValue::VOBJ);\n-                              obj.pushKV(\"new\", node.addrman->Size(network, true));\n-                              obj.pushKV(\"tried\", node.addrman->Size(network, false));\n-                              obj.pushKV(\"total\", node.addrman->Size(network));\n-                              ret.pushKV(GetNetworkName(network), obj);\n-                          }\n-                          UniValue obj(UniValue::VOBJ);\n-                          obj.pushKV(\"new\", node.addrman->Size(std::nullopt, true));\n-                          obj.pushKV(\"tried\", node.addrman->Size(std::nullopt, false));\n-                          obj.pushKV(\"total\", node.addrman->Size());\n-                          ret.pushKV(\"all_networks\", obj);\n-                          return ret;\n-                      },\n+        \"\\nProvides information about the node's address manager by returning the number of \"\n+        \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+        \"When setting the verbose flag, the address manager entries for the new \"\n+        \"and tried table are also returned.\\n\"\n+        \"This RPC is for testing only.\\n\",\n+        {\n+            {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"True for a list of address manager entries by table, false for address counts only\"},\n+        },\n+        {\n+            RPCResult{\"for verbose = false\", RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                {\n+                    {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \", all_networks )\", {\n+                        {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                        {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n+                        {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n+                    }},\n+                },\n+            },\n+            RPCResult{\"for verbose = true\", RPCResult::Type::OBJ_DYN, \"\", \"json object with network type, new_table and tried_table as keys\",\n+                {\n+                    {RPCResult::Type::ELISION, \"\", \"The same output as verbose = false\"},\n+                    {\n+                        RPCResult::Type::ARR, \"table\", \"list of addresses in the address manager table ( new_table, tried_table )\",\n+                        {\n+                            {RPCResult::Type::OBJ, \"\", \"an address manager table entry\", {\n+                                {RPCResult::Type::STR, \"address\", \"the address\"},\n+                                {RPCResult::Type::NUM, \"services\", \"the services the node might support\"},\n+                                {RPCResult::Type::NUM, \"bucket\", \"the address manager bucket the address is placed in\"},\n+                                {RPCResult::Type::NUM, \"position\", \"the bucket position the address is placed in\"},\n+                                {RPCResult::Type::STR, \"source\", \"the address that relayed the address to us\"},\n+                            }},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"getaddrmaninfo\", \"\")\n+            + HelpExampleCli(\"getaddrmaninfo\", \"true\")\n+            + HelpExampleRpc(\"getaddrmaninfo\", \"\")},",
      "path": "src/rpc/net.cpp",
      "position": 108,
      "original_position": 108,
      "commit_id": "da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "original_commit_id": "da44fd3e499ca53242332ef9cb2907ec31fce1e3",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 56adcf42805b3007b66396754a9e5dcd0968d027: We could add the 'verbose' example for the RPC.\r\n```suggestion\r\n            + HelpExampleRpc(\"getaddrmaninfo\", \"\")},\r\n            + HelpExampleRpc(\"getaddrmaninfo\", \"true\")}\r\n```",
      "created_at": "2023-09-26T13:55:01Z",
      "updated_at": "2023-09-26T13:55:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28523#discussion_r1337253953",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1337253953"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28523"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1071,
      "original_line": 1071,
      "side": "RIGHT"
    }
  ]
}