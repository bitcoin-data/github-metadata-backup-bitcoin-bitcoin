{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286",
    "id": 1919780807,
    "node_id": "PR_kwDOABII585ybYfH",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30286",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30286.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30286.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
    "number": 30286,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "cluster mempool: optimized candidate search",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Part of cluster mempool: #30289 \r\n\r\nDepends on #30126, and was split off from it.\r\n\r\nThis improves the candidate search algorithm introduced in the previous PR with a variety of optimizations.\r\n\r\nThe resulting search algorithm largely follows Section 2 of [How to linearize your cluster](https://delvingbitcoin.org/t/how-to-linearize-your-cluster/303#h-2-finding-high-feerate-subsets-5), though with a few changes:\r\n* Connected component analysis is performed inside the search algorithm (creating initial work items per component for each candidate), rather than once at a higher level. This duplicates some work but is significantly simpler in implementation.\r\n* No ancestor-set based presplitting inside the search is performed; instead, the `best` value is initialized with the best topologically valid set known to the LIMO algorithm before search starts: the better one out of the highest-feerate remaining ancestor set, and the highest-feerate prefix of remaining transactions in `old_linearization`.\r\n* Work items are represented using an included set *inc* and an undefined set *und*, rather than included and excluded.\r\n* Potential sets *pot* are not computed for work items with empty *inc*.\r\n\r\nAt a high level, the only missing optimization from that post is bottleneck analysis; my thinking is that it only really helps with clusters that are already relatively cheap to linearize (doing so would need to be done at a higher level, not inside the search algorithm).\r\n\r\n---\r\n\r\nOverview of the impact of each commit here on linearize performance:\r\n* **[clusterlin bench: have low/high iter benchmarks instead of per-iter](https://github.com/bitcoin/bitcoin/pull/30286/commits/21a184db63bd13cf0c2dff9e6e61ca85f2ff4454)**: no impact\r\n* **[separate initial search entries per component (optimization)](https://github.com/bitcoin/bitcoin/pull/30286/commits/c84c5c86ba6c12ce11e997d0c59d60694c667488)**: reduce iterations, increase start-up cost\r\n* **[add reordering support for DepGraph](https://github.com/bitcoin/bitcoin/pull/30286/commits/019ff2960976b677d91bab47e75be6ed180b37a3)**: no impact\r\n* **[use feerate-sorted depgraph in SearchCandidateFinder](https://github.com/bitcoin/bitcoin/pull/30286/commits/8e27dd5a220237da5d362376db6406e47f063776)**: [typically reduce iterations, increase start-up cost\r\n* **[track upper bound potential set for work items](https://github.com/bitcoin/bitcoin/pull/30286/commits/781e0fb3aa5cbd0983b01547481eefa0804dfb5b)**: reduce iterations, increase cost per iteration\r\n* **[reduce computation of unnecessary pot sets](https://github.com/bitcoin/bitcoin/pull/30286/commits/9fe834fa979c8ab038aec57dac2f468ca70c41a9)**: reduce cost per iteration\r\n* **[include topological pot subsets automatically](https://github.com/bitcoin/bitcoin/pull/30286/commits/30612710a4e5fc8c950bd1ff4ab9fa843b59132d)**: reduce iterations, increase cost per iteration\r\n* **[improve heuristic to decide split transaction](https://github.com/bitcoin/bitcoin/pull/30286/commits/1880c00ab1661dbfc867f69e7556b28bc3cf7a42)**: typically reduce iterations, increase cost per iterations\r\n* **[only start/use search when enough iterations left](https://github.com/bitcoin/bitcoin/pull/30286/commits/12760a57b3a6cd1aeb3b7532311f648de2b45aa4)**: just account for start-up cost as equivalent iterations",
    "labels": [
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "created_at": "2024-06-14T02:16:31Z",
    "updated_at": "2024-09-13T06:09:24Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "a6b4aabbefad07eb06bda0b79ea7cadb82b018e2",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sipa:202406_clusterlin_opt",
      "ref": "202406_clusterlin_opt",
      "sha": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 1458655,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDU4NjU1",
        "name": "bitcoin",
        "full_name": "sipa/bitcoin",
        "owner": {
          "login": "sipa",
          "id": 548488,
          "node_id": "MDQ6VXNlcjU0ODQ4OA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sipa",
          "html_url": "https://github.com/sipa",
          "followers_url": "https://api.github.com/users/sipa/followers",
          "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
          "organizations_url": "https://api.github.com/users/sipa/orgs",
          "repos_url": "https://api.github.com/users/sipa/repos",
          "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sipa/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sipa/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sipa/bitcoin",
        "archive_url": "https://api.github.com/repos/sipa/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sipa/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sipa/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sipa/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sipa/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sipa/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sipa/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sipa/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sipa/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sipa/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sipa/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sipa/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sipa/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sipa/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sipa/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sipa/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sipa/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sipa/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sipa/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sipa/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sipa/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sipa/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sipa/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sipa/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sipa/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sipa/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sipa/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sipa/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sipa/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sipa/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sipa/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sipa/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sipa/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sipa/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sipa/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sipa/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sipa/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sipa/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sipa/bitcoin/hooks",
        "svn_url": "https://github.com/sipa/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "TypeScript",
        "forks_count": 21,
        "stargazers_count": 87,
        "watchers_count": 87,
        "size": 248110,
        "default_branch": "lows",
        "open_issues_count": 16,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-09-12T21:41:23Z",
        "created_at": "2011-03-09T10:46:59Z",
        "updated_at": "2024-08-21T16:21:35Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "cf0120ff024aa73a56f2975c832fda6aa8146dfa",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36157,
        "stargazers_count": 78357,
        "watchers_count": 78357,
        "size": 268336,
        "default_branch": "master",
        "open_issues_count": 666,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-09-12T18:52:19Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-09-13T06:32:54Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 525,
    "deletions": 98,
    "changed_files": 4,
    "commits": 10,
    "review_comments": 71,
    "comments": 32
  },
  "events": [
    {
      "event": "commented",
      "id": 2167086582,
      "node_id": "IC_kwDOABII586BKx32",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2167086582",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T02:16:34Z",
      "updated_at": "2024-09-12T19:16:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30286).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2342010162), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2297522865), [instagibbs](https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2346723974) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30857](https://github.com/bitcoin/bitcoin/pull/30857) (cluster mempool: extend DepGraph functionality by sipa)\n* [#30605](https://github.com/bitcoin/bitcoin/pull/30605) (Cluster linearization: separate tests from tests-of-tests by sipa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2167086582",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "renamed",
      "id": 13160824632,
      "node_id": "RTE_lADOABII586MNfM5zwAAAAMQcj84",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13160824632",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T13:12:25Z",
      "rename": {
        "from": "Low-level cluster linearization code: optimizations",
        "to": "cluster mempool: optimized candidate search"
      }
    },
    {
      "event": "labeled",
      "id": 13160852664,
      "node_id": "LE_lADOABII586MNfM5zwAAAAMQcqy4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13160852664",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T13:14:31Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13371816771,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMdBbtD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13371816771",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-02T21:05:40Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13430168882,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMggB0y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13430168882",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-08T21:28:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13462745165,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMicTBN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13462745165",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-10T21:18:50Z"
    },
    {
      "event": "labeled",
      "id": 13463446729,
      "node_id": "LE_lADOABII586MNfM5zwAAAAMie-TJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13463446729",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-10T22:46:02Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2221652361,
      "node_id": "IC_kwDOABII586Ea7mJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2221652361",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-10T22:46:03Z",
      "updated_at": "2024-07-10T22:46:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\nðŸš§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/27292784397</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2221652361",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13471067016,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMi8CuI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13471067016",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T12:31:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13471158065,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMi8Y8x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13471158065",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T12:39:11Z"
    },
    {
      "event": "unlabeled",
      "id": 13473203861,
      "node_id": "UNLE_lADOABII586MNfM5zwAAAAMjEMaV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13473203861",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T14:59:24Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13542807415,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMnNtd3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13542807415",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-17T20:37:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13579190845,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMpYgI9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13579190845",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-19T17:53:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13637251425,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMs1_Fh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13637251425",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-24T23:17:41Z"
    },
    {
      "event": "referenced",
      "id": 13659808898,
      "node_id": "REFE_lADOABII586MNfM5zwAAAAMuMCSC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13659808898",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "37bd70a2253331ffd24650e6536695e7f47a86b0",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/37bd70a2253331ffd24650e6536695e7f47a86b0",
      "created_at": "2024-07-26T11:12:18Z"
    },
    {
      "event": "labeled",
      "id": 13659857373,
      "node_id": "LE_lADOABII586MNfM5zwAAAAMuMOHd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13659857373",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T11:17:32Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13660484246,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMuOnKW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13660484246",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T12:19:45Z"
    },
    {
      "event": "unlabeled",
      "id": 13661348326,
      "node_id": "UNLE_lADOABII586MNfM5zwAAAAMuR6Hm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13661348326",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T13:36:10Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2207305648,
      "node_id": "PRR_kwDOABII586DkM-w",
      "url": null,
      "actor": null,
      "commit_id": "3eb993466b26bcddfd20fe4820d364480e3c3de3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Did an initial read-through",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2207305648",
      "submitted_at": "2024-07-30T15:50:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13701885868,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMwsi-s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13701885868",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-30T22:09:39Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13755663797,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAMz5sW1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13755663797",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-04T17:59:57Z"
    },
    {
      "event": "commented",
      "id": 2267621645,
      "node_id": "IC_kwDOABII586HKSkN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2267621645",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-04T18:00:34Z",
      "updated_at": "2024-08-04T18:00:34Z",
      "author_association": "MEMBER",
      "body": "Rebased on top of #30285 as it looks like that is closer.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2267621645",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13763136604,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM0WMxc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13763136604",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-05T11:55:08Z"
    },
    {
      "event": "reviewed",
      "id": 2221566752,
      "node_id": "PRR_kwDOABII586Eamsg",
      "url": null,
      "actor": null,
      "commit_id": "400a72b4abef4fd2aca8415d489d9d399f29b63d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "code review ACK. I haven't reviewed the fuzzers yet, doing that next. Tested by writing some benches that run a lot faster with the optimizations.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2221566752",
      "submitted_at": "2024-08-06T16:26:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13781921142,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM1d212",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13781921142",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-06T17:29:54Z"
    },
    {
      "event": "commented",
      "id": 2273780176,
      "node_id": "IC_kwDOABII586HhyHQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2273780176",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-07T15:44:35Z",
      "updated_at": "2024-08-07T16:00:55Z",
      "author_association": "MEMBER",
      "body": "reviewed through https://github.com/bitcoin/bitcoin/pull/30286/commits/06ea1016ff40ebcf3e668bdb993a0747904cb40f\r\n\r\neverything made sense to me except https://github.com/bitcoin/bitcoin/commit/29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2273780176",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "reviewed",
      "id": 2219685837,
      "node_id": "PRR_kwDOABII586ETbfN",
      "url": null,
      "actor": null,
      "commit_id": "06ea1016ff40ebcf3e668bdb993a0747904cb40f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2219685837",
      "submitted_at": "2024-08-07T15:44:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13798208653,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM2b_SN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13798208653",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-07T21:45:19Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13798812225,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM2eSpB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13798812225",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-07T23:32:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13800398719,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM2kV9_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13800398719",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-08T02:54:29Z"
    },
    {
      "event": "reviewed",
      "id": 2227384818,
      "node_id": "PRR_kwDOABII586EwzHy",
      "url": null,
      "actor": null,
      "commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2227384818",
      "submitted_at": "2024-08-08T09:47:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "reviewed",
      "id": 2227520975,
      "node_id": "PRR_kwDOABII586ExUXP",
      "url": null,
      "actor": null,
      "commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2227520975",
      "submitted_at": "2024-08-08T14:29:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13814583533,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM3adDt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13814583533",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-09T01:46:20Z"
    },
    {
      "event": "commented",
      "id": 2277019007,
      "node_id": "IC_kwDOABII586HuI1_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2277019007",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-09T02:13:11Z",
      "updated_at": "2024-08-09T02:13:11Z",
      "author_association": "MEMBER",
      "body": "Unsure where this should live, but I have a Python reimplementation of the depgraph serialization code + mermaid formatter: https://gist.github.com/sipa/822f60db6608a26bb4aae75fd31bcb12",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2277019007",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13896795918,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM8UEcO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13896795918",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T14:36:00Z"
    },
    {
      "event": "reviewed",
      "id": 2242391076,
      "node_id": "PRR_kwDOABII586FqCwk",
      "url": null,
      "actor": null,
      "commit_id": "ce177d260041f8443838c8f8bb33afbbef4ec3bf",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2242391076",
      "submitted_at": "2024-08-16T10:10:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "commented",
      "id": 2293497129,
      "node_id": "IC_kwDOABII586Is_0p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2293497129",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T13:19:09Z",
      "updated_at": "2024-08-16T13:19:09Z",
      "author_association": "MEMBER",
      "body": "fwiw, my bench results (I commented out `assert(iters_performed == max_iters)` since it fails)\r\n\r\n`git rebase -i --exec=\"make -j12 > /dev/null && src/bench/bench_bitcoin -filter=Linearize.*\" HEAD~11`\r\nOutput: [bench_30286_all.txt](https://github.com/user-attachments/files/16637507/bench_30286_all.txt)\r\n\r\nReformatted as a csv: [output_benchmarks_ns_op.csv](https://github.com/user-attachments/files/16637477/output_benchmarks_ns_op.csv)\r\n\r\n\r\nDisplayed as a line graph (x-axis is commit, y-axis is ns/op):\r\n![image](https://github.com/user-attachments/assets/6c142185-92ad-402a-af39-9cfc20220962)",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2293497129",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13910932471,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM9J_v3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13910932471",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T13:26:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13914148461,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM9WQ5t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13914148461",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T18:55:57Z"
    },
    {
      "event": "commented",
      "id": 2294005237,
      "node_id": "IC_kwDOABII586Iu731",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2294005237",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T18:56:55Z",
      "updated_at": "2024-08-16T18:56:55Z",
      "author_association": "MEMBER",
      "body": "(Reposting at PR level instead of review level)\r\n\r\n@glozow Cool, building on that:\r\n\r\n```\r\n$ git rebase --exec='F=$(mktemp) && make -j -C src bench/bench_bitcoin >/dev/null && src/bench/bench_bitcoin -filter=Linearize64TxWorstCase.* -min-time=60000 -output-json=$F >/dev/null 2>/dev/null && NS=$(cat $F | jq \"(.results[0][\\\"median(elapsed)\\\"] - .results[1][\\\"median(elapsed)\\\"]) / 10000 * 1000000000\") && TITLE=$(git show -s --format=\"%s\") && echo \"$NS $TITLE\"' HEAD~11 2>/dev/null\r\n11.60165442504903  clusterlin bench: have low/high iter benchmarks instead of per-iter\r\n11.583260381566241 clusterlin: separate initial search entries per component (optimization)\r\n11.53167576849342  clusterlin: add reordering support for DepGraph\r\n12.451696899512429 clusterlin: use feerate-sorted depgraph in SearchCandidateFinder\r\n28.3225308342194   clusterlin: track upper bound potential set for work items (optimization)\r\n28.0684870149178   clusterlin: reduce computation of unnecessary pot sets (optimization)\r\n33.4621797288421   clusterlin: include topological pot subsets automatically (optimization)\r\n42.1621546397433   clusterlin: improve heuristic to decide split transaction (optimization)\r\n46.8534839828272   clusterlin: avoid recomputing potential set on every split (optimization)\r\n46.167085876022306 clusterlin: avoid jump ahead in unmodified pot sets (optimization)\r\n45.5678434124763   clusterlin: only start/use search when enough iterations left\r\n```\r\n\r\nA general trend of increasing time per iteration is expected, as many changes are intended to reduce the number of iterations needed at the cost of increasing the per-iteration cost, but not all. I'm surprised at the lack of (significant) per-iteration time reduction for:\r\n* clusterlin: reduce computation of unnecessary pot sets (optimization)\r\n* clusterlin: avoid recomputing potential set on every split (optimization)\r\n* clusterlin: avoid jump ahead in unmodified pot sets (optimization)\r\n\r\nIt may be that these are optimizations that only help in the average case and not the worst case that's benchmarked here (which is probably worth some performance reduction in the worst case, but not much) or don't help at all. I'll investigate a bit more, and if not significant, drop them from this PR.\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2294005237",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 13914157183,
      "node_id": "MEE_lADOABII586MNfM5zwAAAAM9WTB_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13914157183",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T18:56:56Z"
    },
    {
      "event": "subscribed",
      "id": 13914157188,
      "node_id": "SE_lADOABII586MNfM5zwAAAAM9WTCE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13914157188",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T18:56:56Z"
    },
    {
      "event": "commented",
      "id": 2295021559,
      "node_id": "IC_kwDOABII586Iyz_3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2295021559",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-17T23:07:16Z",
      "updated_at": "2024-08-17T23:09:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sipa Though there may be other patterns which are a worst case even more worse than the particular lattice used for testing without those optimizations?  If you've been searching for worst case examples for a long time with those optimizations in place you may have missed cases that would be worse without them. No?\r\n\r\nAn important thing to keep in mind that the 'worst case' used in the tests is speculative.  You don't know for sure that it's actually a worse case under *any* version of the algorithm. It might be the worst case under some but not under others or it may never be a worst case (except for very small N which you've presumably tested exhaustively).",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2295021559",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 13920741984,
      "node_id": "MEE_lADOABII586MNfM5zwAAAAM9vapg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13920741984",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-17T23:07:18Z"
    },
    {
      "event": "subscribed",
      "id": 13920741985,
      "node_id": "SE_lADOABII586MNfM5zwAAAAM9vaph",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13920741985",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-17T23:07:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13934275110,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM-jCom",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13934275110",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T18:28:46Z"
    },
    {
      "event": "commented",
      "id": 2297470012,
      "node_id": "IC_kwDOABII586I8Jw8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2297470012",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T21:15:17Z",
      "updated_at": "2024-08-19T21:15:17Z",
      "author_association": "MEMBER",
      "body": "> I'm surprised at the lack of (significant) per-iteration time reduction for:\r\n>\r\n> * clusterlin: reduce computation of unnecessary pot sets (optimization)\r\n> * clusterlin: avoid recomputing potential set on every split (optimization)\r\n> * clusterlin: avoid jump ahead in unmodified pot sets (optimization)\r\n\r\nI have dropped the 2nd and 3rd, due to inconclusive evidence that they help. The 1st one I have kept; my belief is that it in fact does not improve the worst case, but it is also has very low cost even when it doesn't do anything. The 2nd and 3rd do have a cost if ineffective (as shown by @glozow's and my benchmarks). Reasoning:\r\n\r\n* **reduce computation of unnecessary pot sets**: I don't believe this affects the worst case. My conjecture is that worst cases are ones where knowing the best candidate set up front does not change the number of iterations requires (i.e., all search tree subtrees either fail immediately, or need to be fully explored because they appear to be potential best ones until the very end). In these subtrees, this optimization doesn't do anything, because its only effect is reducing computation in work items that are doomed to fail soon after anyway, and if my conjecture is true, such branches don't exist in the first place in worst case situations. Still, due to the low cost, I've left it in.\r\n* **avoid recomputing potential set on every split**: this optimization was based on a belief that a significant amount of time would be spent recomputing the same `pot` subset after every split. With some more investigation, (hard) clusters exist where this change is a net improvement and ones where it is a net degradation (found through a custom fuzz test that maximizes or minimizes the number of `pot` addition steps minus the cost of updating `pot` in `split_fn`, not an actual benchmark). The per-iteration potential gains seem higher than the per-iteration potential degrations, but the largest absolute losses are with close-to-worst clusters, while the largest absolute gains are with significantly simpler clusters, which is weak evidence that it may hurt the worst case more than it helps. I think this will need analysis with real-world clusters to see actual impact, which may be easier once the cluster mempool project is further along. I've dropped it for this reason.\r\n* **avoid jump ahead in unmodified pot sets**: does not make sense without the previous change, so I also dropped it.\r\n\r\n@gmaxwell \r\n\r\n> Though there may be other patterns which are a worst case even more worse than the particular lattice used for testing without those optimizations? If you've been searching for worst case examples for a long time with those optimizations in place you may have missed cases that would be worse without them. No?\r\n\r\nAbsolutely; even the apparent worst-case complexity $\\mathcal{O}(\\sqrt{2^n})$ is just a conjecture - it's possible that clusters exist which have up to $\\mathcal{O}(2^{n-1})$ complexity, and if so, a lot of empirical evidence that's been used to guide this development would go out the window. But given that I came up with it in an attempt to reduce a pattern which I incorrectly though would be very common, there isn't much justification to have it.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2297470012",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 13935942923,
      "node_id": "MEE_lADOABII586MNfM5zwAAAAM-pZ0L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13935942923",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T21:15:18Z"
    },
    {
      "event": "subscribed",
      "id": 13935942936,
      "node_id": "SE_lADOABII586MNfM5zwAAAAM-pZ0Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13935942936",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T21:15:18Z"
    },
    {
      "event": "mentioned",
      "id": 13935942945,
      "node_id": "MEE_lADOABII586MNfM5zwAAAAM-pZ0h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13935942945",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T21:15:18Z"
    },
    {
      "event": "subscribed",
      "id": 13935942954,
      "node_id": "SE_lADOABII586MNfM5zwAAAAM-pZ0q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13935942954",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T21:15:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13936342214,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAAM-q7TG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13936342214",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-19T22:01:27Z"
    },
    {
      "event": "reviewed",
      "id": 2251100080,
      "node_id": "PRR_kwDOABII586GLQ-w",
      "url": null,
      "actor": null,
      "commit_id": "1b8f143fb791fe5ba40ce6610cd4e8e04b951495",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "code review ACK 1b8f143fb791fe5ba40ce6610cd4e8e04b951495\r\n\r\nThanks for dropping those couple commits.\r\n\r\n> I think this will need analysis with real-world clusters to see actual impact, which may be easier once the cluster mempool project is further along. I've dropped it for this reason.\r\n\r\nOn that note I think we'll need some diagram-quality style benchmarks to make informed decisions in the future, otherwise it makes ongoing changes difficult to justify.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2251100080",
      "submitted_at": "2024-08-21T18:20:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "review_requested",
      "id": 13964690970,
      "node_id": "RRE_lADOABII586MNfM5zwAAAANAXEYa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13964690970",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T18:20:10Z",
      "requested_reviewer": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13964969734,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANAYIcG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13964969734",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T18:47:56Z"
    },
    {
      "event": "commented",
      "id": 2302743849,
      "node_id": "IC_kwDOABII586JQRUp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2302743849",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T18:50:03Z",
      "updated_at": "2024-08-21T18:50:03Z",
      "author_association": "MEMBER",
      "body": "> On that note I think we'll need some diagram-quality style benchmarks to make informed decisions in the future, otherwise it makes ongoing changes difficult to justify.\r\n\r\nFWIW, the two dropped commits are pure optimizations (they should have zero effect on the outcome, or the number of iterations performed; just on the amount of time spent per iteration).\r\n\r\nI'll add an overview of the expected impact of each commit in this PR description.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2302743849",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2302746644,
      "node_id": "IC_kwDOABII586JQSAU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2302746644",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T18:51:51Z",
      "updated_at": "2024-08-21T18:51:51Z",
      "author_association": "MEMBER",
      "body": "@sipa sure, but if we're weighing a change to this, it still matters as it may modify how many iterations we're willing to do",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2302746644",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 13965009568,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANAYSKg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13965009568",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T18:51:52Z"
    },
    {
      "event": "subscribed",
      "id": 13965009573,
      "node_id": "SE_lADOABII586MNfM5zwAAAANAYSKl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13965009573",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T18:51:52Z"
    },
    {
      "event": "commented",
      "id": 2302806417,
      "node_id": "IC_kwDOABII586JQgmR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2302806417",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T19:09:45Z",
      "updated_at": "2024-08-21T19:09:45Z",
      "author_association": "MEMBER",
      "body": "reACK 12760a57b3a6cd1aeb3b7532311f648de2b45aa4\r\n\r\nvia `git range-diff master 1b8f143fb791fe5ba40ce6610cd4e8e04b951495 12760a57b3a6cd1aeb3b7532311f648de2b45aa4`",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2302806417",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "reviewed",
      "id": 2256916267,
      "node_id": "PRR_kwDOABII586Ghc8r",
      "url": null,
      "actor": null,
      "commit_id": "12760a57b3a6cd1aeb3b7532311f648de2b45aa4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 12760a57b3a\r\n\r\nAgree with keeping \"reduce computation of unnecessary pot sets\", intuitively it seems useful in the average situation and quite cheap.\r\n\r\nThanks for dropping \"avoid jump ahead in unmodified pot sets,\" I wasn't convinced that processing the existing pot txns in the exclusion branch is always redundant or faster to skip. It also made the code harder for future people to understand, which I think is important.\r\n\r\nI redid code review, all pretty straightforward now.\r\n\r\nPrettified bench results:\r\n![image](https://github.com/user-attachments/assets/a1e45724-cc1e-446a-b346-888983f15639)\r\n\r\n[bench.csv](https://github.com/user-attachments/files/16729510/2024-08-22-bench-30286.csv)\r\n\r\n",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2256916267",
      "submitted_at": "2024-08-23T13:45:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "reviewed",
      "id": 2260608958,
      "node_id": "PRR_kwDOABII586Gvie-",
      "url": null,
      "actor": null,
      "commit_id": "12760a57b3a6cd1aeb3b7532311f648de2b45aa4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2260608958",
      "submitted_at": "2024-08-26T16:58:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "reviewed",
      "id": 2272161235,
      "node_id": "PRR_kwDOABII586Hbm3T",
      "url": null,
      "actor": null,
      "commit_id": "12760a57b3a6cd1aeb3b7532311f648de2b45aa4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I was hoping to see the benchmark improve but it seems it doesn't but it decreases a bit after the optimizations of this PR.\r\n\r\nBenched on M2 Pro\r\n\r\nOn 21a184db63bd13cf0c2dff9e6e61ca85f2ff4454\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|           34,200.59 |           29,239.26 |    0.4% |      0.01 | `Linearize16TxWorstCase120Iters`\r\n|            6,384.70 |          156,624.46 |    2.1% |      0.01 | `Linearize16TxWorstCase20Iters`\r\n|        3,416,000.00 |              292.74 |    1.0% |      0.04 | `Linearize32TxWorstCase15000Iters`\r\n|        1,159,875.00 |              862.16 |    1.7% |      0.01 | `Linearize32TxWorstCase5000Iters`\r\n|        3,372,792.00 |              296.49 |    2.1% |      0.04 | `Linearize48TxWorstCase15000Iters`\r\n|        1,144,166.00 |              874.00 |    2.2% |      0.01 | `Linearize48TxWorstCase5000Iters`\r\n|        3,365,333.00 |              297.15 |    1.8% |      0.04 | `Linearize64TxWorstCase15000Iters`\r\n|        1,122,792.00 |              890.64 |    0.7% |      0.01 | `Linearize64TxWorstCase5000Iters`\r\n|        5,721,541.00 |              174.78 |    1.0% |      0.06 | `Linearize75TxWorstCase15000Iters`\r\n|        1,904,166.00 |              525.16 |    1.1% |      0.02 | `Linearize75TxWorstCase5000Iters`\r\n|        5,672,875.00 |              176.28 |    1.3% |      0.06 | `Linearize99TxWorstCase15000Iters`\r\n|        1,889,542.00 |              529.23 |    0.8% |      0.02 | `Linearize99TxWorstCase5000Iters`\r\n\r\n\r\nOn 12760a57b3a6cd1aeb3b7532311f648de2b45aa4\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          152,479.17 |            6,558.27 |    1.3% |      0.01 | `Linearize16TxWorstCase120Iters`\r\n|           40,915.00 |           24,440.91 |    2.3% |      0.01 | `Linearize16TxWorstCase20Iters`\r\n|       12,573,458.00 |               79.53 |    1.3% |      0.14 | `Linearize32TxWorstCase15000Iters`\r\n|        4,422,792.00 |              226.10 |    1.0% |      0.05 | `Linearize32TxWorstCase5000Iters`\r\n|       12,813,167.00 |               78.04 |    0.5% |      0.14 | `Linearize48TxWorstCase15000Iters`\r\n|        4,635,208.00 |              215.74 |    1.1% |      0.05 | `Linearize48TxWorstCase5000Iters`\r\n|       13,188,833.00 |               75.82 |    1.2% |      0.14 | `Linearize64TxWorstCase15000Iters`\r\n|        4,867,542.00 |              205.44 |    1.0% |      0.05 | `Linearize64TxWorstCase5000Iters`\r\n|       20,246,083.00 |               49.39 |    1.3% |      0.22 | `Linearize75TxWorstCase15000Iters`\r\n|        7,692,334.00 |              130.00 |    1.1% |      0.08 | `Linearize75TxWorstCase5000Iters`\r\n|       20,629,500.00 |               48.47 |    2.2% |      0.22 | `Linearize99TxWorstCase15000Iters`\r\n|        7,990,417.00 |              125.15 |    1.7% |      0.09 | `Linearize99TxWorstCase5000Iters`\r\n\r\nI believe this is due to the increased per-iteration cost introduced by the optimizations. In favor of reduction of the maximum number of iterations from  $2^{N-1}$ to $\\sqrt{2^N}$ (which is really nice).\r\n\r\n\r\n\r\nOne notable thing I observe from this result is as the total number of iterations increase the total time taken also increases a bit.\r\n\r\nFor smaller transaction clusters which are more common in the mempool is the tradeoff is justified given that the total time to complete in master and this PR is fairly even from the bench?\r\n\r\n\r\n\r\n---\r\n#### I attempted to benchmark the maximum `iter_limit` values before and after this PR on few cluster sizes\r\n\r\nI did the benchmark by modifying the `iter_limit` parameter of the `BenchLinearizeWorstCase` function for various cluster sizes (16, 32, 48, 64, 75, and 99).\r\n\r\n\r\nOn [21a184db63bd13cf0c2dff9e6e61ca85f2ff4454](https://github.com/bitcoin/bitcoin/commit/21a184db63bd13cf0c2dff9e6e61ca85f2ff4454)\r\n\r\nI set  `iter_limit` to $2^{N-1}$\r\n\r\n<details>\r\n<summary>View Diff</summary>\r\n\r\n```diff\r\ndiff --git a/src/bench/cluster_linearize.cpp b/src/bench/cluster_linearize.cpp\r\nindex e63e5d76c8b..d18df32b202 100644\r\n--- a/src/bench/cluster_linearize.cpp\r\n+++ b/src/bench/cluster_linearize.cpp\r\n@@ -114,14 +114,17 @@ DepGraph<SetType> MakeHardGraph(ClusterIndex ntx)\r\n  * iterations difference.\r\n  */\r\n template<typename SetType>\r\n-void BenchLinearizeWorstCase(ClusterIndex ntx, benchmark::Bench& bench, uint64_t iter_limit)\r\n+void BenchLinearizeWorstCase(ClusterIndex ntx, benchmark::Bench& bench, std::optional<uint64_t> iter_limit)\r\n {\r\n+    if (!iter_limit.has_value()) {\r\n+        iter_limit = 1 << (ntx - 1);\r\n+    }\r\n     const auto depgraph = MakeHardGraph<SetType>(ntx);\r\n     uint64_t rng_seed = 0;\r\n     bench.run([&] {\r\n         SearchCandidateFinder finder(depgraph, rng_seed++);\r\n-        auto [candidate, iters_performed] = finder.FindCandidateSet(iter_limit, {});\r\n-        assert(iters_performed == iter_limit);\r\n+        auto [candidate, iters_performed] = finder.FindCandidateSet(iter_limit.value(), {});\r\n+        assert(iters_performed <= iter_limit.value());\r\n     });\r\n }\r\n \r\n@@ -217,6 +220,13 @@ static void Linearize75TxWorstCase15000Iters(benchmark::Bench& bench) { BenchLin\r\n static void Linearize99TxWorstCase5000Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<99>>(99, bench, 5000); }\r\n static void Linearize99TxWorstCase15000Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<99>>(99, bench, 15000); }\r\n\r\n+static void Linearize16TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<16>>(16, bench, std::nullopt); }\r\n+static void Linearize32TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<32>>(32, bench, std::nullopt); }\r\n+static void Linearize48TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<48>>(48, bench, std::nullopt); }\r\n+static void Linearize64TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<64>>(64, bench, std::nullopt); }\r\n+static void Linearize75TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<75>>(75, bench, std::nullopt); }\r\n+static void Linearize99TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<99>>(99, bench, std::nullopt); }\r\n+\r\n static void LinearizeNoIters16TxWorstCaseAnc(benchmark::Bench& bench) { BenchLinearizeNoItersWorstCaseAnc<BitSet<16>>(16, bench); }\r\n static void LinearizeNoIters32TxWorstCaseAnc(benchmark::Bench& bench) { BenchLinearizeNoItersWorstCaseAnc<BitSet<32>>(32, bench); }\r\n static void LinearizeNoIters48TxWorstCaseAnc(benchmark::Bench& bench) { BenchLinearizeNoItersWorstCaseAnc<BitSet<48>>(48, bench); }\r\n@@ -245,43 +255,50 @@ static void MergeLinearizations64TxWorstCase(benchmark::Bench& bench) { BenchMer\r\n static void MergeLinearizations75TxWorstCase(benchmark::Bench& bench) { BenchMergeLinearizationsWorstCase<BitSet<75>>(75, bench); }\r\n static void MergeLinearizations99TxWorstCase(benchmark::Bench& bench) { BenchMergeLinearizationsWorstCase<BitSet<99>>(99, bench); }\r\n\r\n+BENCHMARK(Linearize16TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize32TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize48TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize64TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize75TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize99TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n\r\n```\r\n\r\n</details>\r\n\r\n\r\n|           ns/op |         op/s | err% | total | Benchmark                    |\r\n|----------------:|-------------:|-----:|------:|:-----------------------------|\r\n|   1,168,959.00  |      855.46  | 1.8% |  0.01 | `Linearize16TxWorstCase`     |\r\n| 5,546,978,667.00|        0.18  | 0.8% | 60.83 | `Linearize32TxWorstCase`     |\r\n|   7,401,916.00  |      135.10  | 0.4% |  0.08 | `Linearize48TxWorstCase`     |\r\n|     421,208.50  |    2,374.12  | 0.8% |  0.01 | `Linearize75TxWorstCase`     |\r\n|       4,004.02  |  249,749.05  | 0.6% |  0.01 | `Linearize99TxWorstCase`     |\r\n\r\nThe benchmark for `Linearize64TxWorstCase` hung during execution, while the others completed successfully.\r\n`Linearize32TxWorstCase` completed after a minute.\r\n\r\n\r\n\r\n\r\nOn [12760a57b3a6cd1aeb3b7532311f648de2b45aa4](https://github.com/bitcoin/bitcoin/commit/12760a57b3a6cd1aeb3b7532311f648de2b45aa4)\r\n\r\nI set `iter_limit`` to $âˆš{2^{N}}$\r\n\r\n\r\n\r\n<details>\r\n<summary>View Diff</summary>\r\n\r\n```diff\r\ndiff --git a/src/bench/cluster_linearize.cpp b/src/bench/cluster_linearize.cpp\r\nindex 48ede53bd7d..e50bc55f4d9 100644\r\n--- a/src/bench/cluster_linearize.cpp\r\n+++ b/src/bench/cluster_linearize.cpp\r\n@@ -6,6 +6,7 @@\r\n \r\n #include <util/bitset.h>\r\n #include <cluster_linearize.h>\r\n+#include <cmath>\r\n \r\n using namespace cluster_linearize;\r\n \r\n@@ -114,14 +115,17 @@ DepGraph<SetType> MakeHardGraph(ClusterIndex ntx)\r\n  * iterations difference.\r\n  */\r\n template<typename SetType>\r\n-void BenchLinearizeWorstCase(ClusterIndex ntx, benchmark::Bench& bench, uint64_t iter_limit)\r\n+void BenchLinearizeWorstCase(ClusterIndex ntx, benchmark::Bench& bench, std::optional<uint64_t> iter_limit)\r\n {\r\n+    if (!iter_limit.has_value()) {\r\n+        iter_limit = std::sqrt(1 << ntx);\r\n+    }\r\n     const auto depgraph = MakeHardGraph<SetType>(ntx);\r\n     uint64_t rng_seed = 0;\r\n     bench.run([&] {\r\n         SearchCandidateFinder finder(depgraph, rng_seed++);\r\n-        auto [candidate, iters_performed] = finder.FindCandidateSet(iter_limit, {});\r\n-        assert(iters_performed == iter_limit);\r\n+        auto [candidate, iters_performed] = finder.FindCandidateSet(iter_limit.value(), {});\r\n+        assert(iters_performed <= iter_limit.value());\r\n     });\r\n }\r\n \r\n@@ -217,6 +221,13 @@ static void Linearize75TxWorstCase15000Iters(benchmark::Bench& bench) { BenchLin\r\n static void Linearize99TxWorstCase5000Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<99>>(99, bench, 5000); }\r\n static void Linearize99TxWorstCase15000Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<99>>(99, bench, 15000); }\r\n\r\n+static void Linearize16TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<16>>(16, bench, std::nullopt); }\r\n+static void Linearize32TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<32>>(32, bench, std::nullopt); }\r\n+static void Linearize48TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<48>>(48, bench, std::nullopt); }\r\n+static void Linearize64TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<64>>(64, bench, std::nullopt); }\r\n+static void Linearize75TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<75>>(75, bench, std::nullopt); }\r\n+static void Linearize99TxWorstCase(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<99>>(99, bench, std::nullopt); }\r\n+\r\n static void LinearizeNoIters16TxWorstCaseAnc(benchmark::Bench& bench) { BenchLinearizeNoItersWorstCaseAnc<BitSet<16>>(16, bench); }\r\n static void LinearizeNoIters32TxWorstCaseAnc(benchmark::Bench& bench) { BenchLinearizeNoItersWorstCaseAnc<BitSet<32>>(32, bench); }\r\n static void LinearizeNoIters48TxWorstCaseAnc(benchmark::Bench& bench) { BenchLinearizeNoItersWorstCaseAnc<BitSet<48>>(48, bench); }\r\n@@ -245,43 +256,50 @@ static void MergeLinearizations64TxWorstCase(benchmark::Bench& bench) { BenchMer\r\n static void MergeLinearizations75TxWorstCase(benchmark::Bench& bench) { BenchMergeLinearizationsWorstCase<BitSet<75>>(75, bench); }\r\n static void MergeLinearizations99TxWorstCase(benchmark::Bench& bench) { BenchMergeLinearizationsWorstCase<BitSet<99>>(99, bench); }\r\n\r\n+BENCHMARK(Linearize16TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize32TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize48TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize64TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize75TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(Linearize99TxWorstCase, benchmark::PriorityLevel::HIGH);\r\n\r\n\r\n```\r\n\r\n</details>\r\n\r\n\r\n|         ns/op |        op/s | err% | total | Benchmark                |\r\n|--------------:|------------:|-----:|------:|:-------------------------|\r\n|   168,569.50  |   5,932.27  | 0.6% |  0.01 | `Linearize16TxWorstCase` |\r\n|    18,648.34  |  53,624.08  | 0.3% |  0.01 | `Linearize32TxWorstCase` |\r\n|   770,417.00  |   1,298.00  | 1.0% |  0.01 | `Linearize48TxWorstCase` |\r\n|    34,281.25  |  29,170.46  | 0.3% |  0.01 | `Linearize64TxWorstCase` |\r\n|   379,319.67  |   2,636.30  | 2.2% |  0.01 | `Linearize75TxWorstCase` |\r\n|    78,330.08  |  12,766.49  | 2.2% |  0.01 | `Linearize99TxWorstCase` |\r\n\r\nAll benchmarks completed successfully, and the results indicate a performance improvement compared to the previous test.\r\n\r\n- Setting `iter_limit` to $2^{N-1}$ before this PR resulted in longer execution times and, in one case (`Linearize64TxWorstCase`), caused Linearize64TxWorstCase benchmark to hang which I did not investigate why.\r\n\r\n- Setting the `iter_limit` to $\\sqrt{2^{N}}$ improved performance across all cluster sizes, with all benchmarks completing successfully.\r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2272161235",
      "submitted_at": "2024-08-30T16:28:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14095142519,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANIIs53",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14095142519",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-01T16:45:01Z"
    },
    {
      "event": "commented",
      "id": 2323431530,
      "node_id": "IC_kwDOABII586KfMBq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2323431530",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-01T17:19:22Z",
      "updated_at": "2024-09-01T17:19:22Z",
      "author_association": "MEMBER",
      "body": "@ismaelsadeeq I believe you're triggering integer overflows in your code (`1 << ntx` is 0 in case `ntx` is 32 or more, on typical platforms; with `uint64_t{1} << ntx` you can support `ntx` up to 63).\r\n\r\nAlso, yes, it's definitely possible that for sufficiently small clusters simpler algorithms are better, but it's hard to say how much those matters, as they'll be super fast already anyway. I believe that for ntx up to 3, just PostLinearize will linearize optimally directly (as would AncestorCandidateFinder). Up to ntx=6 or so, the naive search algorithm that's used in the fuzz test `SimpleCandidateFinder` is probably faster than `SearchCandidateFinder`... but that likely still finishes within microseconds.\r\n\r\nTo actually demonstrate the effectiveness of the optimizations here, perhaps it's worth gathering some real-world hard clusters. @sdaftuar do you think you could instrument your code to gather/dump clusters that linearize optimally with say 1,000,000 iterations but not using 100,000 iterations, using the code up to commit 21b826af07fdfa26aaf981cc0810edd6b55b45e0 (before that commit the search algorithm is so naive that high iteration count isn't really an indication of being hard). Perhaps a corpus of such clusters could be added as a benchmark - hopefully that shows a real benefit of each commit here.\r\n\r\nDespite being the current next PR to review in the cluster mempool project, this isn't actually blocking anything, so no rush here.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2323431530",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14095215388,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANII-sc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14095215388",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-01T17:19:23Z"
    },
    {
      "event": "subscribed",
      "id": 14095215389,
      "node_id": "SE_lADOABII586MNfM5zwAAAANII-sd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14095215389",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-01T17:19:23Z"
    },
    {
      "event": "mentioned",
      "id": 14095215393,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANII-sh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14095215393",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-01T17:19:23Z"
    },
    {
      "event": "subscribed",
      "id": 14095215395,
      "node_id": "SE_lADOABII586MNfM5zwAAAANII-sj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14095215395",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-01T17:19:23Z"
    },
    {
      "event": "reviewed",
      "id": 2275360087,
      "node_id": "PRR_kwDOABII586Hnz1X",
      "url": null,
      "actor": null,
      "commit_id": "100e1b9ecb29c76187112fda9fed1c01da192c99",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "light code review and Tested ACK 100e1b9ecb29c76187112fda9fed1c01da192c99\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2275360087",
      "submitted_at": "2024-09-02T11:17:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "commented",
      "id": 2325113562,
      "node_id": "IC_kwDOABII586Klmra",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2325113562",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-02T17:07:38Z",
      "updated_at": "2024-09-02T17:07:38Z",
      "author_association": "MEMBER",
      "body": "reACK 100e1b9ecb2 via range-diff",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2325113562",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2327148258,
      "node_id": "IC_kwDOABII586KtXbi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2327148258",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-03T18:20:00Z",
      "updated_at": "2024-09-03T18:20:00Z",
      "author_association": "MEMBER",
      "body": "reACK 100e1b9ecb29c76187112fda9fed1c01da192c99\r\n\r\nvia `git range-diff master 12760a57b3a6cd1aeb3b7532311f648de2b45aa4 100e1b9ecb29c76187112fda9fed1c01da192c99`\r\n\r\njust some comment updates",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2327148258",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2329027542,
      "node_id": "IC_kwDOABII586K0iPW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2329027542",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:19:50Z",
      "updated_at": "2024-09-04T13:19:50Z",
      "author_association": "MEMBER",
      "body": "> @sdaftuar do you think you could instrument your code to gather/dump clusters that linearize optimally with say 1,000,000 iterations but not using 100,000 iterations, using the code up to commit [21b826a](https://github.com/bitcoin/bitcoin/commit/21b826af07fdfa26aaf981cc0810edd6b55b45e0) (before that commit the search algorithm is so naive that high iteration count isn't really an indication of being hard).\r\n\r\nI used my simulation environment to run the commit you listed on last year's data, searching for clusters that were optimal within 1M iterations but required more than 100,000 iterations.  I then sorted those by iteration count and took the \"worst\" 20 clusters, which I added to our benchmark suite in this branch: https://github.com/sdaftuar/bitcoin/tree/test-30286\r\n\r\nI then ran that benchmark on each intermediate commit of this PR.  At the beginning of this PR, on my machine, the fastest cluster takes **~5ms** to linearize, with nearly all the rest being at around 10ms.  By the end of this PR, the fastest cluster linearizes (optimally) in **1.4us**, and the slowest cluster takes **115us** (and other than the slowest cluster I found, all the rest are under **50us**).  So this is a huge improvement.\r\n\r\nNote that I excluded any LIMO calculations in this benchmark (by not passing in a pre-existing linearization to `Linearize`).\r\n\r\nI'm attaching my output here for others to review/double check my summary (but you can also try to recreate the benchmarks locally using the branch I shared above): \r\n[output.bench.txt](https://github.com/user-attachments/files/16871148/output.bench.txt)\r\n",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2329027542",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14131037794,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANKRoZi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14131037794",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:19:51Z"
    },
    {
      "event": "subscribed",
      "id": 14131037830,
      "node_id": "SE_lADOABII586MNfM5zwAAAANKRoaG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14131037830",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:19:51Z"
    },
    {
      "event": "commented",
      "id": 2329149553,
      "node_id": "IC_kwDOABII586K1ABx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2329149553",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:59:21Z",
      "updated_at": "2024-09-04T13:59:21Z",
      "author_association": "MEMBER",
      "body": "@sdaftuar awesome data! Encouraging to see the timings move along with what @sipa was asserting :+1: ",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2329149553",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14131782318,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANKUeKu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14131782318",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:59:23Z"
    },
    {
      "event": "subscribed",
      "id": 14131782356,
      "node_id": "SE_lADOABII586MNfM5zwAAAANKUeLU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14131782356",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:59:23Z"
    },
    {
      "event": "mentioned",
      "id": 14131782379,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANKUeLr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14131782379",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:59:23Z"
    },
    {
      "event": "subscribed",
      "id": 14131782401,
      "node_id": "SE_lADOABII586MNfM5zwAAAANKUeMB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14131782401",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-04T13:59:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14150564957,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANLcHxd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150564957",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:03:55Z"
    },
    {
      "event": "commented",
      "id": 2332233857,
      "node_id": "IC_kwDOABII586LAxCB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2332233857",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:04:31Z",
      "updated_at": "2024-09-05T17:04:31Z",
      "author_association": "MEMBER",
      "body": "@sdaftuar Added your benchmarks as a commit to this PR (I've reworked it to auto-detect the transaction count).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2332233857",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14150572076,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANLcJgs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150572076",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:04:33Z"
    },
    {
      "event": "subscribed",
      "id": 14150572097,
      "node_id": "SE_lADOABII586MNfM5zwAAAANLcJhB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150572097",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:04:33Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14150624833,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANLcWZB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150624833",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:09:12Z"
    },
    {
      "event": "labeled",
      "id": 14150625709,
      "node_id": "LE_lADOABII586MNfM5zwAAAANLcWmt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150625709",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:09:17Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2332242431,
      "node_id": "IC_kwDOABII586LAzH_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2332242431",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:09:18Z",
      "updated_at": "2024-09-05T17:09:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/29741549265</sub>\n\n<details><summary>Hints</summary>\n\nMake sure to run all tests locally, according to the documentation.\n\nThe failure may happen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2332242431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14150876132,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANLdTvk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14150876132",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T17:32:18Z"
    },
    {
      "event": "reviewed",
      "id": 2283722590,
      "node_id": "PRR_kwDOABII586IHtde",
      "url": null,
      "actor": null,
      "commit_id": "cf94bf788611d1cbb5722f57f90dc65ae5e62dcb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2283722590",
      "submitted_at": "2024-09-05T17:47:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "unlabeled",
      "id": 14154513487,
      "node_id": "UNLE_lADOABII586MNfM5zwAAAANLrLxP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14154513487",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-05T23:41:01Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14154680136,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANLr0dI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14154680136",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T00:12:16Z"
    },
    {
      "event": "commented",
      "id": 2332931281,
      "node_id": "IC_kwDOABII586LDbTR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2332931281",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T00:12:57Z",
      "updated_at": "2024-09-06T00:12:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "Nice benchmarks, any value in running them on the removed optimizations?\r\n\r\n> clusterlin: avoid recomputing potential set on every split (optimization)\r\n> clusterlin: avoid jump ahead in unmodified pot sets (optimization)\r\n\r\n\r\nAny idea why LinearizeSerializedCluster5 is an outlier now?  It separates from the rest at \"improve heuristic to decide split transaction\".\r\n",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2332931281",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2332992189,
      "node_id": "IC_kwDOABII586LDqK9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2332992189",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T01:14:42Z",
      "updated_at": "2024-09-06T01:14:42Z",
      "author_association": "MEMBER",
      "body": "@gmaxwell I've just pushed a new set of example benchmark clusters, with the property that they need between 100k and 1M iterations to linearize optimally sometimes and never more than 10M iterations. I'm not well set up right now to benchmark, but at the end of this PR, I see:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|       13,034,966.68 |               76.72 |    1.2% |     10.96 | `LinearizeOptimallyExample00`\r\n|           72,373.73 |           13,817.17 |    0.2% |     10.65 | `LinearizeOptimallyExample01`\r\n|           65,761.78 |           15,206.40 |    0.1% |     10.59 | `LinearizeOptimallyExample02`\r\n|           65,761.24 |           15,206.53 |    0.4% |     10.63 | `LinearizeOptimallyExample03`\r\n|            6,732.35 |          148,536.44 |    0.3% |     10.61 | `LinearizeOptimallyExample04`\r\n|           69,041.02 |           14,484.14 |    1.3% |     10.64 | `LinearizeOptimallyExample05`\r\n|           69,270.49 |           14,436.16 |    2.0% |     10.41 | `LinearizeOptimallyExample06`\r\n|           69,446.96 |           14,399.48 |    2.3% |     10.67 | `LinearizeOptimallyExample07`\r\n|           48,274.16 |           20,715.02 |    0.2% |     11.03 | `LinearizeOptimallyExample08`\r\n|           77,312.66 |           12,934.49 |    0.1% |     10.73 | `LinearizeOptimallyExample09`\r\n|           77,423.28 |           12,916.01 |    0.2% |     10.74 | `LinearizeOptimallyExample10`\r\n|           56,558.64 |           17,680.76 |    3.7% |     11.22 | `LinearizeOptimallyExample11`\r\n|           45,744.29 |           21,860.65 |    0.1% |     10.99 | `LinearizeOptimallyExample12`\r\n|           32,857.15 |           30,434.77 |    0.3% |     11.04 | `LinearizeOptimallyExample13`\r\n|           57,328.16 |           17,443.43 |    0.3% |     10.97 | `LinearizeOptimallyExample14`\r\n|           16,797.84 |           59,531.47 |    0.2% |     10.98 | `LinearizeOptimallyExample15`\r\n|      205,594,200.40 |                4.86 |    0.1% |     11.31 | `LinearizeOptimallyExample16`\r\n|      208,598,643.80 |                4.79 |    0.5% |     10.82 | `LinearizeOptimallyExample17`\r\n|      193,159,355.60 |                5.18 |    0.9% |     10.84 | `LinearizeOptimallyExample18`\r\n|      208,075,819.25 |                4.81 |    0.8% |     11.22 | `LinearizeOptimallyExample19`\r\n\r\n@sdaftuar Is it possible that some of these clusters are \"related\" (as in are really modifications of one another with a few transactions added/removed)? That could explain the strong correlations between consecutive ones.\r\n\r\nI have pushed a branch with the two dropped optimization commits re-added to https://github.com/sipa/bitcoin/commits/202409_clusterlin_more_opt, if someone wants to benchmark.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2332992189",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14155033877,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANLtK0V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14155033877",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T01:14:44Z"
    },
    {
      "event": "subscribed",
      "id": 14155033889,
      "node_id": "SE_lADOABII586MNfM5zwAAAANLtK0h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14155033889",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T01:14:44Z"
    },
    {
      "event": "mentioned",
      "id": 14155033897,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANLtK0p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14155033897",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T01:14:44Z"
    },
    {
      "event": "subscribed",
      "id": 14155033903,
      "node_id": "SE_lADOABII586MNfM5zwAAAANLtK0v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14155033903",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T01:14:44Z"
    },
    {
      "event": "commented",
      "id": 2334033449,
      "node_id": "IC_kwDOABII586LHoYp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2334033449",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:15:17Z",
      "updated_at": "2024-09-06T13:15:17Z",
      "author_association": "MEMBER",
      "body": "Examples 16-19 seem to get slower?\r\nMy results on the last commit look similar to sipa's:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|       17,187,614.00 |               58.18 |    4.0% |      0.19 | `LinearizeOptimallyExample00`\r\n|           96,365.70 |           10,377.14 |    0.2% |      0.01 | `LinearizeOptimallyExample01`\r\n|           87,832.50 |           11,385.31 |    3.1% |      0.01 | `LinearizeOptimallyExample02`\r\n|           86,292.45 |           11,588.50 |    1.9% |      0.01 | `LinearizeOptimallyExample03`\r\n|            8,905.69 |          112,287.78 |    1.3% |      0.01 | `LinearizeOptimallyExample04`\r\n|           90,947.18 |           10,995.39 |    3.2% |      0.01 | `LinearizeOptimallyExample05`\r\n|           90,872.91 |           11,004.38 |    4.2% |      0.01 | `LinearizeOptimallyExample06`\r\n|           93,178.40 |           10,732.10 |    1.3% |      0.01 | `LinearizeOptimallyExample07`\r\n|           72,569.92 |           13,779.81 |    3.9% |      0.01 | `LinearizeOptimallyExample08`\r\n|          106,545.57 |            9,385.66 |    3.8% |      0.01 | `LinearizeOptimallyExample09`\r\n|          103,444.11 |            9,667.06 |    0.9% |      0.01 | `LinearizeOptimallyExample10`\r\n|           74,771.30 |           13,374.12 |    2.9% |      0.01 | `LinearizeOptimallyExample11`\r\n|           57,063.53 |           17,524.33 |    0.3% |      0.01 | `LinearizeOptimallyExample12`\r\n|           43,317.04 |           23,085.60 |    2.1% |      0.01 | `LinearizeOptimallyExample13`\r\n|           82,872.00 |           12,066.80 |    2.6% |      0.01 | `LinearizeOptimallyExample14`\r\n|           21,907.07 |           45,647.37 |    0.8% |      0.01 | `LinearizeOptimallyExample15`\r\n|      276,053,164.00 |                3.62 |    0.3% |      3.03 | `LinearizeOptimallyExample16`\r\n|      275,137,154.00 |                3.63 |    0.2% |      3.04 | `LinearizeOptimallyExample17`\r\n|      258,526,924.00 |                3.87 |    0.5% |      2.85 | `LinearizeOptimallyExample18`\r\n|      273,558,093.00 |                3.66 |    0.3% |      3.02 | `LinearizeOptimallyExample19`\r\n\r\nBut here's commit-by-commit [2024-09-06-bench-examples.txt](https://github.com/user-attachments/files/16908467/2024-09-06-bench-examples.txt)\r\n![image](https://github.com/user-attachments/assets/43e6ed6a-47ba-4b89-8582-76499d80a257)\r\n\r\n",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2334033449",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2334042896,
      "node_id": "IC_kwDOABII586LHqsQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2334042896",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:20:37Z",
      "updated_at": "2024-09-06T13:20:37Z",
      "author_association": "MEMBER",
      "body": "Thanks for the graphs, @glozow. That confirms the impression we got: 16-19 seem to just be really hard, and the later optimizations just don't help with it (and increase per-iteration cost, for no meaningful iteration reduction).\n\nIt doesn't surprise me that this is possible (they are after all very far below the conjectured upper bound of $\\mathcal{O}(\\sqrt{2^N})$, but it does surprise me that such clusters are seen in historical real-world mempool data.\n\nPerhaps it's worth investigating (in a follow up) if there are more specific optimizations targetting the patterns in those clusters.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2334042896",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14161994853,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANMHuRl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14161994853",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:20:39Z"
    },
    {
      "event": "subscribed",
      "id": 14161994875,
      "node_id": "SE_lADOABII586MNfM5zwAAAANMHuR7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14161994875",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:20:39Z"
    },
    {
      "event": "commented",
      "id": 2334102610,
      "node_id": "IC_kwDOABII586LH5RS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2334102610",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:49:36Z",
      "updated_at": "2024-09-06T13:49:36Z",
      "author_association": "MEMBER",
      "body": "> @sdaftuar Is it possible that some of these clusters are \"related\" (as in are really modifications of one another with a few transactions added/removed)? That could explain the strong correlations between consecutive ones.\r\n\r\nI do believe those last 4 examples are likely to be related, as all were found within minutes of each other on the same day.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2334102610",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14162457143,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANMJfI3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14162457143",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:49:38Z"
    },
    {
      "event": "subscribed",
      "id": 14162457172,
      "node_id": "SE_lADOABII586MNfM5zwAAAANMJfJU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14162457172",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T13:49:38Z"
    },
    {
      "event": "commented",
      "id": 2334213839,
      "node_id": "IC_kwDOABII586LIUbP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2334213839",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T14:40:49Z",
      "updated_at": "2024-09-06T14:40:49Z",
      "author_association": "MEMBER",
      "body": "Confirmed that at least for example 19, it simply can't find the optimal solution until the commit it's included, even if total iterations are cranked up a couple orders of magnitude. ",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2334213839",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2334217170,
      "node_id": "IC_kwDOABII586LIVPS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2334217170",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-06T14:42:36Z",
      "updated_at": "2024-09-06T15:18:04Z",
      "author_association": "MEMBER",
      "body": "Example cluster 18:\r\n\r\n![example18](https://github.com/user-attachments/assets/7859f0dd-986c-4907-8953-d950bd104f61)\r\n\r\nFrom a fee-optimization perspective it's a remarkably uninteresting graph: individual transaction feerates range from ~78 sat/vB to ~84 sat/vB.\r\n\r\n(created with newly-added DOT support in https://gist.github.com/sipa/822f60db6608a26bb4aae75fd31bcb12)",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2334217170",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "commented",
      "id": 2338522744,
      "node_id": "IC_kwDOABII586LYwZ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2338522744",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-09T16:09:25Z",
      "updated_at": "2024-09-09T16:09:25Z",
      "author_association": "MEMBER",
      "body": "reACK 59028de422bbf8ccf53da27f1153e343952e585f\r\n\r\nvia `git range-diff master 100e1b9ecb29c76187112fda9fed1c01da192c99 59028de422bbf8ccf53da27f1153e343952e585f`\r\n\r\nfwiw I ran the branch with the two dropped optimizations, and it lead to a slight improvement to most of the optimal benchmarks on my machine ",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2338522744",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "review_requested",
      "id": 14185966357,
      "node_id": "RRE_lADOABII586MNfM5zwAAAANNjKsV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14185966357",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-09T16:09:30Z",
      "requested_reviewer": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 14185966517,
      "node_id": "RRE_lADOABII586MNfM5zwAAAANNjKu1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14185966517",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-09T16:09:30Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 2342010162,
      "node_id": "IC_kwDOABII586LmD0y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2342010162",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-10T21:05:59Z",
      "updated_at": "2024-09-10T21:05:59Z",
      "author_association": "MEMBER",
      "body": "ACK 59028de422b",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2342010162",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "reviewed",
      "id": 2297522865,
      "node_id": "PRR_kwDOABII586I8Wqx",
      "url": null,
      "actor": null,
      "commit_id": "59028de422bbf8ccf53da27f1153e343952e585f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Re-ACK 59028de422bbf8ccf53da27f1153e343952e585f\r\n\r\nI am having consistently similar result like @glozow although some bench were unstable.\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|           13,409.81 |           74,572.28 |    8.4% |      0.01 | :wavy_dash: `Linearize16TxWorstCase120Iters` (Unstable with ~71.1 iters. Increase `minEpochIterations` to e.g. 711)\r\n|            2,857.30 |          349,980.23 |    1.1% |      0.01 | `Linearize16TxWorstCase20Iters`\r\n|          824,833.00 |            1,212.37 |    2.1% |      0.01 | `Linearize32TxWorstCase15000Iters`\r\n|          263,687.50 |            3,792.37 |    3.1% |      0.01 | `Linearize32TxWorstCase5000Iters`\r\n|          685,583.00 |            1,458.61 |    4.4% |      0.01 | `Linearize48TxWorstCase15000Iters`\r\n|          217,283.20 |            4,602.29 |    1.3% |      0.01 | `Linearize48TxWorstCase5000Iters`\r\n|          566,271.00 |            1,765.94 |    5.2% |      0.01 | :wavy_dash: `Linearize64TxWorstCase15000Iters` (Unstable with ~1.7 iters. Increase `minEpochIterations` to e.g. 17)\r\n|          207,125.00 |            4,828.00 |    5.2% |      0.01 | :wavy_dash: `Linearize64TxWorstCase5000Iters` (Unstable with ~4.9 iters. Increase `minEpochIterations` to e.g. 49)\r\n|          794,375.00 |            1,258.85 |    2.2% |      0.01 | `Linearize75TxWorstCase15000Iters`\r\n|          287,364.50 |            3,479.90 |    2.8% |      0.01 | `Linearize75TxWorstCase5000Iters`\r\n|          774,791.00 |            1,290.67 |    3.1% |      0.01 | `Linearize99TxWorstCase15000Iters`\r\n|          286,264.00 |            3,493.28 |    1.6% |      0.01 | `Linearize99TxWorstCase5000Iters`\r\n|              711.44 |        1,405,591.29 |    2.0% |      0.01 | `LinearizeNoIters16TxWorstCaseAnc`\r\n|              811.92 |        1,231,654.51 |    1.1% |      0.01 | `LinearizeNoIters16TxWorstCaseLIMO`\r\n|            2,209.56 |          452,579.03 |    2.0% |      0.01 | `LinearizeNoIters32TxWorstCaseAnc`\r\n|            2,791.17 |          358,272.43 |    2.1% |      0.01 | `LinearizeNoIters32TxWorstCaseLIMO`\r\n|            4,802.87 |          208,208.65 |    2.0% |      0.01 | `LinearizeNoIters48TxWorstCaseAnc`\r\n|            6,225.00 |          160,642.57 |    1.7% |      0.01 | `LinearizeNoIters48TxWorstCaseLIMO`\r\n|            8,375.67 |          119,393.48 |    2.2% |      0.01 | `LinearizeNoIters64TxWorstCaseAnc`\r\n|           11,179.56 |           89,448.96 |    1.9% |      0.01 | `LinearizeNoIters64TxWorstCaseLIMO`\r\n|           13,085.68 |           76,419.44 |    2.9% |      0.01 | `LinearizeNoIters75TxWorstCaseAnc`\r\n|           20,939.10 |           47,757.55 |    1.8% |      0.01 | `LinearizeNoIters75TxWorstCaseLIMO`\r\n|           22,215.91 |           45,012.79 |    0.4% |      0.01 | `LinearizeNoIters99TxWorstCaseAnc`\r\n|           37,518.69 |           26,653.38 |    0.8% |      0.01 | `LinearizeNoIters99TxWorstCaseLIMO`\r\n|       12,650,708.00 |               79.05 |    5.8% |      0.14 | :wavy_dash: `LinearizeOptimallyExample00` (Unstable with ~1.0 iters. Increase `minEpochIterations` to e.g. 10)\r\n|           70,053.57 |           14,274.79 |    1.9% |      0.01 | `LinearizeOptimallyExample01`\r\n|           63,852.80 |           15,661.02 |    1.6% |      0.01 | `LinearizeOptimallyExample02`\r\n|           63,375.00 |           15,779.09 |    1.8% |      0.01 | `LinearizeOptimallyExample03`\r\n|            7,607.93 |          131,441.79 |    1.0% |      0.01 | `LinearizeOptimallyExample04`\r\n|           78,541.60 |           12,732.11 |    6.1% |      0.01 | :wavy_dash: `LinearizeOptimallyExample05` (Unstable with ~7.0 iters. Increase `minEpochIterations` to e.g. 70)\r\n|           68,958.33 |           14,501.51 |    2.5% |      0.01 | `LinearizeOptimallyExample06`\r\n|           75,253.73 |           13,288.38 |    7.2% |      0.01 | :wavy_dash: `LinearizeOptimallyExample07` (Unstable with ~12.4 iters. Increase `minEpochIterations` to e.g. 124)\r\n|           55,020.90 |           18,174.91 |    9.7% |      0.01 | :wavy_dash: `LinearizeOptimallyExample08` (Unstable with ~12.5 iters. Increase `minEpochIterations` to e.g. 125)\r\n|           77,760.42 |           12,860.01 |    3.2% |      0.01 | `LinearizeOptimallyExample09`\r\n|           76,808.30 |           13,019.43 |    1.6% |      0.01 | `LinearizeOptimallyExample10`\r\n|           53,569.44 |           18,667.36 |    2.1% |      0.01 | `LinearizeOptimallyExample11`\r\n|           43,802.08 |           22,829.96 |    0.8% |      0.01 | `LinearizeOptimallyExample12`\r\n|           31,438.15 |           31,808.49 |    2.4% |      0.01 | `LinearizeOptimallyExample13`\r\n|           57,560.17 |           17,373.13 |    2.1% |      0.01 | `LinearizeOptimallyExample14`\r\n|           17,059.81 |           58,617.31 |    2.3% |      0.01 | `LinearizeOptimallyExample15`\r\n|      193,585,541.00 |                5.17 |    1.3% |      2.15 | `LinearizeOptimallyExample16`\r\n|      196,138,167.00 |                5.10 |    3.0% |      2.24 | `LinearizeOptimallyExample17`\r\n|      182,834,750.00 |                5.47 |    1.8% |      2.07 | `LinearizeOptimallyExample18`\r\n|      200,634,666.00 |                4.98 |    2.2% |      2.20 | `LinearizeOptimallyExample19`\r\n\r\n\r\n> That confirms the impression we got: 16-19 seem to just be really hard, and the later optimizations just don't help with it (and increase per-iteration cost, for no meaningful iteration reduction).\r\n\r\n16-19 has similar speed with the other clusters in until bb198964e10e84eaa93a31a5b9860bad026e1dc5\r\n\r\n> Perhaps it's worth investigating (in a follow up) if there are more specific optimizations targetting the patterns in those clusters.\r\n\r\n+1",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#pullrequestreview-2297522865",
      "submitted_at": "2024-09-11T15:12:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
    },
    {
      "event": "commented",
      "id": 2343967142,
      "node_id": "IC_kwDOABII586Lthmm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2343967142",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T15:16:55Z",
      "updated_at": "2024-09-11T15:16:55Z",
      "author_association": "MEMBER",
      "body": "@ismaelsadeeq I typically overcome that with:\r\n```\r\n  -min-time=<milliseconds>\r\n       Minimum runtime per benchmark, in milliseconds (default: 10)\r\n```\r\n\r\nto make it long enough to be stable",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2343967142",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14218196146,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANPeHSy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14218196146",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T15:16:57Z"
    },
    {
      "event": "subscribed",
      "id": 14218196162,
      "node_id": "SE_lADOABII586MNfM5zwAAAANPeHTC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14218196162",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T15:16:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14221444346,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANPqgT6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14221444346",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T19:03:40Z"
    },
    {
      "event": "commented",
      "id": 2344477789,
      "node_id": "IC_kwDOABII586LveRd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2344477789",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T19:08:19Z",
      "updated_at": "2024-09-11T20:27:49Z",
      "author_association": "MEMBER",
      "body": "I've pushed a new update, just replacing the example benchmarks. They're now gathered based on real-world clusters (seen in simulations of historical mempool data) at 3 distinct commits (\"track upper bound potential set for work items\", \"include topological pot subsets automatically\", and \"improve heuristic to decide split transaction\"), picking among example with high maximum from-scratch linearization time both ones that have a short and long linearization time in case the optimal is already known (thanks, @sdaftuar!).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2344477789",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14222046269,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANPszQ9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14222046269",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T19:43:12Z"
    },
    {
      "event": "labeled",
      "id": 14222046988,
      "node_id": "LE_lADOABII586MNfM5zwAAAANPszcM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14222046988",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T19:43:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2344633017,
      "node_id": "IC_kwDOABII586LwEK5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2344633017",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T20:23:08Z",
      "updated_at": "2024-09-12T13:26:37Z",
      "author_association": "MEMBER",
      "body": "![plot](https://github.com/user-attachments/assets/bd19b069-3a31-4d92-afc0-1917a9fac477)\r\n\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2344633017",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "mentioned",
      "id": 14222528452,
      "node_id": "MEE_lADOABII586MNfM5zwAAAANPuo_E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14222528452",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T20:28:09Z"
    },
    {
      "event": "subscribed",
      "id": 14222528478,
      "node_id": "SE_lADOABII586MNfM5zwAAAANPuo_e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14222528478",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T20:28:09Z"
    },
    {
      "event": "commented",
      "id": 2346723974,
      "node_id": "IC_kwDOABII586L4CqG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2346723974",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T16:16:45Z",
      "updated_at": "2024-09-12T16:16:45Z",
      "author_association": "MEMBER",
      "body": "reACK a5ea6467b6a694facc1f5efe460bf30539167597\r\n\r\nvia `git range-diff master 59028de422bbf8ccf53da27f1153e343952e585f a5ea6467b6a694facc1f5efe460bf30539167597`\r\n\r\nJust benchmark changes, with examples 11-14 added in 2fcfb4c0392a2f3114195e6e9979c1431798632c and 15-19 in 8fbc6f3c33c6a5b23314279f0856de0625cc6d3f\r\n\r\nNew benchmarks all run for each commit properly post-introduction.\r\nmy benchmark runs for comparison starting from introduction commit to tip: https://gist.github.com/instagibbs/058f51587074187cb78f5f9b9327442e",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#issuecomment-2346723974",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30286"
    },
    {
      "event": "review_requested",
      "id": 14235679343,
      "node_id": "RRE_lADOABII586MNfM5zwAAAANQgzpv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14235679343",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T16:16:50Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU0ZmFlYTljYTc5Y2UxZjI3N2Q4NDk5OTYyYzdkZTY0ZjI2YjA0MzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4faea9ca79ce1f277d8499962c7de64f26b0436",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e4faea9ca79ce1f277d8499962c7de64f26b0436",
      "tree": {
        "sha": "5b87af5c24f9a1ed4ca5a1f6506777e67b37f492",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b87af5c24f9a1ed4ca5a1f6506777e67b37f492"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cf0120ff024aa73a56f2975c832fda6aa8146dfa",
          "sha": "cf0120ff024aa73a56f2975c832fda6aa8146dfa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cf0120ff024aa73a56f2975c832fda6aa8146dfa"
        }
      ],
      "message": "clusterlin bench: have low/high iter benchmarks instead of per-iter",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-08-15T13:11:00Z"
      },
      "sha": "e4faea9ca79ce1f277d8499962c7de64f26b0436"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg1YTI4NWEzMDYxMDBkMTgxNWM0YWQwZjRlNTJjY2JjYWU4YjBmYmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85a285a306100d1815c4ad0f4e52ccbcae8b0fbc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/85a285a306100d1815c4ad0f4e52ccbcae8b0fbc",
      "tree": {
        "sha": "a8bef6203857f989677458675b7f71af70941d3e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a8bef6203857f989677458675b7f71af70941d3e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4faea9ca79ce1f277d8499962c7de64f26b0436",
          "sha": "e4faea9ca79ce1f277d8499962c7de64f26b0436",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e4faea9ca79ce1f277d8499962c7de64f26b0436"
        }
      ],
      "message": "clusterlin: separate initial search entries per component (optimization)\n\nBefore this commit, the worst case for linearization involves clusters which\nbreak apart in several smaller components after the first candidate is\nincluded in the output linearization.\n\nAddress this by never considering work items that span multiple components\nof what remains of the cluster.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-13T20:50:34Z"
      },
      "sha": "85a285a306100d1815c4ad0f4e52ccbcae8b0fbc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI4MGU2ZGZlNzgwYjM2NzhiYjQxZjJkOWQ2MzgxNmYwOTc1MjliMmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b80e6dfe780b3678bb41f2d9d63816f097529b2e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b80e6dfe780b3678bb41f2d9d63816f097529b2e",
      "tree": {
        "sha": "cfbbfbacd06b204d4db1e166c07816994af77e72",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cfbbfbacd06b204d4db1e166c07816994af77e72"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85a285a306100d1815c4ad0f4e52ccbcae8b0fbc",
          "sha": "85a285a306100d1815c4ad0f4e52ccbcae8b0fbc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/85a285a306100d1815c4ad0f4e52ccbcae8b0fbc"
        }
      ],
      "message": "clusterlin: add reordering support for DepGraph\n\nAdd a DepGraph(depgraph, reordering) function that constructs a new DepGraph\ncorresponding to an old one, but with its transactions is a modified order\n(given as a vector from old to new positions).\n\nAlso use this reordering feature inside DepGraphFormatter::Unser, which needs\na small modification so that its reordering mapping is old-to-new (rather than\nthe new-to-old it used before).",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-08-09T01:42:28Z"
      },
      "sha": "b80e6dfe780b3678bb41f2d9d63816f097529b2e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDllNDNlNGNlMTA5ZTk4YTFlYTNmNTRiYmI0ZGU4NmJjMWI5MmFlNGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e43e4ce109e98a1ea3f54bbb4de86bc1b92ae4f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9e43e4ce109e98a1ea3f54bbb4de86bc1b92ae4f",
      "tree": {
        "sha": "ef9c758f918773b77e97e9569d5a0dae1ed4eed1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef9c758f918773b77e97e9569d5a0dae1ed4eed1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b80e6dfe780b3678bb41f2d9d63816f097529b2e",
          "sha": "b80e6dfe780b3678bb41f2d9d63816f097529b2e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b80e6dfe780b3678bb41f2d9d63816f097529b2e"
        }
      ],
      "message": "clusterlin: use feerate-sorted depgraph in SearchCandidateFinder\n\nThis is a requirement for a future commit, which will rely on quickly iterating\nover transaction sets in decreasing individual feerate order.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-08-09T01:42:30Z"
      },
      "sha": "9e43e4ce109e98a1ea3f54bbb4de86bc1b92ae4f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI5NjVmYmYyMDNmMGIyNDQ4MTRkNzE1OTM4MWEyZTk0NzJiYzFmOTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2965fbf203f0b244814d7159381a2e9472bc1f97",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2965fbf203f0b244814d7159381a2e9472bc1f97",
      "tree": {
        "sha": "04c544303231d2b6e1322fd615a03796ce6b7223",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/04c544303231d2b6e1322fd615a03796ce6b7223"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e43e4ce109e98a1ea3f54bbb4de86bc1b92ae4f",
          "sha": "9e43e4ce109e98a1ea3f54bbb4de86bc1b92ae4f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9e43e4ce109e98a1ea3f54bbb4de86bc1b92ae4f"
        }
      ],
      "message": "clusterlin: track upper bound potential set for work items (optimization)\n\nIn each work item, keep track of a conservative overestimate of the best\npossible feerate that can be reached from it, and then use these to avoid\nexploring hopeless work items.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T19:22:49Z"
      },
      "sha": "2965fbf203f0b244814d7159381a2e9472bc1f97"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYwNjBhOTQ4Y2FmNmRiYzc1MDU2NThkNmNhYzc1MGUyNTY5OGVhZjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6060a948caf6dbc7505658d6cac750e25698eaf9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6060a948caf6dbc7505658d6cac750e25698eaf9",
      "tree": {
        "sha": "1e0fde32502492c6073db7e88046a905ce74a5bb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e0fde32502492c6073db7e88046a905ce74a5bb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2965fbf203f0b244814d7159381a2e9472bc1f97",
          "sha": "2965fbf203f0b244814d7159381a2e9472bc1f97",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2965fbf203f0b244814d7159381a2e9472bc1f97"
        }
      ],
      "message": "clusterlin bench: add example hard cluster benchmarks\n\nCo-Authored-By: Suhas Daftuar <sdaftuar@gmail.com>",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-05T16:55:49Z"
      },
      "sha": "6060a948caf6dbc7505658d6cac750e25698eaf9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUyMGZkYTc3YTJkYTFkYTNkZWIyNzNkODM3MDBhMGI3MTM5NDIyYWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e20fda77a2da1da3deb273d83700a0b7139422ab",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e20fda77a2da1da3deb273d83700a0b7139422ab",
      "tree": {
        "sha": "c06645280babbf67f1183a0ba147af4181f28ee8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c06645280babbf67f1183a0ba147af4181f28ee8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6060a948caf6dbc7505658d6cac750e25698eaf9",
          "sha": "6060a948caf6dbc7505658d6cac750e25698eaf9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6060a948caf6dbc7505658d6cac750e25698eaf9"
        }
      ],
      "message": "clusterlin: reduce computation of unnecessary pot sets (optimization)\n\nKeep track of which transactions in the graph have an individual\nfeerate that is better than the best included set so far. Others do not\nneed to be added to the pot set, as they cannot possibly help beating\nbest.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T18:30:05Z"
      },
      "sha": "e20fda77a2da1da3deb273d83700a0b7139422ab"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcxZjI2MjkzOTg4MDE5ZDIwMzViY2M1NWFmN2I0NDBiNDk0YjU2YmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71f26293988019d2035bcc55af7b440b494b56bc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/71f26293988019d2035bcc55af7b440b494b56bc",
      "tree": {
        "sha": "d2d684c0125a7af5624053e0d70ff6695a8318d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2d684c0125a7af5624053e0d70ff6695a8318d8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e20fda77a2da1da3deb273d83700a0b7139422ab",
          "sha": "e20fda77a2da1da3deb273d83700a0b7139422ab",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e20fda77a2da1da3deb273d83700a0b7139422ab"
        }
      ],
      "message": "clusterlin: include topological pot subsets automatically (optimization)\n\nAutomatically add topologically-valid subsets of the potential set pot\nto inc. It can be proven that these must be part of the best reachable\ntopologically-valid set from that work item.\n\nThis is a crucial optimization that (apparently) reduces the maximum\nnumber of iterations from ~2^(N-1) to ~sqrt(2^N).\n\nCo-Authored-By: Suhas Daftuar <sdaftuar@gmail.com>",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T17:53:27Z"
      },
      "sha": "71f26293988019d2035bcc55af7b440b494b56bc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJkMDQ0MzU2ZWRiNmM4OTc4ZGY2MDBmMzNiMDA3M2Y3NzJlZTA0N2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bd044356edb6c8978df600f33b0073f772ee047c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bd044356edb6c8978df600f33b0073f772ee047c",
      "tree": {
        "sha": "d32f0c28513c08376eb126d251d5cc39e1822b78",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d32f0c28513c08376eb126d251d5cc39e1822b78"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71f26293988019d2035bcc55af7b440b494b56bc",
          "sha": "71f26293988019d2035bcc55af7b440b494b56bc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/71f26293988019d2035bcc55af7b440b494b56bc"
        }
      ],
      "message": "clusterlin: improve heuristic to decide split transaction (optimization)\n\nEmpirically, this approach seems to be more efficient in common real-life\nclusters, and does not change the worst case.\n\nCo-Authored-By: Suhas Daftuar <sdaftuar@gmail.com>",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-05-09T17:45:38Z"
      },
      "sha": "bd044356edb6c8978df600f33b0073f772ee047c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlhZDJmZTdlNjllOWU2OTk0OWViYmIyODBhMTU3NTZkYzMzMDFmMDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "tree": {
        "sha": "d9a0686ef23aa725733dd0232a1c407cb7d3fe24",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d9a0686ef23aa725733dd0232a1c407cb7d3fe24"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bd044356edb6c8978df600f33b0073f772ee047c",
          "sha": "bd044356edb6c8978df600f33b0073f772ee047c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bd044356edb6c8978df600f33b0073f772ee047c"
        }
      ],
      "message": "clusterlin: only start/use search when enough iterations left",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-09-12T19:15:36Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-07-25T04:13:11Z"
      },
      "sha": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14237787965,
      "node_id": "HRFPE_lADOABII586MNfM5zwAAAANQo2c9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14237787965",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T19:16:23Z"
    },
    {
      "event": "unlabeled",
      "id": 14243450756,
      "node_id": "UNLE_lADOABII586MNfM5zwAAAANQ-c-E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14243450756",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-13T06:09:24Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1696729657",
      "pull_request_review_id": 2207305648,
      "id": 1696729657,
      "node_id": "PRRC_kwDOABII585lIgo5",
      "diff_hunk": "@@ -817,8 +817,38 @@ class SearchCandidateFinder\n                 if (m_depgraph.FeeRate(first) <= best.feerate) return;\n             }\n \n-            // Pick the first undecided transaction as the one to split on.\n-            const ClusterIndex split = first;\n+            // Decide which transaction to split on. Splitting is how new work items are added, and\n+            // how progress is made. One split transaction is chosen among the queue item's\n+            // undecided ones, and:\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   descendants excluded (removed from the und set).\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   ancestors included (added to the inc set).\n+            //\n+            // To decide what to split, pick among the undecided ancestors of the highest\n+            // individual feerate transaction among the undecided ones the one which reduces the\n+            // search space most:",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 16,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a3ba9c1714b7d74fcb08609500170f8794378fe5",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in a3ba9c1714b7d74fcb08609500170f8794378fe5, I found this hard to parse\r\n```suggestion\r\n            // To decide what to split, consider the undecided ancestors of the highest\r\n            // individual feerate undecided transaction. Pick the one which reduces the\r\n            // search space most:\r\n```",
      "created_at": "2024-07-30T10:30:20Z",
      "updated_at": "2024-07-30T15:50:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1696729657",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1696729657"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 828,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1696730466",
      "pull_request_review_id": 2207305648,
      "id": 1696730466,
      "node_id": "PRRC_kwDOABII585lIg1i",
      "diff_hunk": "@@ -817,8 +817,38 @@ class SearchCandidateFinder\n                 if (m_depgraph.FeeRate(first) <= best.feerate) return;\n             }\n \n-            // Pick the first undecided transaction as the one to split on.\n-            const ClusterIndex split = first;\n+            // Decide which transaction to split on. Splitting is how new work items are added, and\n+            // how progress is made. One split transaction is chosen among the queue item's\n+            // undecided ones, and:\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   descendants excluded (removed from the und set).\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   ancestors included (added to the inc set).\n+            //\n+            // To decide what to split, pick among the undecided ancestors of the highest\n+            // individual feerate transaction among the undecided ones the one which reduces the\n+            // search space most:",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 16,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a3ba9c1714b7d74fcb08609500170f8794378fe5",
      "in_reply_to_id": 1696729657,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit in commit message: s/emperically/empirically",
      "created_at": "2024-07-30T10:31:04Z",
      "updated_at": "2024-07-30T15:50:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1696730466",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1696730466"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 828,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1696776855",
      "pull_request_review_id": 2207305648,
      "id": 1696776855,
      "node_id": "PRRC_kwDOABII585lIsKX",
      "diff_hunk": "@@ -171,6 +171,45 @@ class DepGraph\n         return ret;\n     }\n \n+    /** Find some connected component within the subset \"todo\" of this graph.\n+     *\n+     * Complexity: O(ret.Count()).\n+     */\n+    SetType FindConnectedComponent(const SetType& todo) const noexcept\n+    {\n+        if (todo.None()) return todo;\n+        auto first = todo.First();\n+        SetType ret = Descendants(first) | Ancestors(first);\n+        ret &= todo;\n+        SetType to_add = ret;\n+        to_add.Reset(first);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 15,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9e154b0eea2c1409a38cc02e742e1e2320947495",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "9e154b0eea2c1409a38cc02e742e1e2320947495\r\n\r\nWould it be cleaner to not do the first iteration outside the loop?\r\n```suggestion\r\n        SetType ret;\r\n        SetType to_add = Singleton(todo.First());\r\n```",
      "created_at": "2024-07-30T11:09:31Z",
      "updated_at": "2024-07-30T15:50:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1696776855",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1696776855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 181,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 185,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697074917",
      "pull_request_review_id": 2207305648,
      "id": 1697074917,
      "node_id": "PRRC_kwDOABII585lJ07l",
      "diff_hunk": "@@ -171,6 +171,45 @@ class DepGraph\n         return ret;\n     }\n \n+    /** Find some connected component within the subset \"todo\" of this graph.",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 4,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9e154b0eea2c1409a38cc02e742e1e2320947495",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: maybe add \"Specifically, all of the transactions connected to the first element of todo.\"",
      "created_at": "2024-07-30T14:30:20Z",
      "updated_at": "2024-07-30T15:50:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1697074917",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697074917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697165641",
      "pull_request_review_id": 2207305648,
      "id": 1697165641,
      "node_id": "PRRC_kwDOABII585lKLFJ",
      "diff_hunk": "@@ -711,8 +721,11 @@ class SearchCandidateFinder\n              *  pot_feerate. It starts off equal to inc. */\n             auto pot = inc;\n             if (!inc.feerate.IsEmpty()) {\n-                // Add entries to pot.\n-                for (auto pos : und) {\n+                // Add entries to pot. We iterate over all undecided transactions whose feerate is\n+                // higher than best. While undecided transactions of lower feerate may improve pot\n+                // still, if they do, the resulting pot feerate cannot possibly exceed best's (and",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 37,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "fbb988a6128b859b204299357cb6bb4133f83e25",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fbb988a6128b859b204299357cb6bb4133f83e25, are there some extra words?\r\n```suggestion\r\n                // higher than best. While undecided transactions of lower feerate may improve pot,\r\n                // the resulting pot feerate cannot possibly exceed best's (and\r\n```",
      "created_at": "2024-07-30T15:26:27Z",
      "updated_at": "2024-07-30T15:50:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1697165641",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697165641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 725,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 726,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697199304",
      "pull_request_review_id": 2207305648,
      "id": 1697199304,
      "node_id": "PRRC_kwDOABII585lKTTI",
      "diff_hunk": "@@ -966,10 +972,18 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations.\n+    // If we don't have that many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 24,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "3eb993466b26bcddfd20fe4820d364480e3c3de3",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is the idea that, if we have fewer than n^2/64, we can pretty much expect `SearchCandidateFinder` to not make any meaningful progress?",
      "created_at": "2024-07-30T15:49:03Z",
      "updated_at": "2024-07-30T15:50:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1697199304",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697199304"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 979,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697662516",
      "pull_request_review_id": 2208802730,
      "id": 1697662516,
      "node_id": "PRRC_kwDOABII585lMEY0",
      "diff_hunk": "@@ -171,6 +171,45 @@ class DepGraph\n         return ret;\n     }\n \n+    /** Find some connected component within the subset \"todo\" of this graph.\n+     *\n+     * Complexity: O(ret.Count()).\n+     */\n+    SetType FindConnectedComponent(const SetType& todo) const noexcept\n+    {\n+        if (todo.None()) return todo;\n+        auto first = todo.First();\n+        SetType ret = Descendants(first) | Ancestors(first);\n+        ret &= todo;\n+        SetType to_add = ret;\n+        to_add.Reset(first);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 15,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9e154b0eea2c1409a38cc02e742e1e2320947495",
      "in_reply_to_id": 1696776855,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's certainly cleaner. It's perhaps also a bit slower, but probably not measurably so. Done.",
      "created_at": "2024-07-30T22:14:16Z",
      "updated_at": "2024-07-30T22:14:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1697662516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697662516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 181,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 185,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697664551",
      "pull_request_review_id": 2208805698,
      "id": 1697664551,
      "node_id": "PRRC_kwDOABII585lME4n",
      "diff_hunk": "@@ -966,10 +972,18 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations.\n+    // If we don't have that many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 24,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "3eb993466b26bcddfd20fe4820d364480e3c3de3",
      "in_reply_to_id": 1697199304,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, it's trying to use \"iterations\" as a generic metric for computation time, and benchmarks show that n^2/64 times the time per iteration is roughly what just constructing the search object can take.\r\n\r\nThe real purpose here is that if you pass in `iterations=0`, the code won't bother performing a relatively costly initialization of a search object if it's not going to be used. But that's then generalized a bit to also skip it if doing so would cost more than the time spent proportionally on the number of iterations you asked for.",
      "created_at": "2024-07-30T22:17:07Z",
      "updated_at": "2024-07-30T22:17:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1697664551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1697664551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 979,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1698314082",
      "pull_request_review_id": 2209838536,
      "id": 1698314082,
      "node_id": "PRRC_kwDOABII585lOjdi",
      "diff_hunk": "@@ -966,10 +972,18 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations.\n+    // If we don't have that many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 24,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "3eb993466b26bcddfd20fe4820d364480e3c3de3",
      "in_reply_to_id": 1697199304,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh I see, thanks",
      "created_at": "2024-07-31T10:56:24Z",
      "updated_at": "2024-07-31T10:56:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1698314082",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1698314082"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 979,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704001510",
      "pull_request_review_id": 2218800971,
      "id": 1704001510,
      "node_id": "PRRC_kwDOABII585lkP_m",
      "diff_hunk": "@@ -711,8 +721,11 @@ class SearchCandidateFinder\n              *  pot_feerate. It starts off equal to inc. */\n             auto pot = inc;\n             if (!inc.feerate.IsEmpty()) {\n-                // Add entries to pot.\n-                for (auto pos : und) {\n+                // Add entries to pot. We iterate over all undecided transactions whose feerate is\n+                // higher than best. While undecided transactions of lower feerate may improve pot\n+                // still, if they do, the resulting pot feerate cannot possibly exceed best's (and",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 37,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "fbb988a6128b859b204299357cb6bb4133f83e25",
      "in_reply_to_id": 1697165641,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2024-08-05T11:55:12Z",
      "updated_at": "2024-08-05T11:55:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1704001510",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704001510"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 725,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 726,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704001736",
      "pull_request_review_id": 2218801370,
      "id": 1704001736,
      "node_id": "PRRC_kwDOABII585lkQDI",
      "diff_hunk": "@@ -171,6 +171,45 @@ class DepGraph\n         return ret;\n     }\n \n+    /** Find some connected component within the subset \"todo\" of this graph.",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 4,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9e154b0eea2c1409a38cc02e742e1e2320947495",
      "in_reply_to_id": 1697074917,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done (in #30285 already).",
      "created_at": "2024-08-05T11:55:27Z",
      "updated_at": "2024-08-05T11:55:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1704001736",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704001736"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704001843",
      "pull_request_review_id": 2218801559,
      "id": 1704001843,
      "node_id": "PRRC_kwDOABII585lkQEz",
      "diff_hunk": "@@ -817,8 +817,38 @@ class SearchCandidateFinder\n                 if (m_depgraph.FeeRate(first) <= best.feerate) return;\n             }\n \n-            // Pick the first undecided transaction as the one to split on.\n-            const ClusterIndex split = first;\n+            // Decide which transaction to split on. Splitting is how new work items are added, and\n+            // how progress is made. One split transaction is chosen among the queue item's\n+            // undecided ones, and:\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   descendants excluded (removed from the und set).\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   ancestors included (added to the inc set).\n+            //\n+            // To decide what to split, pick among the undecided ancestors of the highest\n+            // individual feerate transaction among the undecided ones the one which reduces the\n+            // search space most:",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 16,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a3ba9c1714b7d74fcb08609500170f8794378fe5",
      "in_reply_to_id": 1696729657,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2024-08-05T11:55:33Z",
      "updated_at": "2024-08-05T11:55:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1704001843",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704001843"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 828,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704526813",
      "pull_request_review_id": 2219685837,
      "id": 1704526813,
      "node_id": "PRRC_kwDOABII585lmQPd",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of topological subsets a",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "5fddd456b11727ac3f1b8aca6780aa965f1e268b",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "*non-empty* topological subsets?",
      "created_at": "2024-08-05T19:08:18Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1704526813",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1704526813"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 551,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705666485",
      "pull_request_review_id": 2219685837,
      "id": 1705666485,
      "node_id": "PRRC_kwDOABII585lqme1",
      "diff_hunk": "@@ -541,23 +563,61 @@ class SearchCandidateFinder\n {\n     /** Internal RNG. */\n     InsecureRandomContext m_rng;\n-    /** Internal dependency graph for the cluster. */\n-    const DepGraph<SetType>& m_depgraph;\n-    /** Which transactions are left to do (sorted indices). */\n+    /** m_sorted_to_original[i] is the original position that sorted transaction position i had. */\n+    std::vector<ClusterIndex> m_sorted_to_original;\n+    /** m_original_to_sorted[i] is the sorted position original transaction position i has. */\n+    std::vector<ClusterIndex> m_original_to_sorted;\n+    /** Internal dependency graph for the cluster (with transactions in decreasing individual\n+     *  feerate order). */\n+    DepGraph<SetType> m_depgraph;\n+    /** Which transactions are left to do (indices in m_depgraph's sorted order). */\n     SetType m_todo;\n \n+    /** Given a set of transactions with sorted indices, get their original indices. */\n+    SetType SortedToOriginal(const SetType& arg) const noexcept\n+    {\n+        SetType ret;\n+        for (auto pos : arg) ret.Set(m_sorted_to_original[pos]);\n+        return ret;\n+    }\n+\n+    /** Given a set of transactions with original indices, get their sorted indices. */\n+    SetType OriginalToSorted(const SetType& arg) const noexcept\n+    {\n+        SetType ret;\n+        for (auto pos : arg) ret.Set(m_original_to_sorted[pos]);\n+        return ret;\n+    }\n+\n public:\n     /** Construct a candidate finder for a graph.\n      *\n      * @param[in] depgraph   Dependency graph for the to-be-linearized cluster.\n      * @param[in] rng_seed   A random seed to control the search order.\n      *\n-     * Complexity: O(1).\n+     * Complexity: O(N^2) where N=depgraph.Count().\n      */\n-    SearchCandidateFinder(const DepGraph<SetType>& depgraph LIFETIMEBOUND, uint64_t rng_seed) noexcept :\n+    SearchCandidateFinder(const DepGraph<SetType>& depgraph, uint64_t rng_seed) noexcept :\n         m_rng(rng_seed),\n-        m_depgraph(depgraph),\n-        m_todo(SetType::Fill(depgraph.TxCount())) {}\n+        m_sorted_to_original(depgraph.TxCount()),\n+        m_original_to_sorted(depgraph.TxCount())\n+    {\n+        // Determine reordering mapping, by sorting by decreasing feerate.\n+        std::iota(m_sorted_to_original.begin(), m_sorted_to_original.end(), ClusterIndex{0});\n+        std::sort(m_sorted_to_original.begin(), m_sorted_to_original.end(), [&](auto a, auto b) {\n+            auto feerate_cmp = depgraph.FeeRate(a) <=> depgraph.FeeRate(b);\n+            if (feerate_cmp == 0) return a < b;\n+            return feerate_cmp > 0;\n+        });\n+        // Compute reverse mapping.\n+        for (ClusterIndex i = 0; i < depgraph.TxCount(); ++i) {\n+            m_original_to_sorted[m_sorted_to_original[i]] = i;\n+        }\n+        // Compute reordered dependency graph.\n+        m_depgraph = DepGraph(depgraph, m_original_to_sorted);\n+        // Set todo to the entire graph.\n+        m_todo = SetType::Fill(depgraph.TxCount());",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 93,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e7ff15ce48d705b260fdfba5d600b0186846dca",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "move of `m_todo` instantiation seems like a no-op?",
      "created_at": "2024-08-06T14:41:43Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705666485",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705666485"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705696515",
      "pull_request_review_id": 2221566752,
      "id": 1705696515,
      "node_id": "PRRC_kwDOABII585lqt0D",
      "diff_hunk": "@@ -987,12 +1001,21 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n         auto best = anc_finder.FindCandidateSet();\n         if (!best_prefix.feerate.IsEmpty() && best_prefix.feerate >= best.feerate) best = best_prefix;\n \n-        // Invoke bounded search to update best, with up to half of our remaining iterations as\n-        // limit.\n-        uint64_t max_iterations_now = (iterations_left + 1) / 2;\n         uint64_t iterations_done_now = 0;\n-        std::tie(best, iterations_done_now) = src_finder.FindCandidateSet(max_iterations_now, best);\n-        iterations_left -= iterations_done_now;\n+        uint64_t max_iterations_now = 0;\n+        if (src_finder) {\n+            // Treat the invocation of SearchCandidateFinder::FindCandidateSet() as costing N/4\n+            // iterations (rounded up).\n+            uint64_t base_iterations = (anc_finder.NumRemaining() + 3) / 4;\n+            if (iterations_left > base_iterations) {\n+                // Invoke bounded search to update best, with up to half of our remaining\n+                // iterations as limit.\n+                iterations_left -= base_iterations;\n+                max_iterations_now = (iterations_left + 1) / 2;\n+                std::tie(best, iterations_done_now) = src_finder->FindCandidateSet(max_iterations_now, best);\n+                iterations_left -= iterations_done_now;",
      "path": "src/cluster_linearize.h",
      "position": 444,
      "original_position": 54,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "400a72b4abef4fd2aca8415d489d9d399f29b63d",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Since we're subtracting both `base_iterations` (the N/4 estimate) and `iterations_done_now` from `iterations_left`, is the idea that `base_iterations` incorporates the computational overhead beyond the splitting operations?",
      "created_at": "2024-08-06T14:59:59Z",
      "updated_at": "2024-08-06T16:26:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705696515",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705696515"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 1005,
      "original_start_line": 1013,
      "start_side": "RIGHT",
      "line": 1008,
      "original_line": 1008,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705727595",
      "pull_request_review_id": 2221566752,
      "id": 1705727595,
      "node_id": "PRRC_kwDOABII585lq1Zr",
      "diff_hunk": "@@ -824,8 +824,37 @@ class SearchCandidateFinder\n                 if (m_depgraph.FeeRate(first) <= best.feerate) return;\n             }\n \n-            // Pick the first undecided transaction as the one to split on.\n-            const ClusterIndex split = first;\n+            // Decide which transaction to split on. Splitting is how new work items are added, and\n+            // how progress is made. One split transaction is chosen among the queue item's\n+            // undecided ones, and:\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   descendants excluded (removed from the und set).\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   ancestors included (added to the inc set).\n+            //\n+            // To decide what to split on, consider the undecided ancestors of the highest\n+            // individual feerate undecided transaction. Pick the one which reduces the search space\n+            // most. Let I(t) be the size of the undecided set after including t, and E(t) the size\n+            // of the undecided set after excluding t. Then choose the split transaction t such\n+            // that 2^I(t) + 2^E(t) is minimal, tie-breaking by highest individual feerate for t.",
      "path": "src/cluster_linearize.h",
      "position": 328,
      "original_position": 18,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a88207c4eedda1c5455e187f0a91a619e60e9d9e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Wow, cool way to convey pair comparison",
      "created_at": "2024-08-06T15:19:50Z",
      "updated_at": "2024-08-06T16:26:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705727595",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705727595"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 849,
      "original_line": 849,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705747742",
      "pull_request_review_id": 2219685837,
      "id": 1705747742,
      "node_id": "PRRC_kwDOABII585lq6Ue",
      "diff_hunk": "@@ -118,6 +118,28 @@ class DepGraph\n         }\n     }\n \n+    /** Construct a DepGraph object given another DepGraph and a mapping from old to new.\n+     *\n+     * Complexity: O(N^2) where N=depgraph.TxCount().\n+     */\n+    DepGraph(const DepGraph<SetType>& depgraph, Span<const ClusterIndex> mapping) noexcept : entries(depgraph.TxCount())",
      "path": "src/cluster_linearize.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e7ff15ce48d705b260fdfba5d600b0186846dca",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this can be used with DepGraphFormatter during `Unser` with reversed `reordering`",
      "created_at": "2024-08-06T15:33:53Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705747742",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705747742"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705762087",
      "pull_request_review_id": 2221566752,
      "id": 1705762087,
      "node_id": "PRRC_kwDOABII585lq90n",
      "diff_hunk": "@@ -613,11 +613,20 @@ class SearchCandidateFinder\n         VecDeque<WorkItem> queue;\n         queue.reserve(std::max<size_t>(256, 2 * m_todo.Count()));\n \n-        // Create an initial entry with m_todo as undecided. Also use it as best if not provided,\n-        // so that during the work processing loop below, and during the add_fn/split_fn calls, we\n-        // do not need to deal with the best=empty case.\n-        if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, m_todo);\n-        queue.emplace_back(SetInfo<SetType>{}, SetType{m_todo});\n+        // Create initial entries per connected component of m_todo. While clusters themselves are\n+        // generally connected, this is not necessarily true after some parts have already been\n+        // removed from m_todo. Without this, effort can be wasted on searching \"inc\" sets that\n+        // span multiple components.\n+        auto to_cover = m_todo;\n+        do {\n+            auto component = m_depgraph.FindConnectedComponent(to_cover);\n+            to_cover -= component;\n+            // If best is not provided, set it to the first component, so that during the work\n+            // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n+            // with the best=empty case.\n+            if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 20,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "5fddd456b11727ac3f1b8aca6780aa965f1e268b",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would it make sense to use `if (best.feerate.IsEmpty() || best.feerate << m_depgraph.feerate(component)`? We set `imp` based on this afterward, and it seems like it could help it start smaller.",
      "created_at": "2024-08-06T15:44:00Z",
      "updated_at": "2024-08-06T16:26:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705762087",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705762087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705789091",
      "pull_request_review_id": 2219685837,
      "id": 1705789091,
      "node_id": "PRRC_kwDOABII585lrEaj",
      "diff_hunk": "@@ -688,7 +701,7 @@ class SearchCandidateFinder\n             // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n             // with the best=empty case.\n             if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);\n-            queue.emplace_back(SetInfo<SetType>{}, std::move(component));\n+            queue.emplace_back(SetInfo<SetType>{}, std::move(component), FeeFrac{});",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 44,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e63e0a9512c7c8a2a11fae383ddc26b3b9790fd",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I do realize the argument changes later, so maybe this just on the later commit \r\n```Suggestion\r\n            queue.emplace_back(/*inc=*/SetInfo<SetType>{}, /*und=*/std::move(component), /*pot_feerate=*/FeeFrac{});\r\n```",
      "created_at": "2024-08-06T16:02:52Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705789091",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705789091"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 704,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705890739",
      "pull_request_review_id": 2221883694,
      "id": 1705890739,
      "node_id": "PRRC_kwDOABII585lrdOz",
      "diff_hunk": "@@ -987,12 +1001,21 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n         auto best = anc_finder.FindCandidateSet();\n         if (!best_prefix.feerate.IsEmpty() && best_prefix.feerate >= best.feerate) best = best_prefix;\n \n-        // Invoke bounded search to update best, with up to half of our remaining iterations as\n-        // limit.\n-        uint64_t max_iterations_now = (iterations_left + 1) / 2;\n         uint64_t iterations_done_now = 0;\n-        std::tie(best, iterations_done_now) = src_finder.FindCandidateSet(max_iterations_now, best);\n-        iterations_left -= iterations_done_now;\n+        uint64_t max_iterations_now = 0;\n+        if (src_finder) {\n+            // Treat the invocation of SearchCandidateFinder::FindCandidateSet() as costing N/4\n+            // iterations (rounded up).\n+            uint64_t base_iterations = (anc_finder.NumRemaining() + 3) / 4;\n+            if (iterations_left > base_iterations) {\n+                // Invoke bounded search to update best, with up to half of our remaining\n+                // iterations as limit.\n+                iterations_left -= base_iterations;\n+                max_iterations_now = (iterations_left + 1) / 2;\n+                std::tie(best, iterations_done_now) = src_finder->FindCandidateSet(max_iterations_now, best);\n+                iterations_left -= iterations_done_now;",
      "path": "src/cluster_linearize.h",
      "position": 444,
      "original_position": 54,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "400a72b4abef4fd2aca8415d489d9d399f29b63d",
      "in_reply_to_id": 1705696515,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed; largely due to the connected-component splitting. I've expanded the comments a bit.",
      "created_at": "2024-08-06T17:30:13Z",
      "updated_at": "2024-08-06T17:30:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705890739",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705890739"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 1005,
      "original_start_line": 1013,
      "start_side": "RIGHT",
      "line": 1008,
      "original_line": 1008,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705892110",
      "pull_request_review_id": 2221886288,
      "id": 1705892110,
      "node_id": "PRRC_kwDOABII585lrdkO",
      "diff_hunk": "@@ -613,11 +613,20 @@ class SearchCandidateFinder\n         VecDeque<WorkItem> queue;\n         queue.reserve(std::max<size_t>(256, 2 * m_todo.Count()));\n \n-        // Create an initial entry with m_todo as undecided. Also use it as best if not provided,\n-        // so that during the work processing loop below, and during the add_fn/split_fn calls, we\n-        // do not need to deal with the best=empty case.\n-        if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, m_todo);\n-        queue.emplace_back(SetInfo<SetType>{}, SetType{m_todo});\n+        // Create initial entries per connected component of m_todo. While clusters themselves are\n+        // generally connected, this is not necessarily true after some parts have already been\n+        // removed from m_todo. Without this, effort can be wasted on searching \"inc\" sets that\n+        // span multiple components.\n+        auto to_cover = m_todo;\n+        do {\n+            auto component = m_depgraph.FindConnectedComponent(to_cover);\n+            to_cover -= component;\n+            // If best is not provided, set it to the first component, so that during the work\n+            // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n+            // with the best=empty case.\n+            if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 20,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "5fddd456b11727ac3f1b8aca6780aa965f1e268b",
      "in_reply_to_id": 1705762087,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps, but due the BFS search order, the normal iteration code should very quickly try splitting the whole-component work items anyway. The goal here is really just making sure `best` is not empty, so branches aren't needed to deal with that case.",
      "created_at": "2024-08-06T17:31:44Z",
      "updated_at": "2024-08-06T17:31:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705892110",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705892110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705913641",
      "pull_request_review_id": 2219685837,
      "id": 1705913641,
      "node_id": "PRRC_kwDOABII585lri0p",
      "diff_hunk": "@@ -824,8 +824,37 @@ class SearchCandidateFinder\n                 if (m_depgraph.FeeRate(first) <= best.feerate) return;\n             }\n \n-            // Pick the first undecided transaction as the one to split on.\n-            const ClusterIndex split = first;\n+            // Decide which transaction to split on. Splitting is how new work items are added, and\n+            // how progress is made. One split transaction is chosen among the queue item's\n+            // undecided ones, and:\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   descendants excluded (removed from the und set).\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   ancestors included (added to the inc set).\n+            //\n+            // To decide what to split on, consider the undecided ancestors of the highest\n+            // individual feerate undecided transaction. Pick the one which reduces the search space\n+            // most. Let I(t) be the size of the undecided set after including t, and E(t) the size\n+            // of the undecided set after excluding t. Then choose the split transaction t such\n+            // that 2^I(t) + 2^E(t) is minimal, tie-breaking by highest individual feerate for t.",
      "path": "src/cluster_linearize.h",
      "position": 328,
      "original_position": 18,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a88207c4eedda1c5455e187f0a91a619e60e9d9e",
      "in_reply_to_id": 1705727595,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I would have appreciated slightly more pedantic comments demonstrating how the computation matches the comments :sweat: ",
      "created_at": "2024-08-06T17:51:22Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1705913641",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1705913641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 849,
      "original_line": 849,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1706029402",
      "pull_request_review_id": 2219685837,
      "id": 1706029402,
      "node_id": "PRRC_kwDOABII585lr_Fa",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "in 29cac3e85b23f1264121cbd50e4a09755b0c8352\r\n\r\nI think this commit may benefit from being two smaller commits, one that demonstrates the caching, and a second that demonstrates using it to skip the splitting computation?\r\n\r\nI do not understand what it's doing, as-is.",
      "created_at": "2024-08-06T19:45:03Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1706029402",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1706029402"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1707280073",
      "pull_request_review_id": 2219685837,
      "id": 1707280073,
      "node_id": "PRRC_kwDOABII585lwwbJ",
      "diff_hunk": "@@ -971,10 +977,19 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations",
      "path": "src/cluster_linearize.h",
      "position": 409,
      "original_position": 22,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "06ea1016ff40ebcf3e668bdb993a0747904cb40f",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "why 64?",
      "created_at": "2024-08-07T15:34:06Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1707280073",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1707280073"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 973,
      "original_line": 973,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1707294690",
      "pull_request_review_id": 2219685837,
      "id": 1707294690,
      "node_id": "PRRC_kwDOABII585lwz_i",
      "diff_hunk": "@@ -987,12 +1002,22 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n         auto best = anc_finder.FindCandidateSet();\n         if (!best_prefix.feerate.IsEmpty() && best_prefix.feerate >= best.feerate) best = best_prefix;\n \n-        // Invoke bounded search to update best, with up to half of our remaining iterations as\n-        // limit.\n-        uint64_t max_iterations_now = (iterations_left + 1) / 2;\n         uint64_t iterations_done_now = 0;\n-        std::tie(best, iterations_done_now) = src_finder.FindCandidateSet(max_iterations_now, best);\n-        iterations_left -= iterations_done_now;\n+        uint64_t max_iterations_now = 0;\n+        if (src_finder) {\n+            // Treat the invocation of SearchCandidateFinder::FindCandidateSet() as costing N/4",
      "path": "src/cluster_linearize.h",
      "position": 434,
      "original_position": 46,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "06ea1016ff40ebcf3e668bdb993a0747904cb40f",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "why 4?",
      "created_at": "2024-08-07T15:40:33Z",
      "updated_at": "2024-08-07T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1707294690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1707294690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 998,
      "original_line": 998,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708102729",
      "pull_request_review_id": 2226354488,
      "id": 1708102729,
      "node_id": "PRRC_kwDOABII585lz5RJ",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of topological subsets a",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "5fddd456b11727ac3f1b8aca6780aa965f1e268b",
      "in_reply_to_id": 1704526813,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed, done.",
      "created_at": "2024-08-07T23:34:36Z",
      "updated_at": "2024-08-07T23:34:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708102729",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708102729"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 551,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708102944",
      "pull_request_review_id": 2226354731,
      "id": 1708102944,
      "node_id": "PRRC_kwDOABII585lz5Ug",
      "diff_hunk": "@@ -541,23 +563,61 @@ class SearchCandidateFinder\n {\n     /** Internal RNG. */\n     InsecureRandomContext m_rng;\n-    /** Internal dependency graph for the cluster. */\n-    const DepGraph<SetType>& m_depgraph;\n-    /** Which transactions are left to do (sorted indices). */\n+    /** m_sorted_to_original[i] is the original position that sorted transaction position i had. */\n+    std::vector<ClusterIndex> m_sorted_to_original;\n+    /** m_original_to_sorted[i] is the sorted position original transaction position i has. */\n+    std::vector<ClusterIndex> m_original_to_sorted;\n+    /** Internal dependency graph for the cluster (with transactions in decreasing individual\n+     *  feerate order). */\n+    DepGraph<SetType> m_depgraph;\n+    /** Which transactions are left to do (indices in m_depgraph's sorted order). */\n     SetType m_todo;\n \n+    /** Given a set of transactions with sorted indices, get their original indices. */\n+    SetType SortedToOriginal(const SetType& arg) const noexcept\n+    {\n+        SetType ret;\n+        for (auto pos : arg) ret.Set(m_sorted_to_original[pos]);\n+        return ret;\n+    }\n+\n+    /** Given a set of transactions with original indices, get their sorted indices. */\n+    SetType OriginalToSorted(const SetType& arg) const noexcept\n+    {\n+        SetType ret;\n+        for (auto pos : arg) ret.Set(m_original_to_sorted[pos]);\n+        return ret;\n+    }\n+\n public:\n     /** Construct a candidate finder for a graph.\n      *\n      * @param[in] depgraph   Dependency graph for the to-be-linearized cluster.\n      * @param[in] rng_seed   A random seed to control the search order.\n      *\n-     * Complexity: O(1).\n+     * Complexity: O(N^2) where N=depgraph.Count().\n      */\n-    SearchCandidateFinder(const DepGraph<SetType>& depgraph LIFETIMEBOUND, uint64_t rng_seed) noexcept :\n+    SearchCandidateFinder(const DepGraph<SetType>& depgraph, uint64_t rng_seed) noexcept :\n         m_rng(rng_seed),\n-        m_depgraph(depgraph),\n-        m_todo(SetType::Fill(depgraph.TxCount())) {}\n+        m_sorted_to_original(depgraph.TxCount()),\n+        m_original_to_sorted(depgraph.TxCount())\n+    {\n+        // Determine reordering mapping, by sorting by decreasing feerate.\n+        std::iota(m_sorted_to_original.begin(), m_sorted_to_original.end(), ClusterIndex{0});\n+        std::sort(m_sorted_to_original.begin(), m_sorted_to_original.end(), [&](auto a, auto b) {\n+            auto feerate_cmp = depgraph.FeeRate(a) <=> depgraph.FeeRate(b);\n+            if (feerate_cmp == 0) return a < b;\n+            return feerate_cmp > 0;\n+        });\n+        // Compute reverse mapping.\n+        for (ClusterIndex i = 0; i < depgraph.TxCount(); ++i) {\n+            m_original_to_sorted[m_sorted_to_original[i]] = i;\n+        }\n+        // Compute reordered dependency graph.\n+        m_depgraph = DepGraph(depgraph, m_original_to_sorted);\n+        // Set todo to the entire graph.\n+        m_todo = SetType::Fill(depgraph.TxCount());",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 93,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e7ff15ce48d705b260fdfba5d600b0186846dca",
      "in_reply_to_id": 1705666485,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed, fixed.",
      "created_at": "2024-08-07T23:34:42Z",
      "updated_at": "2024-08-07T23:34:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708102944",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708102944"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708104386",
      "pull_request_review_id": 2226356557,
      "id": 1708104386,
      "node_id": "PRRC_kwDOABII585lz5rC",
      "diff_hunk": "@@ -118,6 +118,28 @@ class DepGraph\n         }\n     }\n \n+    /** Construct a DepGraph object given another DepGraph and a mapping from old to new.\n+     *\n+     * Complexity: O(N^2) where N=depgraph.TxCount().\n+     */\n+    DepGraph(const DepGraph<SetType>& depgraph, Span<const ClusterIndex> mapping) noexcept : entries(depgraph.TxCount())",
      "path": "src/cluster_linearize.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e7ff15ce48d705b260fdfba5d600b0186846dca",
      "in_reply_to_id": 1705747742,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice, indeed! I needed to make some change to the unserializer to track in `reordering` the reverse mapping, which I've for now done in the same commit. Happy to split that out if useful.",
      "created_at": "2024-08-07T23:35:29Z",
      "updated_at": "2024-08-07T23:35:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708104386",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708104386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708106586",
      "pull_request_review_id": 2226358172,
      "id": 1708106586,
      "node_id": "PRRC_kwDOABII585lz6Na",
      "diff_hunk": "@@ -824,8 +824,37 @@ class SearchCandidateFinder\n                 if (m_depgraph.FeeRate(first) <= best.feerate) return;\n             }\n \n-            // Pick the first undecided transaction as the one to split on.\n-            const ClusterIndex split = first;\n+            // Decide which transaction to split on. Splitting is how new work items are added, and\n+            // how progress is made. One split transaction is chosen among the queue item's\n+            // undecided ones, and:\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   descendants excluded (removed from the und set).\n+            // - A work item is (potentially) added with that transaction plus its remaining\n+            //   ancestors included (added to the inc set).\n+            //\n+            // To decide what to split on, consider the undecided ancestors of the highest\n+            // individual feerate undecided transaction. Pick the one which reduces the search space\n+            // most. Let I(t) be the size of the undecided set after including t, and E(t) the size\n+            // of the undecided set after excluding t. Then choose the split transaction t such\n+            // that 2^I(t) + 2^E(t) is minimal, tie-breaking by highest individual feerate for t.",
      "path": "src/cluster_linearize.h",
      "position": 328,
      "original_position": 18,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a88207c4eedda1c5455e187f0a91a619e60e9d9e",
      "in_reply_to_id": 1705727595,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@instagibbs I've expanded the comments to explain why the (max,min) sort order is the same as (2^max + 2^min).",
      "created_at": "2024-08-07T23:37:16Z",
      "updated_at": "2024-08-07T23:37:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708106586",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708106586"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 849,
      "original_line": 849,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708486665",
      "pull_request_review_id": 2226774179,
      "id": 1708486665,
      "node_id": "PRRC_kwDOABII585l1XAJ",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I have split the commit in two, with additional comments, and I renamed `grow_inc` to `reconsider_pot`.\r\n\r\nRoughly what is going on is that:\r\n* In \"include topological pot subsets automatically\", all of every new work item's `pot` set is searched for topologically-valid subsets (which can be moved to `inc` instead)\r\n* In \"avoid recomputing potential set on every split\" (before my last push), only the part of the new item's `pot` set that *wasn't* in the parent work item's `pot` set is searched for topologically-valid subsets *unless* `grow_inc` was set, in which case all of `pot` is searched.\r\n\r\nI have now split this second commit into:\r\n* In \"avoid recomputing potential set on every split\", still all of the new item's `pot` set is searched.\r\n* In \"avoid jump ahead in unmodified pot sets\", only the part of the new item's `pot` set that wasn't in the parent work item's set is searched unless `reconsider_pot` is set.",
      "created_at": "2024-08-08T02:58:53Z",
      "updated_at": "2024-08-08T02:58:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708486665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708486665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708487431",
      "pull_request_review_id": 2226774713,
      "id": 1708487431,
      "node_id": "PRRC_kwDOABII585l1XMH",
      "diff_hunk": "@@ -688,7 +701,7 @@ class SearchCandidateFinder\n             // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n             // with the best=empty case.\n             if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);\n-            queue.emplace_back(SetInfo<SetType>{}, std::move(component));\n+            queue.emplace_back(SetInfo<SetType>{}, std::move(component), FeeFrac{});",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 44,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e63e0a9512c7c8a2a11fae383ddc26b3b9790fd",
      "in_reply_to_id": 1705789091,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2024-08-08T02:59:37Z",
      "updated_at": "2024-08-08T02:59:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708487431",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708487431"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 704,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708488215",
      "pull_request_review_id": 2226775180,
      "id": 1708488215,
      "node_id": "PRRC_kwDOABII585l1XYX",
      "diff_hunk": "@@ -971,10 +977,19 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations",
      "path": "src/cluster_linearize.h",
      "position": 409,
      "original_position": 22,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "06ea1016ff40ebcf3e668bdb993a0747904cb40f",
      "in_reply_to_id": 1707280073,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Just a rough estimate based on benchmarks. Added a comment.",
      "created_at": "2024-08-08T03:00:15Z",
      "updated_at": "2024-08-08T03:00:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708488215",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708488215"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 973,
      "original_line": 973,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708488330",
      "pull_request_review_id": 2226775245,
      "id": 1708488330,
      "node_id": "PRRC_kwDOABII585l1XaK",
      "diff_hunk": "@@ -987,12 +1002,22 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n         auto best = anc_finder.FindCandidateSet();\n         if (!best_prefix.feerate.IsEmpty() && best_prefix.feerate >= best.feerate) best = best_prefix;\n \n-        // Invoke bounded search to update best, with up to half of our remaining iterations as\n-        // limit.\n-        uint64_t max_iterations_now = (iterations_left + 1) / 2;\n         uint64_t iterations_done_now = 0;\n-        std::tie(best, iterations_done_now) = src_finder.FindCandidateSet(max_iterations_now, best);\n-        iterations_left -= iterations_done_now;\n+        uint64_t max_iterations_now = 0;\n+        if (src_finder) {\n+            // Treat the invocation of SearchCandidateFinder::FindCandidateSet() as costing N/4",
      "path": "src/cluster_linearize.h",
      "position": 434,
      "original_position": 46,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "06ea1016ff40ebcf3e668bdb993a0747904cb40f",
      "in_reply_to_id": 1707294690,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Just a rough estimate based on benchmarks. Added a comment.",
      "created_at": "2024-08-08T03:00:20Z",
      "updated_at": "2024-08-08T03:00:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1708488330",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1708488330"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 998,
      "original_line": 998,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709093275",
      "pull_request_review_id": 2227384818,
      "id": 1709093275,
      "node_id": "PRRC_kwDOABII585l3rGb",
      "diff_hunk": "@@ -756,10 +987,20 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations\n+    // (largely due to the cost of constructing the internal sorted-by-feerate DepGraph inside\n+    // SearchCandidateFinder), a rough approximation based on benchmark. If we don't have that\n+    // many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": 413,
      "original_position": 448,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": null,
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Do these adhoc initialization costs interact well with the with the upper bound 2^(k-1)  and the empirical sqrt(2^k)+1  limits in the tests or should the bounds in the test be increased by these adhoc initialization costs?",
      "created_at": "2024-08-08T09:47:18Z",
      "updated_at": "2024-08-08T09:47:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1709093275",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709093275"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709211453",
      "pull_request_review_id": 2227520975,
      "id": 1709211453,
      "node_id": "PRRC_kwDOABII585l4H89",
      "diff_hunk": "@@ -596,56 +678,147 @@ class SearchCandidateFinder\n             /** Set of undecided transactions. This must be a subset of m_todo, and have no overlap\n              *  with inc. The set (inc | und) must be topologically valid. */\n             SetType und;\n+            /** (Only when inc is not empty) The subset with the best feerate of any superset of\n+             *  inc that is also a subset of (inc | und), without requiring it to be topologically\n+             *  valid. Its feerate forms a conservative upper bound on how good a set this work\n+             *  item can give rise to. If the real best such feerate does not exceed best's, then\n+             *  this value is not guaranteed to be accurate. */\n+            SetInfo<SetType> pot;\n \n             /** Construct a new work item. */\n-            WorkItem(SetInfo<SetType>&& i, SetType&& u) noexcept :\n-                inc(std::move(i)), und(std::move(u)) {}\n+            WorkItem(SetInfo<SetType>&& i, SetType&& u, SetInfo<SetType>&& p) noexcept :\n+                inc(std::move(i)), und(std::move(u)), pot(std::move(p)) {}\n \n             /** Swap two WorkItems. */\n             void Swap(WorkItem& other) noexcept\n             {\n                 swap(inc, other.inc);\n                 swap(und, other.und);\n+                swap(pot, other.pot);\n             }\n         };\n \n         /** The queue of work items. */\n         VecDeque<WorkItem> queue;\n         queue.reserve(std::max<size_t>(256, 2 * m_todo.Count()));\n \n-        // Create an initial entry with m_todo as undecided. Also use it as best if not provided,\n-        // so that during the work processing loop below, and during the add_fn/split_fn calls, we\n-        // do not need to deal with the best=empty case.\n-        if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, m_todo);\n-        queue.emplace_back(SetInfo<SetType>{}, SetType{m_todo});\n+        // Create initial entries per connected component of m_todo. While clusters themselves are\n+        // generally connected, this is not necessarily true after some parts have already been\n+        // removed from m_todo. Without this, effort can be wasted on searching \"inc\" sets that\n+        // span multiple components.\n+        auto to_cover = m_todo;\n+        do {\n+            auto component = m_depgraph.FindConnectedComponent(to_cover);\n+            to_cover -= component;\n+            // If best is not provided, set it to the first component, so that during the work\n+            // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n+            // with the best=empty case.\n+            if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);\n+            queue.emplace_back(/*inc=*/SetInfo<SetType>{},\n+                               /*und=*/std::move(component),\n+                               /*pot=*/SetInfo<SetType>{});\n+        } while (to_cover.Any());\n \n         /** Local copy of the iteration limit. */\n         uint64_t iterations_left = max_iterations;\n \n+        /** The set of transactions in m_todo which have feerate > best's. */\n+        SetType imp = m_todo;\n+        while (imp.Any()) {\n+            ClusterIndex check = imp.Last();\n+            if (m_depgraph.FeeRate(check) >> best.feerate) break;\n+            imp.Reset(check);\n+        }\n+\n         /** Internal function to add an item to the queue of elements to explore if there are any\n-         *  transactions left to split on, and to update best.\n+         *  transactions left to split on, possibly improving it before doing so, and to update\n+         *  best/imp.\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - reconsider_pot: this function will automatically add topologically-valid subsets of\n+         *                   pot to inc (the jump ahead optimization). If reconsider_pot is true,\n+         *                   the search for such subsets will include the transactions in the pot\n+         *                   argument to the function. If reconsider_pot is false, only transactions\n+         *                   that were missing from the pot argument will be considered. If no new\n+         *                   transactions were added to inc since the last split (i.e., when this\n+         *                   function is called for an exclusion) then there is no need to\n+         *                   set this to true.\n          */\n-        auto add_fn = [&](SetInfo<SetType> inc, SetType und) noexcept {\n+        auto add_fn = [&](SetInfo<SetType> inc, SetType und, SetInfo<SetType> pot, bool reconsider_pot) noexcept {\n             if (!inc.feerate.IsEmpty()) {\n+                /** Which transactions to consider adding to inc. */\n+                SetType consider_inc;\n+                if (reconsider_pot) consider_inc = pot.transactions - inc.transactions;\n+                // Add entries to pot. We iterate over all undecided transactions whose feerate is\n+                // higher than best, and aren't already part of pot. While undecided transactions\n+                // of lower feerate may improve, the resulting pot feerate cannot possibly exceed\n+                // best's (and this item will be skipped in split_fn anyway).\n+                for (auto pos : (imp & und) - pot.transactions) {\n+                    // Determine if adding transaction pos to pot (ignoring topology) would improve\n+                    // it. If not, we're done updating pot. This relies on the fact that\n+                    // m_depgraph, and thus the transactions iterated over, are in decreasing\n+                    // individual feerate order.\n+                    if (!(m_depgraph.FeeRate(pos) >> pot.feerate)) break;\n+                    pot.Set(m_depgraph, pos);\n+                    consider_inc.Set(pos);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 254,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "in c68d26a0e97d7544076f00a467a8eca16658077a\r\n\r\nIf we're meant to avoid jump ahead, should this be gated on `reconsider_pot` as well?",
      "created_at": "2024-08-08T10:52:20Z",
      "updated_at": "2024-08-08T14:29:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1709211453",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709211453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709581953",
      "pull_request_review_id": 2227987139,
      "id": 1709581953,
      "node_id": "PRRC_kwDOABII585l5iaB",
      "diff_hunk": "@@ -118,6 +118,28 @@ class DepGraph\n         }\n     }\n \n+    /** Construct a DepGraph object given another DepGraph and a mapping from old to new.\n+     *\n+     * Complexity: O(N^2) where N=depgraph.TxCount().\n+     */\n+    DepGraph(const DepGraph<SetType>& depgraph, Span<const ClusterIndex> mapping) noexcept : entries(depgraph.TxCount())",
      "path": "src/cluster_linearize.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e7ff15ce48d705b260fdfba5d600b0186846dca",
      "in_reply_to_id": 1705747742,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "LGTM, I tested by manually making the map and reversing it right at the end, which also seemed to work?",
      "created_at": "2024-08-08T14:02:43Z",
      "updated_at": "2024-08-08T14:03:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1709581953",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709581953"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709617445",
      "pull_request_review_id": 2228034060,
      "id": 1709617445,
      "node_id": "PRRC_kwDOABII585l5rEl",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this has helped a lot, \"clusterlin: avoid recomputing potential set on every split (optimization)\" now makes sense to me. Lots of interlocking parts, so having small bite-sizes helps.\r\n\r\nCan you motivate why `reconsider_pot` is set as true on inclusion of `anc` and not on exclude? \r\n\r\nWhen `anc` is included, it's included in both `inc` and `pot`, then:\r\n\r\n`if (reconsider_pot) consider_inc = pot.transactions - inc.transactions;`\r\n\r\nso no part of `anc` will be in `consider_inc`.",
      "created_at": "2024-08-08T14:19:49Z",
      "updated_at": "2024-08-08T14:19:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1709617445",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709617445"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709648591",
      "pull_request_review_id": 2228076376,
      "id": 1709648591,
      "node_id": "PRRC_kwDOABII585l5yrP",
      "diff_hunk": "@@ -596,56 +678,147 @@ class SearchCandidateFinder\n             /** Set of undecided transactions. This must be a subset of m_todo, and have no overlap\n              *  with inc. The set (inc | und) must be topologically valid. */\n             SetType und;\n+            /** (Only when inc is not empty) The subset with the best feerate of any superset of\n+             *  inc that is also a subset of (inc | und), without requiring it to be topologically\n+             *  valid. Its feerate forms a conservative upper bound on how good a set this work\n+             *  item can give rise to. If the real best such feerate does not exceed best's, then\n+             *  this value is not guaranteed to be accurate. */\n+            SetInfo<SetType> pot;\n \n             /** Construct a new work item. */\n-            WorkItem(SetInfo<SetType>&& i, SetType&& u) noexcept :\n-                inc(std::move(i)), und(std::move(u)) {}\n+            WorkItem(SetInfo<SetType>&& i, SetType&& u, SetInfo<SetType>&& p) noexcept :\n+                inc(std::move(i)), und(std::move(u)), pot(std::move(p)) {}\n \n             /** Swap two WorkItems. */\n             void Swap(WorkItem& other) noexcept\n             {\n                 swap(inc, other.inc);\n                 swap(und, other.und);\n+                swap(pot, other.pot);\n             }\n         };\n \n         /** The queue of work items. */\n         VecDeque<WorkItem> queue;\n         queue.reserve(std::max<size_t>(256, 2 * m_todo.Count()));\n \n-        // Create an initial entry with m_todo as undecided. Also use it as best if not provided,\n-        // so that during the work processing loop below, and during the add_fn/split_fn calls, we\n-        // do not need to deal with the best=empty case.\n-        if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, m_todo);\n-        queue.emplace_back(SetInfo<SetType>{}, SetType{m_todo});\n+        // Create initial entries per connected component of m_todo. While clusters themselves are\n+        // generally connected, this is not necessarily true after some parts have already been\n+        // removed from m_todo. Without this, effort can be wasted on searching \"inc\" sets that\n+        // span multiple components.\n+        auto to_cover = m_todo;\n+        do {\n+            auto component = m_depgraph.FindConnectedComponent(to_cover);\n+            to_cover -= component;\n+            // If best is not provided, set it to the first component, so that during the work\n+            // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n+            // with the best=empty case.\n+            if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);\n+            queue.emplace_back(/*inc=*/SetInfo<SetType>{},\n+                               /*und=*/std::move(component),\n+                               /*pot=*/SetInfo<SetType>{});\n+        } while (to_cover.Any());\n \n         /** Local copy of the iteration limit. */\n         uint64_t iterations_left = max_iterations;\n \n+        /** The set of transactions in m_todo which have feerate > best's. */\n+        SetType imp = m_todo;\n+        while (imp.Any()) {\n+            ClusterIndex check = imp.Last();\n+            if (m_depgraph.FeeRate(check) >> best.feerate) break;\n+            imp.Reset(check);\n+        }\n+\n         /** Internal function to add an item to the queue of elements to explore if there are any\n-         *  transactions left to split on, and to update best.\n+         *  transactions left to split on, possibly improving it before doing so, and to update\n+         *  best/imp.\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - reconsider_pot: this function will automatically add topologically-valid subsets of\n+         *                   pot to inc (the jump ahead optimization). If reconsider_pot is true,\n+         *                   the search for such subsets will include the transactions in the pot\n+         *                   argument to the function. If reconsider_pot is false, only transactions\n+         *                   that were missing from the pot argument will be considered. If no new\n+         *                   transactions were added to inc since the last split (i.e., when this\n+         *                   function is called for an exclusion) then there is no need to\n+         *                   set this to true.\n          */\n-        auto add_fn = [&](SetInfo<SetType> inc, SetType und) noexcept {\n+        auto add_fn = [&](SetInfo<SetType> inc, SetType und, SetInfo<SetType> pot, bool reconsider_pot) noexcept {\n             if (!inc.feerate.IsEmpty()) {\n+                /** Which transactions to consider adding to inc. */\n+                SetType consider_inc;\n+                if (reconsider_pot) consider_inc = pot.transactions - inc.transactions;\n+                // Add entries to pot. We iterate over all undecided transactions whose feerate is\n+                // higher than best, and aren't already part of pot. While undecided transactions\n+                // of lower feerate may improve, the resulting pot feerate cannot possibly exceed\n+                // best's (and this item will be skipped in split_fn anyway).\n+                for (auto pos : (imp & und) - pot.transactions) {\n+                    // Determine if adding transaction pos to pot (ignoring topology) would improve\n+                    // it. If not, we're done updating pot. This relies on the fact that\n+                    // m_depgraph, and thus the transactions iterated over, are in decreasing\n+                    // individual feerate order.\n+                    if (!(m_depgraph.FeeRate(pos) >> pot.feerate)) break;\n+                    pot.Set(m_depgraph, pos);\n+                    consider_inc.Set(pos);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 254,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": 1709211453,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, we *always* want to consider transactions that were missing from `pot`, because those couldn't have been considered for the parent work item. `reconsider_pot` only controls whether we should reconsider the ones *already* in `pot`.",
      "created_at": "2024-08-08T14:33:43Z",
      "updated_at": "2024-08-08T14:33:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1709648591",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709648591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709766961",
      "pull_request_review_id": 2228227286,
      "id": 1709766961,
      "node_id": "PRRC_kwDOABII585l6Pkx",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@instagibbs @glozow Let me try giving an explanation here. If this helps you, I'll rework it into a comment in the code.\r\n\r\nThink of the set of transactions in every work items as falling within one of four classes (roughly from \"more likely to be included\" to \"less likely to be included\"):\r\n* **I**: definitely included transactions, (= `item.inc`).\r\n* **U**: undecided transactions that may or may not end up being included (= `item.und`), subdided in:\r\n  * **UH**: possibly included, and including any of them will definitely increase the included set's feerate (even when other lower-fee UH transactions are included too) (=`item.pot - item.inc`, =`item.und & item.pot`).\r\n  * **UL**: possibly included, but including it is not guaranteed to increase the included set's feerate (=`item.und - item.pot`)\r\n* **E**: definitely excluded transactions, (= `todo - item.inc - item.und`).\r\n\r\nIn other words, `item.pot` is I+UH and `item.und` is U=UH+UL. Further, I is always topological, as is I+U. I+UH however may be non-topological.\r\n\r\nNow let's consider what happens in an inclusion branch (i.e., the call to `add_fn` for adding the split transaction and its ancestors):\r\n1. We start with a parent object which has a given I, UH, UL, E (assume I is non-empty; I=empty is a special case that has separate logic in several places).\r\n2. A split transaction t is chosen from U=UH+UL (=`item.und`).\r\n3. anc(t) are moved from UH+UL to I (this is done inside `split_fn`, in the invocation of `add_fn`).\r\n4. anc(t) will always include at least one UL transaction (*), and because of that the feerate of I may have gone down. If so, it is possible that more transactions can be moved from UL to UH. This is done inside `add_fn`, in the `for (auto pos : (imp & und) - pot.transactions) {` loop. \r\n5. Because of the changes to I and UH above, it is possible that there is now a new topologically-valid subset of I+UH that isn't already entirely in I, so it can be moved to I (jump ahead). This can be due to UH entries added in (4) **or due to I entries added in (3).**. This is done in `add_fn`, in the `for (auto pos : consider_inc) {` loop.\r\n7. If I now has the best feerate ever, remember it.\r\n8. Construct a new work item with the resulting I,UH,UL,E, unless UH+UL is empty (which is always the case if UL is empty, **) because then no more splits can take place.\r\n\r\nCompare this to what happens in an exclusion branch:\r\n1. Same\r\n2. Same\r\n3. desc(t) are moved from UH+UL to E and **I does not change**.\r\n4. desc(t) may include a UH transaction, and because of that it is possible that more transactions can be moved from UL to UH.\r\n5. Because of the above, it is possible that there are new topologically-valid subsets of I+UH now that can be moved to I. **This can only be due to UH entries added in (4).**\r\n6. Same\r\n7. Same\r\n\r\nThe bold parts correspond to `reconsider_pot`. In the inclusion branch, UL transactions moved to UH may result in existing UH transactions becoming part of a topologically-valid subset, so UH needs to be reconsidered. In an exclusion branch I does not change in (3), and so only new UH transactions added in (4) need to be considered for moving to I. Now, if that happens (something moves from UH to I due to jump ahead), it may be that what was in UH before becomes eligible to move as well, but doing so does not seem to affect the performance or number of iterations the algorithm needs.\r\n\r\n(*) The jump ahead is exactly what guarantees that anc(t) always includes a UL transaction. If anc(t) was entirely within UH, it would be topologically valid, and thus the parent work item's jump ahead step would have moved it to I already.\r\n\r\n(**) Same reason: if UL is empty, then the entirety if I+UH is topologically valid, and thus would have been moved to I entirely in the jump ahead. Thus, UL empty implies UH is also empty.",
      "created_at": "2024-08-08T15:26:38Z",
      "updated_at": "2024-08-09T13:39:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1709766961",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1709766961"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1710368478",
      "pull_request_review_id": 2228965282,
      "id": 1710368478,
      "node_id": "PRRC_kwDOABII585l8ibe",
      "diff_hunk": "@@ -756,10 +987,20 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations\n+    // (largely due to the cost of constructing the internal sorted-by-feerate DepGraph inside\n+    // SearchCandidateFinder), a rough approximation based on benchmark. If we don't have that\n+    // many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": 413,
      "original_position": 448,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": 1709093275,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@gmaxwell I think you're right that these ought to be added to the limits in the tests, though I don't actually see any failures with a quick test. The sqrt(2^k)+1 limit is only hit for very small clusters (say, 3 transactions) though, for larger ones the worst I've seen is around 70%-80% of this presumed limit, which may explain not seeing failures.\r\n\r\nIt does make me wonder if perhaps `Linearize` shouldn't bother with trying to do CPU time management, and should just expose a `bool do_search` option.",
      "created_at": "2024-08-08T22:23:40Z",
      "updated_at": "2024-08-08T22:23:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1710368478",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1710368478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1710491169",
      "pull_request_review_id": 2229091435,
      "id": 1710491169,
      "node_id": "PRRC_kwDOABII585l9AYh",
      "diff_hunk": "@@ -756,10 +987,20 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations\n+    // (largely due to the cost of constructing the internal sorted-by-feerate DepGraph inside\n+    // SearchCandidateFinder), a rough approximation based on benchmark. If we don't have that\n+    // many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": 413,
      "original_position": 448,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": 1709093275,
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, I assumed that the specific limit used in the tests right how happened to evade failing.   I don't have a strong opinion.  The adjustments seemed fine to me but maybe just making some function for the adjustments and having the test use that to derive its test limits might make sense-- so that further updates to those adhoc adjustments don't accidentally break test limits that might be hit infrequently (or after changing the amount of work the test does).",
      "created_at": "2024-08-09T00:32:42Z",
      "updated_at": "2024-08-09T00:32:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1710491169",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1710491169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1710554112",
      "pull_request_review_id": 2229144634,
      "id": 1710554112,
      "node_id": "PRRC_kwDOABII585l9PwA",
      "diff_hunk": "@@ -118,6 +118,28 @@ class DepGraph\n         }\n     }\n \n+    /** Construct a DepGraph object given another DepGraph and a mapping from old to new.\n+     *\n+     * Complexity: O(N^2) where N=depgraph.TxCount().\n+     */\n+    DepGraph(const DepGraph<SetType>& depgraph, Span<const ClusterIndex> mapping) noexcept : entries(depgraph.TxCount())",
      "path": "src/cluster_linearize.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "4e7ff15ce48d705b260fdfba5d600b0186846dca",
      "in_reply_to_id": 1705747742,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've simplified the change a bit (now much closer to older deserialization code) and moved it to a separate commit (together with the introduction of the `DepGraph` reordering constructor).",
      "created_at": "2024-08-09T01:47:43Z",
      "updated_at": "2024-08-09T01:47:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1710554112",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1710554112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1711719710",
      "pull_request_review_id": 2230548079,
      "id": 1711719710,
      "node_id": "PRRC_kwDOABII585mBsUe",
      "diff_hunk": "@@ -596,56 +678,147 @@ class SearchCandidateFinder\n             /** Set of undecided transactions. This must be a subset of m_todo, and have no overlap\n              *  with inc. The set (inc | und) must be topologically valid. */\n             SetType und;\n+            /** (Only when inc is not empty) The subset with the best feerate of any superset of\n+             *  inc that is also a subset of (inc | und), without requiring it to be topologically\n+             *  valid. Its feerate forms a conservative upper bound on how good a set this work\n+             *  item can give rise to. If the real best such feerate does not exceed best's, then\n+             *  this value is not guaranteed to be accurate. */\n+            SetInfo<SetType> pot;\n \n             /** Construct a new work item. */\n-            WorkItem(SetInfo<SetType>&& i, SetType&& u) noexcept :\n-                inc(std::move(i)), und(std::move(u)) {}\n+            WorkItem(SetInfo<SetType>&& i, SetType&& u, SetInfo<SetType>&& p) noexcept :\n+                inc(std::move(i)), und(std::move(u)), pot(std::move(p)) {}\n \n             /** Swap two WorkItems. */\n             void Swap(WorkItem& other) noexcept\n             {\n                 swap(inc, other.inc);\n                 swap(und, other.und);\n+                swap(pot, other.pot);\n             }\n         };\n \n         /** The queue of work items. */\n         VecDeque<WorkItem> queue;\n         queue.reserve(std::max<size_t>(256, 2 * m_todo.Count()));\n \n-        // Create an initial entry with m_todo as undecided. Also use it as best if not provided,\n-        // so that during the work processing loop below, and during the add_fn/split_fn calls, we\n-        // do not need to deal with the best=empty case.\n-        if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, m_todo);\n-        queue.emplace_back(SetInfo<SetType>{}, SetType{m_todo});\n+        // Create initial entries per connected component of m_todo. While clusters themselves are\n+        // generally connected, this is not necessarily true after some parts have already been\n+        // removed from m_todo. Without this, effort can be wasted on searching \"inc\" sets that\n+        // span multiple components.\n+        auto to_cover = m_todo;\n+        do {\n+            auto component = m_depgraph.FindConnectedComponent(to_cover);\n+            to_cover -= component;\n+            // If best is not provided, set it to the first component, so that during the work\n+            // processing loop below, and during the add_fn/split_fn calls, we do not need to deal\n+            // with the best=empty case.\n+            if (best.feerate.IsEmpty()) best = SetInfo(m_depgraph, component);\n+            queue.emplace_back(/*inc=*/SetInfo<SetType>{},\n+                               /*und=*/std::move(component),\n+                               /*pot=*/SetInfo<SetType>{});\n+        } while (to_cover.Any());\n \n         /** Local copy of the iteration limit. */\n         uint64_t iterations_left = max_iterations;\n \n+        /** The set of transactions in m_todo which have feerate > best's. */\n+        SetType imp = m_todo;\n+        while (imp.Any()) {\n+            ClusterIndex check = imp.Last();\n+            if (m_depgraph.FeeRate(check) >> best.feerate) break;\n+            imp.Reset(check);\n+        }\n+\n         /** Internal function to add an item to the queue of elements to explore if there are any\n-         *  transactions left to split on, and to update best.\n+         *  transactions left to split on, possibly improving it before doing so, and to update\n+         *  best/imp.\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - reconsider_pot: this function will automatically add topologically-valid subsets of\n+         *                   pot to inc (the jump ahead optimization). If reconsider_pot is true,\n+         *                   the search for such subsets will include the transactions in the pot\n+         *                   argument to the function. If reconsider_pot is false, only transactions\n+         *                   that were missing from the pot argument will be considered. If no new\n+         *                   transactions were added to inc since the last split (i.e., when this\n+         *                   function is called for an exclusion) then there is no need to\n+         *                   set this to true.\n          */\n-        auto add_fn = [&](SetInfo<SetType> inc, SetType und) noexcept {\n+        auto add_fn = [&](SetInfo<SetType> inc, SetType und, SetInfo<SetType> pot, bool reconsider_pot) noexcept {\n             if (!inc.feerate.IsEmpty()) {\n+                /** Which transactions to consider adding to inc. */\n+                SetType consider_inc;\n+                if (reconsider_pot) consider_inc = pot.transactions - inc.transactions;\n+                // Add entries to pot. We iterate over all undecided transactions whose feerate is\n+                // higher than best, and aren't already part of pot. While undecided transactions\n+                // of lower feerate may improve, the resulting pot feerate cannot possibly exceed\n+                // best's (and this item will be skipped in split_fn anyway).\n+                for (auto pos : (imp & und) - pot.transactions) {\n+                    // Determine if adding transaction pos to pot (ignoring topology) would improve\n+                    // it. If not, we're done updating pot. This relies on the fact that\n+                    // m_depgraph, and thus the transactions iterated over, are in decreasing\n+                    // individual feerate order.\n+                    if (!(m_depgraph.FeeRate(pos) >> pot.feerate)) break;\n+                    pot.Set(m_depgraph, pos);\n+                    consider_inc.Set(pos);",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 254,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": 1709211453,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh of course, I was confusing myself :+1: ",
      "created_at": "2024-08-09T15:56:22Z",
      "updated_at": "2024-08-09T15:56:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1711719710",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1711719710"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 752,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713603196",
      "pull_request_review_id": 2232761781,
      "id": 1713603196,
      "node_id": "PRRC_kwDOABII585mI4J8",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@sipa thanks this is really helpful, particularly this part:\r\n\r\n> 4. anc(t) will always include at least one UL transaction (*)\r\n> (*) The jump ahead is exactly what guarantees that anc(t) always includes a UL transaction. If anc(t) was entirely within UH, it would be topologically valid, and thus the parent work item's jump ahead step would have moved it to I already.\r\n\r\nHowever I'm still having trouble with this part:\r\n\r\n> Compare this to what happens in an exclusion branch ...\r\n> 4. desc(t) may include a UH transaction, and because of that it is possible that more transactions can be moved from UL to UH.\r\n> 5. Because of the above, it is possible that there are new topologically-valid subsets of I+UH now that can be moved to I. This can only be due to UH entries added in (4).\r\n\r\nIt seems true that only the entries added in (4) can cause jump-aheads. However, I'm not convinced that existing `pot` transactions cannot be jump-aheadable. For instance, it's possible that we added a new tx that is the parent of a tx that was already in `pot`.\r\n\r\nI added an `assert(anc.Overlaps(elem.und - elem.pot.transactions))` in `split_fn`, right before we call `add_fn` for the inclusion branch in order to check that \"jump ahead guarantees that anc(t) always includes a UL transaction\". The assertion hit, and essentially what I saw was:\r\n\r\n1. Going into a split, we had a really high pot feerate, which included tx `C`.\r\n2. For the exclusion branch, desc(t) included lots of high feerate transactions which lowered the pot feerate. `C` is still in pot. At the start of this `add_fn`, we add tx `P` to pot, since its feerate is now high enough.\r\n3. `P` is part of `consider_inc`, and is added to `inc` in the jump-ahead.\r\n4. `C`, which a child of `P`, would be good because anc(C) is a topological subset of `pot`, but is skipped because `reconsider_pot=false`\r\n5. Later, we split on `C`. `C` is part of UH, not UL, which hits the assert. anc(C) = C which is in UH, but it wasn't added to `inc` during a jump-ahead. This is because `C` was added to UH when its ancestor `P` was considered UL, and `reconsider_pot=false` when `P` was added to UH.\r\n\r\nDoes this make sense? Or maybe my `assert` isn't the right interpretation of this? I don't think this changes what `FindCandidateSet` outputs, but it means I still don't quite understand the \"avoid jump ahead in unmodified pot sets\" commit :(\r\n\r\n(fwiw the fuzz I crashed on is `echo \"AQBJCAgAIysjIyMiIyMjIyMjIyMjIyM6IyMIACMrIyMjIiMjIyMjIyMjIyMjIyMjCBlE+xEvRG9v\r\nAggAbwAR\" | base 64 -d`)\r\n\r\nEDIT: ah sorry, I just reread this part\r\n\r\n> it may be that what was in UH before becomes eligible to move as well, but doing so does not seem to affect the performance or number of iterations the algorithm needs.\r\n\r\nso I see that this is expected. Perhaps including this in the commit message would help, as I was confused by \"In exclusion branches (where inc does not change, and transactions are only removed from und), the jump ahead optimization cannot find anything to add to inc that wasn't possible already.\"",
      "created_at": "2024-08-12T11:40:48Z",
      "updated_at": "2024-08-12T12:11:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1713603196",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713603196"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713731387",
      "pull_request_review_id": 2232960157,
      "id": 1713731387,
      "node_id": "PRRC_kwDOABII585mJXc7",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@glozow Yeah I only re-discovered (and re-tested...) this fact (that after moving from new-UH to I in an exclusion branch, that former-UH also become eligible to move to I) while writing this. I don't have a good explanation for why it doesn't affect the further run of the algorithm though.",
      "created_at": "2024-08-12T13:04:38Z",
      "updated_at": "2024-08-12T13:04:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1713731387",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1713731387"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1714936862",
      "pull_request_review_id": 2234957128,
      "id": 1714936862,
      "node_id": "PRRC_kwDOABII585mN9we",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "How significant do we expect the `reconsider_pot` optimization to be? Locally my `LinearizePerIter*TxWorstCase` bench doesn't seem to do better after c68d26a0e97.",
      "created_at": "2024-08-13T09:03:29Z",
      "updated_at": "2024-08-13T09:03:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1714936862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1714936862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1718495189",
      "pull_request_review_id": 2240537011,
      "id": 1718495189,
      "node_id": "PRRC_kwDOABII585mbifV",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@glozow Good question, I've pushed a change that allows for perhaps a bit more accurate measurements (run the 5000 and 15000 iteration benchmark, and subtract). No other changes.",
      "created_at": "2024-08-15T14:36:48Z",
      "updated_at": "2024-08-15T14:36:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1718495189",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1718495189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719620550",
      "pull_request_review_id": 2242351953,
      "id": 1719620550,
      "node_id": "PRRC_kwDOABII585mf1PG",
      "diff_hunk": "@@ -723,19 +729,25 @@ class SearchCandidateFinder\n          *\n          * - inc: the \"inc\" value for the new work item (must be topological).\n          * - und: the \"und\" value for the new work item ((inc | und) must be topological).\n+         * - pot: a subset of the \"pot\" value for the new work item (but a superset of inc).\n+         *        It does not need to be the full pot value; missing pot transactions will be added\n+         *        to it by add_fn.\n+         * - grow_inc: whether to attempt moving transactions from und to inc, if it can be proven",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 62,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "29cac3e85b23f1264121cbd50e4a09755b0c8352",
      "in_reply_to_id": 1706029402,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\r\nHere's what I get on 255571339e7:\r\n```\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          724,714.00 |            1,379.85 |    2.4% |      0.01 | `Linearize32TxWorstCase15000Iters`\r\n|          245,712.75 |            4,069.79 |    0.3% |      0.01 | `Linearize32TxWorstCase5000Iters`\r\n|          688,589.50 |            1,452.24 |    5.2% |      0.01 | :wavy_dash: `Linearize48TxWorstCase15000Iters` (Unstable with ~1.2 iters. Increase `minEpochIterations` to e.g. 12)\r\n|          233,424.25 |            4,284.05 |    4.8% |      0.01 | `Linearize48TxWorstCase5000Iters`\r\n|          662,959.00 |            1,508.39 |    1.7% |      0.01 | `Linearize64TxWorstCase15000Iters`\r\n|          242,351.75 |            4,126.23 |    1.9% |      0.01 | `Linearize64TxWorstCase5000Iters`\r\n|        1,051,925.00 |              950.64 |    4.3% |      0.01 | `Linearize75TxWorstCase15000Iters`\r\n|          344,038.00 |            2,906.66 |    1.8% |      0.01 | `Linearize75TxWorstCase5000Iters`\r\n|        1,023,533.00 |              977.01 |    2.1% |      0.01 | `Linearize99TxWorstCase15000Iters`\r\n|          356,557.67 |            2,804.60 |    1.3% |      0.01 | `Linearize99TxWorstCase5000Iters`\r\n```\r\non d04997871f5:\r\n```\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          705,210.00 |            1,418.02 |    4.4% |      0.01 | `Linearize32TxWorstCase15000Iters`\r\n|          231,874.00 |            4,312.69 |    0.2% |      0.01 | `Linearize32TxWorstCase5000Iters`\r\n|          664,206.00 |            1,505.56 |    4.7% |      0.01 | `Linearize48TxWorstCase15000Iters`\r\n|          222,808.25 |            4,488.16 |    1.9% |      0.01 | `Linearize48TxWorstCase5000Iters`\r\n|          627,877.00 |            1,592.67 |    0.2% |      0.01 | `Linearize64TxWorstCase15000Iters`\r\n|          223,255.50 |            4,479.17 |    2.6% |      0.01 | `Linearize64TxWorstCase5000Iters`\r\n|          993,733.00 |            1,006.31 |    3.8% |      0.01 | `Linearize75TxWorstCase15000Iters`\r\n|          327,429.67 |            3,054.09 |    2.3% |      0.01 | `Linearize75TxWorstCase5000Iters`\r\n|          957,057.00 |            1,044.87 |    3.9% |      0.01 | `Linearize99TxWorstCase15000Iters`\r\n|          339,669.33 |            2,944.04 |    1.8% |      0.01 | `Linearize99TxWorstCase5000Iters`\r\n```\r\n\r\nLooks somewhat better but not much / close to the err%:\r\n\r\n| Benchmark                            | Table1 ns/op | Table2 ns/op | Percentage Speedup |\r\n|--------------------------------------|--------------|--------------|--------------------|\r\n| `Linearize32TxWorstCase15000Iters`   | 724,714.00   | 705,210.00   | 2.70%              |\r\n| `Linearize32TxWorstCase5000Iters`    | 245,712.75   | 231,874.00   | 5.64%              |\r\n| `Linearize48TxWorstCase15000Iters`   | 688,589.50   | 664,206.00   | 3.54%              |\r\n| `Linearize48TxWorstCase5000Iters`    | 233,424.25   | 222,808.25   | 4.55%              |\r\n| `Linearize64TxWorstCase15000Iters`   | 662,959.00   | 627,877.00   | 5.30%              |\r\n| `Linearize64TxWorstCase5000Iters`    | 242,351.75   | 223,255.50   | 7.88%              |\r\n| `Linearize75TxWorstCase15000Iters`   | 1,051,925.00 | 993,733.00   | 5.54%              |\r\n| `Linearize75TxWorstCase5000Iters`    | 344,038.00   | 327,429.67   | 4.84%              |\r\n| `Linearize99TxWorstCase15000Iters`   | 1,023,533.00 | 957,057.00   | 6.49%              |\r\n| `Linearize99TxWorstCase5000Iters`    | 356,557.67   | 339,669.33   | 4.74%              |\r\n",
      "created_at": "2024-08-16T09:50:00Z",
      "updated_at": "2024-08-16T09:50:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1719620550",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719620550"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 740,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719646767",
      "pull_request_review_id": 2242391076,
      "id": 1719646767,
      "node_id": "PRRC_kwDOABII585mf7ov",
      "diff_hunk": "@@ -203,12 +202,18 @@ void BenchMergeLinearizationsWorstCase(ClusterIndex ntx, benchmark::Bench& bench\n \n } // namespace\n \n-static void LinearizePerIter16TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<16>>(16, bench); }\n-static void LinearizePerIter32TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<32>>(32, bench); }\n-static void LinearizePerIter48TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<48>>(48, bench); }\n-static void LinearizePerIter64TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<64>>(64, bench); }\n-static void LinearizePerIter75TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<75>>(75, bench); }\n-static void LinearizePerIter99TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<99>>(99, bench); }\n+static void Linearize16TxWorstCase50Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<16>>(16, bench, 50); }\n+static void Linearize16TxWorstCase150Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<16>>(16, bench, 150); }",
      "path": "src/bench/cluster_linearize.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "ce177d260041f8443838c8f8bb33afbbef4ec3bf",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CI is failing because it halts at 128 iters at 5709d828f36, it seems.\r\nOriginal iters given was 2^(16/2-1) = 128.\r\nHowever, sqrt(2^(n-1)) = sqrt(2^15) > 150",
      "created_at": "2024-08-16T10:10:20Z",
      "updated_at": "2024-08-16T10:10:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1719646767",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719646767"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719998377",
      "pull_request_review_id": 2242975547,
      "id": 1719998377,
      "node_id": "PRRC_kwDOABII585mhRep",
      "diff_hunk": "@@ -203,12 +202,18 @@ void BenchMergeLinearizationsWorstCase(ClusterIndex ntx, benchmark::Bench& bench\n \n } // namespace\n \n-static void LinearizePerIter16TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<16>>(16, bench); }\n-static void LinearizePerIter32TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<32>>(32, bench); }\n-static void LinearizePerIter48TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<48>>(48, bench); }\n-static void LinearizePerIter64TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<64>>(64, bench); }\n-static void LinearizePerIter75TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<75>>(75, bench); }\n-static void LinearizePerIter99TxWorstCase(benchmark::Bench& bench) { BenchLinearizePerIterWorstCase<BitSet<99>>(99, bench); }\n+static void Linearize16TxWorstCase50Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<16>>(16, bench, 50); }\n+static void Linearize16TxWorstCase150Iters(benchmark::Bench& bench) { BenchLinearizeWorstCase<BitSet<16>>(16, bench, 150); }",
      "path": "src/bench/cluster_linearize.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "ce177d260041f8443838c8f8bb33afbbef4ec3bf",
      "in_reply_to_id": 1719646767,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2024-08-16T15:28:08Z",
      "updated_at": "2024-08-16T15:28:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1719998377",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1719998377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1720227562",
      "pull_request_review_id": 2243382351,
      "id": 1720227562,
      "node_id": "PRRC_kwDOABII585miJbq",
      "diff_hunk": "@@ -756,10 +987,20 @@ std::pair<std::vector<ClusterIndex>, bool> Linearize(const DepGraph<SetType>& de\n     std::vector<ClusterIndex> linearization;\n \n     AncestorCandidateFinder anc_finder(depgraph);\n-    SearchCandidateFinder src_finder(depgraph, rng_seed);\n+    std::optional<SearchCandidateFinder<SetType>> src_finder;\n     linearization.reserve(depgraph.TxCount());\n     bool optimal = true;\n \n+    // Treat the initialization of SearchCandidateFinder as taking N^2/64 (rounded up) iterations\n+    // (largely due to the cost of constructing the internal sorted-by-feerate DepGraph inside\n+    // SearchCandidateFinder), a rough approximation based on benchmark. If we don't have that\n+    // many, don't start it.\n+    uint64_t start_iterations = (uint64_t{depgraph.TxCount()} * depgraph.TxCount() + 63) / 64;",
      "path": "src/cluster_linearize.h",
      "position": 413,
      "original_position": 448,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "f46c0cc3d21c7c55ee077989af09f1d7e20472bc",
      "in_reply_to_id": 1709093275,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok, mystery solved. These adhoc initialization costs do not interact with the $\\sqrt{2^k}+1$ rule, because that rule is at the per-candidate-set level, while the adhoc costs are applied at the linearization level. It does in theory interact with the derived $\\sqrt{12 * 2^n}+n$ rule, but for $n \\leq 3$ the linearization code is optimal without any search, and for $n \\geq 4$, the formula is sufficiently overshooting to accomodate the ad-hoc costs. Still, I've changed the test to use precomputed limits instead.",
      "created_at": "2024-08-16T19:04:20Z",
      "updated_at": "2024-08-16T19:04:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1720227562",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1720227562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725236618",
      "pull_request_review_id": 2251100080,
      "id": 1725236618,
      "node_id": "PRRC_kwDOABII585m1QWK",
      "diff_hunk": "@@ -563,23 +563,60 @@ class SearchCandidateFinder\n {\n     /** Internal RNG. */\n     InsecureRandomContext m_rng;\n-    /** Internal dependency graph for the cluster. */\n-    const DepGraph<SetType>& m_depgraph;\n-    /** Which transactions are left to do (sorted indices). */\n+    /** m_sorted_to_original[i] is the original position that sorted transaction position i had. */\n+    std::vector<ClusterIndex> m_sorted_to_original;\n+    /** m_original_to_sorted[i] is the sorted position original transaction position i has. */\n+    std::vector<ClusterIndex> m_original_to_sorted;\n+    /** Internal dependency graph for the cluster (with transactions in decreasing individual\n+     *  feerate order). */\n+    DepGraph<SetType> m_depgraph;",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 13,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a12ca7b8d99d868ff49e90d33b5e90c169849ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "a12ca7b8d99d868ff49e90d33b5e90c169849ccc\r\n\r\nmay want to consider something like `m_sorted_depgraph`",
      "created_at": "2024-08-21T15:02:30Z",
      "updated_at": "2024-08-21T18:20:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1725236618",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725236618"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 572,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725257738",
      "pull_request_review_id": 2251100080,
      "id": 1725257738,
      "node_id": "PRRC_kwDOABII585m1VgK",
      "diff_hunk": "@@ -658,16 +666,21 @@ class SearchCandidateFinder\n             /** Set of undecided transactions. This must be a subset of m_todo, and have no overlap\n              *  with inc. The set (inc | und) must be topologically valid. */\n             SetType und;\n+            /** (Only when inc is not empty) The best feerate of any superset of inc that is also a\n+             *  subset of (inc | und), without requiring it to be topologically valid. It forms a\n+             *  conservative upper bound on how good a set this work item can give rise to. */\n+            FeeFrac pot_feerate;\n \n             /** Construct a new work item. */\n-            WorkItem(SetInfo<SetType>&& i, SetType&& u) noexcept :\n-                inc(std::move(i)), und(std::move(u)) {}\n+            WorkItem(SetInfo<SetType>&& i, SetType&& u, FeeFrac&& p_f) noexcept :\n+                inc(std::move(i)), und(std::move(u)), pot_feerate(std::move(p_f)) {}",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 28,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "805f9122e598fd62dcf2eca7d0d0137f6c7f960a",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "same check already being done in split_fn, but I also like it here on creation\r\n```Suggestion\r\n                inc(std::move(i)), und(std::move(u)), pot_feerate(std::move(p_f)) {\r\n                Assume(pot_feerate.IsEmpty() == inc.feerate.IsEmpty());\r\n                }\r\n```",
      "created_at": "2024-08-21T15:09:25Z",
      "updated_at": "2024-08-21T18:20:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1725257738",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725257738"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725555941",
      "pull_request_review_id": 2251633295,
      "id": 1725555941,
      "node_id": "PRRC_kwDOABII585m2eTl",
      "diff_hunk": "@@ -563,23 +563,60 @@ class SearchCandidateFinder\n {\n     /** Internal RNG. */\n     InsecureRandomContext m_rng;\n-    /** Internal dependency graph for the cluster. */\n-    const DepGraph<SetType>& m_depgraph;\n-    /** Which transactions are left to do (sorted indices). */\n+    /** m_sorted_to_original[i] is the original position that sorted transaction position i had. */\n+    std::vector<ClusterIndex> m_sorted_to_original;\n+    /** m_original_to_sorted[i] is the sorted position original transaction position i has. */\n+    std::vector<ClusterIndex> m_original_to_sorted;\n+    /** Internal dependency graph for the cluster (with transactions in decreasing individual\n+     *  feerate order). */\n+    DepGraph<SetType> m_depgraph;",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 13,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "a12ca7b8d99d868ff49e90d33b5e90c169849ccc",
      "in_reply_to_id": 1725236618,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2024-08-21T18:48:05Z",
      "updated_at": "2024-08-21T18:48:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1725555941",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725555941"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 572,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725556045",
      "pull_request_review_id": 2251633437,
      "id": 1725556045,
      "node_id": "PRRC_kwDOABII585m2eVN",
      "diff_hunk": "@@ -658,16 +666,21 @@ class SearchCandidateFinder\n             /** Set of undecided transactions. This must be a subset of m_todo, and have no overlap\n              *  with inc. The set (inc | und) must be topologically valid. */\n             SetType und;\n+            /** (Only when inc is not empty) The best feerate of any superset of inc that is also a\n+             *  subset of (inc | und), without requiring it to be topologically valid. It forms a\n+             *  conservative upper bound on how good a set this work item can give rise to. */\n+            FeeFrac pot_feerate;\n \n             /** Construct a new work item. */\n-            WorkItem(SetInfo<SetType>&& i, SetType&& u) noexcept :\n-                inc(std::move(i)), und(std::move(u)) {}\n+            WorkItem(SetInfo<SetType>&& i, SetType&& u, FeeFrac&& p_f) noexcept :\n+                inc(std::move(i)), und(std::move(u)), pot_feerate(std::move(p_f)) {}",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 28,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "805f9122e598fd62dcf2eca7d0d0137f6c7f960a",
      "in_reply_to_id": 1725257738,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2024-08-21T18:48:11Z",
      "updated_at": "2024-08-21T18:48:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1725556045",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1725556045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 676,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1728757747",
      "pull_request_review_id": 2256916267,
      "id": 1728757747,
      "node_id": "PRRC_kwDOABII585nCr_z",
      "diff_hunk": "@@ -279,6 +279,14 @@ struct SetInfo\n     explicit SetInfo(const DepGraph<SetType>& depgraph, const SetType& txn) noexcept :\n         transactions(txn), feerate(depgraph.FeeRate(txn)) {}\n \n+    /** Add a transaction to this SetInfo. */\n+    void Set(const DepGraph<SetType>& depgraph, ClusterIndex pos) noexcept\n+    {\n+        Assume(!transactions[pos]);\n+        transactions.Set(pos);\n+        feerate += depgraph.FeeRate(pos);",
      "path": "src/cluster_linearize.h",
      "position": 38,
      "original_position": 9,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "781e0fb3aa5cbd0983b01547481eefa0804dfb5b",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "781e0fb3aa5: maybe paranoid, but\r\n```suggestion\r\n        transactions.Set(pos);\r\n        if (Assume(!transactions[pos])) feerate += depgraph.FeeRate(pos);\r\n```",
      "created_at": "2024-08-23T10:33:25Z",
      "updated_at": "2024-08-23T13:45:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1728757747",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1728757747"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 285,
      "original_start_line": 285,
      "start_side": "RIGHT",
      "line": 287,
      "original_line": 287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1728910777",
      "pull_request_review_id": 2256916267,
      "id": 1728910777,
      "node_id": "PRRC_kwDOABII585nDRW5",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of non-empty topological\n+        // subsets a (connected) cluster with N transactions can have. Even when the cluster is no\n+        // longer connected after removing certain transactions, this holds, because the connected\n+        // components are searched separately.",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": 108,
      "original_position": 75,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "c84c5c86ba6c12ce11e997d0c59d60694c667488",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Was trying to come up with some intuition for this bound. With no topological restrictions, we have 2^n subsets (yes/no n times). Minus the empty one. But every tx is in a dependency relationship if the graph is connected, therefore at least half of the subsets are not topological?",
      "created_at": "2024-08-23T12:43:39Z",
      "updated_at": "2024-08-23T13:45:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1728910777",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1728910777"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 554,
      "original_start_line": 551,
      "start_side": "RIGHT",
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729021009",
      "pull_request_review_id": 2257318314,
      "id": 1729021009,
      "node_id": "PRRC_kwDOABII585nDsRR",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of non-empty topological\n+        // subsets a (connected) cluster with N transactions can have. Even when the cluster is no\n+        // longer connected after removing certain transactions, this holds, because the connected\n+        // components are searched separately.",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": 108,
      "original_position": 75,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "c84c5c86ba6c12ce11e997d0c59d60694c667488",
      "in_reply_to_id": 1728910777,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe the worst case for number of connected topologically valid sets in a connected cluster is a cluster with one parent, and then N-1 independent children.\n\nIn this setting, every non-enpty topologically valid subset consists of the parent plus any of the 2^(N-1) subsets of children.\n\nThis isn't a proof that nothing worse exists, but I haven't been able to come with anything else.",
      "created_at": "2024-08-23T13:54:28Z",
      "updated_at": "2024-08-23T13:54:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1729021009",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729021009"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 554,
      "original_start_line": 551,
      "start_side": "RIGHT",
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729025288",
      "pull_request_review_id": 2257324650,
      "id": 1729025288,
      "node_id": "PRRC_kwDOABII585nDtUI",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of non-empty topological\n+        // subsets a (connected) cluster with N transactions can have. Even when the cluster is no\n+        // longer connected after removing certain transactions, this holds, because the connected\n+        // components are searched separately.",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": 108,
      "original_position": 75,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "c84c5c86ba6c12ce11e997d0c59d60694c667488",
      "in_reply_to_id": 1728910777,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "(in case my reasoning was faulty) My example was N-1 parents and 1 child.\r\n\r\n2^(N-1) - 1 possible choices of parents without child\r\nAdding child is one more possibility with all parents selected, resulting in 2^(N-1)?",
      "created_at": "2024-08-23T13:57:20Z",
      "updated_at": "2024-08-23T13:57:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1729025288",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729025288"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 554,
      "original_start_line": 551,
      "start_side": "RIGHT",
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729040254",
      "pull_request_review_id": 2257347677,
      "id": 1729040254,
      "node_id": "PRRC_kwDOABII585nDw9-",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of non-empty topological\n+        // subsets a (connected) cluster with N transactions can have. Even when the cluster is no\n+        // longer connected after removing certain transactions, this holds, because the connected\n+        // components are searched separately.",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": 108,
      "original_position": 75,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "c84c5c86ba6c12ce11e997d0c59d60694c667488",
      "in_reply_to_id": 1728910777,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@instagibbs Right, that works too. I was focused on just counting *connected* topologically valid subsets, but that isn't actually required in this context. Good to see it's still the same 2^(N-1) number.",
      "created_at": "2024-08-23T14:07:33Z",
      "updated_at": "2024-08-23T14:07:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1729040254",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729040254"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 554,
      "original_start_line": 551,
      "start_side": "RIGHT",
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729052874",
      "pull_request_review_id": 2257366673,
      "id": 1729052874,
      "node_id": "PRRC_kwDOABII585nD0DK",
      "diff_hunk": "@@ -513,9 +548,11 @@ FUZZ_TARGET(clusterlin_search_finder)\n             assert(found.transactions.IsSupersetOf(depgraph.Ancestors(i) & todo));\n         }\n \n-        // At most 2^N-1 iterations can be required: the number of non-empty subsets a graph with N\n-        // transactions has.\n-        assert(iterations_done <= ((uint64_t{1} << todo.Count()) - 1));\n+        // At most 2^(N-1) iterations can be required: the maximum number of non-empty topological\n+        // subsets a (connected) cluster with N transactions can have. Even when the cluster is no\n+        // longer connected after removing certain transactions, this holds, because the connected\n+        // components are searched separately.",
      "path": "src/test/fuzz/cluster_linearize.cpp",
      "position": 108,
      "original_position": 75,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "c84c5c86ba6c12ce11e997d0c59d60694c667488",
      "in_reply_to_id": 1728910777,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "~@sipa I psyop'd myself into thinking they were connected... somehow.. Well, I believe your example!~\r\n\r\nright, in this context it only matters what the remaining cluster was, so my example makes sense",
      "created_at": "2024-08-23T14:16:03Z",
      "updated_at": "2024-08-28T14:48:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1729052874",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1729052874"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 554,
      "original_start_line": 551,
      "start_side": "RIGHT",
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731199919",
      "pull_request_review_id": 2260608958,
      "id": 1731199919,
      "node_id": "PRRC_kwDOABII585nMAOv",
      "diff_hunk": "@@ -107,17 +107,18 @@ DepGraph<SetType> MakeHardGraph(ClusterIndex ntx)\n     return depgraph;\n }\n \n-/** Benchmark that does search-based candidate finding with 10000 iterations.\n+/** Benchmark that does search-based candidate finding with a specified number of iterations.\n  *\n- * Its goal is measuring how much time every additional search iteration in linearization costs.\n+ * Its goal is measuring how much time every additional search iteration in linearization costs,\n+ * by running with a low and a high count, subtracting the results, and divided by the number\n+ * iterations difference.\n  */\n template<typename SetType>\n-void BenchLinearizePerIterWorstCase(ClusterIndex ntx, benchmark::Bench& bench)",
      "path": "src/bench/cluster_linearize.cpp",
      "position": 42,
      "original_position": 13,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "21a184db63bd13cf0c2dff9e6e61ca85f2ff4454",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "While reading through the bench I noticed that docstring explanation of `BenchLinearizeNoItersWorstCaseAnc` still refer to `BenchLinearizePerIterWorstCase`",
      "created_at": "2024-08-26T12:52:42Z",
      "updated_at": "2024-08-26T16:58:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1731199919",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1731199919"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 119,
      "original_line": 119,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1738560500",
      "pull_request_review_id": 2272161235,
      "id": 1738560500,
      "node_id": "PRRC_kwDOABII585noFP0",
      "diff_hunk": "@@ -668,7 +668,9 @@ class SearchCandidateFinder\n             SetType und;\n             /** (Only when inc is not empty) The best feerate of any superset of inc that is also a\n              *  subset of (inc | und), without requiring it to be topologically valid. It forms a\n-             *  conservative upper bound on how good a set this work item can give rise to. */\n+             *  conservative upper bound on how good a set this work item can give rise to. If the\n+             *  real best such feerate does not exceed best's, then this value is not guaranteed to\n+             *  be accurate. */",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 7,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9fe834fa979c8ab038aec57dac2f468ca70c41a9",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can you clarify this comment for me, please? It doesn't need to be retouched; I just want to understand it better.\r\n\r\nwhat does \"If the real best such feerate does not exceed best's\" imply?",
      "created_at": "2024-08-30T12:30:46Z",
      "updated_at": "2024-08-30T16:28:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1738560500",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1738560500"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 672,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740160608",
      "pull_request_review_id": 2274455342,
      "id": 1740160608,
      "node_id": "PRRC_kwDOABII585nuL5g",
      "diff_hunk": "@@ -279,6 +279,14 @@ struct SetInfo\n     explicit SetInfo(const DepGraph<SetType>& depgraph, const SetType& txn) noexcept :\n         transactions(txn), feerate(depgraph.FeeRate(txn)) {}\n \n+    /** Add a transaction to this SetInfo. */\n+    void Set(const DepGraph<SetType>& depgraph, ClusterIndex pos) noexcept\n+    {\n+        Assume(!transactions[pos]);\n+        transactions.Set(pos);\n+        feerate += depgraph.FeeRate(pos);",
      "path": "src/cluster_linearize.h",
      "position": 38,
      "original_position": 9,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "781e0fb3aa5cbd0983b01547481eefa0804dfb5b",
      "in_reply_to_id": 1728757747,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd rather not, the function is intended for uses where the caller knows that the transaction isn't yet included, and I hope the tests are sufficient to cover all code paths. Making it dependent on an Assume still involves adding a check of that bit plus a conditional branch (in the current code, the `Assume` is compiled out in production builds).",
      "created_at": "2024-09-01T16:47:26Z",
      "updated_at": "2024-09-01T16:47:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1740160608",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740160608"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": 285,
      "original_start_line": 285,
      "start_side": "RIGHT",
      "line": 287,
      "original_line": 287,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740160637",
      "pull_request_review_id": 2274455376,
      "id": 1740160637,
      "node_id": "PRRC_kwDOABII585nuL59",
      "diff_hunk": "@@ -107,17 +107,18 @@ DepGraph<SetType> MakeHardGraph(ClusterIndex ntx)\n     return depgraph;\n }\n \n-/** Benchmark that does search-based candidate finding with 10000 iterations.\n+/** Benchmark that does search-based candidate finding with a specified number of iterations.\n  *\n- * Its goal is measuring how much time every additional search iteration in linearization costs.\n+ * Its goal is measuring how much time every additional search iteration in linearization costs,\n+ * by running with a low and a high count, subtracting the results, and divided by the number\n+ * iterations difference.\n  */\n template<typename SetType>\n-void BenchLinearizePerIterWorstCase(ClusterIndex ntx, benchmark::Bench& bench)",
      "path": "src/bench/cluster_linearize.cpp",
      "position": 42,
      "original_position": 13,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "21a184db63bd13cf0c2dff9e6e61ca85f2ff4454",
      "in_reply_to_id": 1731199919,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've rewritten the comments.",
      "created_at": "2024-09-01T16:47:44Z",
      "updated_at": "2024-09-01T16:47:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1740160637",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740160637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 119,
      "original_line": 119,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740162440",
      "pull_request_review_id": 2274457147,
      "id": 1740162440,
      "node_id": "PRRC_kwDOABII585nuMWI",
      "diff_hunk": "@@ -668,7 +668,9 @@ class SearchCandidateFinder\n             SetType und;\n             /** (Only when inc is not empty) The best feerate of any superset of inc that is also a\n              *  subset of (inc | und), without requiring it to be topologically valid. It forms a\n-             *  conservative upper bound on how good a set this work item can give rise to. */\n+             *  conservative upper bound on how good a set this work item can give rise to. If the\n+             *  real best such feerate does not exceed best's, then this value is not guaranteed to\n+             *  be accurate. */",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 7,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9fe834fa979c8ab038aec57dac2f468ca70c41a9",
      "in_reply_to_id": 1738560500,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I have expanded the comment a bit, but let me elaborate more here. If this helps, I'm happy to rework it into a code comment.\r\n\r\nImagine 3 transactions, T1, T2, and T3. All the same size, and each has its number as fee (T1 = 1 fee, T2 = 2 fee, T3 = 3 fee). Imagine the following series of events (it needs more complexity to actually happen, but perhaps this suffices as an explanation):\r\n* `inc={T3} und={T1,T2}` gets `add_fn`d. Its `pot_feerate` is 3 (just T3). This sets `best={T3}` (with feerate 3 as well), and T1 and T2 get removed from `imp`.\r\n* `inc={T1} und={T2}` gets `add_fn`d. Its *real* pot_feerate would be 1.5 (`{T1,T2}`), but non-`imp` transactions are not considered for computing `pot_feerate`, so `pot_feerate` is just set to 1 (just `{T1}`). This is fine, because despite adding T2 to `pot_feerate` would increase its feerate to 1.5, it will stay below the `best` feerate of 3 anyway. When `split_fn` pops this work item from the queue, it'll discard it anyway (because `pot_feerate` is worse than `best`, and T2 being included in it or not does not change that fact).",
      "created_at": "2024-09-01T17:01:36Z",
      "updated_at": "2024-09-01T17:01:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1740162440",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740162440"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 672,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740688427",
      "pull_request_review_id": 2275271607,
      "id": 1740688427,
      "node_id": "PRRC_kwDOABII585nwMwr",
      "diff_hunk": "@@ -668,7 +668,9 @@ class SearchCandidateFinder\n             SetType und;\n             /** (Only when inc is not empty) The best feerate of any superset of inc that is also a\n              *  subset of (inc | und), without requiring it to be topologically valid. It forms a\n-             *  conservative upper bound on how good a set this work item can give rise to. */\n+             *  conservative upper bound on how good a set this work item can give rise to. If the\n+             *  real best such feerate does not exceed best's, then this value is not guaranteed to\n+             *  be accurate. */",
      "path": "src/cluster_linearize.h",
      "position": null,
      "original_position": 7,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "9fe834fa979c8ab038aec57dac2f468ca70c41a9",
      "in_reply_to_id": 1738560500,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The new comment is much better, thanks for the example here.",
      "created_at": "2024-09-02T10:33:27Z",
      "updated_at": "2024-09-02T10:33:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1740688427",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1740688427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": 672,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745941441",
      "pull_request_review_id": 2283722590,
      "id": 1745941441,
      "node_id": "PRRC_kwDOABII585oEPPB",
      "diff_hunk": "@@ -207,6 +210,42 @@ void BenchMergeLinearizationsWorstCase(ClusterIndex ntx, benchmark::Bench& bench\n     });\n }\n \n+template<size_t N>\n+void BenchLinearizeOptimally(benchmark::Bench& bench, const std::array<uint8_t, N>& serialized)\n+{\n+    // Determine how many transactions the serialized cluster has.\n+    ClusterIndex num_tx{0};\n+    {\n+        SpanReader reader{serialized};\n+        DepGraph<BitSet<128>> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        num_tx = depgraph.TxCount();\n+        assert(num_tx < 128);\n+    }\n+\n+    SpanReader reader{serialized};\n+    auto runner_fn = [&]<typename SetType>() noexcept {\n+        DepGraph<SetType> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        uint64_t rng_seed = 0;\n+        bench.run([&] {\n+            auto res = Linearize(depgraph, /*max_iterations=*/1000000, rng_seed++);",
      "path": "src/bench/cluster_linearize.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "cf94bf788611d1cbb5722f57f90dc65ae5e62dcb",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "is f94c546ac02ad11ba73174cb8d25220515cee893 the first commit that you can assert optimality? I'm not sure having the benchmark in prior to that is so meaningful",
      "created_at": "2024-09-05T17:47:09Z",
      "updated_at": "2024-09-05T17:47:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1745941441",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745941441"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745945489",
      "pull_request_review_id": 2283729045,
      "id": 1745945489,
      "node_id": "PRRC_kwDOABII585oEQOR",
      "diff_hunk": "@@ -207,6 +210,42 @@ void BenchMergeLinearizationsWorstCase(ClusterIndex ntx, benchmark::Bench& bench\n     });\n }\n \n+template<size_t N>\n+void BenchLinearizeOptimally(benchmark::Bench& bench, const std::array<uint8_t, N>& serialized)\n+{\n+    // Determine how many transactions the serialized cluster has.\n+    ClusterIndex num_tx{0};\n+    {\n+        SpanReader reader{serialized};\n+        DepGraph<BitSet<128>> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        num_tx = depgraph.TxCount();\n+        assert(num_tx < 128);\n+    }\n+\n+    SpanReader reader{serialized};\n+    auto runner_fn = [&]<typename SetType>() noexcept {\n+        DepGraph<SetType> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        uint64_t rng_seed = 0;\n+        bench.run([&] {\n+            auto res = Linearize(depgraph, /*max_iterations=*/1000000, rng_seed++);",
      "path": "src/bench/cluster_linearize.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "cf94bf788611d1cbb5722f57f90dc65ae5e62dcb",
      "in_reply_to_id": 1745941441,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "also seems like the assertion fails for me at that commit, jump ahead opt is the first commit that seems to hit optimal for me",
      "created_at": "2024-09-05T17:50:47Z",
      "updated_at": "2024-09-05T17:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1745945489",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745945489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745962506",
      "pull_request_review_id": 2283759008,
      "id": 1745962506,
      "node_id": "PRRC_kwDOABII585oEUYK",
      "diff_hunk": "@@ -207,6 +210,42 @@ void BenchMergeLinearizationsWorstCase(ClusterIndex ntx, benchmark::Bench& bench\n     });\n }\n \n+template<size_t N>\n+void BenchLinearizeOptimally(benchmark::Bench& bench, const std::array<uint8_t, N>& serialized)\n+{\n+    // Determine how many transactions the serialized cluster has.\n+    ClusterIndex num_tx{0};\n+    {\n+        SpanReader reader{serialized};\n+        DepGraph<BitSet<128>> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        num_tx = depgraph.TxCount();\n+        assert(num_tx < 128);\n+    }\n+\n+    SpanReader reader{serialized};\n+    auto runner_fn = [&]<typename SetType>() noexcept {\n+        DepGraph<SetType> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        uint64_t rng_seed = 0;\n+        bench.run([&] {\n+            auto res = Linearize(depgraph, /*max_iterations=*/1000000, rng_seed++);",
      "path": "src/bench/cluster_linearize.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "cf94bf788611d1cbb5722f57f90dc65ae5e62dcb",
      "in_reply_to_id": 1745941441,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice catch. Apparently the example graphs were obtained by finding 100k-1M iterations-optimal clusters *with LIMO* (so while passing in an already-good linearization as input), while the benchmarks didn't pass in an existing linearization.\r\n\r\n@sdaftuar is going to construct new ones.",
      "created_at": "2024-09-05T18:05:25Z",
      "updated_at": "2024-09-05T18:05:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1745962506",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1745962506"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746335009",
      "pull_request_review_id": 2284353826,
      "id": 1746335009,
      "node_id": "PRRC_kwDOABII585oFvUh",
      "diff_hunk": "@@ -207,6 +210,42 @@ void BenchMergeLinearizationsWorstCase(ClusterIndex ntx, benchmark::Bench& bench\n     });\n }\n \n+template<size_t N>\n+void BenchLinearizeOptimally(benchmark::Bench& bench, const std::array<uint8_t, N>& serialized)\n+{\n+    // Determine how many transactions the serialized cluster has.\n+    ClusterIndex num_tx{0};\n+    {\n+        SpanReader reader{serialized};\n+        DepGraph<BitSet<128>> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        num_tx = depgraph.TxCount();\n+        assert(num_tx < 128);\n+    }\n+\n+    SpanReader reader{serialized};\n+    auto runner_fn = [&]<typename SetType>() noexcept {\n+        DepGraph<SetType> depgraph;\n+        reader >> Using<DepGraphFormatter>(depgraph);\n+        uint64_t rng_seed = 0;\n+        bench.run([&] {\n+            auto res = Linearize(depgraph, /*max_iterations=*/1000000, rng_seed++);",
      "path": "src/bench/cluster_linearize.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "9ad2fe7e69e9e69949ebbb280a15756dc3301f09",
      "original_commit_id": "cf94bf788611d1cbb5722f57f90dc65ae5e62dcb",
      "in_reply_to_id": 1745941441,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done, pushed new ones, and moved the commit that introduces them forward to the point where they make sense.",
      "created_at": "2024-09-06T00:15:39Z",
      "updated_at": "2024-09-06T00:15:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30286#discussion_r1746335009",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1746335009"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    }
  ]
}