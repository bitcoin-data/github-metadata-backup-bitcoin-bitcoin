{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113",
    "id": 2409854731,
    "node_id": "PR_kwDOABII586Po3cL",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32113",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32113.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32113.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/c94e02c1b2017ac054eb6a373ca5f31c589bc601",
    "number": 32113,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "fuzz: enable running fuzz test cases in Debug mode",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "When building with\r\n\r\n    BUILD_FOR_FUZZING=OFF\r\n    BUILD_FUZZ_BINARY=ON\r\n    CMAKE_BUILD_TYPE=Debug\r\n\r\n\r\nallow the fuzz binary to execute given test cases (without actual fuzzing) to make it easier to reproduce fuzz test failures in a more normal debug build.\r\n\r\nIn Debug builds, deterministic fuzz behaviour is controlled via a runtime variable, which is normally false, but set to true automatically in the fuzz binary, unless the FUZZ_NONDETERMINISM environment variable is set.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-03-21T15:37:24Z",
    "updated_at": "2025-04-14T14:43:58Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "1d17f98fefb99a79e3591e5a4d305b3c448e0337",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ajtowns:202503-debug-fuzz",
      "ref": "202503-debug-fuzz",
      "sha": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 53941525,
        "node_id": "MDEwOlJlcG9zaXRvcnk1Mzk0MTUyNQ==",
        "name": "bitcoin",
        "full_name": "ajtowns/bitcoin",
        "owner": {
          "login": "ajtowns",
          "id": 127186,
          "node_id": "MDQ6VXNlcjEyNzE4Ng==",
          "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ajtowns",
          "html_url": "https://github.com/ajtowns",
          "followers_url": "https://api.github.com/users/ajtowns/followers",
          "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
          "organizations_url": "https://api.github.com/users/ajtowns/orgs",
          "repos_url": "https://api.github.com/users/ajtowns/repos",
          "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ajtowns/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ajtowns/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ajtowns/bitcoin",
        "archive_url": "https://api.github.com/repos/ajtowns/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ajtowns/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ajtowns/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ajtowns/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ajtowns/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ajtowns/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ajtowns/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ajtowns/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ajtowns/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ajtowns/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ajtowns/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ajtowns/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ajtowns/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ajtowns/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ajtowns/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ajtowns/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ajtowns/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ajtowns/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ajtowns/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ajtowns/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ajtowns/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ajtowns/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ajtowns/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ajtowns/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ajtowns/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ajtowns/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ajtowns/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ajtowns/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ajtowns/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ajtowns/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ajtowns/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ajtowns/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ajtowns/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ajtowns/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ajtowns/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ajtowns/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ajtowns/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ajtowns/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ajtowns/bitcoin/hooks",
        "svn_url": "https://github.com/ajtowns/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 9,
        "watchers_count": 9,
        "size": 309698,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-07T17:09:16Z",
        "created_at": "2016-03-15T12:11:24Z",
        "updated_at": "2025-01-14T15:54:27Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "639279e86a6edd6cb68e8cf077d14337bcd13959",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37035,
        "stargazers_count": 82881,
        "watchers_count": 82881,
        "size": 279768,
        "default_branch": "master",
        "open_issues_count": 699,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-14T09:59:23Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-14T14:29:39Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 46,
    "deletions": 14,
    "changed_files": 6,
    "commits": 1,
    "review_comments": 10,
    "comments": 15
  },
  "events": [
    {
      "event": "commented",
      "id": 2743748293,
      "node_id": "IC_kwDOABII586jikbF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2743748293",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-21T15:37:27Z",
      "updated_at": "2025-04-09T01:36:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32113.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2739879114), [marcofleon](https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2747432383) |\n| Stale ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2753704261) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2743748293",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "labeled",
      "id": 16930877790,
      "node_id": "LE_lADOABII586vKjGPzwAAAAPxKLFe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16930877790",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-21T15:37:29Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 2743752847,
      "node_id": "IC_kwDOABII586jiliP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2743752847",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-21T15:39:05Z",
      "updated_at": "2025-03-21T15:39:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "Related historical PRs: #31191 #24472",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2743752847",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "commented",
      "id": 2743792938,
      "node_id": "IC_kwDOABII586jivUq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2743792938",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-21T15:55:35Z",
      "updated_at": "2025-03-21T15:55:35Z",
      "author_association": "MEMBER",
      "body": "I don't think the current patch will work. `G_FUZZING` influences more than just the behavior of the asserts/assumes. For example:\r\n\r\n* POW checks are different\r\n* The task runner is different\r\n* The random seeding is different\r\n\r\nSo with this patch it looks like you are instead opting into non-reproducible fuzz behavior.\r\n\r\nIn debug mode the performance doesn't matter, so a possible alternative fix could be to just make G_FUZZING a runtime bool again?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2743792938",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "commented",
      "id": 2745039599,
      "node_id": "IC_kwDOABII586jnfrv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2745039599",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-22T05:58:09Z",
      "updated_at": "2025-03-22T05:58:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I don't think the current patch will work. `G_FUZZING` influences more than just the behavior of the asserts/assumes. For example:\r\n> \r\n>     * POW checks are different\r\n>     * The task runner is different\r\n>     * The random seeding is different\r\n\r\nYes -- the same fuzz seed will in many cases execute different code paths for the fuzzer when compiled in Debug mode without BUILD_FOR_FUZZING set. But that's a feature not a bug -- the idea is to be able to still run the fuzz tests with a relatively normal production-like build that doesn't completely special-case out POW checks, random seeding, etc.\r\n\r\n> So with this patch it looks like you are instead opting into non-reproducible fuzz behavior.\r\n\r\nThis is only for builds where fuzzing isn't actually happening. ie, you're getting a seed from a real fuzz run, then retry that seed against a more normal build.\r\n \r\n> In debug mode the performance doesn't matter, so a possible alternative fix could be to just make G_FUZZING a runtime bool again?\r\n\r\nYou could make the rng, pow checks etc conditional on something like this, I suppose, which would get you optimal performance in both fuzzing and production builds, and I think pretty good performance in debug builds?\r\n\r\n```c++\r\ninline bool FuzzDetermism()\r\n{\r\n    if constexpr (G_FUZZING) {\r\n         return true;\r\n    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\r\n        return false;\r\n    } else {\r\n        return DynamicFuzzDeterminism();\r\n    }\r\n}\r\n\r\nbool DynamicFuzzDeterminism()\r\n{\r\n    static bool fuzz_det = std::getenv(\"FUZZ_DETERMINISM\");\r\n    return fuzz_det;    \r\n}\r\n```",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2745039599",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "commented",
      "id": 2745046158,
      "node_id": "IC_kwDOABII586jnhSO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2745046158",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-22T06:16:58Z",
      "updated_at": "2025-03-22T06:16:58Z",
      "author_association": "MEMBER",
      "body": "> But that's a feature not a bug -- the idea is to be able to still run the fuzz tests with a relatively normal production-like build that doesn't completely special-case out POW checks, random seeding, etc.\r\n\r\nMy fear is that some bugs are not reproducible. (I know this is mostly theoretical, because we haven't seen such a case yet, but still it would be a bit disappointing if someone spent hours trying to reproduce a fuzz run, when it is impossible in a normal debug build)\r\n\r\n> `inline bool FuzzDetermism()`\r\n\r\nlgtm",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2745046158",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16939400961,
      "node_id": "HRFPE_lADOABII586vKjGPzwAAAAPxqr8B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16939400961",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e8d04ba08670d5a397abbff02815a919b583a592",
      "commit_url": "https://api.github.com/repos/ajtowns/bitcoin/commits/e8d04ba08670d5a397abbff02815a919b583a592",
      "created_at": "2025-03-22T07:10:32Z"
    },
    {
      "event": "commented",
      "id": 2745105618,
      "node_id": "IC_kwDOABII586jnvzS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2745105618",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-22T07:11:55Z",
      "updated_at": "2025-03-22T07:11:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "> lgtm\r\n\r\nOkay, done. How's that look?",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2745105618",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "reviewed",
      "id": 2707929839,
      "node_id": "PRR_kwDOABII586hZ7rv",
      "url": null,
      "actor": null,
      "commit_id": "e8d04ba08670d5a397abbff02815a919b583a592",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2707929839",
      "submitted_at": "2025-03-22T07:19:43Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16939812906,
      "node_id": "HRFPE_lADOABII586vKjGPzwAAAAPxsQgq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16939812906",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bb5fa68a5cd9262cf7f0d33c208c95d7d20c01fd",
      "commit_url": "https://api.github.com/repos/ajtowns/bitcoin/commits/bb5fa68a5cd9262cf7f0d33c208c95d7d20c01fd",
      "created_at": "2025-03-22T09:28:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16939816965,
      "node_id": "HRFPE_lADOABII586vKjGPzwAAAAPxsRgF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16939816965",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "commit_url": "https://api.github.com/repos/ajtowns/bitcoin/commits/1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "created_at": "2025-03-22T09:30:10Z"
    },
    {
      "event": "reviewed",
      "id": 2709566400,
      "node_id": "PRR_kwDOABII586hgLPA",
      "url": null,
      "actor": null,
      "commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2709566400",
      "submitted_at": "2025-03-24T08:39:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
    },
    {
      "event": "commented",
      "id": 2747808769,
      "node_id": "IC_kwDOABII586jyDwB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2747808769",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-24T11:31:16Z",
      "updated_at": "2025-03-24T11:31:16Z",
      "author_association": "MEMBER",
      "body": "lgtm ACK 1718da848a0a7591f0eab086e159f1e9e0f2c59b\r\n\r\nThis should also address the concern by @ryanofsky in https://github.com/bitcoin/bitcoin/pull/31191#issuecomment-2451865832 to some extent IIUC. Of course, it is still impossible to execute a fuzz test case normally in a release-mode non-fuzz build, but this pull offers one workaround:\r\n\r\n* Picking a debug-mode build to build all binaries and manually overriding the cxx-flags to increase the optimization level to the level of a release-mode build.\r\n\r\nThis workaround could also be used to revert 72ab35a6d09c4f115908a3335d24eb03fd154bf6 and merge the split CI tasks back into one.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2747808769",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "mentioned",
      "id": 16953951390,
      "node_id": "MEE_lADOABII586vKjGPzwAAAAPyiMSe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16953951390",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-24T11:31:17Z"
    },
    {
      "event": "subscribed",
      "id": 16953951403,
      "node_id": "SE_lADOABII586vKjGPzwAAAAPyiMSr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16953951403",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-24T11:31:17Z"
    },
    {
      "event": "reviewed",
      "id": 2710675645,
      "node_id": "PRR_kwDOABII586hkaC9",
      "url": null,
      "actor": null,
      "commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept & approach ACK. The changes here all seem reasonable and I get abstractly how it could be useful to run fuzz binary without fuzzing compile options and instrumentation. But I only have a vague idea of how this should get used in practice. It would be helpful to add some documentation to https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md to say how/when you could run the fuzz binary in debug mode, and when you would might want to set the FUZZ_NONDETERMINISM environment variable.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2710675645",
      "submitted_at": "2025-03-24T14:53:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16988625860,
      "node_id": "HRFPE_lADOABII586vKjGPzwAAAAP0mdvE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16988625860",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1f072cfb108d8f71daf6281d97353ff755af9569",
      "commit_url": "https://api.github.com/repos/ajtowns/bitcoin/commits/1f072cfb108d8f71daf6281d97353ff755af9569",
      "created_at": "2025-03-26T09:13:46Z"
    },
    {
      "event": "commented",
      "id": 2753704261,
      "node_id": "IC_kwDOABII586kIjFF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2753704261",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T09:18:23Z",
      "updated_at": "2025-03-26T09:18:23Z",
      "author_association": "MEMBER",
      "body": "re-review-only-ACK 1f072cfb108d8f71daf6281d97353ff755af9569\r\n\r\nOnly change is a comment",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2753704261",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "review_requested",
      "id": 16988699058,
      "node_id": "RRE_lADOABII586vKjGPzwAAAAP0mvmy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16988699058",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T09:18:27Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2754567252,
      "node_id": "IC_kwDOABII586kL1xU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2754567252",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T14:09:20Z",
      "updated_at": "2025-03-26T14:09:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "> But I only have a vague idea of how this should get used in practice. It would be helpful to add some documentation to https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md to say how/when you could run the fuzz binary in debug mode, and when you would might want to set the FUZZ_NONDETERMINISM environment variable.\r\n\r\nI think there's two reasons to do this:\r\n\r\n * It's an easier way to reproduce most fuzzer crashes (ie, ones that don't need a sanitizer to trigger); just grab your existing debug build, and run\r\n    ```\r\n    $ FUZZ=process_message build_debug/bin/fuzz corpus/1bc91feec9fc00b107d97dc225a9f2cdaa078eb6`\r\n    ```\r\n   and it's also compatible with gdb\r\n    ```\r\n    $ FUZZ=process_message gdb build_debug/bin/fuzz\r\n    run corpus/1bc91feec9fc00b107d97dc225a9f2cdaa078eb6\r\n    ```\r\n\r\n * It lets you include the fuzz test corpora (assuming they all pass) in a regular code coverage build, something like:\r\n    ```sh\r\n    PRINT_ALL_FUZZ_TARGETS_AND_ABORT=1 ../build/bin/fuzz  | \r\n      while read tgt; do\r\n         d=qa-assets/fuzz_corpora/$tgt;\r\n         if [ -d \"$d\" ]; then\r\n           (echo \"*** $tgt ***\"; \r\n            time FUZZ=$tgt ../build/bin/fuzz $d) >OUT_$tgt.log 2>&1 &\r\n         else\r\n           echo SKIPPED $tgt -- no corpus;\r\n         fi;\r\n       done\r\n    ```\r\n    \r\nNot really sure what should go in the docs or not, hopefully the above is enough explanation if someone else wants to add something.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2754567252",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "commented",
      "id": 2754631442,
      "node_id": "IC_kwDOABII586kMFcS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2754631442",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T14:28:09Z",
      "updated_at": "2025-03-26T14:28:09Z",
      "author_association": "MEMBER",
      "body": "> * It lets you include the fuzz test corpora (assuming they all pass) in a regular code coverage build, something like:\r\n\r\nMaybe I am missing something, but I guess you meant \"debug mode coverage build\" instead of \"regular code coverage build\", because the regular coverage build has neither fuzz, nor debug enabled. For me it looks something like:\r\n\r\n```\r\nC++ compiler .......................... GNU 14.2.0, /usr/bin/g++\r\nCMAKE_BUILD_TYPE ...................... Coverage\r\nPreprocessor defined macros ........... \r\nC++ compiler flags .................... -fprofile-update=atomic -g -Og --coverage -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/tmp/cirrus-ci-build/bitcoin-core/src=. -fmacro-prefix-map=/tmp/cirrus-ci-build/bitcoin-core/src=. -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2754631442",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "commented",
      "id": 2755161801,
      "node_id": "IC_kwDOABII586kOG7J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2755161801",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T17:18:48Z",
      "updated_at": "2025-03-26T17:18:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > * It lets you include the fuzz test corpora (assuming they all pass) in a regular code coverage build, something like:\r\n> \r\n> Maybe I am missing something, but I guess you meant \"debug mode coverage build\" instead of \"regular code coverage build\", because the regular coverage build has neither fuzz, nor debug enabled. For me it looks something like:\r\n\r\nSure; I meant \"regular\" just in \"it builds all the binaries and you can run non-fuzz tests\".",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2755161801",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "review_requested",
      "id": 17007475552,
      "node_id": "RRE_lADOABII586vKjGPzwAAAAP1uXtg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17007475552",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T08:06:42Z",
      "requested_reviewer": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 17007475573,
      "node_id": "RRE_lADOABII586vKjGPzwAAAAP1uXt1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17007475573",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T08:06:42Z",
      "requested_reviewer": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 17088243565,
      "node_id": "LE_lADOABII586vKjGPzwAAAAP6iedt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17088243565",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-02T07:41:44Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM5NGUwMmMxYjIwMTdhYzA1NGViNmEzNzNjYTVmMzFjNTg5YmM2MDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "tree": {
        "sha": "b50455fe622ed14f328a033da6bda61998b84616",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b50455fe622ed14f328a033da6bda61998b84616"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/639279e86a6edd6cb68e8cf077d14337bcd13959",
          "sha": "639279e86a6edd6cb68e8cf077d14337bcd13959",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/639279e86a6edd6cb68e8cf077d14337bcd13959"
        }
      ],
      "message": "fuzz: enable running fuzz test cases in Debug mode\n\nWhen building with\n\n BUILD_FOR_FUZZING=OFF\n BUILD_FUZZ_BINARY=ON\n CMAKE_BUILD_TYPE=Debug\n\nallow the fuzz binary to execute given test cases (without actual\nfuzzing) to make it easier to reproduce fuzz test failures in a more\nnormal debug build.\n\nIn Debug builds, deterministic fuzz behaviour is controlled via a runtime\nvariable, which is normally false, but set to true automatically in the\nfuzz binary, unless the FUZZ_NONDETERMINISM environment variable is set.",
      "committer": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2025-04-02T23:57:00Z"
      },
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2025-03-21T15:02:13Z"
      },
      "sha": "c94e02c1b2017ac054eb6a373ca5f31c589bc601"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17102568324,
      "node_id": "HRFPE_lADOABII586vKjGPzwAAAAP7ZHuE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17102568324",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "commit_url": "https://api.github.com/repos/ajtowns/bitcoin/commits/c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "created_at": "2025-04-03T00:00:56Z"
    },
    {
      "event": "commented",
      "id": 2774037911,
      "node_id": "IC_kwDOABII586lWHWX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2774037911",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T00:26:45Z",
      "updated_at": "2025-04-03T00:26:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased over #32158",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2774037911",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "unlabeled",
      "id": 17102894218,
      "node_id": "UNLE_lADOABII586vKjGPzwAAAAP7aXSK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17102894218",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T00:45:05Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17103067466,
      "node_id": "LE_lADOABII586vKjGPzwAAAAP7bBlK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17103067466",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T01:09:41Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 17110723780,
      "node_id": "UNLE_lADOABII586vKjGPzwAAAAP74OzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17110723780",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T10:29:01Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2775446177,
      "node_id": "IC_kwDOABII586lbfKh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2775446177",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T11:24:10Z",
      "updated_at": "2025-04-03T11:24:10Z",
      "author_association": "MEMBER",
      "body": "almost c94e02c1b2017ac054eb6a373ca5f31c589bc601 ðŸ‘»\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: almost c94e02c1b2017ac054eb6a373ca5f31c589bc601 ðŸ‘»\r\nCsF0qA4lNGlpxYIz0VgrSJMXtzy9EYYMBa7p+DelIzWTd4uuySTkqFOubu2FN4Z8V7SDQSk94TASNla7aH5ACw==\r\n```\r\n\r\n</details>\r\n\r\n\r\n\r\n\r\nThere are several issues:\r\n\r\n* A silent merge conflict was ignored, and silent merge conflicts can happen in the future again.\r\n* `G_FUZZING` is confusing, because it doesn't say anything about whether fuzzing is happening right now, rather whether the exe was built for fuzzing.\r\n\r\nMy recommendation would be to just rename `G_FUZZING` to `G_FUZZ_BUILD` to fix all issues.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2775446177",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "reviewed",
      "id": 2739879114,
      "node_id": "PRR_kwDOABII586jTzzK",
      "url": null,
      "actor": null,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK c94e02c1b2017ac054eb6a373ca5f31c589bc601. It seems like a nice change to let the fuzz binary run in debug builds, and I found explanation of the motivation in https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2754567252 very helpful.\r\n\r\nI still do think the new options could be documented better, so attempted to write some documentation (feel free to use this or adapt or ignore if you think it's not helpful):\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/doc/fuzzing.md\r\n+++ b/doc/fuzzing.md\r\n@@ -143,6 +143,37 @@ If you find coverage increasing inputs when fuzzing you are highly encouraged to\r\n \r\n Every single pull request submitted against the Bitcoin Core repo is automatically tested against all inputs in the [`bitcoin-core/qa-assets`](https://github.com/bitcoin-core/qa-assets) repo. Contributing new coverage increasing inputs is an easy way to help make Bitcoin Core more robust.\r\n \r\n+## Building and debugging fuzz tests\r\n+\r\n+There are 3 ways fuzz tests can be built:\r\n+\r\n+1. With `-DBUILD_FOR_FUZZING=ON` which forces on fuzz determinism (skipping\r\n+   proof of work checks, disabling random number seeding, disabling clock time)\r\n+   and causes `Assume()` checks to abort on failure.\r\n+\r\n+   This is the normal way to run fuzz tests and generate new inputs. Because\r\n+   determinism is hardcoded on in this build, only the fuzz binary can be built\r\n+   and all other binaries are disabled.\r\n+\r\n+2. With `-DBUILD_FUZZ_BINARY=ON -DCMAKE_BUILD_TYPE=Debug` which causes\r\n+   `Assume()` checks to abort on failure, and enables fuzz determinism, but\r\n+   makes it optional.\r\n+\r\n+   Determinism is turned on in the fuzz binary by default, but can be turned off\r\n+   by setting the `FUZZ_NONDETERMINISM` environment variable to any value, which\r\n+   may be useful for running fuzz tests with code that deterministic execution\r\n+   would otherwise skip.\r\n+\r\n+   Since `BUILD_FUZZ_BINARY`, unlike `BUILD_FOR_FUZZING`, does not hardcode on\r\n+   determinism, this allows non-fuzz binaries to coexist in the same build,\r\n+   making it possible to reproduce fuzz test failures in a normal build.\r\n+\r\n+3. With `-DBUILD_FUZZ_BINARY=ON -DCMAKE_BUILD_TYPE=Release`. In this build, the\r\n+   fuzz binary will build but refuse to run, because in release builds\r\n+   determinism is forced off and `Assume()` checks do not abort, so running the\r\n+   tests would not be useful. This build is only useful for ensuring fuzz tests\r\n+   compile and link.\r\n+\r\n ## macOS hints for libFuzzer\r\n \r\n The default Clang/LLVM version supplied by Apple on macOS does not include\r\n```\r\n</p>\r\n</details>\r\n\r\nI also think the implementation is probably more complicated than it needs to be because of the `constexpr` optimizations it is doing. But Ihis could be simplified later and I can understand wanting to be conservative about performance.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2739879114",
      "submitted_at": "2025-04-03T14:27:21Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
    },
    {
      "event": "review_requested",
      "id": 17115066025,
      "node_id": "RRE_lADOABII586vKjGPzwAAAAP8Iy6p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17115066025",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T14:27:25Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2776047319,
      "node_id": "IC_kwDOABII586ldx7X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2776047319",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-03T14:48:42Z",
      "updated_at": "2025-04-03T14:48:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2739879114\r\n\r\n> I also think the implementation is probably more complicated than it needs to be because of the `constexpr` optimizations it is doing. But Ihis could be simplified later and I can understand wanting to be conservative about performance.\r\n\r\nHere is the simplification I have in mind. I do not think would be bad for performance because the only release code checking the `g_fuzzing` variable here is in `CheckProofOfWork()`. But I could be wrong about something and in any case these changes could be a followup and shouldn't block this PR:\r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\n--- a/CMakeLists.txt\r\n+++ b/CMakeLists.txt\r\n@@ -230,7 +230,7 @@ if(BUILD_FOR_FUZZING)\r\n   set(BUILD_FUZZ_BINARY ON)\r\n \r\n   target_compile_definitions(core_interface INTERFACE\r\n-    FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION\r\n+    BUILD_FOR_FUZZING\r\n   )\r\n endif()\r\n \r\n--- a/src/pow.cpp\r\n+++ b/src/pow.cpp\r\n@@ -139,7 +139,7 @@ bool PermittedDifficultyTransition(const Consensus::Params& params, int64_t heig\r\n // the most significant bit of the last byte of the hash is set.\r\n bool CheckProofOfWork(uint256 hash, unsigned int nBits, const Consensus::Params& params)\r\n {\r\n-    if (EnableFuzzDeterminism()) return (hash.data()[31] & 0x80) == 0;\r\n+    if (g_fuzzing) return (hash.data()[31] & 0x80) == 0;\r\n     return CheckProofOfWorkImpl(hash, nBits, params);\r\n }\r\n \r\n--- a/src/test/fuzz/fuzz.cpp\r\n+++ b/src/test/fuzz/fuzz.cpp\r\n@@ -147,17 +147,15 @@ static void initialize()\r\n         std::cerr << \"No fuzz target compiled for \" << g_fuzz_target << \".\" << std::endl;\r\n         std::exit(EXIT_FAILURE);\r\n     }\r\n-    if constexpr (!G_FUZZING && !G_ABORT_ON_FAILED_ASSUME) {\r\n+    if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\r\n         std::cerr << \"Must compile with -DBUILD_FOR_FUZZING=ON or in Debug mode to execute a fuzz target.\" << std::endl;\r\n         std::exit(EXIT_FAILURE);\r\n     }\r\n-    if (!EnableFuzzDeterminism()) {\r\n-        if (std::getenv(\"FUZZ_NONDETERMINISM\")) {\r\n-            std::cerr << \"Warning: FUZZ_NONDETERMINISM env var set, results may be inconsistent with fuzz build\" << std::endl;\r\n-        } else {\r\n-            g_enable_dynamic_fuzz_determinism = true;\r\n-            assert(EnableFuzzDeterminism());\r\n-        }\r\n+    if (std::getenv(\"FUZZ_NONDETERMINISM\")) {\r\n+        std::cerr << \"Warning: FUZZ_NONDETERMINISM env var set, results may be inconsistent with fuzz build\" << std::endl;\r\n+    } else {\r\n+        g_fuzzing = true;\r\n+        assert(g_fuzzing);\r\n     }\r\n     Assert(!g_test_one_input);\r\n     g_test_one_input = &it->second.test_one_input;\r\n--- a/src/test/util/random.cpp\r\n+++ b/src/test/util/random.cpp\r\n@@ -25,7 +25,7 @@ void SeedRandomStateForTest(SeedRand seedtype)\r\n     // no longer truly random. It should be enough to get the seed once for the\r\n     // process.\r\n     static const auto g_ctx_seed = []() -> std::optional<uint256> {\r\n-        if (EnableFuzzDeterminism()) return {};\r\n+        if (g_fuzzing) return {};\r\n         // If RANDOM_CTX_SEED is set, use that as seed.\r\n         if (const char* num{std::getenv(RANDOM_CTX_SEED)}) {\r\n             if (auto num_parsed{uint256::FromUserHex(num)}) {\r\n@@ -40,7 +40,7 @@ void SeedRandomStateForTest(SeedRand seedtype)\r\n     }();\r\n \r\n     g_seeded_g_prng_zero = seedtype == SeedRand::ZEROS;\r\n-    if (EnableFuzzDeterminism()) {\r\n+    if (g_fuzzing) {\r\n         Assert(g_seeded_g_prng_zero); // Only SeedRandomStateForTest(SeedRand::ZEROS) is allowed in fuzz tests\r\n         Assert(!g_used_g_prng);       // The global PRNG must not have been used before SeedRandomStateForTest(SeedRand::ZEROS)\r\n     }\r\n--- a/src/test/util/setup_common.cpp\r\n+++ b/src/test/util/setup_common.cpp\r\n@@ -112,7 +112,7 @@ static void ExitFailure(std::string_view str_err)\r\n BasicTestingSetup::BasicTestingSetup(const ChainType chainType, TestOpts opts)\r\n     : m_args{}\r\n {\r\n-    if (!EnableFuzzDeterminism()) {\r\n+    if (!g_fuzzing) {\r\n         SeedRandomForTest(SeedRand::FIXED_SEED);\r\n     }\r\n     m_node.shutdown_signal = &m_interrupt;\r\n@@ -203,7 +203,7 @@ BasicTestingSetup::~BasicTestingSetup()\r\n {\r\n     m_node.ecc_context.reset();\r\n     m_node.kernel.reset();\r\n-    if (!EnableFuzzDeterminism()) {\r\n+    if (!g_fuzzing) {\r\n         SetMockTime(0s); // Reset mocktime for following tests\r\n     }\r\n     LogInstance().DisconnectTestLogger();\r\n@@ -229,7 +229,7 @@ ChainTestingSetup::ChainTestingSetup(const ChainType chainType, TestOpts opts)\r\n         m_node.scheduler->m_service_thread = std::thread(util::TraceThread, \"scheduler\", [&] { m_node.scheduler->serviceQueue(); });\r\n         m_node.validation_signals =\r\n             // Use synchronous task runner while fuzzing to avoid non-determinism\r\n-            EnableFuzzDeterminism() ?\r\n+            g_fuzzing ?\r\n                 std::make_unique<ValidationSignals>(std::make_unique<util::ImmediateTaskRunner>()) :\r\n                 std::make_unique<ValidationSignals>(std::make_unique<SerialTaskRunner>(*m_node.scheduler));\r\n         {\r\n@@ -256,7 +256,7 @@ ChainTestingSetup::ChainTestingSetup(const ChainType chainType, TestOpts opts)\r\n             .notifications = *m_node.notifications,\r\n             .signals = m_node.validation_signals.get(),\r\n             // Use no worker threads while fuzzing to avoid non-determinism\r\n-            .worker_threads_num = G_FUZZING ? 0 : 2,\r\n+            .worker_threads_num = g_fuzzing ? 0 : 2,\r\n         };\r\n         if (opts.min_validation_cache) {\r\n             chainman_opts.script_execution_cache_bytes = 0;\r\n--- a/src/util/check.cpp\r\n+++ b/src/util/check.cpp\r\n@@ -34,4 +34,4 @@ void assertion_fail(std::string_view file, int line, std::string_view func, std:\r\n     std::abort();\r\n }\r\n \r\n-std::atomic<bool> g_enable_dynamic_fuzz_determinism{false};\r\n+std::atomic<bool> g_fuzzing{false};\r\n--- a/src/util/check.h\r\n+++ b/src/util/check.h\r\n@@ -14,37 +14,15 @@\r\n #include <string_view>\r\n #include <utility>\r\n \r\n-constexpr bool G_FUZZING{\r\n-#ifdef FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION\r\n-    true\r\n-#else\r\n-    false\r\n-#endif\r\n-};\r\n constexpr bool G_ABORT_ON_FAILED_ASSUME{\r\n-#ifdef ABORT_ON_FAILED_ASSUME\r\n+#if defined(ABORT_ON_FAILED_ASSUME) || defined(BUILD_FOR_FUZZING)\r\n     true\r\n #else\r\n     false\r\n #endif\r\n };\r\n \r\n-extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\r\n-\r\n-inline bool EnableFuzzDeterminism()\r\n-{\r\n-    if constexpr (G_FUZZING) {\r\n-        return true;\r\n-    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\r\n-        // Running fuzz tests is always disabled if Assume() doesn't abort\r\n-        // (ie, non-fuzz non-debug builds), as otherwise tests which\r\n-        // should fail due to a failing Assume may still pass. As such,\r\n-        // we also statically disable fuzz determinism in that case.\r\n-        return false;\r\n-    } else {\r\n-        return g_enable_dynamic_fuzz_determinism;\r\n-    }\r\n-}\r\n+extern std::atomic<bool> g_fuzzing;\r\n \r\n std::string StrFormatInternalBug(std::string_view msg, std::string_view file, int line, std::string_view func);\r\n \r\n@@ -75,7 +53,7 @@ void assertion_fail(std::string_view file, int line, std::string_view func, std:\r\n template <bool IS_ASSERT, typename T>\r\n constexpr T&& inline_assertion_check(LIFETIMEBOUND T&& val, [[maybe_unused]] const char* file, [[maybe_unused]] int line, [[maybe_unused]] const char* func, [[maybe_unused]] const char* assertion)\r\n {\r\n-    if (IS_ASSERT || std::is_constant_evaluated() || G_FUZZING || G_ABORT_ON_FAILED_ASSUME) {\r\n+    if (IS_ASSERT || std::is_constant_evaluated() || G_ABORT_ON_FAILED_ASSUME) {\r\n         if (!val) {\r\n             assertion_fail(file, line, func, assertion);\r\n         }\r\n```\r\n</p>\r\n</details>\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2776047319",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    },
    {
      "event": "reviewed",
      "id": 2747432383,
      "node_id": "PRR_kwDOABII586jwn2_",
      "url": null,
      "actor": null,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK c94e02c1b2017ac054eb6a373ca5f31c589bc601 (assuming https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2775446177 gets addressed)\r\n\r\n`BUILD_FOR_FUZZING=ON`: continues to work as expected, debug and non-debug\r\n\r\nnon-debug `BUILD_FUZZ_BINARY=ON`: fuzzing doesn't work and the proper message is displayed, same behavior as on master\r\n\r\ndebug `BUILD_FUZZ_BINARY=ON`: I tested by running the `p2p_headers_presync` target, which stalls if actual proof of work is being checked. The target only stalls when `FUZZ_NONDETERMINISM` is set, which confirms that fuzzing is now possible in a debug build and that the environment variable works as expected. Running on a single input without libFuzzer is also possible.\r\n\r\nI like this solution. In terms of documentation, the only thing I'd like to clarify (maybe for those with less experience fuzzing) is that it is also possible to do `BUILD_FOR_FUZZING=ON` and `Debug` mode, if having a fuzz-only debug build is preferred.",
      "user": {
        "login": "marcofleon",
        "id": 95179662,
        "node_id": "U_kgDOBaxTjg",
        "avatar_url": "https://avatars.githubusercontent.com/u/95179662?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/marcofleon",
        "html_url": "https://github.com/marcofleon",
        "followers_url": "https://api.github.com/users/marcofleon/followers",
        "following_url": "https://api.github.com/users/marcofleon/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/marcofleon/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/marcofleon/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/marcofleon/subscriptions",
        "organizations_url": "https://api.github.com/users/marcofleon/orgs",
        "repos_url": "https://api.github.com/users/marcofleon/repos",
        "events_url": "https://api.github.com/users/marcofleon/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/marcofleon/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#pullrequestreview-2747432383",
      "submitted_at": "2025-04-07T16:28:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
    },
    {
      "event": "commented",
      "id": 2801960765,
      "node_id": "IC_kwDOABII586nAoc9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2801960765",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-14T14:43:57Z",
      "updated_at": "2025-04-14T14:43:57Z",
      "author_association": "MEMBER",
      "body": "(My feedback isn't a blocker for merge here, I can also fix it in a follow-up)",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#issuecomment-2801960765",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32113"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2008700665",
      "pull_request_review_id": 2707929839,
      "id": 2008700665,
      "node_id": "PRRC_kwDOABII5853ulb5",
      "diff_hunk": "@@ -33,3 +33,9 @@ void assertion_fail(std::string_view file, int line, std::string_view func, std:\n     fwrite(str.data(), 1, str.size(), stderr);\n     std::abort();\n }\n+\n+bool EnableFuzzDeterminismDynamic()\n+{\n+    static bool fuzz_determinism = std::getenv(\"FUZZ_DETERMINISM\") != nullptr;",
      "path": "src/util/check.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "e8d04ba08670d5a397abbff02815a919b583a592",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Forgot to mention this, but to me it seems simpler to have the program automatically set this. Otherwise, it is just busy work for the dev.\r\n\r\nin `src/test/fuzz/fuzz.cpp` you can set it to true, and default it to false, no?\r\n\r\nThis is also the code prior to the changes in https://github.com/bitcoin/bitcoin/pull/31191/files",
      "created_at": "2025-03-22T07:19:37Z",
      "updated_at": "2025-03-22T07:19:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2008700665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2008700665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2008731010",
      "pull_request_review_id": 2707979686,
      "id": 2008731010,
      "node_id": "PRRC_kwDOABII5853us2C",
      "diff_hunk": "@@ -33,3 +33,9 @@ void assertion_fail(std::string_view file, int line, std::string_view func, std:\n     fwrite(str.data(), 1, str.size(), stderr);\n     std::abort();\n }\n+\n+bool EnableFuzzDeterminismDynamic()\n+{\n+    static bool fuzz_determinism = std::getenv(\"FUZZ_DETERMINISM\") != nullptr;",
      "path": "src/util/check.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "e8d04ba08670d5a397abbff02815a919b583a592",
      "in_reply_to_id": 2008700665,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Oh yeah, that's obviously better.",
      "created_at": "2025-03-22T09:28:53Z",
      "updated_at": "2025-03-22T09:28:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2008731010",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2008731010"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2009712764",
      "pull_request_review_id": 2709566400,
      "id": 2009712764,
      "node_id": "PRRC_kwDOABII5853ych8",
      "diff_hunk": "@@ -147,10 +147,18 @@ static void initialize()\n         std::cerr << \"No fuzz target compiled for \" << g_fuzz_target << \".\" << std::endl;\n         std::exit(EXIT_FAILURE);\n     }\n-    if constexpr (!G_FUZZING) {\n-        std::cerr << \"Must compile with -DBUILD_FOR_FUZZING=ON to execute a fuzz target.\" << std::endl;\n+    if constexpr (!G_FUZZING && !G_ABORT_ON_FAILED_ASSUME) {\n+        std::cerr << \"Must compile with -DBUILD_FOR_FUZZING=ON or in Debug mode to execute a fuzz target.\" << std::endl;\n         std::exit(EXIT_FAILURE);\n     }\n+    if (!EnableFuzzDeterminism()) {\n+        if (std::getenv(\"FUZZ_NONDETERMINISM\")) {\n+            std::cerr << \"Warning: FUZZ_NONDETERMINISM env var set, results may be inconsistent with fuzz build\" << std::endl;\n+        } else {\n+            g_enable_dynamic_fuzz_determinism = true;\n+            assert(EnableFuzzDeterminism());\n+        }",
      "path": "src/test/fuzz/fuzz.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is there a use-case for FUZZ_NONDETERMINISM? IIRC the goal of this change was to achieve fuzz determinism, so adding non-determinism could be left for a follow-up? I'd even argue that it may be better to not add at all, because it is such an edge case that no one will be using it. However, it existing, implies that reviewers will have to take it into account every time, which doesn't seem worth it.\r\n\r\nIf you remove it, you can also move the `assert(EnableFuzzDeterminism());` before `Assert(!g_test_one_input);`, so that it is executed unconditionally.\r\n\r\nedit: nit: The `g_enable_dynamic_fuzz_determinism` could probably be a plain `bool` (without atomic).\r\n",
      "created_at": "2025-03-24T08:39:44Z",
      "updated_at": "2025-03-24T08:40:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2009712764",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2009712764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": 155,
      "original_start_line": 155,
      "start_side": "RIGHT",
      "line": 160,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2009964213",
      "pull_request_review_id": 2710003260,
      "id": 2009964213,
      "node_id": "PRRC_kwDOABII5853zZ61",
      "diff_hunk": "@@ -147,10 +147,18 @@ static void initialize()\n         std::cerr << \"No fuzz target compiled for \" << g_fuzz_target << \".\" << std::endl;\n         std::exit(EXIT_FAILURE);\n     }\n-    if constexpr (!G_FUZZING) {\n-        std::cerr << \"Must compile with -DBUILD_FOR_FUZZING=ON to execute a fuzz target.\" << std::endl;\n+    if constexpr (!G_FUZZING && !G_ABORT_ON_FAILED_ASSUME) {\n+        std::cerr << \"Must compile with -DBUILD_FOR_FUZZING=ON or in Debug mode to execute a fuzz target.\" << std::endl;\n         std::exit(EXIT_FAILURE);\n     }\n+    if (!EnableFuzzDeterminism()) {\n+        if (std::getenv(\"FUZZ_NONDETERMINISM\")) {\n+            std::cerr << \"Warning: FUZZ_NONDETERMINISM env var set, results may be inconsistent with fuzz build\" << std::endl;\n+        } else {\n+            g_enable_dynamic_fuzz_determinism = true;\n+            assert(EnableFuzzDeterminism());\n+        }",
      "path": "src/test/fuzz/fuzz.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": 2009712764,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Personally, I'd prefer to run the fuzz corpora against the actual logic not the stubbed out logic, so I'd personally rather run with `FUZZ_NONDETERMINISM` set. I don't see why reviewers would have to take this into account at all; it's just an alternate way to exercise test code, it has no effect on production code.",
      "created_at": "2025-03-24T11:09:49Z",
      "updated_at": "2025-03-24T11:09:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2009964213",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2009964213"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": 155,
      "original_start_line": 155,
      "start_side": "RIGHT",
      "line": 160,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2010343421",
      "pull_request_review_id": 2710675645,
      "id": 2010343421,
      "node_id": "PRRC_kwDOABII585302f9",
      "diff_hunk": "@@ -20,6 +21,26 @@ constexpr bool G_FUZZING{\n     false\n #endif\n };\n+constexpr bool G_ABORT_ON_FAILED_ASSUME{\n+#ifdef ABORT_ON_FAILED_ASSUME\n+    true\n+#else\n+    false\n+#endif\n+};\n+\n+extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\n+\n+inline bool EnableFuzzDeterminism()\n+{\n+    if constexpr (G_FUZZING) {\n+        return true;\n+    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\n+        return false;",
      "path": "src/util/check.h",
      "position": null,
      "original_position": 27,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"fuzz: enable running fuzz test cases in Debug mode\" (1718da848a0a7591f0eab086e159f1e9e0f2c59b)\r\n\r\nI don't think I the understand reason for ABORT_ON_FAILED_ASSUME affecting return value of EnableFuzzDeterminism(), and trying to force non-determinism when assume doesn't abort. It seems like this behavior might cause the `assert(EnableFuzzDeterminism())` to fail, but also this code might just be easier to understand if fuzz determinism only depended on the FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION build option and FUZZ_NONDETERMINISM environment variable and didn't have this third factor.\r\n\r\nIs the reason maybe that this is trying to optimize code and avoid needing to access the `g_enable_dynamic_fuzz_determinism` variable in release builds? IMO would be good to either remove the !G_ABORT_ON_FAILED_ASSUME condition or document why it's here.",
      "created_at": "2025-03-24T14:52:42Z",
      "updated_at": "2025-03-24T14:53:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2010343421",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2010343421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2013597677",
      "pull_request_review_id": 2716241163,
      "id": 2013597677,
      "node_id": "PRRC_kwDOABII5854BQ_t",
      "diff_hunk": "@@ -20,6 +21,26 @@ constexpr bool G_FUZZING{\n     false\n #endif\n };\n+constexpr bool G_ABORT_ON_FAILED_ASSUME{\n+#ifdef ABORT_ON_FAILED_ASSUME\n+    true\n+#else\n+    false\n+#endif\n+};\n+\n+extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\n+\n+inline bool EnableFuzzDeterminism()\n+{\n+    if constexpr (G_FUZZING) {\n+        return true;\n+    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\n+        return false;",
      "path": "src/util/check.h",
      "position": null,
      "original_position": 27,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": 2010343421,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Is the reason maybe that this is trying to optimize code and avoid needing to access the `g_enable_dynamic_fuzz_determinism` variable in release builds?\r\n\r\nYes, that's the reason as I understand it. I am happy to re-ack a simple doc fixup like:\r\n\r\n```cpp\r\nreturn false; // Allow optimized code for release builds (non-fuzz and non-debug).",
      "created_at": "2025-03-26T08:17:51Z",
      "updated_at": "2025-03-26T08:17:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2013597677",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2013597677"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2013687204",
      "pull_request_review_id": 2716388364,
      "id": 2013687204,
      "node_id": "PRRC_kwDOABII5854Bm2k",
      "diff_hunk": "@@ -20,6 +21,26 @@ constexpr bool G_FUZZING{\n     false\n #endif\n };\n+constexpr bool G_ABORT_ON_FAILED_ASSUME{\n+#ifdef ABORT_ON_FAILED_ASSUME\n+    true\n+#else\n+    false\n+#endif\n+};\n+\n+extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\n+\n+inline bool EnableFuzzDeterminism()\n+{\n+    if constexpr (G_FUZZING) {\n+        return true;\n+    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\n+        return false;",
      "path": "src/util/check.h",
      "position": null,
      "original_position": 27,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": 2010343421,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I don't think I the understand reason for ABORT_ON_FAILED_ASSUME affecting return value of EnableFuzzDeterminism(), and trying to force non-determinism when assume doesn't abort.\r\n\r\nThe initial thought was actually more that the running the fuzz tests without Assumes being checked isn't going to be anywhere near as thorough, particularly influenced by the logic documented in #32100. Added some comment text on this.",
      "created_at": "2025-03-26T09:14:31Z",
      "updated_at": "2025-03-26T09:14:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2013687204",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2013687204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2027076543",
      "pull_request_review_id": 2739879114,
      "id": 2027076543,
      "node_id": "PRRC_kwDOABII58540ru_",
      "diff_hunk": "@@ -20,6 +21,26 @@ constexpr bool G_FUZZING{\n     false\n #endif\n };\n+constexpr bool G_ABORT_ON_FAILED_ASSUME{\n+#ifdef ABORT_ON_FAILED_ASSUME\n+    true\n+#else\n+    false\n+#endif\n+};\n+\n+extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\n+\n+inline bool EnableFuzzDeterminism()\n+{\n+    if constexpr (G_FUZZING) {\n+        return true;\n+    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\n+        return false;",
      "path": "src/util/check.h",
      "position": null,
      "original_position": 27,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": 2010343421,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2013687204\r\n\r\nThanks, new comment definitely helps and makes it clear why it is safe to return false here. The thing comment doesn't explain is why the `else if constexpr (!G_ABORT_ON_FAILED_ASSUME)` block is needed at all. It seems like if you removed it behavior would be the same because `g_enable_dynamic_fuzz_determinism` would already be false. (because it is false by default and fuzz binary won't run at all in this case so won't set g_enable_dynamic_fuzz_determinism to true).\r\n\r\nSo maybe the best rationale for keeping this check is the one Marco gave, as an optimization to make CheckProofOfWork() faster in release builds, since CheckProofOfWork() is the only non-test function running in release build that calls EnableFuzzDeterminism().\r\n\r\nI am not really sure the constexpr optimizations in this PR are really worth the complexity they add, but they seem fine and reasonable to keep to be conservative.",
      "created_at": "2025-04-03T14:04:46Z",
      "updated_at": "2025-04-03T14:27:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2027076543",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2027076543"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2027176298",
      "pull_request_review_id": 2740181284,
      "id": 2027176298,
      "node_id": "PRRC_kwDOABII58541EFq",
      "diff_hunk": "@@ -20,6 +21,26 @@ constexpr bool G_FUZZING{\n     false\n #endif\n };\n+constexpr bool G_ABORT_ON_FAILED_ASSUME{\n+#ifdef ABORT_ON_FAILED_ASSUME\n+    true\n+#else\n+    false\n+#endif\n+};\n+\n+extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\n+\n+inline bool EnableFuzzDeterminism()\n+{\n+    if constexpr (G_FUZZING) {\n+        return true;\n+    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\n+        return false;",
      "path": "src/util/check.h",
      "position": null,
      "original_position": 27,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": 2010343421,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Another reason to have the `constexpr` condition here, even if it is redundant and possibly doesn't result in a speed-up, is that it serves as a belt-and-suspenders when  `g_enable_dynamic_fuzz_determinism` is erroneously set in the release build, or a reviewer wonders if such thing is possible. Having a plain hard-coded `return false` is a clear and easy answer for humans and compilers.",
      "created_at": "2025-04-03T14:48:01Z",
      "updated_at": "2025-04-03T14:48:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2027176298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2027176298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2027212322",
      "pull_request_review_id": 2740245324,
      "id": 2027212322,
      "node_id": "PRRC_kwDOABII58541M4i",
      "diff_hunk": "@@ -20,6 +21,26 @@ constexpr bool G_FUZZING{\n     false\n #endif\n };\n+constexpr bool G_ABORT_ON_FAILED_ASSUME{\n+#ifdef ABORT_ON_FAILED_ASSUME\n+    true\n+#else\n+    false\n+#endif\n+};\n+\n+extern std::atomic<bool> g_enable_dynamic_fuzz_determinism;\n+\n+inline bool EnableFuzzDeterminism()\n+{\n+    if constexpr (G_FUZZING) {\n+        return true;\n+    } else if constexpr (!G_ABORT_ON_FAILED_ASSUME) {\n+        return false;",
      "path": "src/util/check.h",
      "position": null,
      "original_position": 27,
      "commit_id": "c94e02c1b2017ac054eb6a373ca5f31c589bc601",
      "original_commit_id": "1718da848a0a7591f0eab086e159f1e9e0f2c59b",
      "in_reply_to_id": 2010343421,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Also, just because there may not be a performance difference today, doesn't mean there will be none in the future. So just to avoid to having to touch all of this code again in the future, it seems best to keep this `constexpr`.",
      "created_at": "2025-04-03T15:05:31Z",
      "updated_at": "2025-04-03T15:05:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32113#discussion_r2027212322",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2027212322"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32113"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 43,
      "side": "RIGHT"
    }
  ]
}